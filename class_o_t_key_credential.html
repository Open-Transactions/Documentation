<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Open-Transactions: OTKeyCredential Class Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Open-Transactions
   &#160;<span id="projectnumber">master/1066fb4910a63ee3f7de8e0807fee3eb663b66c7</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('class_o_t_key_credential.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#friends">Friends</a>  </div>
  <div class="headertitle">
<div class="title">OTKeyCredential Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<!-- doxytag: class="OTKeyCredential" --><!-- doxytag: inherits="OTSubcredential" -->
<p><code>#include &lt;<a class="el" href="_o_t_key_credential_8hpp_source.html">OTKeyCredential.hpp</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for OTKeyCredential:</div>
<div class="dyncontent">
 <div class="center">
  <img src="class_o_t_key_credential.png" usemap="#OTKeyCredential_map" alt=""/>
  <map id="OTKeyCredential_map" name="OTKeyCredential_map">
<area href="class_o_t_subcredential.html" alt="OTSubcredential" shape="rect" coords="59,56,168,80"/>
<area href="class_o_t_contract.html" alt="OTContract" shape="rect" coords="59,0,168,24"/>
<area href="class_o_t_masterkey.html" alt="OTMasterkey" shape="rect" coords="0,168,109,192"/>
<area href="class_o_t_subkey.html" alt="OTSubkey" shape="rect" coords="119,168,228,192"/>
</map>
 </div></div>

<p><a href="class_o_t_key_credential-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_key_credential.html#acd27813be407fe1130b501d3b12ede85">GenerateKeys</a> (int32_t nBits=1024)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_key_credential.html#a1f7f29a88d15b974b8ac583a89a00ba5">ReEncryptKeys</a> (<a class="el" href="class_o_t_password.html">OTPassword</a> &amp;theExportPassword, bool bImporting)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_key_credential.html#a2fe63b1ac17a3ddbc10ebdd33c05e812">VerifyInternally</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_key_credential.html#a94cd195bfe92f7c2a36ac6f264243540">VerifySignedBySelf</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_key_credential.html#a0fc4da073af06c53280f58ed38291890">SetMetadata</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_key_credential.html#a561c96fcf57e5dbdced60885f73c4332">OTKeyCredential</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_key_credential.html#a195e1f7e316545948e2f694046af92c3">OTKeyCredential</a> (<a class="el" href="class_o_t_credential.html">OTCredential</a> &amp;theOwner)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_key_credential.html#af44f4b8860f575b7b0fdd4cc8e27023a">SignContract</a> (<a class="el" href="class_o_t_contract.html">OTContract</a> &amp;theContract, <a class="el" href="class_o_t_password_data.html">OTPasswordData</a> *pPWData=NULL)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_key_credential.html#a7046ca845b6fa346e41e239c818e4aa6">GetPublicKeysBySignature</a> (<a class="el" href="_o_t_asymmetric_key_8hpp.html#ada6127549a4970b60a8939215dd89ddb">listOfAsymmetricKeys</a> &amp;listOutput, const <a class="el" href="class_o_t_signature.html">OTSignature</a> &amp;theSignature, char cKeyType='0') const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_key_credential.html#af1466fbae22d0bdf47fc7f50d18d925f">~OTKeyCredential</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_key_credential.html#ae032b6a4ef28d42cb268b904d866585d">Release</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_key_credential.html#a82d7289f2366b9873ddb2449ddd7c873">Release_Subkey</a> ()</td></tr>
<tr><td colspan="2"><h2><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_o_t_keypair.html">OTKeypair</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_key_credential.html#a3c92bcfa894923996931488cb960e6ad">m_SigningKey</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_o_t_keypair.html">OTKeypair</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_key_credential.html#a01002807ce374cc8b974b9c2be5b2fad">m_AuthentKey</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_o_t_keypair.html">OTKeypair</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_key_credential.html#ac84c9320e8f1cd4add630626c5f44a04">m_EncryptKey</a></td></tr>
<tr><td colspan="2"><h2><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_key_credential.html#a53f8693b23088f568bb52b0bc17e277e">SetPublicContents</a> (const <a class="el" href="_o_t_string_8hpp.html#a7ec7839682b097a5c5b5c5125046c82b">mapOfStrings</a> &amp;mapPublic)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_key_credential.html#a6ddd3ec0531da0115eae195d3e6290d5">SetPrivateContents</a> (const <a class="el" href="_o_t_string_8hpp.html#a7ec7839682b097a5c5b5c5125046c82b">mapOfStrings</a> &amp;mapPrivate, <a class="el" href="class_o_t_password.html">OTPassword</a> *pImportPassword=NULL)</td></tr>
<tr><td colspan="2"><h2><a name="friends"></a>
Friends</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_key_credential.html#a343589d388801d917dfc77e1113c3970">OTCredential</a></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p><a class="el" href="class_o_t_key_credential.html">OTKeyCredential</a> A form of <a class="el" href="class_o_t_subcredential.html">OTSubcredential</a> that contains 3 key pairs: signing, authentication, and encryption. We won't use <a class="el" href="class_o_t_key_credential.html">OTKeyCredential</a> directly but only as a common base class for <a class="el" href="class_o_t_subkey.html">OTSubkey</a> and <a class="el" href="class_o_t_masterkey.html">OTMasterkey</a>. </p>

<p>Definition at line <a class="el" href="_o_t_key_credential_8hpp_source.html#l00232">232</a> of file <a class="el" href="_o_t_key_credential_8hpp_source.html">OTKeyCredential.hpp</a>.</p>
</div><hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a561c96fcf57e5dbdced60885f73c4332"></a><!-- doxytag: member="OTKeyCredential::OTKeyCredential" ref="a561c96fcf57e5dbdced60885f73c4332" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_key_credential.html#a561c96fcf57e5dbdced60885f73c4332">OTKeyCredential::OTKeyCredential</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_key_credential_8cpp_source.html#l00249">249</a> of file <a class="el" href="_o_t_key_credential_8cpp_source.html">OTKeyCredential.cpp</a>.</p>
<div class="fragment"><pre class="fragment">: ot_super()         { }
</pre></div>
</div>
</div>
<a class="anchor" id="a195e1f7e316545948e2f694046af92c3"></a><!-- doxytag: member="OTKeyCredential::OTKeyCredential" ref="a195e1f7e316545948e2f694046af92c3" args="(OTCredential &amp;theOwner)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_key_credential.html#a561c96fcf57e5dbdced60885f73c4332">OTKeyCredential::OTKeyCredential</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_credential.html">OTCredential</a> &amp;&#160;</td>
          <td class="paramname"><em>theOwner</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_key_credential_8cpp_source.html#l00250">250</a> of file <a class="el" href="_o_t_key_credential_8cpp_source.html">OTKeyCredential.cpp</a>.</p>
<div class="fragment"><pre class="fragment">: ot_super(theOwner) { }
</pre></div>
</div>
</div>
<a class="anchor" id="af1466fbae22d0bdf47fc7f50d18d925f"></a><!-- doxytag: member="OTKeyCredential::~OTKeyCredential" ref="af1466fbae22d0bdf47fc7f50d18d925f" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_key_credential.html#af1466fbae22d0bdf47fc7f50d18d925f">OTKeyCredential::~OTKeyCredential</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_key_credential_8cpp_source.html#l00253">253</a> of file <a class="el" href="_o_t_key_credential_8cpp_source.html">OTKeyCredential.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_o_t_key_credential.html#a82d7289f2366b9873ddb2449ddd7c873">Release_Subkey</a>();
}
</pre></div>
</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="acd27813be407fe1130b501d3b12ede85"></a><!-- doxytag: member="OTKeyCredential::GenerateKeys" ref="acd27813be407fe1130b501d3b12ede85" args="(int32_t nBits=1024)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_key_credential.html#acd27813be407fe1130b501d3b12ede85">OTKeyCredential::GenerateKeys</a> </td>
          <td>(</td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>nBits</em> = <code>1024</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_key_credential_8cpp_source.html#l00275">275</a> of file <a class="el" href="_o_t_key_credential_8cpp_source.html">OTKeyCredential.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keyword">const</span> <span class="keywordtype">bool</span> bSign = <a class="code" href="class_o_t_key_credential.html#a3c92bcfa894923996931488cb960e6ad">m_SigningKey</a>.<a class="code" href="class_o_t_keypair.html#aade0cd755f82672f25d1971dd59db688">MakeNewKeypair</a>(nBits);
    <span class="keyword">const</span> <span class="keywordtype">bool</span> bAuth = <a class="code" href="class_o_t_key_credential.html#a01002807ce374cc8b974b9c2be5b2fad">m_AuthentKey</a>.<a class="code" href="class_o_t_keypair.html#aade0cd755f82672f25d1971dd59db688">MakeNewKeypair</a>(nBits);
    <span class="keyword">const</span> <span class="keywordtype">bool</span> bEncr = <a class="code" href="class_o_t_key_credential.html#ac84c9320e8f1cd4add630626c5f44a04">m_EncryptKey</a>.<a class="code" href="class_o_t_keypair.html#aade0cd755f82672f25d1971dd59db688">MakeNewKeypair</a>(nBits);
    <span class="comment">// ----------------------------------------------</span>
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(bSign &amp;&amp; bAuth &amp;&amp; bEncr);
    <span class="comment">// ----------------------------------------------</span>
    <a class="code" href="class_o_t_key_credential.html#a3c92bcfa894923996931488cb960e6ad">m_SigningKey</a>.<a class="code" href="class_o_t_keypair.html#af431803f4f3e6635d4ecf71c211b2873">SaveAndReloadBothKeysFromTempFile</a>();  <span class="comment">// Keys won&#39;t be right until this happens.</span>
    <a class="code" href="class_o_t_key_credential.html#a01002807ce374cc8b974b9c2be5b2fad">m_AuthentKey</a>.<a class="code" href="class_o_t_keypair.html#af431803f4f3e6635d4ecf71c211b2873">SaveAndReloadBothKeysFromTempFile</a>();  <span class="comment">// (Necessary evil until better fix.)</span>
    <a class="code" href="class_o_t_key_credential.html#ac84c9320e8f1cd4add630626c5f44a04">m_EncryptKey</a>.<a class="code" href="class_o_t_keypair.html#af431803f4f3e6635d4ecf71c211b2873">SaveAndReloadBothKeysFromTempFile</a>();
    <span class="comment">// ----------------------------------------------</span>
    <span class="comment">// Since the keys were all generated successfully, we need to copy their</span>
    <span class="comment">// certificate data into the m_mapPublicInfo and m_mapPrivateInfo (string maps.)</span>
    <span class="comment">//</span>
    <a class="code" href="class_o_t_string.html">OTString</a>     strPublicKey, strPrivateCert;
    <a class="code" href="_o_t_string_8hpp.html#a7ec7839682b097a5c5b5c5125046c82b">mapOfStrings</a> mapPublic,    mapPrivate;
    <span class="comment">// ------------------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strReason(<span class="stringliteral">&quot;Generating keys for new credential...&quot;</span>);
    <span class="comment">// ------------------------------------------                </span>
    <span class="keyword">const</span> <span class="keywordtype">bool</span> b1 = <a class="code" href="class_o_t_key_credential.html#a3c92bcfa894923996931488cb960e6ad">m_SigningKey</a>.<a class="code" href="class_o_t_keypair.html#a67aebd0a39826bbc429bb2676fde9fcd">GetPublicKey</a>(strPublicKey, <span class="keyword">false</span>); <span class="comment">// bEscaped=true by default.</span>
    <span class="keyword">const</span> <span class="keywordtype">bool</span> b2 = <a class="code" href="class_o_t_key_credential.html#a3c92bcfa894923996931488cb960e6ad">m_SigningKey</a>.<a class="code" href="class_o_t_keypair.html#a856051cd5e93e30a8f166dd8132ed844">SaveCertAndPrivateKeyToString</a>(strPrivateCert, &amp;strReason);
    
    <span class="keywordflow">if</span> (b1)
        mapPublic. insert(std::pair&lt;std::string, std::string&gt;(<span class="stringliteral">&quot;S&quot;</span>, strPublicKey.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>()));
    <span class="keywordflow">if</span> (b2)
        mapPrivate.insert(std::pair&lt;std::string, std::string&gt;(<span class="stringliteral">&quot;S&quot;</span>, strPrivateCert.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>()));
    <span class="comment">// ------------------------------------------------------------------------------------------</span>
    strPublicKey.  <a class="code" href="class_o_t_key_credential.html#ae032b6a4ef28d42cb268b904d866585d">Release</a>();
    strPrivateCert.<a class="code" href="class_o_t_string.html#abef4b21b2170468705c58d64212d7257">Release</a>();
    <span class="keyword">const</span> <span class="keywordtype">bool</span> b3 = <a class="code" href="class_o_t_key_credential.html#a01002807ce374cc8b974b9c2be5b2fad">m_AuthentKey</a>.<a class="code" href="class_o_t_keypair.html#a67aebd0a39826bbc429bb2676fde9fcd">GetPublicKey</a>(strPublicKey, <span class="keyword">false</span>); <span class="comment">// bEscaped=true by default.</span>
    <span class="keyword">const</span> <span class="keywordtype">bool</span> b4 = <a class="code" href="class_o_t_key_credential.html#a01002807ce374cc8b974b9c2be5b2fad">m_AuthentKey</a>.<a class="code" href="class_o_t_keypair.html#a856051cd5e93e30a8f166dd8132ed844">SaveCertAndPrivateKeyToString</a>(strPrivateCert, &amp;strReason);                
    
    <span class="keywordflow">if</span> (b3)
        mapPublic. insert(std::pair&lt;std::string, std::string&gt;(<span class="stringliteral">&quot;A&quot;</span>, strPublicKey.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>()));
    <span class="keywordflow">if</span> (b4)
        mapPrivate.insert(std::pair&lt;std::string, std::string&gt;(<span class="stringliteral">&quot;A&quot;</span>, strPrivateCert.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>()));
    <span class="comment">// ------------------------------------------------------------------------------------------</span>
    strPublicKey.  <a class="code" href="class_o_t_key_credential.html#ae032b6a4ef28d42cb268b904d866585d">Release</a>();
    strPrivateCert.<a class="code" href="class_o_t_string.html#abef4b21b2170468705c58d64212d7257">Release</a>();
    <span class="keyword">const</span> <span class="keywordtype">bool</span> b5 = <a class="code" href="class_o_t_key_credential.html#ac84c9320e8f1cd4add630626c5f44a04">m_EncryptKey</a>.<a class="code" href="class_o_t_keypair.html#a67aebd0a39826bbc429bb2676fde9fcd">GetPublicKey</a>(strPublicKey, <span class="keyword">false</span>); <span class="comment">// bEscaped=true by default.</span>
    <span class="keyword">const</span> <span class="keywordtype">bool</span> b6 = <a class="code" href="class_o_t_key_credential.html#ac84c9320e8f1cd4add630626c5f44a04">m_EncryptKey</a>.<a class="code" href="class_o_t_keypair.html#a856051cd5e93e30a8f166dd8132ed844">SaveCertAndPrivateKeyToString</a>(strPrivateCert, &amp;strReason);
    
    <span class="keywordflow">if</span> (b5)
        mapPublic. insert(std::pair&lt;std::string, std::string&gt;(<span class="stringliteral">&quot;E&quot;</span>, strPublicKey.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>()));
    <span class="keywordflow">if</span> (b6)
        mapPrivate.insert(std::pair&lt;std::string, std::string&gt;(<span class="stringliteral">&quot;E&quot;</span>, strPrivateCert.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>()));
    <span class="comment">// ------------------------------------------</span>
    <span class="keywordflow">if</span> (3 != mapPublic.size())
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;In %s, line %d: Failed getting public keys in OTKeyCredential::GenerateKeys.\n&quot;</span>,
                      __FILE__, __LINE__);
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="keywordflow">else</span>
        this-&gt;<a class="code" href="class_o_t_subcredential.html#a0f5e48ea0cb04055746b9f8793359d6c">ot_super::SetPublicContents</a>(mapPublic);
    <span class="comment">// --------------------------------</span>
    <span class="keywordflow">if</span> (3 != mapPrivate.size())
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;In %s, line %d: Failed getting private keys in OTKeyCredential::GenerateKeys.\n&quot;</span>,
                      __FILE__, __LINE__);
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="keywordflow">else</span>
        this-&gt;<a class="code" href="class_o_t_subcredential.html#a0a93c4d8931e043cc470ccbd153710a5">ot_super::SetPrivateContents</a>(mapPrivate);
    <span class="comment">// --------------------------------</span>
    <span class="keywordflow">return</span> <span class="keyword">true</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a7046ca845b6fa346e41e239c818e4aa6"></a><!-- doxytag: member="OTKeyCredential::GetPublicKeysBySignature" ref="a7046ca845b6fa346e41e239c818e4aa6" args="(listOfAsymmetricKeys &amp;listOutput, const OTSignature &amp;theSignature, char cKeyType='0') const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_key_credential.html#a7046ca845b6fa346e41e239c818e4aa6">OTKeyCredential::GetPublicKeysBySignature</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_o_t_asymmetric_key_8hpp.html#ada6127549a4970b60a8939215dd89ddb">listOfAsymmetricKeys</a> &amp;&#160;</td>
          <td class="paramname"><em>listOutput</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_signature.html">OTSignature</a> &amp;&#160;</td>
          <td class="paramname"><em>theSignature</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>cKeyType</em> = <code>'0'</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_key_credential_8cpp_source.html#l00180">180</a> of file <a class="el" href="_o_t_key_credential_8cpp_source.html">OTKeyCredential.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// Key type was not specified, because we only want keys that match the metadata on theSignature.</span>
    <span class="comment">// And if theSignature has no metadata, then we want to return 0 keys.</span>
    <span class="keywordflow">if</span> ((  <span class="charliteral">&#39;0&#39;</span> == cKeyType) &amp;&amp;
        (<span class="keyword">false</span> == theSignature.<a class="code" href="class_o_t_signature.html#ab82c216636edf6583efa7e5344b3c6e0">m_metadata</a>.<a class="code" href="class_o_t_signature_metadata.html#a026c60514737f48d1dd2a0643d1d431f">HasMetadata</a>()))
        <span class="keywordflow">return</span> 0;
    <span class="comment">// -----------------</span>
    <span class="comment">// By this point, we know that EITHER exact metadata matches must occur, and the signature DOES have metadata, (&#39;0&#39;)</span>
    <span class="comment">// OR the search is only for &#39;A&#39;, &#39;E&#39;, or &#39;S&#39; candidates, based on cKeyType, and that the signature&#39;s metadata</span>
    <span class="comment">// can additionally narrow the search down, if it&#39;s present, which in this case it&#39;s not guaranteed to be.</span>
    int32_t nCount = 0;
    <span class="keywordflow">switch</span> (cKeyType)
    {
            <span class="comment">// Specific search only for signatures with metadata.</span>
        <span class="keywordflow">case</span> <span class="charliteral">&#39;0&#39;</span>:
        {   <span class="comment">// FYI, theSignature.m_metadata.HasMetadata() is true, in this case.</span>
            <span class="comment">// That&#39;s why I can just assume theSignature has a key type here:</span>
            <span class="keywordflow">switch</span> (theSignature.<a class="code" href="class_o_t_signature.html#ab82c216636edf6583efa7e5344b3c6e0">m_metadata</a>.<a class="code" href="class_o_t_signature_metadata.html#a5192cdf8df6943cd27bb82cab59c0368">GetKeyType</a>())
            {
                <span class="keywordflow">case</span> <span class="charliteral">&#39;A&#39;</span>: nCount = <a class="code" href="class_o_t_key_credential.html#a01002807ce374cc8b974b9c2be5b2fad">m_AuthentKey</a>.<a class="code" href="class_o_t_keypair.html#ae735cba959b6d91b069cc71741adbb4c">GetPublicKeyBySignature</a>(listOutput, theSignature); <span class="keywordflow">break</span>; <span class="comment">// bInclusive=false by default</span>
                <span class="keywordflow">case</span> <span class="charliteral">&#39;E&#39;</span>: nCount = <a class="code" href="class_o_t_key_credential.html#ac84c9320e8f1cd4add630626c5f44a04">m_EncryptKey</a>.<a class="code" href="class_o_t_keypair.html#ae735cba959b6d91b069cc71741adbb4c">GetPublicKeyBySignature</a>(listOutput, theSignature); <span class="keywordflow">break</span>; <span class="comment">// bInclusive=false by default</span>
                <span class="keywordflow">case</span> <span class="charliteral">&#39;S&#39;</span>: nCount = <a class="code" href="class_o_t_key_credential.html#a3c92bcfa894923996931488cb960e6ad">m_SigningKey</a>.<a class="code" href="class_o_t_keypair.html#ae735cba959b6d91b069cc71741adbb4c">GetPublicKeyBySignature</a>(listOutput, theSignature); <span class="keywordflow">break</span>; <span class="comment">// bInclusive=false by default</span>
                <span class="keywordflow">default</span>: <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Unexpected value for theSignature.m_metadata.GetKeyType: %c (failure)\n&quot;</span>,
                                       __FUNCTION__, theSignature.<a class="code" href="class_o_t_signature.html#ab82c216636edf6583efa7e5344b3c6e0">m_metadata</a>.<a class="code" href="class_o_t_signature_metadata.html#a5192cdf8df6943cd27bb82cab59c0368">GetKeyType</a>()); <span class="keywordflow">return</span> 0;
            }
            <span class="keywordflow">break</span>;
        }
            <span class="comment">// Generalized search which specifies key type and returns keys</span>
            <span class="comment">// even for signatures with no metadata. (When metadata is present,</span>
            <span class="comment">// it&#39;s still used to eliminate keys.)</span>
        <span class="keywordflow">case</span> <span class="charliteral">&#39;A&#39;</span>: nCount = <a class="code" href="class_o_t_key_credential.html#a01002807ce374cc8b974b9c2be5b2fad">m_AuthentKey</a>.<a class="code" href="class_o_t_keypair.html#ae735cba959b6d91b069cc71741adbb4c">GetPublicKeyBySignature</a>(listOutput, theSignature, <span class="keyword">true</span>); <span class="keywordflow">break</span>; <span class="comment">// bInclusive=true</span>
        <span class="keywordflow">case</span> <span class="charliteral">&#39;E&#39;</span>: nCount = <a class="code" href="class_o_t_key_credential.html#ac84c9320e8f1cd4add630626c5f44a04">m_EncryptKey</a>.<a class="code" href="class_o_t_keypair.html#ae735cba959b6d91b069cc71741adbb4c">GetPublicKeyBySignature</a>(listOutput, theSignature, <span class="keyword">true</span>); <span class="keywordflow">break</span>; <span class="comment">// bInclusive=true</span>
        <span class="keywordflow">case</span> <span class="charliteral">&#39;S&#39;</span>: nCount = <a class="code" href="class_o_t_key_credential.html#a3c92bcfa894923996931488cb960e6ad">m_SigningKey</a>.<a class="code" href="class_o_t_keypair.html#ae735cba959b6d91b069cc71741adbb4c">GetPublicKeyBySignature</a>(listOutput, theSignature, <span class="keyword">true</span>); <span class="keywordflow">break</span>; <span class="comment">// bInclusive=true</span>
        <span class="keywordflow">default</span>:  <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Unexpected value for cKeyType (should be 0, A, E, or S): %c\n&quot;</span>,
                                __FUNCTION__, cKeyType); <span class="keywordflow">return</span> 0;
    }
    <span class="keywordflow">return</span> nCount;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a1f7f29a88d15b974b8ac583a89a00ba5"></a><!-- doxytag: member="OTKeyCredential::ReEncryptKeys" ref="a1f7f29a88d15b974b8ac583a89a00ba5" args="(OTPassword &amp;theExportPassword, bool bImporting)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_key_credential.html#a1f7f29a88d15b974b8ac583a89a00ba5">OTKeyCredential::ReEncryptKeys</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_password.html">OTPassword</a> &amp;&#160;</td>
          <td class="paramname"><em>theExportPassword</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>bImporting</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_key_credential_8cpp_source.html#l00570">570</a> of file <a class="el" href="_o_t_key_credential_8cpp_source.html">OTKeyCredential.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_o_t_string.html">OTString</a> strSign, strAuth, strEncr;
    <span class="comment">// ----------------------------------------</span>
    <span class="keyword">const</span> <span class="keywordtype">bool</span> bSign = <a class="code" href="class_o_t_key_credential.html#a3c92bcfa894923996931488cb960e6ad">m_SigningKey</a>.<a class="code" href="class_o_t_keypair.html#a419824f89809a794dec17b4a4d35f84e">ReEncrypt</a>(theExportPassword, bImporting, strSign);
          <span class="keywordtype">bool</span> bAuth = <span class="keyword">false</span>;
          <span class="keywordtype">bool</span> bEncr = <span class="keyword">false</span>;
    <span class="comment">// ----------------------------------------    </span>
    <span class="keywordflow">if</span> (bSign)
    {
        bAuth = <a class="code" href="class_o_t_key_credential.html#a01002807ce374cc8b974b9c2be5b2fad">m_AuthentKey</a>.<a class="code" href="class_o_t_keypair.html#a419824f89809a794dec17b4a4d35f84e">ReEncrypt</a>(theExportPassword, bImporting, strAuth);

        <span class="keywordflow">if</span> (bAuth)
            bEncr = <a class="code" href="class_o_t_key_credential.html#ac84c9320e8f1cd4add630626c5f44a04">m_EncryptKey</a>.<a class="code" href="class_o_t_keypair.html#a419824f89809a794dec17b4a4d35f84e">ReEncrypt</a>(theExportPassword, bImporting, strEncr);
    }
    <span class="comment">// ----------------------------------------</span>
    <span class="keyword">const</span> <span class="keywordtype">bool</span> bSuccessReEncrypting = (bSign &amp;&amp; bAuth &amp;&amp; bEncr);
          <span class="keywordtype">bool</span> bSuccess = <span class="keyword">false</span>;
    <span class="comment">// ----------------------------------------</span>
    <span class="comment">// If success, we now have the updated versions of the private certs.</span>
    <span class="comment">// </span>
    <span class="keywordflow">if</span> (bSuccessReEncrypting)
    {
        <a class="code" href="_o_t_string_8hpp.html#a7ec7839682b097a5c5b5c5125046c82b">mapOfStrings</a> mapPrivate;        
        <span class="comment">// ----------------------------------------</span>
        <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_string_8hpp.html#a7ec7839682b097a5c5b5c5125046c82b">mapOfStrings</a>, <a class="code" href="class_o_t_subcredential.html#af1b465d9f80a2d3309829369ab834755">m_mapPrivateInfo</a>)
        {
            std::string  str_key_type     = (*it).first;   <span class="comment">// A, E, S.</span>
            std::string  str_key_contents = (*it).second;
            <span class="comment">// ----------------------------------------</span>
            <span class="keywordflow">if</span> (<span class="stringliteral">&quot;A&quot;</span> == str_key_type)
            {
                mapPrivate.insert(std::pair&lt;std::string, std::string&gt;(<span class="stringliteral">&quot;A&quot;</span>, strAuth.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>()));
            }
            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="stringliteral">&quot;E&quot;</span> == str_key_type)
                mapPrivate.insert(std::pair&lt;std::string, std::string&gt;(<span class="stringliteral">&quot;E&quot;</span>, strEncr.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>()));
            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="stringliteral">&quot;S&quot;</span> == str_key_type)
                mapPrivate.insert(std::pair&lt;std::string, std::string&gt;(<span class="stringliteral">&quot;S&quot;</span>, strSign.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>()));
            <span class="comment">// ----------------------------------------</span>
            <span class="keywordflow">else</span> <span class="comment">// Should never happen, but if there are other keys here, we&#39;ll preserve &#39;em.</span>
            {
                mapPrivate.insert(std::pair&lt;std::string, std::string&gt;(str_key_type, str_key_contents));
                <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; <span class="comment">// really this should never happen.</span>
            }
        }
        <span class="comment">// ----------------------------------------</span>
        <span class="keywordflow">if</span> (3 != mapPrivate.size())
            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Unexpected, mapPrivate does not have exactly a size of 3. \n&quot;</span>, __FUNCTION__);
        <span class="comment">// ----------------------------------------</span>
        <span class="keywordflow">else</span>
        {
            <span class="comment">// Logic: If I&#39;m IMPORTING, bImporting is true, and that means the Nym WAS</span>
            <span class="comment">// encrypted to its own external passphrase (whenever it was exported) and</span>
            <span class="comment">// in order to IMPORT it, I re-encrypted all the keys from the exported passphrase,</span>
            <span class="comment">// to the wallet master key (this was done above in ReEncrypt.)</span>
            <span class="comment">// So now that I am loading up the private contents again based on those</span>
            <span class="comment">// re-encrypted keys, I will want to use the normal wallet master key to load</span>
            <span class="comment">// them. (So I pass NULL.)</span>
            <span class="comment">//</span>
            <span class="comment">// But if I&#39;m EXPORTING, bImporting is false, and that means the Nym WAS</span>
            <span class="comment">// encrypted to the wallet&#39;s master passphrase, until just above when I ReEncrypted</span>
            <span class="comment">// it to its own external passphrase. So now that I am attempting to reload the</span>
            <span class="comment">// keys based on this new external passphrase, I need to pass it in so it can be</span>
            <span class="comment">// used for that loading. (So I pass &amp;theExportPassword.)</span>
            <span class="comment">//</span>
            bSuccess = this-&gt;<a class="code" href="class_o_t_key_credential.html#a6ddd3ec0531da0115eae195d3e6290d5">SetPrivateContents</a>(mapPrivate, bImporting ? NULL : &amp;theExportPassword);
        }
    }
    <span class="comment">// ----------------------------------------</span>
    <span class="keywordflow">return</span> bSuccess; <span class="comment">// Note: Caller must re-sign credential after doing this, to keep these changes.</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae032b6a4ef28d42cb268b904d866585d"></a><!-- doxytag: member="OTKeyCredential::Release" ref="ae032b6a4ef28d42cb268b904d866585d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_key_credential.html#ae032b6a4ef28d42cb268b904d866585d">OTKeyCredential::Release</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reimplemented from <a class="el" href="class_o_t_subcredential.html#abe4ea0bc4cc80f06c12db078e17d6394">OTSubcredential</a>.</p>

<p>Definition at line <a class="el" href="_o_t_key_credential_8cpp_source.html#l00260">260</a> of file <a class="el" href="_o_t_key_credential_8cpp_source.html">OTKeyCredential.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_o_t_key_credential.html#a82d7289f2366b9873ddb2449ddd7c873">Release_Subkey</a>();   <span class="comment">// My own cleanup is done here.</span>
    
    <span class="comment">// Next give the base class a chance to do the same...</span>
    <a class="code" href="class_o_t_subcredential.html#abe4ea0bc4cc80f06c12db078e17d6394">ot_super::Release</a>(); <span class="comment">// since I&#39;ve overridden the base class, I call it now...</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="a82d7289f2366b9873ddb2449ddd7c873"></a><!-- doxytag: member="OTKeyCredential::Release_Subkey" ref="a82d7289f2366b9873ddb2449ddd7c873" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_key_credential.html#a82d7289f2366b9873ddb2449ddd7c873">OTKeyCredential::Release_Subkey</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_key_credential_8cpp_source.html#l00269">269</a> of file <a class="el" href="_o_t_key_credential_8cpp_source.html">OTKeyCredential.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// Release any dynamically allocated members here. (Normally.)</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="a0fc4da073af06c53280f58ed38291890"></a><!-- doxytag: member="OTKeyCredential::SetMetadata" ref="a0fc4da073af06c53280f58ed38291890" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_key_credential.html#a0fc4da073af06c53280f58ed38291890">OTKeyCredential::SetMetadata</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reimplemented from <a class="el" href="class_o_t_subcredential.html#a4349ce275b7fa2ce265967e15ec8ac99">OTSubcredential</a>.</p>

<p>Definition at line <a class="el" href="_o_t_key_credential_8cpp_source.html#l00643">643</a> of file <a class="el" href="_o_t_key_credential_8cpp_source.html">OTKeyCredential.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">bool</span> bMetadata         = <span class="keyword">false</span>;
    <span class="keywordtype">char</span> cMetaKeyType;            <span class="comment">// Can be A, E, or S (authentication, encryption, or signing. Also, E would be unusual.)</span>
    <span class="keywordtype">char</span> cMetaNymID        = <span class="charliteral">&#39;0&#39;</span>; <span class="comment">// Can be any letter from base62 alphabet. Represents first letter of a Nym&#39;s ID.</span>
    <span class="keywordtype">char</span> cMetaMasterCredID = <span class="charliteral">&#39;0&#39;</span>; <span class="comment">// Can be any letter from base62 alphabet. Represents first letter of a Master Credential ID (for that Nym.)</span>
    <span class="keywordtype">char</span> cMetaSubCredID    = <span class="charliteral">&#39;0&#39;</span>; <span class="comment">// Can be any letter from base62 alphabet. Represents first letter of a SubCredential ID (signed by that Master.)</span>
    <span class="comment">// ----------------------------------------------------</span>
    <a class="code" href="class_o_t_string.html">OTString</a> strSubcredID;
    this-&gt;<a class="code" href="class_o_t_contract.html#acf77d2db6da3904aa8b03e7b87c02e4e">GetIdentifier</a>(strSubcredID);
    <span class="comment">// ----------------------------------------------------</span>
    <span class="keyword">const</span> <span class="keywordtype">bool</span> bNymID  = this-&gt;<a class="code" href="class_o_t_subcredential.html#a7d841c2d684d40d8e028c0a2eaff7b36">GetNymID</a>()           .<a class="code" href="class_o_t_string.html#a0b183402da9a9ea6da94b3fcaa8740e8">At</a>(0, cMetaNymID);
    <span class="keyword">const</span> <span class="keywordtype">bool</span> bCredID = <a class="code" href="class_o_t_subcredential.html#a0e8c3cc27506617df4eb044a1c532383">m_pOwner</a>-&gt;<a class="code" href="class_o_t_credential.html#a1e99eeeb4d701f2ea9b56a1201a57680">GetMasterCredID</a>().<a class="code" href="class_o_t_string.html#a0b183402da9a9ea6da94b3fcaa8740e8">At</a>(0, cMetaMasterCredID);
    <span class="keyword">const</span> <span class="keywordtype">bool</span> bSubID  = strSubcredID               .<a class="code" href="class_o_t_string.html#a0b183402da9a9ea6da94b3fcaa8740e8">At</a>(0, cMetaSubCredID); <span class="comment">// In the case of the master credential, this will repeat the previous one.</span>

    <span class="keywordflow">if</span> (!bNymID || !bCredID || !bSubID)
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(1,<span class="stringliteral">&quot;%s: No metadata available:\n %s is %s, %s is %s, %s is %s&quot;</span>, __FUNCTION__,
            <span class="stringliteral">&quot;bNymID&quot;</span>, bNymID ? <span class="stringliteral">&quot;True&quot;</span>: <span class="stringliteral">&quot;False&quot;</span>,
            <span class="stringliteral">&quot;bCredID&quot;</span>,bNymID ? <span class="stringliteral">&quot;True&quot;</span>: <span class="stringliteral">&quot;False&quot;</span>,
            <span class="stringliteral">&quot;bSubID&quot;</span>, bNymID ? <span class="stringliteral">&quot;True&quot;</span>: <span class="stringliteral">&quot;False&quot;</span>);
    }

    <span class="comment">// ----------------------------------------------------</span>
    <a class="code" href="class_o_t_signature_metadata.html">OTSignatureMetadata</a> theMetadata;
    <span class="comment">// ----------------------------------------------------</span>
    cMetaKeyType   = <span class="charliteral">&#39;A&#39;</span>;
    bMetadata = theMetadata.<a class="code" href="class_o_t_signature_metadata.html#a9caa45f5ebeddf144117609344f9ddd4">SetMetadata</a>(cMetaKeyType, cMetaNymID, cMetaMasterCredID, cMetaSubCredID);
    <a class="code" href="class_o_t_key_credential.html#a01002807ce374cc8b974b9c2be5b2fad">m_AuthentKey</a>.<a class="code" href="class_o_t_keypair.html#a5b3981ab58f514f8b56cbd8e648f5d27">SetMetadata</a>(theMetadata);
    <span class="comment">// ----------------------------------------------------</span>
    cMetaKeyType   = <span class="charliteral">&#39;E&#39;</span>;
    bMetadata = theMetadata.<a class="code" href="class_o_t_signature_metadata.html#a9caa45f5ebeddf144117609344f9ddd4">SetMetadata</a>(cMetaKeyType, cMetaNymID, cMetaMasterCredID, cMetaSubCredID);
    <a class="code" href="class_o_t_key_credential.html#ac84c9320e8f1cd4add630626c5f44a04">m_EncryptKey</a>.<a class="code" href="class_o_t_keypair.html#a5b3981ab58f514f8b56cbd8e648f5d27">SetMetadata</a>(theMetadata);
    <span class="comment">// ----------------------------------------------------</span>
    cMetaKeyType   = <span class="charliteral">&#39;S&#39;</span>;
    bMetadata = theMetadata.<a class="code" href="class_o_t_signature_metadata.html#a9caa45f5ebeddf144117609344f9ddd4">SetMetadata</a>(cMetaKeyType, cMetaNymID, cMetaMasterCredID, cMetaSubCredID);
    <a class="code" href="class_o_t_key_credential.html#a3c92bcfa894923996931488cb960e6ad">m_SigningKey</a>.<a class="code" href="class_o_t_keypair.html#a5b3981ab58f514f8b56cbd8e648f5d27">SetMetadata</a>(theMetadata);
    <span class="comment">// ----------------------------------------------------</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="a6ddd3ec0531da0115eae195d3e6290d5"></a><!-- doxytag: member="OTKeyCredential::SetPrivateContents" ref="a6ddd3ec0531da0115eae195d3e6290d5" args="(const mapOfStrings &amp;mapPrivate, OTPassword *pImportPassword=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_key_credential.html#a6ddd3ec0531da0115eae195d3e6290d5">OTKeyCredential::SetPrivateContents</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="_o_t_string_8hpp.html#a7ec7839682b097a5c5b5c5125046c82b">mapOfStrings</a> &amp;&#160;</td>
          <td class="paramname"><em>mapPrivate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_password.html">OTPassword</a> *&#160;</td>
          <td class="paramname"><em>pImportPassword</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reimplemented from <a class="el" href="class_o_t_subcredential.html#a0a93c4d8931e043cc470ccbd153710a5">OTSubcredential</a>.</p>

<p>Definition at line <a class="el" href="_o_t_key_credential_8cpp_source.html#l00429">429</a> of file <a class="el" href="_o_t_key_credential_8cpp_source.html">OTKeyCredential.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// -------------------------------------------------</span>
    <span class="keywordflow">if</span> (mapPrivate.size() != 3)
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s line %d: Failure: Expected 3 in mapPrivate(), but the actual value was: %d\n&quot;</span>,
                      __FILE__, __LINE__, mapPrivate.size());
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// -------------------------------------------------</span>
    mapOfStrings::const_iterator iiAuth = mapPrivate.find(<span class="stringliteral">&quot;A&quot;</span>);  <span class="comment">// Authentication key</span>
    mapOfStrings::const_iterator iiEncr = mapPrivate.find(<span class="stringliteral">&quot;E&quot;</span>);  <span class="comment">// Encryption key</span>
    mapOfStrings::const_iterator iiSign = mapPrivate.find(<span class="stringliteral">&quot;S&quot;</span>);  <span class="comment">// Signing key</span>
    <span class="comment">// -------------------------------------------------</span>
    <span class="keywordflow">if</span> (mapPrivate.end() == iiAuth)
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s line %d: Failure: Unable to find private authentication key.\n&quot;</span>, __FILE__, __LINE__);
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// -------------------------------------------------</span>
    <span class="keywordflow">if</span> (mapPrivate.end() == iiEncr)
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s line %d: Failure: Unable to find private encryption key.\n&quot;</span>, __FILE__, __LINE__);
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// -------------------------------------------------</span>
    <span class="keywordflow">if</span> (mapPrivate.end() == iiSign)
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s line %d: Failure: Unable to find private signing key.\n&quot;</span>, __FILE__, __LINE__);
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// -------------------------------------------------</span>
    <span class="keywordflow">if</span> (this-&gt;<a class="code" href="class_o_t_subcredential.html#a0a93c4d8931e043cc470ccbd153710a5">ot_super::SetPrivateContents</a>(mapPrivate, pImportPassword))
    {
        <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strReason(<span class="stringliteral">&quot;Loading private key from credential.&quot;</span>);
        <a class="code" href="_o_t_string_8hpp.html#a7ec7839682b097a5c5b5c5125046c82b">mapOfStrings</a> mapPublic;
        <span class="comment">// -------------------------------------------------</span>
        <a class="code" href="class_o_t_string.html">OTString</a> strPrivate;
        strPrivate.<a class="code" href="class_o_t_string.html#aa5db620fe8e60c849585d741975db991">Set</a>((*iiAuth).second.c_str()); <span class="comment">// strPrivate now contains the private Cert string.</span>
        
        <span class="keywordflow">if</span> (<span class="keyword">false</span> == <a class="code" href="class_o_t_key_credential.html#a01002807ce374cc8b974b9c2be5b2fad">m_AuthentKey</a>.<a class="code" href="class_o_t_keypair.html#a929d8d989c56858d29ed170fbd46c2f7">LoadPrivateKeyFromCertString</a>(strPrivate, <span class="keyword">false</span> <span class="comment">/*bEscaped true by default*/</span>,  &amp;strReason, pImportPassword))
        {
            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s line %d: Failure: Unable to set private authentication key based on string.\n&quot;</span>,
                          __FILE__, __LINE__);
<span class="comment">//          OTLog::vError(&quot;%s line %d: Failure: Unable to set private authentication key based on string:\n%s\n&quot;,</span>
<span class="comment">//                        __FILE__, __LINE__, strPrivate.Get());</span>
            <span class="keywordflow">return</span> <span class="keyword">false</span>;
        }
        <span class="keywordflow">else</span> <span class="comment">// Success loading the private key. Let&#39;s grab the public key here.</span>
        {
            <a class="code" href="class_o_t_string.html">OTString</a> strPublic;

            <span class="keywordflow">if</span> ((<span class="keyword">false</span> == <a class="code" href="class_o_t_key_credential.html#a01002807ce374cc8b974b9c2be5b2fad">m_AuthentKey</a>.<a class="code" href="class_o_t_keypair.html#af013da535649676fbb039b19cdf5ac01">LoadPublicKeyFromCertString</a>(strPrivate, <span class="keyword">false</span> <span class="comment">/* bEscaped true by default */</span>, &amp;strReason, pImportPassword)) ||
                (<span class="keyword">false</span> == <a class="code" href="class_o_t_key_credential.html#a01002807ce374cc8b974b9c2be5b2fad">m_AuthentKey</a>.<a class="code" href="class_o_t_keypair.html#a67aebd0a39826bbc429bb2676fde9fcd">GetPublicKey</a>(strPublic, <span class="keyword">false</span> <span class="comment">/* bEscaped true by default */</span>)))
            {
                <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s line %d: Failure: Unable to set public authentication key based on private string.\n&quot;</span>,
                              __FILE__, __LINE__);
<span class="comment">//              OTLog::vError(&quot;%s line %d: Failure: Unable to set public authentication key based on private string:\n%s\n&quot;,</span>
<span class="comment">//                            __FILE__, __LINE__, strPrivate.Get());</span>
                <span class="keywordflow">return</span> <span class="keyword">false</span>;
            }
            mapPublic.insert(std::pair&lt;std::string, std::string&gt;(<span class="stringliteral">&quot;A&quot;</span>, strPublic.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>()));
        }
        <span class="comment">// -------------------------------------------------</span>
        strPrivate.<a class="code" href="class_o_t_string.html#abef4b21b2170468705c58d64212d7257">Release</a>();
        strPrivate.<a class="code" href="class_o_t_string.html#aa5db620fe8e60c849585d741975db991">Set</a>((*iiEncr).second.c_str());
        
        <span class="keywordflow">if</span> (<span class="keyword">false</span> == <a class="code" href="class_o_t_key_credential.html#ac84c9320e8f1cd4add630626c5f44a04">m_EncryptKey</a>.<a class="code" href="class_o_t_keypair.html#a929d8d989c56858d29ed170fbd46c2f7">LoadPrivateKeyFromCertString</a>(strPrivate, <span class="keyword">false</span> <span class="comment">/*bEscaped true by default*/</span>,  &amp;strReason, pImportPassword))
        {
            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s line %d: Failure: Unable to set private encryption key based on string.\n&quot;</span>,
                          __FILE__, __LINE__);
<span class="comment">//          OTLog::vError(&quot;%s line %d: Failure: Unable to set private encryption key based on string:\n%s\n&quot;,</span>
<span class="comment">//                        __FILE__, __LINE__, strPrivate.Get());</span>
            <span class="keywordflow">return</span> <span class="keyword">false</span>;
        }
        <span class="keywordflow">else</span> <span class="comment">// Success loading the private key. Let&#39;s grab the public key here.</span>
        {
            <a class="code" href="class_o_t_string.html">OTString</a> strPublic;
            
            <span class="keywordflow">if</span> ((<span class="keyword">false</span> == <a class="code" href="class_o_t_key_credential.html#ac84c9320e8f1cd4add630626c5f44a04">m_EncryptKey</a>.<a class="code" href="class_o_t_keypair.html#af013da535649676fbb039b19cdf5ac01">LoadPublicKeyFromCertString</a>(strPrivate, <span class="keyword">false</span> <span class="comment">/* bEscaped true by default */</span>, &amp;strReason, pImportPassword)) ||
                (<span class="keyword">false</span> == <a class="code" href="class_o_t_key_credential.html#ac84c9320e8f1cd4add630626c5f44a04">m_EncryptKey</a>.<a class="code" href="class_o_t_keypair.html#a67aebd0a39826bbc429bb2676fde9fcd">GetPublicKey</a>(strPublic, <span class="keyword">false</span> <span class="comment">/* bEscaped true by default */</span>)))
            {
                <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s line %d: Failure: Unable to set public encryption key based on private string.\n&quot;</span>,
                              __FILE__, __LINE__);
<span class="comment">//              OTLog::vError(&quot;%s line %d: Failure: Unable to set public encryption key based on private string:\n%s\n&quot;,</span>
<span class="comment">//                            __FILE__, __LINE__, strPrivate.Get());</span>
                <span class="keywordflow">return</span> <span class="keyword">false</span>;
            }
            mapPublic.insert(std::pair&lt;std::string, std::string&gt;(<span class="stringliteral">&quot;E&quot;</span>, strPublic.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>()));
        }
        <span class="comment">// -------------------------------------------------</span>
        strPrivate.<a class="code" href="class_o_t_string.html#abef4b21b2170468705c58d64212d7257">Release</a>();
        strPrivate.<a class="code" href="class_o_t_string.html#aa5db620fe8e60c849585d741975db991">Set</a>((*iiSign).second.c_str());
        
        <span class="keywordflow">if</span> (<span class="keyword">false</span> == <a class="code" href="class_o_t_key_credential.html#a3c92bcfa894923996931488cb960e6ad">m_SigningKey</a>.<a class="code" href="class_o_t_keypair.html#a929d8d989c56858d29ed170fbd46c2f7">LoadPrivateKeyFromCertString</a>(strPrivate, <span class="keyword">false</span> <span class="comment">/*bEscaped true by default*/</span>,  &amp;strReason, pImportPassword))
        {
            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s line %d: Failure: Unable to set private signing key based on string.\n&quot;</span>,
                          __FILE__, __LINE__);
<span class="comment">//          OTLog::vError(&quot;%s line %d: Failure: Unable to set private signing key based on string:\n%s\n&quot;,</span>
<span class="comment">//                        __FILE__, __LINE__, strPrivate.Get());</span>
            <span class="keywordflow">return</span> <span class="keyword">false</span>;
        }
        <span class="keywordflow">else</span> <span class="comment">// Success loading the private key. Let&#39;s grab the public key here.</span>
        {
            <a class="code" href="class_o_t_string.html">OTString</a> strPublic;
            
            <span class="keywordflow">if</span> ((<span class="keyword">false</span> == <a class="code" href="class_o_t_key_credential.html#a3c92bcfa894923996931488cb960e6ad">m_SigningKey</a>.<a class="code" href="class_o_t_keypair.html#af013da535649676fbb039b19cdf5ac01">LoadPublicKeyFromCertString</a>(strPrivate, <span class="keyword">false</span> <span class="comment">/* bEscaped true by default */</span>, &amp;strReason, pImportPassword)) ||
                (<span class="keyword">false</span> == <a class="code" href="class_o_t_key_credential.html#a3c92bcfa894923996931488cb960e6ad">m_SigningKey</a>.<a class="code" href="class_o_t_keypair.html#a67aebd0a39826bbc429bb2676fde9fcd">GetPublicKey</a>(strPublic, <span class="keyword">false</span> <span class="comment">/* bEscaped true by default */</span>)))
            {
                <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s line %d: Failure: Unable to set public signing key based on private string.\n&quot;</span>,
                              __FILE__, __LINE__);
<span class="comment">//              OTLog::vError(&quot;%s line %d: Failure: Unable to set public signing key based on private string:\n%s\n&quot;,</span>
<span class="comment">//                            __FILE__, __LINE__, strPrivate.Get());</span>
                <span class="keywordflow">return</span> <span class="keyword">false</span>;
            }
            mapPublic.insert(std::pair&lt;std::string, std::string&gt;(<span class="stringliteral">&quot;S&quot;</span>, strPublic.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>()));
        }
        <span class="comment">// -------------------------------------------------</span>
        <span class="keywordflow">if</span> (<span class="keyword">false</span> == this-&gt;<a class="code" href="class_o_t_subcredential.html#a0f5e48ea0cb04055746b9f8793359d6c">ot_super::SetPublicContents</a>(mapPublic))
        {
            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s line %d: Failure: While trying to call: ot_super::SetPublicContents(mapPublic)\n&quot;</span>,
                          __FILE__, __LINE__); <span class="comment">// Should never happen (it always just returns true.)</span>
            <span class="keywordflow">return</span> <span class="keyword">false</span>;
        }
        <span class="comment">// -------------------------------------------------</span>
        <span class="keywordflow">return</span> <span class="keyword">true</span>; <span class="comment">// SUCCESS! This means the input, mapPrivate, actually contained an &quot;A&quot; key, an &quot;E&quot;</span>
        <span class="comment">// key, and an &quot;S&quot; key (and nothing else) and that all three of those private keys actually loaded</span>
        <span class="comment">// from string form into their respective key object members. We also set the public keys in here, FYI.</span>
    }
    <span class="comment">// -------------------------------------------------</span>
    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a53f8693b23088f568bb52b0bc17e277e"></a><!-- doxytag: member="OTKeyCredential::SetPublicContents" ref="a53f8693b23088f568bb52b0bc17e277e" args="(const mapOfStrings &amp;mapPublic)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_key_credential.html#a53f8693b23088f568bb52b0bc17e277e">OTKeyCredential::SetPublicContents</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="_o_t_string_8hpp.html#a7ec7839682b097a5c5b5c5125046c82b">mapOfStrings</a> &amp;&#160;</td>
          <td class="paramname"><em>mapPublic</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reimplemented from <a class="el" href="class_o_t_subcredential.html#a0f5e48ea0cb04055746b9f8793359d6c">OTSubcredential</a>.</p>

<p>Definition at line <a class="el" href="_o_t_key_credential_8cpp_source.html#l00346">346</a> of file <a class="el" href="_o_t_key_credential_8cpp_source.html">OTKeyCredential.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// NOTE: We might use this on the server side, we&#39;ll see, but so far on the client</span>
    <span class="comment">// side, we won&#39;t need to use this function, since SetPrivateContents already does</span>
    <span class="comment">// the dirty work of extracting the public keys and setting them.</span>
    <span class="comment">//</span>
    <span class="comment">// -------------------------------------------------</span>
    <span class="keywordflow">if</span> (mapPublic.size() != 3)
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s line %d: Failure: Expected 3 in mapPublic.size(), but the actual value was: %d\n&quot;</span>,
                      __FILE__, __LINE__, mapPublic.size());
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// -------------------------------------------------</span>
    mapOfStrings::const_iterator iiAuth = mapPublic.find(<span class="stringliteral">&quot;A&quot;</span>);  <span class="comment">// Authentication key</span>
    mapOfStrings::const_iterator iiEncr = mapPublic.find(<span class="stringliteral">&quot;E&quot;</span>);  <span class="comment">// Encryption key</span>
    mapOfStrings::const_iterator iiSign = mapPublic.find(<span class="stringliteral">&quot;S&quot;</span>);  <span class="comment">// Signing key</span>
    <span class="comment">// -------------------------------------------------</span>
    <span class="keywordflow">if</span> (mapPublic.end() == iiAuth)
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s line %d: Failure: Unable to find public authentication key.\n&quot;</span>, __FILE__, __LINE__);
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// -------------------------------------------------</span>
    <span class="keywordflow">if</span> (mapPublic.end() == iiEncr)
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s line %d: Failure: Unable to find public encryption key.\n&quot;</span>, __FILE__, __LINE__);
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// -------------------------------------------------</span>
    <span class="keywordflow">if</span> (mapPublic.end() == iiSign)
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s line %d: Failure: Unable to find public signing key.\n&quot;</span>, __FILE__, __LINE__);
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// -------------------------------------------------</span>
    <span class="keywordflow">if</span> (this-&gt;<a class="code" href="class_o_t_subcredential.html#a0f5e48ea0cb04055746b9f8793359d6c">ot_super::SetPublicContents</a>(mapPublic))
    {
        <span class="comment">// -------------------------------------------------</span>
        <a class="code" href="class_o_t_string.html">OTString</a> strKey;
        strKey.<a class="code" href="class_o_t_string.html#aa5db620fe8e60c849585d741975db991">Set</a>((*iiAuth).second.c_str());
        <span class="keywordflow">if</span> (<span class="keyword">false</span> == <a class="code" href="class_o_t_key_credential.html#a01002807ce374cc8b974b9c2be5b2fad">m_AuthentKey</a>.<a class="code" href="class_o_t_keypair.html#ad6f380447668e4d9b5180e88fe257045">SetPublicKey</a>(strKey))
        {
            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s line %d: Failure: Unable to set public authentication key based on string:\n%s\n&quot;</span>,
                          __FILE__, __LINE__, strKey.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
            <span class="keywordflow">return</span> <span class="keyword">false</span>;
        }
        <span class="comment">// -------------------------------------------------</span>
        strKey.<a class="code" href="class_o_t_string.html#abef4b21b2170468705c58d64212d7257">Release</a>();
        strKey.<a class="code" href="class_o_t_string.html#aa5db620fe8e60c849585d741975db991">Set</a>((*iiEncr).second.c_str());
        <span class="keywordflow">if</span> (<span class="keyword">false</span> == <a class="code" href="class_o_t_key_credential.html#ac84c9320e8f1cd4add630626c5f44a04">m_EncryptKey</a>.<a class="code" href="class_o_t_keypair.html#ad6f380447668e4d9b5180e88fe257045">SetPublicKey</a>(strKey))
        {
            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s line %d: Failure: Unable to set public encryption key based on string:\n%s\n&quot;</span>,
                          __FILE__, __LINE__, strKey.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
            <span class="keywordflow">return</span> <span class="keyword">false</span>;
        }
        <span class="comment">// -------------------------------------------------</span>
        strKey.<a class="code" href="class_o_t_string.html#abef4b21b2170468705c58d64212d7257">Release</a>();
        strKey.<a class="code" href="class_o_t_string.html#aa5db620fe8e60c849585d741975db991">Set</a>((*iiSign).second.c_str());
        <span class="keywordflow">if</span> (<span class="keyword">false</span> == <a class="code" href="class_o_t_key_credential.html#a3c92bcfa894923996931488cb960e6ad">m_SigningKey</a>.<a class="code" href="class_o_t_keypair.html#ad6f380447668e4d9b5180e88fe257045">SetPublicKey</a>(strKey))
        {
            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s line %d: Failure: Unable to set public signing key based on string:\n%s\n&quot;</span>,
                          __FILE__, __LINE__, strKey.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
            <span class="keywordflow">return</span> <span class="keyword">false</span>;
        }
        <span class="comment">// -------------------------------------------------</span>
        <span class="keywordflow">return</span> <span class="keyword">true</span>; <span class="comment">// SUCCESS! This means the input, mapPublic, actually contained an &quot;A&quot; key, an &quot;E&quot;</span>
        <span class="comment">// key, and an &quot;S&quot; key (and nothing else) and that all three of those public keys actually loaded</span>
        <span class="comment">// from string form into their respective key object members.</span>
    }
    <span class="comment">// -------------------------------------------------</span>
    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="af44f4b8860f575b7b0fdd4cc8e27023a"></a><!-- doxytag: member="OTKeyCredential::SignContract" ref="af44f4b8860f575b7b0fdd4cc8e27023a" args="(OTContract &amp;theContract, OTPasswordData *pPWData=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_key_credential.html#af44f4b8860f575b7b0fdd4cc8e27023a">OTKeyCredential::SignContract</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_contract.html">OTContract</a> &amp;&#160;</td>
          <td class="paramname"><em>theContract</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_password_data.html">OTPasswordData</a> *&#160;</td>
          <td class="paramname"><em>pPWData</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_key_credential_8cpp_source.html#l00564">564</a> of file <a class="el" href="_o_t_key_credential_8cpp_source.html">OTKeyCredential.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> <a class="code" href="class_o_t_key_credential.html#a3c92bcfa894923996931488cb960e6ad">m_SigningKey</a>.<a class="code" href="class_o_t_keypair.html#a59fc9eeb553ebced164c0bda3a7789fc">SignContract</a>(theContract, pPWData);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a2fe63b1ac17a3ddbc10ebdd33c05e812"></a><!-- doxytag: member="OTKeyCredential::VerifyInternally" ref="a2fe63b1ac17a3ddbc10ebdd33c05e812" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_key_credential.html#a2fe63b1ac17a3ddbc10ebdd33c05e812">OTKeyCredential::VerifyInternally</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reimplemented from <a class="el" href="class_o_t_subcredential.html#a6bf9159bd8c57933ffc3124e33116803">OTSubcredential</a>.</p>

<p>Reimplemented in <a class="el" href="class_o_t_masterkey.html#a89fb10240171a41d66ac6ba5dc82000b">OTMasterkey</a>.</p>

<p>Definition at line <a class="el" href="_o_t_key_credential_8cpp_source.html#l00228">228</a> of file <a class="el" href="_o_t_key_credential_8cpp_source.html">OTKeyCredential.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// Verify that m_strNymID is the same as the hash of m_strSourceForNymID. </span>
    <span class="keywordflow">if</span> (<span class="keyword">false</span> == <a class="code" href="class_o_t_subcredential.html#a6bf9159bd8c57933ffc3124e33116803">ot_super::VerifyInternally</a>())
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    <span class="comment">// ---------------------------------------</span>
    <span class="comment">// Any OTKeyCredential (both master and subkeys, but no other credentials) must ** sign itself.**</span>
    <span class="comment">//</span>
    <span class="keywordflow">if</span> (<span class="keyword">false</span> == this-&gt;<a class="code" href="class_o_t_key_credential.html#a94cd195bfe92f7c2a36ac6f264243540">VerifySignedBySelf</a>())
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Failed verifying key credential: it&#39;s not signed by itself (its own signing key.)\n&quot;</span>,
                       __FUNCTION__);
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// ---------------------------------------</span>
    <span class="keywordflow">return</span> <span class="keyword">true</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a94cd195bfe92f7c2a36ac6f264243540"></a><!-- doxytag: member="OTKeyCredential::VerifySignedBySelf" ref="a94cd195bfe92f7c2a36ac6f264243540" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_key_credential.html#a94cd195bfe92f7c2a36ac6f264243540">OTKeyCredential::VerifySignedBySelf</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_key_credential_8cpp_source.html#l00160">160</a> of file <a class="el" href="_o_t_key_credential_8cpp_source.html">OTKeyCredential.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> this-&gt;<a class="code" href="class_o_t_contract.html#ab80fbfabc9dca35310f63bce3840387e">VerifyWithKey</a>(<a class="code" href="class_o_t_key_credential.html#a3c92bcfa894923996931488cb960e6ad">m_SigningKey</a>.<a class="code" href="class_o_t_keypair.html#a67aebd0a39826bbc429bb2676fde9fcd">GetPublicKey</a>());
}
</pre></div>
</div>
</div>
<hr/><h2>Friends And Related Function Documentation</h2>
<a class="anchor" id="a343589d388801d917dfc77e1113c3970"></a><!-- doxytag: member="OTKeyCredential::OTCredential" ref="a343589d388801d917dfc77e1113c3970" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">friend class <a class="el" href="class_o_t_credential.html">OTCredential</a><code> [friend]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reimplemented from <a class="el" href="class_o_t_subcredential.html#a343589d388801d917dfc77e1113c3970">OTSubcredential</a>.</p>

<p>Reimplemented in <a class="el" href="class_o_t_masterkey.html#a343589d388801d917dfc77e1113c3970">OTMasterkey</a>, and <a class="el" href="class_o_t_subkey.html#a343589d388801d917dfc77e1113c3970">OTSubkey</a>.</p>

<p>Definition at line <a class="el" href="_o_t_key_credential_8hpp_source.html#l00236">236</a> of file <a class="el" href="_o_t_key_credential_8hpp_source.html">OTKeyCredential.hpp</a>.</p>

</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="a01002807ce374cc8b974b9c2be5b2fad"></a><!-- doxytag: member="OTKeyCredential::m_AuthentKey" ref="a01002807ce374cc8b974b9c2be5b2fad" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_keypair.html">OTKeypair</a> <a class="el" href="class_o_t_key_credential.html#a01002807ce374cc8b974b9c2be5b2fad">OTKeyCredential::m_AuthentKey</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_key_credential_8hpp_source.html#l00245">245</a> of file <a class="el" href="_o_t_key_credential_8hpp_source.html">OTKeyCredential.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="ac84c9320e8f1cd4add630626c5f44a04"></a><!-- doxytag: member="OTKeyCredential::m_EncryptKey" ref="ac84c9320e8f1cd4add630626c5f44a04" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_keypair.html">OTKeypair</a> <a class="el" href="class_o_t_key_credential.html#ac84c9320e8f1cd4add630626c5f44a04">OTKeyCredential::m_EncryptKey</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_key_credential_8hpp_source.html#l00246">246</a> of file <a class="el" href="_o_t_key_credential_8hpp_source.html">OTKeyCredential.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a3c92bcfa894923996931488cb960e6ad"></a><!-- doxytag: member="OTKeyCredential::m_SigningKey" ref="a3c92bcfa894923996931488cb960e6ad" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_keypair.html">OTKeypair</a> <a class="el" href="class_o_t_key_credential.html#a3c92bcfa894923996931488cb960e6ad">OTKeyCredential::m_SigningKey</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_key_credential_8hpp_source.html#l00244">244</a> of file <a class="el" href="_o_t_key_credential_8hpp_source.html">OTKeyCredential.hpp</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>include/otlib/<a class="el" href="_o_t_key_credential_8hpp_source.html">OTKeyCredential.hpp</a></li>
<li>src/otlib/<a class="el" href="_o_t_key_credential_8cpp_source.html">OTKeyCredential.cpp</a></li>
</ul>
</div><!-- contents -->
</div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="class_o_t_key_credential.html">OTKeyCredential</a>      </li>

    <li class="footer">Generated on Wed May 21 2014 11:26:13 for Open-Transactions by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.6.1 </li>
   </ul>
 </div>


</body>
</html>
