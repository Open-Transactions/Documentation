<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Open-Transactions: OTAPI_Exec Class Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Open-Transactions
   &#160;<span id="projectnumber">master/1066fb4910a63ee3f7de8e0807fee3eb663b66c7</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('class_o_t_a_p_i___exec.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="#pro-static-attribs">Static Protected Attributes</a>  </div>
  <div class="headertitle">
<div class="title">OTAPI_Exec Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<!-- doxytag: class="OTAPI_Exec" -->
<p><code>#include &lt;<a class="el" href="_o_t_a_p_i___exec_8hpp_source.html">OTAPI_Exec.hpp</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for OTAPI_Exec:</div>
<div class="dyncontent">
 <div class="center">
  <img src="class_o_t_a_p_i___exec.png" usemap="#OTAPI_Exec_map" alt=""/>
  <map id="OTAPI_Exec_map" name="OTAPI_Exec_map">
<area href="class_mock___o_t_a_p_i___exec.html" alt="Mock_OTAPI_Exec" shape="rect" coords="0,56,122,80"/>
</map>
 </div></div>

<p><a href="class_o_t_a_p_i___exec-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#ac4c534a89b6ea47197e9e9abd831726b">OTAPI_Exec</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#aea5e98c237689dee0885360ca286d882">~OTAPI_Exec</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT <a class="el" href="class_o_t___a_p_i.html">OT_API</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a1990c82970f94e5e7ca00f9e78d645c9">StringToLong</a> (const std::string &amp;strNumber)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#ab27795fbc9d11a3ada075eaa64b95831">LongToString</a> (const int64_t &amp;lNumber)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#af0e3de0bfdee8ea9bc6dcb6e58fee398">StringToUlong</a> (const std::string &amp;strNumber)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a17d4c4b6225b79c5e23929f1ef1669bd">UlongToString</a> (const uint64_t &amp;lNumber)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a570af496633a5d0b35048200fee03a89">AppInit</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#acea9dd5706283762916ed0755b2acac8">AppCleanup</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a52012141810b4ca4a72e713dc0fbbbab">SetAppBinaryFolder</a> (const std::string &amp;strFolder)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#ae79f96dd7c3c35ce69b39aa7571499a6">SetHomeFolder</a> (const std::string &amp;strFolder)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a357e8cea1ca039682fb6d1076c8234fb">SetWallet</a> (const std::string &amp;strWalletFilename)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a06e34b62c3e36073dafa653a28ee6f5d">WalletExists</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a889a6737076054113908d22f6ae4e223">LoadWallet</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a0417d34f4d85922e732f4a835cb53c6a">SwitchWallet</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a898873fe2d35440f6963b81e7a83ea84">Output</a> (const int32_t &amp;nLogLevel, const std::string &amp;strOutput)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT <a class="el" href="_o_t_common_8hpp.html#ad28ff0a3eda18840f6bda5872819167f">time64_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a4d3eee535eeb45f738060ee88192c2e7">GetTime</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a9124f2093af217b37497f16941e1adc4">NumList_Add</a> (const std::string &amp;strNumList, const std::string &amp;strNumbers)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a133aaf7224244c363135a98aaef1df18">NumList_Remove</a> (const std::string &amp;strNumList, const std::string &amp;strNumbers)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#ae87e416912965485351808676feb6421">NumList_VerifyQuery</a> (const std::string &amp;strNumList, const std::string &amp;strNumbers)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#ac288e2bf16e7f738d5450e5f43fdcc31">NumList_VerifyAll</a> (const std::string &amp;strNumList, const std::string &amp;strNumbers)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a6f109e383929c540c666db2c64932834">NumList_Count</a> (const std::string &amp;strNumList)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#aa3f9f90ebd9b2125a4ad725350eba455">Encode</a> (const std::string &amp;strPlaintext, const bool &amp;bLineBreaks)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a43a627c39c47d17c4e180b56a0eae3c1">Decode</a> (const std::string &amp;strEncoded, const bool &amp;bLineBreaks)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a4daf6ceaab8227c0eb5deb777d8337df">Encrypt</a> (const std::string &amp;RECIPIENT_NYM_ID, const std::string &amp;strPlaintext)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#ae28cbabad8107e944b504986f929300f">Decrypt</a> (const std::string &amp;RECIPIENT_NYM_ID, const std::string &amp;strCiphertext)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a11ee44a4fd68c82181708d4a1d375f89">CreateSymmetricKey</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a2ef85cec19e635f13c565dd93359589e">SymmetricEncrypt</a> (const std::string &amp;SYMMETRIC_KEY, const std::string &amp;PLAintEXT)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a87fe72dc0aa6fc6f384f87bc3b5269ac">SymmetricDecrypt</a> (const std::string &amp;SYMMETRIC_KEY, const std::string &amp;CIPHERTEXT_ENVELOPE)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a4a74efbfa2260792f86e7712f56c4300">SignContract</a> (const std::string &amp;SIGNER_NYM_ID, const std::string &amp;THE_CONTRACT)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a73444dac75c57e91b7e4f51a2ec74a13">FlatSign</a> (const std::string &amp;SIGNER_NYM_ID, const std::string &amp;THE_INPUT, const std::string &amp;CONTRACT_TYPE)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a2afcd57686081fac9f7d1a598c38baa9">AddSignature</a> (const std::string &amp;SIGNER_NYM_ID, const std::string &amp;THE_CONTRACT)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#afadde01e1b2244f7d85f4420c3f4dfdc">VerifySignature</a> (const std::string &amp;SIGNER_NYM_ID, const std::string &amp;THE_CONTRACT)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a0233aa61ac24910bdc4671054734ede2">VerifyAndRetrieveXMLContents</a> (const std::string &amp;THE_CONTRACT, const std::string &amp;SIGNER_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a3480267ea10f15c53bb92240aec254ea">GetMemlogSize</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a501a0c5fa22dd7a33e3da67002b8690b">GetMemlogAtIndex</a> (const int32_t &amp;nIndex)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#ad6bbb4e5c846af672961cf6d9598be30">PeekMemlogFront</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a2feab2347517775be8be3edc4696d603">PeekMemlogBack</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#ab78238ec98eb77bc76fb018835302037">PopMemlogFront</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#afdef7ce04ff0ddc2f67f626739ebaae6">PopMemlogBack</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#aac00d07de2eaef92ce3439ae04280502">CreateNym</a> (const int32_t &amp;nKeySize, const std::string &amp;NYM_ID_SOURCE, const std::string &amp;ALT_LOCATION)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#aa2284a93c77800307c39eb84a02004e6">GetNym_ActiveCronItemIDs</a> (const std::string &amp;NYM_ID, const std::string &amp;SERVER_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#abacd1cfa131cd2f8c2b086560137c80e">GetActiveCronItem</a> (const std::string &amp;SERVER_ID, int64_t lTransNum)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a772c6fa41664d32d56b0e375487ec975">GetNym_SourceForID</a> (const std::string &amp;NYM_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#aaad4d7b8a45b1620a6be71288f864c49">GetNym_AltSourceLocation</a> (const std::string &amp;NYM_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a1ee6c7e064c4df21af237c2f75bd75b5">GetNym_CredentialCount</a> (const std::string &amp;NYM_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#abbe0ccf755337f5baf3b68a36daf067e">GetNym_CredentialID</a> (const std::string &amp;NYM_ID, const int32_t &amp;nIndex)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a8a6bd5cb6059ceea858abb4953af8381">GetNym_CredentialContents</a> (const std::string &amp;NYM_ID, const std::string &amp;CREDENTIAL_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a0d96420d6faaf80cd76c93a2334b97ec">GetNym_RevokedCredCount</a> (const std::string &amp;NYM_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a9b7ff670be66f5bf5bbff7db78b6ebf2">GetNym_RevokedCredID</a> (const std::string &amp;NYM_ID, const int32_t &amp;nIndex)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#abecce474328d66d0d14d6f207c6f16b5">GetNym_RevokedCredContents</a> (const std::string &amp;NYM_ID, const std::string &amp;CREDENTIAL_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a8ff237ded0d5329cda022ff0570092eb">GetNym_SubcredentialCount</a> (const std::string &amp;NYM_ID, const std::string &amp;MASTER_CRED_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a8beb45adf3c81242a23a990d2dad8425">GetNym_SubCredentialID</a> (const std::string &amp;NYM_ID, const std::string &amp;MASTER_CRED_ID, const int32_t &amp;nIndex)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a4434157ca86a4bd56620f3cc68ccbde0">GetNym_SubCredentialContents</a> (const std::string &amp;NYM_ID, const std::string &amp;MASTER_CRED_ID, const std::string &amp;SUB_CRED_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a754e64287eacf85513fc79f3cf6860cb">AddSubcredential</a> (const std::string &amp;NYM_ID, const std::string &amp;MASTER_CRED_ID, const int32_t &amp;nKeySize)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a71ed07f0a80c69ee796564a1458b3f9b">RevokeSubcredential</a> (const std::string &amp;NYM_ID, const std::string &amp;MASTER_CRED_ID, const std::string &amp;SUB_CRED_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a0af1034cdeb79f225d424dfb2f9fb45c">CreateServerContract</a> (const std::string &amp;NYM_ID, const std::string &amp;strXMLcontents)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a3dd567a06b35109c704db1e0ca6f604b">CreateAssetContract</a> (const std::string &amp;NYM_ID, const std::string &amp;strXMLcontents)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a497410916b6a8036929551c2d3e45455">CalculateAssetContractID</a> (const std::string &amp;str_Contract)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a8b76995a5783c5686781046249a691a4">CalculateServerContractID</a> (const std::string &amp;str_Contract)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a977725a4fd13ff5ef12831ce967aed5a">AddServerContract</a> (const std::string &amp;strContract)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a3fcec3e1ad613490838470bb397675f6">AddAssetContract</a> (const std::string &amp;strContract)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#ae78b8db3ee94ba98fc4a320f2365a64c">GetServerCount</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#ae582e3609b00e870c0234c0b0a95a3d7">GetAssetTypeCount</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a3b5978e2f813cf10ebe34fa7d85b80be">GetAccountCount</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a363b1cd3cb27fce58e6d113641fb65bb">GetNymCount</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a75a82ad6c9be31757dc6211f7987e815">GetServer_ID</a> (const int32_t &amp;nIndex)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a901a8e43cec3997fce4a334fd14c14b5">GetServer_Name</a> (const std::string &amp;SERVER_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#adf0392d6766f66b52a2912279dbc9595">GetServer_Contract</a> (const std::string &amp;SERVER_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#ad68199be44c7c45248ecaafb59194685">FormatAmount</a> (const std::string &amp;ASSET_TYPE_ID, const int64_t &amp;THE_AMOUNT)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a0188891ee269124f924f7b39e32e4ce7">StringToAmount</a> (const std::string &amp;ASSET_TYPE_ID, const std::string &amp;str_input)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#afcae7efa87317326a01618ab42c9ddb0">GetAssetType_ID</a> (const int32_t &amp;nIndex)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a6675e1b70df65f26f68fa709ce00e72e">GetAssetType_Name</a> (const std::string &amp;ASSET_TYPE_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a1f3b27b02d266a328445a1bd9a560655">GetAssetType_TLA</a> (const std::string &amp;THE_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a6c06c32e07e06efb900564fd96241ed0">GetAssetType_Contract</a> (const std::string &amp;ASSET_TYPE_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a07d988d698bb0f914031141297445e72">GetAccountWallet_ID</a> (const int32_t &amp;nIndex)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#ab3dbd2eed67f029065dfa58c9b20d1ea">GetAccountWallet_Name</a> (const std::string &amp;ACCOUNT_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a879a62e450c8881a0d0db04285fd6103">GetAccountWallet_Balance</a> (const std::string &amp;ACCOUNT_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#ae2f54619b76a48ef8afad46e3d3bfc30">GetAccountWallet_Type</a> (const std::string &amp;ACCOUNT_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#af812b71a9eb104706179bd10e06d5170">GetAccountWallet_AssetTypeID</a> (const std::string &amp;ACCOUNT_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#afb2255e4fb7fb27bbeebe753eb827770">GetAccountWallet_ServerID</a> (const std::string &amp;ACCOUNT_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a5c11f6d8c1dd9024788124685c8bb8d8">GetAccountWallet_NymID</a> (const std::string &amp;ACCOUNT_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a2aff6dd65d83c222076e923033ee088a">GetAccountWallet_InboxHash</a> (const std::string &amp;ACCOUNT_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#ae47c46f41ae9992a198ad12ee096379b">GetAccountWallet_OutboxHash</a> (const std::string &amp;ACCOUNT_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#ae39f85e4d8ad13120b1f9b90e50b6b21">VerifyAccountReceipt</a> (const std::string &amp;SERVER_ID, const std::string &amp;NYM_ID, const std::string &amp;ACCT_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#aa429be08bd7a15ae954a5fbb916a16af">GetNym_TransactionNumCount</a> (const std::string &amp;SERVER_ID, const std::string &amp;NYM_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a5c205cfa5e6f9a05e87b4894e92e8086">GetNym_ID</a> (const int32_t &amp;nIndex)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">based on Index this returns the Nym's ID  <a href="#a5c205cfa5e6f9a05e87b4894e92e8086"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a67037f27744d22dd75158acccbd54b50">GetNym_Name</a> (const std::string &amp;NYM_ID)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns Nym Name (based on NymID)  <a href="#a67037f27744d22dd75158acccbd54b50"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#aa84ff0c163f6501ea7623a4dd02cdab8">GetNym_Stats</a> (const std::string &amp;NYM_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a6735cad3ccb68577d64222b5c557dc0a">GetNym_NymboxHash</a> (const std::string &amp;SERVER_ID, const std::string &amp;NYM_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a0cbf45897dca8d8959dba18527c5aacb">GetNym_RecentHash</a> (const std::string &amp;SERVER_ID, const std::string &amp;NYM_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#afd6570cf9561be931f7b38cdc915a185">GetNym_InboxHash</a> (const std::string &amp;ACCOUNT_ID, const std::string &amp;NYM_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#ab057fc8ea20957ded3338f74e13d8338">GetNym_OutboxHash</a> (const std::string &amp;ACCOUNT_ID, const std::string &amp;NYM_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a7de7a08dccfd1343129932f3459b8298">IsNym_RegisteredAtServer</a> (const std::string &amp;NYM_ID, const std::string &amp;SERVER_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#af741ab0d89e8600a4bca2bc1557a100b">GetNym_MailCount</a> (const std::string &amp;NYM_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a3e43100d647014c89e60918a13756245">GetNym_MailContentsByIndex</a> (const std::string &amp;NYM_ID, const int32_t &amp;nIndex)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a9bacc4ffb222363b9215e15ee4a09e6b">GetNym_MailSenderIDByIndex</a> (const std::string &amp;NYM_ID, const int32_t &amp;nIndex)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a8739c3250e05ef46df4eeae244e46469">GetNym_MailServerIDByIndex</a> (const std::string &amp;NYM_ID, const int32_t &amp;nIndex)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#ac70ad98b72adb62a7fbe2343fa316dda">Nym_RemoveMailByIndex</a> (const std::string &amp;NYM_ID, const int32_t &amp;nIndex)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#af5445f94adcbb66d9e6acd3962d0128d">Nym_VerifyMailByIndex</a> (const std::string &amp;NYM_ID, const int32_t &amp;nIndex)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a4c112f835bc906c63ce9103ca6b64d94">GetNym_OutmailCount</a> (const std::string &amp;NYM_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a016e019057540d0ed5535b6e76663fe9">GetNym_OutmailContentsByIndex</a> (const std::string &amp;NYM_ID, const int32_t &amp;nIndex)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a53fa11aa2ee5fbda492529980cf0f8e8">GetNym_OutmailRecipientIDByIndex</a> (const std::string &amp;NYM_ID, const int32_t &amp;nIndex)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a7780a360d9669ed6732f7f42c0a4f7c7">GetNym_OutmailServerIDByIndex</a> (const std::string &amp;NYM_ID, const int32_t &amp;nIndex)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#aebc780df2244d90c4ebd6d3ceb0f4268">Nym_RemoveOutmailByIndex</a> (const std::string &amp;NYM_ID, const int32_t &amp;nIndex)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a16545eb3a6c8b39d83964e01005077b0">Nym_VerifyOutmailByIndex</a> (const std::string &amp;NYM_ID, const int32_t &amp;nIndex)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#adc2e734d3287c7786115939baba7ea0e">GetNym_OutpaymentsCount</a> (const std::string &amp;NYM_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a71f250e1f40d340680af964f156acea3">GetNym_OutpaymentsContentsByIndex</a> (const std::string &amp;NYM_ID, const int32_t &amp;nIndex)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a0d70d2ff1a18966fad6fd7169982d2bb">GetNym_OutpaymentsRecipientIDByIndex</a> (const std::string &amp;NYM_ID, const int32_t &amp;nIndex)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#abd6ec4a939ea69b5e052c03f0d2b5711">GetNym_OutpaymentsServerIDByIndex</a> (const std::string &amp;NYM_ID, const int32_t &amp;nIndex)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a4e56f34553c3f5b2f79b7bf1b9aa46b0">Nym_RemoveOutpaymentsByIndex</a> (const std::string &amp;NYM_ID, const int32_t &amp;nIndex)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a920a1595279a928a5056177f1d4c2adc">Nym_VerifyOutpaymentsByIndex</a> (const std::string &amp;NYM_ID, const int32_t &amp;nIndex)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#ad5b66d7e6143d6e75ce5a4d32a87e8ea">Wallet_CanRemoveServer</a> (const std::string &amp;SERVER_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a529310cf664653d079f4830c3e00add7">Wallet_RemoveServer</a> (const std::string &amp;SERVER_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#ae0264d14564877e5645790a46e455870">Wallet_CanRemoveAssetType</a> (const std::string &amp;ASSET_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a3e02e35f0243b096335c78dcb45f4f0c">Wallet_RemoveAssetType</a> (const std::string &amp;ASSET_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a021b69143268a7aabd977638cd26cfed">Wallet_CanRemoveNym</a> (const std::string &amp;NYM_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a026fd730a998874c4dbacb72decc550b">Wallet_RemoveNym</a> (const std::string &amp;NYM_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a591518898ab86707f0c4a241a3873f93">Wallet_CanRemoveAccount</a> (const std::string &amp;ACCOUNT_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a16826a31571be5b0281660464b2ff2af">Wallet_ChangePassphrase</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a5dbebdf1790c77bb839a6850cc3eb88c">Wallet_ExportNym</a> (const std::string &amp;NYM_ID)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the exported Nym, if success. (Else NULL.)  <a href="#a5dbebdf1790c77bb839a6850cc3eb88c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a362daf677ff1aa397a02b4ba9e5be0d2">Wallet_ImportNym</a> (const std::string &amp;FILE_CONTENTS)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">returns NymID if success, else NULL.  <a href="#a362daf677ff1aa397a02b4ba9e5be0d2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a58c93b75b825ddee3ab441c9384584d8">Wallet_ImportCert</a> (const std::string &amp;DISPLAY_NAME, const std::string &amp;FILE_CONTENTS)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the imported cert's NymID, if successful. Else NULL.  <a href="#a58c93b75b825ddee3ab441c9384584d8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a5caeac705fea6d1e302b8c3c8bda0ca4">Wallet_ExportCert</a> (const std::string &amp;NYM_ID)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the exported cert, if successful. Else NULL.  <a href="#a5caeac705fea6d1e302b8c3c8bda0ca4"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a5b814460ca849a37beb4a11f8983e420">Wallet_GetNymIDFromPartial</a> (const std::string &amp;PARTIAL_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a4dadb29632efad3f1b9f71ae72b14e9d">Wallet_GetServerIDFromPartial</a> (const std::string &amp;PARTIAL_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a25b73aa089db9d5b4452e1a2bb5dfff4">Wallet_GetAssetIDFromPartial</a> (const std::string &amp;PARTIAL_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a5e624ce60190f892ba9e77463862b258">Wallet_GetAccountIDFromPartial</a> (const std::string &amp;PARTIAL_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#acef95b1db2970770090244c83c00f4d3">SetNym_Name</a> (const std::string &amp;NYM_ID, const std::string &amp;SIGNER_NYM_ID, const std::string &amp;NYM_NEW_NAME)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a0343b96a3234afefa81e23926935252b">SetAccountWallet_Name</a> (const std::string &amp;ACCT_ID, const std::string &amp;SIGNER_NYM_ID, const std::string &amp;ACCT_NEW_NAME)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#abbedf6402584e01cbc3c7716704f35d3">SetAssetType_Name</a> (const std::string &amp;ASSET_ID, const std::string &amp;STR_NEW_NAME)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#ae068763567655cc5428ae49de980e616">SetServer_Name</a> (const std::string &amp;SERVER_ID, const std::string &amp;STR_NEW_NAME)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a27dd75c5354aa488495ff2636cff1d64">WriteCheque</a> (const std::string &amp;SERVER_ID, const int64_t &amp;CHEQUE_AMOUNT, const <a class="el" href="_o_t_common_8hpp.html#ad28ff0a3eda18840f6bda5872819167f">time64_t</a> &amp;VALID_FROM, const <a class="el" href="_o_t_common_8hpp.html#ad28ff0a3eda18840f6bda5872819167f">time64_t</a> &amp;VALID_TO, const std::string &amp;SENDER_ACCT_ID, const std::string &amp;SENDER_USER_ID, const std::string &amp;CHEQUE_MEMO, const std::string &amp;RECIPIENT_USER_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#ab036b53cfb6fef0bc6b4c2aad7b132f8">DiscardCheque</a> (const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ACCT_ID, const std::string &amp;THE_CHEQUE)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a40f2d69da9c58ffe07517e2b5f22f125">ProposePaymentPlan</a> (const std::string &amp;SERVER_ID, const <a class="el" href="_o_t_common_8hpp.html#ad28ff0a3eda18840f6bda5872819167f">time64_t</a> &amp;VALID_FROM, const <a class="el" href="_o_t_common_8hpp.html#ad28ff0a3eda18840f6bda5872819167f">time64_t</a> &amp;VALID_TO, const std::string &amp;SENDER_ACCT_ID, const std::string &amp;SENDER_USER_ID, const std::string &amp;PLAN_CONSIDERATION, const std::string &amp;RECIPIENT_ACCT_ID, const std::string &amp;RECIPIENT_USER_ID, const int64_t &amp;INITIAL_PAYMENT_AMOUNT, const <a class="el" href="_o_t_common_8hpp.html#ad28ff0a3eda18840f6bda5872819167f">time64_t</a> &amp;INITIAL_PAYMENT_DELAY, const int64_t &amp;PAYMENT_PLAN_AMOUNT, const <a class="el" href="_o_t_common_8hpp.html#ad28ff0a3eda18840f6bda5872819167f">time64_t</a> &amp;PAYMENT_PLAN_DELAY, const <a class="el" href="_o_t_common_8hpp.html#ad28ff0a3eda18840f6bda5872819167f">time64_t</a> &amp;PAYMENT_PLAN_PERIOD, const <a class="el" href="_o_t_common_8hpp.html#ad28ff0a3eda18840f6bda5872819167f">time64_t</a> &amp;PAYMENT_PLAN_LENGTH, const int32_t &amp;PAYMENT_PLAN_MAX_PAYMENTS)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#ab2c738f0be13d027426f81b8c4579280">EasyProposePlan</a> (const std::string &amp;SERVER_ID, const std::string &amp;DATE_RANGE, const std::string &amp;SENDER_ACCT_ID, const std::string &amp;SENDER_USER_ID, const std::string &amp;PLAN_CONSIDERATION, const std::string &amp;RECIPIENT_ACCT_ID, const std::string &amp;RECIPIENT_USER_ID, const std::string &amp;INITIAL_PAYMENT, const std::string &amp;PAYMENT_PLAN, const std::string &amp;PLAN_EXPIRY)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a4a5efc4a1f8c24300ae218fd0919cedd">ConfirmPaymentPlan</a> (const std::string &amp;SERVER_ID, const std::string &amp;SENDER_USER_ID, const std::string &amp;SENDER_ACCT_ID, const std::string &amp;RECIPIENT_USER_ID, const std::string &amp;PAYMENT_PLAN)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a579170e034d1666d83c17dd314c0c3d1">Create_SmartContract</a> (const std::string &amp;SIGNER_NYM_ID, const <a class="el" href="_o_t_common_8hpp.html#ad28ff0a3eda18840f6bda5872819167f">time64_t</a> &amp;VALID_FROM, const <a class="el" href="_o_t_common_8hpp.html#ad28ff0a3eda18840f6bda5872819167f">time64_t</a> &amp;VALID_TO)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a9757000f80a55ac82268036dc50dc01c">SmartContract_AddBylaw</a> (const std::string &amp;THE_CONTRACT, const std::string &amp;SIGNER_NYM_ID, const std::string &amp;BYLAW_NAME)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#ac74dd9091ee7eb88601e88df9efde414">SmartContract_AddClause</a> (const std::string &amp;THE_CONTRACT, const std::string &amp;SIGNER_NYM_ID, const std::string &amp;BYLAW_NAME, const std::string &amp;CLAUSE_NAME, const std::string &amp;SOURCE_CODE)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#ac5f3dd89fb7ec6869d67374ef05457ad">SmartContract_AddVariable</a> (const std::string &amp;THE_CONTRACT, const std::string &amp;SIGNER_NYM_ID, const std::string &amp;BYLAW_NAME, const std::string &amp;VAR_NAME, const std::string &amp;VAR_ACCESS, const std::string &amp;VAR_TYPE, const std::string &amp;VAR_VALUE)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#aa61e5835f6d10923e42800f2e1dc09bf">SmartContract_AddCallback</a> (const std::string &amp;THE_CONTRACT, const std::string &amp;SIGNER_NYM_ID, const std::string &amp;BYLAW_NAME, const std::string &amp;CALLBACK_NAME, const std::string &amp;CLAUSE_NAME)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a7abd80748cf7bba19b3f6edeb4a20f61">SmartContract_AddHook</a> (const std::string &amp;THE_CONTRACT, const std::string &amp;SIGNER_NYM_ID, const std::string &amp;BYLAW_NAME, const std::string &amp;HOOK_NAME, const std::string &amp;CLAUSE_NAME)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a286cb092b658e466d02282075858aadd">SmartContract_AddParty</a> (const std::string &amp;THE_CONTRACT, const std::string &amp;SIGNER_NYM_ID, const std::string &amp;PARTY_NAME, const std::string &amp;AGENT_NAME)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a2a052a570cd5fcaef7b58aebb895096f">SmartContract_AddAccount</a> (const std::string &amp;THE_CONTRACT, const std::string &amp;SIGNER_NYM_ID, const std::string &amp;PARTY_NAME, const std::string &amp;ACCT_NAME, const std::string &amp;ASSET_TYPE_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a3007ed01f5915c23604c987b9d9ba30d">SmartContract_CountNumsNeeded</a> (const std::string &amp;THE_CONTRACT, const std::string &amp;AGENT_NAME)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a633214d91a3563d6ea8ba0412a60d9e1">SmartContract_ConfirmAccount</a> (const std::string &amp;THE_CONTRACT, const std::string &amp;SIGNER_NYM_ID, const std::string &amp;PARTY_NAME, const std::string &amp;ACCT_NAME, const std::string &amp;AGENT_NAME, const std::string &amp;ACCT_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#ad69b7dcad7d5271e9987900ba6e1d5bb">SmartContract_ConfirmParty</a> (const std::string &amp;THE_CONTRACT, const std::string &amp;PARTY_NAME, const std::string &amp;NYM_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a8b4949fd9c42092c32e40f5f0657e2ea">Smart_AreAllPartiesConfirmed</a> (const std::string &amp;THE_CONTRACT)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#acf89acc77de06a62961d95652495ecd6">Smart_GetBylawCount</a> (const std::string &amp;THE_CONTRACT)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#adc9632c0a4770131768cb39a5aada718">Smart_GetBylawByIndex</a> (const std::string &amp;THE_CONTRACT, const int32_t &amp;nIndex)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">returns the name of the bylaw.  <a href="#adc9632c0a4770131768cb39a5aada718"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a706eb989c8dafd4cd2e7f04ec960ce26">Bylaw_GetLanguage</a> (const std::string &amp;THE_CONTRACT, const std::string &amp;BYLAW_NAME)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a749aeaa4085bd0145f72b3fa79464f66">Bylaw_GetClauseCount</a> (const std::string &amp;THE_CONTRACT, const std::string &amp;BYLAW_NAME)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a5471ebc6235f1e1481860027dac94b5c">Clause_GetNameByIndex</a> (const std::string &amp;THE_CONTRACT, const std::string &amp;BYLAW_NAME, const int32_t &amp;nIndex)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#affe6c422291c8e6b8389cacd5167c914">Clause_GetContents</a> (const std::string &amp;THE_CONTRACT, const std::string &amp;BYLAW_NAME, const std::string &amp;CLAUSE_NAME)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a7a43f960bd87d44de443bc4ab2ef5e84">Bylaw_GetVariableCount</a> (const std::string &amp;THE_CONTRACT, const std::string &amp;BYLAW_NAME)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#aa7005d90b193d8bf451375145dcdd1c6">Variable_GetNameByIndex</a> (const std::string &amp;THE_CONTRACT, const std::string &amp;BYLAW_NAME, const int32_t &amp;nIndex)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#ac0e35836e8d0f79d604365a390661cc6">Variable_GetType</a> (const std::string &amp;THE_CONTRACT, const std::string &amp;BYLAW_NAME, const std::string &amp;VARIABLE_NAME)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#ad1a0d1ccc8870c2478f9aa9659dc51e1">Variable_GetAccess</a> (const std::string &amp;THE_CONTRACT, const std::string &amp;BYLAW_NAME, const std::string &amp;VARIABLE_NAME)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a041f07e1744c9d1b6008748e5f3c904a">Variable_GetContents</a> (const std::string &amp;THE_CONTRACT, const std::string &amp;BYLAW_NAME, const std::string &amp;VARIABLE_NAME)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a7c6b68722495be2bf1a71024ded5bbc3">Bylaw_GetHookCount</a> (const std::string &amp;THE_CONTRACT, const std::string &amp;BYLAW_NAME)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a9c8867d91b72f7bb19dca21a4f85e890">Hook_GetNameByIndex</a> (const std::string &amp;THE_CONTRACT, const std::string &amp;BYLAW_NAME, const int32_t &amp;nIndex)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a9474900b264f56b279fae796e4c054b5">Hook_GetClauseCount</a> (const std::string &amp;THE_CONTRACT, const std::string &amp;BYLAW_NAME, const std::string &amp;HOOK_NAME)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the number of clauses attached to a specific hook.  <a href="#a9474900b264f56b279fae796e4c054b5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#aa70d330a5a3e6ff06ca06aa6bb2018d7">Hook_GetClauseAtIndex</a> (const std::string &amp;THE_CONTRACT, const std::string &amp;BYLAW_NAME, const std::string &amp;HOOK_NAME, const int32_t &amp;nIndex)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a5b62bca27e890629808735b0d6639598">Bylaw_GetCallbackCount</a> (const std::string &amp;THE_CONTRACT, const std::string &amp;BYLAW_NAME)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#afa219a519cc7ddddd735f23e835a6fee">Callback_GetNameByIndex</a> (const std::string &amp;THE_CONTRACT, const std::string &amp;BYLAW_NAME, const int32_t &amp;nIndex)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#af952d83f17ef493cc8d61b22f6276eb3">Callback_GetClause</a> (const std::string &amp;THE_CONTRACT, const std::string &amp;BYLAW_NAME, const std::string &amp;CALLBACK_NAME)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a61b506249619e54aa58682ba5c723174">Smart_GetPartyCount</a> (const std::string &amp;THE_CONTRACT)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a468ff276835a0795b1baed7ed7c038fa">Smart_GetPartyByIndex</a> (const std::string &amp;THE_CONTRACT, const int32_t &amp;nIndex)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">returns the name of the party.  <a href="#a468ff276835a0795b1baed7ed7c038fa"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a3d40c93db335a728e07be5a52451a891">Smart_IsPartyConfirmed</a> (const std::string &amp;THE_CONTRACT, const std::string &amp;PARTY_NAME)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#af9e9ccab4b7249ed60d07690a8765a59">Party_GetID</a> (const std::string &amp;THE_CONTRACT, const std::string &amp;PARTY_NAME)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#aa274d975294488d77a90b462d3e0bbde">Party_GetAcctCount</a> (const std::string &amp;THE_CONTRACT, const std::string &amp;PARTY_NAME)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a959128265f75ed1a528c589311b9287f">Party_GetAcctNameByIndex</a> (const std::string &amp;THE_CONTRACT, const std::string &amp;PARTY_NAME, const int32_t &amp;nIndex)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#ade083f86e74e59977670e02fb11de343">Party_GetAcctID</a> (const std::string &amp;THE_CONTRACT, const std::string &amp;PARTY_NAME, const std::string &amp;ACCT_NAME)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#ae8794cf485acf05c70c5e10e66a8b211">Party_GetAcctAssetID</a> (const std::string &amp;THE_CONTRACT, const std::string &amp;PARTY_NAME, const std::string &amp;ACCT_NAME)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a960e6c5c4819c494e9e5b79b2717d73b">Party_GetAcctAgentName</a> (const std::string &amp;THE_CONTRACT, const std::string &amp;PARTY_NAME, const std::string &amp;ACCT_NAME)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a4e74fd38565f07849781befa31281149">Party_GetAgentCount</a> (const std::string &amp;THE_CONTRACT, const std::string &amp;PARTY_NAME)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a3a6b89e1e57b7d76ef9b208e63c13e82">Party_GetAgentNameByIndex</a> (const std::string &amp;THE_CONTRACT, const std::string &amp;PARTY_NAME, const int32_t &amp;nIndex)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a3fcc85b7d89f3fbc98683ae6c8e2dd9d">Party_GetAgentID</a> (const std::string &amp;THE_CONTRACT, const std::string &amp;PARTY_NAME, const std::string &amp;AGENT_NAME)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a2d9125850307fb5b60789c068fa6e2b9">activateSmartContract</a> (const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;THE_SMART_CONTRACT)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a9b1d0d0ffda7a21c9b6bb16a4a675d73">triggerClause</a> (const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const int64_t &amp;TRANSACTION_NUMBER, const std::string &amp;CLAUSE_NAME, const std::string &amp;STR_PARAM)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#ac54a50dc4fb602bccac015f4af652200">Msg_HarvestTransactionNumbers</a> (const std::string &amp;THE_MESSAGE, const std::string &amp;USER_ID, const bool &amp;bHarvestingForRetry, const bool &amp;bReplyWasSuccess, const bool &amp;bReplyWasFailure, const bool &amp;bTransactionWasSuccess, const bool &amp;bTransactionWasFailure)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a27fefe73c76c39085b549433f25ae809">LoadUserPubkey_Encryption</a> (const std::string &amp;USER_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#ab8e9357c59623aad324b56a0e5319f44">LoadUserPubkey_Signing</a> (const std::string &amp;USER_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#af56df073501c675b39619e0a8961b3df">LoadPubkey_Encryption</a> (const std::string &amp;USER_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#aec2658b220e18c797162c477fe2f5c9c">LoadPubkey_Signing</a> (const std::string &amp;USER_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#afa8f5a1b2e21636b59f90a3b60f7aa80">VerifyUserPrivateKey</a> (const std::string &amp;USER_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a50d1782dab55e11d3e833895039b63ef">LoadPurse</a> (const std::string &amp;SERVER_ID, const std::string &amp;ASSET_TYPE_ID, const std::string &amp;USER_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#abdede0ee9c0f359d02a405ef0e590863">LoadMint</a> (const std::string &amp;SERVER_ID, const std::string &amp;ASSET_TYPE_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a610d699de1a08f3fbed94990cf01b13e">LoadAssetContract</a> (const std::string &amp;ASSET_TYPE_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a056a4968b8d9793fb70a7b4b892fb212">LoadServerContract</a> (const std::string &amp;SERVER_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a00f16d7a45e330d3d27fa562f49ada91">Mint_IsStillGood</a> (const std::string &amp;SERVER_ID, const std::string &amp;ASSET_TYPE_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#acdb88af66f7b63a075f4fa744105854a">IsBasketCurrency</a> (const std::string &amp;ASSET_TYPE_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#ae0da0edb6c9accf976aefa1b7f9edc63">Basket_GetMemberCount</a> (const std::string &amp;BASKET_ASSET_TYPE_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a2e07e1aeba5f83e3c5ec7b2f36fd2fa0">Basket_GetMemberType</a> (const std::string &amp;BASKET_ASSET_TYPE_ID, const int32_t &amp;nIndex)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a7d8ee6e7112c90631e808875bd9a1977">Basket_GetMinimumTransferAmount</a> (const std::string &amp;BASKET_ASSET_TYPE_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a06717b4dbc96621925dc37a4150f66fc">Basket_GetMemberMinimumTransferAmount</a> (const std::string &amp;BASKET_ASSET_TYPE_ID, const int32_t &amp;nIndex)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#ac8dc06202229e3ecd7c6284b274f2745">LoadAssetAccount</a> (const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ACCOUNT_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#ad13ec1f9fdf6de0d0225f9fe525a449d">LoadInbox</a> (const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ACCOUNT_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#ad0eff5c7f97a80201f96034fecfaefa1">LoadOutbox</a> (const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ACCOUNT_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#af2d72e9950e4a1c33019a4a2fac2acf8">LoadInboxNoVerify</a> (const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ACCOUNT_ID)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">These versions don't verify the ledger, they just load it up.  <a href="#af2d72e9950e4a1c33019a4a2fac2acf8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#ae985c8026afab47598da16babeed4864">LoadOutboxNoVerify</a> (const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ACCOUNT_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a1459f5272b7b90c2dfde5a833b1b11ab">LoadPaymentInbox</a> (const std::string &amp;SERVER_ID, const std::string &amp;USER_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a8f6682955ddaea9dca9a6056bd41080b">LoadPaymentInboxNoVerify</a> (const std::string &amp;SERVER_ID, const std::string &amp;USER_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a1fd5072dec68cf1840c5e414f8ae5a48">LoadRecordBox</a> (const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ACCOUNT_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#aa1ce8ccf2be283d7bc4df03de5de9c37">LoadRecordBoxNoVerify</a> (const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ACCOUNT_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a15af92e750fac1175079e746a98233bd">ClearRecord</a> (const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ACCOUNT_ID, const int32_t &amp;nIndex, const bool &amp;bClearAll)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#af3f55623e7cfe58ab4395687b5f7b0b6">LoadExpiredBox</a> (const std::string &amp;SERVER_ID, const std::string &amp;USER_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a53ad0ca7b23b5dd3f6f075423d4c9fa2">LoadExpiredBoxNoVerify</a> (const std::string &amp;SERVER_ID, const std::string &amp;USER_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a0ea384dc2ddb41f122e4665f21374654">ClearExpired</a> (const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const int32_t &amp;nIndex, const bool &amp;bClearAll)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a11db9e97151620ab6754719366754b20">Ledger_GetCount</a> (const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ACCOUNT_ID, const std::string &amp;THE_LEDGER)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Find out how many pending transactions (and receipts) are in this inbox.  <a href="#a11db9e97151620ab6754719366754b20"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a6a592a8bd48d7e006fdfe054e79b47ce">Ledger_CreateResponse</a> (const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ACCOUNT_ID, const std::string &amp;ORIGINAL_LEDGER)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#ad86da1897ef6aa8d9f4bb07a694fe9f6">Ledger_GetTransactionByIndex</a> (const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ACCOUNT_ID, const std::string &amp;THE_LEDGER, const int32_t &amp;nIndex)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#aabc9b8e0c20f23310e9bf1f273d44d04">Ledger_GetTransactionByID</a> (const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ACCOUNT_ID, const std::string &amp;THE_LEDGER, const int64_t &amp;TRANSACTION_NUMBER)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a0a4e3ff37ee5c1be0b5805f6498b43eb">Ledger_GetTransactionIDByIndex</a> (const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ACCOUNT_ID, const std::string &amp;THE_LEDGER, const int32_t &amp;nIndex)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#ab1c6a2da160b7c47081e3a09756899a7">Ledger_AddTransaction</a> (const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ACCOUNT_ID, const std::string &amp;THE_LEDGER, const std::string &amp;THE_TRANSACTION)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a transaction to a ledger.  <a href="#ab1c6a2da160b7c47081e3a09756899a7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#aff7a984d28b09d76103f52faebfb754c">Transaction_CreateResponse</a> (const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ACCOUNT_ID, const std::string &amp;RESPONSE_LEDGER, const std::string &amp;ORIGINAL_TRANSACTION, const bool &amp;BOOL_DO_I_ACCEPT)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#ae43e5ed33e7e2281c92a35818338c953">Ledger_FinalizeResponse</a> (const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ACCOUNT_ID, const std::string &amp;THE_LEDGER)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#ab23050aeec2f70007b6983e4d46c5ea7">Ledger_GetInstrument</a> (const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ACCOUNT_ID, const std::string &amp;THE_LEDGER, const int32_t &amp;nIndex)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a49dd452b5c5f657861c4031e32632378">RecordPayment</a> (const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const bool &amp;bIsInbox, const int32_t &amp;nIndex, const bool &amp;bSaveCopy)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#aa97dac68f36dde2f0e43c3059ac9efe2">Transaction_GetType</a> (const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ACCOUNT_ID, const std::string &amp;THE_TRANSACTION)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Get Transaction Type (internally uses GetTransactionTypeString().)  <a href="#aa97dac68f36dde2f0e43c3059ac9efe2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a5c24d944d0bb0c4597e39acc9ed400e3">ReplyNotice_GetRequestNum</a> (const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;THE_TRANSACTION)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a42b95aab2376ff21fb6a7b9704212956">Transaction_GetVoucher</a> (const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ACCOUNT_ID, const std::string &amp;THE_TRANSACTION)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a53d79e4cf2d08e573668e7d5950a88ff">Transaction_GetSuccess</a> (const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ACCOUNT_ID, const std::string &amp;THE_TRANSACTION)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#abd80f7e0caf22e569fcdf9173cafb8fa">Transaction_IsCanceled</a> (const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ACCOUNT_ID, const std::string &amp;THE_TRANSACTION)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#ac9008c5a1c984e5870207e87dff173e3">Transaction_GetBalanceAgreementSuccess</a> (const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ACCOUNT_ID, const std::string &amp;THE_TRANSACTION)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT <a class="el" href="_o_t_common_8hpp.html#ad28ff0a3eda18840f6bda5872819167f">time64_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a08f64194b0ac81e9b3695d6500894303">Transaction_GetDateSigned</a> (const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ACCOUNT_ID, const std::string &amp;THE_TRANSACTION)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#add760095ec8b4d8acb2fe4edb7e5e996">Transaction_GetAmount</a> (const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ACCOUNT_ID, const std::string &amp;THE_TRANSACTION)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a01e724dcf58de268c61cb2699349a1f1">Pending_GetNote</a> (const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ACCOUNT_ID, const std::string &amp;THE_TRANSACTION)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a56963563f1323165940629fe18280c47">Transaction_GetSenderUserID</a> (const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ACCOUNT_ID, const std::string &amp;THE_TRANSACTION)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#aae89130ef52fd5d564c399093e685b56">Transaction_GetSenderAcctID</a> (const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ACCOUNT_ID, const std::string &amp;THE_TRANSACTION)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a99ab2f74125acea47ded3a6878354cc8">Transaction_GetRecipientUserID</a> (const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ACCOUNT_ID, const std::string &amp;THE_TRANSACTION)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a8f7548ab82a6b82c625758e8fbca116b">Transaction_GetRecipientAcctID</a> (const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ACCOUNT_ID, const std::string &amp;THE_TRANSACTION)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#ab87d86f975e78c01b27d61d960fe9fd5">Transaction_GetDisplayReferenceToNum</a> (const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ACCOUNT_ID, const std::string &amp;THE_TRANSACTION)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#abf8584922878bf613ccbd5cbe5a237e5">SavePurse</a> (const std::string &amp;SERVER_ID, const std::string &amp;ASSET_TYPE_ID, const std::string &amp;USER_ID, const std::string &amp;THE_PURSE)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a2bb95de55453830c7a0ccc260d5f4f35">CreatePurse</a> (const std::string &amp;SERVER_ID, const std::string &amp;ASSET_TYPE_ID, const std::string &amp;OWNER_ID, const std::string &amp;SIGNER_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a3fe29ca225e57260b51840a45f4d4b8b">CreatePurse_Passphrase</a> (const std::string &amp;SERVER_ID, const std::string &amp;ASSET_TYPE_ID, const std::string &amp;SIGNER_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a8be549e91a6befefc633125e2980b69e">Purse_GetTotalValue</a> (const std::string &amp;SERVER_ID, const std::string &amp;ASSET_TYPE_ID, const std::string &amp;THE_PURSE)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Get Purse Total Value (internally uses GetTotalValue().)  <a href="#a8be549e91a6befefc633125e2980b69e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a34a956fd19fad82a197806fc87834709">Purse_Count</a> (const std::string &amp;SERVER_ID, const std::string &amp;ASSET_TYPE_ID, const std::string &amp;THE_PURSE)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">returns a count of the number of cash tokens inside this purse.  <a href="#a34a956fd19fad82a197806fc87834709"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a301c584efb3af64dc0047ae09307543a">Purse_HasPassword</a> (const std::string &amp;SERVER_ID, const std::string &amp;THE_PURSE)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a8c71857a2fbfc51e6c6dc571fe27054c">Purse_Peek</a> (const std::string &amp;SERVER_ID, const std::string &amp;ASSET_TYPE_ID, const std::string &amp;OWNER_ID, const std::string &amp;THE_PURSE)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#acc9c33a32376d1d8ea0cd64920905966">Purse_Pop</a> (const std::string &amp;SERVER_ID, const std::string &amp;ASSET_TYPE_ID, const std::string &amp;OWNER_OR_SIGNER_ID, const std::string &amp;THE_PURSE)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a84cb52e90c17386b9d829cc19b9ec7fe">Purse_Push</a> (const std::string &amp;SERVER_ID, const std::string &amp;ASSET_TYPE_ID, const std::string &amp;SIGNER_ID, const std::string &amp;OWNER_ID, const std::string &amp;THE_PURSE, const std::string &amp;THE_TOKEN)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a701509c4d9b817d3beca03bc1cbe6d99">Purse_Empty</a> (const std::string &amp;SERVER_ID, const std::string &amp;ASSET_TYPE_ID, const std::string &amp;SIGNER_ID, const std::string &amp;THE_PURSE)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a3c0090685d45d8d765eef17619afa089">Wallet_ImportPurse</a> (const std::string &amp;SERVER_ID, const std::string &amp;ASSET_TYPE_ID, const std::string &amp;USER_ID, const std::string &amp;THE_PURSE)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Should handle duplicates. Should load, merge, and save.  <a href="#a3c0090685d45d8d765eef17619afa089"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a2152b86656a453a48c270fa3c0154884">exchangePurse</a> (const std::string &amp;SERVER_ID, const std::string &amp;ASSET_TYPE_ID, const std::string &amp;USER_ID, const std::string &amp;THE_PURSE)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a69c71e95a4ef9eb2bb19937618735fbe">Token_ChangeOwner</a> (const std::string &amp;SERVER_ID, const std::string &amp;ASSET_TYPE_ID, const std::string &amp;THE_TOKEN, const std::string &amp;SIGNER_NYM_ID, const std::string &amp;OLD_OWNER, const std::string &amp;NEW_OWNER)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#ad7f11418c03d9e3ad70c23bb220da105">Token_GetID</a> (const std::string &amp;SERVER_ID, const std::string &amp;ASSET_TYPE_ID, const std::string &amp;THE_TOKEN)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a806f47fc133eb237a14ecd5e6416d71a">Token_GetDenomination</a> (const std::string &amp;SERVER_ID, const std::string &amp;ASSET_TYPE_ID, const std::string &amp;THE_TOKEN)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">The actual cash value of the token. Returns a int64_t.  <a href="#a806f47fc133eb237a14ecd5e6416d71a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#af2b5c6e571ec7670ffcf36e6f65b8494">Token_GetSeries</a> (const std::string &amp;SERVER_ID, const std::string &amp;ASSET_TYPE_ID, const std::string &amp;THE_TOKEN)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT <a class="el" href="_o_t_common_8hpp.html#ad28ff0a3eda18840f6bda5872819167f">time64_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#ad238d24c7f5b9ed5dcc075e63e05b9d0">Token_GetValidFrom</a> (const std::string &amp;SERVER_ID, const std::string &amp;ASSET_TYPE_ID, const std::string &amp;THE_TOKEN)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">the date is seconds since Jan 1970.  <a href="#ad238d24c7f5b9ed5dcc075e63e05b9d0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT <a class="el" href="_o_t_common_8hpp.html#ad28ff0a3eda18840f6bda5872819167f">time64_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a18f41ee30a81eddd1abd8c0ecc42e1c8">Token_GetValidTo</a> (const std::string &amp;SERVER_ID, const std::string &amp;ASSET_TYPE_ID, const std::string &amp;THE_TOKEN)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#ad7ab09b32bc246b3370f65456c5acfcd">Token_GetAssetID</a> (const std::string &amp;THE_TOKEN)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a37c61882ab4f0fc0d8621e2dc062740b">Token_GetServerID</a> (const std::string &amp;THE_TOKEN)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a7e4eb9b2afbb270cd108ddd48662c10c">Instrmnt_GetAmount</a> (const std::string &amp;THE_INSTRUMENT)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#ac031ea7a5cfcc1616ce37eeaf84f52b6">Instrmnt_GetTransNum</a> (const std::string &amp;THE_INSTRUMENT)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT <a class="el" href="_o_t_common_8hpp.html#ad28ff0a3eda18840f6bda5872819167f">time64_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a0f5c2d836a451925d73ef0bd01140967">Instrmnt_GetValidFrom</a> (const std::string &amp;THE_INSTRUMENT)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT <a class="el" href="_o_t_common_8hpp.html#ad28ff0a3eda18840f6bda5872819167f">time64_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#ae11744cdc4c18885067e263a628268e3">Instrmnt_GetValidTo</a> (const std::string &amp;THE_INSTRUMENT)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#acd74b10edc2c2d138f392e37292ee680">Instrmnt_GetMemo</a> (const std::string &amp;THE_INSTRUMENT)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a2fd472eebaee74cbac5399240fccca8f">Instrmnt_GetType</a> (const std::string &amp;THE_INSTRUMENT)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#ac239b16ee54d312d0cba2e20d90879ed">Instrmnt_GetServerID</a> (const std::string &amp;THE_INSTRUMENT)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a84f0ede82b6f2c43c2d3d089065bea15">Instrmnt_GetAssetID</a> (const std::string &amp;THE_INSTRUMENT)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#ab251235ae0a34992165da9ac846f3d0e">Instrmnt_GetSenderUserID</a> (const std::string &amp;THE_INSTRUMENT)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a2ecd9a0a69c92f7e623be88eba1abdb7">Instrmnt_GetSenderAcctID</a> (const std::string &amp;THE_INSTRUMENT)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a814849a3dbd04a4463395b87d2c30569">Instrmnt_GetRemitterUserID</a> (const std::string &amp;THE_INSTRUMENT)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a1ac12dffcbb923a2935e8b2d4c98742e">Instrmnt_GetRemitterAcctID</a> (const std::string &amp;THE_INSTRUMENT)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a6b10e643af20f5aed9fc07b039be0a0b">Instrmnt_GetRecipientUserID</a> (const std::string &amp;THE_INSTRUMENT)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#adece47c223e4ecb8e33700efad49dcb4">Instrmnt_GetRecipientAcctID</a> (const std::string &amp;THE_INSTRUMENT)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a6cd08bfe3b6c64afc6c0a16b308022c0">checkServerID</a> (const std::string &amp;SERVER_ID, const std::string &amp;USER_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a9ac57a993b4d2a1608ef0ac164960948">createUserAccount</a> (const std::string &amp;SERVER_ID, const std::string &amp;USER_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a0f3388bb5b779fa5f44ecea7b6513866">deleteUserAccount</a> (const std::string &amp;SERVER_ID, const std::string &amp;USER_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a4373b81b1530a392ba5fbab96d7c534d">deleteAssetAccount</a> (const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ACCOUNT_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a4e5460e41424176727e7043b278d8350">usageCredits</a> (const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;USER_ID_CHECK, const int64_t &amp;ADJUSTMENT)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a9ba3dd59c6ae3c669730014842bfb90e">Message_GetUsageCredits</a> (const std::string &amp;THE_MESSAGE)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a4a382400dd621c29f9e66dd7714bfef4">checkUser</a> (const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;USER_ID_CHECK)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a379cedb3b377bb28201da0989b0fdc43">sendUserMessage</a> (const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;USER_ID_RECIPIENT, const std::string &amp;RECIPIENT_PUBKEY, const std::string &amp;THE_MESSAGE)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a01f5aa5a55a345259b808fceaf310eba">sendUserInstrument</a> (const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;USER_ID_RECIPIENT, const std::string &amp;RECIPIENT_PUBKEY, const std::string &amp;THE_INSTRUMENT, const std::string &amp;INSTRUMENT_FOR_SENDER)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a57eb0708df353538dc4a33b031ecc07c">getRequest</a> (const std::string &amp;SERVER_ID, const std::string &amp;USER_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a89358c9cc2fa0dcfff007c3bcbc2ed5c">getTransactionNumber</a> (const std::string &amp;SERVER_ID, const std::string &amp;USER_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#abc76e39d38dcea1d999c410272f6cd53">issueAssetType</a> (const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;THE_CONTRACT)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#af26e961f144a979bc1bbe1aa5f5537be">getContract</a> (const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ASSET_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a6486d68cd2943fbdf0c01716ea78a9d5">getMint</a> (const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ASSET_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a1a3d22b5d80e570fb07ba3f7ee1c17b3">createAssetAccount</a> (const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ASSET_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a676046a2b6dde3b9852ab00c4216d52d">getAccount</a> (const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ACCT_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a8cb22849daabd9d44b8bb6bccb26e722">getAccountFiles</a> (const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ACCT_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#afa5010dfd9752a6b4adcd12afd98e598">GenerateBasketCreation</a> (const std::string &amp;USER_ID, const int64_t &amp;MINIMUM_TRANSFER)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a7391d23707ed9404c19e92bcf0c97b61">AddBasketCreationItem</a> (const std::string &amp;USER_ID, const std::string &amp;THE_BASKET, const std::string &amp;ASSET_TYPE_ID, const int64_t &amp;MINIMUM_TRANSFER)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a56b0f22eb7eb90ec4c858ec204c92ab3">issueBasket</a> (const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;THE_BASKET)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#ae5bbfef608110f122e8bb29da971ad5e">GenerateBasketExchange</a> (const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;BASKET_ASSET_TYPE_ID, const std::string &amp;BASKET_ASSET_ACCT_ID, const int32_t &amp;TRANSFER_MULTIPLE)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a278c992b2b6066acb57a0f6d5910aee4">AddBasketExchangeItem</a> (const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;THE_BASKET, const std::string &amp;ASSET_TYPE_ID, const std::string &amp;ASSET_ACCT_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#af33eafc3822332f38a50b4018395478b">exchangeBasket</a> (const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;BASKET_ASSET_ID, const std::string &amp;THE_BASKET, const bool &amp;BOOL_EXCHANGE_IN_OR_OUT)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#aff10a3fbcf70deccbce6ead956bc9d63">notarizeWithdrawal</a> (const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ACCT_ID, const int64_t &amp;AMOUNT)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#ab9ead57ad3597f23d1dfdf548c8d4a74">notarizeDeposit</a> (const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ACCT_ID, const std::string &amp;THE_PURSE)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#ada681fe672dc6e9c5dfa2273dc3d797d">notarizeTransfer</a> (const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ACCT_FROM, const std::string &amp;ACCT_TO, const int64_t &amp;AMOUNT, const std::string &amp;NOTE)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#ab6e791d8ddd8345831b8618afd635f38">getInbox</a> (const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ACCT_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#af13f8f83d370e8b18ad2de97181a5dfa">getOutbox</a> (const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ACCT_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a69bce6a3205dbd153104c79e0b9f0202">getNymbox</a> (const std::string &amp;SERVER_ID, const std::string &amp;USER_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#adc10400f3c5ca79977afbc32cece6137">LoadNymbox</a> (const std::string &amp;SERVER_ID, const std::string &amp;USER_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a5afcb37758acf603d42bd4a586618077">LoadNymboxNoVerify</a> (const std::string &amp;SERVER_ID, const std::string &amp;USER_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a280cb93214875fe7508fbf0cce2ac67b">Nymbox_GetReplyNotice</a> (const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const int64_t &amp;REQUEST_NUMBER)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a21fc5967b732f9792d642ca567d2b68b">HaveAlreadySeenReply</a> (const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const int64_t &amp;REQUEST_NUMBER)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#ac3cdd2bbe3e6fe34eaefe74ae0e5be75">getBoxReceipt</a> (const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ACCOUNT_ID, const int32_t &amp;nBoxType, const int64_t &amp;TRANSACTION_NUMBER)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a8bbd7f75a75bdd5930c0d42b61fe397f">DoesBoxReceiptExist</a> (const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ACCOUNT_ID, const int32_t &amp;nBoxType, const int64_t &amp;TRANSACTION_NUMBER)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#ab0f854984189e4ed4c309cff726f9ab4">processInbox</a> (const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ACCT_ID, const std::string &amp;ACCT_LEDGER)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a05803277a289a947cb936eb7dd3626d8">processNymbox</a> (const std::string &amp;SERVER_ID, const std::string &amp;USER_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a141b6f08b693940b3cc24797d9fdaa92">withdrawVoucher</a> (const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ACCT_ID, const std::string &amp;RECIPIENT_USER_ID, const std::string &amp;CHEQUE_MEMO, const int64_t &amp;AMOUNT)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a7a7dbdb89197a47d1c62887b67d0054e">payDividend</a> (const std::string &amp;SERVER_ID, const std::string &amp;ISSUER_USER_ID, const std::string &amp;DIVIDEND_FROM_ACCT_ID, const std::string &amp;SHARES_ASSET_TYPE_ID, const std::string &amp;DIVIDEND_MEMO, const int64_t &amp;AMOUNT_PER_SHARE)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">PAY DIVIDEND -- to shareholders.  <a href="#a7a7dbdb89197a47d1c62887b67d0054e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a7e6d6c5b53a6688f743189efb6008381">depositCheque</a> (const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ACCT_ID, const std::string &amp;THE_CHEQUE)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#ac3d0dbc91bb09c6979a8a9586bf25f4e">depositPaymentPlan</a> (const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;THE_PAYMENT_PLAN)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#ab0679f69605179746070b0acb003bbab">issueMarketOffer</a> (const std::string &amp;ASSET_ACCT_ID, const std::string &amp;CURRENCY_ACCT_ID, const int64_t &amp;MARKET_SCALE, const int64_t &amp;MINIMUM_INCREMENT, const int64_t &amp;TOTAL_ASSETS_ON_OFFER, const int64_t &amp;PRICE_LIMIT, const bool &amp;bBuyingOrSelling, const <a class="el" href="_o_t_common_8hpp.html#ad28ff0a3eda18840f6bda5872819167f">time64_t</a> &amp;LIFESPAN_IN_SECONDS, const std::string &amp;STOP_SIGN, const int64_t &amp;ACTIVATION_PRICE)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a9cc96101156fb1a34e6f8f30bc7b8e01">getMarketList</a> (const std::string &amp;SERVER_ID, const std::string &amp;USER_ID)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves details for each market.  <a href="#a9cc96101156fb1a34e6f8f30bc7b8e01"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a0c338692168a52f6d51e8545038044d3">getMarketOffers</a> (const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;MARKET_ID, const int64_t &amp;MAX_DEPTH)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets all offers for a specific market and their details (up until maximum depth)  <a href="#a0c338692168a52f6d51e8545038044d3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#ac4d037d2bf1c776f78845d2120d85072">getMarketRecentTrades</a> (const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;MARKET_ID)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets all recent trades (up until maximum depth)  <a href="#ac4d037d2bf1c776f78845d2120d85072"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a9a467be336ba01534d66f5d572be2222">getNym_MarketOffers</a> (const std::string &amp;SERVER_ID, const std::string &amp;USER_ID)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">This "Market Offer" data is a lot more detailed than the Market_GetOffers() call, which seems similar otherwise.  <a href="#a9a467be336ba01534d66f5d572be2222"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a3c094e341789c8f2442d519a0b89163b">killMarketOffer</a> (const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ASSET_ACCT_ID, const int64_t &amp;TRANSACTION_NUMBER)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#af480784697d3e4a5d61be6024b152591">killPaymentPlan</a> (const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;FROM_ACCT_ID, const int64_t &amp;TRANSACTION_NUMBER)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a65175755753f15ff01e91312f349f5ea">PopMessageBuffer</a> (const int64_t &amp;REQUEST_NUMBER, const std::string &amp;SERVER_ID, const std::string &amp;USER_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#aa920e604052b505d382202593c050a11">FlushMessageBuffer</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#aa9537e99a39bb621775e57b8be07fc02">GetSentMessage</a> (const int64_t &amp;REQUEST_NUMBER, const std::string &amp;SERVER_ID, const std::string &amp;USER_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#af1dbcebe7dd7a4c24ba1c32c9d6c062a">RemoveSentMessage</a> (const int64_t &amp;REQUEST_NUMBER, const std::string &amp;SERVER_ID, const std::string &amp;USER_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#ae9d152765febba64cb98ddfc8461686d">FlushSentMessages</a> (const bool &amp;bHarvestingForRetry, const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;THE_NYMBOX)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a393c8f1065be86b2bcb8192ebdfff64b">Sleep</a> (const int64_t &amp;MILLISECONDS)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a9dbdf7e9ccdf8e21ac5c3a6fbcf2705b">ResyncNymWithServer</a> (const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;THE_MESSAGE)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a4e3665a9990c226dd4981c9db2a3f693">Message_GetCommand</a> (const std::string &amp;THE_MESSAGE)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a74918f6e7d392c9d1b5bd1bf6cf77647">Message_GetSuccess</a> (const std::string &amp;THE_MESSAGE)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a9103c1fd88d7819719b3485bc2127e50">queryAssetTypes</a> (const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ENCODED_MAP)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a8dc2de784de5e6ea5d73d71a56e951b2">Message_GetPayload</a> (const std::string &amp;THE_MESSAGE)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a4d2f83207774557d0a71bfbceadca34f">Message_GetDepth</a> (const std::string &amp;THE_MESSAGE)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a1be2395223951358285e4f32507dd405">Message_GetTransactionSuccess</a> (const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ACCOUNT_ID, const std::string &amp;THE_MESSAGE)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a601be53bd7d0027de7a8f8c643a95bd3">Message_IsTransactionCanceled</a> (const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ACCOUNT_ID, const std::string &amp;THE_MESSAGE)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#aafcc2a8a18275deef3ea14b672e0902b">Message_GetBalanceAgreementSuccess</a> (const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ACCOUNT_ID, const std::string &amp;THE_MESSAGE)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#afbc53195dcad5ab5231e9c5ac4ac909f">Message_GetLedger</a> (const std::string &amp;THE_MESSAGE)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#ad1bfd4d027d5ba28ba126297c99a2952">Message_GetNewAssetTypeID</a> (const std::string &amp;THE_MESSAGE)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a2fce33981138126dbb29b0800440de87">Message_GetNewIssuerAcctID</a> (const std::string &amp;THE_MESSAGE)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a4179300fdda6081f70afaf61c485399e">Message_GetNewAcctID</a> (const std::string &amp;THE_MESSAGE)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#abfaaae79076695bf0ec9dac56c17f2fb">Message_GetNymboxHash</a> (const std::string &amp;THE_MESSAGE)</td></tr>
<tr><td colspan="2"><h2><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_o_t___a_p_i.html">OT_API</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a4a454ed385391e993ec5ebf323a54063">p_OTAPI</a></td></tr>
<tr><td colspan="2"><h2><a name="pro-static-attribs"></a>
Static Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a908efdafde9c9738835069849c1e05ae">bInitOTApp</a> = false</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_a_p_i___exec.html#a9faaa894d65345064dddada36d292b46">bCleanupOTApp</a> = false</td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock">
<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8hpp_source.html#l00174">174</a> of file <a class="el" href="_o_t_a_p_i___exec_8hpp_source.html">OTAPI_Exec.hpp</a>.</p>
</div><hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="ac4c534a89b6ea47197e9e9abd831726b"></a><!-- doxytag: member="OTAPI_Exec::OTAPI_Exec" ref="ac4c534a89b6ea47197e9e9abd831726b" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_a_p_i___exec.html#ac4c534a89b6ea47197e9e9abd831726b">OTAPI_Exec::OTAPI_Exec</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l00186">186</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                       : <a class="code" href="class_o_t_a_p_i___exec.html#a4a454ed385391e993ec5ebf323a54063">p_OTAPI</a>(NULL)
{
}
</pre></div>
</div>
</div>
<a class="anchor" id="aea5e98c237689dee0885360ca286d882"></a><!-- doxytag: member="OTAPI_Exec::~OTAPI_Exec" ref="aea5e98c237689dee0885360ca286d882" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_a_p_i___exec.html#aea5e98c237689dee0885360ca286d882">OTAPI_Exec::~OTAPI_Exec</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l00190">190</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
}
</pre></div>
</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a2d9125850307fb5b60789c068fa6e2b9"></a><!-- doxytag: member="OTAPI_Exec::activateSmartContract" ref="a2d9125850307fb5b60789c068fa6e2b9" args="(const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;THE_SMART_CONTRACT)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_a_p_i___exec.html#a2d9125850307fb5b60789c068fa6e2b9">OTAPI_Exec::activateSmartContract</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_SMART_CONTRACT</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>-------------------------------------------------- ACTIVATE SMART CONTRACT Take an existing smart contract, which has already been set up, confirmed, etc, and then activate it on the server so it can start processing.</p>
<p>See Create_SmartContract (etc.) </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l07010">7010</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty())          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID.empty())            { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>            ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (THE_SMART_CONTRACT.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_SMART_CONTRACT&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>  theServerID(SERVER_ID), theUserID(USER_ID);
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a>      strContract(THE_SMART_CONTRACT);

    <span class="keywordflow">return</span> <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#ab1022d7f5baf3dadf907e1cf1f5adc08">activateSmartContract</a>(theServerID, theUserID, strContract);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a3fcec3e1ad613490838470bb397675f6"></a><!-- doxytag: member="OTAPI_Exec::AddAssetContract" ref="a3fcec3e1ad613490838470bb397675f6" args="(const std::string &amp;strContract)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_a_p_i___exec.html#a3fcec3e1ad613490838470bb397675f6">OTAPI_Exec::AddAssetContract</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>strContract</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>-------------------------------------------------- ADD ASSET CONTRACT (to wallet)</p>
<p>If you have an asset contract that you'd like to add to your wallet, call this function. </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l01385">1385</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (strContract.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;strContract&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_wallet.html">OTWallet</a> * pWallet = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#af759173aae6f4592c3d6ef1f6a9aa4ff">GetWallet</a>(__FUNCTION__); <span class="comment">// This logs and ASSERTs already.</span>
    <span class="keywordflow">if</span> (NULL == pWallet) <span class="keywordflow">return</span> <span class="keyword">false</span>;
    <span class="comment">// By this point, pWallet is a good pointer.  (No need to cleanup.)</span>
    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(<span class="stringliteral">&quot;&quot;</span> != strContract);
    std::string str_Trim(strContract);
    std::string str_Trim2 = <a class="code" href="class_o_t_string.html#afe7626d0687eab81200a1af1539faed9">OTString::trim</a>(str_Trim);
    <a class="code" href="class_o_t_string.html">OTString</a> otstrContract(str_Trim2.c_str());

    <a class="code" href="class_o_t_asset_contract.html">OTAssetContract</a> * pContract = <span class="keyword">new</span> <a class="code" href="class_o_t_asset_contract.html">OTAssetContract</a>;
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pContract);

    <span class="comment">// Check the server signature on the contract here. (Perhaps the message is good enough?</span>
    <span class="comment">// After all, the message IS signed by the server and contains the Account.</span>
    <span class="comment">//  if (pContract-&gt;LoadContract() &amp;&amp; pContract-&gt;VerifyContract())</span>
    <span class="keywordflow">if</span> (otstrContract.Exists() &amp;&amp; pContract-&gt;LoadContractFromString(otstrContract))
    {
        <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theContractID;

        pContract-&gt;CalculateContractID(theContractID);
        pContract-&gt;SetIdentifier(theContractID);

        <span class="comment">// Next make sure the wallet has this contract on its list...</span>
        pWallet-&gt;<a class="code" href="class_o_t_wallet.html#aec0dc4e66d6bc87cbec6fc4c0e3851f7">AddAssetContract</a>(*pContract);
        pContract = NULL; <span class="comment">// Success. The wallet &quot;owns&quot; it now, no need to clean it up.</span>
    }
    <span class="comment">// cleanup</span>
    <span class="keywordflow">if</span> (pContract)
    {
        <span class="keyword">delete</span> pContract;
        pContract = NULL;

        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="keywordflow">return</span> <span class="keyword">true</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a7391d23707ed9404c19e92bcf0c97b61"></a><!-- doxytag: member="OTAPI_Exec::AddBasketCreationItem" ref="a7391d23707ed9404c19e92bcf0c97b61" args="(const std::string &amp;USER_ID, const std::string &amp;THE_BASKET, const std::string &amp;ASSET_TYPE_ID, const int64_t &amp;MINIMUM_TRANSFER)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a7391d23707ed9404c19e92bcf0c97b61">OTAPI_Exec::AddBasketCreationItem</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_BASKET</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ASSET_TYPE_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int64_t &amp;&#160;</td>
          <td class="paramname"><em>MINIMUM_TRANSFER</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>---------------------------------------------------- ADD BASKET CREATION ITEM</p>
<p>(returns the updated basket in string form.)</p>
<p>Call GenerateBasketCreation first (above), then call this function multiple times to add the various currencies to the basket, and then call issueBasket to send the request to the server. </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l12623">12623</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{

    <span class="keywordflow">if</span> (USER_ID.empty())       { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>,     __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (THE_BASKET.empty())    { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>,     __FUNCTION__, <span class="stringliteral">&quot;THE_BASKET&quot;</span>       ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (ASSET_TYPE_ID.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>,     __FUNCTION__, <span class="stringliteral">&quot;ASSET_TYPE_ID&quot;</span>    ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (0 &gt; MINIMUM_TRANSFER)  { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Negative: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;MINIMUM_TRANSFER&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <a class="code" href="class_o_t_string.html">OTString</a> strBasket(THE_BASKET);
    <span class="comment">// ----------------------------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theUserID(USER_ID), theAssetTypeID(ASSET_TYPE_ID);
    <span class="comment">// ----------------------------------------------</span>
    int64_t lMinimumTransfer = MINIMUM_TRANSFER == 0 ? 10 : MINIMUM_TRANSFER;
    <span class="comment">// ----------------------------------------------</span>
    <a class="code" href="class_o_t_basket.html">OTBasket</a> theBasket;

    <span class="keywordtype">bool</span> bAdded = <span class="keyword">false</span>;

    <span class="comment">// todo perhaps verify the basket here, even though I already verified the asset contract itself...</span>
    <span class="comment">// Can&#39;t never be too sure.</span>
    <span class="keywordflow">if</span> (theBasket.<a class="code" href="class_o_t_contract.html#a36300e34dcd94ed7006d98b392d46815">LoadContractFromString</a>(strBasket))
    {
        bAdded = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a27cfd793ce09044f9364bee6e0bff7ad">AddBasketCreationItem</a>(theUserID, <span class="comment">// for signature.</span>
            theBasket, <span class="comment">// created in above call.</span>
            theAssetTypeID, <span class="comment">// Adding an asset type to the new basket.</span>
            static_cast&lt;int64_t&gt;(lMinimumTransfer)); <span class="comment">// The amount of the asset type that is in the basket (per).</span>
    }

    <span class="keywordflow">if</span> (<span class="keyword">false</span> == bAdded)
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    <span class="comment">// ----------------------------------------</span>
    <a class="code" href="class_o_t_string.html">OTString</a> strOutput(theBasket); <span class="comment">// Extract the updated basket to string form.</span>

    std::string pBuf = strOutput.Get();

    <span class="keywordflow">return</span> pBuf;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a278c992b2b6066acb57a0f6d5910aee4"></a><!-- doxytag: member="OTAPI_Exec::AddBasketExchangeItem" ref="a278c992b2b6066acb57a0f6d5910aee4" args="(const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;THE_BASKET, const std::string &amp;ASSET_TYPE_ID, const std::string &amp;ASSET_ACCT_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a278c992b2b6066acb57a0f6d5910aee4">OTAPI_Exec::AddBasketExchangeItem</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_BASKET</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ASSET_TYPE_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ASSET_ACCT_ID</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>1 2 3 5=2,3,4 OR 10=4,6,8 OR 15=6,9,12 Etc. (The MULTIPLE.) ---------------------------------------------------- ADD BASKET EXCHANGE ITEM</p>
<p>Returns the updated basket exchange request in string form. (Or NULL.)</p>
<p>Call the above function first. Then call this one multiple times, and then finally call exchangeBasket to send the request to the server. </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l12770">12770</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty())     { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>     ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID.empty())       { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>       ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (THE_BASKET.empty())    { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_BASKET&quot;</span>    ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (ASSET_TYPE_ID.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;ASSET_TYPE_ID&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (ASSET_ACCT_ID.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;ASSET_ACCT_ID&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <a class="code" href="class_o_t_string.html">OTString</a> strBasket(THE_BASKET);
    <span class="comment">// ----------------------------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>  theServerID(SERVER_ID), theUserID(USER_ID),
                        theAssetTypeID(ASSET_TYPE_ID),
                        theAssetAcctID(ASSET_ACCT_ID);
    <span class="comment">// ----------------------------------------------</span>
    <a class="code" href="class_o_t_basket.html">OTBasket</a> theBasket;

    <span class="keywordtype">bool</span> bAdded = <span class="keyword">false</span>;

    <span class="comment">// todo perhaps verify the basket here, even though I already verified the asset contract itself...</span>
    <span class="comment">// Can&#39;t never be too sure.</span>
    <span class="keywordflow">if</span> (theBasket.<a class="code" href="class_o_t_contract.html#a36300e34dcd94ed7006d98b392d46815">LoadContractFromString</a>(strBasket))
    {
        bAdded = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a9257737bcd43f36e8426b5d5bfb67a7b">AddBasketExchangeItem</a>(theServerID,
            theUserID,
            theBasket,
            theAssetTypeID,
            theAssetAcctID);
    }

    <span class="keywordflow">if</span> (<span class="keyword">false</span> == bAdded)
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;

    <a class="code" href="class_o_t_string.html">OTString</a> strOutput(theBasket); <span class="comment">// Extract the updated basket to string form.</span>

    std::string pBuf = strOutput.Get();

    <span class="keywordflow">return</span> pBuf;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a977725a4fd13ff5ef12831ce967aed5a"></a><!-- doxytag: member="OTAPI_Exec::AddServerContract" ref="a977725a4fd13ff5ef12831ce967aed5a" args="(const std::string &amp;strContract)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_a_p_i___exec.html#a977725a4fd13ff5ef12831ce967aed5a">OTAPI_Exec::AddServerContract</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>strContract</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>-------------------------------------------------- ADD SERVER CONTRACT (to wallet)</p>
<p>If you have a server contract that you'd like to add to your wallet, call this function. </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l01340">1340</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (strContract.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;strContract&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_wallet.html">OTWallet</a> * pWallet = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#af759173aae6f4592c3d6ef1f6a9aa4ff">GetWallet</a>(__FUNCTION__); <span class="comment">// This logs and ASSERTs already.</span>
    <span class="keywordflow">if</span> (NULL == pWallet) <span class="keywordflow">return</span> <span class="keyword">false</span>;
    <span class="comment">// By this point, pWallet is a good pointer.  (No need to cleanup.)</span>
    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(<span class="stringliteral">&quot;&quot;</span> != strContract);
    std::string str_Trim(strContract);
    std::string str_Trim2 = <a class="code" href="class_o_t_string.html#afe7626d0687eab81200a1af1539faed9">OTString::trim</a>(str_Trim);
    <a class="code" href="class_o_t_string.html">OTString</a> otstrContract(str_Trim2.c_str());
    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_server_contract.html">OTServerContract</a> * pContract = <span class="keyword">new</span> <a class="code" href="class_o_t_server_contract.html">OTServerContract</a>;
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pContract);

    <span class="comment">// Check the server signature on the contract here. (Perhaps the message is good enough?</span>
    <span class="comment">// After all, the message IS signed by the server and contains the Account.</span>
    <span class="comment">//  if (pContract-&gt;LoadContract() &amp;&amp; pContract-&gt;VerifyContract())</span>
    <span class="keywordflow">if</span> (otstrContract.Exists() &amp;&amp; pContract-&gt;LoadContractFromString(otstrContract))
    {
        <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theContractID;

        pContract-&gt;CalculateContractID(theContractID);
        pContract-&gt;SetIdentifier(theContractID);

        pWallet-&gt;<a class="code" href="class_o_t_wallet.html#ad925633d8ba2319948b466ca0f0dc438">AddServerContract</a>(*pContract);
        pContract = NULL; <span class="comment">// Success. The wallet &quot;owns&quot; it now, no need to clean it up.</span>
    }
    <span class="comment">// cleanup</span>
    <span class="keywordflow">if</span> (pContract)
    {
        <span class="keyword">delete</span> pContract;
        pContract = NULL;

        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }

    <span class="keywordflow">return</span> <span class="keyword">true</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a2afcd57686081fac9f7d1a598c38baa9"></a><!-- doxytag: member="OTAPI_Exec::AddSignature" ref="a2afcd57686081fac9f7d1a598c38baa9" args="(const std::string &amp;SIGNER_NYM_ID, const std::string &amp;THE_CONTRACT)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a2afcd57686081fac9f7d1a598c38baa9">OTAPI_Exec::AddSignature</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SIGNER_NYM_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_CONTRACT</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>OT-Sign a CONTRACT. (Add a signature)</p>
<p>EXPORT virtual std::string <a class="el" href="class_o_t_a_p_i___exec.html#a2afcd57686081fac9f7d1a598c38baa9">AddSignature(const std::string &amp; SIGNER_NYM_ID, const std::string &amp; THE_CONTRACT)</a>;</p>
<p>Tries to instantiate the contract object, based on the string passed in. Signs the contract, without releasing any signatures that are already there. Returns the signed contract, or NULL if failure.</p>
<p>NOTE: The actual OT functionality (Use Cases) NEVER requires you to sign via this function. Why not? because, anytime a signature is needed on something, the relevant OT API call will require you to pass in the Nym, and the API already signs internally wherever it deems appropriate. Thus, this function is only for advanced uses, for OT-Scripts, server operators, etc.</p>
<p>OT-Sign a CONTRACT. (Add a signature)</p>
<p>std::string <a class="el" href="class_o_t_a_p_i___exec.html#a2afcd57686081fac9f7d1a598c38baa9">OTAPI_Exec::AddSignature(const std::string &amp; SIGNER_NYM_ID, const std::string &amp; THE_CONTRACT)</a>;</p>
<p>Tries to instantiate the contract object, based on the string passed in. Signs the contract, without releasing any signatures that are already there. Returns the signed contract, or "" if failure.</p>
<p>NOTE: The actual OT functionality (Use Cases) NEVER requires you to sign via this function. Why not? because, anytime a signature is needed on something, the relevant OT API call will require you to pass in the Nym, and the API already signs internally wherever it deems appropriate. Thus, this function is only for advanced uses, for OT-Scripts, server operators, etc.</p>
<p>Internally the C++ code is: </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l04464">4464</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">bool</span> bIsInitialized = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#af11b60d083c4a8e1e68a59a0824899d4">IsInitialized</a>();
    <span class="keywordflow">if</span> (!bIsInitialized) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Not initialized; call OT_API::Init first.\n&quot;</span>,__FUNCTION__);   <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keywordflow">if</span> (SIGNER_NYM_ID.empty())      { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SIGNER_NYM_ID&quot;</span>      ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (THE_CONTRACT.empty())       { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_CONTRACT&quot;</span>       ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="comment">// --------------------------------------------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a>      strContract(THE_CONTRACT);
    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>  theSignerNymID(SIGNER_NYM_ID);
    <span class="comment">// --------------------------------------------------------------------</span>
    <a class="code" href="class_o_t_string.html">OTString</a> strOutput;

    <span class="keyword">const</span> <span class="keywordtype">bool</span> &amp; bSigned  = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#ae5d31c92f0438b3c64ff5466c4e380e1">AddSignature</a>(theSignerNymID, strContract, strOutput);

    <span class="keywordflow">if</span> (!bSigned || !strOutput.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>())
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;

    std::string pBuf = strOutput.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();

    <span class="keywordflow">return</span> pBuf;

}
</pre></div>
</div>
</div>
<a class="anchor" id="a754e64287eacf85513fc79f3cf6860cb"></a><!-- doxytag: member="OTAPI_Exec::AddSubcredential" ref="a754e64287eacf85513fc79f3cf6860cb" args="(const std::string &amp;NYM_ID, const std::string &amp;MASTER_CRED_ID, const int32_t &amp;nKeySize)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a754e64287eacf85513fc79f3cf6860cb">OTAPI_Exec::AddSubcredential</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>NYM_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>MASTER_CRED_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int32_t &amp;&#160;</td>
          <td class="paramname"><em>nKeySize</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l00869">869</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (NYM_ID.empty())         { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: NULL %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;NYM_ID&quot;</span>);         <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (MASTER_CRED_ID.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: NULL %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;MASTER_CRED_ID&quot;</span>); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (0 &gt;= nKeySize)          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Keysize is 0 or less, will fail! Try 1024.\n&quot;</span>,__FUNCTION__);     <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// ---------------------------------------------------------</span>
    <a class="code" href="class_o_t_password_data.html">OTPasswordData</a>   thePWData(<a class="code" href="_o_t_callback_8hpp.html#aec99f1909896090ab9b64ce848f50c6a">OT_PW_DISPLAY</a>);
    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>     nym_id(NYM_ID);
    <span class="comment">// This tries to get, then tries to load as public, then tries to load as private.</span>
    <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a>    * pNym = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#aa53f110b77dee2bc71b70906ca64fbbc">GetOrLoadPrivateNym</a>(nym_id, <span class="keyword">false</span>, __FUNCTION__, &amp;thePWData);
    <span class="keywordflow">if</span> (NULL == pNym) <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    <span class="comment">// ---------------------------------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strCredID(MASTER_CRED_ID);
    <a class="code" href="class_o_t_credential.html">OTCredential</a> * pCredential = pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#a94f8a8812ceae9a1f003aa79bfda73a5">GetMasterCredential</a>(strCredID);

    <span class="keywordflow">if</span> (NULL == pCredential)
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Sorry, (Nym %s) no master credential found with the ID: %s\n&quot;</span>,
                       __FUNCTION__, NYM_ID.c_str(), strCredID.Get());
    <span class="keywordflow">else</span> <span class="comment">// Found the master credential...</span>
    {
        <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> idMasterCredential(strCredID);
        <a class="code" href="class_o_t_string.html">OTString</a> strNewSubcredID;

        <span class="keyword">const</span> <span class="keywordtype">bool</span> bAdded = pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#a85bd691ffa8d5f066ba04886dccd0d4d">AddNewSubkey</a>(idMasterCredential, nKeySize, NULL, &amp;thePWData, &amp;strNewSubcredID);

        <span class="keywordflow">if</span> (bAdded)
        {
            <span class="keywordflow">return</span> strNewSubcredID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();
        }
        <span class="keywordflow">else</span>
            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Failed trying to add new subcredential.\n&quot;</span>, __FUNCTION__);
    }
    <span class="comment">// --------------</span>
    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="acea9dd5706283762916ed0755b2acac8"></a><!-- doxytag: member="OTAPI_Exec::AppCleanup" ref="acea9dd5706283762916ed0755b2acac8" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_a_p_i___exec.html#acea9dd5706283762916ed0755b2acac8">OTAPI_Exec::AppCleanup</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l00226">226</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (!<a class="code" href="class_o_t_a_p_i___exec.html#a9faaa894d65345064dddada36d292b46">OTAPI_Exec::bCleanupOTApp</a>) <span class="comment">// if we haven&#39;t cleaned up already</span>
    {
        <span class="keywordflow">if</span> (<a class="code" href="class_o_t_a_p_i___exec.html#a908efdafde9c9738835069849c1e05ae">OTAPI_Exec::bInitOTApp</a>) <span class="comment">// and have had a ctx.</span>
        {
            <span class="comment">// will cleanup everything.</span>
            <span class="keywordflow">if</span> (NULL != <a class="code" href="class_o_t_a_p_i___exec.html#a4a454ed385391e993ec5ebf323a54063">p_OTAPI</a>) <span class="keyword">delete</span> <a class="code" href="class_o_t_a_p_i___exec.html#a4a454ed385391e993ec5ebf323a54063">p_OTAPI</a>;
            <a class="code" href="class_o_t_a_p_i___exec.html#a4a454ed385391e993ec5ebf323a54063">p_OTAPI</a> = NULL;

            <a class="code" href="class_o_t_a_p_i___exec.html#a9faaa894d65345064dddada36d292b46">OTAPI_Exec::bCleanupOTApp</a> = <span class="keyword">true</span>;
            <span class="keywordflow">return</span> <a class="code" href="class_o_t___a_p_i.html#a7c1ce59287a7919d518149d9252e9d34">OT_API::CleanupOTApp</a>();
        }
    }
    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a570af496633a5d0b35048200fee03a89"></a><!-- doxytag: member="OTAPI_Exec::AppInit" ref="a570af496633a5d0b35048200fee03a89" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_a_p_i___exec.html#a570af496633a5d0b35048200fee03a89">OTAPI_Exec::AppInit</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>INITIALIZE the OTAPI library</p>
<p>Call this once per run of the application. </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l00197">197</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (!<a class="code" href="class_o_t_a_p_i___exec.html#a9faaa894d65345064dddada36d292b46">OTAPI_Exec::bCleanupOTApp</a>)
    {
        <span class="keywordflow">if</span> (!<a class="code" href="class_o_t_a_p_i___exec.html#a908efdafde9c9738835069849c1e05ae">OTAPI_Exec::bInitOTApp</a>)
        {
            <a class="code" href="class_o_t_a_p_i___exec.html#a908efdafde9c9738835069849c1e05ae">OTAPI_Exec::bInitOTApp</a> = <span class="keyword">true</span>;
            <span class="keywordflow">if</span> (<a class="code" href="class_o_t___a_p_i.html#adc39b64382968c133c59fd7bf52124de">OT_API::InitOTApp</a>())
            {
                <a class="code" href="class_o_t___a_p_i.html">OT_API</a> * tmpOTAPI = <span class="keyword">new</span> <a class="code" href="class_o_t___a_p_i.html">OT_API</a>();
                <span class="keywordflow">if</span> (NULL != tmpOTAPI)
                {
                    <span class="keywordflow">if</span> (tmpOTAPI-&gt;<a class="code" href="class_o_t___a_p_i.html#af11b60d083c4a8e1e68a59a0824899d4">IsInitialized</a>())
                    {
                        <span class="keywordflow">if</span> (tmpOTAPI-&gt;<a class="code" href="class_o_t___a_p_i.html#aae7802dad48d8347a4b3d6b91e7aac0c">SetTransportCallback</a>(<span class="keyword">new</span> <a class="code" href="struct_transport_callback.html">TransportCallback</a>(*tmpOTAPI)))
                        {
                            <a class="code" href="class_o_t_a_p_i___exec.html#a4a454ed385391e993ec5ebf323a54063">p_OTAPI</a> = tmpOTAPI; <span class="comment">// success</span>
                            <span class="keywordflow">return</span> <span class="keyword">true</span>;
                        }
                    }
                    <span class="keyword">delete</span> tmpOTAPI;
                    tmpOTAPI = NULL;
                }
            }
        }
    }
    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae0da0edb6c9accf976aefa1b7f9edc63"></a><!-- doxytag: member="OTAPI_Exec::Basket_GetMemberCount" ref="ae0da0edb6c9accf976aefa1b7f9edc63" args="(const std::string &amp;BASKET_ASSET_TYPE_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_a_p_i___exec.html#ae0da0edb6c9accf976aefa1b7f9edc63">OTAPI_Exec::Basket_GetMemberCount</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>BASKET_ASSET_TYPE_ID</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>-------------------------------------------------------------------- Get Basket Count (of backing asset types.)</p>
<p>Returns the number of asset types that make up this basket. (Or zero.) </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l12009">12009</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (ASSET_TYPE_ID.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;ASSET_TYPE_ID&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theAssetTypeID(ASSET_TYPE_ID);

    <span class="keywordflow">return</span> <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#af4747b3de4902f3217ab050bb041bc66">GetBasketMemberCount</a>(theAssetTypeID);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a06717b4dbc96621925dc37a4150f66fc"></a><!-- doxytag: member="OTAPI_Exec::Basket_GetMemberMinimumTransferAmount" ref="a06717b4dbc96621925dc37a4150f66fc" args="(const std::string &amp;BASKET_ASSET_TYPE_ID, const int32_t &amp;nIndex)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64_t <a class="el" href="class_o_t_a_p_i___exec.html#a06717b4dbc96621925dc37a4150f66fc">OTAPI_Exec::Basket_GetMemberMinimumTransferAmount</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>BASKET_ASSET_TYPE_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int32_t &amp;&#160;</td>
          <td class="paramname"><em>nIndex</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>---------------------------------------------------- GET BASKET MEMBER's MINIMUM TRANSFER AMOUNT</p>
<p>Returns a int64_t containing the minimum transfer amount for one of the member currencies in the basket.</p>
<p>FOR EXAMPLE: If the basket is defined as 10 Rands == 2 Silver, 5 Gold, 8 Euro, then the minimum transfer amount for the member currency at index 0 is 2, the minimum transfer amount for the member currency at index 1 is 5, and the minimum transfer amount for the member currency at index 2 is 8. </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l12095">12095</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (BASKET_ASSET_TYPE_ID.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;BASKET_ASSET_TYPE_ID&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keywordflow">if</span> (0 &gt; nIndex) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: nIndex is out of bounds (it&#39;s in the negative!)\n&quot;</span>, __FUNCTION__); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theAssetTypeID(BASKET_ASSET_TYPE_ID);

    int64_t lMinTransAmount = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#af5ceba4f208230dc9b077b37423e289f">GetBasketMemberMinimumTransferAmount</a>(theAssetTypeID, nIndex);

    <span class="keywordflow">if</span> (0 &gt;= lMinTransAmount)
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: returned 0 (or negitive). Strange... what basket is this?\n&quot;</span>, __FUNCTION__);
        <span class="keywordflow">return</span> -1;
    }

    <span class="keywordflow">return</span> lMinTransAmount;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a2e07e1aeba5f83e3c5ec7b2f36fd2fa0"></a><!-- doxytag: member="OTAPI_Exec::Basket_GetMemberType" ref="a2e07e1aeba5f83e3c5ec7b2f36fd2fa0" args="(const std::string &amp;BASKET_ASSET_TYPE_ID, const int32_t &amp;nIndex)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a2e07e1aeba5f83e3c5ec7b2f36fd2fa0">OTAPI_Exec::Basket_GetMemberType</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>BASKET_ASSET_TYPE_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int32_t &amp;&#160;</td>
          <td class="paramname"><em>nIndex</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>-------------------------------------------------------------------- Get Asset Type of a basket's member currency, by index.</p>
<p>(Returns a string containing Asset Type ID, or NULL). </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l12025">12025</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (BASKET_ASSET_TYPE_ID.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;BASKET_ASSET_TYPE_ID&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keywordflow">if</span> (0 &gt; nIndex) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: nIndex is out of bounds (it&#39;s in the negative!)\n&quot;</span>, __FUNCTION__); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theAssetTypeID(BASKET_ASSET_TYPE_ID);

    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theOutputMemberType;

    <span class="keywordtype">bool</span> bGotType = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#aa51bdf044a89177e8bb1e0387e28a24a">GetBasketMemberType</a>(theAssetTypeID,
        nIndex,
        theOutputMemberType);
    <span class="keywordflow">if</span> (<span class="keyword">false</span> == bGotType)
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;

    <a class="code" href="class_o_t_string.html">OTString</a> strOutput(theOutputMemberType);

    std::string pBuf = strOutput.Get();

    <span class="keywordflow">return</span> pBuf;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a7d8ee6e7112c90631e808875bd9a1977"></a><!-- doxytag: member="OTAPI_Exec::Basket_GetMinimumTransferAmount" ref="a7d8ee6e7112c90631e808875bd9a1977" args="(const std::string &amp;BASKET_ASSET_TYPE_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64_t <a class="el" href="class_o_t_a_p_i___exec.html#a7d8ee6e7112c90631e808875bd9a1977">OTAPI_Exec::Basket_GetMinimumTransferAmount</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>BASKET_ASSET_TYPE_ID</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>---------------------------------------------------- GET BASKET MINIMUM TRANSFER AMOUNT</p>
<p>Returns a int64_t containing the minimum transfer amount for the entire basket.</p>
<p>FOR EXAMPLE: If the basket is defined as 10 Rands == 2 Silver, 5 Gold, 8 Euro, then the minimum transfer amount for the basket is 10. This function would return a string containing "10", in that example. </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l12063">12063</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (BASKET_ASSET_TYPE_ID.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;BASKET_ASSET_TYPE_ID&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theAssetTypeID(BASKET_ASSET_TYPE_ID);

    int64_t lMinTransAmount = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#aba4eb1e71d36b4ca4f077a90e3220ed5">GetBasketMinimumTransferAmount</a>(theAssetTypeID);

    <span class="keywordflow">if</span> (0 &gt;= lMinTransAmount)
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: returned 0 (or negitive). Strange... what basket is this?\n&quot;</span>, __FUNCTION__);
        <span class="keywordflow">return</span> -1;
    }

    <span class="keywordflow">return</span> lMinTransAmount;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a5b62bca27e890629808735b0d6639598"></a><!-- doxytag: member="OTAPI_Exec::Bylaw_GetCallbackCount" ref="a5b62bca27e890629808735b0d6639598" args="(const std::string &amp;THE_CONTRACT, const std::string &amp;BYLAW_NAME)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_a_p_i___exec.html#a5b62bca27e890629808735b0d6639598">OTAPI_Exec::Bylaw_GetCallbackCount</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_CONTRACT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>BYLAW_NAME</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l06007">6007</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (THE_CONTRACT.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_CONTRACT&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (BYLAW_NAME.empty())   { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;BYLAW_NAME&quot;</span>   ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_string.html">OTString</a> strContract(THE_CONTRACT);
    <a class="code" href="class_o_t_scriptable.html">OTScriptable</a> * pScriptable = <a class="code" href="class_o_t_scriptable.html#a4a89cbc1abd2bac0e5dec64da3452b7a">OTScriptable::InstantiateScriptable</a>(strContract);
    <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTScriptable&gt;</a> theContractAngel;
    <span class="keywordflow">if</span> (NULL == pScriptable)
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Failed trying to load smart contract from string:\n\n%s\n\n&quot;</span>,
                       __FUNCTION__, strContract.Get());
    }
    <span class="keywordflow">else</span>
    {
        theContractAngel.<a class="code" href="class_o_t_cleanup.html#a00a399db45f730439d2263d4429d00c1">SetCleanupTarget</a>(*pScriptable);  <span class="comment">// Auto-cleanup.</span>
        <span class="comment">// -----------------------------------------------------</span>
        <a class="code" href="class_o_t_bylaw.html">OTBylaw</a> * pBylaw = pScriptable-&gt;<a class="code" href="class_o_t_scriptable.html#a970014fa028541c7a3c908800bfa4ee9">GetBylaw</a>(BYLAW_NAME);
        <span class="comment">// -----------------------------------------------------</span>
        <span class="keywordflow">if</span> (NULL == pBylaw)
        {
            <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Smart contract loaded up, but failed to find a bylaw with the name: %s\n&quot;</span>,
                           __FUNCTION__, BYLAW_NAME.c_str());
        }
        <span class="keywordflow">else</span> <span class="comment">// We found the bylaw...</span>
        {
            <span class="keyword">const</span> int32_t nReturnValue = <span class="keyword">static_cast&lt;</span>int32_t<span class="keyword">&gt;</span>(pBylaw-&gt;<a class="code" href="class_o_t_bylaw.html#abf6a361b2790d94c7e40f5e5e685551f">GetCallbackCount</a>());
            <span class="keywordflow">return</span> nReturnValue;
        }
    }
    <span class="comment">// -----------------------------------------------------------</span>
    <span class="keywordflow">return</span> (-1);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a749aeaa4085bd0145f72b3fa79464f66"></a><!-- doxytag: member="OTAPI_Exec::Bylaw_GetClauseCount" ref="a749aeaa4085bd0145f72b3fa79464f66" args="(const std::string &amp;THE_CONTRACT, const std::string &amp;BYLAW_NAME)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_a_p_i___exec.html#a749aeaa4085bd0145f72b3fa79464f66">OTAPI_Exec::Bylaw_GetClauseCount</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_CONTRACT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>BYLAW_NAME</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l05899">5899</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (THE_CONTRACT.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_CONTRACT&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (BYLAW_NAME.empty())   { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;BYLAW_NAME&quot;</span>   ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_string.html">OTString</a> strContract(THE_CONTRACT);
    <a class="code" href="class_o_t_scriptable.html">OTScriptable</a> * pScriptable = <a class="code" href="class_o_t_scriptable.html#a4a89cbc1abd2bac0e5dec64da3452b7a">OTScriptable::InstantiateScriptable</a>(strContract);
    <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTScriptable&gt;</a> theContractAngel;
    <span class="keywordflow">if</span> (NULL == pScriptable)
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Failed trying to load smart contract from string:\n\n%s\n\n&quot;</span>,
                       __FUNCTION__, strContract.Get());
    }
    <span class="keywordflow">else</span>
    {
        theContractAngel.<a class="code" href="class_o_t_cleanup.html#a00a399db45f730439d2263d4429d00c1">SetCleanupTarget</a>(*pScriptable);  <span class="comment">// Auto-cleanup.</span>
        <span class="comment">// -----------------------------------------------------</span>
        <a class="code" href="class_o_t_bylaw.html">OTBylaw</a> * pBylaw = pScriptable-&gt;<a class="code" href="class_o_t_scriptable.html#a970014fa028541c7a3c908800bfa4ee9">GetBylaw</a>(BYLAW_NAME);
        <span class="comment">// -----------------------------------------------------</span>
        <span class="keywordflow">if</span> (NULL == pBylaw)
        {
            <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Smart contract loaded up, but failed to find a bylaw with the name: %s\n&quot;</span>,
                           __FUNCTION__, BYLAW_NAME.c_str());
        }
        <span class="keywordflow">else</span> <span class="comment">// We found the bylaw...</span>
        {
            <span class="keyword">const</span> int32_t nReturnValue = <span class="keyword">static_cast&lt;</span>int32_t<span class="keyword">&gt;</span>(pBylaw-&gt;<a class="code" href="class_o_t_bylaw.html#a6ad3cf82cf987d4e8ff69f116ac69e5f">GetClauseCount</a>());
            <span class="keywordflow">return</span> nReturnValue;
        }
    }
    <span class="comment">// -----------------------------------------------------------</span>
    <span class="keywordflow">return</span> (-1);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a7c6b68722495be2bf1a71024ded5bbc3"></a><!-- doxytag: member="OTAPI_Exec::Bylaw_GetHookCount" ref="a7c6b68722495be2bf1a71024ded5bbc3" args="(const std::string &amp;THE_CONTRACT, const std::string &amp;BYLAW_NAME)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_a_p_i___exec.html#a7c6b68722495be2bf1a71024ded5bbc3">OTAPI_Exec::Bylaw_GetHookCount</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_CONTRACT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>BYLAW_NAME</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l05971">5971</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (THE_CONTRACT.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_CONTRACT&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (BYLAW_NAME.empty())   { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;BYLAW_NAME&quot;</span>   ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_string.html">OTString</a> strContract(THE_CONTRACT);
    <a class="code" href="class_o_t_scriptable.html">OTScriptable</a> * pScriptable = <a class="code" href="class_o_t_scriptable.html#a4a89cbc1abd2bac0e5dec64da3452b7a">OTScriptable::InstantiateScriptable</a>(strContract);
    <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTScriptable&gt;</a> theContractAngel;
    <span class="keywordflow">if</span> (NULL == pScriptable)
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Failed trying to load smart contract from string:\n\n%s\n\n&quot;</span>,
                       __FUNCTION__, strContract.Get());
    }
    <span class="keywordflow">else</span>
    {
        theContractAngel.<a class="code" href="class_o_t_cleanup.html#a00a399db45f730439d2263d4429d00c1">SetCleanupTarget</a>(*pScriptable);  <span class="comment">// Auto-cleanup.</span>
        <span class="comment">// -----------------------------------------------------</span>
        <a class="code" href="class_o_t_bylaw.html">OTBylaw</a> * pBylaw = pScriptable-&gt;<a class="code" href="class_o_t_scriptable.html#a970014fa028541c7a3c908800bfa4ee9">GetBylaw</a>(BYLAW_NAME);
        <span class="comment">// -----------------------------------------------------</span>
        <span class="keywordflow">if</span> (NULL == pBylaw)
        {
            <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Smart contract loaded up, but failed to find a bylaw with the name: %s\n&quot;</span>,
                           __FUNCTION__, BYLAW_NAME.c_str());
        }
        <span class="keywordflow">else</span> <span class="comment">// We found the bylaw...</span>
        {
            <span class="keyword">const</span> int32_t nReturnValue = <span class="keyword">static_cast&lt;</span>int32_t<span class="keyword">&gt;</span>(pBylaw-&gt;<a class="code" href="class_o_t_bylaw.html#a1dfd25d5882c4c52bc3ce79f4531ad18">GetHookCount</a>());
            <span class="keywordflow">return</span> nReturnValue;
        }
    }
    <span class="comment">// -----------------------------------------------------------</span>
    <span class="keywordflow">return</span> (-1);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a706eb989c8dafd4cd2e7f04ec960ce26"></a><!-- doxytag: member="OTAPI_Exec::Bylaw_GetLanguage" ref="a706eb989c8dafd4cd2e7f04ec960ce26" args="(const std::string &amp;THE_CONTRACT, const std::string &amp;BYLAW_NAME)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a706eb989c8dafd4cd2e7f04ec960ce26">OTAPI_Exec::Bylaw_GetLanguage</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_CONTRACT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>BYLAW_NAME</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l05864">5864</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (THE_CONTRACT.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_CONTRACT&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (BYLAW_NAME.empty())   { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;BYLAW_NAME&quot;</span>   ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_string.html">OTString</a> strContract(THE_CONTRACT);
    <a class="code" href="class_o_t_scriptable.html">OTScriptable</a> * pScriptable = <a class="code" href="class_o_t_scriptable.html#a4a89cbc1abd2bac0e5dec64da3452b7a">OTScriptable::InstantiateScriptable</a>(strContract);
    <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTScriptable&gt;</a> theContractAngel;
    <span class="keywordflow">if</span> (NULL == pScriptable)
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Failed trying to load smart contract from string:\n\n%s\n\n&quot;</span>,
                       __FUNCTION__, strContract.Get());
    }
    <span class="keywordflow">else</span>
    {
        theContractAngel.<a class="code" href="class_o_t_cleanup.html#a00a399db45f730439d2263d4429d00c1">SetCleanupTarget</a>(*pScriptable);  <span class="comment">// Auto-cleanup.</span>
        <span class="comment">// -----------------------------------------------------</span>
        <a class="code" href="class_o_t_bylaw.html">OTBylaw</a> * pBylaw = pScriptable-&gt;<a class="code" href="class_o_t_scriptable.html#a970014fa028541c7a3c908800bfa4ee9">GetBylaw</a>(BYLAW_NAME);
        <span class="comment">// -----------------------------------------------------</span>
        <span class="keywordflow">if</span> (NULL == pBylaw)
        {
            <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Smart contract loaded up, but failed to find a bylaw with the name: %s\n&quot;</span>,
                           __FUNCTION__, BYLAW_NAME.c_str());
        }
        <span class="keywordflow">else</span> <span class="comment">// We found the bylaw...</span>
        {
            <span class="keyword">const</span> std::string str_return(NULL == pBylaw-&gt;<a class="code" href="class_o_t_bylaw.html#a9227cd44b9e3bab6efdf0dcb719e126c">GetLanguage</a>() ? <span class="stringliteral">&quot;error_no_language&quot;</span> : pBylaw-&gt;<a class="code" href="class_o_t_bylaw.html#a9227cd44b9e3bab6efdf0dcb719e126c">GetLanguage</a>());
            <span class="keywordflow">return</span> str_return;
        }
    }
    <span class="comment">// -----------------------------------------------------------</span>
    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a7a43f960bd87d44de443bc4ab2ef5e84"></a><!-- doxytag: member="OTAPI_Exec::Bylaw_GetVariableCount" ref="a7a43f960bd87d44de443bc4ab2ef5e84" args="(const std::string &amp;THE_CONTRACT, const std::string &amp;BYLAW_NAME)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_a_p_i___exec.html#a7a43f960bd87d44de443bc4ab2ef5e84">OTAPI_Exec::Bylaw_GetVariableCount</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_CONTRACT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>BYLAW_NAME</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l05935">5935</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (THE_CONTRACT.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_CONTRACT&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (BYLAW_NAME.empty())   { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;BYLAW_NAME&quot;</span>   ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_string.html">OTString</a> strContract(THE_CONTRACT);
    <a class="code" href="class_o_t_scriptable.html">OTScriptable</a> * pScriptable = <a class="code" href="class_o_t_scriptable.html#a4a89cbc1abd2bac0e5dec64da3452b7a">OTScriptable::InstantiateScriptable</a>(strContract);
    <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTScriptable&gt;</a> theContractAngel;
    <span class="keywordflow">if</span> (NULL == pScriptable)
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Failed trying to load smart contract from string:\n\n%s\n\n&quot;</span>,
                       __FUNCTION__, strContract.Get());
    }
    <span class="keywordflow">else</span>
    {
        theContractAngel.<a class="code" href="class_o_t_cleanup.html#a00a399db45f730439d2263d4429d00c1">SetCleanupTarget</a>(*pScriptable);  <span class="comment">// Auto-cleanup.</span>
        <span class="comment">// -----------------------------------------------------</span>
        <a class="code" href="class_o_t_bylaw.html">OTBylaw</a> * pBylaw = pScriptable-&gt;<a class="code" href="class_o_t_scriptable.html#a970014fa028541c7a3c908800bfa4ee9">GetBylaw</a>(BYLAW_NAME);
        <span class="comment">// -----------------------------------------------------</span>
        <span class="keywordflow">if</span> (NULL == pBylaw)
        {
            <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Smart contract loaded up, but failed to find a bylaw with the name: %s\n&quot;</span>,
                           __FUNCTION__, BYLAW_NAME.c_str());
        }
        <span class="keywordflow">else</span> <span class="comment">// We found the bylaw...</span>
        {
            <span class="keyword">const</span> int32_t nReturnValue = <span class="keyword">static_cast&lt;</span>int32_t<span class="keyword">&gt;</span>(pBylaw-&gt;<a class="code" href="class_o_t_bylaw.html#a4d0ab986192370752eae9a2614f66fb9">GetVariableCount</a>());
            <span class="keywordflow">return</span> nReturnValue;
        }
    }
    <span class="comment">// -----------------------------------------------------------</span>
    <span class="keywordflow">return</span> (-1);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a497410916b6a8036929551c2d3e45455"></a><!-- doxytag: member="OTAPI_Exec::CalculateAssetContractID" ref="a497410916b6a8036929551c2d3e45455" args="(const std::string &amp;str_Contract)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a497410916b6a8036929551c2d3e45455">OTAPI_Exec::CalculateAssetContractID</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>str_Contract</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l00954">954</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// -----------------------------------------------------</span>
    <span class="keywordtype">bool</span> bIsInitialized = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#af11b60d083c4a8e1e68a59a0824899d4">IsInitialized</a>();
    <span class="keywordflow">if</span> (!bIsInitialized) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Not initialized; call OT_API::Init first.\n&quot;</span>,__FUNCTION__);  <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// -----------------------------------------------------</span>
    <span class="keywordflow">if</span> (str_Contract.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;str_Contract&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// -----------------------------------------------------</span>
    std::string str_Trim(str_Contract);
    std::string str_Trim2 = <a class="code" href="class_o_t_string.html#afe7626d0687eab81200a1af1539faed9">OTString::trim</a>(str_Trim);
    <a class="code" href="class_o_t_string.html">OTString</a> strContract(str_Trim2.c_str());

    <span class="keywordflow">if</span> (strContract.GetLength() &lt; 2)
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Empty contract passed in!\n&quot;</span>, __FUNCTION__);
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    }
    <span class="comment">// -------------------------------------------</span>
    <a class="code" href="class_o_t_asset_contract.html">OTAssetContract</a> theContract;

    <span class="keywordflow">if</span> (theContract.<a class="code" href="class_o_t_contract.html#a36300e34dcd94ed7006d98b392d46815">LoadContractFromString</a>(strContract))
    {
        <span class="comment">// -------------------------------------------</span>
        <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> idOutput;
        theContract.<a class="code" href="class_o_t_contract.html#a705597c0b741d3d120624b0388f73508">CalculateContractID</a>(idOutput);
        <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strOutput(idOutput);
        <span class="comment">// -------------------------------------------</span>
        std::string pBuf = strOutput.Get();

        <span class="keywordflow">return</span> pBuf;
    }
    <span class="comment">// ----------------</span>
    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a8b76995a5783c5686781046249a691a4"></a><!-- doxytag: member="OTAPI_Exec::CalculateServerContractID" ref="a8b76995a5783c5686781046249a691a4" args="(const std::string &amp;str_Contract)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a8b76995a5783c5686781046249a691a4">OTAPI_Exec::CalculateServerContractID</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>str_Contract</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l00990">990</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// -----------------------------------------------------</span>
    <span class="keywordtype">bool</span> bIsInitialized = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#af11b60d083c4a8e1e68a59a0824899d4">IsInitialized</a>();
    <span class="keywordflow">if</span> (!bIsInitialized) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Not initialized; call OT_API::Init first.\n&quot;</span>,__FUNCTION__);  <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// -----------------------------------------------------</span>
    <span class="keywordflow">if</span> (str_Contract.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;str_Contract&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// -----------------------------------------------------</span>
    std::string str_Trim(str_Contract);
    std::string str_Trim2 = <a class="code" href="class_o_t_string.html#afe7626d0687eab81200a1af1539faed9">OTString::trim</a>(str_Trim);
    <a class="code" href="class_o_t_string.html">OTString</a> strContract(str_Trim2.c_str());

    <span class="keywordflow">if</span> (strContract.GetLength() &lt; 2)
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Empty contract passed in!\n&quot;</span>, __FUNCTION__);
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    }
    <span class="comment">// -------------------------------------------</span>
    <a class="code" href="class_o_t_server_contract.html">OTServerContract</a> theContract;

    <span class="keywordflow">if</span> (theContract.<a class="code" href="class_o_t_contract.html#a36300e34dcd94ed7006d98b392d46815">LoadContractFromString</a>(strContract))
    {
        <span class="comment">// -------------------------------------------</span>
        <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> idOutput;
        theContract.<a class="code" href="class_o_t_contract.html#a705597c0b741d3d120624b0388f73508">CalculateContractID</a>(idOutput);
        <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strOutput(idOutput);
        <span class="comment">// -------------------------------------------</span>
        std::string pBuf = strOutput.Get();

        <span class="keywordflow">return</span> pBuf;
    }
    <span class="comment">// ----------------</span>
    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="af952d83f17ef493cc8d61b22f6276eb3"></a><!-- doxytag: member="OTAPI_Exec::Callback_GetClause" ref="af952d83f17ef493cc8d61b22f6276eb3" args="(const std::string &amp;THE_CONTRACT, const std::string &amp;BYLAW_NAME, const std::string &amp;CALLBACK_NAME)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#af952d83f17ef493cc8d61b22f6276eb3">OTAPI_Exec::Callback_GetClause</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_CONTRACT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>BYLAW_NAME</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>CALLBACK_NAME</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l06529">6529</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (THE_CONTRACT.empty())  { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_CONTRACT&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (BYLAW_NAME.empty())    { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;BYLAW_NAME&quot;</span>   ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (CALLBACK_NAME.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;CALLBACK_NAME&quot;</span>); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// -----------------------------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strContract(THE_CONTRACT);
    <a class="code" href="class_o_t_scriptable.html">OTScriptable</a> * pScriptable = <a class="code" href="class_o_t_scriptable.html#a4a89cbc1abd2bac0e5dec64da3452b7a">OTScriptable::InstantiateScriptable</a>(strContract);
    <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTScriptable&gt;</a> theContractAngel;
    <span class="keywordflow">if</span> (NULL == pScriptable)
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Failed trying to load smart contract from string:\n\n%s\n\n&quot;</span>,
                       __FUNCTION__, strContract.Get());
    }
    <span class="keywordflow">else</span>
    {
        theContractAngel.<a class="code" href="class_o_t_cleanup.html#a00a399db45f730439d2263d4429d00c1">SetCleanupTarget</a>(*pScriptable);  <span class="comment">// Auto-cleanup.</span>
        <span class="comment">// -----------------------------------------------------</span>
        <a class="code" href="class_o_t_bylaw.html">OTBylaw</a> * pBylaw = pScriptable-&gt;<a class="code" href="class_o_t_scriptable.html#a970014fa028541c7a3c908800bfa4ee9">GetBylaw</a>(BYLAW_NAME);
        <span class="comment">// -----------------------------------------------------</span>
        <span class="keywordflow">if</span> (NULL == pBylaw)
        {
            <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Smart contract loaded up, but failed to retrieve the bylaw with name: %s\n&quot;</span>,
                           __FUNCTION__, BYLAW_NAME.c_str());
        }
        <span class="keywordflow">else</span> <span class="comment">// We found the bylaw...</span>
        {
            <a class="code" href="class_o_t_clause.html">OTClause</a> * pClause = pBylaw-&gt;<a class="code" href="class_o_t_bylaw.html#ab1c6c33a33817e60be48e70ce862e898">GetCallback</a>(CALLBACK_NAME);

            <span class="keywordflow">if</span> (NULL == pClause)
            {
                <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Smart contract loaded up, and bylaw found, but failed to retrieve the clause for callback: %s\n&quot;</span>,
                               __FUNCTION__, CALLBACK_NAME.c_str());
            }
            <span class="keywordflow">else</span> <span class="comment">// We found the clause...</span>
            {
                <span class="keyword">const</span> std::string str_return(pClause-&gt;<a class="code" href="class_o_t_clause.html#a325b3cfeedbfc1c699de3d0f787e5120">GetName</a>().<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
                <span class="keywordflow">return</span> str_return;
            }
        }
    }
    <span class="comment">// -----------------------------------------------------------</span>
    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="afa219a519cc7ddddd735f23e835a6fee"></a><!-- doxytag: member="OTAPI_Exec::Callback_GetNameByIndex" ref="afa219a519cc7ddddd735f23e835a6fee" args="(const std::string &amp;THE_CONTRACT, const std::string &amp;BYLAW_NAME, const int32_t &amp;nIndex)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#afa219a519cc7ddddd735f23e835a6fee">OTAPI_Exec::Callback_GetNameByIndex</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_CONTRACT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>BYLAW_NAME</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int32_t &amp;&#160;</td>
          <td class="paramname"><em>nIndex</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l06491">6491</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (THE_CONTRACT.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_CONTRACT&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (BYLAW_NAME.empty())   { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;BYLAW_NAME&quot;</span>   ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// -----------------------------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strContract(THE_CONTRACT);
    <a class="code" href="class_o_t_scriptable.html">OTScriptable</a> * pScriptable = <a class="code" href="class_o_t_scriptable.html#a4a89cbc1abd2bac0e5dec64da3452b7a">OTScriptable::InstantiateScriptable</a>(strContract);
    <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTScriptable&gt;</a> theContractAngel;
    <span class="keywordflow">if</span> (NULL == pScriptable)
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Failed trying to load smart contract from string:\n\n%s\n\n&quot;</span>,
                       __FUNCTION__, strContract.Get());
    }
    <span class="keywordflow">else</span>
    {
        theContractAngel.<a class="code" href="class_o_t_cleanup.html#a00a399db45f730439d2263d4429d00c1">SetCleanupTarget</a>(*pScriptable);  <span class="comment">// Auto-cleanup.</span>
        <span class="comment">// -----------------------------------------------------</span>
        <a class="code" href="class_o_t_bylaw.html">OTBylaw</a> * pBylaw = pScriptable-&gt;<a class="code" href="class_o_t_scriptable.html#a970014fa028541c7a3c908800bfa4ee9">GetBylaw</a>(BYLAW_NAME);
        <span class="comment">// -----------------------------------------------------</span>
        <span class="keywordflow">if</span> (NULL == pBylaw)
        {
            <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Smart contract loaded up, but failed to retrieve the bylaw with name: %s\n&quot;</span>,
                           __FUNCTION__, BYLAW_NAME.c_str());
        }
        <span class="keywordflow">else</span> <span class="comment">// We found the bylaw...</span>
        {
            <span class="keyword">const</span> int32_t nTempIndex = <span class="keyword">static_cast&lt;</span><span class="keyword">const </span>int32_t<span class="keyword">&gt;</span>(nIndex);
            <span class="keyword">const</span> std::string str_name(pBylaw-&gt;<a class="code" href="class_o_t_bylaw.html#af974538387c6e71123b3d6093427948c">GetCallbackNameByIndex</a>(nTempIndex));
            <span class="keywordflow">return</span> str_name;
        }
    }
    <span class="comment">// -----------------------------------------------------------</span>
    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a6cd08bfe3b6c64afc6c0a16b308022c0"></a><!-- doxytag: member="OTAPI_Exec::checkServerID" ref="a6cd08bfe3b6c64afc6c0a16b308022c0" args="(const std::string &amp;SERVER_ID, const std::string &amp;USER_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_a_p_i___exec.html#a6cd08bfe3b6c64afc6c0a16b308022c0">OTAPI_Exec::checkServerID</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>CHECK SERVER ID -- (This is used for "pinging" the server...)</p>
<p>Notice, if you ever want to send a message, you have to include the Server ID and the User ID.</p>
<p>The OTAPI will use the Server ID to look-up the server contract. (FYI, the Server ID is a hash of the server contract itself, so it is impos- sible to change the contract, without also changing the ID.)</p>
<p>Then it will connect to the server based on the connection information in that contract, send the message, get the reply, and disconnect. (That's in HTTP mode -- in TCP mode it maintains the connection.)</p>
<p>It will also encrypt the message to the public key found inside that contract, so only the person who signed the contract will be able to read the message.</p>
<p>Open Transactions will also use the User ID to lookup the public key for that user. (The UserID, aka NymID, is a hash of the public key itself.)</p>
<p>This message is basically just a ping -- it verifies that the server is really there, and that it can really open the messages that are encrypted to the key in the server contract. It's the first thing your wallet software should do. Think of it like a way to PING the server. </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l12137">12137</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty())          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID.empty())            { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>            ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theServerID(SERVER_ID), theUserID(USER_ID);

    <span class="keywordflow">return</span> <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a1d07c06d85b685d11ac4076104d73f49">checkServerID</a>(theServerID, theUserID);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a4a382400dd621c29f9e66dd7714bfef4"></a><!-- doxytag: member="OTAPI_Exec::checkUser" ref="a4a382400dd621c29f9e66dd7714bfef4" args="(const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;USER_ID_CHECK)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_a_p_i___exec.html#a4a382400dd621c29f9e66dd7714bfef4">OTAPI_Exec::checkUser</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID_CHECK</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>CHECK USER --- (Grab his public key based on his User ID.)</p>
<p>ServerID -- Must be included with every message. USER_ID -- You must include your own userID so the server can reply. USER_CHECK_ID -- This is a SECOND user's ID.</p>
<p>In this message, you are requesting the server to send you the public key for another user, denoted by his ID in USER_ID_CHECK.</p>
<p>The server's response will contain the public key of the other user, so you can encrypt messages or cash to him. Your wallet can verify that the key is the right one, by hashing it and comparing the result to the other user's ID. Since the User ID is a hash of the key, they should always match. </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l12286">12286</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty())     { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>    ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID.empty())       { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>      ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID_CHECK.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID_CHECK&quot;</span>); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theServerID(SERVER_ID), theUserID(USER_ID), theOtherUserID(USER_ID_CHECK);

    <span class="keywordflow">return</span> <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a3c15352c5e6e6297252cc4d41dc66188">checkUser</a>(theServerID, theUserID, theOtherUserID);
}
</pre></div>
</div>
</div>
<a class="anchor" id="affe6c422291c8e6b8389cacd5167c914"></a><!-- doxytag: member="OTAPI_Exec::Clause_GetContents" ref="affe6c422291c8e6b8389cacd5167c914" args="(const std::string &amp;THE_CONTRACT, const std::string &amp;BYLAW_NAME, const std::string &amp;CLAUSE_NAME)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#affe6c422291c8e6b8389cacd5167c914">OTAPI_Exec::Clause_GetContents</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_CONTRACT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>BYLAW_NAME</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>CLAUSE_NAME</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l06094">6094</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (THE_CONTRACT.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_CONTRACT&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (BYLAW_NAME.empty())   { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;BYLAW_NAME&quot;</span>   ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (CLAUSE_NAME.empty())  { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;CLAUSE_NAME&quot;</span>  ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// -----------------------------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strContract(THE_CONTRACT);
    <a class="code" href="class_o_t_scriptable.html">OTScriptable</a> * pScriptable = <a class="code" href="class_o_t_scriptable.html#a4a89cbc1abd2bac0e5dec64da3452b7a">OTScriptable::InstantiateScriptable</a>(strContract);
    <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTScriptable&gt;</a> theContractAngel;
    <span class="keywordflow">if</span> (NULL == pScriptable)
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Failed trying to load smart contract from string:\n\n%s\n\n&quot;</span>,
                       __FUNCTION__, strContract.Get());
    }
    <span class="keywordflow">else</span>
    {
        theContractAngel.<a class="code" href="class_o_t_cleanup.html#a00a399db45f730439d2263d4429d00c1">SetCleanupTarget</a>(*pScriptable);  <span class="comment">// Auto-cleanup.</span>
        <span class="comment">// -----------------------------------------------------</span>
        <a class="code" href="class_o_t_bylaw.html">OTBylaw</a> * pBylaw = pScriptable-&gt;<a class="code" href="class_o_t_scriptable.html#a970014fa028541c7a3c908800bfa4ee9">GetBylaw</a>(BYLAW_NAME);
        <span class="comment">// -----------------------------------------------------</span>
        <span class="keywordflow">if</span> (NULL == pBylaw)
        {
            <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Smart contract loaded up, but failed to retrieve the bylaw with name: %s\n&quot;</span>,
                           __FUNCTION__, BYLAW_NAME.c_str());
        }
        <span class="keywordflow">else</span> <span class="comment">// We found the bylaw...</span>
        {
            <a class="code" href="class_o_t_clause.html">OTClause</a> * pClause = pBylaw-&gt;<a class="code" href="class_o_t_bylaw.html#a95b30b2c0f6e2944bb3061e0044f48f5">GetClause</a>(CLAUSE_NAME);

            <span class="keywordflow">if</span> (NULL == pClause)
            {
                <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Smart contract loaded up, and bylaw found, but failed to retrieve the clause with name: %s\n&quot;</span>,
                               __FUNCTION__, CLAUSE_NAME.c_str());
            }
            <span class="keywordflow">else</span> <span class="comment">// We found the clause...</span>
            {
                <span class="keyword">const</span> std::string str_return(pClause-&gt;<a class="code" href="class_o_t_clause.html#a29dced05f7ab1026ef191dbc013dddd6">GetCode</a>());  <span class="comment">// Success.</span>
                <span class="keywordflow">return</span> str_return;
            }
        }
    }
    <span class="comment">// -----------------------------------------------------------</span>
    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a5471ebc6235f1e1481860027dac94b5c"></a><!-- doxytag: member="OTAPI_Exec::Clause_GetNameByIndex" ref="a5471ebc6235f1e1481860027dac94b5c" args="(const std::string &amp;THE_CONTRACT, const std::string &amp;BYLAW_NAME, const int32_t &amp;nIndex)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a5471ebc6235f1e1481860027dac94b5c">OTAPI_Exec::Clause_GetNameByIndex</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_CONTRACT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>BYLAW_NAME</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int32_t &amp;&#160;</td>
          <td class="paramname"><em>nIndex</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l06045">6045</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (THE_CONTRACT.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_CONTRACT&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (BYLAW_NAME.empty())   { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;BYLAW_NAME&quot;</span>   ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// -----------------------------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strContract(THE_CONTRACT);
    <a class="code" href="class_o_t_scriptable.html">OTScriptable</a> * pScriptable = <a class="code" href="class_o_t_scriptable.html#a4a89cbc1abd2bac0e5dec64da3452b7a">OTScriptable::InstantiateScriptable</a>(strContract);
    <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTScriptable&gt;</a> theContractAngel;
    <span class="keywordflow">if</span> (NULL == pScriptable)
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Failed trying to load smart contract from string:\n\n%s\n\n&quot;</span>,
                       __FUNCTION__, strContract.Get());
    }
    <span class="keywordflow">else</span>
    {
        theContractAngel.<a class="code" href="class_o_t_cleanup.html#a00a399db45f730439d2263d4429d00c1">SetCleanupTarget</a>(*pScriptable);  <span class="comment">// Auto-cleanup.</span>
        <span class="comment">// -----------------------------------------------------</span>
        <a class="code" href="class_o_t_bylaw.html">OTBylaw</a> * pBylaw = pScriptable-&gt;<a class="code" href="class_o_t_scriptable.html#a970014fa028541c7a3c908800bfa4ee9">GetBylaw</a>(BYLAW_NAME);
        <span class="comment">// -----------------------------------------------------</span>
        <span class="keywordflow">if</span> (NULL == pBylaw)
        {
            <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Smart contract loaded up, but failed to retrieve the bylaw with name: %s\n&quot;</span>,
                           __FUNCTION__, BYLAW_NAME.c_str());
        }
        <span class="keywordflow">else</span> <span class="comment">// We found the bylaw...</span>
        {
            <span class="keyword">const</span> int32_t nTempIndex = <span class="keyword">static_cast&lt;</span><span class="keyword">const </span>int32_t<span class="keyword">&gt;</span>(nIndex);

            <a class="code" href="class_o_t_clause.html">OTClause</a> * pClause = pBylaw-&gt;<a class="code" href="class_o_t_bylaw.html#a3646d673eea9aaf16d4d839909193120">GetClauseByIndex</a>(nTempIndex);

            <span class="keywordflow">if</span> (NULL == pClause)
            {
                <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Smart contract loaded up, and bylaw found, but failed to retrieve the clause at index: %d\n&quot;</span>,
                               __FUNCTION__, nTempIndex);
            }
            <span class="keywordflow">else</span> <span class="comment">// We found the clause...</span>
            {
                <span class="keyword">const</span> std::string str_name(pClause-&gt;<a class="code" href="class_o_t_clause.html#a325b3cfeedbfc1c699de3d0f787e5120">GetName</a>().<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());  <span class="comment">// Success.</span>
                <span class="keywordflow">return</span> str_name;
            }
        }
    }
    <span class="comment">// -----------------------------------------------------------</span>
    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a0ea384dc2ddb41f122e4665f21374654"></a><!-- doxytag: member="OTAPI_Exec::ClearExpired" ref="a0ea384dc2ddb41f122e4665f21374654" args="(const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const int32_t &amp;nIndex, const bool &amp;bClearAll)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_a_p_i___exec.html#a0ea384dc2ddb41f122e4665f21374654">OTAPI_Exec::ClearExpired</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int32_t &amp;&#160;</td>
          <td class="paramname"><em>nIndex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const bool &amp;&#160;</td>
          <td class="paramname"><em>bClearAll</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l08210">8210</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(nIndex &gt;= 0);
    <span class="keywordflow">if</span> (SERVER_ID.empty())  { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>  ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID.empty())    { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>    ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theServerID(SERVER_ID);
    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theUserID  (USER_ID);

    <span class="keywordflow">return</span> <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a742952a02e0d947156e8687933602725">ClearExpired</a>(theServerID, theUserID, nIndex, bClearAll);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a15af92e750fac1175079e746a98233bd"></a><!-- doxytag: member="OTAPI_Exec::ClearRecord" ref="a15af92e750fac1175079e746a98233bd" args="(const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ACCOUNT_ID, const int32_t &amp;nIndex, const bool &amp;bClearAll)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_a_p_i___exec.html#a15af92e750fac1175079e746a98233bd">OTAPI_Exec::ClearRecord</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ACCOUNT_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int32_t &amp;&#160;</td>
          <td class="paramname"><em>nIndex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const bool &amp;&#160;</td>
          <td class="paramname"><em>bClearAll</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l08190">8190</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(nIndex &gt;= 0);
    <span class="keywordflow">if</span> (SERVER_ID.empty())  { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>  ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID.empty())    { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>    ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (ACCOUNT_ID.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;ACCOUNT_ID&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theServerID(SERVER_ID);
    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theUserID  (USER_ID);
    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theAcctID  (ACCOUNT_ID);

    <span class="keywordflow">return</span> <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a71244607da4b28d1b33ab623ec9a2a1e">ClearRecord</a>(theServerID, theUserID, theAcctID, nIndex, bClearAll);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a4a5efc4a1f8c24300ae218fd0919cedd"></a><!-- doxytag: member="OTAPI_Exec::ConfirmPaymentPlan" ref="a4a5efc4a1f8c24300ae218fd0919cedd" args="(const std::string &amp;SERVER_ID, const std::string &amp;SENDER_USER_ID, const std::string &amp;SENDER_ACCT_ID, const std::string &amp;RECIPIENT_USER_ID, const std::string &amp;PAYMENT_PLAN)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a4a5efc4a1f8c24300ae218fd0919cedd">OTAPI_Exec::ConfirmPaymentPlan</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SENDER_USER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SENDER_ACCT_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>RECIPIENT_USER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>PAYMENT_PLAN</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l05097">5097</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty())          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (SENDER_ACCT_ID.empty())     { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SENDER_ACCT_ID&quot;</span>     ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (SENDER_USER_ID.empty())     { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SENDER_USER_ID&quot;</span>     ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (RECIPIENT_USER_ID.empty())  { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;RECIPIENT_USER_ID&quot;</span>  ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (PAYMENT_PLAN.empty())       { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;PAYMENT_PLAN&quot;</span>       ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theServerID(SERVER_ID);
    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theSenderUserID(SENDER_USER_ID);
    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theSenderAcctID(SENDER_ACCT_ID);
    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theRecipientUserID(RECIPIENT_USER_ID);

    <a class="code" href="class_o_t_payment_plan.html">OTPaymentPlan</a> thePlan;
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strPlan(PAYMENT_PLAN);

    <span class="keywordflow">if</span> (!strPlan.Exists() || (<span class="keyword">false</span> == thePlan.<a class="code" href="class_o_t_contract.html#a36300e34dcd94ed7006d98b392d46815">LoadContractFromString</a>(strPlan)))
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Failure loading payment plan from string.\n&quot;</span>,__FUNCTION__);
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    }
    <span class="comment">// --------------------------------------</span>
    <span class="keywordtype">bool</span> bConfirmed = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#afe54d89f1f94b05bb2ecaffe9a02e1f4">ConfirmPaymentPlan</a>(theServerID,
        theSenderUserID,
        theSenderAcctID,
        theRecipientUserID,
        thePlan);
    <span class="keywordflow">if</span> (<span class="keyword">false</span> == bConfirmed)
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: failed in OTAPI_Exec::ConfirmPaymentPlan().\n&quot;</span>,__FUNCTION__);
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    }

    <a class="code" href="class_o_t_string.html">OTString</a> strOutput(thePlan); <span class="comment">// Extract the payment plan to string form.</span>

    std::string pBuf = strOutput.Get();

    <span class="keywordflow">return</span> pBuf;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a579170e034d1666d83c17dd314c0c3d1"></a><!-- doxytag: member="OTAPI_Exec::Create_SmartContract" ref="a579170e034d1666d83c17dd314c0c3d1" args="(const std::string &amp;SIGNER_NYM_ID, const time64_t &amp;VALID_FROM, const time64_t &amp;VALID_TO)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a579170e034d1666d83c17dd314c0c3d1">OTAPI_Exec::Create_SmartContract</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SIGNER_NYM_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="_o_t_common_8hpp.html#ad28ff0a3eda18840f6bda5872819167f">time64_t</a> &amp;&#160;</td>
          <td class="paramname"><em>VALID_FROM</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="_o_t_common_8hpp.html#ad28ff0a3eda18840f6bda5872819167f">time64_t</a> &amp;&#160;</td>
          <td class="paramname"><em>VALID_TO</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l05146">5146</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SIGNER_NYM_ID.empty())     { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SIGNER_NYM_ID&quot;</span>  ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (<a class="code" href="_o_t_common_8hpp.html#af4ca9fa2c7c290d647dd18de0a9ac25f">OT_TIME_ZERO</a> &gt; VALID_FROM) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Negative: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;VALID_FROM&quot;</span>); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (<a class="code" href="_o_t_common_8hpp.html#af4ca9fa2c7c290d647dd18de0a9ac25f">OT_TIME_ZERO</a> &gt; VALID_TO)   { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Negative: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;VALID_TO&quot;</span>); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// -----------------------------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theSignerNymID(SIGNER_NYM_ID);
    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="_o_t_common_8hpp.html#ad28ff0a3eda18840f6bda5872819167f">time64_t</a> tValidFrom = VALID_FROM;
    <a class="code" href="_o_t_common_8hpp.html#ad28ff0a3eda18840f6bda5872819167f">time64_t</a> tValidTo   = VALID_TO;
    <span class="comment">// --------------------------------------</span>
    <a class="code" href="class_o_t_string.html">OTString</a> strOutput;

    <span class="keyword">const</span> <span class="keywordtype">bool</span> &amp; bCreated = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#acdcf4e8ee01eb5684ad276a9f2f96ad6">Create_SmartContract</a>(theSignerNymID,
                                                                      tValidFrom,   <span class="comment">// Default (0 or &quot;&quot;) == NOW</span>
                                                                      tValidTo,     <span class="comment">// Default (0 or &quot;&quot;) == no expiry / cancel anytime</span>
                                                                      strOutput);
    <span class="keywordflow">if</span> (!bCreated || !strOutput.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>())
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    <span class="comment">// -----------------------------------------------------</span>
    <span class="comment">// Success!</span>
    <span class="comment">//</span>
    std::string pBuf = strOutput.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();
    <span class="keywordflow">return</span> pBuf;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a1a3d22b5d80e570fb07ba3f7ee1c17b3"></a><!-- doxytag: member="OTAPI_Exec::createAssetAccount" ref="a1a3d22b5d80e570fb07ba3f7ee1c17b3" args="(const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ASSET_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_a_p_i___exec.html#a1a3d22b5d80e570fb07ba3f7ee1c17b3">OTAPI_Exec::createAssetAccount</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ASSET_ID</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>--------------------------------------------------------------------------- CREATE ASSET ACCOUNT -- of any asset type, (just pass in the Asset Type ID.)</p>
<p>Returns int32_t: -1 means error; no message was sent. -2 means the message was sent, but the request number must be passed as a string, so call GetLargeRequestNum. 0 means NO error, but also: no message was sent. &gt;0 means NO error, and the message was sent, and the request number fits into an integer... ...and in fact the requestNum IS the return value! ===&gt; In 99% of cases, this LAST option is what actually happens!! </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l12503">12503</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID.empty())   { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>   ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (ASSET_ID.empty())  { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;ASSET_ID&quot;</span>  ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theServerID(SERVER_ID), theUserID(USER_ID), theAssetID(ASSET_ID);

    <span class="keywordflow">return</span> <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a911f4791ccc4619dc5149e571d676867">createAssetAccount</a>(theServerID, theUserID, theAssetID);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a3dd567a06b35109c704db1e0ca6f604b"></a><!-- doxytag: member="OTAPI_Exec::CreateAssetContract" ref="a3dd567a06b35109c704db1e0ca6f604b" args="(const std::string &amp;NYM_ID, const std::string &amp;strXMLcontents)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a3dd567a06b35109c704db1e0ca6f604b">OTAPI_Exec::CreateAssetContract</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>NYM_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>strXMLcontents</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l01135">1135</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">bool</span> bIsInitialized = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#af11b60d083c4a8e1e68a59a0824899d4">IsInitialized</a>();
    <span class="comment">// -----------------------------------------------------</span>
    <span class="keywordflow">if</span> (!bIsInitialized)        { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Not initialized; call OT_API::Init first.\n&quot;</span>,__FUNCTION__); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (NYM_ID.empty())         { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;NYM_ID&quot;</span>           ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (strXMLcontents.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;strXMLcontents&quot;</span>   ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_wallet.html">OTWallet</a> * pWallet = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#af759173aae6f4592c3d6ef1f6a9aa4ff">GetWallet</a>(__FUNCTION__); <span class="comment">// This logs and ASSERTs already.</span>
    <span class="keywordflow">if</span> (NULL == pWallet) <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    <span class="comment">// By this point, pWallet is a good pointer.  (No need to cleanup.)</span>
    <span class="comment">// -----------------------------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theNymID(NYM_ID);
    <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pNym = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a08144e29a333dd0e1087c4655e6981ee">GetNym</a>(theNymID, __FUNCTION__);
    <span class="keywordflow">if</span> (NULL == pNym) <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    <span class="comment">// -------------------------------------------</span>
    std::string str_Trim(strXMLcontents);
    std::string str_Trim2 = <a class="code" href="class_o_t_string.html#afe7626d0687eab81200a1af1539faed9">OTString::trim</a>(str_Trim);
    <a class="code" href="class_o_t_string.html">OTString</a> strContract(str_Trim2.c_str());

    <span class="keywordflow">if</span> (strContract.GetLength() &lt; 2)
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Empty XML contents passed in! (Failure.)\n&quot;</span>, __FUNCTION__);
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    }
    <span class="comment">// -------------------------------------------</span>
    <a class="code" href="class_o_t_asset_contract.html">OTAssetContract</a> * pContract = <span class="keyword">new</span> <a class="code" href="class_o_t_asset_contract.html">OTAssetContract</a>;
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pContract);
    <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTAssetContract&gt;</a> theAngel(*pContract);
    pContract-&gt;<a class="code" href="class_o_t_contract.html#aefeed014e39aa6dc843d090e03769b5d">CreateContract</a>(strContract, *pNym); <span class="comment">// &lt;==========  **** CREATE CONTRACT!! ****</span>
    <span class="comment">// -------------------------------------------</span>
    <span class="comment">// But does it meet our requirements?</span>
    <span class="comment">//</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pContractKeyNym = pContract-&gt;<a class="code" href="class_o_t_contract.html#affb6a11ee52ad13fd6e1e1ef6e4bbdc1">GetContractPublicNym</a>();
<span class="comment">//  const OTAsymmetricKey * pKey = pContract-&gt;GetContractPublicKey();</span>

    <span class="keywordflow">if</span> (NULL == pContractKeyNym)
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Missing &#39;key&#39; tag with name=\&quot;contract\&quot; and text value containing &quot;</span>
            <span class="stringliteral">&quot;the public cert or public key of the signer Nym. (Please add it first. Failure.)\n&quot;</span>,
            __FUNCTION__);
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    }
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">false</span> == pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#a5ec9340b8d1d0fcd32f754ea63f9915a">CompareID</a>(*pContractKeyNym))
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Found &#39;key&#39; tag with name=\&quot;contract\&quot; and text value, but it apparently does NOT contain &quot;</span>
            <span class="stringliteral">&quot;the public cert or public key of the signer Nym. Please fix that first; see the sample data. (Failure.)\n&quot;</span>,
            __FUNCTION__);
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    }
    <span class="comment">/*</span>
<span class="comment">    &lt;key name=&quot;contract&quot;&gt;</span>
<span class="comment">    - -----BEGIN CERTIFICATE-----</span>
<span class="comment">    MIICZjCCAc+gAwIBAgIJAO14L19TJgzcMA0GCSqGSIb3DQEBBQUAMFcxCzAJBgNV</span>
<span class="comment">    BAYTAlVTMREwDwYDVQQIEwhWaXJnaW5pYTEQMA4GA1UEBxMHRmFpcmZheDERMA8G</span>
<span class="comment">    A1UEChMIWm9yay5vcmcxEDAOBgNVBAMTB1Jvb3QgQ0EwHhcNMTAwOTI5MDUyMzAx</span>
<span class="comment">    WhcNMjAwOTI2MDUyMzAxWjBeMQswCQYDVQQGEwJVUzERMA8GA1UECBMIVmlyZ2lu</span>
<span class="comment">    aWExEDAOBgNVBAcTB0ZhaXJmYXgxETAPBgNVBAoTCFpvcmsub3JnMRcwFQYDVQQD</span>
<span class="comment">    Ew5zaGVsbC56b3JrLm9yZzCBnzANBgkqhkiG9w0BAQEFAAOBjQAwgYkCgYEA3vD9</span>
<span class="comment">    fO4ov4854L8wXrgfv2tltDz0ieVrTNSLuy1xuQyb//+MwZ0EYwu8jMMQrqbUaYG6</span>
<span class="comment">    y8zJu32yBKrBNPPwJ+fJE+tfgVg860dGVbwMd4KhpkKtppJXmZaGqLqvELaXa4Uw</span>
<span class="comment">    9N3qg/faj0NMEDIBhv/tD/B5U65vH+U0JlRJ07kCAwEAAaMzMDEwCQYDVR0TBAIw</span>
<span class="comment">    ADAkBgNVHREEHTAbgg5zaGVsbC56b3JrLm9yZ4IJbG9jYWxob3N0MA0GCSqGSIb3</span>
<span class="comment">    DQEBBQUAA4GBALLXPa/naWsiXsw0JwlSiG7aOmvMF2romUkcr6uObhN7sghd38M0</span>
<span class="comment">    l2kKTiptnA8txrri8RhqmQgOgiyKFCKBkxY7/XGot62cE8Y1+lqGXlhu2UHm6NjA</span>
<span class="comment">    pRKvng75J2HTjmmsbCHy+nexn4t44wssfPYlGPD8sGwmO24u9tRfdzJE</span>
<span class="comment">    - -----END CERTIFICATE-----</span>
<span class="comment">    &lt;/key&gt;</span>
<span class="comment">    */</span>
    <span class="comment">// -------------------------------------------</span>
    <span class="comment">// By this point, we know that the &quot;contract&quot; key is properly attached</span>
    <span class="comment">// to the raw XML contents, AND that the NymID for that key matches</span>
    <span class="comment">// the NymID passed into this function.</span>
    <span class="comment">// So we can proceed to add it to the wallet...</span>
    <span class="comment">//</span>
    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> idOutput;
    pContract-&gt;<a class="code" href="class_o_t_contract.html#a705597c0b741d3d120624b0388f73508">CalculateContractID</a>(idOutput);
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strOutput(idOutput);

    pWallet-&gt;<a class="code" href="class_o_t_wallet.html#aec0dc4e66d6bc87cbec6fc4c0e3851f7">AddAssetContract</a>(*pContract);
    theAngel.SetCleanupTargetPointer(NULL); <span class="comment">// (No need to cleanup anymore.)</span>
    pContract = NULL; <span class="comment">// Success. The wallet &quot;owns&quot; it now, no need to clean it up.</span>
    <span class="comment">// -------------------------------------------</span>
    std::string pBuf = strOutput.Get();

    <span class="keywordflow">return</span> pBuf;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aac00d07de2eaef92ce3439ae04280502"></a><!-- doxytag: member="OTAPI_Exec::CreateNym" ref="aac00d07de2eaef92ce3439ae04280502" args="(const int32_t &amp;nKeySize, const std::string &amp;NYM_ID_SOURCE, const std::string &amp;ALT_LOCATION)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#aac00d07de2eaef92ce3439ae04280502">OTAPI_Exec::CreateNym</a> </td>
          <td>(</td>
          <td class="paramtype">const int32_t &amp;&#160;</td>
          <td class="paramname"><em>nKeySize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>NYM_ID_SOURCE</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ALT_LOCATION</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>CREATE NYM -- Create new User</p>
<p>Creates a new Nym and adds it to the wallet. (Including PUBLIC and PRIVATE KEYS.)</p>
<p>Returns a new User ID (with files already created) or NULL upon failure.</p>
<p>Once it exists, use <a class="el" href="class_o_t_a_p_i___exec.html#a9ac57a993b4d2a1608ef0ac164960948">createUserAccount()</a> to register your new Nym at any given Server. (Nearly all server requests require this...)</p>
<p>nKeySize must be 1024, 2048, 4096, or 8192. NYM_ID_SOURCE can be empty (it will just generate a keypair and use the public key as the source.) Otherwise you can pass another source string in here, such as a URL, but the Nym will not verify against its own source unless the credential IDs for that Nym can be found posted at that same URL. Whereas if the source is just a public key, then the only verification requirement is that master credentials be signed by the corresponding private key. </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l00574">574</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (0 &gt;= nKeySize) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Keysize is 0 or less, will fail! Try 1024.\n&quot;</span>,__FUNCTION__); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pNym = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a0de395c333a49913b59ae8cac223d526">CreateNym</a>(nKeySize, NYM_ID_SOURCE, ALT_LOCATION);
    <span class="keywordflow">if</span> (NULL == pNym) <span class="comment">// Creation failed.</span>
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Failed trying to create Nym.\n&quot;</span>, __FUNCTION__);
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    }
    <span class="comment">// -----------------------------------------------------}</span>
    <a class="code" href="class_o_t_string.html">OTString</a> strOutput;
    pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#a1775c7aedd0dd25b2faf3f78dcccabe7">GetIdentifier</a>(strOutput); <span class="comment">// We&#39;re returning the new Nym ID.</span>
    <span class="comment">// --------------------------------</span>
    <span class="keywordflow">if</span> (strOutput.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>()) <span class="keywordflow">return</span> strOutput.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();
    <span class="comment">// --------------------------------</span>
    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a2bb95de55453830c7a0ccc260d5f4f35"></a><!-- doxytag: member="OTAPI_Exec::CreatePurse" ref="a2bb95de55453830c7a0ccc260d5f4f35" args="(const std::string &amp;SERVER_ID, const std::string &amp;ASSET_TYPE_ID, const std::string &amp;OWNER_ID, const std::string &amp;SIGNER_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a2bb95de55453830c7a0ccc260d5f4f35">OTAPI_Exec::CreatePurse</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ASSET_TYPE_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>OWNER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SIGNER_ID</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l11242">11242</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty())     { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>     ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (ASSET_TYPE_ID.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;ASSET_TYPE_ID&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (OWNER_ID.empty())      { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;OWNER_ID&quot;</span>      ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (SIGNER_ID.empty())     { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SIGNER_ID&quot;</span>     ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    std::string strFunc = __FUNCTION__;

    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>  theServerID(SERVER_ID),
        theAssetTypeID(ASSET_TYPE_ID),
        theOwnerID(OWNER_ID),
        theSignerID(SIGNER_ID);
    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_password_data.html">OTPasswordData</a> thePWData(<span class="stringliteral">&quot;Creating a cash purse. Enter wallet master password.&quot;</span>);
    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pOwnerNym  = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#aa09f3af30f4bc451d56c6948d536922f">GetOrLoadNym</a>(theOwnerID, <span class="keyword">false</span>, strFunc.c_str(), &amp;thePWData);
    <span class="keywordflow">if</span> (NULL == pOwnerNym) <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pSignerNym = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#aa53f110b77dee2bc71b70906ca64fbbc">GetOrLoadPrivateNym</a>(theSignerID, <span class="keyword">false</span>, strFunc.c_str(), &amp;thePWData); <span class="comment">// These copiously log, and ASSERT.</span>
    <span class="keywordflow">if</span> (NULL == pSignerNym) <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    <span class="comment">// By this point, pSignerNym is a good pointer, and is on the wallet. (No need to cleanup.)</span>
    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_purse.html">OTPurse</a> * pPurse = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a85b0d012168cd75ed3aaebd08cba2dea">CreatePurse</a>(theServerID, theAssetTypeID, theOwnerID);
    <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTPurse&gt;</a> theAngel(pPurse);

    <span class="keywordflow">if</span> (NULL != pPurse)
    {
        pPurse-&gt;<a class="code" href="class_o_t_contract.html#abd60037fe655ee8cae9a3ece5d1e2ea6">SignContract</a>(*pSignerNym, &amp;thePWData);
        pPurse-&gt;<a class="code" href="class_o_t_contract.html#a363ae430d4fd9256ab8364dbafb95444">SaveContract</a>();
        <span class="comment">// -------------</span>
        <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strOutput(*pPurse);
        <span class="comment">// -------------</span>
        std::string pBuf = strOutput.Get();

        <span class="keywordflow">return</span> pBuf;
    }
    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a3fe29ca225e57260b51840a45f4d4b8b"></a><!-- doxytag: member="OTAPI_Exec::CreatePurse_Passphrase" ref="a3fe29ca225e57260b51840a45f4d4b8b" args="(const std::string &amp;SERVER_ID, const std::string &amp;ASSET_TYPE_ID, const std::string &amp;SIGNER_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a3fe29ca225e57260b51840a45f4d4b8b">OTAPI_Exec::CreatePurse_Passphrase</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ASSET_TYPE_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SIGNER_ID</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l11295">11295</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty())     { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>           ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (ASSET_TYPE_ID.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;ASSET_TYPE_ID&quot;</span>       ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (SIGNER_ID.empty())     { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SIGNER_ID&quot;</span>           ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// -----------------------------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>
        theServerID(SERVER_ID),
        theAssetTypeID(ASSET_TYPE_ID),
        theSignerID(SIGNER_ID);
    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_password_data.html">OTPasswordData</a> thePWData(<span class="stringliteral">&quot;Creating a password-protected cash purse.&quot;</span>);
    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pNym = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#aa53f110b77dee2bc71b70906ca64fbbc">GetOrLoadPrivateNym</a>(theSignerID, <span class="keyword">false</span>, __FUNCTION__, &amp;thePWData); <span class="comment">// These copiously log, and ASSERT.</span>
    <span class="keywordflow">if</span> (NULL == pNym) <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    <span class="comment">// By this point, pNym is a good pointer, and is on the wallet. (No need to cleanup.)</span>
    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_purse.html">OTPurse</a> * pPurse = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a0f580137479e85f755aadbecc85f84a0">CreatePurse_Passphrase</a>(theServerID, theAssetTypeID);
    <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTPurse&gt;</a> theAngel(pPurse);

    <span class="keywordflow">if</span> (NULL != pPurse)
    {
        pPurse-&gt;<a class="code" href="class_o_t_contract.html#abd60037fe655ee8cae9a3ece5d1e2ea6">SignContract</a>(*pNym, &amp;thePWData);
        pPurse-&gt;<a class="code" href="class_o_t_contract.html#a363ae430d4fd9256ab8364dbafb95444">SaveContract</a>();
        <span class="comment">// -------------</span>
        <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strOutput(*pPurse);
        <span class="comment">// -------------</span>
        std::string pBuf = strOutput.Get();

        <span class="keywordflow">return</span> pBuf;
    }
    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a0af1034cdeb79f225d424dfb2f9fb45c"></a><!-- doxytag: member="OTAPI_Exec::CreateServerContract" ref="a0af1034cdeb79f225d424dfb2f9fb45c" args="(const std::string &amp;NYM_ID, const std::string &amp;strXMLcontents)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a0af1034cdeb79f225d424dfb2f9fb45c">OTAPI_Exec::CreateServerContract</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>NYM_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>strXMLcontents</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Creates a contract based on the contents passed in, then sets the contract key based on the NymID, and signs it with that Nym. This function will also ADD the contract to the wallet. Returns: the new contract ID, or NULL if failure. </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l01032">1032</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// -----------------------------------------------------</span>
    <span class="keywordtype">bool</span> bIsInitialized = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#af11b60d083c4a8e1e68a59a0824899d4">IsInitialized</a>();
    <span class="keywordflow">if</span> (!bIsInitialized) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Not initialized; call OT_API::Init first.\n&quot;</span>,__FUNCTION__);   <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keywordflow">if</span> (NYM_ID.empty())         { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;NYM_ID&quot;</span>         ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (strXMLcontents.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;strXMLcontents&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// -----------------------------------------------------</span>

    <a class="code" href="class_o_t_wallet.html">OTWallet</a> * pWallet = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#af759173aae6f4592c3d6ef1f6a9aa4ff">GetWallet</a>(__FUNCTION__); <span class="comment">// This logs and ASSERTs already.</span>
    <span class="keywordflow">if</span> (NULL == pWallet) <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    <span class="comment">// By this point, pWallet is a good pointer.  (No need to cleanup.)</span>
    <span class="comment">// -----------------------------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theNymID(NYM_ID);
    <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pNym = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a08144e29a333dd0e1087c4655e6981ee">GetNym</a>(theNymID, __FUNCTION__);
    <span class="keywordflow">if</span> (NULL == pNym) <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    <span class="comment">// -------------------------------------------</span>
    std::string str_Trim(strXMLcontents);
    std::string str_Trim2 = <a class="code" href="class_o_t_string.html#afe7626d0687eab81200a1af1539faed9">OTString::trim</a>(str_Trim);
    <a class="code" href="class_o_t_string.html">OTString</a> strContract(str_Trim2.c_str());

    <span class="keywordflow">if</span> (strContract.GetLength() &lt; 2)
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Empty XML contents passed in! (Failure.)\n&quot;</span>, __FUNCTION__);
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    }
    <span class="comment">// -------------------------------------------</span>
    <a class="code" href="class_o_t_server_contract.html">OTServerContract</a> * pContract = <span class="keyword">new</span> <a class="code" href="class_o_t_server_contract.html">OTServerContract</a>;
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pContract);
    <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTServerContract&gt;</a> theAngel(*pContract);
    pContract-&gt;<a class="code" href="class_o_t_contract.html#aefeed014e39aa6dc843d090e03769b5d">CreateContract</a>(strContract, *pNym); <span class="comment">// &lt;==========  **** CREATE CONTRACT!! ****</span>
    <span class="comment">// -------------------------------------------</span>
    <span class="comment">// But does it meet our requirements?</span>
    <span class="comment">//</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pContractKeyNym = pContract-&gt;<a class="code" href="class_o_t_contract.html#affb6a11ee52ad13fd6e1e1ef6e4bbdc1">GetContractPublicNym</a>();
<span class="comment">//  const OTAsymmetricKey * pKey = pContract-&gt;GetContractPublicKey();</span>

    <span class="keywordflow">if</span> (NULL == pContractKeyNym)
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Missing &#39;key&#39; tag with name=\&quot;contract\&quot; and text value containing &quot;</span>
            <span class="stringliteral">&quot;the public cert or public key of the signer Nym. (Please add it first. Failure.)\n&quot;</span>,
            __FUNCTION__);
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    }
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">false</span> == pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#a5ec9340b8d1d0fcd32f754ea63f9915a">CompareID</a>(*pContractKeyNym))
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Found &#39;key&#39; tag with name=\&quot;contract\&quot; and text value, but it apparently does NOT contain &quot;</span>
            <span class="stringliteral">&quot;the public cert or public key of the signer Nym. Please fix that first; see the sample data. (Failure.)\n&quot;</span>,
            __FUNCTION__);
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    }
    <span class="comment">/*</span>
<span class="comment">    &lt;key name=&quot;contract&quot;&gt;</span>
<span class="comment">    - -----BEGIN CERTIFICATE-----</span>
<span class="comment">    MIICZjCCAc+gAwIBAgIJAO14L19TJgzcMA0GCSqGSIb3DQEBBQUAMFcxCzAJBgNV</span>
<span class="comment">    BAYTAlVTMREwDwYDVQQIEwhWaXJnaW5pYTEQMA4GA1UEBxMHRmFpcmZheDERMA8G</span>
<span class="comment">    A1UEChMIWm9yay5vcmcxEDAOBgNVBAMTB1Jvb3QgQ0EwHhcNMTAwOTI5MDUyMzAx</span>
<span class="comment">    WhcNMjAwOTI2MDUyMzAxWjBeMQswCQYDVQQGEwJVUzERMA8GA1UECBMIVmlyZ2lu</span>
<span class="comment">    aWExEDAOBgNVBAcTB0ZhaXJmYXgxETAPBgNVBAoTCFpvcmsub3JnMRcwFQYDVQQD</span>
<span class="comment">    Ew5zaGVsbC56b3JrLm9yZzCBnzANBgkqhkiG9w0BAQEFAAOBjQAwgYkCgYEA3vD9</span>
<span class="comment">    fO4ov4854L8wXrgfv2tltDz0ieVrTNSLuy1xuQyb//+MwZ0EYwu8jMMQrqbUaYG6</span>
<span class="comment">    y8zJu32yBKrBNPPwJ+fJE+tfgVg860dGVbwMd4KhpkKtppJXmZaGqLqvELaXa4Uw</span>
<span class="comment">    9N3qg/faj0NMEDIBhv/tD/B5U65vH+U0JlRJ07kCAwEAAaMzMDEwCQYDVR0TBAIw</span>
<span class="comment">    ADAkBgNVHREEHTAbgg5zaGVsbC56b3JrLm9yZ4IJbG9jYWxob3N0MA0GCSqGSIb3</span>
<span class="comment">    DQEBBQUAA4GBALLXPa/naWsiXsw0JwlSiG7aOmvMF2romUkcr6uObhN7sghd38M0</span>
<span class="comment">    l2kKTiptnA8txrri8RhqmQgOgiyKFCKBkxY7/XGot62cE8Y1+lqGXlhu2UHm6NjA</span>
<span class="comment">    pRKvng75J2HTjmmsbCHy+nexn4t44wssfPYlGPD8sGwmO24u9tRfdzJE</span>
<span class="comment">    - -----END CERTIFICATE-----</span>
<span class="comment">    &lt;/key&gt;</span>
<span class="comment">    */</span>
    <span class="comment">// -------------------------------------------</span>
    <a class="code" href="class_o_t_string.html">OTString</a> strHostname; int32_t nPort=0;

    <span class="keywordflow">if</span> (<span class="keyword">false</span> == pContract-&gt;<a class="code" href="class_o_t_server_contract.html#a0714f92ddd215d7a0120dffc4c9c8cd5">GetConnectInfo</a>(strHostname, nPort))
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Unable to retrieve connection info from this contract. Please &quot;</span>
            <span class="stringliteral">&quot;fix that first; see the sample data. (Failure.)\n&quot;</span>, __FUNCTION__);
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    }
    <span class="comment">// -------------------------------------------</span>
    <span class="comment">// By this point, we know that the &quot;contract&quot; key is properly attached</span>
    <span class="comment">// to the raw XML contents, AND that the NymID for that key matches</span>
    <span class="comment">// the NymID passed into this function.</span>
    <span class="comment">// We also know that the connect info was properly attached to this</span>
    <span class="comment">// server contract.</span>
    <span class="comment">// So we can proceed to add it to the wallet...</span>
    <span class="comment">//</span>
    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> idOutput;
    pContract-&gt;<a class="code" href="class_o_t_contract.html#a705597c0b741d3d120624b0388f73508">CalculateContractID</a>(idOutput);
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strOutput(idOutput);

    pWallet-&gt;<a class="code" href="class_o_t_wallet.html#ad925633d8ba2319948b466ca0f0dc438">AddServerContract</a>(*pContract);
    theAngel.SetCleanupTargetPointer(NULL); <span class="comment">// (No need to cleanup anymore.)</span>
    pContract = NULL; <span class="comment">// Success. The wallet &quot;owns&quot; it now, no need to clean it up.</span>
    <span class="comment">// -------------------------------------------</span>
    std::string pBuf = strOutput.Get();

    <span class="keywordflow">return</span> pBuf;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a11ee44a4fd68c82181708d4a1d375f89"></a><!-- doxytag: member="OTAPI_Exec::CreateSymmetricKey" ref="a11ee44a4fd68c82181708d4a1d375f89" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a11ee44a4fd68c82181708d4a1d375f89">OTAPI_Exec::CreateSymmetricKey</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l04285">4285</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_o_t_string.html">OTString</a>  strOutput;
    <span class="comment">// -----------------------------------------------</span>
    std::string    strDisplay = <span class="stringliteral">&quot;OTAPI: Creating a new symmetric key.&quot;</span>;
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a>  otstrDisplay(strDisplay);
    <span class="comment">// -----------------------------------------------</span>
    <span class="keyword">const</span> <span class="keywordtype">bool</span> &amp; bSuccess = <a class="code" href="class_o_t_symmetric_key.html#a386861ca9897dbbfc1a5fb50d2cfd814">OTSymmetricKey::CreateNewKey</a>(strOutput, &amp;otstrDisplay);<span class="comment">//pAlreadyHavePW=&quot;&quot;</span>

    <span class="keywordflow">if</span> (!bSuccess)
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;

    std::string pBuf = strOutput.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();

    <span class="keywordflow">return</span> pBuf;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a9ac57a993b4d2a1608ef0ac164960948"></a><!-- doxytag: member="OTAPI_Exec::createUserAccount" ref="a9ac57a993b4d2a1608ef0ac164960948" args="(const std::string &amp;SERVER_ID, const std::string &amp;USER_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_a_p_i___exec.html#a9ac57a993b4d2a1608ef0ac164960948">OTAPI_Exec::createUserAccount</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>CREATE USER's ACCOUNT (On a specific server.)</p>
<p>Note: There are USER accounts and ASSET accounts...</p>
<p>A User account is simply a public key. Whenever you send a message to the server, you would normally have to send a public key with the message, so that the server can encrypt the reply back to you.</p>
<p>Due to this, the server will cache the public key so you only have to send the ID (which is a hash of the key.) The server uses this ID to look up the public key and encrypt the response back to you.</p>
<p>-- Any user can create as many public keys as they wish. So User accounts are pseudonymous.</p>
<p>-- Cash token exchanges are possible without a User account (using an HTTPS proxy operated by the server operator) so users are NOT forced to create accounts, if they prefer to deal only in cash. However, it's worth noting that even if they do, the cash itself IS STILL UNTRACEABLE, due to the Chaumian blinding.</p>
<p>-- A user may use the same public key at multiple servers, and he creates his own keys inside the wallet. So this function is less about "creating" the user account, and more about simply register- ing a public key on a specific server.</p>
<p>-- (Wallet software is capable, in OT, of distributing assets across multiple servers seamlessly, which means it's a requirement that the user generate his own keys and register them on whichever servers that he sees fit to trust.</p>
<p>Since the server contract and public key are both presumed to have been created by this point, you simply pass in their IDs and the library will do the rest of the work. </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l12157">12157</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty())          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID.empty())            { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>            ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theServerID(SERVER_ID), theUserID(USER_ID);

    <span class="keywordflow">return</span> <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a60e541e43d25106bee94688886d66dcb">createUserAccount</a>(theServerID, theUserID);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a43a627c39c47d17c4e180b56a0eae3c1"></a><!-- doxytag: member="OTAPI_Exec::Decode" ref="a43a627c39c47d17c4e180b56a0eae3c1" args="(const std::string &amp;strEncoded, const bool &amp;bLineBreaks)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a43a627c39c47d17c4e180b56a0eae3c1">OTAPI_Exec::Decode</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>strEncoded</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const bool &amp;&#160;</td>
          <td class="paramname"><em>bLineBreaks</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Decode an OT-encoded string (back to plainext.)</p>
<p>EXPORT virtual std::string Decode(const std::string &amp; strEncoded);</p>
<p>This will base64-decode, uncompress, and unpack an OT-encoded string. Returns the plainext string, or NULL.</p>
<p>internally: <a class="el" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> ascEncoded(strEncoded); <a class="el" href="class_o_t_string.html">OTString</a> strPlain(ascEncoded); // strPlain now contains the decoded plainext string. return strPlain.Get(); // We return it.</p>
<p>Decode an OT-encoded string (back to plaintext.) (NOT DECRYPT)</p>
<p>std::string OTAPI_Exec::Decode(const std::string &amp; strEncoded);</p>
<p>This will base64-decode, uncompress, and unpack an OT-encoded string. Returns the plaintext string, or "".</p>
<p>Internally: <a class="el" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> ascEncoded(strEncoded); <a class="el" href="class_o_t_string.html">OTString</a> strPlain(ascEncoded); // strPlain now contains the decoded plaintext string. return strPlain.Get(); // We return it. </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l04167">4167</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (strEncoded.empty())         { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;strEncoded&quot;</span>         ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keywordflow">if</span> ( (<span class="keyword">true</span> != bLineBreaks           ) &amp;&amp; (<span class="keyword">false</span> != bLineBreaks          ) ) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Bad: %s \n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;bLineBreaks&quot;</span>           ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keyword">const</span>   <a class="code" href="class_o_t_string.html">OTString</a> otstrEncoded(strEncoded);
    <a class="code" href="class_o_t_string.html">OTString</a> strOutput;

    <span class="keywordtype">bool</span> bDecoded = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a3c5209f2f8ba1892edb5cf4614cd04a6">Decode</a>(otstrEncoded, strOutput,  (<span class="keyword">true</span> == bLineBreaks) ? <span class="keyword">true</span> : <span class="keyword">false</span>);

    <span class="keywordflow">if</span> (!bDecoded)
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;

    std::string pBuf = strOutput.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();

    <span class="keywordflow">return</span> pBuf;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae28cbabad8107e944b504986f929300f"></a><!-- doxytag: member="OTAPI_Exec::Decrypt" ref="ae28cbabad8107e944b504986f929300f" args="(const std::string &amp;RECIPIENT_NYM_ID, const std::string &amp;strCiphertext)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#ae28cbabad8107e944b504986f929300f">OTAPI_Exec::Decrypt</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>RECIPIENT_NYM_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>strCiphertext</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>OT-DECRYPT an OT-encrypted string back to plainext. (ASYMMETRIC)</p>
<p>EXPORT virtual std::string <a class="el" href="class_o_t_a_p_i___exec.html#ae28cbabad8107e944b504986f929300f">Decrypt(const std::string &amp; RECIPIENT_NYM_ID, const std::string &amp; strCiphertext)</a>;</p>
<p>Decrypts the base64-encoded ciphertext back into a normal string plainext. Returns the plainext string, or NULL.</p>
<p>internally the C++ code is: <a class="el" href="class_o_t_envelope.html">OTEnvelope</a> theEnvelope; // Here is the envelope object. (The ciphertext IS the data for an <a class="el" href="class_o_t_envelope.html">OTEnvelope</a>.) <a class="el" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> ascCiphertext(strCiphertext); // The base64-encoded ciphertext passed in. Next we'll try to attach it to envelope object... if (theEnvelope.SetAsciiArmoredData(ascCiphertext)) { // ...so that we can open it using the appropriate Nym, into a plain string object: <a class="el" href="class_o_t_string.html">OTString</a> strServerReply; // This will contain the output when we're done. const bool bOpened = // Now we try to decrypt: theEnvelope.Open(RECIPIENT_NYM, strServerReply); if (bOpened) { return strServerReply.Get(); } }</p>
<p>OT-DECRYPT an OT-encrypted string back to plaintext. ASYMMETRIC</p>
<p>std::string <a class="el" href="class_o_t_a_p_i___exec.html#ae28cbabad8107e944b504986f929300f">OTAPI_Exec::Decrypt(const std::string &amp; RECIPIENT_NYM_ID, const std::string &amp; strCiphertext)</a>;</p>
<p>Decrypts the base64-encoded ciphertext back into a normal string plaintext. Returns the plaintext string, or "".</p>
<p>Internally the C++ code is: <a class="el" href="class_o_t_envelope.html">OTEnvelope</a> theEnvelope; // Here is the envelope object. (The ciphertext IS the data for an <a class="el" href="class_o_t_envelope.html">OTEnvelope</a>.) <a class="el" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> ascCiphertext(strCiphertext); // The base64-encoded ciphertext passed in. Next we'll try to attach it to envelope object... if (theEnvelope.SetAsciiArmoredData(ascCiphertext)) { // ...so that we can open it using the appropriate Nym, into a plain string object: <a class="el" href="class_o_t_string.html">OTString</a> strServerReply; // This will contain the output when we're done. const bool bOpened = // Now we try to decrypt: theEnvelope.Open(RECIPIENT_NYM, strServerReply); if (bOpened) { return strServerReply.Get(); } } </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l04252">4252</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (RECIPIENT_NYM_ID.empty())   { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;RECIPIENT_NYM_ID&quot;</span>   ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (strCiphertext.empty())      { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;strCiphertext&quot;</span>      ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// --------------------------------------------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a>      otstrCiphertext(strCiphertext);
    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>  theRecipientNymID(RECIPIENT_NYM_ID);
    <span class="comment">// --------------------------------------------------------------------</span>
    <a class="code" href="class_o_t_string.html">OTString</a> strOutput;

    <span class="keywordtype">bool</span> bDecrypted = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a864877a4f56fbbfee46ad8a650a1bb82">Decrypt</a>(theRecipientNymID, otstrCiphertext, strOutput);

    <span class="keywordflow">if</span> (!bDecrypted || !strOutput.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>())
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;

    std::string pBuf = strOutput.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();

    <span class="keywordflow">return</span> pBuf;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a4373b81b1530a392ba5fbab96d7c534d"></a><!-- doxytag: member="OTAPI_Exec::deleteAssetAccount" ref="a4373b81b1530a392ba5fbab96d7c534d" args="(const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ACCOUNT_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_a_p_i___exec.html#a4373b81b1530a392ba5fbab96d7c534d">OTAPI_Exec::deleteAssetAccount</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ACCOUNT_ID</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This allows you to delete an asset account from a server, provided that the balance is 0 and the inbox and outbox are both empty.</p>
<p>Returns int32_t: -1 means error; no message was sent. -2 means the message was sent, but the request number must be passed as a string, so call GetLargeRequestNum. 0 means NO error, but also: no message was sent. &gt;0 means NO error, and the message was sent, and the request number fits into an integer... ...and in fact the requestNum IS the return value! ===&gt; In 99% of cases, this LAST option is what actually happens!! </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l01947">1947</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty())          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID.empty())            { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>            ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (ACCOUNT_ID.empty())         { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;ACCOUNT_ID&quot;</span>         ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keywordflow">if</span> (<span class="keyword">false</span> == <a class="code" href="class_o_t_a_p_i___exec.html#a591518898ab86707f0c4a241a3873f93">OTAPI_Exec::Wallet_CanRemoveAccount</a>(ACCOUNT_ID))
        <span class="keywordflow">return</span> 0;

    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theServerID(SERVER_ID), theUserID(USER_ID), theAccountID(ACCOUNT_ID);

    <span class="keywordflow">return</span> <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a75dfa596de3c054af8a9ffb9c51748b0">deleteAssetAccount</a>(theServerID, theUserID, theAccountID);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a0f3388bb5b779fa5f44ecea7b6513866"></a><!-- doxytag: member="OTAPI_Exec::deleteUserAccount" ref="a0f3388bb5b779fa5f44ecea7b6513866" args="(const std::string &amp;SERVER_ID, const std::string &amp;USER_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_a_p_i___exec.html#a0f3388bb5b779fa5f44ecea7b6513866">OTAPI_Exec::deleteUserAccount</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This allows you to delete a Nym from any server it is registered at. NOTE: This will FAIL if the Nym has any transactions open at the server ("used but not closed"), as well as if there are any accounts or cron items still open at that server, or any receipts in the Nymbox.</p>
<p>Returns int32_t: -1 means error; no message was sent. -2 means the message was sent, but the request number must be passed as a string, so call GetLargeRequestNum. 0 means NO error, but also: no message was sent. &gt;0 means NO error, and the message was sent, and the request number fits into an integer... ...and in fact the requestNum IS the return value! ===&gt; In 99% of cases, this LAST option is what actually happens!! </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l12176">12176</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty())          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID.empty())            { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>            ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theServerID(SERVER_ID), theUserID(USER_ID);

    <span class="keywordflow">return</span> <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a6d44f675aa0c8fb36f9d55dadba5efcc">deleteUserAccount</a>(theServerID, theUserID);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a7e6d6c5b53a6688f743189efb6008381"></a><!-- doxytag: member="OTAPI_Exec::depositCheque" ref="a7e6d6c5b53a6688f743189efb6008381" args="(const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ACCT_ID, const std::string &amp;THE_CHEQUE)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_a_p_i___exec.html#a7e6d6c5b53a6688f743189efb6008381">OTAPI_Exec::depositCheque</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ACCT_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_CHEQUE</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>-------------------------------------------------------------------------- DEPOSIT A CHEQUE (or VOUCHER) INTO AN ASSET ACCOUNT.</p>
<p>If someone gives you a cheque, you can use this function to message the server asking it to deposit the cheque into one of your asset accounts. (Of course the account and the cheque must be the same asset type.)</p>
<p>Since a voucher is simply a cheque drawn on an int32_t server account, you can deposit a voucher the same as any other cheque.</p>
<p>Returns int32_t: -1 means error; no message was sent. -2 means the message was sent, but the request number must be passed as a string, so call GetLargeRequestNum. 0 means NO error, but also: no message was sent. &gt;0 means NO error, and the message was sent, and the request number fits into an integer... ...and in fact the requestNum IS the return value! ===&gt; In 99% of cases, this LAST option is what actually happens!! </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l13173">13173</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty())  { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>  ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID.empty())    { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>    ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (ACCT_ID.empty())    { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;ACCT_ID&quot;</span>    ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (THE_CHEQUE.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_CHEQUE&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theServerID(SERVER_ID),
                 theUserID(USER_ID),
                 theAcctID(ACCT_ID);

    <a class="code" href="class_o_t_string.html">OTString</a> strCheque(THE_CHEQUE);

    <span class="keywordflow">return</span> <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a1216782dbd78afbf72e269e81c936c6b">depositCheque</a>(theServerID, theUserID, theAcctID, strCheque);
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac3d0dbc91bb09c6979a8a9586bf25f4e"></a><!-- doxytag: member="OTAPI_Exec::depositPaymentPlan" ref="ac3d0dbc91bb09c6979a8a9586bf25f4e" args="(const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;THE_PAYMENT_PLAN)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_a_p_i___exec.html#ac3d0dbc91bb09c6979a8a9586bf25f4e">OTAPI_Exec::depositPaymentPlan</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_PAYMENT_PLAN</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>-------------------------------------------------- DEPOSIT (ACTIVATE) PAYMENT PLAN</p>
<p>See ProposePaymentPlan / ConfirmPaymentPlan as well.</p>
<p>Returns int32_t: -1 means error; no message was sent. -2 means the message was sent, but the request number must be passed as a string, so call GetLargeRequestNum. 0 means NO error, but also: no message was sent. &gt;0 means NO error, and the message was sent, and the request number fits into an integer... ...and in fact the requestNum IS the return value! ===&gt; In 99% of cases, this LAST option is what actually happens!! </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l13208">13208</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty())        { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>        ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID.empty())          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (THE_PAYMENT_PLAN.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_PAYMENT_PLAN&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>  theServerID(SERVER_ID), theUserID(USER_ID);
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a>      strPlan(THE_PAYMENT_PLAN);

    <span class="keywordflow">return</span> <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a4b11c8f60024b34f43c9a9132fe8ac65">depositPaymentPlan</a>(theServerID, theUserID, strPlan);
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab036b53cfb6fef0bc6b4c2aad7b132f8"></a><!-- doxytag: member="OTAPI_Exec::DiscardCheque" ref="ab036b53cfb6fef0bc6b4c2aad7b132f8" args="(const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ACCT_ID, const std::string &amp;THE_CHEQUE)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_a_p_i___exec.html#ab036b53cfb6fef0bc6b4c2aad7b132f8">OTAPI_Exec::DiscardCheque</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ACCT_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_CHEQUE</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>DISCARD A CHEQUE -- returns OT_TRUE or OT_FALSE</p>
<p>When you write a cheque, your wallet software must use one of your transaction numbers on the cheque. Even when you give the cheque to someone, a good wallet should still store a copy of the cheque, until it is cashed. This way, if you decide to "tear it up" (perhaps the recipient left the country!) then you will still have a copy of the cheque, and you can get your transaction number back before discarding it.</p>
<p>Why does it matter to get the transaction number back? Because once you sign that number out, you will have to CONTINUE signing it out on EVERY RECEIPT until that transaction is finally closed out. You are still responsible for that transaction number, until then.</p>
<p>So most likely, if the cheque is going nowhere, then you will want to RETRIEVE the transaction number back from the cheque so you can use it on another transaction instead. *THIS* IS THE FUNCTION YOU SHOULD USE TO DO THAT!!!!</p>
<p>Returns OT_BOOL </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l04788">4788</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty())  { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>  ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID.empty())    { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>    ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (ACCT_ID.empty())    { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;ACCT_ID&quot;</span>    ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (THE_CHEQUE.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_CHEQUE&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theServerID(SERVER_ID), theUserID(USER_ID), theAcctID(ACCT_ID);
    <a class="code" href="class_o_t_string.html">OTString</a> strCheque(THE_CHEQUE);

    <span class="keyword">const</span> <span class="keywordtype">bool</span> bDiscarded = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a8e1fde16ebe39537f28c737844d09d1f">DiscardCheque</a>(theServerID, theUserID, theAcctID, strCheque);

    <span class="keywordflow">return</span> (bDiscarded ? <span class="keyword">true</span> : <span class="keyword">false</span>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a8bbd7f75a75bdd5930c0d42b61fe397f"></a><!-- doxytag: member="OTAPI_Exec::DoesBoxReceiptExist" ref="a8bbd7f75a75bdd5930c0d42b61fe397f" args="(const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ACCOUNT_ID, const int32_t &amp;nBoxType, const int64_t &amp;TRANSACTION_NUMBER)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_a_p_i___exec.html#a8bbd7f75a75bdd5930c0d42b61fe397f">OTAPI_Exec::DoesBoxReceiptExist</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ACCOUNT_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int32_t &amp;&#160;</td>
          <td class="paramname"><em>nBoxType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int64_t &amp;&#160;</td>
          <td class="paramname"><em>TRANSACTION_NUMBER</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l01844">1844</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{

    <span class="keywordflow">if</span> (SERVER_ID.empty())  { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>  ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID.empty())    { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>    ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (ACCOUNT_ID.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;ACCOUNT_ID&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// --------------------------------------</span>
    <span class="keywordflow">if</span> ( ! ( (0 == nBoxType)    || (1 == nBoxType) || (2 == nBoxType) ) ){
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: nBoxType is of wrong type: value: %d\n&quot;</span>, __FUNCTION__, nBoxType);
        <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>;
    }
    <span class="comment">// --------------------------------------</span>
    <span class="keywordflow">if</span> (0 &gt; TRANSACTION_NUMBER) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Negative: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;TRANSACTION_NUMBER&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// --------------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>  theServerID(SERVER_ID), theUserID(USER_ID), theAccountID(ACCOUNT_ID);
    <span class="keyword">const</span> int64_t       lTransactionNum = TRANSACTION_NUMBER;
    <span class="comment">// --------------------------------------</span>
    <span class="keywordflow">switch</span> (nBoxType)
    {
    <span class="keywordflow">case</span> 0:     <span class="comment">// nymbox</span>
    <span class="keywordflow">case</span> 1:     <span class="comment">// inbox</span>
    <span class="keywordflow">case</span> 2:     <span class="comment">// outbox</span>
        <span class="keywordflow">break</span>;
    <span class="keywordflow">default</span>:
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error: bad nBoxType: %d for UserID: %s AcctID: %s (expected one of: 0/nymbox, 1/inbox, 2/outbox)\n&quot;</span>,
            __FUNCTION__, nBoxType, USER_ID.c_str(), ACCOUNT_ID.c_str());
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// --------------------------------------</span>
    <span class="keywordflow">return</span> <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#acbc0834e9b4c4f995114e62436e54fea">DoesBoxReceiptExist</a>(theServerID,
        theUserID,
        theAccountID,   <span class="comment">// If for Nymbox (vs inbox/outbox) then pass USER_ID in this field also.</span>
        nBoxType,       <span class="comment">// 0/nymbox, 1/inbox, 2/outbox</span>
        static_cast&lt;int64_t&gt;(lTransactionNum));
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab2c738f0be13d027426f81b8c4579280"></a><!-- doxytag: member="OTAPI_Exec::EasyProposePlan" ref="ab2c738f0be13d027426f81b8c4579280" args="(const std::string &amp;SERVER_ID, const std::string &amp;DATE_RANGE, const std::string &amp;SENDER_ACCT_ID, const std::string &amp;SENDER_USER_ID, const std::string &amp;PLAN_CONSIDERATION, const std::string &amp;RECIPIENT_ACCT_ID, const std::string &amp;RECIPIENT_USER_ID, const std::string &amp;INITIAL_PAYMENT, const std::string &amp;PAYMENT_PLAN, const std::string &amp;PLAN_EXPIRY)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#ab2c738f0be13d027426f81b8c4579280">OTAPI_Exec::EasyProposePlan</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>DATE_RANGE</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SENDER_ACCT_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SENDER_USER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>PLAN_CONSIDERATION</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>RECIPIENT_ACCT_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>RECIPIENT_USER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>INITIAL_PAYMENT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>PAYMENT_PLAN</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>PLAN_EXPIRY</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reimplemented in <a class="el" href="class_mock___o_t_a_p_i___exec.html#a0de2d9be462eac72c8fb97484e020aba">Mock_OTAPI_Exec</a>.</p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l04927">4927</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty())          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (SENDER_ACCT_ID.empty())     { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SENDER_ACCT_ID&quot;</span>     ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (SENDER_USER_ID.empty())     { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SENDER_USER_ID&quot;</span>     ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (PLAN_CONSIDERATION.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;PLAN_CONSIDERATION&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (RECIPIENT_ACCT_ID.empty())  { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;RECIPIENT_ACCT_ID&quot;</span>  ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (RECIPIENT_USER_ID.empty())  { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;RECIPIENT_USER_ID&quot;</span>  ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// ----------------------------------------</span>
    <a class="code" href="_o_t_common_8hpp.html#ad28ff0a3eda18840f6bda5872819167f">time64_t</a>  VALID_FROM                = <a class="code" href="_o_t_common_8hpp.html#af4ca9fa2c7c290d647dd18de0a9ac25f">OT_TIME_ZERO</a>;
    <a class="code" href="_o_t_common_8hpp.html#ad28ff0a3eda18840f6bda5872819167f">time64_t</a>  VALID_TO                  = <a class="code" href="_o_t_common_8hpp.html#af4ca9fa2c7c290d647dd18de0a9ac25f">OT_TIME_ZERO</a>;
    <span class="comment">// ----------------------------------------</span>
    int64_t INITIAL_PAYMENT_AMOUNT      = 0;
    <a class="code" href="_o_t_common_8hpp.html#ad28ff0a3eda18840f6bda5872819167f">time64_t</a>  INITIAL_PAYMENT_DELAY     = <a class="code" href="_o_t_common_8hpp.html#af4ca9fa2c7c290d647dd18de0a9ac25f">OT_TIME_ZERO</a>;
    <span class="comment">// ----------------------------------------</span>
    int64_t PAYMENT_PLAN_AMOUNT         = 0;
    <a class="code" href="_o_t_common_8hpp.html#ad28ff0a3eda18840f6bda5872819167f">time64_t</a>  PAYMENT_PLAN_DELAY        = <a class="code" href="_o_t_common_8hpp.html#af4ca9fa2c7c290d647dd18de0a9ac25f">OT_TIME_ZERO</a>;
    <a class="code" href="_o_t_common_8hpp.html#ad28ff0a3eda18840f6bda5872819167f">time64_t</a>  PAYMENT_PLAN_PERIOD       = <a class="code" href="_o_t_common_8hpp.html#af4ca9fa2c7c290d647dd18de0a9ac25f">OT_TIME_ZERO</a>;
    <span class="comment">// ---------------------------------------</span>
    <a class="code" href="_o_t_common_8hpp.html#ad28ff0a3eda18840f6bda5872819167f">time64_t</a>  PAYMENT_PLAN_LENGTH       = <a class="code" href="_o_t_common_8hpp.html#af4ca9fa2c7c290d647dd18de0a9ac25f">OT_TIME_ZERO</a>;
    int32_t PAYMENT_PLAN_MAX_PAYMENTS   = 0;
    <span class="comment">// ---------------------------------------</span>
    <span class="keywordflow">if</span> (!DATE_RANGE.empty())
    {
        <a class="code" href="class_o_t_num_list.html">OTNumList</a>       theList;
        <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a>  otstrNumList(DATE_RANGE);
        <span class="comment">// ----------------------</span>
        theList.Add(otstrNumList);
        <span class="comment">// ----------------------</span>
        <span class="comment">// VALID_FROM</span>
        <span class="keywordflow">if</span> (theList.<a class="code" href="class_o_t_num_list.html#a5772668ef4da7be4d83eb7c7c90838de">Count</a>() &gt; 0)
        {
            int64_t lVal = 0;
            <span class="keywordflow">if</span> (theList.<a class="code" href="class_o_t_num_list.html#afbd8f3863c5c8330c851d30220cea8b9">Peek</a>(lVal))
                VALID_FROM = <a class="code" href="_o_t_common_8hpp.html#a5c0893ffd83818f1c3c6b3b7ae92da13">OTTimeGetTimeFromSeconds</a>(lVal);
            theList.<a class="code" href="class_o_t_num_list.html#a86c3f5ed864c1a6996f05d6430512c3c">Pop</a>();
        }
        <span class="comment">// ----------------------</span>
        <span class="comment">// VALID_TO</span>
        <span class="keywordflow">if</span> (theList.<a class="code" href="class_o_t_num_list.html#a5772668ef4da7be4d83eb7c7c90838de">Count</a>() &gt; 0)
        {
            int64_t lVal = 0;
            <span class="keywordflow">if</span> (theList.<a class="code" href="class_o_t_num_list.html#afbd8f3863c5c8330c851d30220cea8b9">Peek</a>(lVal))
                VALID_TO = <a class="code" href="_o_t_common_8hpp.html#a5c0893ffd83818f1c3c6b3b7ae92da13">OTTimeGetTimeFromSeconds</a>(lVal);
            theList.<a class="code" href="class_o_t_num_list.html#a86c3f5ed864c1a6996f05d6430512c3c">Pop</a>();
        }
    }
    <span class="comment">// ---------------------------------------</span>
    <span class="keywordflow">if</span> (!INITIAL_PAYMENT.empty())
    {
        <a class="code" href="class_o_t_num_list.html">OTNumList</a>       theList;
        <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a>  otstrNumList(INITIAL_PAYMENT);
        <span class="comment">// ----------------------</span>
        theList.Add(otstrNumList);
        <span class="comment">// ----------------------</span>
        <span class="comment">// INITIAL_PAYMENT_AMOUNT</span>
        <span class="keywordflow">if</span> (theList.<a class="code" href="class_o_t_num_list.html#a5772668ef4da7be4d83eb7c7c90838de">Count</a>() &gt; 0)
        {
            int64_t lVal = 0;
            <span class="keywordflow">if</span> (theList.<a class="code" href="class_o_t_num_list.html#afbd8f3863c5c8330c851d30220cea8b9">Peek</a>(lVal))
                INITIAL_PAYMENT_AMOUNT = static_cast&lt;int64_t&gt;(lVal);
            theList.<a class="code" href="class_o_t_num_list.html#a86c3f5ed864c1a6996f05d6430512c3c">Pop</a>();
        }
        <span class="comment">// ----------------------</span>
        <span class="comment">// INITIAL_PAYMENT_DELAY</span>
        <span class="keywordflow">if</span> (theList.<a class="code" href="class_o_t_num_list.html#a5772668ef4da7be4d83eb7c7c90838de">Count</a>() &gt; 0)
        {
            int64_t lVal = 0;
            <span class="keywordflow">if</span> (theList.<a class="code" href="class_o_t_num_list.html#afbd8f3863c5c8330c851d30220cea8b9">Peek</a>(lVal))
                INITIAL_PAYMENT_DELAY = <a class="code" href="_o_t_common_8hpp.html#a5c0893ffd83818f1c3c6b3b7ae92da13">OTTimeGetTimeFromSeconds</a>(lVal);
            theList.<a class="code" href="class_o_t_num_list.html#a86c3f5ed864c1a6996f05d6430512c3c">Pop</a>();
        }
    }
    <span class="comment">// ---------------------------------------</span>
    <span class="keywordflow">if</span> (!PAYMENT_PLAN.empty())
    {
        <a class="code" href="class_o_t_num_list.html">OTNumList</a>       theList;
        <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a>  otstrNumList(PAYMENT_PLAN);
        <span class="comment">// ----------------------</span>
        theList.Add(otstrNumList);
        <span class="comment">// ----------------------</span>
        <span class="comment">// PAYMENT_PLAN_AMOUNT</span>
        <span class="keywordflow">if</span> (theList.<a class="code" href="class_o_t_num_list.html#a5772668ef4da7be4d83eb7c7c90838de">Count</a>() &gt; 0)
        {
            int64_t lVal = 0;
            <span class="keywordflow">if</span> (theList.<a class="code" href="class_o_t_num_list.html#afbd8f3863c5c8330c851d30220cea8b9">Peek</a>(lVal))
                PAYMENT_PLAN_AMOUNT = static_cast&lt;int64_t&gt;(lVal);
            theList.<a class="code" href="class_o_t_num_list.html#a86c3f5ed864c1a6996f05d6430512c3c">Pop</a>();
        }
        <span class="comment">// ----------------------</span>
        <span class="comment">// PAYMENT_PLAN_DELAY</span>
        <span class="keywordflow">if</span> (theList.<a class="code" href="class_o_t_num_list.html#a5772668ef4da7be4d83eb7c7c90838de">Count</a>() &gt; 0)
        {
            int64_t lVal = 0;
            <span class="keywordflow">if</span> (theList.<a class="code" href="class_o_t_num_list.html#afbd8f3863c5c8330c851d30220cea8b9">Peek</a>(lVal))
                PAYMENT_PLAN_DELAY = <a class="code" href="_o_t_common_8hpp.html#a5c0893ffd83818f1c3c6b3b7ae92da13">OTTimeGetTimeFromSeconds</a>(lVal);
            theList.<a class="code" href="class_o_t_num_list.html#a86c3f5ed864c1a6996f05d6430512c3c">Pop</a>();
        }
        <span class="comment">// ----------------------</span>
        <span class="comment">// PAYMENT_PLAN_PERIOD</span>
        <span class="keywordflow">if</span> (theList.<a class="code" href="class_o_t_num_list.html#a5772668ef4da7be4d83eb7c7c90838de">Count</a>() &gt; 0)
        {
            int64_t lVal = 0;
            <span class="keywordflow">if</span> (theList.<a class="code" href="class_o_t_num_list.html#afbd8f3863c5c8330c851d30220cea8b9">Peek</a>(lVal))
                PAYMENT_PLAN_PERIOD = <a class="code" href="_o_t_common_8hpp.html#a5c0893ffd83818f1c3c6b3b7ae92da13">OTTimeGetTimeFromSeconds</a>(lVal);
            theList.<a class="code" href="class_o_t_num_list.html#a86c3f5ed864c1a6996f05d6430512c3c">Pop</a>();
        }
    }
    <span class="comment">// ---------------------------------------</span>
    <span class="keywordflow">if</span> (!PLAN_EXPIRY.empty())
    {
        <a class="code" href="class_o_t_num_list.html">OTNumList</a>       theList;
        <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a>  otstrNumList(PLAN_EXPIRY);
        <span class="comment">// ----------------------</span>
        theList.Add(otstrNumList);
        <span class="comment">// ----------------------</span>
        <span class="comment">// PAYMENT_PLAN_LENGTH</span>
        <span class="keywordflow">if</span> (theList.<a class="code" href="class_o_t_num_list.html#a5772668ef4da7be4d83eb7c7c90838de">Count</a>() &gt; 0)
        {
            int64_t lVal = 0;
            <span class="keywordflow">if</span> (theList.<a class="code" href="class_o_t_num_list.html#afbd8f3863c5c8330c851d30220cea8b9">Peek</a>(lVal))
                PAYMENT_PLAN_LENGTH = <a class="code" href="_o_t_common_8hpp.html#a5c0893ffd83818f1c3c6b3b7ae92da13">OTTimeGetTimeFromSeconds</a>(lVal);
            theList.<a class="code" href="class_o_t_num_list.html#a86c3f5ed864c1a6996f05d6430512c3c">Pop</a>();
        }
        <span class="comment">// ----------------------</span>
        <span class="comment">// PAYMENT_PLAN_MAX_PAYMENTS</span>
        <span class="keywordflow">if</span> (theList.<a class="code" href="class_o_t_num_list.html#a5772668ef4da7be4d83eb7c7c90838de">Count</a>() &gt; 0)
        {
            int64_t lVal = 0;
            <span class="keywordflow">if</span> (theList.<a class="code" href="class_o_t_num_list.html#afbd8f3863c5c8330c851d30220cea8b9">Peek</a>(lVal))
                PAYMENT_PLAN_MAX_PAYMENTS = static_cast&lt;int32_t&gt;(lVal);
            theList.<a class="code" href="class_o_t_num_list.html#a86c3f5ed864c1a6996f05d6430512c3c">Pop</a>();
        }
    }
    <span class="comment">// ---------------------------------------</span>
    <span class="keywordflow">return</span> <a class="code" href="class_o_t_a_p_i___exec.html#a40f2d69da9c58ffe07517e2b5f22f125">OTAPI_Exec::ProposePaymentPlan</a>(SERVER_ID,
                                          VALID_FROM, VALID_TO,
                                          SENDER_ACCT_ID,
                                          SENDER_USER_ID,
                                          PLAN_CONSIDERATION,
                                          RECIPIENT_ACCT_ID,
                                          RECIPIENT_USER_ID,
                                          INITIAL_PAYMENT_AMOUNT, INITIAL_PAYMENT_DELAY,
                                          PAYMENT_PLAN_AMOUNT,    PAYMENT_PLAN_DELAY,       PAYMENT_PLAN_PERIOD,
                                          PAYMENT_PLAN_LENGTH,    PAYMENT_PLAN_MAX_PAYMENTS);
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa3f9f90ebd9b2125a4ad725350eba455"></a><!-- doxytag: member="OTAPI_Exec::Encode" ref="aa3f9f90ebd9b2125a4ad725350eba455" args="(const std::string &amp;strPlaintext, const bool &amp;bLineBreaks)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#aa3f9f90ebd9b2125a4ad725350eba455">OTAPI_Exec::Encode</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>strPlaintext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const bool &amp;&#160;</td>
          <td class="paramname"><em>bLineBreaks</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>OT-encode a plainext string.</p>
<p>This will pack, compress, and base64-encode a plain string. Returns the base64-encoded string, or NULL.</p>
<p>internally: <a class="el" href="class_o_t_string.html">OTString</a> strPlain(strPlaintext); <a class="el" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> ascEncoded(thePlaintext); // ascEncoded now contains the OT-encoded string. return ascEncoded.Get(); // We return it.</p>
<p>OT-encode a plaintext string. (NOT ENCRYPT)</p>
<p>std::string OTAPI_Exec::Encode(const std::string &amp; strPlaintext);</p>
<p>This will pack, compress, and base64-encode a plain string. Returns the base64-encoded string, or "".</p>
<p>Internally: <a class="el" href="class_o_t_string.html">OTString</a> strPlain(strPlaintext); <a class="el" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> ascEncoded(thePlaintext); // ascEncoded now contains the OT-encoded string. return ascEncoded.Get(); // We return it. </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l04130">4130</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (strPlaintext.empty())       { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;strPlaintext&quot;</span>       ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keywordflow">if</span> ( (<span class="keyword">true</span> != bLineBreaks           ) &amp;&amp; (<span class="keyword">false</span> != bLineBreaks          ) ) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Bad: %s \n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;bLineBreaks&quot;</span>           ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keyword">const</span>   <a class="code" href="class_o_t_string.html">OTString</a> otstrPlaintext(strPlaintext);
    <a class="code" href="class_o_t_string.html">OTString</a> strOutput;

    <span class="keywordtype">bool</span> bEncoded = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a8f2b202917e923bfe9eeacd152493401">Encode</a>(otstrPlaintext, strOutput, (<span class="keyword">true</span> == bLineBreaks) ? <span class="keyword">true</span> : <span class="keyword">false</span>);

    <span class="keywordflow">if</span> (!bEncoded)
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;

    std::string pBuf = strOutput.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();

    <span class="keywordflow">return</span> pBuf;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a4daf6ceaab8227c0eb5deb777d8337df"></a><!-- doxytag: member="OTAPI_Exec::Encrypt" ref="a4daf6ceaab8227c0eb5deb777d8337df" args="(const std::string &amp;RECIPIENT_NYM_ID, const std::string &amp;strPlaintext)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a4daf6ceaab8227c0eb5deb777d8337df">OTAPI_Exec::Encrypt</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>RECIPIENT_NYM_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>strPlaintext</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>OT-ENCRYPT a plainext string. (ASYMMETRIC)</p>
<p>EXPORT virtual std::string <a class="el" href="class_o_t_a_p_i___exec.html#a4daf6ceaab8227c0eb5deb777d8337df">Encrypt(const std::string &amp; RECIPIENT_NYM_ID, const std::string &amp; strPlaintext)</a>;</p>
<p>This will encode, ENCRYPT, and encode a plain string. Returns the base64-encoded ciphertext, or NULL.</p>
<p>internally the C++ code is: <a class="el" href="class_o_t_string.html">OTString</a> strPlain(strPlaintext); <a class="el" href="class_o_t_envelope.html">OTEnvelope</a> theEnvelope; if (theEnvelope.Seal(RECIPIENT_NYM, strPlain)) { // Now it's encrypted (in binary form, inside the envelope), to the recipient's nym. <a class="el" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> ascCiphertext(theEnvelope); // ascCiphertext now contains the base64-encoded ciphertext (as a string.) return ascCiphertext.Get(); }</p>
<p>OT-ENCRYPT a plaintext string. ASYMMETRIC</p>
<p>std::string <a class="el" href="class_o_t_a_p_i___exec.html#a4daf6ceaab8227c0eb5deb777d8337df">OTAPI_Exec::Encrypt(const std::string &amp; RECIPIENT_NYM_ID, const std::string &amp; strPlaintext)</a>;</p>
<p>This will encode, ENCRYPT, and encode a plain string. Returns the base64-encoded ciphertext, or "".</p>
<p>Internally the C++ code is: <a class="el" href="class_o_t_string.html">OTString</a> strPlain(strPlaintext); <a class="el" href="class_o_t_envelope.html">OTEnvelope</a> theEnvelope; if (theEnvelope.Seal(RECIPIENT_NYM, strPlain)) { // Now it's encrypted (in binary form, inside the envelope), to the recipient's nym. <a class="el" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> ascCiphertext(theEnvelope); // ascCiphertext now contains the base64-encoded ciphertext (as a string.) return ascCiphertext.Get(); } </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l04207">4207</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (RECIPIENT_NYM_ID.empty())   { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;RECIPIENT_NYM_ID&quot;</span>   ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (strPlaintext.empty())       { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;strPlaintext&quot;</span>       ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// --------------------------------------------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a>      otstrPlaintext(strPlaintext);
    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>  theRecipientNymID(RECIPIENT_NYM_ID);
    <span class="comment">// --------------------------------------------------------------------</span>
    <a class="code" href="class_o_t_string.html">OTString</a> strOutput;

    <span class="keywordtype">bool</span> bEncrypted = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#aa0fba0e8b0dbbe6a77bc443a6d99fa06">Encrypt</a>(theRecipientNymID, otstrPlaintext, strOutput);

    <span class="keywordflow">if</span> (!bEncrypted || !strOutput.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>())
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;

    std::string pBuf = strOutput.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();

    <span class="keywordflow">return</span> pBuf;
}
</pre></div>
</div>
</div>
<a class="anchor" id="af33eafc3822332f38a50b4018395478b"></a><!-- doxytag: member="OTAPI_Exec::exchangeBasket" ref="af33eafc3822332f38a50b4018395478b" args="(const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;BASKET_ASSET_ID, const std::string &amp;THE_BASKET, const bool &amp;BOOL_EXCHANGE_IN_OR_OUT)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_a_p_i___exec.html#af33eafc3822332f38a50b4018395478b">OTAPI_Exec::exchangeBasket</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>BASKET_ASSET_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_BASKET</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const bool &amp;&#160;</td>
          <td class="paramname"><em>BOOL_EXCHANGE_IN_OR_OUT</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>-------------------------------------------------------------------------- EXCHANGE BASKET</p>
<p>Send a request to the server asking to exchange in or out of a basket currency.</p>
<p>For example, maybe you have 3 gold, 2 silver, and 5 dollars, and those are the ingredients of the "Rand" basket currency. This message allows you to ask the server to convert from your gold, silver, and dollar accounts into your Rand account. (Or convert from your Rand account back into your gold, silver, and dollar accounts.)</p>
<p>Other than this conversion process, (with the reserves stored internally by the server) basket accounts are identical to normal asset accounts -- they are merely another asset type ID, and you can use them the same as you would use any other asset type (open accounts, write cheques, withdraw cash, trade on markets, etc.)</p>
<p>Returns int32_t: -1 means error; no message was sent. -2 means the message was sent, but the request number must be passed as a string, so call GetLargeRequestNum. 0 means NO error, but also: no message was sent. &gt;0 means NO error, and the message was sent, and the request number fits into an integer... ...and in fact the requestNum IS the return value! ===&gt; In 99% of cases, this LAST option is what actually happens!! </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l12841">12841</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty())          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID.empty())            { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>            ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (BASKET_ASSET_ID.empty())    { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;BASKET_ASSET_ID&quot;</span>    ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (THE_BASKET.empty())         { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_BASKET&quot;</span>         ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keywordflow">if</span> ( (<span class="keyword">true</span> != BOOL_EXCHANGE_IN_OR_OUT ) &amp;&amp; (<span class="keyword">false</span> != BOOL_EXCHANGE_IN_OR_OUT ) ) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Bad: %s \n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;BOOL_EXCHANGE_IN_OR_OUT&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theServerID(SERVER_ID), theUserID(USER_ID), theBasketAssetID(BASKET_ASSET_ID);

    <a class="code" href="class_o_t_string.html">OTString</a> strBasketInfo(THE_BASKET);

    <span class="comment">// exchanging in == true, out == false.</span>
    <span class="keyword">const</span> <span class="keywordtype">bool</span> &amp; bExchangeInOrOut = ((<span class="keyword">true</span> == BOOL_EXCHANGE_IN_OR_OUT) ? <span class="keyword">true</span> : <span class="keyword">false</span>);

    <span class="keywordflow">return</span> <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#aac6fa94e53c2fd89cd398965282be272">exchangeBasket</a>(theServerID, theUserID, theBasketAssetID, strBasketInfo, bExchangeInOrOut);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a2152b86656a453a48c270fa3c0154884"></a><!-- doxytag: member="OTAPI_Exec::exchangePurse" ref="a2152b86656a453a48c270fa3c0154884" args="(const std::string &amp;SERVER_ID, const std::string &amp;ASSET_TYPE_ID, const std::string &amp;USER_ID, const std::string &amp;THE_PURSE)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_a_p_i___exec.html#a2152b86656a453a48c270fa3c0154884">OTAPI_Exec::exchangePurse</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ASSET_TYPE_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_PURSE</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Messages the server. If failure, make sure you didn't lose that purse!! If success, the new tokens will be returned shortly and saved into the appropriate purse. Note that an asset account isn't necessary to do this... just a nym operating cash-only. The same as exchanging a 20-dollar bill at the teller window for a replacement bill.</p>
<p>Returns int32_t: -1 means error; no message was sent. -2 means the message was sent, but the request number must be passed as a string, so call GetLargeRequestNum. 0 means NO error, but also: no message was sent. &gt;0 means NO error, and the message was sent, and the request number fits into an integer... ...and in fact the requestNum IS the return value! ===&gt; In 99% of cases, this LAST option is what actually happens!! </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l11691">11691</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty())          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (ASSET_TYPE_ID.empty())      { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;ASSET_TYPE_ID&quot;</span>      ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID.empty())            { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>            ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (THE_PURSE.empty())          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_PURSE&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="comment">// todo:  exchange message.</span>
    <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: TODO (NOT CODED YET) OTAPI_Exec::exchangePurse: SERVER_ID: %s\n ASSET_TYPE_ID: %s\n USER_ID: %s\n &quot;</span>, __FUNCTION__, SERVER_ID.c_str(), ASSET_TYPE_ID.c_str(), USER_ID.c_str());

    <span class="keywordflow">return</span> -1;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a73444dac75c57e91b7e4f51a2ec74a13"></a><!-- doxytag: member="OTAPI_Exec::FlatSign" ref="a73444dac75c57e91b7e4f51a2ec74a13" args="(const std::string &amp;SIGNER_NYM_ID, const std::string &amp;THE_INPUT, const std::string &amp;CONTRACT_TYPE)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a73444dac75c57e91b7e4f51a2ec74a13">OTAPI_Exec::FlatSign</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SIGNER_NYM_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_INPUT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>CONTRACT_TYPE</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l04417">4417</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">bool</span> bIsInitialized = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#af11b60d083c4a8e1e68a59a0824899d4">IsInitialized</a>();
    <span class="keywordflow">if</span> (!bIsInitialized) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Not initialized; call OT_API::Init first.\n&quot;</span>,__FUNCTION__);   <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keywordflow">if</span> (SIGNER_NYM_ID.empty())      { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SIGNER_NYM_ID&quot;</span>      ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (THE_INPUT.empty())          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_INPUT&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (CONTRACT_TYPE.empty())      { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;CONTRACT_TYPE&quot;</span>      ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }


    <span class="comment">// --------------------------------------------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a>      strContract(THE_INPUT);
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a>      strContractType(CONTRACT_TYPE);
    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>  theSignerNymID(SIGNER_NYM_ID);
    <span class="comment">// --------------------------------------------------------------------</span>
    <a class="code" href="class_o_t_string.html">OTString</a> strOutput;

    <span class="keyword">const</span> <span class="keywordtype">bool</span> &amp; bSigned  = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a4decdc65f8b0a207a6057b86716e050a">FlatSign</a>(theSignerNymID,  strContract,
        strContractType, strOutput);

    <span class="keywordflow">if</span> (!bSigned || !strOutput.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>())
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;

    std::string pBuf = strOutput.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();

    <span class="keywordflow">return</span> pBuf;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa920e604052b505d382202593c050a11"></a><!-- doxytag: member="OTAPI_Exec::FlushMessageBuffer" ref="aa920e604052b505d382202593c050a11" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_a_p_i___exec.html#aa920e604052b505d382202593c050a11">OTAPI_Exec::FlushMessageBuffer</a> </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l13529">13529</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#ae9f593a90e408ab34e92c25a4428bf8b">FlushMessageBuffer</a>();
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae9d152765febba64cb98ddfc8461686d"></a><!-- doxytag: member="OTAPI_Exec::FlushSentMessages" ref="ae9d152765febba64cb98ddfc8461686d" args="(const bool &amp;bHarvestingForRetry, const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;THE_NYMBOX)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_a_p_i___exec.html#ae9d152765febba64cb98ddfc8461686d">OTAPI_Exec::FlushSentMessages</a> </td>
          <td>(</td>
          <td class="paramtype">const bool &amp;&#160;</td>
          <td class="paramname"><em>bHarvestingForRetry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_NYMBOX</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>----------------------------------------------------------- FlushSentMessages</p>
<p>Make sure to call this directly after a successful . (And ONLY at that time.)</p>
<p>This empties the buffer of sent messages. (Harvesting any transaction numbers that are still there.)</p>
<p>NOTE: You normally ONLY call this immediately after receiving a successful . It's only then that you can see which messages a server actually received or not -- which transactions it processed (success or fail) vs which transactions did NOT process (and thus did NOT leave any success/fail receipt in the nymbox.)</p>
<p>I COULD have just flushed myself IN the  code (where the reply is processed.) But then the developer using the OT API would never have the opportunity to see whether a message was replied to, and harvest it for himself (say, just before attempting a re-try, which I plan to do in the high-level Java API, which is why I'm coding it this way.)</p>
<p>This way, he can do that if he wishes, THEN call this function, and harvesting will still occur properly, and he will also thus have his chance to check for his own replies to harvest before then. This all depends on the developer using the API being smart enough to call this function after a successful ! </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l13644">13644</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> ( (<span class="keyword">true</span> != bHarvestingForRetry) &amp;&amp; (<span class="keyword">false</span> != bHarvestingForRetry) ) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Bad: %s \n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;bHarvestingForRetry&quot;</span>); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; <span class="keywordflow">return</span>; }

    <span class="keywordflow">if</span> (SERVER_ID.empty())          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; <span class="keywordflow">return</span>; }
    <span class="keywordflow">if</span> (USER_ID.empty())            { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>            ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; <span class="keywordflow">return</span>; }
    <span class="keywordflow">if</span> (THE_NYMBOX.empty())         { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_NYMBOX&quot;</span>         ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; <span class="keywordflow">return</span>; }

    <span class="comment">// ------------------------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>  theServerID(SERVER_ID),
        theUserID(USER_ID);
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a>      strLedger(THE_NYMBOX);
    <a class="code" href="class_o_t_ledger.html">OTLedger</a>      theLedger(theUserID, theUserID, theServerID);
    <span class="comment">// ------------------------------------------------</span>
    <span class="keywordflow">if</span> (strLedger.Exists() &amp;&amp; theLedger.LoadContractFromString(strLedger))
        <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a9a02cca439067abd875c78ca7f732011">FlushSentMessages</a>(bHarvestingForRetry,
                                               theServerID,
                                               theUserID,
                                               theLedger);
    <span class="keywordflow">else</span>
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Failure: Unable to load Nymbox from string:\n\n%s\n\n&quot;</span>, __FUNCTION__, strLedger.Get());
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad68199be44c7c45248ecaafb59194685"></a><!-- doxytag: member="OTAPI_Exec::FormatAmount" ref="ad68199be44c7c45248ecaafb59194685" args="(const std::string &amp;ASSET_TYPE_ID, const int64_t &amp;THE_AMOUNT)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#ad68199be44c7c45248ecaafb59194685">OTAPI_Exec::FormatAmount</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ASSET_TYPE_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int64_t &amp;&#160;</td>
          <td class="paramname"><em>THE_AMOUNT</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>FormatAmount: Input: currency contract, amount. (And locale, internally.) Output: 545 becomes (for example) "$5.45"</p>
<p>Returns formatted string for output, for a given amount, based on currency contract and locale. </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l01281">1281</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// -----------------------------------------------------</span>
    <span class="keywordtype">bool</span> bIsInitialized = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#af11b60d083c4a8e1e68a59a0824899d4">IsInitialized</a>();
    <span class="keywordflow">if</span> (!bIsInitialized)       { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Not initialized; call OT_API::Init first.\n&quot;</span>,__FUNCTION__); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (ASSET_TYPE_ID.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Empty %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;ASSET_TYPE_ID&quot;</span>    ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// -----------------------------------------------------</span>
    <span class="comment">// NOTE: probably just remove this. I think we now allow negative amounts to be formatted.</span>
<span class="comment">//  if (0 &gt; THE_AMOUNT)</span>
<span class="comment">//  {</span>
<span class="comment">//      OTLog::vError(&quot;%s: Negative: %s passed in: %s\n&quot;, __FUNCTION__, &quot;THE_AMOUNT&quot;, OTAPI_Exec::LongToString(THE_AMOUNT).c_str());</span>
<span class="comment">//      OT_FAIL;</span>
<span class="comment">//  }</span>
    <span class="comment">// -----------------------------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theAssetID(ASSET_TYPE_ID);
    <a class="code" href="class_o_t_asset_contract.html">OTAssetContract</a> * pContract = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a291b0f7c5298ceecc8d4aa929146d4db">GetAssetType</a>(theAssetID, __FUNCTION__);
    <span class="keywordflow">if</span> (NULL == pContract) <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    <span class="comment">// By this point, pContract is a good pointer.  (No need to cleanup.)</span>
    <span class="comment">// --------------------------------------------------------------------</span>
    <span class="keyword">const</span> int64_t    lAmount = THE_AMOUNT;
    <a class="code" href="class_o_t_amount.html">OTAmount</a>         theAmount(lAmount);
    <a class="code" href="class_o_t_string.html">OTString</a>         strBackup(<a class="code" href="class_o_t_a_p_i___exec.html#ab27795fbc9d11a3ada075eaa64b95831">LongToString</a>(THE_AMOUNT));
    std::string      str_result;
    <span class="keyword">const</span> <span class="keywordtype">bool</span>       bFormatted = pContract-&gt;<a class="code" href="class_o_t_asset_contract.html#ac3ef605c99dcea4c9380684fce292950">FormatAmount</a>(theAmount, str_result); <span class="comment">// Convert 545 to $5.45.</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a>   strOutput(bFormatted ? str_result.c_str() : strBackup.Get());

    std::string pBuf = strOutput.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();
    <span class="keywordflow">return</span> pBuf;
}
</pre></div>
</div>
</div>
<a class="anchor" id="afa5010dfd9752a6b4adcd12afd98e598"></a><!-- doxytag: member="OTAPI_Exec::GenerateBasketCreation" ref="afa5010dfd9752a6b4adcd12afd98e598" args="(const std::string &amp;USER_ID, const int64_t &amp;MINIMUM_TRANSFER)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#afa5010dfd9752a6b4adcd12afd98e598">OTAPI_Exec::GenerateBasketCreation</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int64_t &amp;&#160;</td>
          <td class="paramname"><em>MINIMUM_TRANSFER</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>---------------------------------------------------- GENERATE BASKET CREATION REQUEST</p>
<p>(returns the basket in string form.)</p>
<p>Call AddBasketCreationItem multiple times to add the various currencies to the basket, and then call issueBasket to send the request to the server. </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l12577">12577</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (USER_ID.empty())      { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>,     __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (0 &gt; MINIMUM_TRANSFER) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Negative: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;MINIMUM_TRANSFER&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theUserID(USER_ID);

    <span class="comment">// ----------------------------------------------</span>
    int64_t lMinimumTransfer = MINIMUM_TRANSFER == 0 ? 10 : MINIMUM_TRANSFER;
    <span class="comment">// ----------------------------------------------</span>

    <a class="code" href="class_o_t_basket.html">OTBasket</a> * pBasket = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#acd596ba47ce7c6e3f1035d91e6fdfbac">GenerateBasketCreation</a>(theUserID, static_cast&lt;int64_t&gt;(lMinimumTransfer)); <span class="comment">// Must be above zero. If &lt;= 0, defaults to 10.</span>

    <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTBasket&gt;</a> theAngel(pBasket);

    <span class="keywordflow">if</span> (NULL == pBasket)
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;

    <span class="comment">// At this point, I know pBasket is good (and will be cleaned up automatically.)</span>
    <span class="comment">// ----------------------------------------------</span>


    <a class="code" href="class_o_t_string.html">OTString</a> strOutput(*pBasket);
    <span class="comment">//  pBasket-&gt;SaveContract(strOutput); // Extract the basket to string form.</span>

    std::string pBuf = strOutput.Get();



    <span class="keywordflow">return</span> pBuf;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae5bbfef608110f122e8bb29da971ad5e"></a><!-- doxytag: member="OTAPI_Exec::GenerateBasketExchange" ref="ae5bbfef608110f122e8bb29da971ad5e" args="(const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;BASKET_ASSET_TYPE_ID, const std::string &amp;BASKET_ASSET_ACCT_ID, const int32_t &amp;TRANSFER_MULTIPLE)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#ae5bbfef608110f122e8bb29da971ad5e">OTAPI_Exec::GenerateBasketExchange</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>BASKET_ASSET_TYPE_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>BASKET_ASSET_ACCT_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int32_t &amp;&#160;</td>
          <td class="paramname"><em>TRANSFER_MULTIPLE</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>---------------------------------------------------- GENERATE BASKET EXCHANGE REQUEST</p>
<p>(Returns the new basket exchange request in string form.)</p>
<p>Call this function first. Then call AddBasketExchangeItem multiple times, and then finally call exchangeBasket to send the request to the server. </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l12718">12718</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty())            { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>           ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID.empty())              { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>             ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (BASKET_ASSET_TYPE_ID.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;BASKET_ASSET_TYPE_ID&quot;</span>); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (BASKET_ASSET_ACCT_ID.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;BASKET_ASSET_ACCT_ID&quot;</span>); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>  theUserID(USER_ID), theServerID(SERVER_ID),
                        theBasketAssetTypeID(BASKET_ASSET_TYPE_ID),
                        theBasketAssetAcctID(BASKET_ASSET_ACCT_ID);
    <span class="comment">// ----------------------------------------------</span>
    int32_t nTransferMultiple = 1; <span class="comment">// Just a default value.</span>

    <span class="keywordflow">if</span> (TRANSFER_MULTIPLE &gt; 0)
        nTransferMultiple = TRANSFER_MULTIPLE;
    <span class="comment">// ----------------------------------------------</span>
    <a class="code" href="class_o_t_basket.html">OTBasket</a> * pBasket = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a25e69e50ec485944c6031a5a9511e570">GenerateBasketExchange</a>(theServerID,
        theUserID,
        theBasketAssetTypeID,
        theBasketAssetAcctID,
        nTransferMultiple); <span class="comment">// 1            2            3</span>
    <span class="comment">// 5=2,3,4  OR  10=4,6,8  OR 15=6,9,12</span>
    <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTBasket&gt;</a> theAngel(pBasket);

    <span class="keywordflow">if</span> (NULL == pBasket)
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;

    <span class="comment">// At this point, I know pBasket is good (and will be cleaned up automatically.)</span>
    <span class="comment">// ----------------------------------------------</span>
    <a class="code" href="class_o_t_string.html">OTString</a> strOutput(*pBasket); <span class="comment">// Extract the basket to string form.</span>

    std::string pBuf = strOutput.Get();

    <span class="keywordflow">return</span> pBuf;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a676046a2b6dde3b9852ab00c4216d52d"></a><!-- doxytag: member="OTAPI_Exec::getAccount" ref="a676046a2b6dde3b9852ab00c4216d52d" args="(const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ACCT_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_a_p_i___exec.html#a676046a2b6dde3b9852ab00c4216d52d">OTAPI_Exec::getAccount</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ACCT_ID</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>-------------------------------------------------------------------------- GET ACCOUNT -- Send a message to the server asking it to send you the latest copy of any of your asset accounts (incl. the current balance.)</p>
<p>Returns int32_t: -1 means error; no message was sent. -2 means the message was sent, but the request number must be passed as a string, so call GetLargeRequestNum. 0 means NO error, but also: no message was sent. &gt;0 means NO error, and the message was sent, and the request number fits into an integer... ...and in fact the requestNum IS the return value! ===&gt; In 99% of cases, this LAST option is what actually happens!! </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l12528">12528</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID.empty())   { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>   ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (ACCT_ID.empty())   { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;ACCT_ID&quot;</span>   ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theServerID(SERVER_ID), theUserID(USER_ID), theAcctID(ACCT_ID);

    <span class="keywordflow">return</span> <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a8d2a98f3ec41510173e91d2acb34b520">getAccount</a>(theServerID, theUserID, theAcctID);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a3b5978e2f813cf10ebe34fa7d85b80be"></a><!-- doxytag: member="OTAPI_Exec::GetAccountCount" ref="a3b5978e2f813cf10ebe34fa7d85b80be" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_a_p_i___exec.html#a3b5978e2f813cf10ebe34fa7d85b80be">OTAPI_Exec::GetAccountCount</a> </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l01448">1448</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a318b1ae501a4ad2b99ce8ff036546e5e">GetAccountCount</a>();
}
</pre></div>
</div>
</div>
<a class="anchor" id="a8cb22849daabd9d44b8bb6bccb26e722"></a><!-- doxytag: member="OTAPI_Exec::getAccountFiles" ref="a8cb22849daabd9d44b8bb6bccb26e722" args="(const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ACCT_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_a_p_i___exec.html#a8cb22849daabd9d44b8bb6bccb26e722">OTAPI_Exec::getAccountFiles</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ACCT_ID</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l12552">12552</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID.empty())   { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>   ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (ACCT_ID.empty())   { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;ACCT_ID&quot;</span>   ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theServerID(SERVER_ID), theUserID(USER_ID), theAcctID(ACCT_ID);

    <span class="keywordflow">return</span> <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a2df75f7a37f281e3bacfce2c0fa49a3e">getAccountFiles</a>(theServerID, theUserID, theAcctID);
}
</pre></div>
</div>
</div>
<a class="anchor" id="af812b71a9eb104706179bd10e06d5170"></a><!-- doxytag: member="OTAPI_Exec::GetAccountWallet_AssetTypeID" ref="af812b71a9eb104706179bd10e06d5170" args="(const std::string &amp;ACCOUNT_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#af812b71a9eb104706179bd10e06d5170">OTAPI_Exec::GetAccountWallet_AssetTypeID</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ACCOUNT_ID</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l04633">4633</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (THE_ID.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_ID&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theID(THE_ID);
    <span class="comment">// -------------------------</span>
    <a class="code" href="class_o_t_account.html">OTAccount</a> * pAccount = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a263e050929c3f000ce4172dfbc727149">GetAccount</a>(theID, __FUNCTION__);
    <span class="keywordflow">if</span> (NULL == pAccount) <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    <span class="comment">// -------------------------</span>
    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theAssetID(pAccount-&gt;<a class="code" href="class_o_t_account.html#a3b933b8c929e071a68ec4a29ad5797d6">GetAssetTypeID</a>());

    <a class="code" href="class_o_t_string.html">OTString</a> strAssetTypeID(theAssetID);

    <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(1, <span class="stringliteral">&quot;%s: Returning asset type %s for account %s\n&quot;</span>, __FUNCTION__, strAssetTypeID.Get(), THE_ID.c_str());

    std::string pBuf = strAssetTypeID.Get();

    <span class="keywordflow">return</span> pBuf;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a879a62e450c8881a0d0db04285fd6103"></a><!-- doxytag: member="OTAPI_Exec::GetAccountWallet_Balance" ref="a879a62e450c8881a0d0db04285fd6103" args="(const std::string &amp;ACCOUNT_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64_t <a class="el" href="class_o_t_a_p_i___exec.html#a879a62e450c8881a0d0db04285fd6103">OTAPI_Exec::GetAccountWallet_Balance</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ACCOUNT_ID</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l04598">4598</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (THE_ID.empty())             { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_ID&quot;</span>             ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>    theID(THE_ID);
    <span class="comment">// -------------------------</span>
    <a class="code" href="class_o_t_account.html">OTAccount</a> * pAccount = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a263e050929c3f000ce4172dfbc727149">GetAccount</a>(theID, __FUNCTION__);
    <span class="keywordflow">if</span> (NULL == pAccount) <span class="keywordflow">return</span> -1;
    <span class="comment">// -------------------------</span>
    int64_t lBalance = pAccount-&gt;<a class="code" href="class_o_t_account.html#a77fbaae9496caec7cd899721971a89c0">GetBalance</a>();
    <span class="keywordflow">return</span> lBalance;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a07d988d698bb0f914031141297445e72"></a><!-- doxytag: member="OTAPI_Exec::GetAccountWallet_ID" ref="a07d988d698bb0f914031141297445e72" args="(const int32_t &amp;nIndex)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a07d988d698bb0f914031141297445e72">OTAPI_Exec::GetAccountWallet_ID</a> </td>
          <td>(</td>
          <td class="paramtype">const int32_t &amp;&#160;</td>
          <td class="paramname"><em>nIndex</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>You already have accounts in your wallet (without any server communications) and these functions allow you to query the data members of those accounts. Thus, "AccountWallet" denotes that you are examining copies of your accounts that are sitting in your wallet. Originally the purpose was to eliminate confusion with a different set of similarly-named functions. </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l04004">4004</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (0 &gt; nIndex) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: nIndex is out of bounds (it&#39;s in the negative!)\n&quot;</span>, __FUNCTION__); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>    theID;
    <a class="code" href="class_o_t_string.html">OTString</a>        strName;

    <span class="keywordtype">bool</span> bGetServer = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a263e050929c3f000ce4172dfbc727149">GetAccount</a>(nIndex, theID, strName);

    <span class="keywordflow">if</span> (bGetServer)
    {
        <a class="code" href="class_o_t_string.html">OTString</a> strID(theID);

        std::string pBuf = strID.Get();

        <span class="keywordflow">return</span> pBuf;
    }
    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a2aff6dd65d83c222076e923033ee088a"></a><!-- doxytag: member="OTAPI_Exec::GetAccountWallet_InboxHash" ref="a2aff6dd65d83c222076e923033ee088a" args="(const std::string &amp;ACCOUNT_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a2aff6dd65d83c222076e923033ee088a">OTAPI_Exec::GetAccountWallet_InboxHash</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ACCOUNT_ID</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l04046">4046</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (ACCOUNT_ID.empty())         { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;ACCOUNT_ID&quot;</span>         ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>    theID(ACCOUNT_ID);

    <span class="comment">// -------------------------</span>
    <a class="code" href="class_o_t_account.html">OTAccount</a> * pAccount = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a263e050929c3f000ce4172dfbc727149">GetAccount</a>(theID, __FUNCTION__);
    <span class="keywordflow">if</span> (NULL == pAccount) <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    <span class="comment">// -------------------------</span>

    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theOutput;
    <span class="keyword">const</span> <span class="keywordtype">bool</span> &amp; bGotHash = pAccount-&gt;<a class="code" href="class_o_t_account.html#aa0e90e3692031e59bff0cd5296dfbe0e">GetInboxHash</a>(theOutput);

    <a class="code" href="class_o_t_string.html">OTString</a> strOutput;

    <span class="keywordflow">if</span> (bGotHash)
        theOutput.<a class="code" href="class_o_t_identifier.html#a4bccb30446b4b515d9d6016b86b260bb">GetString</a>(strOutput);

    std::string pBuf = strOutput.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();

    <span class="keywordflow">return</span> pBuf;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab3dbd2eed67f029065dfa58c9b20d1ea"></a><!-- doxytag: member="OTAPI_Exec::GetAccountWallet_Name" ref="ab3dbd2eed67f029065dfa58c9b20d1ea" args="(const std::string &amp;ACCOUNT_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#ab3dbd2eed67f029065dfa58c9b20d1ea">OTAPI_Exec::GetAccountWallet_Name</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ACCOUNT_ID</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l04027">4027</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (THE_ID.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_ID&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>    theID(THE_ID);

    std::string strFunc = <span class="stringliteral">&quot;OTAPI_Exec::GetAccountWallet_Name&quot;</span>;
    <span class="comment">// -------------------------</span>
    <a class="code" href="class_o_t_account.html">OTAccount</a> * pAccount = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a263e050929c3f000ce4172dfbc727149">GetAccount</a>(theID, strFunc.c_str());
    <span class="keywordflow">if</span> (NULL == pAccount) <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    <span class="comment">// -------------------------</span>
    <a class="code" href="class_o_t_string.html">OTString</a> strName;
    pAccount-&gt;<a class="code" href="class_o_t_contract.html#a1afca402333b7c546104d5aa48c8efd9">GetName</a>(strName);
    std::string pBuf = strName.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();

    <span class="keywordflow">return</span> pBuf;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a5c11f6d8c1dd9024788124685c8bb8d8"></a><!-- doxytag: member="OTAPI_Exec::GetAccountWallet_NymID" ref="a5c11f6d8c1dd9024788124685c8bb8d8" args="(const std::string &amp;ACCOUNT_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a5c11f6d8c1dd9024788124685c8bb8d8">OTAPI_Exec::GetAccountWallet_NymID</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ACCOUNT_ID</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l04679">4679</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (THE_ID.empty())             { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_ID&quot;</span>             ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>  theID(THE_ID);

    <span class="comment">// -------------------------</span>
    <a class="code" href="class_o_t_account.html">OTAccount</a> * pAccount = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a263e050929c3f000ce4172dfbc727149">GetAccount</a>(theID, __FUNCTION__);
    <span class="keywordflow">if</span> (NULL == pAccount) <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    <span class="comment">// -------------------------</span>
    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theUserID(pAccount-&gt;<a class="code" href="class_o_t_transaction_type.html#a845d76c16f6f5f3f4bc9ac04393ca3c0">GetUserID</a>());
    <a class="code" href="class_o_t_string.html">OTString</a> strUserID(theUserID);

    std::string pBuf = strUserID.Get();

    <span class="keywordflow">return</span> pBuf;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae47c46f41ae9992a198ad12ee096379b"></a><!-- doxytag: member="OTAPI_Exec::GetAccountWallet_OutboxHash" ref="ae47c46f41ae9992a198ad12ee096379b" args="(const std::string &amp;ACCOUNT_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#ae47c46f41ae9992a198ad12ee096379b">OTAPI_Exec::GetAccountWallet_OutboxHash</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ACCOUNT_ID</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l04072">4072</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (ACCOUNT_ID.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;ACCOUNT_ID&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>    theID(ACCOUNT_ID);

    <span class="comment">// -------------------------</span>
    <a class="code" href="class_o_t_account.html">OTAccount</a> * pAccount = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a263e050929c3f000ce4172dfbc727149">GetAccount</a>(theID, __FUNCTION__);
    <span class="keywordflow">if</span> (NULL == pAccount) <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    <span class="comment">// -------------------------</span>

    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theOutput;
    <span class="keyword">const</span> <span class="keywordtype">bool</span> &amp; bGotHash = pAccount-&gt;<a class="code" href="class_o_t_account.html#af5ff8a85bb964fd1cdb811b383bb0d11">GetOutboxHash</a>(theOutput);

    <a class="code" href="class_o_t_string.html">OTString</a> strOutput;

    <span class="keywordflow">if</span> (bGotHash)
        theOutput.<a class="code" href="class_o_t_identifier.html#a4bccb30446b4b515d9d6016b86b260bb">GetString</a>(strOutput);

    std::string pBuf = strOutput.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();

    <span class="keywordflow">return</span> pBuf;
}
</pre></div>
</div>
</div>
<a class="anchor" id="afb2255e4fb7fb27bbeebe753eb827770"></a><!-- doxytag: member="OTAPI_Exec::GetAccountWallet_ServerID" ref="afb2255e4fb7fb27bbeebe753eb827770" args="(const std::string &amp;ACCOUNT_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#afb2255e4fb7fb27bbeebe753eb827770">OTAPI_Exec::GetAccountWallet_ServerID</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ACCOUNT_ID</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l04657">4657</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (THE_ID.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_ID&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>    theID(THE_ID);
    <span class="comment">// -------------------------</span>
    <a class="code" href="class_o_t_account.html">OTAccount</a> * pAccount = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a263e050929c3f000ce4172dfbc727149">GetAccount</a>(theID, __FUNCTION__);
    <span class="keywordflow">if</span> (NULL == pAccount) <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    <span class="comment">// -------------------------</span>
    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theServerID(pAccount-&gt;<a class="code" href="class_o_t_transaction_type.html#a59fc08d52ef5bc0ea546da7a56e86fa5">GetPurportedServerID</a>());
    <a class="code" href="class_o_t_string.html">OTString</a> strServerID(theServerID);

    std::string pBuf = strServerID.Get();

    <span class="keywordflow">return</span> pBuf;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae2f54619b76a48ef8afad46e3d3bfc30"></a><!-- doxytag: member="OTAPI_Exec::GetAccountWallet_Type" ref="ae2f54619b76a48ef8afad46e3d3bfc30" args="(const std::string &amp;ACCOUNT_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#ae2f54619b76a48ef8afad46e3d3bfc30">OTAPI_Exec::GetAccountWallet_Type</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ACCOUNT_ID</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l04614">4614</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (THE_ID.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_ID&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>    theID(THE_ID);
    <span class="comment">// -------------------------</span>
    <a class="code" href="class_o_t_account.html">OTAccount</a> * pAccount = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a263e050929c3f000ce4172dfbc727149">GetAccount</a>(theID, __FUNCTION__);
    <span class="keywordflow">if</span> (NULL == pAccount) <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    <span class="comment">// -------------------------</span>
    std::string pBuf = pAccount-&gt;<a class="code" href="class_o_t_account.html#a15dbf34beb7f8e38c6719120770bc852">GetTypeString</a>();


    <span class="keywordflow">return</span> pBuf;
}
</pre></div>
</div>
</div>
<a class="anchor" id="abacd1cfa131cd2f8c2b086560137c80e"></a><!-- doxytag: member="OTAPI_Exec::GetActiveCronItem" ref="abacd1cfa131cd2f8c2b086560137c80e" args="(const std::string &amp;SERVER_ID, int64_t lTransNum)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#abacd1cfa131cd2f8c2b086560137c80e">OTAPI_Exec::GetActiveCronItem</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>lTransNum</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l00617">617</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: NULL %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (0 &gt; lTransNum)     { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Negative: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;lTransNum&quot;</span>); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// --------------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> serverId(SERVER_ID);
    std::string        str_return;
    <span class="comment">// --------------------------------------</span>
    <span class="keyword">const</span> int64_t lTransactionNum = <span class="keyword">static_cast&lt;</span>int64_t<span class="keyword">&gt;</span>(lTransNum);

    <a class="code" href="class_o_t_cron_item.html">OTCronItem</a> * pCronItem = <a class="code" href="class_o_t_cron_item.html#a9478c280789d9400a4b7933626397ece">OTCronItem::LoadActiveCronReceipt</a>(lTransactionNum, serverId);
    <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTCronItem&gt;</a> theCronItemAngel(pCronItem);
    <span class="comment">// --------------------------------------</span>
    <span class="keywordflow">if</span> (NULL != pCronItem)
    {
        <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strCronItem(*pCronItem);

        str_return = strCronItem.Get();
    }
    <span class="comment">// --------------------------------------</span>
    <span class="keywordflow">return</span> str_return;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a6c06c32e07e06efb900564fd96241ed0"></a><!-- doxytag: member="OTAPI_Exec::GetAssetType_Contract" ref="a6c06c32e07e06efb900564fd96241ed0" args="(const std::string &amp;ASSET_TYPE_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a6c06c32e07e06efb900564fd96241ed0">OTAPI_Exec::GetAssetType_Contract</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ASSET_TYPE_ID</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l01311">1311</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// -----------------------------------------------------</span>
    <span class="keywordtype">bool</span> bIsInitialized = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#af11b60d083c4a8e1e68a59a0824899d4">IsInitialized</a>();
    <span class="keywordflow">if</span> (!bIsInitialized) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Not initialized; call OT_API::Init first.\n&quot;</span>,__FUNCTION__);   <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keywordflow">if</span> (ASSET_TYPE_ID.empty())      { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;ASSET_TYPE_ID&quot;</span>      ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// -----------------------------------------------------</span>

    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theAssetID(ASSET_TYPE_ID);
    <a class="code" href="class_o_t_asset_contract.html">OTAssetContract</a> * pContract = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a291b0f7c5298ceecc8d4aa929146d4db">GetAssetType</a>(theAssetID, __FUNCTION__);
    <span class="keywordflow">if</span> (NULL == pContract) <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    <span class="comment">// By this point, pContract is a good pointer.  (No need to cleanup.)</span>
    <span class="comment">// --------------------------------------------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strOutput(*pContract);
    std::string pBuf = strOutput.Get();
    <span class="keywordflow">return</span> pBuf;
}
</pre></div>
</div>
</div>
<a class="anchor" id="afcae7efa87317326a01618ab42c9ddb0"></a><!-- doxytag: member="OTAPI_Exec::GetAssetType_ID" ref="afcae7efa87317326a01618ab42c9ddb0" args="(const int32_t &amp;nIndex)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#afcae7efa87317326a01618ab42c9ddb0">OTAPI_Exec::GetAssetType_ID</a> </td>
          <td>(</td>
          <td class="paramtype">const int32_t &amp;&#160;</td>
          <td class="paramname"><em>nIndex</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l03946">3946</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (0 &gt; nIndex) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: nIndex is out of bounds (it&#39;s in the negative!)\n&quot;</span>, __FUNCTION__); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>    theID;
    <a class="code" href="class_o_t_string.html">OTString</a>        strName;

    <span class="keywordtype">bool</span> bGetServer = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a291b0f7c5298ceecc8d4aa929146d4db">GetAssetType</a>(nIndex, theID, strName);

    <span class="keywordflow">if</span> (bGetServer)
    {
        <a class="code" href="class_o_t_string.html">OTString</a> strID(theID);
        std::string pBuf = strID.Get();

        <span class="keywordflow">return</span> pBuf;
    }
    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a6675e1b70df65f26f68fa709ce00e72e"></a><!-- doxytag: member="OTAPI_Exec::GetAssetType_Name" ref="a6675e1b70df65f26f68fa709ce00e72e" args="(const std::string &amp;ASSET_TYPE_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a6675e1b70df65f26f68fa709ce00e72e">OTAPI_Exec::GetAssetType_Name</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ASSET_TYPE_ID</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l03966">3966</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (THE_ID.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_ID&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>    theID(THE_ID);
    <span class="comment">// -------------------------</span>
    <a class="code" href="class_o_t_asset_contract.html">OTAssetContract</a> * pContract = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a291b0f7c5298ceecc8d4aa929146d4db">GetAssetType</a>(theID, __FUNCTION__);
    <span class="keywordflow">if</span> (NULL == pContract) <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    <span class="comment">// -------------------------</span>
    <a class="code" href="class_o_t_string.html">OTString</a> strName;
    pContract-&gt;<a class="code" href="class_o_t_contract.html#a1afca402333b7c546104d5aa48c8efd9">GetName</a>(strName);
    std::string pBuf = strName.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();

    <span class="keywordflow">return</span> pBuf;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a1f3b27b02d266a328445a1bd9a560655"></a><!-- doxytag: member="OTAPI_Exec::GetAssetType_TLA" ref="a1f3b27b02d266a328445a1bd9a560655" args="(const std::string &amp;THE_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a1f3b27b02d266a328445a1bd9a560655">OTAPI_Exec::GetAssetType_TLA</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_ID</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l03983">3983</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (THE_ID.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_ID&quot;</span>); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>    theID(THE_ID);
    <span class="comment">// -------------------------</span>
    <a class="code" href="class_o_t_asset_contract.html">OTAssetContract</a> * pContract = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a291b0f7c5298ceecc8d4aa929146d4db">GetAssetType</a>(theID, __FUNCTION__);
    <span class="keywordflow">if</span> (NULL == pContract) <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    <span class="comment">// -------------------------</span>
    <a class="code" href="class_o_t_string.html">OTString</a> strTLA;
    strTLA = pContract-&gt;<a class="code" href="class_o_t_asset_contract.html#a57453300ee2ae1c1237078126d993afc">GetCurrencyTLA</a>();
    std::string pBuf = strTLA.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();

    <span class="keywordflow">return</span> pBuf;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae582e3609b00e870c0234c0b0a95a3d7"></a><!-- doxytag: member="OTAPI_Exec::GetAssetTypeCount" ref="ae582e3609b00e870c0234c0b0a95a3d7" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_a_p_i___exec.html#ae582e3609b00e870c0234c0b0a95a3d7">OTAPI_Exec::GetAssetTypeCount</a> </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l01443">1443</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#acb9cb01e0d828ad885aa8da40b69ffb3">GetAssetTypeCount</a>();
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac3cdd2bbe3e6fe34eaefe74ae0e5be75"></a><!-- doxytag: member="OTAPI_Exec::getBoxReceipt" ref="ac3cdd2bbe3e6fe34eaefe74ae0e5be75" args="(const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ACCOUNT_ID, const int32_t &amp;nBoxType, const int64_t &amp;TRANSACTION_NUMBER)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_a_p_i___exec.html#ac3cdd2bbe3e6fe34eaefe74ae0e5be75">OTAPI_Exec::getBoxReceipt</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ACCOUNT_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int32_t &amp;&#160;</td>
          <td class="paramname"><em>nBoxType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int64_t &amp;&#160;</td>
          <td class="paramname"><em>TRANSACTION_NUMBER</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The Nymbox/Inbox/Outbox only contain abbreviated receipts, with a hash for zero-knowledge proof of the entire receipt. (Messages were getting too big, it couldn't be helped. Sorry.) Once you download your nym/in/out/XYZbox and load it into memory from storage, you iterate through it and download all the box receipts (preferably only once.) Once you load those up, it's as if the various pieces were never sundered into multiple files to begin with. Then you can verify the box and do all the normal operations. How to use? Call getInbox (say), and if successful, loadInbox(). </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l01895">1895</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty())  { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>  ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID.empty())    { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>    ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (ACCOUNT_ID.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;ACCOUNT_ID&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// --------------------------------------</span>
    <span class="keywordflow">if</span> ( ! ( (0 == nBoxType)    || (1 == nBoxType) || (2 == nBoxType) ) )
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: nBoxType is of wrong type: value: %d\n&quot;</span>, __FUNCTION__, nBoxType);
        <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>;
    }
    <span class="comment">// --------------------------------------</span>
    <span class="keywordflow">if</span> (0 &gt; TRANSACTION_NUMBER) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Negative: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;TRANSACTION_NUMBER&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// --------------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>  theServerID(SERVER_ID), theUserID(USER_ID), theAccountID(ACCOUNT_ID);
    <span class="keyword">const</span> int64_t           lTransactionNum = TRANSACTION_NUMBER;
    <span class="comment">// --------------------------------------</span>
    <span class="keywordflow">switch</span> (nBoxType)
    {
    <span class="keywordflow">case</span> 0:     <span class="comment">// nymbox</span>
    <span class="keywordflow">case</span> 1:     <span class="comment">// inbox</span>
    <span class="keywordflow">case</span> 2:     <span class="comment">// outbox</span>
        <span class="keywordflow">break</span>;
    <span class="keywordflow">default</span>:
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error: bad nBoxType: %d for UserID: %s AcctID: %s&quot;</span>
            <span class="stringliteral">&quot;(expected one of: 0/nymbox, 1/inbox, 2/outbox)\n&quot;</span>, __FUNCTION__,
                      nBoxType, USER_ID.c_str(), ACCOUNT_ID.c_str());
        <span class="keywordflow">return</span> -1;
    }

    <span class="keywordflow">return</span> <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a0cec1627c8efa1c18cdace3894a916e1">getBoxReceipt</a>(theServerID,
        theUserID,
        theAccountID, <span class="comment">// If for Nymbox (vs inbox/outbox) then pass USER_ID in this field also.</span>
        nBoxType,   <span class="comment">// 0/nymbox, 1/inbox, 2/outbox</span>
        static_cast&lt;int64_t&gt;(lTransactionNum));
}
</pre></div>
</div>
</div>
<a class="anchor" id="af26e961f144a979bc1bbe1aa5f5537be"></a><!-- doxytag: member="OTAPI_Exec::getContract" ref="af26e961f144a979bc1bbe1aa5f5537be" args="(const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ASSET_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_a_p_i___exec.html#af26e961f144a979bc1bbe1aa5f5537be">OTAPI_Exec::getContract</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ASSET_ID</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>-------------------------------------------------------------------- GET CONTRACT -- Get server's copy of any asset contract, by asset type ID.</p>
<p>Returns int32_t: -1 means error; no message was sent. -2 means the message was sent, but the request number must be passed as a string, so call GetLargeRequestNum. 0 means NO error, but also: no message was sent. &gt;0 means NO error, and the message was sent, and the request number fits into an integer... ...and in fact the requestNum IS the return value! ===&gt; In 99% of cases, this LAST option is what actually happens!! </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l12459">12459</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID.empty())   { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>   ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (ASSET_ID.empty())  { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;ASSET_ID&quot;</span>  ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theServerID(SERVER_ID), theUserID(USER_ID), theAssetID(ASSET_ID);

    <span class="keywordflow">return</span> <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a5edd49c564ada6fb519882ad7a60bd8e">getContract</a>(theServerID, theUserID, theAssetID);
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab6e791d8ddd8345831b8618afd635f38"></a><!-- doxytag: member="OTAPI_Exec::getInbox" ref="ab6e791d8ddd8345831b8618afd635f38" args="(const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ACCT_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_a_p_i___exec.html#ab6e791d8ddd8345831b8618afd635f38">OTAPI_Exec::getInbox</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ACCT_ID</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>-------------------------------------------------------------------------- GET A COPY OF MY INBOX</p>
<p>Each asset account has its own inbox/outbox. If a pending transfer is in my inbox, or a new receipt, I might want to see that. This message asks the server to send me the latest copy of the inbox for any given account (and will save it to my local storage, so I can then load it using LoadInbox, which I haven't written yet.</p>
<p>NOTE: the test client, upon receiving a  response from the server, will automatically process that into a processInbox command back to the server, automatically accepting all of the transactions, resulting in a final  reply from the server. Obviously a real GUI client would merely display the inbox to the user, where the user could choose to accept the items individually. SO HOW WOULD YOU **USE** THIS? To process your inbox...</p>
<p>-- First you call getInbox to grab the latest inbox from the server. (You will also want to call getOutbox as well as getAccount, since you need to have the latest versions of those files, or your balance agreement will be calculated wrong, causing your transaction to fail.)</p>
<p>-- Then you call LoadInbox to load it from local storage.</p>
<p>During this time, your user has the opportunity to peruse the inbox, and to decide which transactions therein he wishes to accept or reject. If you want to display the inbox items on the screen, use these functions to loop through them: Ledger_GetCount Ledger_GetTransactionByIndex Ledger_GetTransactionIDByIndex</p>
<p>You will probably ask me for more introspection on the transactions themselves. (Just ask -- No problem.) Here's what you have right now: Transaction_GetType</p>
<p>-- Then call Ledger_CreateResponse in order to create a 'response' ledger for that inbox, which will be sent to the server.</p>
<p>-- Then call Ledger_GetCount (pass it the inbox) to find out how many transactions are inside of it. Use that count to LOOP through them...</p>
<p>-- Use Ledger_GetTransactionByIndex to grab each transaction as you iterate through the inbox.</p>
<p>-- Call Transaction_CreateResponse to create a response for each transaction, accepting or rejecting it, and adding it to the response ledger.</p>
<p>-- Penultimately, call <a class="el" href="class_o_t_a_p_i___exec.html#ae43e5ed33e7e2281c92a35818338c953">Ledger_FinalizeResponse()</a> which will create a Balance Agreement for the ledger.</p>
<p>-- Finally, call processInbox to send that response ledger to the server and process the various items. </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l12985">12985</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty())          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID.empty())            { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>            ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (ACCT_ID.empty())            { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;ACCT_ID&quot;</span>            ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theServerID(SERVER_ID), theUserID(USER_ID), theAcctID(ACCT_ID);

    <span class="keywordflow">return</span> <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a8bc5ab412574867dd506207e311d0fa2">getInbox</a>(theServerID, theUserID, theAcctID);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a9cc96101156fb1a34e6f8f30bc7b8e01"></a><!-- doxytag: member="OTAPI_Exec::getMarketList" ref="a9cc96101156fb1a34e6f8f30bc7b8e01" args="(const std::string &amp;SERVER_ID, const std::string &amp;USER_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_a_p_i___exec.html#a9cc96101156fb1a34e6f8f30bc7b8e01">OTAPI_Exec::getMarketList</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Retrieves details for each market. </p>
<p>What objects are actually stored in local storage after a successful server call?</p>
<p>A "MarketList", which contains a list of Market Datas. Load this up and you can get pointers to the elements as needed. THERE IS ONLY ONE OF THESE.</p>
<p>An "OfferList" which contains "all" offers for a specific Market ID. There may be many markets, so this should be saved by Server / Asset / User the same as Purses. If you load this object, you can loop through its offers. I don't think a sub-object is necessary here since the data is so simple.</p>
<p>A "TradeList" which contains "all" trades for a specific Market ID. There many be many markets, so this should be saved Server/Asset/User the same as purses. If you load this object you can loop through the trades, which again, no sub-object needed since the data here is so simple. But we shall see!</p>
<p>A "NymOfferList" which contains all offers for a specific nym. Unlike the above offers, these offers are full-featured and should contain a LOT more details. </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l13382">13382</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty())          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID.empty())            { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>            ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theServerID(SERVER_ID), theUserID(USER_ID);

    <span class="keywordflow">return</span> <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a86ffb271aec1f5cdb211f3f1403cc910">getMarketList</a>(theServerID, theUserID);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a0c338692168a52f6d51e8545038044d3"></a><!-- doxytag: member="OTAPI_Exec::getMarketOffers" ref="a0c338692168a52f6d51e8545038044d3" args="(const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;MARKET_ID, const int64_t &amp;MAX_DEPTH)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_a_p_i___exec.html#a0c338692168a52f6d51e8545038044d3">OTAPI_Exec::getMarketOffers</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>MARKET_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int64_t &amp;&#160;</td>
          <td class="paramname"><em>MAX_DEPTH</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Gets all offers for a specific market and their details (up until maximum depth) </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l13404">13404</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty())          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID.empty())            { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>            ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (0 &gt; MAX_DEPTH)              { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Negative: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;MAX_DEPTH&quot;</span>      ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theServerID(SERVER_ID), theUserID(USER_ID), theMarketID(MARKET_ID);

    <span class="keyword">const</span> int64_t lDepth = MAX_DEPTH;
    <span class="keywordflow">if</span> (0 &gt; lDepth) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: lDepth is out of bounds (it&#39;s in the negative!)\n&quot;</span>, __FUNCTION__); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keywordflow">return</span> <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a32bf905befe6a9450b9293ed75ee1e3a">getMarketOffers</a>(theServerID, theUserID, theMarketID, static_cast&lt;int64_t&gt;(lDepth));
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac4d037d2bf1c776f78845d2120d85072"></a><!-- doxytag: member="OTAPI_Exec::getMarketRecentTrades" ref="ac4d037d2bf1c776f78845d2120d85072" args="(const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;MARKET_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_a_p_i___exec.html#ac4d037d2bf1c776f78845d2120d85072">OTAPI_Exec::getMarketRecentTrades</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>MARKET_ID</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Gets all recent trades (up until maximum depth) </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l13431">13431</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty())          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID.empty())            { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>            ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (MARKET_ID.empty())          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;MARKET_ID&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theServerID(SERVER_ID), theUserID(USER_ID), theMarketID(MARKET_ID);

    <span class="keywordflow">return</span> <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#ad4046209a1d0cb1792b23f71834a294e">getMarketRecentTrades</a>(theServerID, theUserID, theMarketID);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a501a0c5fa22dd7a33e3da67002b8690b"></a><!-- doxytag: member="OTAPI_Exec::GetMemlogAtIndex" ref="a501a0c5fa22dd7a33e3da67002b8690b" args="(const int32_t &amp;nIndex)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a501a0c5fa22dd7a33e3da67002b8690b">OTAPI_Exec::GetMemlogAtIndex</a> </td>
          <td>(</td>
          <td class="paramtype">const int32_t &amp;&#160;</td>
          <td class="paramname"><em>nIndex</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l00403">403</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> <a class="code" href="class_o_t_a_p_i___exec.html#a501a0c5fa22dd7a33e3da67002b8690b">OTLog::GetMemlogAtIndex</a>(nIndex).Get();
}
</pre></div>
</div>
</div>
<a class="anchor" id="a3480267ea10f15c53bb92240aec254ea"></a><!-- doxytag: member="OTAPI_Exec::GetMemlogSize" ref="a3480267ea10f15c53bb92240aec254ea" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_a_p_i___exec.html#a3480267ea10f15c53bb92240aec254ea">OTAPI_Exec::GetMemlogSize</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The below functions are for retrieving log data programatically. </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l00397">397</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> <a class="code" href="class_o_t_a_p_i___exec.html#a3480267ea10f15c53bb92240aec254ea">OTLog::GetMemlogSize</a>();
}
</pre></div>
</div>
</div>
<a class="anchor" id="a6486d68cd2943fbdf0c01716ea78a9d5"></a><!-- doxytag: member="OTAPI_Exec::getMint" ref="a6486d68cd2943fbdf0c01716ea78a9d5" args="(const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ASSET_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_a_p_i___exec.html#a6486d68cd2943fbdf0c01716ea78a9d5">OTAPI_Exec::getMint</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ASSET_ID</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>-------------------------------------------------------------------------- Get server's copy of public Mint file (which contains the public minting keys for each asset type. Withdrawal requests will not work for any given asset type until you have downloaded the mint for that asset type.)</p>
<p>Returns int32_t: -1 means error; no message was sent. -2 means the message was sent, but the request number must be passed as a string, so call GetLargeRequestNum. 0 means NO error, but also: no message was sent. &gt;0 means NO error, and the message was sent, and the request number fits into an integer... ...and in fact the requestNum IS the return value! ===&gt; In 99% of cases, this LAST option is what actually happens!! </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l12481">12481</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID.empty())   { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>   ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (ASSET_ID.empty())  { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;ASSET_ID&quot;</span>  ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theServerID(SERVER_ID), theUserID(USER_ID), theAssetID(ASSET_ID);

    <span class="keywordflow">return</span> <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#ab8904b6f61d9c3c03acc6d5723458d86">getMint</a>(theServerID, theUserID, theAssetID);
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa2284a93c77800307c39eb84a02004e6"></a><!-- doxytag: member="OTAPI_Exec::GetNym_ActiveCronItemIDs" ref="aa2284a93c77800307c39eb84a02004e6" args="(const std::string &amp;NYM_ID, const std::string &amp;SERVER_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#aa2284a93c77800307c39eb84a02004e6">OTAPI_Exec::GetNym_ActiveCronItemIDs</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>NYM_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l00596">596</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (NYM_ID.empty())    { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: NULL %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;NYM_ID&quot;</span>);    <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (SERVER_ID.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: NULL %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// ---------------------------------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> nymId(NYM_ID), serverId(SERVER_ID);
    <span class="comment">// ---------------------------------------------------------</span>
    <a class="code" href="class_o_t_num_list.html">OTNumList</a>   numlist;
    std::string str_return;

    <span class="keywordflow">if</span> (<a class="code" href="class_o_t_cron_item.html#a2b91cb56eae85d198ef450d0140f1eac">OTCronItem::GetActiveCronTransNums</a>(numlist, nymId, serverId))
    {
        <a class="code" href="class_o_t_string.html">OTString</a> strOutput;
        numlist.<a class="code" href="class_o_t_num_list.html#a3ebc9e933a8c248d0fdd0b11a3c49fe4">Output</a>(strOutput);
        str_return = strOutput.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();
    }

    <span class="keywordflow">return</span> str_return;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aaad4d7b8a45b1620a6be71288f864c49"></a><!-- doxytag: member="OTAPI_Exec::GetNym_AltSourceLocation" ref="aaad4d7b8a45b1620a6be71288f864c49" args="(const std::string &amp;NYM_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#aaad4d7b8a45b1620a6be71288f864c49">OTAPI_Exec::GetNym_AltSourceLocation</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>NYM_ID</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l00656">656</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (NYM_ID.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: NULL %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;NYM_ID&quot;</span>); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// ---------------------------------------------------------</span>
    <a class="code" href="class_o_t_password_data.html">OTPasswordData</a>   thePWData(<a class="code" href="_o_t_callback_8hpp.html#aec99f1909896090ab9b64ce848f50c6a">OT_PW_DISPLAY</a>);
    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>     nym_id(NYM_ID);
    <span class="comment">// This tries to get, then tries to load as public, then tries to load as private.</span>
    <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a>    * pNym = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#aa09f3af30f4bc451d56c6948d536922f">GetOrLoadNym</a>(nym_id, <span class="keyword">false</span>, __FUNCTION__, &amp;thePWData);
    <span class="keywordflow">if</span> (NULL == pNym) <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    <span class="comment">// ---------------------------------------------------------</span>
    <span class="keyword">const</span> std::string str_return(pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#ab8bd7424e1b95220cfe66372295664ff">GetAltLocation</a>().<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
    <span class="keywordflow">return</span> str_return;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a8a6bd5cb6059ceea858abb4953af8381"></a><!-- doxytag: member="OTAPI_Exec::GetNym_CredentialContents" ref="a8a6bd5cb6059ceea858abb4953af8381" args="(const std::string &amp;NYM_ID, const std::string &amp;CREDENTIAL_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a8a6bd5cb6059ceea858abb4953af8381">OTAPI_Exec::GetNym_CredentialContents</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>NYM_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>CREDENTIAL_ID</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l00706">706</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (NYM_ID.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: NULL %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;NYM_ID&quot;</span>); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// ---------------------------------------------------------</span>
    <a class="code" href="class_o_t_password_data.html">OTPasswordData</a>   thePWData(<a class="code" href="_o_t_callback_8hpp.html#aec99f1909896090ab9b64ce848f50c6a">OT_PW_DISPLAY</a>);
    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>     nym_id(NYM_ID);
    <span class="comment">// This tries to get, then tries to load as public, then tries to load as private.</span>
    <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a>    * pNym = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#aa09f3af30f4bc451d56c6948d536922f">GetOrLoadNym</a>(nym_id, <span class="keyword">false</span>, __FUNCTION__, &amp;thePWData);
    <span class="keywordflow">if</span> (NULL == pNym) <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    <span class="comment">// ---------------------------------------------------------</span>
    std::string    str_return;
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strCredID(CREDENTIAL_ID);
    <a class="code" href="class_o_t_credential.html">OTCredential</a> * pCredential = pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#a94f8a8812ceae9a1f003aa79bfda73a5">GetMasterCredential</a>(strCredID);

    <span class="keywordflow">if</span> (NULL != pCredential) <span class="comment">// Found the master credential...</span>
        str_return = pCredential-&gt;<a class="code" href="class_o_t_credential.html#ab3e65e4abc6a9f2a04047044682329c2">GetPubCredential</a>().<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();
    <span class="comment">// ---------------------------------------------------------</span>
    <span class="keywordflow">return</span> str_return;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a1ee6c7e064c4df21af237c2f75bd75b5"></a><!-- doxytag: member="OTAPI_Exec::GetNym_CredentialCount" ref="a1ee6c7e064c4df21af237c2f75bd75b5" args="(const std::string &amp;NYM_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_a_p_i___exec.html#a1ee6c7e064c4df21af237c2f75bd75b5">OTAPI_Exec::GetNym_CredentialCount</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>NYM_ID</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l00670">670</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (NYM_ID.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: NULL %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;NYM_ID&quot;</span>); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// ---------------------------------------------------------</span>
    <a class="code" href="class_o_t_password_data.html">OTPasswordData</a>   thePWData(<a class="code" href="_o_t_callback_8hpp.html#aec99f1909896090ab9b64ce848f50c6a">OT_PW_DISPLAY</a>);
    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>     nym_id(NYM_ID);
    <span class="comment">// This tries to get, then tries to load as public, then tries to load as private.</span>
    <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a>    * pNym = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#aa09f3af30f4bc451d56c6948d536922f">GetOrLoadNym</a>(nym_id, <span class="keyword">false</span>, __FUNCTION__, &amp;thePWData);
    <span class="keywordflow">if</span> (NULL == pNym) <span class="keywordflow">return</span> (-1);
    <span class="comment">// ---------------------------------------------------------</span>
    <span class="keyword">const</span> int32_t nReturnValue = <span class="keyword">static_cast&lt;</span>int32_t<span class="keyword">&gt;</span>(pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#a6ae670b44bc6728da06141c885e6c7e9">GetMasterCredentialCount</a>());
    <span class="keywordflow">return</span> nReturnValue;
}
</pre></div>
</div>
</div>
<a class="anchor" id="abbe0ccf755337f5baf3b68a36daf067e"></a><!-- doxytag: member="OTAPI_Exec::GetNym_CredentialID" ref="abbe0ccf755337f5baf3b68a36daf067e" args="(const std::string &amp;NYM_ID, const int32_t &amp;nIndex)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#abbe0ccf755337f5baf3b68a36daf067e">OTAPI_Exec::GetNym_CredentialID</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>NYM_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int32_t &amp;&#160;</td>
          <td class="paramname"><em>nIndex</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l00685">685</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (NYM_ID.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: NULL %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;NYM_ID&quot;</span>); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// ---------------------------------------------------------</span>
    <a class="code" href="class_o_t_password_data.html">OTPasswordData</a>   thePWData(<a class="code" href="_o_t_callback_8hpp.html#aec99f1909896090ab9b64ce848f50c6a">OT_PW_DISPLAY</a>);
    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>     nym_id(NYM_ID);
    <span class="comment">// This tries to get, then tries to load as public, then tries to load as private.</span>
    <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a>    * pNym = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#aa09f3af30f4bc451d56c6948d536922f">GetOrLoadNym</a>(nym_id, <span class="keyword">false</span>, __FUNCTION__, &amp;thePWData);
    <span class="keywordflow">if</span> (NULL == pNym) <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    <span class="comment">// ---------------------------------------------------------</span>
    std::string    str_return;
    <span class="keyword">const</span> <a class="code" href="class_o_t_credential.html">OTCredential</a> * pCredential = pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#ae32a4525f158913b21f010a796f5fc29">GetMasterCredentialByIndex</a>(static_cast&lt;const int32_t&gt;(nIndex));

    <span class="keywordflow">if</span> (NULL != pCredential)
        str_return = pCredential-&gt;<a class="code" href="class_o_t_credential.html#a1e99eeeb4d701f2ea9b56a1201a57680">GetMasterCredID</a>().<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();
    <span class="comment">// ---------------------------------------------------------</span>
    <span class="keywordflow">return</span> str_return;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a5c205cfa5e6f9a05e87b4894e92e8086"></a><!-- doxytag: member="OTAPI_Exec::GetNym_ID" ref="a5c205cfa5e6f9a05e87b4894e92e8086" args="(const int32_t &amp;nIndex)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a5c205cfa5e6f9a05e87b4894e92e8086">OTAPI_Exec::GetNym_ID</a> </td>
          <td>(</td>
          <td class="paramtype">const int32_t &amp;&#160;</td>
          <td class="paramname"><em>nIndex</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>based on Index this returns the Nym's ID </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l02352">2352</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (0 &gt; nIndex) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: nIndex is out of bounds (it&#39;s in the negative!)\n&quot;</span>, __FUNCTION__); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>    theNymID;
    <a class="code" href="class_o_t_string.html">OTString</a>        strName;

    <span class="keywordtype">bool</span> bGetNym = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a08144e29a333dd0e1087c4655e6981ee">GetNym</a>(nIndex, theNymID, strName);

    <span class="keywordflow">if</span> (bGetNym)
    {
        <a class="code" href="class_o_t_string.html">OTString</a> strNymID(theNymID);

        std::string pBuf = strNymID.Get();



        <span class="keywordflow">return</span> pBuf;
    }

    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="afd6570cf9561be931f7b38cdc915a185"></a><!-- doxytag: member="OTAPI_Exec::GetNym_InboxHash" ref="afd6570cf9561be931f7b38cdc915a185" args="(const std::string &amp;ACCOUNT_ID, const std::string &amp;NYM_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#afd6570cf9561be931f7b38cdc915a185">OTAPI_Exec::GetNym_InboxHash</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ACCOUNT_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>NYM_ID</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l02531">2531</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (ACCOUNT_ID.empty())         { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;ACCOUNT_ID&quot;</span>         ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (NYM_ID.empty())             { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;NYM_ID&quot;</span>             ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="comment">// -------------------------</span>
    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>    theNymID(NYM_ID);
    <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pNym = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a08144e29a333dd0e1087c4655e6981ee">GetNym</a>(theNymID, __FUNCTION__);

    <span class="keywordflow">if</span> (NULL != pNym)
    {
        <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>    theHash;
        <span class="keyword">const</span>
            std::string     str_acct_id(ACCOUNT_ID);
        <span class="keyword">const</span> <span class="keywordtype">bool</span> &amp;      bGothash = pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#a89fb6af0b242e8b4468d34b0057e95f5">GetInboxHash</a>(str_acct_id, theHash); <span class="comment">// (theHash is output.)</span>

        <span class="keywordflow">if</span> (!bGothash)
        {
            <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strNymID(theNymID); <span class="comment">// You might ask, why create this string and not just use NYM_ID?</span>
            <span class="comment">// The answer is because I&#39;m looking forward to a day soon when we don&#39;t passconst std::string &amp; in the first</span>
            <span class="comment">// place, and thus I can&#39;t always expect that variable will be there.</span>
            <span class="comment">//</span>
            <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(1, <span class="stringliteral">&quot;%s: InboxHash not found, on client side, &quot;</span>
                <span class="stringliteral">&quot;for account %s and nym %s. (Returning &quot;</span><span class="stringliteral">&quot;.)\n&quot;</span>,
                __FUNCTION__, str_acct_id.c_str(), strNymID.Get());
        }
        <span class="keywordflow">else</span> <span class="comment">// Success: the hash was there, for that Nym, for that server ID.</span>
        {
            <a class="code" href="class_o_t_string.html">OTString</a> strOutput(theHash);

            std::string pBuf = strOutput.Get();


            <span class="keywordflow">return</span> pBuf;
        }
    }

    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a3e43100d647014c89e60918a13756245"></a><!-- doxytag: member="OTAPI_Exec::GetNym_MailContentsByIndex" ref="a3e43100d647014c89e60918a13756245" args="(const std::string &amp;NYM_ID, const int32_t &amp;nIndex)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a3e43100d647014c89e60918a13756245">OTAPI_Exec::GetNym_MailContentsByIndex</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>NYM_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int32_t &amp;&#160;</td>
          <td class="paramname"><em>nIndex</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l02630">2630</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (NYM_ID.empty())             { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;NYM_ID&quot;</span>  ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (0 &gt; nIndex) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: nIndex is out of bounds (it&#39;s in the negative!)\n&quot;</span>, __FUNCTION__); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// -------------------------</span>
    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>    theNymID(NYM_ID);
    <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pNym = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a08144e29a333dd0e1087c4655e6981ee">GetNym</a>(theNymID, __FUNCTION__);
    <span class="keywordflow">if</span> (NULL == pNym) <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    <span class="comment">// -------------------------</span>
    <a class="code" href="class_o_t_message.html">OTMessage</a> * pMessage = pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#a41d4a62c9e863fa982c7b4899bfcd3cb">GetMailByIndex</a>(nIndex);

    <span class="keywordflow">if</span> (NULL != pMessage)
    {
        <span class="comment">// SENDER:    pMessage-&gt;m_strNymID</span>
        <span class="comment">// RECIPIENT: pMessage-&gt;m_strNymID2</span>
        <span class="comment">// MESSAGE:   pMessage-&gt;m_ascPayload (in an OTEnvelope)</span>
        <span class="comment">//</span>
        <a class="code" href="class_o_t_envelope.html">OTEnvelope</a>  theEnvelope;
        <a class="code" href="class_o_t_string.html">OTString</a>    strEnvelopeContents;

        <span class="comment">// Decrypt the Envelope.</span>
        <span class="keywordflow">if</span> (theEnvelope.<a class="code" href="class_o_t_envelope.html#ad0d76f534bcda708b0298bcf906cb923">SetAsciiArmoredData</a>(pMessage-&gt;<a class="code" href="class_o_t_message.html#aa6729578b97f61804e91035a7709800a">m_ascPayload</a>) &amp;&amp;
            theEnvelope.<a class="code" href="class_o_t_envelope.html#ae2e8fafc4e508ce5d323c089b71c7e7b">Open</a>(*pNym, strEnvelopeContents))
        {
            std::string pBuf = strEnvelopeContents.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();
            <span class="keywordflow">return</span> pBuf;
        }
    }
    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="af741ab0d89e8600a4bca2bc1557a100b"></a><!-- doxytag: member="OTAPI_Exec::GetNym_MailCount" ref="af741ab0d89e8600a4bca2bc1557a100b" args="(const std::string &amp;NYM_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_a_p_i___exec.html#af741ab0d89e8600a4bca2bc1557a100b">OTAPI_Exec::GetNym_MailCount</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>NYM_ID</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Each Nym has mail messages, they can come from different servers. This allows you to peruse the mail for a given Nym, and erase messages.</p>
<p>So how would you actually USE this to browse a Nym's mail?</p>
<p>-- Call <a class="el" href="class_o_t_a_p_i___exec.html#af741ab0d89e8600a4bca2bc1557a100b">GetNym_MailCount()</a> to find out how many mail items there are.</p>
<p>-- Then LOOP through them, and use GetNym_MailSenderIDByIndex and GetNym_MailServerIDByIndex to populate the list.</p>
<p>-- If you want to add a subject display, you'll have to call <a class="el" href="class_o_t_a_p_i___exec.html#a3e43100d647014c89e60918a13756245">GetNym_MailContentsByIndex()</a> and check for a first line beginning in Subject: (there may not be one.)</p>
<p>-- GetNym_MailContentsByIndex returns the body of the mail regardless.</p>
<p>-- Use <a class="el" href="class_o_t_a_p_i___exec.html#af5445f94adcbb66d9e6acd3962d0128d">Nym_VerifyMailByIndex()</a> to verify the signature on the mail,</p>
<p>-- and use <a class="el" href="class_o_t_a_p_i___exec.html#ac70ad98b72adb62a7fbe2343fa316dda">Nym_RemoveMailByIndex()</a> to erase mail (when you want to.) </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l02617">2617</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (NYM_ID.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;NYM_ID&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// -------------------------</span>
    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>    theNymID(NYM_ID);
    <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pNym = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a08144e29a333dd0e1087c4655e6981ee">GetNym</a>(theNymID, __FUNCTION__);
    <span class="keywordflow">if</span> (NULL == pNym) <span class="keywordflow">return</span> 0;
    <span class="comment">// -------------------------</span>
    <span class="keywordflow">return</span> pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#a6a449ad7415513ce538c4a2e71efde87" title="return the number of mail items available for this Nym.">GetMailCount</a>();
}
</pre></div>
</div>
</div>
<a class="anchor" id="a9bacc4ffb222363b9215e15ee4a09e6b"></a><!-- doxytag: member="OTAPI_Exec::GetNym_MailSenderIDByIndex" ref="a9bacc4ffb222363b9215e15ee4a09e6b" args="(const std::string &amp;NYM_ID, const int32_t &amp;nIndex)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a9bacc4ffb222363b9215e15ee4a09e6b">OTAPI_Exec::GetNym_MailSenderIDByIndex</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>NYM_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int32_t &amp;&#160;</td>
          <td class="paramname"><em>nIndex</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l02665">2665</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (NYM_ID.empty())             { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;NYM_ID&quot;</span>  ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (0 &gt; nIndex) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: nIndex is out of bounds (it&#39;s in the negative!)\n&quot;</span>, __FUNCTION__); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// -------------------------</span>
    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>    theNymID(NYM_ID);
    <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pNym = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a08144e29a333dd0e1087c4655e6981ee">GetNym</a>(theNymID, __FUNCTION__);
    <span class="keywordflow">if</span> (NULL == pNym) <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    <span class="comment">// -------------------------</span>
    <a class="code" href="class_o_t_message.html">OTMessage</a> * pMessage = pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#a41d4a62c9e863fa982c7b4899bfcd3cb">GetMailByIndex</a>(nIndex);

    <span class="keywordflow">if</span> (NULL != pMessage)
    {
        <span class="comment">// SENDER:    pMessage-&gt;m_strNymID</span>
        <span class="comment">// SERVER:    pMessage-&gt;m_strServerID</span>
        <span class="comment">// RECIPIENT: pMessage-&gt;m_strNymID2</span>
        <span class="comment">// MESSAGE:   pMessage-&gt;m_ascPayload (in an OTEnvelope)</span>

        std::string pBuf = pMessage-&gt;<a class="code" href="class_o_t_message.html#a61b38b159dbb516bb3f4f382b936238a">m_strNymID</a>.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();
        <span class="keywordflow">return</span> pBuf;
    }
    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a8739c3250e05ef46df4eeae244e46469"></a><!-- doxytag: member="OTAPI_Exec::GetNym_MailServerIDByIndex" ref="a8739c3250e05ef46df4eeae244e46469" args="(const std::string &amp;NYM_ID, const int32_t &amp;nIndex)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a8739c3250e05ef46df4eeae244e46469">OTAPI_Exec::GetNym_MailServerIDByIndex</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>NYM_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int32_t &amp;&#160;</td>
          <td class="paramname"><em>nIndex</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l02693">2693</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (NYM_ID.empty())             { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;NYM_ID&quot;</span>             ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keywordflow">if</span> (0 &gt; nIndex) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: nIndex is out of bounds (it&#39;s in the negative!)\n&quot;</span>, __FUNCTION__); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="comment">// -------------------------</span>
    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>    theNymID(NYM_ID);
    <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pNym = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a08144e29a333dd0e1087c4655e6981ee">GetNym</a>(theNymID, __FUNCTION__);
    <span class="keywordflow">if</span> (NULL == pNym) <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    <span class="comment">// -------------------------</span>
    <a class="code" href="class_o_t_message.html">OTMessage</a> * pMessage = pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#a41d4a62c9e863fa982c7b4899bfcd3cb">GetMailByIndex</a>(nIndex);

    <span class="keywordflow">if</span> (NULL != pMessage)
    {
        <span class="comment">// SENDER:    pMessage-&gt;m_strNymID</span>
        <span class="comment">// SERVER:    pMessage-&gt;m_strServerID</span>
        <span class="comment">// RECIPIENT: pMessage-&gt;m_strNymID2</span>
        <span class="comment">// MESSAGE:   pMessage-&gt;m_ascPayload (in an OTEnvelope)</span>

        std::string pBuf = pMessage-&gt;<a class="code" href="class_o_t_message.html#ae5304f18eb276ecd0c5370aa41817926">m_strServerID</a>.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();
        <span class="keywordflow">return</span> pBuf;
    }
    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a9a467be336ba01534d66f5d572be2222"></a><!-- doxytag: member="OTAPI_Exec::getNym_MarketOffers" ref="a9a467be336ba01534d66f5d572be2222" args="(const std::string &amp;SERVER_ID, const std::string &amp;USER_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_a_p_i___exec.html#a9a467be336ba01534d66f5d572be2222">OTAPI_Exec::getNym_MarketOffers</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>This "Market Offer" data is a lot more detailed than the Market_GetOffers() call, which seems similar otherwise. </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l13454">13454</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty())          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID.empty())            { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>            ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theServerID(SERVER_ID), theUserID(USER_ID);

    <span class="keywordflow">return</span> <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a1e508b83332ea7707f74c91622105ea8">getNym_MarketOffers</a>(theServerID, theUserID);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a67037f27744d22dd75158acccbd54b50"></a><!-- doxytag: member="OTAPI_Exec::GetNym_Name" ref="a67037f27744d22dd75158acccbd54b50" args="(const std::string &amp;NYM_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a67037f27744d22dd75158acccbd54b50">OTAPI_Exec::GetNym_Name</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>NYM_ID</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns Nym Name (based on NymID) </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l02376">2376</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (NYM_ID.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null NYM_ID passed in!\n&quot;</span> ,__FUNCTION__); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// ---------------------------------------------</span>
    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>    theNymID(NYM_ID);
    <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a>   * pNym = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a08144e29a333dd0e1087c4655e6981ee">GetNym</a>(theNymID);

    <span class="keywordflow">if</span> (NULL != pNym)
    {
        <a class="code" href="class_o_t_string.html">OTString</a> &amp; strName = pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#a42e63697c3c3b1bdb526ee7990a9c0e7">GetNymName</a>();
        std::string pBuf = strName.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();

        <span class="keywordflow">return</span> pBuf;
    }
    <span class="comment">// ---------------------------------------------</span>
    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a6735cad3ccb68577d64222b5c557dc0a"></a><!-- doxytag: member="OTAPI_Exec::GetNym_NymboxHash" ref="a6735cad3ccb68577d64222b5c557dc0a" args="(const std::string &amp;SERVER_ID, const std::string &amp;NYM_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a6735cad3ccb68577d64222b5c557dc0a">OTAPI_Exec::GetNym_NymboxHash</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>NYM_ID</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l02443">2443</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (NYM_ID.empty())             { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;NYM_ID&quot;</span>             ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (SERVER_ID.empty())          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="comment">// -------------------------</span>
    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>    theNymID(NYM_ID);
    <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pNym = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a08144e29a333dd0e1087c4655e6981ee">GetNym</a>(theNymID, __FUNCTION__);

    <span class="keywordflow">if</span> (NULL != pNym)
    {
        <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>    theNymboxHash;
        <span class="keyword">const</span>
            std::string     str_server_id(SERVER_ID);
        <span class="keyword">const</span> <span class="keywordtype">bool</span> &amp;      bGothash = pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#a461ac5959e5f91add57549be10d82e36">GetNymboxHash</a>(str_server_id, theNymboxHash); <span class="comment">// (theNymboxHash is output.)</span>

        <span class="keywordflow">if</span> (!bGothash)
        {
            <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strNymID(theNymID); <span class="comment">// You might ask, why create this string and not just use NYM_ID?</span>
            <span class="comment">// The answer is because I&#39;m looking forward to a day soon when we don&#39;t passconst std::string &amp; in the first</span>
            <span class="comment">// place, and thus I can&#39;t always expect that variable will be there.</span>
            <span class="comment">//</span>
            <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(1, <span class="stringliteral">&quot;%s: NymboxHash not found, on client side, &quot;</span>
                <span class="stringliteral">&quot;for server %s and nym %s. (Returning &quot;</span><span class="stringliteral">&quot;.)\n&quot;</span>,
                __FUNCTION__, str_server_id.c_str(), strNymID.Get());
        }
        <span class="keywordflow">else</span> <span class="comment">// Success: the hash was there, for that Nym, for that server ID.</span>
        {
            <a class="code" href="class_o_t_string.html">OTString</a> strOutput(theNymboxHash);

            std::string pBuf = strOutput.Get();



            <span class="keywordflow">return</span> pBuf;
        }
    }

    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab057fc8ea20957ded3338f74e13d8338"></a><!-- doxytag: member="OTAPI_Exec::GetNym_OutboxHash" ref="ab057fc8ea20957ded3338f74e13d8338" args="(const std::string &amp;ACCOUNT_ID, const std::string &amp;NYM_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#ab057fc8ea20957ded3338f74e13d8338">OTAPI_Exec::GetNym_OutboxHash</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ACCOUNT_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>NYM_ID</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l02571">2571</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (ACCOUNT_ID.empty())         { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;ACCOUNT_ID&quot;</span>         ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (NYM_ID.empty())             { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;NYM_ID&quot;</span>             ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="comment">// -------------------------</span>
    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>    theNymID(NYM_ID);
    <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pNym = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a08144e29a333dd0e1087c4655e6981ee">GetNym</a>(theNymID, __FUNCTION__);

    <span class="keywordflow">if</span> (NULL != pNym)
    {
        <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>    theHash;
        <span class="keyword">const</span>
            std::string     str_acct_id(ACCOUNT_ID);
        <span class="keyword">const</span> <span class="keywordtype">bool</span> &amp;      bGothash = pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#aae9b25973d9bce353fb124bcebbb4fc6">GetOutboxHash</a>(str_acct_id, theHash); <span class="comment">// (theHash is output.)</span>

        <span class="keywordflow">if</span> (!bGothash)
        {
            <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strNymID(theNymID); <span class="comment">// You might ask, why create this string and not just use NYM_ID?</span>
            <span class="comment">// The answer is because I&#39;m looking forward to a day soon when we don&#39;t passconst std::string &amp; in the first</span>
            <span class="comment">// place, and thus I can&#39;t always expect that variable will be there.</span>
            <span class="comment">//</span>
            <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(1, <span class="stringliteral">&quot;%s: OutboxHash not found, on client side, &quot;</span>
                <span class="stringliteral">&quot;for account %s and nym %s. (Returning &quot;</span><span class="stringliteral">&quot;.)\n&quot;</span>,
                __FUNCTION__, str_acct_id.c_str(), strNymID.Get());
        }
        <span class="keywordflow">else</span> <span class="comment">// Success: the hash was there, for that Nym, for that server ID.</span>
        {
            <a class="code" href="class_o_t_string.html">OTString</a> strOutput(theHash);

            std::string pBuf = strOutput.Get();



            <span class="keywordflow">return</span> pBuf;
        }
    }

    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a016e019057540d0ed5535b6e76663fe9"></a><!-- doxytag: member="OTAPI_Exec::GetNym_OutmailContentsByIndex" ref="a016e019057540d0ed5535b6e76663fe9" args="(const std::string &amp;NYM_ID, const int32_t &amp;nIndex)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a016e019057540d0ed5535b6e76663fe9">OTAPI_Exec::GetNym_OutmailContentsByIndex</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>NYM_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int32_t &amp;&#160;</td>
          <td class="paramname"><em>nIndex</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l02814">2814</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (NYM_ID.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;NYM_ID&quot;</span>              ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (0 &gt; nIndex) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: nIndex is out of bounds (it&#39;s in the negative!)\n&quot;</span>, __FUNCTION__); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// -------------------------</span>
    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>    theNymID(NYM_ID);
    <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pNym = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a08144e29a333dd0e1087c4655e6981ee">GetNym</a>(theNymID, __FUNCTION__);
    <span class="keywordflow">if</span> (NULL == pNym) <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    <span class="comment">// -------------------------</span>
    <a class="code" href="class_o_t_message.html">OTMessage</a> * pMessage = pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#a126bbb8a3d356a0fd2118c95dfe6cbea">GetOutmailByIndex</a>(nIndex);
    <span class="keywordflow">if</span> (NULL != pMessage)
    {
        <span class="comment">// SENDER:    pMessage-&gt;m_strNymID</span>
        <span class="comment">// RECIPIENT: pMessage-&gt;m_strNymID2</span>
        <span class="comment">// MESSAGE:   pMessage-&gt;m_ascPayload (in an OTEnvelope)</span>
        <a class="code" href="class_o_t_string.html">OTString</a>    strMailContents;

        <span class="keywordflow">if</span> (pMessage-&gt;<a class="code" href="class_o_t_message.html#aa6729578b97f61804e91035a7709800a">m_ascPayload</a>.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>() &amp;&amp;
            pMessage-&gt;<a class="code" href="class_o_t_message.html#aa6729578b97f61804e91035a7709800a">m_ascPayload</a>.<a class="code" href="class_o_t_a_s_c_i_i_armor.html#ab39b6cae69c14149716e5ce7a6f0bb0f">GetString</a>(strMailContents))
        {
            std::string pBuf = strMailContents.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();
            <span class="keywordflow">return</span> pBuf;
        }
    }
    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a4c112f835bc906c63ce9103ca6b64d94"></a><!-- doxytag: member="OTAPI_Exec::GetNym_OutmailCount" ref="a4c112f835bc906c63ce9103ca6b64d94" args="(const std::string &amp;NYM_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_a_p_i___exec.html#a4c112f835bc906c63ce9103ca6b64d94">OTAPI_Exec::GetNym_OutmailCount</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>NYM_ID</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l02801">2801</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (NYM_ID.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;NYM_ID&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// -------------------------</span>
    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>    theNymID(NYM_ID);
    <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pNym = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a08144e29a333dd0e1087c4655e6981ee">GetNym</a>(theNymID, __FUNCTION__);
    <span class="keywordflow">if</span> (NULL == pNym) <span class="keywordflow">return</span> 0;
    <span class="comment">// -------------------------</span>
    <span class="keywordflow">return</span> pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#a746ab3941be5529f11a772a004e17b69" title="return the number of mail items available for this Nym.">GetOutmailCount</a>();
}
</pre></div>
</div>
</div>
<a class="anchor" id="a53fa11aa2ee5fbda492529980cf0f8e8"></a><!-- doxytag: member="OTAPI_Exec::GetNym_OutmailRecipientIDByIndex" ref="a53fa11aa2ee5fbda492529980cf0f8e8" args="(const std::string &amp;NYM_ID, const int32_t &amp;nIndex)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a53fa11aa2ee5fbda492529980cf0f8e8">OTAPI_Exec::GetNym_OutmailRecipientIDByIndex</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>NYM_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int32_t &amp;&#160;</td>
          <td class="paramname"><em>nIndex</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l02845">2845</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (NYM_ID.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;NYM_ID&quot;</span>                  ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (0 &gt; nIndex)     { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: nIndex is out of bounds (it&#39;s in the negative!)\n&quot;</span>, __FUNCTION__); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// -------------------------</span>
    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>    theNymID(NYM_ID);
    <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pNym = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a08144e29a333dd0e1087c4655e6981ee">GetNym</a>(theNymID, __FUNCTION__);
    <span class="keywordflow">if</span> (NULL == pNym) <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    <span class="comment">// -------------------------</span>
    <a class="code" href="class_o_t_message.html">OTMessage</a> * pMessage = pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#a126bbb8a3d356a0fd2118c95dfe6cbea">GetOutmailByIndex</a>(nIndex);
    <span class="keywordflow">if</span> (NULL != pMessage)
    {
        <span class="comment">// SENDER:    pMessage-&gt;m_strNymID</span>
        <span class="comment">// SERVER:    pMessage-&gt;m_strServerID</span>
        <span class="comment">// RECIPIENT: pMessage-&gt;m_strNymID2</span>
        <span class="comment">// MESSAGE:   pMessage-&gt;m_ascPayload</span>

        std::string pBuf = pMessage-&gt;<a class="code" href="class_o_t_message.html#a724247e90624bbc678fb067beeba58b9">m_strNymID2</a>.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();
        <span class="keywordflow">return</span> pBuf;
    }
    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a7780a360d9669ed6732f7f42c0a4f7c7"></a><!-- doxytag: member="OTAPI_Exec::GetNym_OutmailServerIDByIndex" ref="a7780a360d9669ed6732f7f42c0a4f7c7" args="(const std::string &amp;NYM_ID, const int32_t &amp;nIndex)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a7780a360d9669ed6732f7f42c0a4f7c7">OTAPI_Exec::GetNym_OutmailServerIDByIndex</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>NYM_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int32_t &amp;&#160;</td>
          <td class="paramname"><em>nIndex</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l02872">2872</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (NYM_ID.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;NYM_ID&quot;</span>                  ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (0 &gt; nIndex)     { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: nIndex is out of bounds (it&#39;s in the negative!)\n&quot;</span>, __FUNCTION__); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// -------------------------</span>
    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>    theNymID(NYM_ID);
    <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pNym = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a08144e29a333dd0e1087c4655e6981ee">GetNym</a>(theNymID, __FUNCTION__);
    <span class="keywordflow">if</span> (NULL == pNym) <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    <span class="comment">// -------------------------</span>
    <a class="code" href="class_o_t_message.html">OTMessage</a> * pMessage = pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#a126bbb8a3d356a0fd2118c95dfe6cbea">GetOutmailByIndex</a>(nIndex);

    <span class="keywordflow">if</span> (NULL != pMessage)
    {
        <span class="comment">// SENDER:    pMessage-&gt;m_strNymID</span>
        <span class="comment">// SERVER:    pMessage-&gt;m_strServerID</span>
        <span class="comment">// RECIPIENT: pMessage-&gt;m_strNymID2</span>
        <span class="comment">// MESSAGE:   pMessage-&gt;m_ascPayload</span>

        std::string pBuf = pMessage-&gt;<a class="code" href="class_o_t_message.html#ae5304f18eb276ecd0c5370aa41817926">m_strServerID</a>.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();
        <span class="keywordflow">return</span> pBuf;

    }
    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a71f250e1f40d340680af964f156acea3"></a><!-- doxytag: member="OTAPI_Exec::GetNym_OutpaymentsContentsByIndex" ref="a71f250e1f40d340680af964f156acea3" args="(const std::string &amp;NYM_ID, const int32_t &amp;nIndex)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a71f250e1f40d340680af964f156acea3">OTAPI_Exec::GetNym_OutpaymentsContentsByIndex</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>NYM_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int32_t &amp;&#160;</td>
          <td class="paramname"><em>nIndex</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l02999">2999</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (NYM_ID.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;NYM_ID&quot;</span> );                  <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (0 &gt; nIndex)     { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: nIndex is out of bounds (it&#39;s in the negative!)\n&quot;</span>, __FUNCTION__); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// -------------------------</span>
    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>    theNymID(NYM_ID);
    <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pNym = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a08144e29a333dd0e1087c4655e6981ee">GetNym</a>(theNymID, __FUNCTION__);
    <span class="keywordflow">if</span> (NULL == pNym) <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    <span class="comment">// -------------------------</span>
    <a class="code" href="class_o_t_message.html">OTMessage</a> * pMessage = pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#acb808e89943f1f2d0009825a3fbcb34f">GetOutpaymentsByIndex</a>(nIndex);
    <span class="keywordflow">if</span> (NULL != pMessage)
    {
        <span class="comment">// SENDER:     pMessage-&gt;m_strNymID</span>
        <span class="comment">// RECIPIENT:  pMessage-&gt;m_strNymID2</span>
        <span class="comment">// INSTRUMENT: pMessage-&gt;m_ascPayload (in an OTEnvelope)</span>
        <a class="code" href="class_o_t_string.html">OTString</a>    strPayment;

        <span class="comment">// There isn&#39;t any encrypted envelope this time, since it&#39;s my outPayments box.</span>
        <span class="comment">//</span>
        <span class="keywordflow">if</span> (pMessage-&gt;<a class="code" href="class_o_t_message.html#aa6729578b97f61804e91035a7709800a">m_ascPayload</a>.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>() &amp;&amp;
            pMessage-&gt;<a class="code" href="class_o_t_message.html#aa6729578b97f61804e91035a7709800a">m_ascPayload</a>.<a class="code" href="class_o_t_a_s_c_i_i_armor.html#ab39b6cae69c14149716e5ce7a6f0bb0f">GetString</a>(strPayment) &amp;&amp;
            strPayment.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>())
        {
            <a class="code" href="class_o_t_payment.html">OTPayment</a> thePayment(strPayment);
            <span class="comment">// ---------------------------------------------</span>
            <span class="keywordflow">if</span> (thePayment.IsValid())
            {
                std::string pBuf = strPayment.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();
                <span class="keywordflow">return</span> pBuf;
            }
        }
    }
    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="adc2e734d3287c7786115939baba7ea0e"></a><!-- doxytag: member="OTAPI_Exec::GetNym_OutpaymentsCount" ref="adc2e734d3287c7786115939baba7ea0e" args="(const std::string &amp;NYM_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_a_p_i___exec.html#adc2e734d3287c7786115939baba7ea0e">OTAPI_Exec::GetNym_OutpaymentsCount</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>NYM_ID</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l02985">2985</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (NYM_ID.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;NYM_ID&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// -------------------------</span>
    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>    theNymID(NYM_ID);
    <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pNym = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a08144e29a333dd0e1087c4655e6981ee">GetNym</a>(theNymID, __FUNCTION__);
    <span class="keywordflow">if</span> (NULL == pNym) <span class="keywordflow">return</span> 0;
    <span class="comment">// -------------------------</span>
    <span class="keywordflow">return</span> pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#a66289f0575ef0b91cb5fefa4483f0d3e" title="return the number of payments items available for this Nym.">GetOutpaymentsCount</a>();
}
</pre></div>
</div>
</div>
<a class="anchor" id="a0d70d2ff1a18966fad6fd7169982d2bb"></a><!-- doxytag: member="OTAPI_Exec::GetNym_OutpaymentsRecipientIDByIndex" ref="a0d70d2ff1a18966fad6fd7169982d2bb" args="(const std::string &amp;NYM_ID, const int32_t &amp;nIndex)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a0d70d2ff1a18966fad6fd7169982d2bb">OTAPI_Exec::GetNym_OutpaymentsRecipientIDByIndex</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>NYM_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int32_t &amp;&#160;</td>
          <td class="paramname"><em>nIndex</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l03038">3038</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (NYM_ID.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;NYM_ID&quot;</span> );              <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (0 &gt; nIndex) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: nIndex is out of bounds (it&#39;s in the negative!)\n&quot;</span>, __FUNCTION__); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// -------------------------</span>
    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>    theNymID(NYM_ID);
    <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pNym = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a08144e29a333dd0e1087c4655e6981ee">GetNym</a>(theNymID, __FUNCTION__);
    <span class="keywordflow">if</span> (NULL == pNym) <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    <span class="comment">// -------------------------</span>
    <a class="code" href="class_o_t_message.html">OTMessage</a> * pMessage = pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#acb808e89943f1f2d0009825a3fbcb34f">GetOutpaymentsByIndex</a>(nIndex);
    <span class="keywordflow">if</span> (NULL != pMessage)
    {
        <span class="comment">// SENDER:    pMessage-&gt;m_strNymID</span>
        <span class="comment">// SERVER:    pMessage-&gt;m_strServerID</span>
        <span class="comment">// RECIPIENT: pMessage-&gt;m_strNymID2</span>
        <span class="comment">// MESSAGE:   pMessage-&gt;m_ascPayload</span>

        std::string pBuf = pMessage-&gt;<a class="code" href="class_o_t_message.html#a724247e90624bbc678fb067beeba58b9">m_strNymID2</a>.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();
        <span class="keywordflow">return</span> pBuf;
    }
    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="abd6ec4a939ea69b5e052c03f0d2b5711"></a><!-- doxytag: member="OTAPI_Exec::GetNym_OutpaymentsServerIDByIndex" ref="abd6ec4a939ea69b5e052c03f0d2b5711" args="(const std::string &amp;NYM_ID, const int32_t &amp;nIndex)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#abd6ec4a939ea69b5e052c03f0d2b5711">OTAPI_Exec::GetNym_OutpaymentsServerIDByIndex</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>NYM_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int32_t &amp;&#160;</td>
          <td class="paramname"><em>nIndex</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l03065">3065</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (NYM_ID.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;NYM_ID&quot;</span> );                  <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (0 &gt; nIndex)     { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: nIndex is out of bounds (it&#39;s in the negative!)\n&quot;</span>, __FUNCTION__); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// -------------------------</span>
    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>  theNymID(NYM_ID);
    <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pNym = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a08144e29a333dd0e1087c4655e6981ee">GetNym</a>(theNymID, __FUNCTION__);
    <span class="keywordflow">if</span> (NULL == pNym) <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    <span class="comment">// -------------------------</span>
    <a class="code" href="class_o_t_message.html">OTMessage</a> * pMessage = pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#acb808e89943f1f2d0009825a3fbcb34f">GetOutpaymentsByIndex</a>(nIndex);

    <span class="keywordflow">if</span> (NULL != pMessage)
    {
        <span class="comment">// SENDER:    pMessage-&gt;m_strNymID</span>
        <span class="comment">// SERVER:    pMessage-&gt;m_strServerID</span>
        <span class="comment">// RECIPIENT: pMessage-&gt;m_strNymID2</span>
        <span class="comment">// MESSAGE:   pMessage-&gt;m_ascPayload</span>

        int32_t bServerIdLength = pMessage-&gt;<a class="code" href="class_o_t_message.html#ae5304f18eb276ecd0c5370aa41817926">m_strServerID</a>.<a class="code" href="class_o_t_string.html#a640392dd17a786dab643dbfc7e5a8672">GetLength</a>();
        <span class="keywordflow">if</span> (1 &gt;= bServerIdLength)
        {
            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: m_strServerID Length is 1 or less!\n&quot;</span>, __FUNCTION__);
            <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>;
        }

        std::string pBuf = pMessage-&gt;<a class="code" href="class_o_t_message.html#ae5304f18eb276ecd0c5370aa41817926">m_strServerID</a>.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();
        <span class="keywordflow">return</span> pBuf;
    }
    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a0cbf45897dca8d8959dba18527c5aacb"></a><!-- doxytag: member="OTAPI_Exec::GetNym_RecentHash" ref="a0cbf45897dca8d8959dba18527c5aacb" args="(const std::string &amp;SERVER_ID, const std::string &amp;NYM_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a0cbf45897dca8d8959dba18527c5aacb">OTAPI_Exec::GetNym_RecentHash</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>NYM_ID</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l02488">2488</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (NYM_ID.empty())             { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;NYM_ID&quot;</span>             ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (SERVER_ID.empty())          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="comment">// -------------------------</span>
    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>    theNymID(NYM_ID);
    <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pNym = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a08144e29a333dd0e1087c4655e6981ee">GetNym</a>(theNymID, __FUNCTION__);

    <span class="keywordflow">if</span> (NULL != pNym)
    {
        <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>    theHash;
        <span class="keyword">const</span>
            std::string     str_server_id(SERVER_ID);
        <span class="keyword">const</span> <span class="keywordtype">bool</span> &amp;      bGothash = pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#a9222447403d249269bcbc3a4cab5de02">GetRecentHash</a>(str_server_id, theHash); <span class="comment">// (theHash is output.)</span>

        <span class="keywordflow">if</span> (!bGothash)
        {
            <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strNymID(theNymID); <span class="comment">// You might ask, why create this string and not just use NYM_ID?</span>
            <span class="comment">// The answer is because I&#39;m looking forward to a day soon when we don&#39;t passconst std::string &amp; in the first</span>
            <span class="comment">// place, and thus I can&#39;t always expect that variable will be there.</span>
            <span class="comment">//</span>
            <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(1, <span class="stringliteral">&quot;%s: RecentHash not found, on client side, &quot;</span>
                <span class="stringliteral">&quot;for server %s and nym %s. (Returning &quot;</span><span class="stringliteral">&quot;.)\n&quot;</span>,
                __FUNCTION__, str_server_id.c_str(), strNymID.Get());
        }
        <span class="keywordflow">else</span> <span class="comment">// Success: the hash was there, for that Nym, for that server ID.</span>
        {
            <a class="code" href="class_o_t_string.html">OTString</a> strOutput(theHash);

            std::string pBuf = strOutput.Get();



            <span class="keywordflow">return</span> pBuf;
        }
    }

    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="abecce474328d66d0d14d6f207c6f16b5"></a><!-- doxytag: member="OTAPI_Exec::GetNym_RevokedCredContents" ref="abecce474328d66d0d14d6f207c6f16b5" args="(const std::string &amp;NYM_ID, const std::string &amp;CREDENTIAL_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#abecce474328d66d0d14d6f207c6f16b5">OTAPI_Exec::GetNym_RevokedCredContents</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>NYM_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>CREDENTIAL_ID</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l00766">766</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (NYM_ID.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: NULL %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;NYM_ID&quot;</span>); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// ---------------------------------------------------------</span>
    <a class="code" href="class_o_t_password_data.html">OTPasswordData</a>   thePWData(<a class="code" href="_o_t_callback_8hpp.html#aec99f1909896090ab9b64ce848f50c6a">OT_PW_DISPLAY</a>);
    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>     nym_id(NYM_ID);
    <span class="comment">// This tries to get, then tries to load as public, then tries to load as private.</span>
    <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a>    * pNym = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#aa09f3af30f4bc451d56c6948d536922f">GetOrLoadNym</a>(nym_id, <span class="keyword">false</span>, __FUNCTION__, &amp;thePWData);
    <span class="keywordflow">if</span> (NULL == pNym) <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    <span class="comment">// ---------------------------------------------------------</span>
    std::string str_return;
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strCredID(CREDENTIAL_ID);
    <span class="keyword">const</span> <a class="code" href="class_o_t_credential.html">OTCredential</a> * pCredential = pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#a34722ae73d2b67e12c92ac770f7dd6f1">GetRevokedCredential</a>(strCredID);

    <span class="keywordflow">if</span> (NULL != pCredential) <span class="comment">// Found the (revoked) master credential...</span>
        str_return = pCredential-&gt;<a class="code" href="class_o_t_credential.html#ab3e65e4abc6a9f2a04047044682329c2">GetPubCredential</a>().<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();
    <span class="comment">// ---------------------------------------------------------</span>
    <span class="keywordflow">return</span> str_return;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a0d96420d6faaf80cd76c93a2334b97ec"></a><!-- doxytag: member="OTAPI_Exec::GetNym_RevokedCredCount" ref="a0d96420d6faaf80cd76c93a2334b97ec" args="(const std::string &amp;NYM_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_a_p_i___exec.html#a0d96420d6faaf80cd76c93a2334b97ec">OTAPI_Exec::GetNym_RevokedCredCount</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>NYM_ID</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l00728">728</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (NYM_ID.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: NULL %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;NYM_ID&quot;</span>); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// ---------------------------------------------------------</span>
    <a class="code" href="class_o_t_password_data.html">OTPasswordData</a>   thePWData(<a class="code" href="_o_t_callback_8hpp.html#aec99f1909896090ab9b64ce848f50c6a">OT_PW_DISPLAY</a>);
    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>     nym_id(NYM_ID);
    <span class="comment">// This tries to get, then tries to load as public, then tries to load as private.</span>
    <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a>    * pNym = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#aa09f3af30f4bc451d56c6948d536922f">GetOrLoadNym</a>(nym_id, <span class="keyword">false</span>, __FUNCTION__, &amp;thePWData);
    <span class="keywordflow">if</span> (NULL == pNym) <span class="keywordflow">return</span> (-1);
    <span class="comment">// ---------------------------------------------------------</span>
    <span class="keyword">const</span> int32_t nReturnValue = <span class="keyword">static_cast&lt;</span>int32_t<span class="keyword">&gt;</span>(pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#a66d28c9b0919dac455167326af405371">GetRevokedCredentialCount</a>());
    <span class="keywordflow">return</span> nReturnValue;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a9b7ff670be66f5bf5bbff7db78b6ebf2"></a><!-- doxytag: member="OTAPI_Exec::GetNym_RevokedCredID" ref="a9b7ff670be66f5bf5bbff7db78b6ebf2" args="(const std::string &amp;NYM_ID, const int32_t &amp;nIndex)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a9b7ff670be66f5bf5bbff7db78b6ebf2">OTAPI_Exec::GetNym_RevokedCredID</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>NYM_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int32_t &amp;&#160;</td>
          <td class="paramname"><em>nIndex</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l00743">743</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (NYM_ID.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: NULL %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;NYM_ID&quot;</span>); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// ---------------------------------------------------------</span>
    <a class="code" href="class_o_t_password_data.html">OTPasswordData</a>   thePWData(<a class="code" href="_o_t_callback_8hpp.html#aec99f1909896090ab9b64ce848f50c6a">OT_PW_DISPLAY</a>);
    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>     nym_id(NYM_ID);
    <span class="comment">// This tries to get, then tries to load as public, then tries to load as private.</span>
    <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a>    * pNym = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#aa09f3af30f4bc451d56c6948d536922f">GetOrLoadNym</a>(nym_id, <span class="keyword">false</span>, __FUNCTION__, &amp;thePWData);
    <span class="keywordflow">if</span> (NULL == pNym) <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    <span class="comment">// ---------------------------------------------------------</span>
    std::string str_return;
    <span class="keyword">const</span> <a class="code" href="class_o_t_credential.html">OTCredential</a> * pCredential = pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#a8b367e9ec526a0621be52bd5569f3b13">GetRevokedCredentialByIndex</a>(static_cast&lt;const int32_t&gt;(nIndex));

    <span class="keywordflow">if</span> (NULL != pCredential)
    {
        str_return = pCredential-&gt;<a class="code" href="class_o_t_credential.html#a1e99eeeb4d701f2ea9b56a1201a57680">GetMasterCredID</a>().<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();
    }
    <span class="comment">// ---------------------------------------------------------</span>
    <span class="keywordflow">return</span> str_return;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a772c6fa41664d32d56b0e375487ec975"></a><!-- doxytag: member="OTAPI_Exec::GetNym_SourceForID" ref="a772c6fa41664d32d56b0e375487ec975" args="(const std::string &amp;NYM_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a772c6fa41664d32d56b0e375487ec975">OTAPI_Exec::GetNym_SourceForID</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>NYM_ID</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l00641">641</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (NYM_ID.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: NULL %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;NYM_ID&quot;</span>); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// ---------------------------------------------------------</span>
    <a class="code" href="class_o_t_password_data.html">OTPasswordData</a>   thePWData(<a class="code" href="_o_t_callback_8hpp.html#aec99f1909896090ab9b64ce848f50c6a">OT_PW_DISPLAY</a>);
    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>     nym_id(NYM_ID);
    <span class="comment">// This tries to get, then tries to load as public, then tries to load as private.</span>
    <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a>    * pNym = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#aa09f3af30f4bc451d56c6948d536922f">GetOrLoadNym</a>(nym_id, <span class="keyword">false</span>, __FUNCTION__, &amp;thePWData);
    <span class="keywordflow">if</span> (NULL == pNym) <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    <span class="comment">// ---------------------------------------------------------</span>
    <span class="keyword">const</span> std::string str_return(pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#ab76ac495443316ded275e7bb281388d2">GetNymIDSource</a>().<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
    <span class="keywordflow">return</span> str_return;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa84ff0c163f6501ea7623a4dd02cdab8"></a><!-- doxytag: member="OTAPI_Exec::GetNym_Stats" ref="aa84ff0c163f6501ea7623a4dd02cdab8" args="(const std::string &amp;NYM_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#aa84ff0c163f6501ea7623a4dd02cdab8">OTAPI_Exec::GetNym_Stats</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>NYM_ID</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l02416">2416</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (NYM_ID.empty())             { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;NYM_ID&quot;</span>             ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="comment">// -------------------------</span>
    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>    theNymID(NYM_ID);
    <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pNym = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a08144e29a333dd0e1087c4655e6981ee">GetNym</a>(theNymID, __FUNCTION__);

    <span class="keywordflow">if</span> (NULL != pNym)
    {
        <a class="code" href="class_o_t_string.html">OTString</a> strOutput;

        pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#aaded4e78ed9fa9960ee67a391c793b9e">DisplayStatistics</a>(strOutput);

        std::string pBuf = strOutput.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();



        <span class="keywordflow">return</span> pBuf;
    }

    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a4434157ca86a4bd56620f3cc68ccbde0"></a><!-- doxytag: member="OTAPI_Exec::GetNym_SubCredentialContents" ref="a4434157ca86a4bd56620f3cc68ccbde0" args="(const std::string &amp;NYM_ID, const std::string &amp;MASTER_CRED_ID, const std::string &amp;SUB_CRED_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a4434157ca86a4bd56620f3cc68ccbde0">OTAPI_Exec::GetNym_SubCredentialContents</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>NYM_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>MASTER_CRED_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SUB_CRED_ID</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l00838">838</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (NYM_ID.empty())         { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: NULL %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;NYM_ID&quot;</span>);         <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (MASTER_CRED_ID.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: NULL %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;MASTER_CRED_ID&quot;</span>); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (SUB_CRED_ID.empty())    { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: NULL %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SUB_CRED_ID&quot;</span>);    <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// ---------------------------------------------------------</span>
    <a class="code" href="class_o_t_password_data.html">OTPasswordData</a>   thePWData(<a class="code" href="_o_t_callback_8hpp.html#aec99f1909896090ab9b64ce848f50c6a">OT_PW_DISPLAY</a>);
    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>     nym_id(NYM_ID);
    <span class="comment">// This tries to get, then tries to load as public, then tries to load as private.</span>
    <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a>    * pNym = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#aa09f3af30f4bc451d56c6948d536922f">GetOrLoadNym</a>(nym_id, <span class="keyword">false</span>, __FUNCTION__, &amp;thePWData);
    <span class="keywordflow">if</span> (NULL == pNym) <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    <span class="comment">// ---------------------------------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strCredID(MASTER_CRED_ID);
    <a class="code" href="class_o_t_credential.html">OTCredential</a> * pCredential = pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#a94f8a8812ceae9a1f003aa79bfda73a5">GetMasterCredential</a>(strCredID);

    <span class="keywordflow">if</span> (NULL != pCredential) <span class="comment">// Found the master credential...</span>
    {
        <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strSubID(SUB_CRED_ID);
        <span class="keyword">const</span> <a class="code" href="class_o_t_subcredential.html">OTSubcredential</a> * pSub = pCredential-&gt;<a class="code" href="class_o_t_credential.html#a194a0401b7e78a94f298897138004e3e">GetSubcredential</a>(strSubID);

        <span class="keywordflow">if</span> (NULL != pSub)
            <span class="keywordflow">return</span> pSub-&gt;<a class="code" href="class_o_t_subcredential.html#af10db6cd37a86780acbcc0bf1e6101a5">GetPubCredential</a>().<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();
    }
    <span class="comment">// --------------</span>
    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a8ff237ded0d5329cda022ff0570092eb"></a><!-- doxytag: member="OTAPI_Exec::GetNym_SubcredentialCount" ref="a8ff237ded0d5329cda022ff0570092eb" args="(const std::string &amp;NYM_ID, const std::string &amp;MASTER_CRED_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_a_p_i___exec.html#a8ff237ded0d5329cda022ff0570092eb">OTAPI_Exec::GetNym_SubcredentialCount</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>NYM_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>MASTER_CRED_ID</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l00788">788</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (NYM_ID.empty())         { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: NULL %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;NYM_ID&quot;</span>);         <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (MASTER_CRED_ID.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: NULL %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;MASTER_CRED_ID&quot;</span>); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// ---------------------------------------------------------</span>
    <a class="code" href="class_o_t_password_data.html">OTPasswordData</a>   thePWData(<a class="code" href="_o_t_callback_8hpp.html#aec99f1909896090ab9b64ce848f50c6a">OT_PW_DISPLAY</a>);
    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>     nym_id(NYM_ID);
    <span class="comment">// This tries to get, then tries to load as public, then tries to load as private.</span>
    <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a>    * pNym = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#aa09f3af30f4bc451d56c6948d536922f">GetOrLoadNym</a>(nym_id, <span class="keyword">false</span>, __FUNCTION__, &amp;thePWData);
    <span class="keywordflow">if</span> (NULL == pNym) <span class="keywordflow">return</span> (-1);
    <span class="comment">// ---------------------------------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strCredID(MASTER_CRED_ID);
    <a class="code" href="class_o_t_credential.html">OTCredential</a> * pCredential = pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#a94f8a8812ceae9a1f003aa79bfda73a5">GetMasterCredential</a>(strCredID);

    <span class="keywordflow">if</span> (NULL != pCredential) <span class="comment">// Found the master credential...</span>
    {
        <span class="keyword">const</span> <span class="keywordtype">size_t</span> nSubCredCount = pCredential-&gt;<a class="code" href="class_o_t_credential.html#a03f9d76360128e0985ce9ab8fc3e9fc4">GetSubcredentialCount</a>();

        <span class="keyword">const</span> int32_t nReturnValue = <span class="keyword">static_cast&lt;</span><span class="keyword">const </span>int32_t<span class="keyword">&gt;</span>(nSubCredCount);
        <span class="keywordflow">return</span> nReturnValue;
    }

    <span class="keywordflow">return</span> (-1);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a8beb45adf3c81242a23a990d2dad8425"></a><!-- doxytag: member="OTAPI_Exec::GetNym_SubCredentialID" ref="a8beb45adf3c81242a23a990d2dad8425" args="(const std::string &amp;NYM_ID, const std::string &amp;MASTER_CRED_ID, const int32_t &amp;nIndex)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a8beb45adf3c81242a23a990d2dad8425">OTAPI_Exec::GetNym_SubCredentialID</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>NYM_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>MASTER_CRED_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int32_t &amp;&#160;</td>
          <td class="paramname"><em>nIndex</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l00815">815</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (NYM_ID.empty())         { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: NULL %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;NYM_ID&quot;</span>);         <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (MASTER_CRED_ID.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: NULL %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;MASTER_CRED_ID&quot;</span>); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// ---------------------------------------------------------</span>
    <a class="code" href="class_o_t_password_data.html">OTPasswordData</a>   thePWData(<a class="code" href="_o_t_callback_8hpp.html#aec99f1909896090ab9b64ce848f50c6a">OT_PW_DISPLAY</a>);
    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>     nym_id(NYM_ID);
    <span class="comment">// This tries to get, then tries to load as public, then tries to load as private.</span>
    <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a>    * pNym = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#aa09f3af30f4bc451d56c6948d536922f">GetOrLoadNym</a>(nym_id, <span class="keyword">false</span>, __FUNCTION__, &amp;thePWData);
    <span class="keywordflow">if</span> (NULL == pNym) <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    <span class="comment">// ---------------------------------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strCredID(MASTER_CRED_ID);
    <a class="code" href="class_o_t_credential.html">OTCredential</a> * pCredential = pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#a94f8a8812ceae9a1f003aa79bfda73a5">GetMasterCredential</a>(strCredID);

    <span class="keywordflow">if</span> (NULL != pCredential) <span class="comment">// Found the master credential...</span>
        <span class="keywordflow">return</span> pCredential-&gt;<a class="code" href="class_o_t_credential.html#a9767fa303af5c9a9e9a742d9f72ef834">GetSubcredentialIDByIndex</a>(static_cast&lt;const int32_t&gt;(nIndex));

    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa429be08bd7a15ae954a5fbb916a16af"></a><!-- doxytag: member="OTAPI_Exec::GetNym_TransactionNumCount" ref="aa429be08bd7a15ae954a5fbb916a16af" args="(const std::string &amp;SERVER_ID, const std::string &amp;NYM_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_a_p_i___exec.html#aa429be08bd7a15ae954a5fbb916a16af">OTAPI_Exec::GetNym_TransactionNumCount</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>NYM_ID</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>---------------------------------------------------------- GET NYM TRANSACTION NUM COUNT How many transaction numbers does the Nym have (for a given server?)</p>
<p>This function returns the count of numbers available. If 0, then no transactions will work until you call <a class="el" href="class_o_t_a_p_i___exec.html#a89358c9cc2fa0dcfff007c3bcbc2ed5c">getTransactionNumber()</a> to replenish your Nym's supply for that ServerID...</p>
<p>Returns a count (0 through N numbers available), or -1 for error (no nym found.) </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l03883">3883</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty())  { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (NYM_ID.empty())     { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;NYM_ID&quot;</span>    ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>    theServerID(SERVER_ID);
    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>    theNymID(NYM_ID);

    int32_t nReturnValue = 0;
    <span class="comment">// -------------------------</span>
    <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pNym = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a08144e29a333dd0e1087c4655e6981ee">GetNym</a>(theNymID, __FUNCTION__);

    <span class="keywordflow">if</span> (NULL != pNym)
        nReturnValue = pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#adee7eef0a51e8e94522c43ac898c2308">GetTransactionNumCount</a>(theServerID);
    <span class="keywordflow">else</span>
        nReturnValue = -1;

    <span class="keywordflow">return</span> nReturnValue;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a69bce6a3205dbd153104c79e0b9f0202"></a><!-- doxytag: member="OTAPI_Exec::getNymbox" ref="a69bce6a3205dbd153104c79e0b9f0202" args="(const std::string &amp;SERVER_ID, const std::string &amp;USER_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_a_p_i___exec.html#a69bce6a3205dbd153104c79e0b9f0202">OTAPI_Exec::getNymbox</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l13007">13007</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty())          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID.empty())            { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>            ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theServerID(SERVER_ID), theUserID(USER_ID);

    <span class="keywordflow">return</span> <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a2536b41070f3a165345ae598381ddfdd">getNymbox</a>(theServerID, theUserID);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a363b1cd3cb27fce58e6d113641fb65bb"></a><!-- doxytag: member="OTAPI_Exec::GetNymCount" ref="a363b1cd3cb27fce58e6d113641fb65bb" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_a_p_i___exec.html#a363b1cd3cb27fce58e6d113641fb65bb">OTAPI_Exec::GetNymCount</a> </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l01433">1433</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a267d362ca74da9e01ab8e956da42b386">GetNymCount</a>();
}
</pre></div>
</div>
</div>
<a class="anchor" id="af13f8f83d370e8b18ad2de97181a5dfa"></a><!-- doxytag: member="OTAPI_Exec::getOutbox" ref="af13f8f83d370e8b18ad2de97181a5dfa" args="(const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ACCT_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_a_p_i___exec.html#af13f8f83d370e8b18ad2de97181a5dfa">OTAPI_Exec::getOutbox</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ACCT_ID</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l13027">13027</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty())          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID.empty())            { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>            ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (ACCT_ID.empty())            { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;ACCT_ID&quot;</span>            ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theServerID(SERVER_ID), theUserID(USER_ID), theAcctID(ACCT_ID);

    <span class="keywordflow">return</span> <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#afca788fa27e0d4988a5c09586fe23237">getOutbox</a>(theServerID, theUserID, theAcctID);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a57eb0708df353538dc4a33b031ecc07c"></a><!-- doxytag: member="OTAPI_Exec::getRequest" ref="a57eb0708df353538dc4a33b031ecc07c" args="(const std::string &amp;SERVER_ID, const std::string &amp;USER_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_a_p_i___exec.html#a57eb0708df353538dc4a33b031ecc07c">OTAPI_Exec::getRequest</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>GET REQUEST NUMBER</p>
<p>Nearly every message to the server needs to have the current "Request
	Number" attached to it. This is a number that, for each user, starts at 0, and increments with each command. Usually, the number simply increments on both sides, and there is no need to communicate it.</p>
<p>BUT SOMETIMES the request number GOES OUT OF SYNC... When this happen, none of your commands will work anymore!</p>
<p>To fix it, just call this function.</p>
<p>After you call it, it will automatically synchronize your wallet with the request number on the server side, and your commands will start working again.</p>
<p>Without understanding this simple concept, NONE of your messages will go through! This mechanism prevents an attack from intercepting a message and sending it multiple times. </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l12414">12414</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID.empty())   { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>   ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theServerID(SERVER_ID), theUserID(USER_ID);

    <span class="keywordflow">return</span> <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a1dfa9ba3149336b36e68662e86265b6e">getRequest</a>(theServerID, theUserID);
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa9537e99a39bb621775e57b8be07fc02"></a><!-- doxytag: member="OTAPI_Exec::GetSentMessage" ref="aa9537e99a39bb621775e57b8be07fc02" args="(const int64_t &amp;REQUEST_NUMBER, const std::string &amp;SERVER_ID, const std::string &amp;USER_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#aa9537e99a39bb621775e57b8be07fc02">OTAPI_Exec::GetSentMessage</a> </td>
          <td>(</td>
          <td class="paramtype">const int64_t &amp;&#160;</td>
          <td class="paramname"><em>REQUEST_NUMBER</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l13560">13560</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (0 &gt; REQUEST_NUMBER)         { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Negative: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;REQUEST_NUMBER&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (SERVER_ID.empty())          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>,    __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>       ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID.empty())            { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>,    __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>         ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// ------------------------------------------------</span>
    <span class="keyword">const</span> int64_t          lRequestNum = REQUEST_NUMBER;
    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>  theServerID(SERVER_ID),
        theUserID(USER_ID);
    <span class="comment">// ------------------------------------------------</span>
    <a class="code" href="class_o_t_message.html">OTMessage</a> * pMsg = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a23edd3f777f72244fa6281911d431e08">GetSentMessage</a>(static_cast&lt;int64_t&gt;(lRequestNum), theServerID, theUserID);
    <span class="comment">//  OTCleanup&lt;OTMessage&gt; theAngel(pMsg);    // caller NOT responsible to delete.</span>

    <span class="keywordflow">if</span> (NULL == pMsg) <span class="comment">// The message wasn&#39;t found with that request number.</span>
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(1, <span class="stringliteral">&quot;%s: Message not found with request number %lld, sorry.\n&quot;</span>, __FUNCTION__, lRequestNum);
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    }
    <span class="comment">// ------------------------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strOutput(*pMsg); <span class="comment">// No need to cleanup the message since it&#39;s still in the buffer until explicitly removed.</span>

    std::string pBuf = strOutput.Get();

    <span class="keywordflow">return</span> pBuf;
}
</pre></div>
</div>
</div>
<a class="anchor" id="adf0392d6766f66b52a2912279dbc9595"></a><!-- doxytag: member="OTAPI_Exec::GetServer_Contract" ref="adf0392d6766f66b52a2912279dbc9595" args="(const std::string &amp;SERVER_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#adf0392d6766f66b52a2912279dbc9595">OTAPI_Exec::GetServer_Contract</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l01233">1233</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// -----------------------------------------------------</span>
    <span class="keywordtype">bool</span> bIsInitialized = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#af11b60d083c4a8e1e68a59a0824899d4">IsInitialized</a>();

    <span class="keywordflow">if</span> (!bIsInitialized)   { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Not initialized; call OT_API::Init first.\n&quot;</span>,__FUNCTION__); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (SERVER_ID.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>        ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// -----------------------------------------------------</span>

    <span class="comment">// --------------------------------------------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theServerID(SERVER_ID);
    <a class="code" href="class_o_t_server_contract.html">OTServerContract</a> * pServer = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#afa4e2d39d29061b609d81f094c2ca25c">GetServer</a>(theServerID, __FUNCTION__);
    <span class="keywordflow">if</span> (NULL == pServer) <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    <span class="comment">// By this point, pServer is a good pointer.  (No need to cleanup.)</span>
    <span class="comment">// --------------------------------------------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strOutput(*pServer);
    std::string pBuf = strOutput.Get();

    <span class="keywordflow">return</span> pBuf;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a75a82ad6c9be31757dc6211f7987e815"></a><!-- doxytag: member="OTAPI_Exec::GetServer_ID" ref="a75a82ad6c9be31757dc6211f7987e815" args="(const int32_t &amp;nIndex)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a75a82ad6c9be31757dc6211f7987e815">OTAPI_Exec::GetServer_ID</a> </td>
          <td>(</td>
          <td class="paramtype">const int32_t &amp;&#160;</td>
          <td class="paramname"><em>nIndex</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l03906">3906</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (0 &gt; nIndex) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: nIndex is out of bounds (it&#39;s in the negative!)\n&quot;</span>, __FUNCTION__); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>    theID;
    <a class="code" href="class_o_t_string.html">OTString</a>        strName;
    <span class="keywordtype">bool</span> bGetServer = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#afa4e2d39d29061b609d81f094c2ca25c">GetServer</a>(nIndex, theID, strName);

    <span class="keywordflow">if</span> (bGetServer)
    {
        <a class="code" href="class_o_t_string.html">OTString</a> strID(theID);

        std::string pBuf = strID.Get();



        <span class="keywordflow">return</span> pBuf;
    }
    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a901a8e43cec3997fce4a334fd14c14b5"></a><!-- doxytag: member="OTAPI_Exec::GetServer_Name" ref="a901a8e43cec3997fce4a334fd14c14b5" args="(const std::string &amp;SERVER_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a901a8e43cec3997fce4a334fd14c14b5">OTAPI_Exec::GetServer_Name</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l03929">3929</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (THE_ID.empty())             { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_ID&quot;</span>             ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>    theID(THE_ID);

    <span class="comment">// -------------------------</span>
    <a class="code" href="class_o_t_server_contract.html">OTServerContract</a> * pServer = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#afa4e2d39d29061b609d81f094c2ca25c">GetServer</a>(theID, __FUNCTION__);
    <span class="keywordflow">if</span> (NULL == pServer) <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    <span class="comment">// -------------------------</span>
    <a class="code" href="class_o_t_string.html">OTString</a> strName;
    pServer-&gt;<a class="code" href="class_o_t_contract.html#a1afca402333b7c546104d5aa48c8efd9">GetName</a>(strName);
    std::string pBuf = strName.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();

    <span class="keywordflow">return</span> pBuf;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae78b8db3ee94ba98fc4a320f2365a64c"></a><!-- doxytag: member="OTAPI_Exec::GetServerCount" ref="ae78b8db3ee94ba98fc4a320f2365a64c" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_a_p_i___exec.html#ae78b8db3ee94ba98fc4a320f2365a64c">OTAPI_Exec::GetServerCount</a> </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>--------------------------------------------------</p>
<p>NOTE: THE BELOW FUNCTIONS *DO NOT* SEND ANY MESSAGE TO THE SERVER, BUT RATHER, THEY ONLY QUERY FOR DATA FROM LOCAL STORAGE.</p>
<p>Often a server response will cause a change to the data in local storage. These functions allow you to re-load that data so your GUI can reflect the updates to those files. </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l01438">1438</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a0fad5fe7f5da3cac88b0794c705b1a9b">GetServerCount</a>();
}
</pre></div>
</div>
</div>
<a class="anchor" id="a4d3eee535eeb45f738060ee88192c2e7"></a><!-- doxytag: member="OTAPI_Exec::GetTime" ref="a4d3eee535eeb45f738060ee88192c2e7" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_o_t_common_8hpp.html#ad28ff0a3eda18840f6bda5872819167f">time64_t</a> <a class="el" href="class_o_t_a_p_i___exec.html#a4d3eee535eeb45f738060ee88192c2e7">OTAPI_Exec::GetTime</a> </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>TIME (in seconds)</p>
<p>This will return the current time in seconds, as a string. Returns NULL if failure.</p>
<p>Todo: consider making this available on the server side as well, so the smart contracts can see what time it is.</p>
<p>TIME (in seconds, as string)</p>
<p>This will return the current time in seconds, as a string. Returns "" if failure.</p>
<p>Todo: consider making this available on the server side as well, so the smart contracts can see what time it is. </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l04108">4108</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a2ff83b1c64286eafdf7af6360e138d6e">GetTime</a>();
}
</pre></div>
</div>
</div>
<a class="anchor" id="a89358c9cc2fa0dcfff007c3bcbc2ed5c"></a><!-- doxytag: member="OTAPI_Exec::getTransactionNumber" ref="a89358c9cc2fa0dcfff007c3bcbc2ed5c" args="(const std::string &amp;SERVER_ID, const std::string &amp;USER_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_a_p_i___exec.html#a89358c9cc2fa0dcfff007c3bcbc2ed5c">OTAPI_Exec::getTransactionNumber</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>GET TRANSACTION NUMBER</p>
<p>Every TRANSACTION must be accompanied by a TRANSACTION NUMBER and you can only use a transaction number that was given to you previously by the server. If you run out of transaction numbers, then just call the below API function to get a new one (call it a few times so your wallet has a few in reserve.)</p>
<p>The server usually sends you new transaction numbers whenever you successfully do commands, but if you run out, you just call that function.</p>
<p>Without understanding this, none of your transactions would ever go through! This mechanism is what makes it possible to prove balances and transactions, without having to store any account history! </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l12883">12883</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty())          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID.empty())            { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>            ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theServerID(SERVER_ID), theUserID(USER_ID);


    <span class="keywordflow">return</span> <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#afd2344eb8007c310ada18aaafa70eb67">getTransactionNumber</a>(theServerID, theUserID);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a21fc5967b732f9792d642ca567d2b68b"></a><!-- doxytag: member="OTAPI_Exec::HaveAlreadySeenReply" ref="a21fc5967b732f9792d642ca567d2b68b" args="(const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const int64_t &amp;REQUEST_NUMBER)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_a_p_i___exec.html#a21fc5967b732f9792d642ca567d2b68b">OTAPI_Exec::HaveAlreadySeenReply</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int64_t &amp;&#160;</td>
          <td class="paramname"><em>REQUEST_NUMBER</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>If the client-side has ALREADY seen the server's reply to a specific request number, he stores that number in a list which can be queried using this function. A copy of that list is sent with nearly every request message sent to the server. This way the server can see which replies you have already received. The server will mirror every number it sees (it sends its own list in all its replies.) Whenever you see a number mirrored in the server's reply, that means the server now knows you got its original reply (the one referenced by the number) and the server removed any replyNotice of that from your Nymbox (so you don't have to download it.) Basically that means you can go ahead and remove it from your list, and once you do, the server will remove its matching copy as well. When you are downloading your box receipts, you can skip any receipts where you have ALREADY seen the reply. So you can use this function to see if you already saw it, and if you did, then you can skip downloading that box receipt. Warning: this function isn't "perfect", in the sense that it cannot tell you definitively whether you have actually seen a server reply, but it CAN tell you if you have seen one until it finishes the above-described protocol (it will work in that way, which is how it was intended.) But after that, it will no longer know if you got the reply since it has removed it from its list. returns OT_BOOL. </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l07728">7728</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty())  { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID.empty())    { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>            ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (0 &gt; REQUEST_NUMBER) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Negative: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;REQUEST_NUMBER&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theServerID(SERVER_ID);
    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theUserID(USER_ID);

    <span class="keyword">const</span> int64_t lRequestNumber = REQUEST_NUMBER;

    <span class="comment">// const std::string &amp; strFunc = &quot;OTAPI_Exec::HaveAlreadySeenReply&quot;;</span>
    <span class="comment">// -----------------------------------------</span>
    <span class="comment">// There is an OT_ASSERT in here for memory failure,</span>
    <span class="comment">// but it still might return &quot;&quot; if various verification fails.</span>

    <span class="keyword">const</span> <span class="keywordtype">bool</span> &amp; bTemp = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a76e14d4a7826d39f55e0dcac022a8474">HaveAlreadySeenReply</a>(theServerID, theUserID, static_cast&lt;int64_t&gt;(lRequestNumber));
    <span class="keywordflow">return</span> bTemp;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa70d330a5a3e6ff06ca06aa6bb2018d7"></a><!-- doxytag: member="OTAPI_Exec::Hook_GetClauseAtIndex" ref="aa70d330a5a3e6ff06ca06aa6bb2018d7" args="(const std::string &amp;THE_CONTRACT, const std::string &amp;BYLAW_NAME, const std::string &amp;HOOK_NAME, const int32_t &amp;nIndex)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#aa70d330a5a3e6ff06ca06aa6bb2018d7">OTAPI_Exec::Hook_GetClauseAtIndex</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_CONTRACT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>BYLAW_NAME</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>HOOK_NAME</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int32_t &amp;&#160;</td>
          <td class="paramname"><em>nIndex</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Multiple clauses can trigger from the same hook. Hook_GetClauseCount and Hook_GetClauseAtIndex allow you to iterate through them. This function returns the name for the clause at the specified index. </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l06430">6430</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (THE_CONTRACT.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_CONTRACT&quot;</span>); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (BYLAW_NAME.empty())   { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;BYLAW_NAME&quot;</span>  ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (HOOK_NAME.empty())    { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;HOOK_NAME&quot;</span>   ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// -----------------------------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strContract(THE_CONTRACT);
    <a class="code" href="class_o_t_scriptable.html">OTScriptable</a> * pScriptable = <a class="code" href="class_o_t_scriptable.html#a4a89cbc1abd2bac0e5dec64da3452b7a">OTScriptable::InstantiateScriptable</a>(strContract);
    <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTScriptable&gt;</a> theContractAngel;
    <span class="keywordflow">if</span> (NULL == pScriptable)
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Failed trying to load smart contract from string:\n\n%s\n\n&quot;</span>,
                       __FUNCTION__, strContract.Get());
    }
    <span class="keywordflow">else</span>
    {
        theContractAngel.<a class="code" href="class_o_t_cleanup.html#a00a399db45f730439d2263d4429d00c1">SetCleanupTarget</a>(*pScriptable);  <span class="comment">// Auto-cleanup.</span>
        <span class="comment">// -----------------------------------------------------</span>
        <a class="code" href="class_o_t_bylaw.html">OTBylaw</a> * pBylaw = pScriptable-&gt;<a class="code" href="class_o_t_scriptable.html#a970014fa028541c7a3c908800bfa4ee9">GetBylaw</a>(BYLAW_NAME);
        <span class="comment">// -----------------------------------------------------</span>
        <span class="keywordflow">if</span> (NULL == pBylaw)
        {
            <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Smart contract loaded up, but failed to retrieve the bylaw with name: %s\n&quot;</span>,
                           __FUNCTION__, BYLAW_NAME.c_str());
        }
        <span class="keywordflow">else</span> <span class="comment">// We found the bylaw...</span>
        {
            <a class="code" href="_o_t_clause_8hpp.html#a40c16432fa9c16826c026b74351425ad">mapOfClauses</a> theResults;

            <span class="keywordflow">if</span> (pBylaw-&gt;<a class="code" href="class_o_t_bylaw.html#ac43e007f0a64ca7c09853340c8a3aab1">GetHooks</a>(HOOK_NAME, theResults)) <span class="comment">// Look up all clauses matching a specific hook.</span>
            {
                <span class="keywordflow">if</span> ((nIndex &gt;= 0) &amp;&amp; (nIndex &lt; static_cast&lt;int64_t&gt;(theResults.size())))
                {
                    int32_t nLoopIndex = -1;

                    <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_clause_8hpp.html#a40c16432fa9c16826c026b74351425ad">mapOfClauses</a>, theResults)
                    {
                        <a class="code" href="class_o_t_clause.html">OTClause</a> * pClause = (*it).second;
                        <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pClause);
                        <span class="comment">// ---------------------------</span>
                        ++nLoopIndex; <span class="comment">// on first iteration, this is now 0.</span>

                        <span class="keywordflow">if</span> (nLoopIndex == nIndex)
                        {
                            <span class="keyword">const</span> std::string str_return(pClause-&gt;<a class="code" href="class_o_t_clause.html#a325b3cfeedbfc1c699de3d0f787e5120">GetName</a>().<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
                            <span class="keywordflow">return</span> str_return;
                        }
                    }
                }
            }
        }
    }
    <span class="comment">// -----------------------------------------------------------</span>
    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a9474900b264f56b279fae796e4c054b5"></a><!-- doxytag: member="OTAPI_Exec::Hook_GetClauseCount" ref="a9474900b264f56b279fae796e4c054b5" args="(const std::string &amp;THE_CONTRACT, const std::string &amp;BYLAW_NAME, const std::string &amp;HOOK_NAME)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_a_p_i___exec.html#a9474900b264f56b279fae796e4c054b5">OTAPI_Exec::Hook_GetClauseCount</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_CONTRACT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>BYLAW_NAME</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>HOOK_NAME</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the number of clauses attached to a specific hook. </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l06387">6387</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (THE_CONTRACT.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_CONTRACT&quot;</span>); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (BYLAW_NAME.empty())   { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;BYLAW_NAME&quot;</span>  ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (HOOK_NAME.empty())    { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;HOOK_NAME&quot;</span>   ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// -----------------------------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strContract(THE_CONTRACT);
    <a class="code" href="class_o_t_scriptable.html">OTScriptable</a> * pScriptable = <a class="code" href="class_o_t_scriptable.html#a4a89cbc1abd2bac0e5dec64da3452b7a">OTScriptable::InstantiateScriptable</a>(strContract);
    <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTScriptable&gt;</a> theContractAngel;
    <span class="keywordflow">if</span> (NULL == pScriptable)
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Failed trying to load smart contract from string:\n\n%s\n\n&quot;</span>,
                       __FUNCTION__, strContract.Get());
    }
    <span class="keywordflow">else</span>
    {
        theContractAngel.<a class="code" href="class_o_t_cleanup.html#a00a399db45f730439d2263d4429d00c1">SetCleanupTarget</a>(*pScriptable);  <span class="comment">// Auto-cleanup.</span>
        <span class="comment">// -----------------------------------------------------</span>
        <a class="code" href="class_o_t_bylaw.html">OTBylaw</a> * pBylaw = pScriptable-&gt;<a class="code" href="class_o_t_scriptable.html#a970014fa028541c7a3c908800bfa4ee9">GetBylaw</a>(BYLAW_NAME);
        <span class="comment">// -----------------------------------------------------</span>
        <span class="keywordflow">if</span> (NULL == pBylaw)
        {
            <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Smart contract loaded up, but failed to retrieve the bylaw with name: %s\n&quot;</span>,
                           __FUNCTION__, BYLAW_NAME.c_str());
        }
        <span class="keywordflow">else</span> <span class="comment">// We found the bylaw...</span>
        {
            <a class="code" href="_o_t_clause_8hpp.html#a40c16432fa9c16826c026b74351425ad">mapOfClauses</a> theResults;
            <span class="keyword">const</span> <span class="keywordtype">bool</span> bGotHooks = pBylaw-&gt;<a class="code" href="class_o_t_bylaw.html#ac43e007f0a64ca7c09853340c8a3aab1">GetHooks</a>(HOOK_NAME, theResults); <span class="comment">// Look up all clauses matching a specific hook.</span>
            <span class="keyword">const</span> int32_t nReturnValue = bGotHooks ? <span class="keyword">static_cast&lt;</span><span class="keyword">const </span>int32_t<span class="keyword">&gt;</span>(theResults.size()) : (-1);
            <span class="keywordflow">return</span> nReturnValue;
        }
    }
    <span class="comment">// -----------------------------------------------------------</span>
    <span class="keywordflow">return</span> (-1);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a9c8867d91b72f7bb19dca21a4f85e890"></a><!-- doxytag: member="OTAPI_Exec::Hook_GetNameByIndex" ref="a9c8867d91b72f7bb19dca21a4f85e890" args="(const std::string &amp;THE_CONTRACT, const std::string &amp;BYLAW_NAME, const int32_t &amp;nIndex)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a9c8867d91b72f7bb19dca21a4f85e890">OTAPI_Exec::Hook_GetNameByIndex</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_CONTRACT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>BYLAW_NAME</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int32_t &amp;&#160;</td>
          <td class="paramname"><em>nIndex</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l06349">6349</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (THE_CONTRACT.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_CONTRACT&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (BYLAW_NAME.empty())   { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;BYLAW_NAME&quot;</span>   ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// -----------------------------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strContract(THE_CONTRACT);
    <a class="code" href="class_o_t_scriptable.html">OTScriptable</a> * pScriptable = <a class="code" href="class_o_t_scriptable.html#a4a89cbc1abd2bac0e5dec64da3452b7a">OTScriptable::InstantiateScriptable</a>(strContract);
    <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTScriptable&gt;</a> theContractAngel;
    <span class="keywordflow">if</span> (NULL == pScriptable)
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Failed trying to load smart contract from string:\n\n%s\n\n&quot;</span>,
                       __FUNCTION__, strContract.Get());
    }
    <span class="keywordflow">else</span>
    {
        theContractAngel.<a class="code" href="class_o_t_cleanup.html#a00a399db45f730439d2263d4429d00c1">SetCleanupTarget</a>(*pScriptable);  <span class="comment">// Auto-cleanup.</span>
        <span class="comment">// -----------------------------------------------------</span>
        <a class="code" href="class_o_t_bylaw.html">OTBylaw</a> * pBylaw = pScriptable-&gt;<a class="code" href="class_o_t_scriptable.html#a970014fa028541c7a3c908800bfa4ee9">GetBylaw</a>(BYLAW_NAME);
        <span class="comment">// -----------------------------------------------------</span>
        <span class="keywordflow">if</span> (NULL == pBylaw)
        {
            <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Smart contract loaded up, but failed to retrieve the bylaw with name: %s\n&quot;</span>,
                           __FUNCTION__, BYLAW_NAME.c_str());
        }
        <span class="keywordflow">else</span> <span class="comment">// We found the bylaw...</span>
        {
            <span class="keyword">const</span> int32_t nTempIndex = <span class="keyword">static_cast&lt;</span><span class="keyword">const </span>int32_t<span class="keyword">&gt;</span>(nIndex);
            <span class="keyword">const</span> std::string str_name(pBylaw-&gt;<a class="code" href="class_o_t_bylaw.html#ae9b4cfc73f3348227007111bb3e16887">GetHookNameByIndex</a>(nTempIndex));
            <span class="keywordflow">return</span> str_name;
        }
    }
    <span class="comment">// -----------------------------------------------------------</span>
    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a7e4eb9b2afbb270cd108ddd48662c10c"></a><!-- doxytag: member="OTAPI_Exec::Instrmnt_GetAmount" ref="a7e4eb9b2afbb270cd108ddd48662c10c" args="(const std::string &amp;THE_INSTRUMENT)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64_t <a class="el" href="class_o_t_a_p_i___exec.html#a7e4eb9b2afbb270cd108ddd48662c10c">OTAPI_Exec::Instrmnt_GetAmount</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_INSTRUMENT</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>THESE FUNCTIONS were added for the PAYMENTS screen. (They are fairly new.)</p>
<p>Basically there was a need to have DIFFERENT instruments, but to be able to treat them as though they are a single type.</p>
<p>In keeping with that, the below functions will work with disparate types. You can pass [ CHEQUES / VOUCHERS / INVOICES ] and PAYMENT PLANS, and SMART CONTRACTS, and PURSEs into these functions, and they should be able to handle any of those types. </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l03197">3197</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (THE_INSTRUMENT.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_INSTRUMENT&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// ------------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a>      strInstrument(THE_INSTRUMENT);
    <span class="comment">// ------------------------------------</span>
    <a class="code" href="class_o_t_payment.html">OTPayment</a> thePayment(strInstrument);

    <span class="keywordflow">if</span> (!thePayment.IsValid())
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Unable to parse instrument:\n\n%s\n\n&quot;</span>,
            __FUNCTION__, strInstrument.Get());
        <span class="keywordflow">return</span> -1;
    }
    <span class="comment">// ---------------------------------------</span>
    <span class="keyword">const</span> <span class="keywordtype">bool</span> &amp; bSetValues = thePayment.SetTempValues();
    <span class="comment">// ---------------------------------------</span>
    <span class="keywordflow">if</span> (!bSetValues)
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Unable to load instrument:\n\n%s\n\n&quot;</span>,
            __FUNCTION__, strInstrument.Get());
        <span class="keywordflow">return</span> -1;
    }
    <span class="comment">// ---------------------------------------</span>
    <span class="comment">// BY THIS POINT, we have definitely loaded up all the values of the instrument</span>
    <span class="comment">// into the OTPayment object. (Meaning we can now return the requested data...)</span>

    <a class="code" href="class_o_t_string.html">OTString</a>      strOutput;
    int64_t          lOutput  = 0;
    <span class="keyword">const</span> <span class="keywordtype">bool</span> &amp;  bGotData = thePayment.GetAmount(lOutput); <span class="comment">// &lt;========</span>

    <span class="keywordflow">return</span> bGotData ? lOutput : -1;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a84f0ede82b6f2c43c2d3d089065bea15"></a><!-- doxytag: member="OTAPI_Exec::Instrmnt_GetAssetID" ref="a84f0ede82b6f2c43c2d3d089065bea15" args="(const std::string &amp;THE_INSTRUMENT)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a84f0ede82b6f2c43c2d3d089065bea15">OTAPI_Exec::Instrmnt_GetAssetID</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_INSTRUMENT</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l03484">3484</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (THE_INSTRUMENT.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_INSTRUMENT&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// ------------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a>      strInstrument(THE_INSTRUMENT);
    <span class="comment">// ------------------------------------</span>
    <a class="code" href="class_o_t_payment.html">OTPayment</a> thePayment(strInstrument);

    <span class="keywordflow">if</span> (!thePayment.IsValid())
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Unable to parse instrument:\n\n%s\n\n&quot;</span>, __FUNCTION__, strInstrument.Get());
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    }
    <span class="comment">// ---------------------------------------</span>
    <span class="keyword">const</span> <span class="keywordtype">bool</span> &amp; bSetValues = thePayment.SetTempValues();
    <span class="comment">// ---------------------------------------</span>
    <span class="keywordflow">if</span> (!bSetValues)
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Unable to load instrument:\n\n%s\n\n&quot;</span>, __FUNCTION__, strInstrument.Get());
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    }
    <span class="comment">// ---------------------------------------</span>

    <span class="comment">// BY THIS POINT, we have definitely loaded up all the values of the instrument</span>
    <span class="comment">// into the OTPayment object. (Meaning we can now return the requested data...)</span>

    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>  theOutput;
    <span class="keyword">const</span> <span class="keywordtype">bool</span> &amp;    bGotData = thePayment.GetAssetTypeID(theOutput); <span class="comment">// &lt;========</span>

    <span class="keywordflow">if</span> (bGotData)
    {
        <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strOutput(theOutput);
        std::string pBuf = strOutput.Get();
        <span class="keywordflow">return</span> pBuf;
    }

    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="acd74b10edc2c2d138f392e37292ee680"></a><!-- doxytag: member="OTAPI_Exec::Instrmnt_GetMemo" ref="acd74b10edc2c2d138f392e37292ee680" args="(const std::string &amp;THE_INSTRUMENT)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#acd74b10edc2c2d138f392e37292ee680">OTAPI_Exec::Instrmnt_GetMemo</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_INSTRUMENT</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l03397">3397</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (THE_INSTRUMENT.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_INSTRUMENT&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// ------------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a>      strInstrument(THE_INSTRUMENT);
    <span class="comment">// ------------------------------------</span>
    <a class="code" href="class_o_t_payment.html">OTPayment</a> thePayment(strInstrument);

    <span class="keywordflow">if</span> (!thePayment.IsValid())
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Unable to parse instrument:\n\n%s\n\n&quot;</span>,
            __FUNCTION__, strInstrument.Get());
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    }
    <span class="comment">// ---------------------------------------</span>
    <span class="keyword">const</span> <span class="keywordtype">bool</span> &amp; bSetValues = thePayment.SetTempValues();
    <span class="comment">// ---------------------------------------</span>
    <span class="keywordflow">if</span> (!bSetValues)
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Unable to load instrument:\n\n%s\n\n&quot;</span>,
            __FUNCTION__, strInstrument.Get());
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    }
    <span class="comment">// ---------------------------------------</span>

    <span class="comment">// BY THIS POINT, we have definitely loaded up all the values of the instrument</span>
    <span class="comment">// into the OTPayment object. (Meaning we can now return the requested data...)</span>

    <a class="code" href="class_o_t_string.html">OTString</a>    strOutput;
    <span class="keyword">const</span> <span class="keywordtype">bool</span> &amp;  bGotData = thePayment.GetMemo(strOutput); <span class="comment">// &lt;========</span>

    <span class="keywordflow">if</span> (bGotData)
    {
        std::string pBuf = strOutput.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();
        <span class="keywordflow">return</span> pBuf;
    }

    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="adece47c223e4ecb8e33700efad49dcb4"></a><!-- doxytag: member="OTAPI_Exec::Instrmnt_GetRecipientAcctID" ref="adece47c223e4ecb8e33700efad49dcb4" args="(const std::string &amp;THE_INSTRUMENT)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#adece47c223e4ecb8e33700efad49dcb4">OTAPI_Exec::Instrmnt_GetRecipientAcctID</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_INSTRUMENT</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l03750">3750</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (THE_INSTRUMENT.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_INSTRUMENT&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// ------------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a>      strInstrument(THE_INSTRUMENT);
    <span class="comment">// ------------------------------------</span>
    <a class="code" href="class_o_t_payment.html">OTPayment</a> thePayment(strInstrument);

    <span class="keywordflow">if</span> (!thePayment.IsValid())
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Unable to parse instrument:\n\n%s\n\n&quot;</span>,
            __FUNCTION__, strInstrument.Get());
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    }
    <span class="comment">// ---------------------------------------</span>
    <span class="keyword">const</span> <span class="keywordtype">bool</span> &amp; bSetValues = thePayment.SetTempValues();
    <span class="comment">// ---------------------------------------</span>
    <span class="keywordflow">if</span> (!bSetValues)
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Unable to load instrument:\n\n%s\n\n&quot;</span>,
            __FUNCTION__, strInstrument.Get());
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    }
    <span class="comment">// ---------------------------------------</span>
    <span class="comment">// BY THIS POINT, we have definitely loaded up all the values of the instrument</span>
    <span class="comment">// into the OTPayment object. (Meaning we can now return the requested data...)</span>

    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>  theOutput;
    <span class="keyword">const</span> <span class="keywordtype">bool</span> &amp;  bGotData = thePayment.GetRecipientAcctID(theOutput); <span class="comment">// &lt;========</span>

    <span class="keywordflow">if</span> (bGotData)
    {
        <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strOutput(theOutput);
        std::string pBuf = strOutput.Get();
        <span class="keywordflow">return</span> pBuf;
    }

    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a6b10e643af20f5aed9fc07b039be0a0b"></a><!-- doxytag: member="OTAPI_Exec::Instrmnt_GetRecipientUserID" ref="a6b10e643af20f5aed9fc07b039be0a0b" args="(const std::string &amp;THE_INSTRUMENT)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a6b10e643af20f5aed9fc07b039be0a0b">OTAPI_Exec::Instrmnt_GetRecipientUserID</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_INSTRUMENT</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l03705">3705</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (THE_INSTRUMENT.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_INSTRUMENT&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// ------------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a>      strInstrument(THE_INSTRUMENT);
    <span class="comment">// ------------------------------------</span>
    <a class="code" href="class_o_t_payment.html">OTPayment</a> thePayment(strInstrument);

    <span class="keywordflow">if</span> (!thePayment.IsValid())
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Unable to parse instrument:\n\n%s\n\n&quot;</span>,
            __FUNCTION__, strInstrument.Get());
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    }
    <span class="comment">// ---------------------------------------</span>
    <span class="keyword">const</span> <span class="keywordtype">bool</span> &amp; bSetValues = thePayment.SetTempValues();
    <span class="comment">// ---------------------------------------</span>
    <span class="keywordflow">if</span> (!bSetValues)
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Unable to load instrument:\n\n%s\n\n&quot;</span>,
            __FUNCTION__, strInstrument.Get());
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    }
    <span class="comment">// ---------------------------------------</span>

    <span class="comment">// BY THIS POINT, we have definitely loaded up all the values of the instrument</span>
    <span class="comment">// into the OTPayment object. (Meaning we can now return the requested data...)</span>

    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>  theOutput;
    <span class="keyword">const</span> <span class="keywordtype">bool</span> &amp;  bGotData = thePayment.GetRecipientUserID(theOutput); <span class="comment">// &lt;========</span>

    <span class="keywordflow">if</span> (bGotData)
    {
        <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strOutput(theOutput);
        std::string pBuf = strOutput.Get();
        <span class="keywordflow">return</span> pBuf;
    }

    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a1ac12dffcbb923a2935e8b2d4c98742e"></a><!-- doxytag: member="OTAPI_Exec::Instrmnt_GetRemitterAcctID" ref="a1ac12dffcbb923a2935e8b2d4c98742e" args="(const std::string &amp;THE_INSTRUMENT)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a1ac12dffcbb923a2935e8b2d4c98742e">OTAPI_Exec::Instrmnt_GetRemitterAcctID</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_INSTRUMENT</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l03571">3571</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (THE_INSTRUMENT.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_INSTRUMENT&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// ------------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a>      strInstrument(THE_INSTRUMENT);
    <span class="comment">// ------------------------------------</span>
    <a class="code" href="class_o_t_payment.html">OTPayment</a> thePayment(strInstrument);

    <span class="keywordflow">if</span> (!thePayment.IsValid())
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Unable to parse instrument:\n\n%s\n\n&quot;</span>,
                       __FUNCTION__, strInstrument.Get());
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    }
    <span class="comment">// ---------------------------------------</span>
    <span class="keyword">const</span> <span class="keywordtype">bool</span> &amp; bSetValues = thePayment.SetTempValues();
    <span class="comment">// ---------------------------------------</span>
    <span class="keywordflow">if</span> (!bSetValues)
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Unable to load instrument:\n\n%s\n\n&quot;</span>,
                       __FUNCTION__, strInstrument.Get());
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    }
    <span class="comment">// ---------------------------------------</span>

    <span class="comment">// BY THIS POINT, we have definitely loaded up all the values of the instrument</span>
    <span class="comment">// into the OTPayment object. (Meaning we can now return the requested data...)</span>

    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>  theOutput;
    <span class="keyword">const</span> <span class="keywordtype">bool</span> &amp;    bGotData = thePayment.GetRemitterAcctID(theOutput); <span class="comment">// &lt;========</span>

    <span class="keywordflow">if</span> (bGotData)
    {
        <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strOutput(theOutput);
        std::string pBuf = strOutput.Get();
        <span class="keywordflow">return</span> pBuf;
    }

    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a814849a3dbd04a4463395b87d2c30569"></a><!-- doxytag: member="OTAPI_Exec::Instrmnt_GetRemitterUserID" ref="a814849a3dbd04a4463395b87d2c30569" args="(const std::string &amp;THE_INSTRUMENT)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a814849a3dbd04a4463395b87d2c30569">OTAPI_Exec::Instrmnt_GetRemitterUserID</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_INSTRUMENT</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l03526">3526</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (THE_INSTRUMENT.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_INSTRUMENT&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// ------------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a>      strInstrument(THE_INSTRUMENT);
    <span class="comment">// ------------------------------------</span>
    <a class="code" href="class_o_t_payment.html">OTPayment</a> thePayment(strInstrument);

    <span class="keywordflow">if</span> (!thePayment.IsValid())
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Unable to parse instrument:\n\n%s\n\n&quot;</span>,
                       __FUNCTION__, strInstrument.Get());
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    }
    <span class="comment">// ---------------------------------------</span>
    <span class="keyword">const</span> <span class="keywordtype">bool</span> &amp; bSetValues = thePayment.SetTempValues();
    <span class="comment">// ---------------------------------------</span>
    <span class="keywordflow">if</span> (!bSetValues)
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Unable to load instrument:\n\n%s\n\n&quot;</span>,
                       __FUNCTION__, strInstrument.Get());
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    }
    <span class="comment">// ---------------------------------------</span>

    <span class="comment">// BY THIS POINT, we have definitely loaded up all the values of the instrument</span>
    <span class="comment">// into the OTPayment object. (Meaning we can now return the requested data...)</span>

    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>  theOutput;
    <span class="keyword">const</span> <span class="keywordtype">bool</span> &amp;    bGotData = thePayment.GetRemitterUserID(theOutput); <span class="comment">// &lt;========</span>

    <span class="keywordflow">if</span> (bGotData)
    {
        <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strOutput(theOutput);
        std::string pBuf = strOutput.Get();
        <span class="keywordflow">return</span> pBuf;
    }

    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a2ecd9a0a69c92f7e623be88eba1abdb7"></a><!-- doxytag: member="OTAPI_Exec::Instrmnt_GetSenderAcctID" ref="a2ecd9a0a69c92f7e623be88eba1abdb7" args="(const std::string &amp;THE_INSTRUMENT)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a2ecd9a0a69c92f7e623be88eba1abdb7">OTAPI_Exec::Instrmnt_GetSenderAcctID</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_INSTRUMENT</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l03660">3660</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (THE_INSTRUMENT.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_INSTRUMENT&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// ------------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a>      strInstrument(THE_INSTRUMENT);
    <span class="comment">// ------------------------------------</span>
    <a class="code" href="class_o_t_payment.html">OTPayment</a> thePayment(strInstrument);

    <span class="keywordflow">if</span> (!thePayment.IsValid())
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Unable to parse instrument:\n\n%s\n\n&quot;</span>,
                       __FUNCTION__, strInstrument.Get());
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    }
    <span class="comment">// ---------------------------------------</span>
    <span class="keyword">const</span> <span class="keywordtype">bool</span> &amp; bSetValues = thePayment.SetTempValues();
    <span class="comment">// ---------------------------------------</span>
    <span class="keywordflow">if</span> (!bSetValues)
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Unable to load instrument:\n\n%s\n\n&quot;</span>,
                       __FUNCTION__, strInstrument.Get());
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    }
    <span class="comment">// ---------------------------------------</span>

    <span class="comment">// BY THIS POINT, we have definitely loaded up all the values of the instrument</span>
    <span class="comment">// into the OTPayment object. (Meaning we can now return the requested data...)</span>

    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>  theOutput;
    <span class="keyword">const</span> <span class="keywordtype">bool</span> &amp;    bGotData = thePayment.GetSenderAcctID(theOutput); <span class="comment">// &lt;========</span>

    <span class="keywordflow">if</span> (bGotData)
    {
        <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strOutput(theOutput);
        std::string pBuf = strOutput.Get();
        <span class="keywordflow">return</span> pBuf;
    }

    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab251235ae0a34992165da9ac846f3d0e"></a><!-- doxytag: member="OTAPI_Exec::Instrmnt_GetSenderUserID" ref="ab251235ae0a34992165da9ac846f3d0e" args="(const std::string &amp;THE_INSTRUMENT)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#ab251235ae0a34992165da9ac846f3d0e">OTAPI_Exec::Instrmnt_GetSenderUserID</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_INSTRUMENT</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l03615">3615</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (THE_INSTRUMENT.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_INSTRUMENT&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// ------------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a>      strInstrument(THE_INSTRUMENT);
    <span class="comment">// ------------------------------------</span>
    <a class="code" href="class_o_t_payment.html">OTPayment</a> thePayment(strInstrument);

    <span class="keywordflow">if</span> (!thePayment.IsValid())
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Unable to parse instrument:\n\n%s\n\n&quot;</span>,
                       __FUNCTION__, strInstrument.Get());
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    }
    <span class="comment">// ---------------------------------------</span>
    <span class="keyword">const</span> <span class="keywordtype">bool</span> &amp; bSetValues = thePayment.SetTempValues();
    <span class="comment">// ---------------------------------------</span>
    <span class="keywordflow">if</span> (!bSetValues)
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Unable to load instrument:\n\n%s\n\n&quot;</span>,
                       __FUNCTION__, strInstrument.Get());
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    }
    <span class="comment">// ---------------------------------------</span>

    <span class="comment">// BY THIS POINT, we have definitely loaded up all the values of the instrument</span>
    <span class="comment">// into the OTPayment object. (Meaning we can now return the requested data...)</span>

    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>  theOutput;
    <span class="keyword">const</span> <span class="keywordtype">bool</span> &amp;    bGotData = thePayment.GetSenderUserID(theOutput); <span class="comment">// &lt;========</span>

    <span class="keywordflow">if</span> (bGotData)
    {
        <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strOutput(theOutput);
        std::string pBuf = strOutput.Get();
        <span class="keywordflow">return</span> pBuf;
    }

    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac239b16ee54d312d0cba2e20d90879ed"></a><!-- doxytag: member="OTAPI_Exec::Instrmnt_GetServerID" ref="ac239b16ee54d312d0cba2e20d90879ed" args="(const std::string &amp;THE_INSTRUMENT)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#ac239b16ee54d312d0cba2e20d90879ed">OTAPI_Exec::Instrmnt_GetServerID</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_INSTRUMENT</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l03442">3442</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (THE_INSTRUMENT.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_INSTRUMENT&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// ------------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a>      strInstrument(THE_INSTRUMENT);
    <span class="comment">// ------------------------------------</span>
    <a class="code" href="class_o_t_payment.html">OTPayment</a> thePayment(strInstrument);

    <span class="keywordflow">if</span> (!thePayment.IsValid())
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Unable to parse instrument:\n\n%s\n\n&quot;</span>, __FUNCTION__, strInstrument.Get());
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    }
    <span class="comment">// ---------------------------------------</span>
    <span class="keyword">const</span> <span class="keywordtype">bool</span> &amp; bSetValues = thePayment.SetTempValues();
    <span class="comment">// ---------------------------------------</span>
    <span class="keywordflow">if</span> (!bSetValues)
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Unable to load instrument:\n\n%s\n\n&quot;</span>, __FUNCTION__, strInstrument.Get());
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    }
    <span class="comment">// ---------------------------------------</span>

    <span class="comment">// BY THIS POINT, we have definitely loaded up all the values of the instrument</span>
    <span class="comment">// into the OTPayment object. (Meaning we can now return the requested data...)</span>

    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>  theOutput;
    <span class="keyword">const</span> <span class="keywordtype">bool</span> &amp;    bGotData = thePayment.GetServerID(theOutput); <span class="comment">// &lt;========</span>

    <span class="keywordflow">if</span> (bGotData)
    {
        <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strOutput(theOutput);
        std::string pBuf = strOutput.Get();
        <span class="keywordflow">return</span> pBuf;
    }

    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac031ea7a5cfcc1616ce37eeaf84f52b6"></a><!-- doxytag: member="OTAPI_Exec::Instrmnt_GetTransNum" ref="ac031ea7a5cfcc1616ce37eeaf84f52b6" args="(const std::string &amp;THE_INSTRUMENT)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64_t <a class="el" href="class_o_t_a_p_i___exec.html#ac031ea7a5cfcc1616ce37eeaf84f52b6">OTAPI_Exec::Instrmnt_GetTransNum</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_INSTRUMENT</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l03233">3233</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (THE_INSTRUMENT.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_INSTRUMENT&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// ------------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a>      strInstrument(THE_INSTRUMENT);
    <span class="comment">// ------------------------------------</span>
    <a class="code" href="class_o_t_payment.html">OTPayment</a> thePayment(strInstrument);

    <span class="keywordflow">if</span> (!thePayment.IsValid())
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Unable to parse instrument:\n\n%s\n\n&quot;</span>,
            __FUNCTION__, strInstrument.Get());
        <span class="keywordflow">return</span> -1;
    }
    <span class="comment">// ---------------------------------------</span>
    <span class="keyword">const</span> <span class="keywordtype">bool</span> &amp; bSetValues = thePayment.SetTempValues();
    <span class="comment">// ---------------------------------------</span>
    <span class="keywordflow">if</span> (!bSetValues)
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Unable to load instrument:\n\n%s\n\n&quot;</span>,
            __FUNCTION__, strInstrument.Get());
        <span class="keywordflow">return</span> -1;
    }
    <span class="comment">// ---------------------------------------</span>
    <span class="comment">// BY THIS POINT, we have definitely loaded up all the values of the instrument</span>
    <span class="comment">// into the OTPayment object. (Meaning we can now return the requested data...)</span>
    <a class="code" href="class_o_t_string.html">OTString</a>      strOutput;
    int64_t          lOutput = 0;
    <span class="keyword">const</span> <span class="keywordtype">bool</span> &amp;  bGotData = thePayment.GetTransactionNum(lOutput); <span class="comment">// &lt;========</span>

    <span class="keywordflow">return</span> bGotData ? lOutput : -1;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a2fd472eebaee74cbac5399240fccca8f"></a><!-- doxytag: member="OTAPI_Exec::Instrmnt_GetType" ref="a2fd472eebaee74cbac5399240fccca8f" args="(const std::string &amp;THE_INSTRUMENT)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a2fd472eebaee74cbac5399240fccca8f">OTAPI_Exec::Instrmnt_GetType</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_INSTRUMENT</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l03350">3350</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (THE_INSTRUMENT.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_INSTRUMENT&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// ------------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a>      strInstrument(THE_INSTRUMENT);
    <span class="comment">// ------------------------------------</span>
    <a class="code" href="class_o_t_payment.html">OTPayment</a> thePayment(strInstrument);

    <span class="keywordflow">if</span> (!thePayment.IsValid())
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Unable to parse instrument:\n\n%s\n\n&quot;</span>,
            __FUNCTION__, strInstrument.Get());
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    }
    <span class="comment">// ---------------------------------------</span>
    <span class="keyword">const</span> <span class="keywordtype">bool</span> &amp; bSetValues = thePayment.SetTempValues();
    <span class="comment">// ---------------------------------------</span>
    <span class="keywordflow">if</span> (!bSetValues)
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Unable to load instrument:\n\n%s\n\n&quot;</span>,
            __FUNCTION__, strInstrument.Get());
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    }
    <span class="comment">// ---------------------------------------</span>
    <span class="comment">// BY THIS POINT, we have definitely loaded up all the values of the instrument</span>
    <span class="comment">// into the OTPayment object. (Meaning we can now return the requested data...)</span>

    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strOutput(thePayment.GetTypeString());

    <span class="keywordflow">if</span> (strOutput.Exists())
    {
        std::string pBuf = strOutput.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();


        <span class="keywordflow">return</span> pBuf;
    }

    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a0f5c2d836a451925d73ef0bd01140967"></a><!-- doxytag: member="OTAPI_Exec::Instrmnt_GetValidFrom" ref="a0f5c2d836a451925d73ef0bd01140967" args="(const std::string &amp;THE_INSTRUMENT)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_o_t_common_8hpp.html#ad28ff0a3eda18840f6bda5872819167f">time64_t</a> <a class="el" href="class_o_t_a_p_i___exec.html#a0f5c2d836a451925d73ef0bd01140967">OTAPI_Exec::Instrmnt_GetValidFrom</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_INSTRUMENT</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l03269">3269</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (THE_INSTRUMENT.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_INSTRUMENT&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// ------------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a>      strInstrument(THE_INSTRUMENT);
    <span class="comment">// ------------------------------------</span>
    <a class="code" href="class_o_t_payment.html">OTPayment</a> thePayment(strInstrument);

    <span class="keywordflow">if</span> (!thePayment.IsValid())
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Unable to parse instrument:\n\n%s\n\n&quot;</span>,
            __FUNCTION__, strInstrument.Get());
        <span class="keywordflow">return</span> <a class="code" href="_o_t_common_8hpp.html#a5c0893ffd83818f1c3c6b3b7ae92da13">OTTimeGetTimeFromSeconds</a>(-1);
    }
    <span class="comment">// ---------------------------------------</span>
    <span class="keyword">const</span> <span class="keywordtype">bool</span> &amp; bSetValues = thePayment.SetTempValues();
    <span class="comment">// ---------------------------------------</span>
    <span class="keywordflow">if</span> (!bSetValues)
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Unable to load instrument:\n\n%s\n\n&quot;</span>,
            __FUNCTION__, strInstrument.Get());
        <span class="keywordflow">return</span> <a class="code" href="_o_t_common_8hpp.html#a5c0893ffd83818f1c3c6b3b7ae92da13">OTTimeGetTimeFromSeconds</a>(-1);
    }
    <span class="comment">// ---------------------------------------</span>

    <span class="comment">// BY THIS POINT, we have definitely loaded up all the values of the instrument</span>
    <span class="comment">// into the OTPayment object. (Meaning we can now return the requested data...)</span>

    <a class="code" href="class_o_t_string.html">OTString</a> strOutput;
    <a class="code" href="_o_t_common_8hpp.html#ad28ff0a3eda18840f6bda5872819167f">time64_t</a> tOutput = <a class="code" href="_o_t_common_8hpp.html#af4ca9fa2c7c290d647dd18de0a9ac25f">OT_TIME_ZERO</a>;
    <span class="keyword">const</span> <span class="keywordtype">bool</span> &amp;  bGotData = thePayment.GetValidFrom(tOutput); <span class="comment">// &lt;========</span>

    <span class="keywordflow">return</span> bGotData ? tOutput : <a class="code" href="_o_t_common_8hpp.html#a5c0893ffd83818f1c3c6b3b7ae92da13">OTTimeGetTimeFromSeconds</a>(-1);
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae11744cdc4c18885067e263a628268e3"></a><!-- doxytag: member="OTAPI_Exec::Instrmnt_GetValidTo" ref="ae11744cdc4c18885067e263a628268e3" args="(const std::string &amp;THE_INSTRUMENT)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_o_t_common_8hpp.html#ad28ff0a3eda18840f6bda5872819167f">time64_t</a> <a class="el" href="class_o_t_a_p_i___exec.html#ae11744cdc4c18885067e263a628268e3">OTAPI_Exec::Instrmnt_GetValidTo</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_INSTRUMENT</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l03307">3307</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (THE_INSTRUMENT.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_INSTRUMENT&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// ------------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a>      strInstrument(THE_INSTRUMENT);
    <span class="comment">// ------------------------------------</span>
    <a class="code" href="class_o_t_payment.html">OTPayment</a> thePayment(strInstrument);

    <span class="keywordflow">if</span> (!thePayment.IsValid())
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Unable to parse instrument:\n\n%s\n\n&quot;</span>,
            __FUNCTION__, strInstrument.Get());
        <span class="keywordflow">return</span> <a class="code" href="_o_t_common_8hpp.html#a5c0893ffd83818f1c3c6b3b7ae92da13">OTTimeGetTimeFromSeconds</a>(-1);
    }
    <span class="comment">// ---------------------------------------</span>
    <span class="keyword">const</span> <span class="keywordtype">bool</span> &amp; bSetValues = thePayment.SetTempValues();
    <span class="comment">// ---------------------------------------</span>
    <span class="keywordflow">if</span> (!bSetValues)
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Unable to load instrument:\n\n%s\n\n&quot;</span>,
            __FUNCTION__, strInstrument.Get());
        <span class="keywordflow">return</span> <a class="code" href="_o_t_common_8hpp.html#a5c0893ffd83818f1c3c6b3b7ae92da13">OTTimeGetTimeFromSeconds</a>(-1);
    }
    <span class="comment">// ---------------------------------------</span>

    <span class="comment">// BY THIS POINT, we have definitely loaded up all the values of the instrument</span>
    <span class="comment">// into the OTPayment object. (Meaning we can now return the requested data...)</span>

    <a class="code" href="class_o_t_string.html">OTString</a>    strOutput;
    <a class="code" href="_o_t_common_8hpp.html#ad28ff0a3eda18840f6bda5872819167f">time64_t</a>      tOutput = <a class="code" href="_o_t_common_8hpp.html#af4ca9fa2c7c290d647dd18de0a9ac25f">OT_TIME_ZERO</a>;
    <span class="keyword">const</span> <span class="keywordtype">bool</span> &amp;  bGotData = thePayment.GetValidTo(tOutput); <span class="comment">// &lt;========</span>

    <span class="keywordflow">return</span> bGotData ? tOutput : <a class="code" href="_o_t_common_8hpp.html#a5c0893ffd83818f1c3c6b3b7ae92da13">OTTimeGetTimeFromSeconds</a>(-1);
}
</pre></div>
</div>
</div>
<a class="anchor" id="acdb88af66f7b63a075f4fa744105854a"></a><!-- doxytag: member="OTAPI_Exec::IsBasketCurrency" ref="acdb88af66f7b63a075f4fa744105854a" args="(const std::string &amp;ASSET_TYPE_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_a_p_i___exec.html#acdb88af66f7b63a075f4fa744105854a">OTAPI_Exec::IsBasketCurrency</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ASSET_TYPE_ID</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>-------------------------------------------------------------- IS BASKET CURRENCY ?</p>
<p>Tells you whether or not a given asset type is actually a basket currency. </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l11989">11989</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (ASSET_TYPE_ID.empty())      { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;ASSET_TYPE_ID&quot;</span>      ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theAssetTypeID(ASSET_TYPE_ID);

    <span class="keywordflow">if</span> (<a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t_a_p_i___exec.html#acdb88af66f7b63a075f4fa744105854a">IsBasketCurrency</a>(theAssetTypeID))
        <span class="keywordflow">return</span> <span class="keyword">true</span>;
    <span class="keywordflow">else</span>
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a7de7a08dccfd1343129932f3459b8298"></a><!-- doxytag: member="OTAPI_Exec::IsNym_RegisteredAtServer" ref="a7de7a08dccfd1343129932f3459b8298" args="(const std::string &amp;NYM_ID, const std::string &amp;SERVER_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_a_p_i___exec.html#a7de7a08dccfd1343129932f3459b8298">OTAPI_Exec::IsNym_RegisteredAtServer</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>NYM_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l02396">2396</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (NYM_ID.empty())             { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;NYM_ID&quot;</span>             ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (SERVER_ID.empty())          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>  theNymID(NYM_ID),
        theServerID(SERVER_ID);

    <span class="keywordtype">bool</span> bSuccess = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a1124d87febc45eec06c1c9e8a2cc91da">IsNym_RegisteredAtServer</a>(theNymID, theServerID);

    <span class="keywordflow">return</span> (bSuccess) ? <span class="keyword">true</span> : <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="abc76e39d38dcea1d999c410272f6cd53"></a><!-- doxytag: member="OTAPI_Exec::issueAssetType" ref="abc76e39d38dcea1d999c410272f6cd53" args="(const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;THE_CONTRACT)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_a_p_i___exec.html#abc76e39d38dcea1d999c410272f6cd53">OTAPI_Exec::issueAssetType</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_CONTRACT</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>-------------------------------------------------------------------- ISSUE ASSET TYPE -- Ask the server to issue a new asset type.</p>
<p>THE_CONTRACT is actually a string containing the asset contract itself. (And the server will not issue the new asset type unless the key in the contract matches YOUR UserID. Only the contract signer may issue it.)</p>
<p>Returns int32_t: -1 means error; no message was sent. -2 means the message was sent, but the request number must be passed as a string, so call GetLargeRequestNum. 0 means NO error, but also: no message was sent. &gt;0 means NO error, and the message was sent, and the request number fits into an integer... ...and in fact the requestNum IS the return value! ===&gt; In 99% of cases, this LAST option is what actually happens!! </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l12435">12435</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty())    { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>    ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID.empty())      { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>      ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (THE_CONTRACT.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_CONTRACT&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theServerID(SERVER_ID), theUserID(USER_ID);

    <a class="code" href="class_o_t_string.html">OTString</a> strContract(THE_CONTRACT);

    <span class="keywordflow">return</span> <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a8ab12884841613694afed4593e780e5a">issueAssetType</a>(theServerID, theUserID, strContract);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a56b0f22eb7eb90ec4c858ec204c92ab3"></a><!-- doxytag: member="OTAPI_Exec::issueBasket" ref="a56b0f22eb7eb90ec4c858ec204c92ab3" args="(const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;THE_BASKET)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_a_p_i___exec.html#a56b0f22eb7eb90ec4c858ec204c92ab3">OTAPI_Exec::issueBasket</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_BASKET</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>-------------------------------------------------------------------------- ISSUE BASKET CURRENCY</p>
<p>Issue a new asset type based on a BASKET of other asset types! You cannot call this function until you first set up the BASKET_INFO object. I will provide functions for setting up that object, so that you can then call this function to actually message the server with your request.</p>
<p>ANYONE can issue a new basket type, but they will have no control over the issuer account. Normally when issuing a currency, you therefore control the issuer account. But with baskets, that is managed internally by the server. This means anyone can define a basket, and all may use it -- but no one controls it except the server.</p>
<p>Returns int32_t: -1 means error; no message was sent. -2 means the message was sent, but the request number must be passed as a string, so call GetLargeRequestNum. 0 means NO error, but also: no message was sent. &gt;0 means NO error, and the message was sent, and the request number fits into an integer... ...and in fact the requestNum IS the return value! ===&gt; In 99% of cases, this LAST option is what actually happens!! </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l12688">12688</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty())  { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>  ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID.empty())    { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>    ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (THE_BASKET.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_BASKET&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theServerID(SERVER_ID), theUserID(USER_ID);

    <a class="code" href="class_o_t_string.html">OTString</a> strBasketInfo(THE_BASKET);

    <span class="keywordflow">return</span> <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#ab691e0c2f1b8728b31babf07d958168a">issueBasket</a>(theServerID, theUserID, strBasketInfo);
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab0679f69605179746070b0acb003bbab"></a><!-- doxytag: member="OTAPI_Exec::issueMarketOffer" ref="ab0679f69605179746070b0acb003bbab" args="(const std::string &amp;ASSET_ACCT_ID, const std::string &amp;CURRENCY_ACCT_ID, const int64_t &amp;MARKET_SCALE, const int64_t &amp;MINIMUM_INCREMENT, const int64_t &amp;TOTAL_ASSETS_ON_OFFER, const int64_t &amp;PRICE_LIMIT, const bool &amp;bBuyingOrSelling, const time64_t &amp;LIFESPAN_IN_SECONDS, const std::string &amp;STOP_SIGN, const int64_t &amp;ACTIVATION_PRICE)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_a_p_i___exec.html#ab0679f69605179746070b0acb003bbab">OTAPI_Exec::issueMarketOffer</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ASSET_ACCT_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>CURRENCY_ACCT_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int64_t &amp;&#160;</td>
          <td class="paramname"><em>MARKET_SCALE</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int64_t &amp;&#160;</td>
          <td class="paramname"><em>MINIMUM_INCREMENT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int64_t &amp;&#160;</td>
          <td class="paramname"><em>TOTAL_ASSETS_ON_OFFER</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int64_t &amp;&#160;</td>
          <td class="paramname"><em>PRICE_LIMIT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const bool &amp;&#160;</td>
          <td class="paramname"><em>bBuyingOrSelling</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="_o_t_common_8hpp.html#ad28ff0a3eda18840f6bda5872819167f">time64_t</a> &amp;&#160;</td>
          <td class="paramname"><em>LIFESPAN_IN_SECONDS</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>STOP_SIGN</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int64_t &amp;&#160;</td>
          <td class="paramname"><em>ACTIVATION_PRICE</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>-------------------------------------------------- ISSUE MARKET OFFER</p>
<p>Returns int32_t: -1 means error; no message was sent. -2 means the message was sent, but the request number must be passed as a string, so call GetLargeRequestNum. 0 means NO error, but also: no message was sent. &gt;0 means NO error, and the message was sent, and the request number fits into an integer... ...and in fact the requestNum IS the return value! ===&gt; In 99% of cases, this LAST option is what actually happens!! </p>

<p>Reimplemented in <a class="el" href="class_mock___o_t_a_p_i___exec.html#a4d3c3d1b83fe39720034a4a3b35a1dca">Mock_OTAPI_Exec</a>.</p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l13293">13293</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (ASSET_ACCT_ID.empty())     { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>,     __FUNCTION__, <span class="stringliteral">&quot;ASSET_ACCT_ID&quot;</span>   ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (CURRENCY_ACCT_ID.empty())  { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>,     __FUNCTION__, <span class="stringliteral">&quot;CURRENCY_ACCT_ID&quot;</span>); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// -------------------------------------------</span>
    <span class="keywordflow">if</span> (0 &gt; MARKET_SCALE)          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Negative: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;MARKET_SCALE&quot;</span>         ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (0 &gt; MINIMUM_INCREMENT)     { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Negative: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;MINIMUM_INCREMENT&quot;</span>    ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (0 &gt; TOTAL_ASSETS_ON_OFFER) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Negative: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;TOTAL_ASSETS_ON_OFFER&quot;</span>); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (0 &gt; PRICE_LIMIT)           { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Negative: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;PRICE_LIMIT&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (0 &gt; ACTIVATION_PRICE)      { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Negative: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;ACTIVATION_PRICE&quot;</span>     ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// -------------------------------------------</span>
    <span class="keywordtype">char</span> cStopSign = 0;

    <span class="keywordflow">if</span> (0 == STOP_SIGN.compare(<span class="stringliteral">&quot;&lt;&quot;</span>))
        cStopSign = <span class="charliteral">&#39;&lt;&#39;</span>;
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (0 == STOP_SIGN.compare(<span class="stringliteral">&quot;&gt;&quot;</span>))
        cStopSign = <span class="charliteral">&#39;&gt;&#39;</span>;
    <span class="comment">// -------------------------------------------</span>
    <span class="keywordflow">if</span> (!STOP_SIGN.empty() &amp;&amp;
        (
        (ACTIVATION_PRICE == 0) ||
        ((cStopSign != <span class="charliteral">&#39;&lt;&#39;</span>) &amp;&amp; (cStopSign != <span class="charliteral">&#39;&gt;&#39;</span>))
        )) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: If STOP_SIGN is provided, it must be \&quot;&lt;\&quot; or \&quot;&gt;\&quot;, and in that case ACTIVATION_PRICE must be non-zero.\n&quot;</span>, __FUNCTION__); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// -------------------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>  theAssetAcctID(ASSET_ACCT_ID),  theCurrencyAcctID(CURRENCY_ACCT_ID);
    <span class="comment">// -------------------------------------------</span>
    <span class="keyword">const</span> std::string str_asset_server_id    = <a class="code" href="class_o_t_a_p_i___exec.html#afb2255e4fb7fb27bbeebe753eb827770">OTAPI_Exec::GetAccountWallet_ServerID</a>(ASSET_ACCT_ID);
    <span class="keyword">const</span> std::string str_currency_server_id = <a class="code" href="class_o_t_a_p_i___exec.html#afb2255e4fb7fb27bbeebe753eb827770">OTAPI_Exec::GetAccountWallet_ServerID</a>(CURRENCY_ACCT_ID);
    <span class="comment">// -------------------------------------------</span>
    <span class="keyword">const</span> std::string str_asset_nym_id       = <a class="code" href="class_o_t_a_p_i___exec.html#a5c11f6d8c1dd9024788124685c8bb8d8">OTAPI_Exec::GetAccountWallet_NymID</a>(ASSET_ACCT_ID);
    <span class="keyword">const</span> std::string str_currency_nym_id    = <a class="code" href="class_o_t_a_p_i___exec.html#a5c11f6d8c1dd9024788124685c8bb8d8">OTAPI_Exec::GetAccountWallet_NymID</a>(CURRENCY_ACCT_ID);
    <span class="comment">// -------------------------------------------</span>
    <span class="keywordflow">if</span> (str_asset_server_id.empty() || str_currency_server_id.empty() || str_asset_nym_id.empty() || str_currency_nym_id.empty())
    { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Failed determining server or nym ID for either asset or currency account.\n&quot;</span>, __FUNCTION__); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// -------------------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>  theAssetServerID    (str_asset_server_id),
                        theAssetUserID      (str_asset_nym_id),
                        theCurrencyServerID (str_currency_server_id),
                        theCurrencyUserID   (str_currency_nym_id);
    <span class="comment">// -------------------------------------------</span>
    <span class="keywordflow">if</span> (theAssetServerID != theCurrencyServerID) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: The accounts provided are on two different servers.\n&quot;</span>,    __FUNCTION__); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (theAssetUserID   != theCurrencyUserID)   { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: The accounts provided are owned by two different nyms.\n&quot;</span>, __FUNCTION__); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// -------------------------------------------</span>
    <span class="comment">// 1 is the minimum value here.</span>
    <span class="comment">//</span>
    int64_t lMarketScale        = (0 == MARKET_SCALE)           ? 1 : MARKET_SCALE;
    int64_t lMinIncrement       = (0 == MINIMUM_INCREMENT)      ? 1 : MINIMUM_INCREMENT;
    int64_t lTotalAssetsOnOffer = (0 == TOTAL_ASSETS_ON_OFFER)  ? 1 : TOTAL_ASSETS_ON_OFFER;
    int64_t lPriceLimit         =                                     PRICE_LIMIT; <span class="comment">// 0 is allowed now, for market orders.</span>
    <span class="comment">// -------------------------------------------</span>
    <span class="keywordflow">return</span> <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#acadf476636347f6d2e748a3ac517c7c8">issueMarketOffer</a>(theAssetServerID, theAssetUserID,
                                                 <span class="comment">// -------------------------------------------</span>
                                                 theAssetAcctID,
                                                 theCurrencyAcctID,
                                                 <span class="comment">// -------------------------------------------</span>
                                                 static_cast&lt;int64_t&gt;(lMarketScale),
                                                 static_cast&lt;int64_t&gt;(lMinIncrement),
                                                 static_cast&lt;int64_t&gt;(lTotalAssetsOnOffer),
                                                 static_cast&lt;int64_t&gt;(lPriceLimit),
                                                 bBuyingOrSelling,
                                                 LIFESPAN_IN_SECONDS,
                                                 cStopSign,
                                                 static_cast&lt;int64_t&gt;(ACTIVATION_PRICE));
}
</pre></div>
</div>
</div>
<a class="anchor" id="a3c094e341789c8f2442d519a0b89163b"></a><!-- doxytag: member="OTAPI_Exec::killMarketOffer" ref="a3c094e341789c8f2442d519a0b89163b" args="(const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ASSET_ACCT_ID, const int64_t &amp;TRANSACTION_NUMBER)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_a_p_i___exec.html#a3c094e341789c8f2442d519a0b89163b">OTAPI_Exec::killMarketOffer</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ASSET_ACCT_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int64_t &amp;&#160;</td>
          <td class="paramname"><em>TRANSACTION_NUMBER</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l13236">13236</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty())          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID.empty())            { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>            ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (ASSET_ACCT_ID.empty())      { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;ASSET_ACCT_ID&quot;</span>      ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (0 &gt; TRANSACTION_NUMBER)     { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Negative: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;TRANSACTION_NUMBER&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keyword">const</span> int64_t lTransactionNumber = TRANSACTION_NUMBER;

    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theServerID(SERVER_ID), theUserID(USER_ID), theAssetAcctID(ASSET_ACCT_ID);

    <span class="keywordflow">return</span> <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#ade192b1b17ef3814b79e76afe7badb8a">cancelCronItem</a>(theServerID, theUserID, theAssetAcctID, static_cast&lt;int64_t&gt;(lTransactionNumber));
}
</pre></div>
</div>
</div>
<a class="anchor" id="af480784697d3e4a5d61be6024b152591"></a><!-- doxytag: member="OTAPI_Exec::killPaymentPlan" ref="af480784697d3e4a5d61be6024b152591" args="(const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;FROM_ACCT_ID, const int64_t &amp;TRANSACTION_NUMBER)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_a_p_i___exec.html#af480784697d3e4a5d61be6024b152591">OTAPI_Exec::killPaymentPlan</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>FROM_ACCT_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int64_t &amp;&#160;</td>
          <td class="paramname"><em>TRANSACTION_NUMBER</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l13264">13264</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty())          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID.empty())            { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>            ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (FROM_ACCT_ID.empty())       { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;FROM_ACCT_ID&quot;</span>       ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> ( 0 &gt; TRANSACTION_NUMBER)    { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Negative: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;TRANSACTION_NUMBER&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keyword">const</span> int64_t lTransactionNumber = TRANSACTION_NUMBER;

    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theServerID(SERVER_ID), theUserID(USER_ID), theFromAcctID(FROM_ACCT_ID);

    <span class="keywordflow">return</span> <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#ade192b1b17ef3814b79e76afe7badb8a">cancelCronItem</a>(theServerID, theUserID, theFromAcctID, static_cast&lt;int64_t&gt;(lTransactionNumber));
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab1c6a2da160b7c47081e3a09756899a7"></a><!-- doxytag: member="OTAPI_Exec::Ledger_AddTransaction" ref="ab1c6a2da160b7c47081e3a09756899a7" args="(const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ACCOUNT_ID, const std::string &amp;THE_LEDGER, const std::string &amp;THE_TRANSACTION)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#ab1c6a2da160b7c47081e3a09756899a7">OTAPI_Exec::Ledger_AddTransaction</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ACCOUNT_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_LEDGER</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_TRANSACTION</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Add a transaction to a ledger. </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l08782">8782</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty())          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID.empty())            { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>            ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (ACCOUNT_ID.empty())         { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;ACCOUNT_ID&quot;</span>         ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (THE_LEDGER.empty())         { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_LEDGER&quot;</span>         ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (THE_TRANSACTION.empty())    { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_TRANSACTION&quot;</span>    ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theServerID(SERVER_ID), theUserID(USER_ID), theAccountID(ACCOUNT_ID);

    <a class="code" href="class_o_t_string.html">OTString</a> strLedger(THE_LEDGER);
    <a class="code" href="class_o_t_string.html">OTString</a> strTransaction(THE_TRANSACTION);

    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pNym = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#aa53f110b77dee2bc71b70906ca64fbbc">GetOrLoadPrivateNym</a>(theUserID, <span class="keyword">false</span>, __FUNCTION__); <span class="comment">// These copiously log, and ASSERT.</span>
    <span class="keywordflow">if</span> (NULL == pNym) <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    <span class="comment">// -----------------------------------------------------</span>

    <a class="code" href="class_o_t_ledger.html">OTLedger</a> theLedger(theUserID, theAccountID, theServerID);

    <span class="keywordflow">if</span> (<span class="keyword">false</span> == theLedger.LoadLedgerFromString(strLedger))
    {
        <a class="code" href="class_o_t_string.html">OTString</a> strAcctID(theAccountID);
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error loading ledger from string. Acct ID: %s\n&quot;</span>, __FUNCTION__, strAcctID.Get());
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    }
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">false</span> == theLedger.VerifyAccount(*pNym))
    {
        <a class="code" href="class_o_t_string.html">OTString</a> strAcctID(theAccountID);
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error verifying ledger in OTAPI_Exec::Ledger_AddTransaction. Acct ID: %s\n&quot;</span>, __FUNCTION__, strAcctID.Get());
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    }

    <span class="comment">// At this point, I know theLedger loaded and verified successfully.</span>
    <span class="comment">// -----------------------------------------------------</span>

    <a class="code" href="class_o_t_transaction.html">OTTransaction</a> * pTransaction = <span class="keyword">new</span> <a class="code" href="class_o_t_transaction.html">OTTransaction</a>(theUserID, theAccountID, theServerID);
    <span class="keywordflow">if</span> (NULL == pTransaction)   { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error allocating memory in the OTAPI: %s !\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;pTransaction&quot;</span>    ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keywordflow">if</span> (<span class="keyword">false</span> == pTransaction-&gt;<a class="code" href="class_o_t_contract.html#a36300e34dcd94ed7006d98b392d46815">LoadContractFromString</a>(strTransaction))
    {
        <a class="code" href="class_o_t_string.html">OTString</a> strAcctID(theAccountID);
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error loading transaction from string. Acct ID: %s\n&quot;</span>, __FUNCTION__, strAcctID.Get());
        <span class="keyword">delete</span> pTransaction; pTransaction = NULL;
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    }
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">false</span> == pTransaction-&gt;<a class="code" href="class_o_t_transaction.html#afba0d981b40568e307178f908788fd7b">VerifyAccount</a>(*pNym))
    {
        <a class="code" href="class_o_t_string.html">OTString</a> strAcctID(theAccountID);
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error verifying transaction. Acct ID: %s\n&quot;</span>, __FUNCTION__, strAcctID.Get());
        <span class="keyword">delete</span> pTransaction; pTransaction = NULL;
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    }
    <span class="comment">// -----------------------------------------------------</span>
    <span class="comment">// At this point, I know pTransaction loaded and verified successfully.</span>
    <span class="comment">// So let&#39;s add it to the ledger, save, and return updated ledger in string form.</span>

    theLedger.AddTransaction(*pTransaction); <span class="comment">// Ledger now &quot;owns&quot; it and will handle cleanup.</span>

    theLedger.<a class="code" href="class_o_t_contract.html#aae54340526fbd8eb8a18de27a4b97c83">ReleaseSignatures</a>();
    theLedger.SignContract(*pNym);
    theLedger.SaveContract();

    <a class="code" href="class_o_t_string.html">OTString</a> strOutput(theLedger); <span class="comment">// For the output</span>

    std::string pBuf = strOutput.Get();



    <span class="keywordflow">return</span> pBuf;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a6a592a8bd48d7e006fdfe054e79b47ce"></a><!-- doxytag: member="OTAPI_Exec::Ledger_CreateResponse" ref="a6a592a8bd48d7e006fdfe054e79b47ce" args="(const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ACCOUNT_ID, const std::string &amp;ORIGINAL_LEDGER)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a6a592a8bd48d7e006fdfe054e79b47ce">OTAPI_Exec::Ledger_CreateResponse</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ACCOUNT_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ORIGINAL_LEDGER</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Creates a new 'response' ledger, set up with the right Server ID, etc, so you can add the 'response' transactions to it, one by one. (Pass in the original ledger that you are responding to, as it uses the data from it to set up the response.) </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l08308">8308</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty())       { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>       ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID.empty())         { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>         ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (ACCOUNT_ID.empty())      { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;ACCOUNT_ID&quot;</span>      ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (ORIGINAL_LEDGER.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;ORIGINAL_LEDGER&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theServerID(SERVER_ID), theUserID(USER_ID), theAccountID(ACCOUNT_ID);
    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pNym = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#aa53f110b77dee2bc71b70906ca64fbbc">GetOrLoadPrivateNym</a>(theUserID, <span class="keyword">false</span>, __FUNCTION__); <span class="comment">// These copiously log, and ASSERT.</span>
    <span class="keywordflow">if</span> (NULL == pNym) <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    <span class="comment">// -----------------------------------------------------</span>
    <span class="comment">// Let&#39;s load up the ledger (an inbox) that was passed in...</span>
    <a class="code" href="class_o_t_string.html">OTString</a> strOriginalLedger(ORIGINAL_LEDGER);
    <a class="code" href="class_o_t_ledger.html">OTLedger</a> theOriginalLedger(theUserID, theAccountID, theServerID);

    <span class="keywordflow">if</span> (<span class="keyword">false</span> == theOriginalLedger.LoadLedgerFromString(strOriginalLedger))
    {
        <a class="code" href="class_o_t_string.html">OTString</a> strAcctID(theAccountID);
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error loading ledger from string. Acct ID: %s\n&quot;</span>, __FUNCTION__, strAcctID.Get());
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    }

    <span class="keywordflow">if</span> (<span class="keyword">false</span> == theOriginalLedger.VerifyAccount(*pNym))
    {
        <a class="code" href="class_o_t_string.html">OTString</a> strAcctID(theAccountID);
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error verifying original ledger. Acct ID: %s\n&quot;</span>, __FUNCTION__, strAcctID.Get());
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    }
    <span class="comment">// -----------------------------------------------------</span>
    <span class="comment">// By this point, the ledger is loaded properly from the string,</span>
    <span class="comment">// Let&#39;s create the response to it.</span>
    <a class="code" href="class_o_t_ledger.html">OTLedger</a> * pResponseLedger = <a class="code" href="class_o_t_ledger.html#ae255257ef1a25233ca772d81ab730643">OTLedger::GenerateLedger</a>(theUserID, theAccountID,
        theServerID, <a class="code" href="class_o_t_ledger.html#ac03f2514d0c6ae00147c5d53bf19591aa78e88da32ff989182e4eead9926e7916">OTLedger::message</a>);<span class="comment">// bCreateFile=false</span>
    <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTLedger&gt;</a> theResponseAngel(pResponseLedger); <span class="comment">// Angel will handle cleanup.</span>

    <span class="keywordflow">if</span> (NULL == pResponseLedger)
    {
        <a class="code" href="class_o_t_string.html">OTString</a> strAcctID(theAccountID);
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error generating response ledger. Acct ID: %s\n&quot;</span>, __FUNCTION__, strAcctID.Get());
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    }
    <span class="comment">// -----------------------------------------------------</span>
    pResponseLedger-&gt;<a class="code" href="class_o_t_contract.html#abd60037fe655ee8cae9a3ece5d1e2ea6">SignContract</a>(*pNym);
    pResponseLedger-&gt;<a class="code" href="class_o_t_contract.html#a363ae430d4fd9256ab8364dbafb95444">SaveContract</a>();

    <a class="code" href="class_o_t_string.html">OTString</a> strOutput(*pResponseLedger); <span class="comment">// For the output</span>

    std::string pBuf = strOutput.Get();

    <span class="keywordflow">return</span> pBuf;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae43e5ed33e7e2281c92a35818338c953"></a><!-- doxytag: member="OTAPI_Exec::Ledger_FinalizeResponse" ref="ae43e5ed33e7e2281c92a35818338c953" args="(const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ACCOUNT_ID, const std::string &amp;THE_LEDGER)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#ae43e5ed33e7e2281c92a35818338c953">OTAPI_Exec::Ledger_FinalizeResponse</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ACCOUNT_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_LEDGER</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>------------------------------------------------------------------------- (Response Ledger) LEDGER FINALIZE RESPONSE</p>
<p>AFTER you have set up all the transaction responses, call THIS function to finalize them by adding a BALANCE AGREEMENT.</p>
<p>MAKE SURE you have the latest copy of the account file, inbox file, and outbox file, since we will need those in here to create the balance statement properly.</p>
<p>(Client software may wish to check those things, when downloaded, against the local copies and the local signed receipts. In this way, clients can protect themselves against malicious servers.) </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l09222">9222</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty())          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID.empty())            { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>            ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (ACCOUNT_ID.empty())         { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;ACCOUNT_ID&quot;</span>         ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (THE_LEDGER.empty())         { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_LEDGER&quot;</span>         ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>  theServerID(SERVER_ID),
                        theUserID(USER_ID),
                        theAcctID(ACCOUNT_ID);

    <a class="code" href="class_o_t_string.html">OTString</a> strLedger(THE_LEDGER), strServerID(theServerID);
    <span class="comment">// --------------------------------------------------------------------</span>
    <a class="code" href="class_o_t_server_contract.html">OTServerContract</a> * pServer = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#afa4e2d39d29061b609d81f094c2ca25c">GetServer</a>(theServerID, __FUNCTION__);
    <span class="keywordflow">if</span> (NULL == pServer) <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    <span class="comment">// By this point, pServer is a good pointer.  (No need to cleanup.)</span>
    <span class="comment">// --------------------------------------------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pServerNym = pServer-&gt;<a class="code" href="class_o_t_contract.html#affb6a11ee52ad13fd6e1e1ef6e4bbdc1">GetContractPublicNym</a>();

    <span class="keywordflow">if</span> (NULL == pServerNym)
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: No Contract Nym found in that Server Contract.\n&quot;</span>, __FUNCTION__);
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    }
    <span class="comment">// By this point, pServerNym is a good pointer.  (No need to cleanup.)</span>
    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pNym = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#aa53f110b77dee2bc71b70906ca64fbbc">GetOrLoadPrivateNym</a>(theUserID, <span class="keyword">false</span>, __FUNCTION__); <span class="comment">// This logs, ASSERTs, etc.</span>
    <span class="keywordflow">if</span> (NULL == pNym) <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    <span class="comment">// By this point, pNym is a good pointer, and is on the wallet. (No need to cleanup.)</span>
    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_ledger.html">OTLedger</a> theLedger(theUserID, theAcctID, theServerID);

    <span class="keywordflow">if</span> (<span class="keyword">false</span> == theLedger.LoadLedgerFromString(strLedger))
    {
        <a class="code" href="class_o_t_string.html">OTString</a> strAcctID(theAcctID);
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error loading ledger from string. Acct ID: %s\n&quot;</span>, __FUNCTION__, strAcctID.Get());
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    }
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">false</span> == theLedger.VerifyAccount(*pNym))
    {
        <a class="code" href="class_o_t_string.html">OTString</a> strAcctID(theAcctID);
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error verifying ledger. Acct ID: %s\n&quot;</span>, __FUNCTION__, strAcctID.Get());
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    }

    <span class="comment">// At this point, I know theLedger loaded and verified successfully.</span>
    <span class="comment">// (This is the &#39;response&#39; ledger that the user previously generated</span>
    <span class="comment">// in response to the various inbox receipts, and now he is loading</span>
    <span class="comment">// it up with responses that this function will finalize for sending.)</span>
    <span class="comment">// -----------------------------------------------------</span>

    <span class="comment">// First, check to see if there is a processInbox transaction already on</span>
    <span class="comment">// the ledger...</span>
    <a class="code" href="class_o_t_transaction.html">OTTransaction</a> * pTransaction = theLedger.GetTransaction(<a class="code" href="class_o_t_transaction.html#af6b54636f1000e09f19d1c7a7886e1f8a17de28d6bffb971efeebbd9a2fff5ada">OTTransaction::processInbox</a>);

    <span class="comment">// If it&#39;s not already there, create it and add it.</span>
    <span class="keywordflow">if</span> (NULL == pTransaction)
    {
        <a class="code" href="class_o_t_string.html">OTString</a> strAcctID(theAcctID);
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error finding processInbox transaction for AcctID: %s\n&quot;</span>, __FUNCTION__, strAcctID.Get());
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    }
    <span class="comment">// At this point32_t I know pTransaction is a processInbox transaction, ready to go,</span>
    <span class="comment">// and that theLedger will handle any cleanup issues related to it.</span>
    <span class="comment">// -----------------------------------------------------</span>
    <span class="comment">// If balance statement is already there, return.</span>
    <span class="keywordflow">if</span> (NULL != pTransaction-&gt;<a class="code" href="class_o_t_transaction.html#a62bf5069d7a7fda92fa1d6746a75bb49">GetItem</a>(<a class="code" href="class_o_t_item.html#a03db091faaab100aadc455f4ebe2c5d1acc6d6f33e3d865c88f56b55d1c06dbec">OTItem::balanceStatement</a>))
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: this response has already been finalized.\n&quot;</span>, __FUNCTION__);
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    }
    <span class="comment">// -------------------------------------------------------------</span>
    <span class="comment">// Get the account.</span>
    <a class="code" href="class_o_t_account.html">OTAccount</a> * pAccount = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a263e050929c3f000ce4172dfbc727149">GetAccount</a>(theAcctID, __FUNCTION__);
    <span class="keywordflow">if</span> (NULL == pAccount) <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    <span class="comment">// -------------------------------------------------------------</span>
    <span class="comment">// Load the inbox and outbox.</span>

    <a class="code" href="class_o_t_ledger.html">OTLedger</a> theInbox (theUserID, theAcctID, theServerID);
    <a class="code" href="class_o_t_ledger.html">OTLedger</a> theOutbox(theUserID, theAcctID, theServerID);

    <span class="keywordflow">if</span> (!theInbox.LoadInbox() || !theInbox.VerifyAccount(*pNym))
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Unable to load or verify Inbox for acct %s\n&quot;</span>, __FUNCTION__, ACCOUNT_ID.c_str());
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    }

    <span class="keywordflow">if</span> (!theOutbox.LoadOutbox() || !theOutbox.VerifyAccount(*pNym))
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Unable to load or verify Outbox for acct %s\n&quot;</span>, __FUNCTION__, ACCOUNT_ID.c_str());
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    }

    <span class="comment">// -------------------------------------------------------------</span>

    <span class="comment">// Setup balance agreement item here!</span>
    <span class="comment">// Adapting code from OTServer... with comments:</span>
    <span class="comment">//</span>
    <span class="comment">// This transaction accepts various incoming pending transfers.</span>
    <span class="comment">// So when it&#39;s all done, my balance will be higher.</span>
    <span class="comment">// AND pending inbox items will be removed from my inbox.</span>
    <span class="comment">//</span>
    <span class="comment">// I would like to not even process the whole giant loop below,</span>
    <span class="comment">// if I can verify here now that the balance agreement is wrong.</span>
    <span class="comment">//</span>
    <span class="comment">// Thus I will actually loop through the acceptPending items in pTransaction, and then for each one, I&#39;ll</span>
    <span class="comment">// lookup the ACTUAL transaction in the inbox, and get its ACTUAL value. (And total them all up.)</span>
    <span class="comment">//</span>
    <span class="comment">// The total of those, (WITHOUT the user having to tell me what it will be, since I&#39;m looking them all up),</span>
    <span class="comment">// should equal the difference in the account balance! Meaning the current balance plus that total will be</span>
    <span class="comment">// the expected NEW balance, according to this balance agreement -- if it wants to be approved, that is.</span>
    <span class="comment">//</span>
    <span class="comment">//</span>

    <span class="keywordtype">bool</span> bSuccessFindingAllTransactions = <span class="keyword">true</span>;
    int64_t lTotalBeingAccepted = 0;

    std::list&lt;int64_t&gt; theListOfInboxReceiptsBeingRemoved;

    <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> theTempNym;

    <a class="code" href="_o_t_storage_8hpp.html#a4a94c3435a932ed34e5755f3f472547c">FOR_EACH_IT</a>(<a class="code" href="_o_t_item_8hpp.html#afed69f7c75742cc24ea837d6589e9d19">listOfItems</a>, pTransaction-&gt;<a class="code" href="class_o_t_transaction.html#a9821c541d3d5f92e378320c6aa190c18">GetItemList</a>(), it_bigloop)
    {
        <a class="code" href="class_o_t_item.html">OTItem</a> * pItem = *it_bigloop;
        <span class="keywordflow">if</span> (NULL == pItem)  { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Pointer: %s should not have been \&quot;\&quot;.\n&quot;</span>,
                                            __FUNCTION__, <span class="stringliteral">&quot;pItem&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

        <span class="keywordflow">if</span> ((pItem-&gt;<a class="code" href="class_o_t_item.html#a2f4535b271f23b7c2b6b1dbabf279ffe">GetType</a>() == <a class="code" href="class_o_t_item.html#a03db091faaab100aadc455f4ebe2c5d1ae3e8669bd29e01bd4ed8d1fa35ba3773">OTItem::acceptPending</a>) ||
            (pItem-&gt;<a class="code" href="class_o_t_item.html#a2f4535b271f23b7c2b6b1dbabf279ffe">GetType</a>() == <a class="code" href="class_o_t_item.html#a03db091faaab100aadc455f4ebe2c5d1a357f900e6fdf2a978e3bc03f11d9cc75">OTItem::acceptItemReceipt</a>))
        {

<span class="comment">//            if (theInbox.GetTransactionCountInRefTo(pItem-&gt;GetReferenceToNum()) &gt; 1)</span>
<span class="comment">//                OTLog::vError(&quot;%s: WARNING: There are MULTIPLE receipts &#39;in reference to&#39; %lld. (It will return the first one...)\n&quot;,</span>
<span class="comment">//                              __FUNCTION__, pItem-&gt;GetReferenceToNum());</span>


            <a class="code" href="class_o_t_transaction.html">OTTransaction</a> * pServerTransaction = theInbox.GetTransaction(pItem-&gt;<a class="code" href="class_o_t_transaction_type.html#a08578043dac9d53f7a5a879b02785d46">GetReferenceToNum</a>());

            <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(1, <span class="stringliteral">&quot;%s: Checking inbox for expected pending or receipt (%lld) Nym: %s\n&quot;</span>,
                           __FUNCTION__, pItem-&gt;<a class="code" href="class_o_t_transaction_type.html#a08578043dac9d53f7a5a879b02785d46">GetReferenceToNum</a>(), USER_ID.c_str()); <span class="comment">// temp remove</span>

            <span class="keywordflow">if</span> (NULL == pServerTransaction)
            {
                bSuccessFindingAllTransactions = <span class="keyword">false</span>;
                <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Expected receipt %lld NOT found! (Do you have the latest inbox?)\n&quot;</span>,
                               __FUNCTION__, pItem-&gt;<a class="code" href="class_o_t_transaction_type.html#a08578043dac9d53f7a5a879b02785d46">GetReferenceToNum</a>());
                <span class="keywordflow">break</span>;
            }
            <span class="keywordflow">else</span>
            {
                bSuccessFindingAllTransactions = <span class="keyword">true</span>;

                <span class="comment">// IF I&#39;m accepting a pending transfer, then add the amount to my counter of total amount being accepted.</span>
                <span class="comment">//</span>
                <span class="comment">// ELSE if I&#39;m accepting an item receipt (which will remove my responsibility for that item) then add it</span>
                <span class="comment">// to the temp Nym (which is a list of transaction numbers that will be removed from my responsibility if</span>
                <span class="comment">// all is successful.)  Also remove all the Temp Nym numbers from pNym, so we can verify the Balance</span>
                <span class="comment">// Statement AS IF they were already removed. Add them</span>
                <span class="comment">//</span>
                <span class="keywordflow">if</span> (pItem-&gt;<a class="code" href="class_o_t_item.html#a2f4535b271f23b7c2b6b1dbabf279ffe">GetType</a>() == <a class="code" href="class_o_t_item.html#a03db091faaab100aadc455f4ebe2c5d1ae3e8669bd29e01bd4ed8d1fa35ba3773">OTItem::acceptPending</a>) <span class="comment">// acceptPending</span>
                    lTotalBeingAccepted += pServerTransaction-&gt;<a class="code" href="class_o_t_transaction.html#a7a01fdc95811465496f953c5a50dcef6">GetReceiptAmount</a>();   <span class="comment">// &lt;============================</span>

                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pItem-&gt;<a class="code" href="class_o_t_item.html#a2f4535b271f23b7c2b6b1dbabf279ffe">GetType</a>() == <a class="code" href="class_o_t_item.html#a03db091faaab100aadc455f4ebe2c5d1a357f900e6fdf2a978e3bc03f11d9cc75">OTItem::acceptItemReceipt</a>) <span class="comment">// acceptItemReceipt</span>
                {
                    <span class="comment">// What number do I remove here? the user is accepting a transfer receipt, which</span>
                    <span class="comment">// is in reference to the recipient&#39;s acceptPending. THAT item is in reference to</span>
                    <span class="comment">// my original transfer (or contains a cheque with my original number.) (THAT&#39;s the # I need.)</span>
                    <span class="comment">//</span>
                    <a class="code" href="class_o_t_string.html">OTString</a> strOriginalItem;
                    pServerTransaction-&gt;<a class="code" href="class_o_t_transaction_type.html#a88d404b8cebd7da409e551396cc45ee7">GetReferenceString</a>(strOriginalItem);

                    <a class="code" href="class_o_t_item.html">OTItem</a> * pOriginalItem = <a class="code" href="class_o_t_item.html#af742fa1f4ba90d4807bda01a758d2d6a">OTItem::CreateItemFromString</a>(strOriginalItem, SERVER_ID.c_str(),
                        pServerTransaction-&gt;<a class="code" href="class_o_t_transaction_type.html#a08578043dac9d53f7a5a879b02785d46">GetReferenceToNum</a>());
                    <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTItem&gt;</a> theOrigItemGuardian(pOriginalItem); <span class="comment">// So I don&#39;t have to clean it up later. No memory leaks.</span>

                    <span class="keywordflow">if</span> (NULL != pOriginalItem)
                    {
                        <span class="comment">// If pOriginalItem is acceptPending, that means the client is accepting the transfer receipt from the server, (from his inbox),</span>
                        <span class="comment">// which has the recipient&#39;s acceptance inside of the client&#39;s transfer as the original item. This means the transfer that</span>
                        <span class="comment">// the client originally sent is now finally closed!</span>
                        <span class="comment">//</span>
                        <span class="comment">// If it&#39;s a depositCheque, that means the client is accepting the cheque receipt from the server,</span>
                        <span class="comment">// (from his inbox)</span>
                        <span class="comment">// which has the recipient&#39;s deposit inside of it as the original item. This means that the cheque that</span>
                        <span class="comment">// the client originally wrote is now finally closed!</span>
                        <span class="comment">//</span>
                        <span class="comment">// In both cases, the &quot;original item&quot; itself is not from the client, but from the recipient! Therefore,</span>
                        <span class="comment">// the number on that item is useless for removing numbers from the client&#39;s list of issued numbers.</span>
                        <span class="comment">// Rather, I need to load that original cheque, or pending transfer, from WITHIN the original item,</span>
                        <span class="comment">// in order to get THAT number, to remove it from the client&#39;s issued list. (Whether for real, or for</span>
                        <span class="comment">// setting up dummy data in order to verify the balance agreement.) *sigh*</span>
                        <span class="comment">//</span>
                        <span class="comment">// ----------------------------</span>
                        <span class="keywordflow">if</span> (<a class="code" href="class_o_t_item.html#a03db091faaab100aadc455f4ebe2c5d1ac98fe1ea932d3c87f450a216e6a26bec">OTItem::depositCheque</a> == pOriginalItem-&gt;<a class="code" href="class_o_t_item.html#a2f4535b271f23b7c2b6b1dbabf279ffe">GetType</a>()) <span class="comment">// client is accepting a cheque receipt, which has a depositCheque (from the recipient) as the original item within.</span>
                        {
                            <span class="comment">// Get the cheque from the Item and load it up into a Cheque object.</span>
                            <a class="code" href="class_o_t_string.html">OTString</a> strCheque;
                            pOriginalItem-&gt;<a class="code" href="class_o_t_item.html#aec0f00f6526a35766297615a43429ba5">GetAttachment</a>(strCheque);

                            <a class="code" href="class_o_t_cheque.html">OTCheque</a> theCheque; <span class="comment">// allocated on the stack :-)</span>

                            <span class="keywordflow">if</span> (<span class="keyword">false</span> == ((strCheque.<a class="code" href="class_o_t_string.html#a640392dd17a786dab643dbfc7e5a8672">GetLength</a>() &gt; 2) &amp;&amp;
                                theCheque.<a class="code" href="class_o_t_contract.html#a36300e34dcd94ed7006d98b392d46815">LoadContractFromString</a>(strCheque)))
                            {
                                <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: ERROR loading cheque from string:\n%s\n&quot;</span>, __FUNCTION__, strCheque.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
                            }
                            <span class="keywordflow">else</span>    <span class="comment">// Since the client wrote the cheque, and he is now accepting the cheque receipt, he can be cleared for that transaction number...</span>
                            {
                                <span class="keywordflow">if</span> (pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#a66cf3b97f1769f9d422bad8787a6c1a0">VerifyIssuedNum</a>  (strServerID, theCheque.<a class="code" href="class_o_t_trackable.html#a2594d320e3b24f3210bd38a08de66a70">GetTransactionNum</a>()))
                                    theTempNym.<a class="code" href="class_o_t_pseudonym.html#a331a9c5ec8692d0b88a76d882586fbc1">AddIssuedNum</a>(strServerID, theCheque.<a class="code" href="class_o_t_trackable.html#a2594d320e3b24f3210bd38a08de66a70">GetTransactionNum</a>());
                                <span class="keywordflow">else</span>
                                    <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: cheque receipt, trying to &#39;remove&#39; an issued &quot;</span>
                                    <span class="stringliteral">&quot;number (%lld) that already wasn&#39;t on my issued list. (So what is this in my inbox, &quot;</span>
                                    <span class="stringliteral">&quot;then? Maybe need to download a fresh copy of it.)\n&quot;</span>, __FUNCTION__,
                                    theCheque.<a class="code" href="class_o_t_trackable.html#a2594d320e3b24f3210bd38a08de66a70">GetTransactionNum</a>());
                            }
                        }
                        <span class="comment">// ----------------------------</span>
                        <span class="comment">// client is accepting a transfer receipt, which has an acceptPending from the recipient</span>
                        <span class="comment">// as the original item within.</span>
                        <span class="comment">//</span>
                        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="class_o_t_item.html#a03db091faaab100aadc455f4ebe2c5d1ae3e8669bd29e01bd4ed8d1fa35ba3773">OTItem::acceptPending</a> == pOriginalItem-&gt;<a class="code" href="class_o_t_item.html#a2f4535b271f23b7c2b6b1dbabf279ffe">GetType</a>()) <span class="comment">// (which is in reference to the client&#39;s outgoing original transfer.)</span>
                        {
                            <span class="keywordflow">if</span> (pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#a66cf3b97f1769f9d422bad8787a6c1a0">VerifyIssuedNum</a>  (strServerID, pOriginalItem-&gt;<a class="code" href="class_o_t_item.html#a1d99913429afbd6827becd042fac67a8">GetNumberOfOrigin</a>()))
                                theTempNym.<a class="code" href="class_o_t_pseudonym.html#a331a9c5ec8692d0b88a76d882586fbc1">AddIssuedNum</a>(strServerID, pOriginalItem-&gt;<a class="code" href="class_o_t_item.html#a1d99913429afbd6827becd042fac67a8">GetNumberOfOrigin</a>());
                            <span class="keywordflow">else</span>
                                <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: transferReceipt, trying to &#39;remove&#39; an issued &quot;</span>
                                <span class="stringliteral">&quot;number (%lld) that already wasn&#39;t on my issued list. (So what is this in my inbox, &quot;</span>
                                <span class="stringliteral">&quot;then? Maybe need to download a fresh copy of it.)\n&quot;</span>, __FUNCTION__,
                                pOriginalItem-&gt;<a class="code" href="class_o_t_item.html#a1d99913429afbd6827becd042fac67a8">GetNumberOfOrigin</a>());
                        }
                        <span class="comment">// ----------------------------</span>
                        <span class="keywordflow">else</span> <span class="comment">// wrong type.</span>
                        {
                            <a class="code" href="class_o_t_string.html">OTString</a> strOriginalItemType;
                            pOriginalItem-&gt;<a class="code" href="class_o_t_item.html#ad0aa349efc846dbcb46c51cf183dcc39">GetTypeString</a>(strOriginalItemType);
                            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Original item has wrong type, while accepting item receipt:\n%s\n&quot;</span>,
                                          __FUNCTION__, strOriginalItemType.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
                        }
                    }
                    <span class="keywordflow">else</span>
                    {
                        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Unable to load original item from string while accepting item receipt:\n%s\n&quot;</span>,
                                      __FUNCTION__, strOriginalItem.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
                    }
                } <span class="comment">// acceptItemReceipt</span>


                <span class="comment">// I&#39;ll also go ahead and remove each transaction from theInbox, and pass said inbox into the VerifyBalanceAgreement call...</span>
                <span class="comment">// (So it can simulate as if the inbox was already changed, and the total is already calculated, and if it succeeds,</span>
                <span class="comment">// then we can allow the giant loop below to do it all for real.)</span>
                <span class="comment">// (I&#39;m not saving this copy of the inbox anyway--there&#39;s another one below.)</span>
                <span class="comment">//</span>
                <span class="comment">//theInbox.RemoveTransaction(pServerTransaction-&gt;GetTransactionNum());  // &lt;================</span>
                <span class="comment">// Now this is done AFTER this loop...</span>
                <span class="comment">//</span>
                theListOfInboxReceiptsBeingRemoved.push_back(pServerTransaction-&gt;<a class="code" href="class_o_t_transaction_type.html#aa204b21b7f498389f746742c1d2007fa">GetTransactionNum</a>());

            } <span class="comment">// pServerTransaction != &quot;&quot;</span>
        } <span class="comment">// if pItem type is accept pending or item receipt.</span>

        <span class="comment">// ---------------------------------------------------------------</span>

        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((pItem-&gt;<a class="code" href="class_o_t_item.html#a2f4535b271f23b7c2b6b1dbabf279ffe">GetType</a>() == <a class="code" href="class_o_t_item.html#a03db091faaab100aadc455f4ebe2c5d1a9f650965f11bddf081bb017e1cd0efe0">OTItem::acceptCronReceipt</a>)   ||
                 (pItem-&gt;<a class="code" href="class_o_t_item.html#a2f4535b271f23b7c2b6b1dbabf279ffe">GetType</a>() == <a class="code" href="class_o_t_item.html#a03db091faaab100aadc455f4ebe2c5d1a6c434f644f481079015d0330d6a5efad">OTItem::acceptFinalReceipt</a>)  ||
                 (pItem-&gt;<a class="code" href="class_o_t_item.html#a2f4535b271f23b7c2b6b1dbabf279ffe">GetType</a>() == <a class="code" href="class_o_t_item.html#a03db091faaab100aadc455f4ebe2c5d1aa4bc2fbc10cdf7c47dd361c4c17c605d">OTItem::acceptBasketReceipt</a>)
                )
        {
            <a class="code" href="class_o_t_transaction.html">OTTransaction</a> * pServerTransaction = theInbox.GetTransaction(pItem-&gt;<a class="code" href="class_o_t_transaction_type.html#a08578043dac9d53f7a5a879b02785d46">GetReferenceToNum</a>());

            <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(2, <span class="stringliteral">&quot;%s: Checking client-side inbox for expected cron or final or basket receipt: %lld... &quot;</span>,
                           __FUNCTION__, pItem-&gt;<a class="code" href="class_o_t_transaction_type.html#a08578043dac9d53f7a5a879b02785d46">GetReferenceToNum</a>()); <span class="comment">// temp remove</span>

            <span class="keywordflow">if</span> (NULL == pServerTransaction)
            {
                bSuccessFindingAllTransactions = <span class="keyword">false</span>;
                <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(2, <span class="stringliteral">&quot;%s: NOT found! (Do you have the latest inbox?)\n&quot;</span>, __FUNCTION__); <span class="comment">// temp remove</span>
                <span class="keywordflow">break</span>;
            }
            <span class="keywordflow">else</span>
            {
                bSuccessFindingAllTransactions = <span class="keyword">true</span>;

                <span class="keywordflow">switch</span> (pItem-&gt;<a class="code" href="class_o_t_item.html#a2f4535b271f23b7c2b6b1dbabf279ffe">GetType</a>())
                {
                    <span class="comment">// ************************************************************</span>

                <span class="keywordflow">case</span> <a class="code" href="class_o_t_item.html#a03db091faaab100aadc455f4ebe2c5d1a9f650965f11bddf081bb017e1cd0efe0">OTItem::acceptCronReceipt</a>:
                    <span class="comment">// pServerTransaction is a marketReceipt or paymentReceipt</span>
                    <span class="comment">//</span>

                    <span class="comment">// When accepting a cron receipt from the inbox, you don&#39;t have to clear the issued transaction number.</span>
                    <span class="comment">// In this case, the original trans# is cleared when the finalReceipt is generated,</span>
                    <span class="comment">// and the closing trans# is cleared when the finalReceipt is cleared.</span>

                    <span class="comment">// So NO issued numbers being removed or added in this case.</span>
                    <span class="comment">// (But we still remove the receipt from our copy of the inbox, below,</span>
                    <span class="comment">// so that the balance agreement will reflect as if it had already been</span>
                    <span class="comment">// successfully removed. (Because balance agreement is meant to show the new</span>
                    <span class="comment">// state of things, in the event of success--a signed record of those things.)</span>
                    <span class="keywordflow">break</span>;

                    <span class="comment">// ************************************************************</span>

                <span class="keywordflow">case</span> <a class="code" href="class_o_t_item.html#a03db091faaab100aadc455f4ebe2c5d1a6c434f644f481079015d0330d6a5efad">OTItem::acceptFinalReceipt</a>:
                    <span class="comment">// pServerTransaction is a finalReceipt</span>


                    <span class="comment">// IN THIS CASE: If we&#39;re accepting a finalReceipt, that means all the OTHER receipts related to it</span>
                    <span class="comment">// (sharing the same &quot;in reference to&quot;) must ALSO be cleared from the inbox aint64_t with it! That&#39;s the</span>
                    <span class="comment">// whole point32_t of the finalReceipt -- to make sure all related receipts are cleared, when IT is.</span>
                    <span class="comment">//</span>
                    <span class="comment">// The server WILL verify this also (I tested it)... That&#39;s why we check here, to save the trouble</span>
                    <span class="comment">// of being rejected by the server.</span>
                    <span class="comment">//</span>
                    <span class="comment">// So let&#39;s see if the number of related receipts on this process inbox (pTransaction) matches</span>
                    <span class="comment">// the number of related receipts in the actual inbox (theInbox), as found by the finalReceipt&#39;s</span>
                    <span class="comment">// (pServerTransaction) &quot;in reference to&quot; value, which should be the same as on the related receipts.</span>

                    <span class="comment">// (Below) pTransaction is the processInbox transaction. Each item on it is in ref to a DIFFERENT receipt,</span>
                    <span class="comment">// even though, if they are marketReceipts, all of THOSE receipts are in ref to the original transaction#.</span>
                    {
<span class="comment">//                      int32_t nRefCount = 0;</span>
                        std::set&lt;int64_t&gt; setOfRefNumbers; <span class="comment">// we&#39;ll store them here, to disallow duplicates, to make sure they are all unique IDs</span>

                        <span class="comment">//</span>
                        <span class="comment">// I need to loop through all items on pTransaction (my processInbox request)</span>
                        <span class="comment">// For each, look it up on the inbox. (Each item may be &quot;in reference to&quot;</span>
                        <span class="comment">// one original transaction or another.) FIND THE ONES that are in reference to</span>
                        <span class="comment">// the same # as pServerTransaction is.</span>
                        <span class="comment">//</span>
                        <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_item_8hpp.html#afed69f7c75742cc24ea837d6589e9d19">listOfItems</a>, pTransaction-&gt;<a class="code" href="class_o_t_transaction.html#a9821c541d3d5f92e378320c6aa190c18">GetItemList</a>())
                        {
                            <a class="code" href="class_o_t_item.html">OTItem</a> * pItemPointer = *it;
                            <span class="keywordflow">if</span> (NULL == pItemPointer)   { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Pointer: %s should not have been &quot;</span><span class="stringliteral">&quot;.\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;pItemPointer&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

                            <span class="comment">// pItemPointer-&gt;GetReferenceToNum() is the server&#39;s transaction number for the receipt</span>
                            <span class="comment">// that it dropped into my inbox. pTransPointer is the receipt itself (hopefully.)</span>
                            <a class="code" href="class_o_t_transaction.html">OTTransaction</a> * pTransPointer = theInbox.GetTransaction(pItemPointer-&gt;<a class="code" href="class_o_t_transaction_type.html#a08578043dac9d53f7a5a879b02785d46">GetReferenceToNum</a>());

                            <span class="comment">// Careful on the logic here...</span>
                            <span class="comment">// ONCE EACH INBOX RECEIPT IS DEFINITELY NOT-&quot;&quot;, and</span>
                            <span class="comment">// if *IT* is &quot;in reference to&quot; pServerTransaction-&gt;GetReferenceToNum(),</span>
                            <span class="comment">// Then increment the count for the transaction.  COMPARE *THAT* to theInbox.GetCount and we&#39;re golden!!</span>
                            <span class="comment">// Perhaps the finalReceipt is in reference to #10, and there are 6 others that are ALSO in reference to #10.</span>
                            <span class="comment">// That&#39;s a total of 7 receipts in the inbox that are in reference to #10, so my request had better have the</span>
                            <span class="comment">// same count :-)</span>
                            <span class="comment">//</span>
                            <span class="keywordflow">if</span> ((NULL != pTransPointer) &amp;&amp;
                                (pTransPointer-&gt;<a class="code" href="class_o_t_transaction_type.html#a08578043dac9d53f7a5a879b02785d46">GetReferenceToNum</a>() == pServerTransaction-&gt;<a class="code" href="class_o_t_transaction_type.html#a08578043dac9d53f7a5a879b02785d46">GetReferenceToNum</a>()))
                            {
<span class="comment">//                              nRefCount++;</span>
                                <span class="comment">// std::set doesn&#39;t allow duplicates.</span>
                                setOfRefNumbers.insert(pItemPointer-&gt;<a class="code" href="class_o_t_transaction_type.html#a08578043dac9d53f7a5a879b02785d46">GetReferenceToNum</a>());
                            }
                        }

                        <span class="comment">// ---------------------------------------------</span>
                        <span class="comment">//</span>
                        <span class="keywordflow">if</span> (static_cast&lt;int32_t&gt;(setOfRefNumbers.size())
                            !=   <span class="comment">// IS NOT EQUAL TO...</span>
                            theInbox.GetTransactionCountInRefTo(pServerTransaction-&gt;<a class="code" href="class_o_t_transaction_type.html#a08578043dac9d53f7a5a879b02785d46">GetReferenceToNum</a>()))
                            <span class="comment">/* todo: Notice I&#39;m not making sure the count is entirely composed of ACCEPTED receipts. (vs DISPUTED...)</span>
<span class="comment">                            I probably should add code to GetItemCountInRefTo() so it only counts ACCEPTED receipts.*/</span>
                        {
                            <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0,
                                <span class="stringliteral">&quot;%s: When accepting a finalReceipt, you MUST accept all &quot;</span>
                                <span class="stringliteral">&quot;related receipts (ones that share the same IN REFERENCE TO transaction number as the finalReceipt %lld)\n&quot;</span>
                                <span class="stringliteral">&quot;Transaction item count (in ref to): %d    Inbox transaction count (in ref to): %d.\n&quot;</span>, __FUNCTION__,
                                pServerTransaction-&gt;<a class="code" href="class_o_t_transaction_type.html#a08578043dac9d53f7a5a879b02785d46">GetReferenceToNum</a>(),
                                setOfRefNumbers.size(),
                                theInbox.GetTransactionCountInRefTo(pServerTransaction-&gt;<a class="code" href="class_o_t_transaction_type.html#a08578043dac9d53f7a5a879b02785d46">GetReferenceToNum</a>()));

                            bSuccessFindingAllTransactions = <span class="keyword">false</span>;
                            <span class="keywordflow">break</span>;
                        }
                        <span class="comment">// Else NO BREAK;</span>
                        <span class="comment">//break;  FALLING THROUGH TO BELOW, to do the pNym/theTempNym stuff in the BASKET section...</span>

                        <span class="comment">// pServerTransaction-&gt;GetReferenceToNum() is the OPENING number and should already be closed.</span>
                        <span class="comment">//</span>
                        <span class="comment">// IN fact, since the &quot;in reference to&quot; is supposedly already closed, then let&#39;s just</span>
                        <span class="comment">// MAKE SURE of that, since otherwise it&#39;ll screw up my future balance agreements. (The</span>
                        <span class="comment">// instant a finalReceipt appears, the &quot;in ref to&quot; is already gone on the server&#39;s side.)</span>
                        <span class="comment">//</span>
                        <span class="keywordflow">if</span> (<a class="code" href="class_o_t_transaction.html#af6b54636f1000e09f19d1c7a7886e1f8a3877decda88be6b275652a6e4930ddc4">OTTransaction::finalReceipt</a> == pServerTransaction-&gt;<a class="code" href="class_o_t_transaction.html#ac964dfd1e704c02358a6641f030ead38">GetType</a>())
                        {
                            <span class="keywordflow">if</span> (pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#a17f25f5eb52440cc3ffc139dcbff75fe">RemoveIssuedNum</a>(*pNym, strServerID, pServerTransaction-&gt;<a class="code" href="class_o_t_transaction_type.html#a08578043dac9d53f7a5a879b02785d46">GetReferenceToNum</a>(), <span class="keyword">true</span>)) <span class="comment">// bool bSave=true</span>
                                <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(1, <span class="stringliteral">&quot;%s: **** Due to finding a finalReceipt, REMOVING OPENING NUMBER FROM NYM:  %lld \n&quot;</span>, __FUNCTION__, pServerTransaction-&gt;<a class="code" href="class_o_t_transaction_type.html#a08578043dac9d53f7a5a879b02785d46">GetReferenceToNum</a>());
                            <span class="keywordflow">else</span>
                                <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(1, <span class="stringliteral">&quot;%s: **** Noticed a finalReceipt, but Opening Number %lld had ALREADY been removed from nym. \n&quot;</span>, __FUNCTION__, pServerTransaction-&gt;<a class="code" href="class_o_t_transaction_type.html#a08578043dac9d53f7a5a879b02785d46">GetReferenceToNum</a>());
                        }
                        <span class="keywordflow">else</span>
                            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Expected pServerTransaction to be a final receipt (while finalizing for process inbox.)\n&quot;</span>, __FUNCTION__);
                        <span class="comment">//</span>
                        <span class="comment">// pNym won&#39;t actually save unless it actually removes that #. If the #&#39;s already NOT THERE,</span>
                        <span class="comment">// then the removal will fail, and thus it won&#39;t bother saving here.</span>
                    }

                    <span class="comment">// ... (FALL THROUGH) ...</span>

                <span class="keywordflow">case</span> <a class="code" href="class_o_t_item.html#a03db091faaab100aadc455f4ebe2c5d1aa4bc2fbc10cdf7c47dd361c4c17c605d">OTItem::acceptBasketReceipt</a>:
                    <span class="comment">// pServerTransaction is a basketReceipt (or finalReceipt, since falling through from above.)</span>
                    <span class="comment">//</span>
                    <span class="comment">// Remove the proper issued number, based on the CLOSING TRANSACTION NUMBER</span>
                    <span class="comment">// of the finalReceipt/basketReceipt I&#39;m accepting...</span>
                    <span class="comment">//</span>

                    <span class="keywordflow">if</span> (pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#a66cf3b97f1769f9d422bad8787a6c1a0">VerifyIssuedNum</a>(strServerID, pServerTransaction-&gt;<a class="code" href="class_o_t_transaction.html#aeaa0c946e4a737e0144cbbf102f37ed4">GetClosingNum</a>()))
                        theTempNym.<a class="code" href="class_o_t_pseudonym.html#a331a9c5ec8692d0b88a76d882586fbc1">AddIssuedNum</a>(strServerID, pServerTransaction-&gt;<a class="code" href="class_o_t_transaction.html#aeaa0c946e4a737e0144cbbf102f37ed4">GetClosingNum</a>());
                    <span class="keywordflow">else</span>
                        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: final or basket Receipt, trying to &#39;remove&#39; an issued &quot;</span>
                        <span class="stringliteral">&quot;number (%lld) that already wasn&#39;t on my issued list. (So what is this in my inbox, &quot;</span>
                        <span class="stringliteral">&quot;then? Maybe need to download a fresh copy of it.)\n&quot;</span>, __FUNCTION__,
                        pServerTransaction-&gt;<a class="code" href="class_o_t_transaction.html#aeaa0c946e4a737e0144cbbf102f37ed4">GetClosingNum</a>());
                    <span class="keywordflow">break</span>;

                    <span class="comment">// ************************************************************</span>

                <span class="keywordflow">default</span>:
                    {
                        <a class="code" href="class_o_t_string.html">OTString</a> strTempType;
                        pItem-&gt;<a class="code" href="class_o_t_item.html#ad0aa349efc846dbcb46c51cf183dcc39">GetTypeString</a>(strTempType);
                        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Unexpected item type: %s\n&quot;</span>, __FUNCTION__, strTempType.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
                        <span class="keywordflow">break</span>;
                    }
                }

                <span class="comment">// I&#39;ll also go ahead and remove each transaction from theInbox, and pass said inbox into the VerifyBalanceAgreement call...</span>
                <span class="comment">// (So it can simulate as if the inbox was already changed, and the total is already calculated, and if it succeeds,</span>
                <span class="comment">// then we can allow the giant loop below to do it all for real.)</span>
                <span class="comment">// (I&#39;m not saving this copy of the inbox anyway--there&#39;s another one below.)</span>
                <span class="comment">//</span>
                <span class="comment">//theInbox.RemoveTransaction(pItem-&gt;GetReferenceToNum());</span>
                <span class="comment">// Let&#39;s remove it this way instead:</span>
                <span class="comment">//</span>
<span class="comment">//              theInbox.RemoveTransaction(pServerTransaction-&gt;GetTransactionNum());    // &lt;================</span>
                <span class="comment">//</span>
                <span class="comment">// Actually, let&#39;s remove it this way:</span>
                theListOfInboxReceiptsBeingRemoved.push_back(pServerTransaction-&gt;<a class="code" href="class_o_t_transaction_type.html#aa204b21b7f498389f746742c1d2007fa">GetTransactionNum</a>());

            } <span class="comment">// else if pServerTransaction NOT &quot;&quot;.</span>
        } <span class="comment">// If acceptCronReceipt/acceptFinalReceipt/acceptBasketReceipt</span>
    }
    <span class="comment">// ------------------------------------------</span>
    <span class="keywordflow">if</span> (<span class="keyword">false</span> == bSuccessFindingAllTransactions) <span class="comment">// failure.</span>
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: transactions in processInbox message do not match actual inbox.\n&quot;</span>, __FUNCTION__);

        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;      <span class="comment">// RETURN.</span>
    }
    <span class="comment">// ---------------------------------------------------------------------</span>
    <span class="comment">// SUCCESS finding all transactions</span>

    <span class="keywordflow">while</span> (!theListOfInboxReceiptsBeingRemoved.empty())
    {
        int64_t lTemp = theListOfInboxReceiptsBeingRemoved.front();
        theListOfInboxReceiptsBeingRemoved.pop_front();

        <span class="keywordflow">if</span> (<span class="keyword">false</span> == theInbox.RemoveTransaction(static_cast&lt;int64_t&gt;(lTemp)))    <span class="comment">// &lt;================</span>
            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Failed removing receipt from temporary Inbox: %lld \n&quot;</span>, __FUNCTION__, lTemp);
    }

    <span class="comment">// *****************************************************************</span>

    <span class="comment">// SET UP NYM FOR BALANCE AGREEMENT.</span>

    <span class="comment">// By this point, theTempNym contains a list of all the transaction numbers that are issued to me,</span>
    <span class="comment">// but that will NOT be issued to me anymore once this processInbox is processed.</span>
    <span class="comment">// Therefore I need to REMOVE those items from my issued list (at least temporarily) in order to</span>
    <span class="comment">// calculate the balance agreement properly. So I used theTempNym as a temp variable to store those</span>
    <span class="comment">// numbers, so I can remove them from my Nym and them add them again after generating the statement.</span>
    <span class="comment">//</span>
    <span class="keywordflow">for</span> (int32_t i = 0; i &lt; theTempNym.<a class="code" href="class_o_t_pseudonym.html#ac4fec9b0b744c9fbe3bae82c25661d19">GetIssuedNumCount</a>(theServerID); i++)
    {
        int64_t lTemp = theTempNym.<a class="code" href="class_o_t_pseudonym.html#ada98078d45460303c6a746c53381f5aa">GetIssuedNum</a>(theServerID, i);
        pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#a17f25f5eb52440cc3ffc139dcbff75fe">RemoveIssuedNum</a>(strServerID, static_cast&lt;int64_t&gt;(lTemp));
    }
    <span class="comment">// -----------------------------------------</span>
    <span class="comment">// BALANCE AGREEMENT</span>
    <span class="comment">//</span>
    <span class="comment">// The item is signed and saved within this call as well. No need to do that again.</span>
    <span class="comment">//</span>
    <a class="code" href="class_o_t_item.html">OTItem</a> * pBalanceItem = theInbox.GenerateBalanceStatement(static_cast&lt;int64_t&gt;(lTotalBeingAccepted), *pTransaction, *pNym, *pAccount, theOutbox);
    <span class="comment">// -----------------------------------------</span>
    <span class="comment">// Here I am adding these numbers back again, since I removed them to generate the balance agreement.</span>
    <span class="comment">// (They won&#39;t be removed for real until I receive the server&#39;s acknowledgment that those numbers</span>
    <span class="comment">// really were removed. theTempNym then I have to keep them and use them for my balance agreements.)</span>
    <span class="comment">//</span>
    <span class="keywordflow">for</span> (int32_t i = 0; i &lt; theTempNym.<a class="code" href="class_o_t_pseudonym.html#ac4fec9b0b744c9fbe3bae82c25661d19">GetIssuedNumCount</a>(theServerID); i++)
    {
        int64_t lTemp = theTempNym.<a class="code" href="class_o_t_pseudonym.html#ada98078d45460303c6a746c53381f5aa">GetIssuedNum</a>(theServerID, i);
        pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#a331a9c5ec8692d0b88a76d882586fbc1">AddIssuedNum</a>(strServerID, static_cast&lt;int64_t&gt;(lTemp));
    }

    <span class="comment">// *****************************************************************</span>

    <span class="keywordflow">if</span> (NULL == pBalanceItem)
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: ERROR generating balance statement.\n&quot;</span>, __FUNCTION__);

        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    }

    <span class="comment">// the transaction will handle cleaning up the transaction item.</span>
    pTransaction-&gt;<a class="code" href="class_o_t_transaction.html#a5abc071b7eeddc40ea151cccd011e4d6">AddItem</a>(*pBalanceItem);
    <span class="comment">// -----------------------------------------</span>
    <span class="comment">// sign the item</span>
    <span class="comment">// This already happens in the GenerateBalanceStatement() call above.</span>
    <span class="comment">// I would actually have to RELEASE the signatures if I wanted to sign again!</span>
    <span class="comment">// (Unless I WANT two signatures...)</span>
    <span class="comment">//</span>
<span class="comment">//  pBalanceItem-&gt;SignContract(*pNym);</span>
<span class="comment">//  pBalanceItem-&gt;SaveContract();</span>

    pTransaction-&gt;<a class="code" href="class_o_t_contract.html#aae54340526fbd8eb8a18de27a4b97c83">ReleaseSignatures</a>();
    pTransaction-&gt;<a class="code" href="class_o_t_contract.html#abd60037fe655ee8cae9a3ece5d1e2ea6">SignContract</a>(*pNym);
    pTransaction-&gt;<a class="code" href="class_o_t_contract.html#a363ae430d4fd9256ab8364dbafb95444">SaveContract</a>();

    theLedger.ReleaseSignatures();
    theLedger.SignContract(*pNym);
    theLedger.SaveContract();

    <a class="code" href="class_o_t_string.html">OTString</a> strOutput(theLedger); <span class="comment">// For the output</span>

    std::string pBuf = strOutput.Get();

    <span class="keywordflow">return</span> pBuf;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a11db9e97151620ab6754719366754b20"></a><!-- doxytag: member="OTAPI_Exec::Ledger_GetCount" ref="a11db9e97151620ab6754719366754b20" args="(const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ACCOUNT_ID, const std::string &amp;THE_LEDGER)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_a_p_i___exec.html#a11db9e97151620ab6754719366754b20">OTAPI_Exec::Ledger_GetCount</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ACCOUNT_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_LEDGER</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Find out how many pending transactions (and receipts) are in this inbox. </p>
<p>SO HOW WOULD YOU **USE** THIS? To process your inbox...</p>
<p>-- First you call <a class="el" href="class_o_t_a_p_i___exec.html#ab6e791d8ddd8345831b8618afd635f38">OTAPI_Exec::getInbox</a> to grab the latest inbox from the server. (You will also want to call <a class="el" href="class_o_t_a_p_i___exec.html#af13f8f83d370e8b18ad2de97181a5dfa">OTAPI_Exec::getOutbox</a> as well as <a class="el" href="class_o_t_a_p_i___exec.html#a676046a2b6dde3b9852ab00c4216d52d">OTAPI_Exec::getAccount</a>, since you need to have the latest versions of those files, or your balance agreement will be calculated wrong, causing your transaction to fail.)</p>
<p>-- Then you call <a class="el" href="class_o_t_a_p_i___exec.html#ad13ec1f9fdf6de0d0225f9fe525a449d">OTAPI_Exec::LoadInbox</a> to load it from local storage.</p>
<p>During this time, your user has the opportunity to peruse the inbox, and to decide which transactions therein he wishes to accept or reject. If you want to display the inbox items on the screen, use these functions to loop through them: <a class="el" href="class_o_t_a_p_i___exec.html#a11db9e97151620ab6754719366754b20" title="Find out how many pending transactions (and receipts) are in this inbox.">OTAPI_Exec::Ledger_GetCount</a> <a class="el" href="class_o_t_a_p_i___exec.html#ad86da1897ef6aa8d9f4bb07a694fe9f6">OTAPI_Exec::Ledger_GetTransactionByIndex</a> <a class="el" href="class_o_t_a_p_i___exec.html#a0a4e3ff37ee5c1be0b5805f6498b43eb">OTAPI_Exec::Ledger_GetTransactionIDByIndex</a></p>
<p>You will probably ask me for more introspection on the transactions themselves. (Just ask -- No problem.) Here's what you have right now: <a class="el" href="class_o_t_a_p_i___exec.html#aa97dac68f36dde2f0e43c3059ac9efe2" title="Get Transaction Type (internally uses GetTransactionTypeString().)">OTAPI_Exec::Transaction_GetType</a></p>
<p>-- Then call <a class="el" href="class_o_t_a_p_i___exec.html#a6a592a8bd48d7e006fdfe054e79b47ce">OTAPI_Exec::Ledger_CreateResponse</a> in order to create a 'response' ledger for that inbox, which will be sent to the server.</p>
<p>-- Then call <a class="el" href="class_o_t_a_p_i___exec.html#a11db9e97151620ab6754719366754b20" title="Find out how many pending transactions (and receipts) are in this inbox.">OTAPI_Exec::Ledger_GetCount</a> (pass it the inbox) to find out how many transactions are inside of it. Use that count to LOOP through them...</p>
<p>-- Use <a class="el" href="class_o_t_a_p_i___exec.html#ad86da1897ef6aa8d9f4bb07a694fe9f6">OTAPI_Exec::Ledger_GetTransactionByIndex</a> to grab each transaction as you iterate through the inbox.</p>
<p>-- Call <a class="el" href="class_o_t_a_p_i___exec.html#aff7a984d28b09d76103f52faebfb754c">OTAPI_Exec::Transaction_CreateResponse</a> to create a response for each transaction, accepting or rejecting it, and adding it to the response ledger.</p>
<p>-- Penultimately, call <a class="el" href="class_o_t_a_p_i___exec.html#ae43e5ed33e7e2281c92a35818338c953">OTAPI_Exec::Ledger_FinalizeResponse()</a> which will create a Balance Agreement for the ledger.</p>
<p>-- Finally, call <a class="el" href="class_o_t_a_p_i___exec.html#ab0f854984189e4ed4c309cff726f9ab4">OTAPI_Exec::processInbox</a> to send that response ledger to the server and process the various items. </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l08272">8272</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty())  { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>  ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID.empty())    { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>    ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (ACCOUNT_ID.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;ACCOUNT_ID&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (THE_LEDGER.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_LEDGER&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theServerID(SERVER_ID), theUserID(USER_ID), theAccountID(ACCOUNT_ID);

    <a class="code" href="class_o_t_string.html">OTString</a> strLedger(THE_LEDGER);
    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_ledger.html">OTLedger</a> theLedger(theUserID, theAccountID, theServerID);

    <span class="keywordflow">if</span> (<span class="keyword">false</span> == theLedger.LoadLedgerFromString(strLedger))
    {
        <a class="code" href="class_o_t_string.html">OTString</a> strAcctID(theAccountID);
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error loading ledger from string. Acct ID: %s\n&quot;</span>, __FUNCTION__, strAcctID.Get());
        <span class="keywordflow">return</span> -1;
    }

    <span class="keywordflow">return</span> theLedger.GetTransactionCount();
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab23050aeec2f70007b6983e4d46c5ea7"></a><!-- doxytag: member="OTAPI_Exec::Ledger_GetInstrument" ref="ab23050aeec2f70007b6983e4d46c5ea7" args="(const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ACCOUNT_ID, const std::string &amp;THE_LEDGER, const int32_t &amp;nIndex)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#ab23050aeec2f70007b6983e4d46c5ea7">OTAPI_Exec::Ledger_GetInstrument</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ACCOUNT_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_LEDGER</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int32_t &amp;&#160;</td>
          <td class="paramname"><em>nIndex</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>------------------------------------------------------------------------- Ledger_GetInstrument (by index)</p>
<p>Lookup a financial instrument (from within a transaction that is inside a ledger) based on index or transaction number.</p>
<p>sendUserInstrument does this: -- Puts an <a class="el" href="class_o_t_payment.html">OTPayment</a> (a form of contract) as an encrypted Payload on an OTMessage(1). -- Also puts instrument (same contract) as CLEAR payload on an OTMessage(2). -- (1) is sent to server, and (2) is added to Outpayments messages. -- (1) gets added to recipient's Nymbox as "in ref to" string on a "instrumentNotice" transaction. -- When recipient processes Nymbox, the "instrumentNotice" transaction (containing (1) in its "in ref to" field) is copied and added to the recipient's paymentInbox. -- When recipient iterates through paymentInbox transactions, they are ALL "instrumentNotice"s. Each transaction contains an <a class="el" href="class_o_t_message.html">OTMessage</a> in its "in ref to" field, and that <a class="el" href="class_o_t_message.html">OTMessage</a> object contains an encrypted payload of the instrument itself (an <a class="el" href="class_o_t_payment.html">OTPayment</a> object containing a cheque or payment plan or invoice etc.) -- When sender gets Outpayments contents, the original instrument (inside an <a class="el" href="class_o_t_payment.html">OTPayment</a>) is stored IN THE CLEAR as payload on an <a class="el" href="class_o_t_message.html">OTMessage</a>.</p>
<p>THEREFORE: TO EXTRACT INSTRUMENT FROM PAYMENTS INBOX: -- Iterate through the transactions in the payments inbox. -- (They should all be "instrumentNotice" transactions.) -- Each transaction contains (1) <a class="el" href="class_o_t_message.html">OTMessage</a> in "in ref to" field, which in turn contains an encrypted <a class="el" href="class_o_t_payment.html">OTPayment</a> in the payload field, which then contains the instrument itself. -- *** Therefore, this function, based purely on ledger index (as we iterate) extracts the <a class="el" href="class_o_t_message.html">OTMessage</a> from the Transaction "in ref to" field (for the transaction at that index), then decrypts the payload on that message and returns the decrypted cleartext. </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l08612">8612</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty())  { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span> );  <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID.empty())    { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span> );    <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (ACCOUNT_ID.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;ACCOUNT_ID&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (THE_LEDGER.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_LEDGER&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theServerID(SERVER_ID), theUserID(USER_ID), theAccountID(ACCOUNT_ID);
    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pNym = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a08144e29a333dd0e1087c4655e6981ee">GetNym</a>(theUserID, __FUNCTION__);
    <span class="keywordflow">if</span> (NULL == pNym) <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    <span class="comment">// -------------------------</span>
    <a class="code" href="class_o_t_string.html">OTString</a> strLedger(THE_LEDGER);
    <a class="code" href="class_o_t_ledger.html">OTLedger</a> theLedger(theUserID, theAccountID, theServerID);
<span class="comment">//  std::set&lt;int64_t&gt; setUnloaded;</span>

    <span class="keywordflow">if</span> (    !theLedger.LoadLedgerFromString(strLedger)
<span class="comment">//      ||  !theLedger.LoadBoxReceipts(&amp;setUnloaded)    // This is now done below, for the individual transaction, for better optimization.</span>
            )                                           <span class="comment">// Update: now in the theLedger.GetInstrument call.</span>
    {
        <a class="code" href="class_o_t_string.html">OTString</a> strUserID(theUserID);
        <a class="code" href="class_o_t_string.html">OTString</a> strAcctID(theAccountID);
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error loading ledger from string. UserID / Acct ID: %s / %s\n&quot;</span>, __FUNCTION__,
            strUserID.Get(), strAcctID.Get());
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    }
    <span class="comment">// -----------------------------------------------------</span>
    <span class="comment">// At this point, I know theLedger loaded successfully.</span>
    <span class="comment">//</span>
    <a class="code" href="class_o_t_payment.html">OTPayment</a> * pPayment = theLedger.GetInstrument(*pNym, nIndex); <span class="comment">// caller is responsible to delete.</span>
    <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTPayment&gt;</a> thePaymentAngel(pPayment);

    <span class="keywordflow">if</span> ((NULL == pPayment) || !pPayment-&gt;<a class="code" href="class_o_t_payment.html#a7f95ab568d481ecc7d38689c80caba84">IsValid</a>())
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: theLedger.GetInstrument either returned NULL, or an invalid instrument.\n&quot;</span>,
                       __FUNCTION__);
    }
    <span class="keywordflow">else</span>
    {
        <span class="comment">// NOTE: instead of loading up an OTPayment, and then loading a cheque/purse/etc from it,</span>
        <span class="comment">// we just send the cheque/purse/etc directly and use it to construct the OTPayment.</span>
        <span class="comment">// (Saves a step.)</span>
        <span class="comment">//</span>
        <a class="code" href="class_o_t_string.html">OTString</a> strPaymentContents;

        <span class="keywordflow">if</span> (<span class="keyword">false</span> == pPayment-&gt;<a class="code" href="class_o_t_payment.html#a1d067b54e63054b1021ef5f187911fab">GetPaymentContents</a>(strPaymentContents))
        {
            <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Failed retrieving payment instrument from OTPayment object.\n&quot;</span>,
                           __FUNCTION__);
            <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
        }
        <span class="comment">// ------------------------------------------------------</span>
        std::string gBuf = strPaymentContents.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();
        <span class="keywordflow">return</span> gBuf;
    }

    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aabc9b8e0c20f23310e9bf1f273d44d04"></a><!-- doxytag: member="OTAPI_Exec::Ledger_GetTransactionByID" ref="aabc9b8e0c20f23310e9bf1f273d44d04" args="(const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ACCOUNT_ID, const std::string &amp;THE_LEDGER, const int64_t &amp;TRANSACTION_NUMBER)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#aabc9b8e0c20f23310e9bf1f273d44d04">OTAPI_Exec::Ledger_GetTransactionByID</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ACCOUNT_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_LEDGER</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int64_t &amp;&#160;</td>
          <td class="paramname"><em>TRANSACTION_NUMBER</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l08472">8472</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty())          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID.empty())            { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>            ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (ACCOUNT_ID.empty())         { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;ACCOUNT_ID&quot;</span>         ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (THE_LEDGER.empty())         { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_LEDGER&quot;</span>         ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (0 &gt; TRANSACTION_NUMBER)     { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Negative: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;TRANSACTION_NUMBER&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keyword">const</span> int64_t lTransactionNumber = TRANSACTION_NUMBER;

    <span class="keywordflow">if</span> (0 &gt; lTransactionNumber) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Bad transaction number passed in (negative value)\n&quot;</span>, __FUNCTION__); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theServerID(SERVER_ID), theUserID(USER_ID), theAccountID(ACCOUNT_ID);

    <a class="code" href="class_o_t_string.html">OTString</a> strLedger(THE_LEDGER);

    <span class="comment">// -----------------------------------------------------</span>

    <a class="code" href="class_o_t_ledger.html">OTLedger</a> theLedger(theUserID, theAccountID, theServerID);

    <span class="keywordflow">if</span> (<span class="keyword">false</span> == theLedger.LoadLedgerFromString(strLedger))
    {
        <a class="code" href="class_o_t_string.html">OTString</a> strAcctID(theAccountID);
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error loading ledger from string. Acct ID: %s\n&quot;</span>, __FUNCTION__, strAcctID.Get());
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    }
    <span class="comment">// At this point, I know theLedger loaded successfully.</span>
    <span class="comment">// -----------------------------------------------------</span>

    <a class="code" href="class_o_t_transaction.html">OTTransaction</a> * pTransaction = theLedger.GetTransaction(static_cast&lt;int64_t&gt;(lTransactionNumber));
    <span class="comment">// No need to cleanup this transaction, the ledger owns it already.</span>

    <span class="keywordflow">if</span> (NULL == pTransaction)
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: No transaction found in ledger with that number: %lld.\n&quot;</span>, __FUNCTION__, lTransactionNumber);
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>; <span class="comment">// Maybe he was just looking; this isn&#39;t necessarily an error.</span>
    }
    <span class="comment">// -----------------------------------------------------</span>

    <span class="comment">// At this point, I actually have the transaction pointer, so let&#39;s return it in string form...</span>
    <span class="comment">//</span>
    <span class="keyword">const</span> int64_t lTransactionNum = pTransaction-&gt;<a class="code" href="class_o_t_transaction_type.html#aa204b21b7f498389f746742c1d2007fa">GetTransactionNum</a>();
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(lTransactionNum == lTransactionNumber);

    <span class="comment">// Update: for transactions in ABBREVIATED form, the string is empty, since it has never actually</span>
    <span class="comment">// been signed (in fact the whole point32_t with abbreviated transactions in a ledger is that they</span>
    <span class="comment">// take up very little room, and have no signature of their own, but exist merely as XML tags on</span>
    <span class="comment">// their parent ledger.)</span>
    <span class="comment">//</span>
    <span class="comment">// THEREFORE I must check to see if this transaction is abbreviated and if so, sign it in order to</span>
    <span class="comment">// force the UpdateContents() call, so the programmatic user of this API will be able to load it up.</span>
    <span class="comment">//</span>
    <span class="keywordflow">if</span> (pTransaction-&gt;<a class="code" href="class_o_t_transaction.html#aacf7e02644aace6f245b9d493e721186">IsAbbreviated</a>())
    {
        <span class="comment">// First we see if we are able to load the full version of this box receipt.</span>
        <span class="comment">// (Perhaps it has already been downloaded sometime in the past, and simply</span>
        <span class="comment">// needs to be loaded up. Worth a shot.)</span>
        <span class="comment">//</span>
        <span class="keyword">const</span> <span class="keywordtype">bool</span> &amp; bLoadedBoxReceipt = theLedger.LoadBoxReceipt(static_cast&lt;int64_t&gt;(lTransactionNum)); <span class="comment">// I still want it to send the abbreviated form, if this fails.</span>

        <span class="comment">// Grab this pointer again, since the object was re-instantiated</span>
        <span class="comment">// in the case of a successful LoadBoxReceipt.</span>
        <span class="comment">//</span>
        <span class="keywordflow">if</span> (bLoadedBoxReceipt)
            pTransaction = theLedger.GetTransaction(static_cast&lt;int64_t&gt;(lTransactionNum));

        <span class="comment">// (else if false == bLoadedBoxReceipt, then pTransaction ALREADY points</span>
        <span class="comment">// to the abbreviated version.)</span>
        <span class="comment">// -------------------------</span>
        <span class="keywordflow">if</span> (NULL == pTransaction)
        {
            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: good ID, but uncovered \&quot;\&quot; pointer after trying to load full version &quot;</span>
                <span class="stringliteral">&quot;of receipt (from abbreviated.) Probably just need to download this one...\n&quot;</span>,
                __FUNCTION__);
            <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>; <span class="comment">// Weird.</span>
        }
        <span class="comment">// If it&#39;s STILL abbreviated after the above efforts, then there&#39;s nothing else I can do</span>
        <span class="comment">// except return the abbreviated version. The caller may still need the info available on</span>
        <span class="comment">// the abbreviated version. (And the caller may yet download the full version...)</span>
        <span class="comment">//</span>
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pTransaction-&gt;<a class="code" href="class_o_t_transaction.html#aacf7e02644aace6f245b9d493e721186">IsAbbreviated</a>())
        {
            <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pNym = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a08144e29a333dd0e1087c4655e6981ee">GetNym</a>(theUserID, __FUNCTION__);
            <span class="keywordflow">if</span> (NULL == pNym) <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>; <span class="comment">// Weird.</span>
            <span class="comment">// -------------------------</span>
            pTransaction-&gt;<a class="code" href="class_o_t_contract.html#aae54340526fbd8eb8a18de27a4b97c83">ReleaseSignatures</a>();
            pTransaction-&gt;<a class="code" href="class_o_t_contract.html#abd60037fe655ee8cae9a3ece5d1e2ea6">SignContract</a>(*pNym);
            pTransaction-&gt;<a class="code" href="class_o_t_contract.html#a363ae430d4fd9256ab8364dbafb95444">SaveContract</a>();
        }
    }
    <span class="comment">// ------------------------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strOutput(*pTransaction); <span class="comment">// For the output</span>
    std::string pBuf = strOutput.Get();

    <span class="keywordflow">return</span> pBuf;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad86da1897ef6aa8d9f4bb07a694fe9f6"></a><!-- doxytag: member="OTAPI_Exec::Ledger_GetTransactionByIndex" ref="ad86da1897ef6aa8d9f4bb07a694fe9f6" args="(const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ACCOUNT_ID, const std::string &amp;THE_LEDGER, const int32_t &amp;nIndex)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#ad86da1897ef6aa8d9f4bb07a694fe9f6">OTAPI_Exec::Ledger_GetTransactionByIndex</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ACCOUNT_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_LEDGER</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int32_t &amp;&#160;</td>
          <td class="paramname"><em>nIndex</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Lookup a transaction or its ID (from within a ledger) based on index or transaction number. </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l08377">8377</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty())          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID.empty())            { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>            ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (ACCOUNT_ID.empty())         { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;ACCOUNT_ID&quot;</span>         ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (THE_LEDGER.empty())         { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_LEDGER&quot;</span>         ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keywordflow">if</span> (0 &gt; nIndex) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: nIndex is out of bounds (it&#39;s in the negative!)\n&quot;</span>, __FUNCTION__); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theServerID(SERVER_ID), theUserID(USER_ID), theAccountID(ACCOUNT_ID);

    <a class="code" href="class_o_t_string.html">OTString</a> strLedger(THE_LEDGER);
    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_ledger.html">OTLedger</a> theLedger(theUserID, theAccountID, theServerID);
    <span class="comment">//  std::set&lt;int64_t&gt; setUnloaded;</span>

    <span class="keywordflow">if</span> (    !theLedger.LoadLedgerFromString(strLedger)
<span class="comment">//      ||  !theLedger.LoadBoxReceipts(&amp;setUnloaded)    // This is done below, for the individual transaction, for better optimization.</span>
            )
    {
        <a class="code" href="class_o_t_string.html">OTString</a> strAcctID(theAccountID);
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error loading ledger from string, or loading box receipts subsequently. Acct ID: %s\n&quot;</span>, __FUNCTION__, strAcctID.Get());
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    }

    <span class="comment">// At this point, I know theLedger loaded successfully.</span>

    <span class="keywordflow">if</span> (nIndex &gt;= theLedger.GetTransactionCount())
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: out of bounds: %d\n&quot;</span>, __FUNCTION__, nIndex);
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>; <span class="comment">// out of bounds. I&#39;m saving from an OT_ASSERT_MSG() happening here. (Maybe I shouldn&#39;t.)</span>
    }

    <a class="code" href="class_o_t_transaction.html">OTTransaction</a> * pTransaction = theLedger.GetTransactionByIndex(nIndex);
    <span class="comment">//  OTCleanup&lt;OTTransaction&gt; theAngel(pTransaction); // THE LEDGER CLEANS THIS ALREADY.</span>

    <span class="keywordflow">if</span> (NULL == pTransaction)
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Failure: good index but uncovered \&quot;\&quot; pointer: %d\n&quot;</span>, __FUNCTION__, nIndex);
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>; <span class="comment">// Weird.</span>
    }

    <span class="keyword">const</span> int64_t lTransactionNum = pTransaction-&gt;<a class="code" href="class_o_t_transaction_type.html#aa204b21b7f498389f746742c1d2007fa">GetTransactionNum</a>();
    <span class="comment">// At this point, I actually have the transaction pointer, so let&#39;s return it in string form...</span>

    <span class="comment">// Update: for transactions in ABBREVIATED form, the string is empty, since it has never actually</span>
    <span class="comment">// been signed (in fact the whole point32_t with abbreviated transactions in a ledger is that they</span>
    <span class="comment">// take up very little room, and have no signature of their own, but exist merely as XML tags on</span>
    <span class="comment">// their parent ledger.)</span>
    <span class="comment">//</span>
    <span class="comment">// THEREFORE I must check to see if this transaction is abbreviated and if so, sign it in order to</span>
    <span class="comment">// force the UpdateContents() call, so the programmatic user of this API will be able to load it up.</span>
    <span class="comment">//</span>
    <span class="keywordflow">if</span> (pTransaction-&gt;<a class="code" href="class_o_t_transaction.html#aacf7e02644aace6f245b9d493e721186">IsAbbreviated</a>())
    {
        theLedger.LoadBoxReceipt(static_cast&lt;int64_t&gt;(lTransactionNum)); <span class="comment">// I don&#39;t check return val here because I still want it to send the abbreviated form, if this fails.</span>
        pTransaction = theLedger.GetTransaction(static_cast&lt;int64_t&gt;(lTransactionNum));
        <span class="comment">// -------------------------</span>
        <span class="keywordflow">if</span> (NULL == pTransaction)
        {
            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: good index but uncovered \&quot;\&quot; pointer after trying to load full version of receipt (from abbreviated): %d\n&quot;</span>, __FUNCTION__, nIndex);
            <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>; <span class="comment">// Weird.</span>
        }
        <span class="comment">// I was doing this when it was abbreviated. But now (above) I just</span>
        <span class="comment">// load the box receipt itself. (This code is a hack that creates a</span>
        <span class="comment">// serialized abbreviated version.)</span>
        <span class="comment">//      OTPseudonym * pNym = OTAPI()-&gt;GetNym(theUserID, &quot;OTAPI_Exec::Ledger_GetTransactionByIndex&quot;);</span>
        <span class="comment">//      if (NULL == pNym) return &quot;&quot;;</span>
        <span class="comment">//      // -------------------------</span>
        <span class="comment">//      pTransaction-&gt;ReleaseSignatures();</span>
        <span class="comment">//      pTransaction-&gt;SignContract(*pNym);</span>
        <span class="comment">//      pTransaction-&gt;SaveContract();</span>
    }
    <span class="comment">// ------------------------------------------------</span>

    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strOutput(*pTransaction); <span class="comment">// For the output</span>
    std::string pBuf = strOutput.Get();



    <span class="keywordflow">return</span> pBuf;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a0a4e3ff37ee5c1be0b5805f6498b43eb"></a><!-- doxytag: member="OTAPI_Exec::Ledger_GetTransactionIDByIndex" ref="a0a4e3ff37ee5c1be0b5805f6498b43eb" args="(const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ACCOUNT_ID, const std::string &amp;THE_LEDGER, const int32_t &amp;nIndex)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64_t <a class="el" href="class_o_t_a_p_i___exec.html#a0a4e3ff37ee5c1be0b5805f6498b43eb">OTAPI_Exec::Ledger_GetTransactionIDByIndex</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ACCOUNT_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_LEDGER</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int32_t &amp;&#160;</td>
          <td class="paramname"><em>nIndex</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l08719">8719</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty())          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID.empty())            { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>            ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (ACCOUNT_ID.empty())         { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;ACCOUNT_ID&quot;</span>         ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (THE_LEDGER.empty())         { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_LEDGER&quot;</span>         ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keywordflow">if</span> (0 &gt; nIndex) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: nIndex is out of bounds (it&#39;s in the negative!)\n&quot;</span>, __FUNCTION__); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theServerID(SERVER_ID), theUserID(USER_ID), theAccountID(ACCOUNT_ID);

    <a class="code" href="class_o_t_string.html">OTString</a> strLedger(THE_LEDGER);
    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_string.html">OTString</a> strOutput(<span class="stringliteral">&quot;-1&quot;</span>); <span class="comment">// For the output</span>

    int64_t lTransactionNumber = 0;
    <a class="code" href="class_o_t_transaction.html">OTTransaction</a> * pTransaction = NULL;

    <a class="code" href="class_o_t_ledger.html">OTLedger</a> theLedger(theUserID, theAccountID, theServerID);

    <span class="keywordflow">if</span> (<span class="keyword">false</span> == theLedger.LoadLedgerFromString(strLedger))
    {
        <a class="code" href="class_o_t_string.html">OTString</a> strAcctID(theAccountID);
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error loading ledger from string. Acct ID: %s\n&quot;</span>, __FUNCTION__, strAcctID.Get());
    }

    <span class="comment">// At this point, I know theLedger loaded successfully.</span>

    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (nIndex &gt;= theLedger.GetTransactionCount())
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: out of bounds: %d\n&quot;</span>, __FUNCTION__, nIndex);
        <span class="comment">// out of bounds. I&#39;m saving from an OT_ASSERT_MSG() happening here. (Maybe I shouldn&#39;t.)</span>
    }

    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (NULL == (pTransaction = theLedger.GetTransactionByIndex(nIndex)))
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: good index but uncovered \&quot;\&quot; pointer: %d\n&quot;</span>, __FUNCTION__, nIndex);
    } <span class="comment">// NO NEED TO CLEANUP the transaction, since it is already &quot;owned&quot; by theLedger.</span>

    <span class="comment">// At this point, I actually have the transaction pointer, so let&#39;s get the ID...</span>

    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (0 &gt;= (lTransactionNumber = pTransaction-&gt;<a class="code" href="class_o_t_transaction_type.html#aa204b21b7f498389f746742c1d2007fa">GetTransactionNum</a>()))
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: negative or zero transaction num: %lld\n&quot;</span>, __FUNCTION__, lTransactionNumber);
        <span class="keywordflow">return</span> -1;
    }
    <span class="keywordflow">else</span> <span class="comment">// success</span>
    {
        <span class="keywordflow">return</span> lTransactionNumber;
    }

    <span class="keywordflow">return</span> -1;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac8dc06202229e3ecd7c6284b274f2745"></a><!-- doxytag: member="OTAPI_Exec::LoadAssetAccount" ref="ac8dc06202229e3ecd7c6284b274f2745" args="(const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ACCOUNT_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#ac8dc06202229e3ecd7c6284b274f2745">OTAPI_Exec::LoadAssetAccount</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ACCOUNT_ID</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>-------------------------------------------------------------- LOAD ACCOUNT / INBOX / OUTBOX -- (from local storage)</p>
<p>Loads an acct, or inbox or outbox, based on account ID, (from local storage) and returns it as string (or returns NULL if it couldn't load it.) </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l07562">7562</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty())  { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>  ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID.empty())    { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>    ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (ACCOUNT_ID.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;ACCOUNT_ID&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theServerID(SERVER_ID);
    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theUserID(USER_ID);
    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theAccountID(ACCOUNT_ID);

    <span class="comment">// There is an OT_ASSERT in here for memory failure,</span>
    <span class="comment">// but it still might return &quot;&quot; if various verification fails.</span>
    <a class="code" href="class_o_t_account.html">OTAccount</a> * pAccount = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#ad8538f636eb127ddcb4ca4a72ec7cc88">LoadAssetAccount</a>(theServerID, theUserID, theAccountID);

    <span class="comment">// Make sure it gets cleaned up when this goes out of scope.</span>
    <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTAccount&gt;</a>    theAngel(pAccount); <span class="comment">// I pass the pointer, in case it&#39;s &quot;&quot;.</span>

    <span class="keywordflow">if</span> (NULL == pAccount)
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Failure calling OT_API::LoadAssetAccount.\nAccount ID: %s\n&quot;</span>,
                       __FUNCTION__, ACCOUNT_ID.c_str());
    }
    <span class="keywordflow">else</span> <span class="comment">// success</span>
    {
        <a class="code" href="class_o_t_string.html">OTString</a> strOutput(*pAccount); <span class="comment">// For the output</span>
        std::string pBuf = strOutput.Get();
        <span class="keywordflow">return</span> pBuf;
    }
    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a610d699de1a08f3fbed94990cf01b13e"></a><!-- doxytag: member="OTAPI_Exec::LoadAssetContract" ref="a610d699de1a08f3fbed94990cf01b13e" args="(const std::string &amp;ASSET_TYPE_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a610d699de1a08f3fbed94990cf01b13e">OTAPI_Exec::LoadAssetContract</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ASSET_TYPE_ID</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l07500">7500</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (ASSET_TYPE_ID.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null ASSET_TYPE_ID passed in!\n&quot;</span>, __FUNCTION__); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theAssetID(ASSET_TYPE_ID);

    <span class="comment">// There is an OT_ASSERT in here for memory failure,</span>
    <span class="comment">// but it still might return &quot;&quot; if various verification fails.</span>
    <a class="code" href="class_o_t_asset_contract.html">OTAssetContract</a> * pContract = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a9e0c39f51b0c700bfeb378d7ab868724">LoadAssetContract</a>(theAssetID);

    <span class="comment">// Make sure it gets cleaned up when this goes out of scope.</span>
    <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTAssetContract&gt;</a>  theAngel(pContract); <span class="comment">// I pass the pointer, in case it&#39;s &quot;&quot;.</span>

    <span class="keywordflow">if</span> (NULL == pContract)
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Failure calling OT_API::LoadAssetContract.\n Asset Type: %s\n&quot;</span>,
                       __FUNCTION__, ASSET_TYPE_ID.c_str());
    }
    <span class="keywordflow">else</span> <span class="comment">// success</span>
    {
        <a class="code" href="class_o_t_string.html">OTString</a> strOutput(*pContract); <span class="comment">// For the output</span>
        std::string pBuf = strOutput.Get();
        <span class="keywordflow">return</span> pBuf;
    }
    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="af3f55623e7cfe58ab4395687b5f7b0b6"></a><!-- doxytag: member="OTAPI_Exec::LoadExpiredBox" ref="af3f55623e7cfe58ab4395687b5f7b0b6" args="(const std::string &amp;SERVER_ID, const std::string &amp;USER_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#af3f55623e7cfe58ab4395687b5f7b0b6">OTAPI_Exec::LoadExpiredBox</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l08110">8110</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty())  { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>  ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID.empty())    { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>    ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theServerID(SERVER_ID);
    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theUserID(USER_ID);

    <span class="comment">// There is an OT_ASSERT in here for memory failure,</span>
    <span class="comment">// but it still might return &quot;&quot; if various verification fails.</span>
    <a class="code" href="class_o_t_ledger.html">OTLedger</a> * pLedger = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#ae3d6ecd9fabfea445d35fd7307008856">LoadExpiredBox</a>(theServerID, theUserID);

    <span class="comment">// Make sure it gets cleaned up when this goes out of scope.</span>
    <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTLedger&gt;</a> theAngel(pLedger); <span class="comment">// I pass the pointer, in case it&#39;s &quot;&quot;.</span>

    <span class="keywordflow">if</span> (NULL == pLedger)
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(1, <span class="stringliteral">&quot;%s: Failure calling OT_API::LoadExpiredBox.\n&quot;</span>,__FUNCTION__);
    }
    <span class="keywordflow">else</span> <span class="comment">// success</span>
    {
        <a class="code" href="class_o_t_string.html">OTString</a> strOutput(*pLedger); <span class="comment">// For the output</span>
        std::string pBuf = strOutput.Get();
        <span class="keywordflow">return</span> pBuf;
    }
    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a53ad0ca7b23b5dd3f6f075423d4c9fa2"></a><!-- doxytag: member="OTAPI_Exec::LoadExpiredBoxNoVerify" ref="a53ad0ca7b23b5dd3f6f075423d4c9fa2" args="(const std::string &amp;SERVER_ID, const std::string &amp;USER_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a53ad0ca7b23b5dd3f6f075423d4c9fa2">OTAPI_Exec::LoadExpiredBoxNoVerify</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l08141">8141</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty())  { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>  ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID.empty())    { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>    ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theServerID(SERVER_ID);
    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theUserID(USER_ID);

    <span class="comment">// There is an OT_ASSERT in here for memory failure,</span>
    <span class="comment">// but it still might return &quot;&quot; if various verification fails.</span>
    <a class="code" href="class_o_t_ledger.html">OTLedger</a> * pLedger = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a7b9a649113879b83befa1d7acc00b79d">LoadExpiredBoxNoVerify</a>(theServerID, theUserID);

    <span class="comment">// Make sure it gets cleaned up when this goes out of scope.</span>
    <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTLedger&gt;</a> theAngel(pLedger); <span class="comment">// I pass the pointer, in case it&#39;s &quot;&quot;.</span>

    <span class="keywordflow">if</span> (NULL == pLedger)
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(1, <span class="stringliteral">&quot;%s: Failure calling OT_API::LoadExpiredBoxNoVerify.\n&quot;</span>, __FUNCTION__);
    }
    <span class="keywordflow">else</span> <span class="comment">// success</span>
    {
        <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strOutput(*pLedger); <span class="comment">// For the output</span>
        std::string pBuf = strOutput.Get();
        <span class="keywordflow">return</span> pBuf;
    }
    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad13ec1f9fdf6de0d0225f9fe525a449d"></a><!-- doxytag: member="OTAPI_Exec::LoadInbox" ref="ad13ec1f9fdf6de0d0225f9fe525a449d" args="(const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ACCOUNT_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#ad13ec1f9fdf6de0d0225f9fe525a449d">OTAPI_Exec::LoadInbox</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ACCOUNT_ID</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l07820">7820</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty())  { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>  ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID.empty())    { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>    ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (ACCOUNT_ID.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;ACCOUNT_ID&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theServerID(SERVER_ID);
    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theUserID(USER_ID);
    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theAccountID(ACCOUNT_ID);

    <span class="comment">// There is an OT_ASSERT in here for memory failure,</span>
    <span class="comment">// but it still might return &quot;&quot; if various verification fails.</span>
    <a class="code" href="class_o_t_ledger.html">OTLedger</a> * pLedger = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a478f3f32e383e05a203807810bc94940">LoadInbox</a>(theServerID, theUserID, theAccountID);

    <span class="comment">// Make sure it gets cleaned up when this goes out of scope.</span>
    <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTLedger&gt;</a> theAngel(pLedger); <span class="comment">// I pass the pointer, in case it&#39;s &quot;&quot;.</span>

    <span class="keywordflow">if</span> (NULL == pLedger)
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(1, <span class="stringliteral">&quot;%s: Failure calling OT_API::LoadInbox.\nAccount ID: %s\n&quot;</span>, __FUNCTION__, ACCOUNT_ID.c_str());
    }
    <span class="keywordflow">else</span> <span class="comment">// success</span>
    {
        <a class="code" href="class_o_t_string.html">OTString</a> strOutput(*pLedger); <span class="comment">// For the output</span>
        std::string pBuf = strOutput.Get();
        <span class="keywordflow">return</span> pBuf;
    }

    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="af2d72e9950e4a1c33019a4a2fac2acf8"></a><!-- doxytag: member="OTAPI_Exec::LoadInboxNoVerify" ref="af2d72e9950e4a1c33019a4a2fac2acf8" args="(const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ACCOUNT_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#af2d72e9950e4a1c33019a4a2fac2acf8">OTAPI_Exec::LoadInboxNoVerify</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ACCOUNT_ID</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>These versions don't verify the ledger, they just load it up. </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l07856">7856</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty())  { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>  ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID.empty())    { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>    ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (ACCOUNT_ID.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;ACCOUNT_ID&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theServerID(SERVER_ID);
    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theUserID(USER_ID);
    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theAccountID(ACCOUNT_ID);

    <span class="comment">// There is an OT_ASSERT in here for memory failure,</span>
    <span class="comment">// but it still might return &quot;&quot; if various verification fails.</span>
    <a class="code" href="class_o_t_ledger.html">OTLedger</a> * pLedger = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a11a9479b4875de4377232237d3521690">LoadInboxNoVerify</a>(theServerID, theUserID, theAccountID);

    <span class="comment">// Make sure it gets cleaned up when this goes out of scope.</span>
    <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTLedger&gt;</a> theAngel(pLedger); <span class="comment">// I pass the pointer, in case it&#39;s &quot;&quot;.</span>

    <span class="keywordflow">if</span> (NULL == pLedger)
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(1, <span class="stringliteral">&quot;%s: Failure calling OT_API::LoadInboxNoVerify.\nAccount ID: %s\n&quot;</span>, __FUNCTION__, ACCOUNT_ID.c_str());
    }
    <span class="keywordflow">else</span> <span class="comment">// success</span>
    {
        <a class="code" href="class_o_t_string.html">OTString</a> strOutput(*pLedger); <span class="comment">// For the output</span>
        std::string pBuf = strOutput.Get();
        <span class="keywordflow">return</span> pBuf;
    }

    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="abdede0ee9c0f359d02a405ef0e590863"></a><!-- doxytag: member="OTAPI_Exec::LoadMint" ref="abdede0ee9c0f359d02a405ef0e590863" args="(const std::string &amp;SERVER_ID, const std::string &amp;ASSET_TYPE_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#abdede0ee9c0f359d02a405ef0e590863">OTAPI_Exec::LoadMint</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ASSET_TYPE_ID</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l07471">7471</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty())     { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>     ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (ASSET_TYPE_ID.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;ASSET_TYPE_ID&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theServerID(SERVER_ID);
    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theAssetID(ASSET_TYPE_ID);

    <span class="comment">// There is an OT_ASSERT in here for memory failure,</span>
    <span class="comment">// but it still might return &quot;&quot; if various verification fails.</span>
    <a class="code" href="class_o_t_mint.html">OTMint</a> * pMint = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a7ed4ec7967a76d735047e5bae1574bf5">LoadMint</a>(theServerID, theAssetID);

    <span class="comment">// Make sure it gets cleaned up when this goes out of scope.</span>
    <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTMint&gt;</a>   theMintAngel(pMint); <span class="comment">// I pass the pointer, in case it&#39;s &quot;&quot;.</span>

    <span class="keywordflow">if</span> (NULL == pMint)
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;OTAPI_Exec::LoadMint: Failure calling OT_API::LoadMint.\nServer: %s\n Asset Type: %s\n&quot;</span>,
                       __FUNCTION__, SERVER_ID.c_str(), ASSET_TYPE_ID.c_str());
    <span class="keywordflow">else</span> <span class="comment">// success</span>
    {
        <a class="code" href="class_o_t_string.html">OTString</a> strOutput(*pMint); <span class="comment">// For the output</span>
        std::string pBuf = strOutput.Get();
        <span class="keywordflow">return</span> pBuf;
    }
    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="adc10400f3c5ca79977afbc32cece6137"></a><!-- doxytag: member="OTAPI_Exec::LoadNymbox" ref="adc10400f3c5ca79977afbc32cece6137" args="(const std::string &amp;SERVER_ID, const std::string &amp;USER_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#adc10400f3c5ca79977afbc32cece6137">OTAPI_Exec::LoadNymbox</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l07755">7755</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID.empty())   { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>   ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theServerID(SERVER_ID);
    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theUserID(USER_ID);

    <span class="comment">// There is an OT_ASSERT in here for memory failure,</span>
    <span class="comment">// but it still might return &quot;&quot; if various verification fails.</span>
    <a class="code" href="class_o_t_ledger.html">OTLedger</a> * pLedger = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a407abef5bd443ce7f68e399f76252fd3">LoadNymbox</a>(theServerID, theUserID);

    <span class="comment">// Make sure it gets cleaned up when this goes out of scope.</span>
    <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTLedger&gt;</a> theAngel(pLedger); <span class="comment">// I pass the pointer, in case it&#39;s &quot;&quot;.</span>

    <span class="keywordflow">if</span> (NULL == pLedger)
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Failure calling OT_API::LoadNymbox.\n&quot;</span>, __FUNCTION__);
    }
    <span class="keywordflow">else</span> <span class="comment">// success</span>
    {
        <a class="code" href="class_o_t_string.html">OTString</a> strOutput(*pLedger); <span class="comment">// For the output</span>
        std::string pBuf = strOutput.Get();
        <span class="keywordflow">return</span> pBuf;
    }

    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a5afcb37758acf603d42bd4a586618077"></a><!-- doxytag: member="OTAPI_Exec::LoadNymboxNoVerify" ref="a5afcb37758acf603d42bd4a586618077" args="(const std::string &amp;SERVER_ID, const std::string &amp;USER_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a5afcb37758acf603d42bd4a586618077">OTAPI_Exec::LoadNymboxNoVerify</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l07787">7787</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID.empty())   { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>   ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theServerID(SERVER_ID);
    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theUserID(USER_ID);

    <span class="comment">// There is an OT_ASSERT in here for memory failure,</span>
    <span class="comment">// but it still might return &quot;&quot; if various verification fails.</span>
    <a class="code" href="class_o_t_ledger.html">OTLedger</a> * pLedger = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a5d73d9af141c79478e431d81b3ac641d">LoadNymboxNoVerify</a>(theServerID, theUserID);

    <span class="comment">// Make sure it gets cleaned up when this goes out of scope.</span>
    <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTLedger&gt;</a> theAngel(pLedger); <span class="comment">// I pass the pointer, in case it&#39;s &quot;&quot;.</span>

    <span class="keywordflow">if</span> (NULL == pLedger)
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Failure calling OT_API::LoadNymboxNoVerify.\n&quot;</span>, __FUNCTION__);
    }
    <span class="keywordflow">else</span> <span class="comment">// success</span>
    {
        <a class="code" href="class_o_t_string.html">OTString</a> strOutput(*pLedger); <span class="comment">// For the output</span>
        std::string pBuf = strOutput.Get();
        <span class="keywordflow">return</span> pBuf;
    }

    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad0eff5c7f97a80201f96034fecfaefa1"></a><!-- doxytag: member="OTAPI_Exec::LoadOutbox" ref="ad0eff5c7f97a80201f96034fecfaefa1" args="(const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ACCOUNT_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#ad0eff5c7f97a80201f96034fecfaefa1">OTAPI_Exec::LoadOutbox</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ACCOUNT_ID</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l07892">7892</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty())  { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>  ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID.empty())    { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>    ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (ACCOUNT_ID.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;ACCOUNT_ID&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theServerID(SERVER_ID);
    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theUserID(USER_ID);
    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theAccountID(ACCOUNT_ID);

    <span class="comment">// There is an OT_ASSERT in here for memory failure,</span>
    <span class="comment">// but it still might return &quot;&quot; if various verification fails.</span>
    <a class="code" href="class_o_t_ledger.html">OTLedger</a> * pLedger = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#aeaf758c15cb39763d3ac80e7582e5409">LoadOutbox</a>(theServerID, theUserID, theAccountID);

    <span class="comment">// Make sure it gets cleaned up when this goes out of scope.</span>
    <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTLedger&gt;</a> theAngel(pLedger); <span class="comment">// I pass the pointer, in case it&#39;s &quot;&quot;.</span>

    <span class="keywordflow">if</span> (NULL == pLedger)
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(1, <span class="stringliteral">&quot;%s: Failure calling OT_API::LoadOutbox().\nAccount ID: %s\n&quot;</span>, __FUNCTION__, ACCOUNT_ID.c_str());
    }
    <span class="keywordflow">else</span> <span class="comment">// success</span>
    {
        <a class="code" href="class_o_t_string.html">OTString</a> strOutput(*pLedger); <span class="comment">// For the output</span>
        std::string pBuf = strOutput.Get();
        <span class="keywordflow">return</span> pBuf;
    }

    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae985c8026afab47598da16babeed4864"></a><!-- doxytag: member="OTAPI_Exec::LoadOutboxNoVerify" ref="ae985c8026afab47598da16babeed4864" args="(const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ACCOUNT_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#ae985c8026afab47598da16babeed4864">OTAPI_Exec::LoadOutboxNoVerify</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ACCOUNT_ID</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l07928">7928</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty())  { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>  ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID.empty())    { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>    ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (ACCOUNT_ID.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;ACCOUNT_ID&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theServerID(SERVER_ID);
    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theUserID(USER_ID);
    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theAccountID(ACCOUNT_ID);

    <span class="comment">// There is an OT_ASSERT in here for memory failure,</span>
    <span class="comment">// but it still might return &quot;&quot; if various verification fails.</span>
    <a class="code" href="class_o_t_ledger.html">OTLedger</a> * pLedger = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#af4b4a5ef255263fbda9958082d393875">LoadOutboxNoVerify</a>(theServerID, theUserID, theAccountID);

    <span class="comment">// Make sure it gets cleaned up when this goes out of scope.</span>
    <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTLedger&gt;</a> theAngel(pLedger); <span class="comment">// I pass the pointer, in case it&#39;s &quot;&quot;.</span>

    <span class="keywordflow">if</span> (NULL == pLedger)
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(1, <span class="stringliteral">&quot;%s: Failure calling OT_API::LoadOutboxNoVerify.\nAccount ID: %s\n&quot;</span>, __FUNCTION__, ACCOUNT_ID.c_str());
    }
    <span class="keywordflow">else</span> <span class="comment">// success</span>
    {
        <a class="code" href="class_o_t_string.html">OTString</a> strOutput(*pLedger); <span class="comment">// For the output</span>
        std::string pBuf = strOutput.Get();
        <span class="keywordflow">return</span> pBuf;
    }

    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a1459f5272b7b90c2dfde5a833b1b11ab"></a><!-- doxytag: member="OTAPI_Exec::LoadPaymentInbox" ref="a1459f5272b7b90c2dfde5a833b1b11ab" args="(const std::string &amp;SERVER_ID, const std::string &amp;USER_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a1459f5272b7b90c2dfde5a833b1b11ab">OTAPI_Exec::LoadPaymentInbox</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l07972">7972</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID.empty())   { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>   ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theServerID(SERVER_ID);
    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theUserID(USER_ID);

    <span class="comment">// There is an OT_ASSERT in here for memory failure,</span>
    <span class="comment">// but it still might return &quot;&quot; if various verification fails.</span>
    <a class="code" href="class_o_t_ledger.html">OTLedger</a> * pLedger = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a5077987cf25f441923c88cb51b3d940a">LoadPaymentInbox</a>(theServerID, theUserID);

    <span class="comment">// Make sure it gets cleaned up when this goes out of scope.</span>
    <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTLedger&gt;</a> theAngel(pLedger); <span class="comment">// I pass the pointer, in case it&#39;s &quot;&quot;.</span>

    <span class="keywordflow">if</span> (NULL == pLedger)
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(1, <span class="stringliteral">&quot;%s: Failure calling OT_API::LoadPaymentInbox.\n User ID: %s\n&quot;</span>, __FUNCTION__, USER_ID.c_str());
    }
    <span class="keywordflow">else</span> <span class="comment">// success</span>
    {
        <a class="code" href="class_o_t_string.html">OTString</a> strOutput(*pLedger); <span class="comment">// For the output</span>
        std::string pBuf = strOutput.Get();
        <span class="keywordflow">return</span> pBuf;
    }

    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a8f6682955ddaea9dca9a6056bd41080b"></a><!-- doxytag: member="OTAPI_Exec::LoadPaymentInboxNoVerify" ref="a8f6682955ddaea9dca9a6056bd41080b" args="(const std::string &amp;SERVER_ID, const std::string &amp;USER_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a8f6682955ddaea9dca9a6056bd41080b">OTAPI_Exec::LoadPaymentInboxNoVerify</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l08005">8005</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID.empty())   { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>   ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theServerID(SERVER_ID);
    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theUserID(USER_ID);

    <span class="comment">// There is an OT_ASSERT in here for memory failure,</span>
    <span class="comment">// but it still might return &quot;&quot; if various verification fails.</span>
    <a class="code" href="class_o_t_ledger.html">OTLedger</a> * pLedger = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a8e02cb186854f0b325c4c55da69f2e55">LoadPaymentInboxNoVerify</a>(theServerID, theUserID);

    <span class="comment">// Make sure it gets cleaned up when this goes out of scope.</span>
    <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTLedger&gt;</a> theAngel(pLedger); <span class="comment">// I pass the pointer, in case it&#39;s &quot;&quot;.</span>

    <span class="keywordflow">if</span> (NULL == pLedger)
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(1, <span class="stringliteral">&quot;%s: Failure calling OT_API::LoadPaymentInboxNoVerify.\nUser ID: %s\n&quot;</span>, __FUNCTION__, USER_ID.c_str());
    }
    <span class="keywordflow">else</span> <span class="comment">// success</span>
    {
        <a class="code" href="class_o_t_string.html">OTString</a> strOutput(*pLedger); <span class="comment">// For the output</span>
        std::string pBuf = strOutput.Get();
        <span class="keywordflow">return</span> pBuf;
    }

    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="af56df073501c675b39619e0a8961b3df"></a><!-- doxytag: member="OTAPI_Exec::LoadPubkey_Encryption" ref="af56df073501c675b39619e0a8961b3df" args="(const std::string &amp;USER_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#af56df073501c675b39619e0a8961b3df">OTAPI_Exec::LoadPubkey_Encryption</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>----------------------------------------------------------------- LOAD PUBLIC KEY -- from local storage</p>
<p>(returns as STRING)</p>
<p>MEANT TO BE USED in cases where a private key is NOT available. </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l07313">7313</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (USER_ID.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// ---------------------------------------------------------</span>
    <a class="code" href="class_o_t_string.html">OTString</a> strPubkey; <span class="comment">// For the output</span>
    <span class="comment">// ---------------------------------------------------------</span>
    <a class="code" href="class_o_t_password_data.html">OTPasswordData</a>   thePWData(<a class="code" href="_o_t_callback_8hpp.html#aec99f1909896090ab9b64ce848f50c6a">OT_PW_DISPLAY</a>);
    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>     NYM_ID(USER_ID);
    <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a>    * pNym = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#aa09f3af30f4bc451d56c6948d536922f">GetOrLoadNym</a>(NYM_ID, <span class="keyword">false</span>, __FUNCTION__, &amp;thePWData); <span class="comment">// This tries to get, then tries to load as public, then tries to load as private.</span>
    <span class="keywordflow">if</span> (NULL == pNym) <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    <span class="comment">// ---------------------------------------------------------</span>
    <span class="keywordflow">if</span> (<span class="keyword">false</span> == pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#a7a7b836bb9e8e0df7b3601f44e1b7220">GetPublicEncrKey</a>().<a class="code" href="class_o_t_asymmetric_key.html#ab4eee84fb4faf0a374fa10f110853214">GetPublicKey</a>(strPubkey, <span class="keyword">false</span>)) <span class="comment">// bEscaped defaults to true. 6/13/12</span>
    {
        <a class="code" href="class_o_t_string.html">OTString</a> strNymID(NYM_ID);
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Failure retrieving encryption pubkey from Nym: %s\n&quot;</span>, __FUNCTION__, strNymID.Get());
    }
    <span class="keywordflow">else</span> <span class="comment">// success</span>
    {
        std::string pBuf = strPubkey.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();
        <span class="keywordflow">return</span> pBuf;
    }
    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aec2658b220e18c797162c477fe2f5c9c"></a><!-- doxytag: member="OTAPI_Exec::LoadPubkey_Signing" ref="aec2658b220e18c797162c477fe2f5c9c" args="(const std::string &amp;USER_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#aec2658b220e18c797162c477fe2f5c9c">OTAPI_Exec::LoadPubkey_Signing</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l07337">7337</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (USER_ID.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// ---------------------------------------------------------</span>
    <a class="code" href="class_o_t_string.html">OTString</a> strPubkey; <span class="comment">// For the output</span>
    <span class="comment">// ---------------------------------------------------------</span>
    <a class="code" href="class_o_t_password_data.html">OTPasswordData</a>   thePWData(<a class="code" href="_o_t_callback_8hpp.html#aec99f1909896090ab9b64ce848f50c6a">OT_PW_DISPLAY</a>);
    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>     NYM_ID(USER_ID);
    <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a>    * pNym = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#aa09f3af30f4bc451d56c6948d536922f">GetOrLoadNym</a>(NYM_ID, <span class="keyword">false</span>, __FUNCTION__, &amp;thePWData); <span class="comment">// This tries to get, then tries to load as public, then tries to load as private.</span>
    <span class="keywordflow">if</span> (NULL == pNym) <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    <span class="comment">// ---------------------------------------------------------</span>
    <span class="keywordflow">if</span> (<span class="keyword">false</span> == pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#aa60e86ffafcfba7c68801530c12c9927">GetPublicSignKey</a>().<a class="code" href="class_o_t_asymmetric_key.html#ab4eee84fb4faf0a374fa10f110853214">GetPublicKey</a>(strPubkey, <span class="keyword">false</span>)) <span class="comment">// bEscaped defaults to true. 6/13/12</span>
    {
        <a class="code" href="class_o_t_string.html">OTString</a> strNymID(NYM_ID);
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Failure retrieving signing pubkey from Nym: %s\n&quot;</span>, __FUNCTION__, strNymID.Get());
    }
    <span class="keywordflow">else</span> <span class="comment">// success</span>
    {
        std::string pBuf = strPubkey.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();
        <span class="keywordflow">return</span> pBuf;
    }
    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a50d1782dab55e11d3e833895039b63ef"></a><!-- doxytag: member="OTAPI_Exec::LoadPurse" ref="a50d1782dab55e11d3e833895039b63ef" args="(const std::string &amp;SERVER_ID, const std::string &amp;ASSET_TYPE_ID, const std::string &amp;USER_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a50d1782dab55e11d3e833895039b63ef">OTAPI_Exec::LoadPurse</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ASSET_TYPE_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>-------------------------------------------------------------- LOAD PURSE or Mint or ASSET CONTRACT or SERVER CONTRACT -- (from local storage)</p>
<p>Based on Asset Type ID: load a purse, a public mint, or an asset/server contract and return it as a string -- or return NULL if it wasn't found. </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l11105">11105</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty())     { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>     ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (ASSET_TYPE_ID.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;ASSET_TYPE_ID&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID.empty())       { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>       ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// -----------------------------------------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theServerID(SERVER_ID);
    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theAssetID(ASSET_TYPE_ID);
    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theUserID(USER_ID);
    <span class="comment">// -----------------------------------------------------------------</span>
    <span class="comment">// There is an OT_ASSERT in here for memory failure,</span>
    <span class="comment">// but it still might return &quot;&quot; if various verification fails.</span>

    <a class="code" href="class_o_t_purse.html">OTPurse</a> * pPurse = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#ae86b6c0831420bcf0ecadc603364d230">LoadPurse</a>(theServerID, theAssetID, theUserID);

    <span class="comment">// Make sure it gets cleaned up when this goes out of scope.</span>
    <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTPurse&gt;</a>  thePurseAngel(pPurse); <span class="comment">// I pass the pointer, in case it&#39;s &quot;&quot;.</span>

    <span class="keywordflow">if</span> (NULL == pPurse)
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(2, <span class="stringliteral">&quot;OTAPI_Exec::LoadPurse() received null when called OT_API::LoadPurse(). &quot;</span>
            <span class="stringliteral">&quot;Server: %s Asset Type: %s\n&quot;</span>, SERVER_ID.c_str(), ASSET_TYPE_ID.c_str());
    }
    <span class="keywordflow">else</span> <span class="comment">// success</span>
    {
        <a class="code" href="class_o_t_string.html">OTString</a> strOutput(*pPurse); <span class="comment">// For the output</span>
        std::string pBuf = strOutput.Get();
        <span class="keywordflow">return</span> pBuf;
    }

    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a1fd5072dec68cf1840c5e414f8ae5a48"></a><!-- doxytag: member="OTAPI_Exec::LoadRecordBox" ref="a1fd5072dec68cf1840c5e414f8ae5a48" args="(const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ACCOUNT_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a1fd5072dec68cf1840c5e414f8ae5a48">OTAPI_Exec::LoadRecordBox</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ACCOUNT_ID</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>NOTE: Sometimes the user ID is also passed in the "account ID" field, depending on what kind of record box it is. </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l08043">8043</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty())  { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>  ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID.empty())    { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>    ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (ACCOUNT_ID.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;ACCOUNT_ID&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theServerID(SERVER_ID);
    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theUserID(USER_ID);
    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theAccountID(ACCOUNT_ID);

    <span class="comment">// There is an OT_ASSERT in here for memory failure,</span>
    <span class="comment">// but it still might return &quot;&quot; if various verification fails.</span>
    <a class="code" href="class_o_t_ledger.html">OTLedger</a> * pLedger = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a318f160f9a43ac68afcf415ff51ae267">LoadRecordBox</a>(theServerID, theUserID, theAccountID);

    <span class="comment">// Make sure it gets cleaned up when this goes out of scope.</span>
    <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTLedger&gt;</a> theAngel(pLedger); <span class="comment">// I pass the pointer, in case it&#39;s &quot;&quot;.</span>

    <span class="keywordflow">if</span> (NULL == pLedger)
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(1, <span class="stringliteral">&quot;%s: Failure calling OT_API::LoadRecordBox.\n&quot;</span>,__FUNCTION__);
    }
    <span class="keywordflow">else</span> <span class="comment">// success</span>
    {
        <a class="code" href="class_o_t_string.html">OTString</a> strOutput(*pLedger); <span class="comment">// For the output</span>
        std::string pBuf = strOutput.Get();
        <span class="keywordflow">return</span> pBuf;
    }
    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa1ce8ccf2be283d7bc4df03de5de9c37"></a><!-- doxytag: member="OTAPI_Exec::LoadRecordBoxNoVerify" ref="aa1ce8ccf2be283d7bc4df03de5de9c37" args="(const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ACCOUNT_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#aa1ce8ccf2be283d7bc4df03de5de9c37">OTAPI_Exec::LoadRecordBoxNoVerify</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ACCOUNT_ID</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l08076">8076</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty())  { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>  ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID.empty())    { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>    ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (ACCOUNT_ID.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;ACCOUNT_ID&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theServerID(SERVER_ID);
    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theUserID(USER_ID);
    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theAccountID(ACCOUNT_ID);

    <span class="comment">// There is an OT_ASSERT in here for memory failure,</span>
    <span class="comment">// but it still might return &quot;&quot; if various verification fails.</span>
    <a class="code" href="class_o_t_ledger.html">OTLedger</a> * pLedger = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a8c288f48dcdc98a6ae02c03e6452c438">LoadRecordBoxNoVerify</a>(theServerID, theUserID, theAccountID);

    <span class="comment">// Make sure it gets cleaned up when this goes out of scope.</span>
    <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTLedger&gt;</a> theAngel(pLedger); <span class="comment">// I pass the pointer, in case it&#39;s &quot;&quot;.</span>

    <span class="keywordflow">if</span> (NULL == pLedger)
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(1, <span class="stringliteral">&quot;%s: Failure calling OT_API::LoadRecordBoxNoVerify.\n&quot;</span>, __FUNCTION__);
    }
    <span class="keywordflow">else</span> <span class="comment">// success</span>
    {
        <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strOutput(*pLedger); <span class="comment">// For the output</span>
        std::string pBuf = strOutput.Get();
        <span class="keywordflow">return</span> pBuf;
    }
    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a056a4968b8d9793fb70a7b4b892fb212"></a><!-- doxytag: member="OTAPI_Exec::LoadServerContract" ref="a056a4968b8d9793fb70a7b4b892fb212" args="(const std::string &amp;SERVER_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a056a4968b8d9793fb70a7b4b892fb212">OTAPI_Exec::LoadServerContract</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l07528">7528</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null SERVER_ID passed in!\n&quot;</span>, __FUNCTION__); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theServerID(SERVER_ID);

    <span class="comment">// There is an OT_ASSERT in here for memory failure,</span>
    <span class="comment">// but it still might return &quot;&quot; if various verification fails.</span>
    <a class="code" href="class_o_t_server_contract.html">OTServerContract</a> * pContract = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#adeed94c645c2e2330e536520b9fa5664">LoadServerContract</a>(theServerID);

    <span class="comment">// Make sure it gets cleaned up when this goes out of scope.</span>
    <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTServerContract&gt;</a> theAngel(pContract); <span class="comment">// I pass the pointer, in case it&#39;s &quot;&quot;.</span>

    <span class="keywordflow">if</span> (NULL == pContract)
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Failure calling OT_API::LoadServerContract.\nServer ID: %s\n&quot;</span>,
                       __FUNCTION__, SERVER_ID.c_str());
    }
    <span class="keywordflow">else</span> <span class="comment">// success</span>
    {
        <a class="code" href="class_o_t_string.html">OTString</a> strOutput(*pContract); <span class="comment">// For the output</span>
        std::string pBuf = strOutput.Get();
        <span class="keywordflow">return</span> pBuf;
    }
    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a27fefe73c76c39085b549433f25ae809"></a><!-- doxytag: member="OTAPI_Exec::LoadUserPubkey_Encryption" ref="a27fefe73c76c39085b549433f25ae809" args="(const std::string &amp;USER_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a27fefe73c76c39085b549433f25ae809">OTAPI_Exec::LoadUserPubkey_Encryption</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>----------------------------------------------------------------- LOAD USER PUBLIC KEY -- from local storage</p>
<p>(returns as STRING)</p>
<p>MEANT TO BE USED in cases where a private key is also available. </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l07368">7368</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (USER_ID.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// -----------------------------------------------------------------</span>
    <a class="code" href="class_o_t_string.html">OTString</a> strPubkey; <span class="comment">// For the output</span>
    <span class="comment">// -----------------------------------------------------------------</span>
    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>    NYM_ID(USER_ID);
    <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a>   * pNym = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#aa53f110b77dee2bc71b70906ca64fbbc">GetOrLoadPrivateNym</a>(NYM_ID); <span class="comment">// No need to cleanup.</span>
    <span class="keywordflow">if</span> (NULL == pNym) <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    <span class="comment">// -----------------------------------------------------------------</span>
    <span class="keywordflow">if</span> (<span class="keyword">false</span> == pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#a7a7b836bb9e8e0df7b3601f44e1b7220">GetPublicEncrKey</a>().<a class="code" href="class_o_t_asymmetric_key.html#ab4eee84fb4faf0a374fa10f110853214">GetPublicKey</a>(strPubkey))
    {
        <a class="code" href="class_o_t_string.html">OTString</a> strNymID(NYM_ID);
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Failure retrieving encryption pubkey from Nym: %s\n&quot;</span>, __FUNCTION__, strNymID.Get());
    }
    <span class="keywordflow">else</span> <span class="comment">// success</span>
    {
        std::string pBuf = strPubkey.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();
        <span class="keywordflow">return</span> pBuf;
    }
    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab8e9357c59623aad324b56a0e5319f44"></a><!-- doxytag: member="OTAPI_Exec::LoadUserPubkey_Signing" ref="ab8e9357c59623aad324b56a0e5319f44" args="(const std::string &amp;USER_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#ab8e9357c59623aad324b56a0e5319f44">OTAPI_Exec::LoadUserPubkey_Signing</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l07391">7391</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (USER_ID.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// -----------------------------------------------------------------</span>
    <a class="code" href="class_o_t_string.html">OTString</a> strPubkey; <span class="comment">// For the output</span>
    <span class="comment">// -----------------------------------------------------------------</span>
    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>    NYM_ID(USER_ID);
    <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a>   * pNym = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#aa53f110b77dee2bc71b70906ca64fbbc">GetOrLoadPrivateNym</a>(NYM_ID); <span class="comment">// No need to cleanup.</span>
    <span class="keywordflow">if</span> (NULL == pNym) <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    <span class="comment">// -----------------------------------------------------------------</span>
    <span class="keywordflow">if</span> (<span class="keyword">false</span> == pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#aa60e86ffafcfba7c68801530c12c9927">GetPublicSignKey</a>().<a class="code" href="class_o_t_asymmetric_key.html#ab4eee84fb4faf0a374fa10f110853214">GetPublicKey</a>(strPubkey))
    {
        <a class="code" href="class_o_t_string.html">OTString</a> strNymID(NYM_ID);
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Failure retrieving signing pubkey from Nym: %s\n&quot;</span>, __FUNCTION__, strNymID.Get());
    }
    <span class="keywordflow">else</span> <span class="comment">// success</span>
    {
        std::string pBuf = strPubkey.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();
        <span class="keywordflow">return</span> pBuf;
    }
    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a889a6737076054113908d22f6ae4e223"></a><!-- doxytag: member="OTAPI_Exec::LoadWallet" ref="a889a6737076054113908d22f6ae4e223" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_a_p_i___exec.html#a889a6737076054113908d22f6ae4e223">OTAPI_Exec::LoadWallet</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>LOAD WALLET</p>
<p>Next you'll want to load your wallet up. It needs to be in the data_folder. The filename is set in the configuration. Use "SET WALLET FILENAME" to change it.</p>
<p>The Default Filename is "wallet.xml"</p>
<p><a class="el" href="class_o_t_a_p_i___exec.html#a889a6737076054113908d22f6ae4e223">LoadWallet()</a>; </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l00380">380</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a3a0ae20d8736f8588d76441a18ac2c6e">LoadWallet</a>();
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab27795fbc9d11a3ada075eaa64b95831"></a><!-- doxytag: member="OTAPI_Exec::LongToString" ref="ab27795fbc9d11a3ada075eaa64b95831" args="(const int64_t &amp;lNumber)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#ab27795fbc9d11a3ada075eaa64b95831">OTAPI_Exec::LongToString</a> </td>
          <td>(</td>
          <td class="paramtype">const int64_t &amp;&#160;</td>
          <td class="paramname"><em>lNumber</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l00297">297</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    std::string strNumber;
    std::stringstream strstream;

    strstream &lt;&lt; lNumber;
    strstream &gt;&gt; strNumber;

    <span class="keywordflow">return</span> strNumber;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aafcc2a8a18275deef3ea14b672e0902b"></a><!-- doxytag: member="OTAPI_Exec::Message_GetBalanceAgreementSuccess" ref="aafcc2a8a18275deef3ea14b672e0902b" args="(const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ACCOUNT_ID, const std::string &amp;THE_MESSAGE)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_o_t_data_check_8hpp.html#aa3817cab69424142fb73706ef4871d36">OT_BOOL</a> <a class="el" href="class_o_t_a_p_i___exec.html#aafcc2a8a18275deef3ea14b672e0902b">OTAPI_Exec::Message_GetBalanceAgreementSuccess</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ACCOUNT_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_MESSAGE</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>----------------------------------------------------------- GET BALANCE AGREEMENT SUCCESS (From a MESSAGE.)</p>
<p>Returns OT_TRUE (1) for Success and OT_FALSE (0) for Failure. Returns OT_ERROR for error. (-1) </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l10884">10884</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty())          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID.empty())            { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>            ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (ACCOUNT_ID.empty())         { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;ACCOUNT_ID&quot;</span>         ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (THE_MESSAGE.empty())        { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_MESSAGE&quot;</span>        ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theServerID(SERVER_ID), theUserID(USER_ID), theAccountID(ACCOUNT_ID);

    <a class="code" href="class_o_t_string.html">OTString</a> strMessage(THE_MESSAGE);

    <a class="code" href="class_o_t_message.html">OTMessage</a> theMessage;

    <span class="keywordflow">if</span> (!strMessage.Exists() || !theMessage.<a class="code" href="class_o_t_contract.html#a36300e34dcd94ed7006d98b392d46815">LoadContractFromString</a>(strMessage))
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Unable to load message.\n&quot;</span>, __FUNCTION__);
        <span class="keywordflow">return</span> <a class="code" href="_o_t_a_p_i_8cpp.html#a8a0b2a3e3d4461ba60ae320c17b09ab4">OT_ERROR</a>;
    }

    <span class="comment">// It&#39;s not a transaction request or response, so the Payload wouldn&#39;t</span>
    <span class="comment">// contain a ledger. (Don&#39;t want to pass back whatever it DOES contain</span>
    <span class="comment">// in that case, now do I?)</span>
    <span class="comment">//</span>
    <span class="keywordflow">if</span> (
        (<span class="keyword">false</span> == theMessage.<a class="code" href="class_o_t_message.html#a14c7dc1d2e11075a73e0a9aaf79fd762">m_strCommand</a>.<a class="code" href="class_o_t_string.html#a03401b39fb66d63696342c4f61ea8bf5">Compare</a>(<span class="stringliteral">&quot;@notarizeTransactions&quot;</span>)) &amp;&amp;
        (<span class="keyword">false</span> == theMessage.<a class="code" href="class_o_t_message.html#a14c7dc1d2e11075a73e0a9aaf79fd762">m_strCommand</a>.<a class="code" href="class_o_t_string.html#a03401b39fb66d63696342c4f61ea8bf5">Compare</a>(<span class="stringliteral">&quot;@processNymbox&quot;</span>)) &amp;&amp;
        (<span class="keyword">false</span> == theMessage.<a class="code" href="class_o_t_message.html#a14c7dc1d2e11075a73e0a9aaf79fd762">m_strCommand</a>.<a class="code" href="class_o_t_string.html#a03401b39fb66d63696342c4f61ea8bf5">Compare</a>(<span class="stringliteral">&quot;@processInbox&quot;</span>))
        )
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Wrong message type: %s\n&quot;</span>, __FUNCTION__, theMessage.<a class="code" href="class_o_t_message.html#a14c7dc1d2e11075a73e0a9aaf79fd762">m_strCommand</a>.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
        <span class="keywordflow">return</span> <a class="code" href="_o_t_a_p_i_8cpp.html#a8a0b2a3e3d4461ba60ae320c17b09ab4">OT_ERROR</a>;
    }

    <span class="comment">// The ledger is stored in the Payload, we&#39;ll grab it into the String.</span>
    <a class="code" href="class_o_t_string.html">OTString</a> strLedger(theMessage.<a class="code" href="class_o_t_message.html#aa6729578b97f61804e91035a7709800a">m_ascPayload</a>);

    <span class="keywordflow">if</span> (!strLedger.Exists())
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: No ledger found on message.\n&quot;</span>, __FUNCTION__);
        <span class="keywordflow">return</span> <a class="code" href="_o_t_a_p_i_8cpp.html#a8a0b2a3e3d4461ba60ae320c17b09ab4">OT_ERROR</a>;
    }

    <span class="comment">// ------------------------------------</span>

    <a class="code" href="class_o_t_ledger.html">OTLedger</a> theLedger(theUserID, theAccountID, theServerID);

    <span class="keywordflow">if</span> (<span class="keyword">false</span> == theLedger.LoadLedgerFromString(strLedger))
    {
        <a class="code" href="class_o_t_string.html">OTString</a> strAcctID(theAccountID);
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error loading ledger from string. Acct ID: %s\n&quot;</span>, __FUNCTION__, strAcctID.Get());
        <span class="keywordflow">return</span> <a class="code" href="_o_t_a_p_i_8cpp.html#a8a0b2a3e3d4461ba60ae320c17b09ab4">OT_ERROR</a>;
    }

    <span class="comment">// At this point, I know theLedger loaded successfully.</span>

    <span class="keywordflow">if</span> (theLedger.GetTransactionCount() &lt;= 0)
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s bad count in message ledger: %d\n&quot;</span>, __FUNCTION__, theLedger.GetTransactionCount());
        <span class="keywordflow">return</span> <a class="code" href="_o_t_a_p_i_8cpp.html#a8a0b2a3e3d4461ba60ae320c17b09ab4">OT_ERROR</a>; <span class="comment">// out of bounds. I&#39;m saving from an OT_ASSERT_MSG() happening here. (Maybe I shouldn&#39;t.)</span>
    }

    <a class="code" href="class_o_t_transaction.html">OTTransaction</a> * pReplyTransaction = theLedger.GetTransactionByIndex(0); <span class="comment">// Right now this is a defacto standard. (only 1 transaction per message ledger, excepting process inbox. &lt;== why? That&#39;s one as well I thought. And has multiple items attached.)</span>
    <span class="comment">//  OTCleanup&lt;OTTransaction&gt; theAngel(pTransaction); // THE LEDGER CLEANS THIS ALREADY.</span>

    <span class="keywordflow">if</span> (NULL == pReplyTransaction)
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s good index but uncovered \&quot;\&quot; pointer there: %d\n&quot;</span>, __FUNCTION__, 0);
        <span class="keywordflow">return</span> <a class="code" href="_o_t_a_p_i_8cpp.html#a8a0b2a3e3d4461ba60ae320c17b09ab4">OT_ERROR</a>; <span class="comment">// Weird.</span>
    }

    <span class="comment">// At this point, I actually have the transaction pointer, so let&#39;s return its success status</span>
    <a class="code" href="class_o_t_item.html">OTItem</a> * pReplyItem = pReplyTransaction-&gt;<a class="code" href="class_o_t_transaction.html#a62bf5069d7a7fda92fa1d6746a75bb49">GetItem</a>(<a class="code" href="class_o_t_item.html#a03db091faaab100aadc455f4ebe2c5d1af8bcd696284c0bcd0fe198dceaf2f6d5">OTItem::atBalanceStatement</a>);

    <span class="keywordflow">if</span> (NULL == pReplyItem)
        pReplyItem = pReplyTransaction-&gt;<a class="code" href="class_o_t_transaction.html#a62bf5069d7a7fda92fa1d6746a75bb49">GetItem</a>(<a class="code" href="class_o_t_item.html#a03db091faaab100aadc455f4ebe2c5d1a53f9e1f8ef8651545c50d933db94636c">OTItem::atTransactionStatement</a>);

    <span class="keywordflow">if</span> (NULL == pReplyItem)
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s good index but uncovered \&quot;\&quot; item pointer: %d\n&quot;</span>, __FUNCTION__, 0);
        <span class="keywordflow">return</span> <a class="code" href="_o_t_a_p_i_8cpp.html#a8a0b2a3e3d4461ba60ae320c17b09ab4">OT_ERROR</a>; <span class="comment">// Weird.</span>
    }

    <span class="keywordflow">if</span> (pReplyItem-&gt;<a class="code" href="class_o_t_item.html#abadbfe245f0dbc8a035d8d6930dd9dfc">GetStatus</a>() == <a class="code" href="class_o_t_item.html#a61e86f5b6c64a518664123907235f376aa099f14a8a9ef5987b1161b764895cdf">OTItem::acknowledgement</a>)
    {
        <span class="keywordflow">return</span> <a class="code" href="_o_t_a_p_i_8cpp.html#a39b50c1f70f7626e72c95494a44f8921">OT_TRUE</a>;
    }

    <span class="keywordflow">return</span> <a class="code" href="_o_t_a_p_i_8cpp.html#aa4db9fe11de208bcc9e4b869c932948b">OT_FALSE</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a4e3665a9990c226dd4981c9db2a3f693"></a><!-- doxytag: member="OTAPI_Exec::Message_GetCommand" ref="a4e3665a9990c226dd4981c9db2a3f693" args="(const std::string &amp;THE_MESSAGE)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a4e3665a9990c226dd4981c9db2a3f693">OTAPI_Exec::Message_GetCommand</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_MESSAGE</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>----------------------------------------------------------- GET MESSAGE COMMAND TYPE</p>
<p>This way you can discover what kind of command it was. All server replies are pre-pended with the @ sign. For example, if you send a "getAccount" message, the server reply is "@getAccount", and if you send "getMint" the reply is "@getMint", and so on. </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l13861">13861</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (THE_MESSAGE.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_MESSAGE&quot;</span>       ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <a class="code" href="class_o_t_string.html">OTString</a> strMessage(THE_MESSAGE);

    <a class="code" href="class_o_t_message.html">OTMessage</a> theMessage;

    <span class="keywordflow">if</span> (!strMessage.Exists() || !theMessage.<a class="code" href="class_o_t_contract.html#a36300e34dcd94ed7006d98b392d46815">LoadContractFromString</a>(strMessage))
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;

    <a class="code" href="class_o_t_string.html">OTString</a> strOutput(theMessage.<a class="code" href="class_o_t_message.html#a14c7dc1d2e11075a73e0a9aaf79fd762">m_strCommand</a>);

    std::string pBuf = strOutput.Get();

    <span class="keywordflow">return</span> pBuf;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a4d2f83207774557d0a71bfbceadca34f"></a><!-- doxytag: member="OTAPI_Exec::Message_GetDepth" ref="a4d2f83207774557d0a71bfbceadca34f" args="(const std::string &amp;THE_MESSAGE)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_a_p_i___exec.html#a4d2f83207774557d0a71bfbceadca34f">OTAPI_Exec::Message_GetDepth</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_MESSAGE</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>----------------------------------------------------------- GET MESSAGE "DEPTH" (USED FOR MARKET-SPECIFIC MESSAGES.)</p>
<p>Returns the count of relevant items, so you know whether to bother reading the payload. Returns -1 if error.</p>
<p>The "depth" variable stores the count of items being returned. For example, if I call getMarketList, and 10 markets are returned, then depth will be set to 10. OR, if I call getNym_MarketOffers, and the Nym has 16 offers on the various markets, then the depth will be 16.</p>
<p>This value is important when processing server replies to market inquiries. If the depth is 0, then you are done. End. BUT! if it contains a number, such as 10, then that means you will want to next READ those 10 markets (or offers, or trades, etc) out of the server reply's payload.</p>
<p>Whereas if success is TRUE, but depth is 0, that means while the message processed successfully, the list was simply empty (and thus it would be a waste of time trying to unpack the non-existent, empty list of data items from the payload of your successful reply.) </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l14198">14198</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (THE_MESSAGE.empty())        { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_MESSAGE&quot;</span>        ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <a class="code" href="class_o_t_string.html">OTString</a> strMessage(THE_MESSAGE);

    <a class="code" href="class_o_t_message.html">OTMessage</a> theMessage;

    <span class="keywordflow">if</span> (!strMessage.Exists() || !theMessage.<a class="code" href="class_o_t_contract.html#a36300e34dcd94ed7006d98b392d46815">LoadContractFromString</a>(strMessage))
        <span class="keywordflow">return</span> <a class="code" href="_o_t_a_p_i_8cpp.html#a8a0b2a3e3d4461ba60ae320c17b09ab4">OT_ERROR</a>;

    <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span>int32_t<span class="keyword">&gt;</span>(theMessage.<a class="code" href="class_o_t_message.html#a04ef2907cff33f832b438c93f17880b7">m_lDepth</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="afbc53195dcad5ab5231e9c5ac4ac909f"></a><!-- doxytag: member="OTAPI_Exec::Message_GetLedger" ref="afbc53195dcad5ab5231e9c5ac4ac909f" args="(const std::string &amp;THE_MESSAGE)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#afbc53195dcad5ab5231e9c5ac4ac909f">OTAPI_Exec::Message_GetLedger</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_MESSAGE</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>----------------------------------------------------------- GET MESSAGE LEDGER</p>
<p>If you just received a server response to a transaction, and you want to actually iterate through the response ledger for that transaction, this function will retrieve it for you. </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l13888">13888</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (THE_MESSAGE.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_MESSAGE&quot;</span>       ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <a class="code" href="class_o_t_string.html">OTString</a> strMessage(THE_MESSAGE);

    <a class="code" href="class_o_t_message.html">OTMessage</a> theMessage;

    <span class="keywordflow">if</span> (!strMessage.Exists() || !theMessage.<a class="code" href="class_o_t_contract.html#a36300e34dcd94ed7006d98b392d46815">LoadContractFromString</a>(strMessage))
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Unable to load message.\n&quot;</span>, __FUNCTION__);
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    }

    <span class="comment">// It&#39;s not a transaction request or response, so the Payload wouldn&#39;t</span>
    <span class="comment">// contain a ledger. (Don&#39;t want to pass back whatever it DOES contain</span>
    <span class="comment">// in that case, now do I?)</span>
    <span class="comment">//</span>
    <span class="keywordflow">if</span> ((<span class="keyword">false</span> == theMessage.<a class="code" href="class_o_t_message.html#a14c7dc1d2e11075a73e0a9aaf79fd762">m_strCommand</a>.<a class="code" href="class_o_t_string.html#a03401b39fb66d63696342c4f61ea8bf5">Compare</a>(<span class="stringliteral">&quot;notarizeTransactions&quot;</span>)) &amp;&amp;
        (<span class="keyword">false</span> == theMessage.<a class="code" href="class_o_t_message.html#a14c7dc1d2e11075a73e0a9aaf79fd762">m_strCommand</a>.<a class="code" href="class_o_t_string.html#a03401b39fb66d63696342c4f61ea8bf5">Compare</a>(<span class="stringliteral">&quot;@notarizeTransactions&quot;</span>)))
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Wrong message type: %s\n&quot;</span>, __FUNCTION__, theMessage.<a class="code" href="class_o_t_message.html#a14c7dc1d2e11075a73e0a9aaf79fd762">m_strCommand</a>.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    }

    <span class="comment">// The ledger is stored in the Payload, we&#39;ll grab it into the String.</span>
    <a class="code" href="class_o_t_string.html">OTString</a> strOutput(theMessage.<a class="code" href="class_o_t_message.html#aa6729578b97f61804e91035a7709800a">m_ascPayload</a>);

    <span class="keywordflow">if</span> (!strOutput.Exists())
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: No ledger found on message.\n&quot;</span>, __FUNCTION__);
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    }

    std::string pBuf = strOutput.Get();



    <span class="keywordflow">return</span> pBuf;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a4179300fdda6081f70afaf61c485399e"></a><!-- doxytag: member="OTAPI_Exec::Message_GetNewAcctID" ref="a4179300fdda6081f70afaf61c485399e" args="(const std::string &amp;THE_MESSAGE)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a4179300fdda6081f70afaf61c485399e">OTAPI_Exec::Message_GetNewAcctID</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_MESSAGE</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>----------------------------------------------------------- GET NEW ACCOUNT ID</p>
<p>If you just opened a new asset account, you'll want to read the server reply and get the new acct ID out of it. Otherwise how will you know which account you just created? This function allows you to get the new account ID out of the server reply message. </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l14037">14037</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (THE_MESSAGE.empty())        { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_MESSAGE&quot;</span>        ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <a class="code" href="class_o_t_string.html">OTString</a> strMessage(THE_MESSAGE);

    <a class="code" href="class_o_t_message.html">OTMessage</a> theMessage;

    <span class="keywordflow">if</span> (!strMessage.Exists() || !theMessage.<a class="code" href="class_o_t_contract.html#a36300e34dcd94ed7006d98b392d46815">LoadContractFromString</a>(strMessage))
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Unable to load message.\n&quot;</span>, __FUNCTION__);
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    }

    <span class="comment">// It&#39;s not a response to createAccount, so the m_strAcctID wouldn&#39;t</span>
    <span class="comment">// contain a new account ID anyway, right? (Don&#39;t want to pass back whatever</span>
    <span class="comment">// it DOES contain in that case, now do I?)</span>
    <span class="comment">//</span>
    <span class="keywordflow">if</span> (<span class="keyword">false</span> == theMessage.<a class="code" href="class_o_t_message.html#a14c7dc1d2e11075a73e0a9aaf79fd762">m_strCommand</a>.<a class="code" href="class_o_t_string.html#a03401b39fb66d63696342c4f61ea8bf5">Compare</a>(<span class="stringliteral">&quot;@createAccount&quot;</span>))
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Wrong message type: %s\n&quot;</span>, __FUNCTION__, theMessage.<a class="code" href="class_o_t_message.html#a14c7dc1d2e11075a73e0a9aaf79fd762">m_strCommand</a>.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    }

    <a class="code" href="class_o_t_string.html">OTString</a> strOutput(theMessage.<a class="code" href="class_o_t_message.html#aeba5afa7ce73d9398cc898a2749acd45">m_strAcctID</a>);

    <span class="keywordflow">if</span> (!strOutput.Exists())
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: No asset account ID found on message.\n&quot;</span>, __FUNCTION__);
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    }

    std::string pBuf = strOutput.Get();



    <span class="keywordflow">return</span> pBuf;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad1bfd4d027d5ba28ba126297c99a2952"></a><!-- doxytag: member="OTAPI_Exec::Message_GetNewAssetTypeID" ref="ad1bfd4d027d5ba28ba126297c99a2952" args="(const std::string &amp;THE_MESSAGE)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#ad1bfd4d027d5ba28ba126297c99a2952">OTAPI_Exec::Message_GetNewAssetTypeID</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_MESSAGE</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>----------------------------------------------------------- GET NEW ASSET TYPE ID</p>
<p>If you just issued a new asset type, you'll want to read the server reply and get the new asset type ID out of it. Otherwise how will you ever open accounts in that new type? </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l13938">13938</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (THE_MESSAGE.empty())        { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_MESSAGE&quot;</span>        ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <a class="code" href="class_o_t_string.html">OTString</a> strMessage(THE_MESSAGE);

    <a class="code" href="class_o_t_message.html">OTMessage</a> theMessage;

    <span class="keywordflow">if</span> (!strMessage.Exists() || !theMessage.<a class="code" href="class_o_t_contract.html#a36300e34dcd94ed7006d98b392d46815">LoadContractFromString</a>(strMessage))
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Unable to load message.\n&quot;</span>, __FUNCTION__);
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    }

    <span class="comment">// It&#39;s not a transaction request or response, so the Payload wouldn&#39;t</span>
    <span class="comment">// contain a ledger. (Don&#39;t want to pass back whatever it DOES contain</span>
    <span class="comment">// in that case, now do I?)</span>
    <span class="comment">//</span>
    <span class="keywordflow">if</span> ((<span class="keyword">false</span> == theMessage.<a class="code" href="class_o_t_message.html#a14c7dc1d2e11075a73e0a9aaf79fd762">m_strCommand</a>.<a class="code" href="class_o_t_string.html#a03401b39fb66d63696342c4f61ea8bf5">Compare</a>(<span class="stringliteral">&quot;@issueAssetType&quot;</span>)) &amp;&amp;
        (<span class="keyword">false</span> == theMessage.<a class="code" href="class_o_t_message.html#a14c7dc1d2e11075a73e0a9aaf79fd762">m_strCommand</a>.<a class="code" href="class_o_t_string.html#a03401b39fb66d63696342c4f61ea8bf5">Compare</a>(<span class="stringliteral">&quot;@issueBasket&quot;</span>)))
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Wrong message type: %s\n&quot;</span>, __FUNCTION__, theMessage.<a class="code" href="class_o_t_message.html#a14c7dc1d2e11075a73e0a9aaf79fd762">m_strCommand</a>.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    }

    <a class="code" href="class_o_t_string.html">OTString</a> strOutput(theMessage.<a class="code" href="class_o_t_message.html#a7cbf8c19d4be37bc2f67a8b8df7e701f">m_strAssetID</a>);

    <span class="keywordflow">if</span> (!strOutput.Exists())
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: No new asset type ID found on message.\n&quot;</span>, __FUNCTION__);
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    }

    std::string pBuf = strOutput.Get();



    <span class="keywordflow">return</span> pBuf;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a2fce33981138126dbb29b0800440de87"></a><!-- doxytag: member="OTAPI_Exec::Message_GetNewIssuerAcctID" ref="a2fce33981138126dbb29b0800440de87" args="(const std::string &amp;THE_MESSAGE)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a2fce33981138126dbb29b0800440de87">OTAPI_Exec::Message_GetNewIssuerAcctID</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_MESSAGE</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>----------------------------------------------------------- GET NEW ISSUER ACCOUNT ID</p>
<p>If you just issued a new asset type, you'll want to read the server reply and get the new issuer acct ID out of it. Otherwise how will you ever issue anything with it? </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l13986">13986</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (THE_MESSAGE.empty())        { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_MESSAGE&quot;</span>        ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <a class="code" href="class_o_t_string.html">OTString</a> strMessage(THE_MESSAGE);

    <a class="code" href="class_o_t_message.html">OTMessage</a> theMessage;

    <span class="keywordflow">if</span> (!strMessage.Exists() || !theMessage.<a class="code" href="class_o_t_contract.html#a36300e34dcd94ed7006d98b392d46815">LoadContractFromString</a>(strMessage))
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Unable to load message.\n&quot;</span>, __FUNCTION__);
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    }

    <span class="comment">// It&#39;s not an issue asset type response, so the m_strAcctID wouldn&#39;t</span>
    <span class="comment">// contain an issuer account ID. (Don&#39;t want to pass back whatever it DOES contain</span>
    <span class="comment">// in that case, now do I?)</span>
    <span class="comment">//</span>
    <span class="keywordflow">if</span> (<span class="keyword">false</span> == theMessage.<a class="code" href="class_o_t_message.html#a14c7dc1d2e11075a73e0a9aaf79fd762">m_strCommand</a>.<a class="code" href="class_o_t_string.html#a03401b39fb66d63696342c4f61ea8bf5">Compare</a>(<span class="stringliteral">&quot;@issueAssetType&quot;</span>))
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Wrong message type: %s\n&quot;</span>,  __FUNCTION__, theMessage.<a class="code" href="class_o_t_message.html#a14c7dc1d2e11075a73e0a9aaf79fd762">m_strCommand</a>.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    }

    <a class="code" href="class_o_t_string.html">OTString</a> strOutput(theMessage.<a class="code" href="class_o_t_message.html#aeba5afa7ce73d9398cc898a2749acd45">m_strAcctID</a>);

    <span class="keywordflow">if</span> (!strOutput.Exists())
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: No issuer account ID found on message.\n&quot;</span>, __FUNCTION__);
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    }

    std::string pBuf = strOutput.Get();



    <span class="keywordflow">return</span> pBuf;
}
</pre></div>
</div>
</div>
<a class="anchor" id="abfaaae79076695bf0ec9dac56c17f2fb"></a><!-- doxytag: member="OTAPI_Exec::Message_GetNymboxHash" ref="abfaaae79076695bf0ec9dac56c17f2fb" args="(const std::string &amp;THE_MESSAGE)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#abfaaae79076695bf0ec9dac56c17f2fb">OTAPI_Exec::Message_GetNymboxHash</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_MESSAGE</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>----------------------------------------------------------- GET NYMBOX HASH</p>
<p>Some messages include a copy of the Nymbox Hash. This helps the server to quickly ascertain whether some messages will fail, and also allows the client to query the server for this information for syncronicity purposes. </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l14087">14087</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (THE_MESSAGE.empty())        { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_MESSAGE&quot;</span>        ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <a class="code" href="class_o_t_string.html">OTString</a> strMessage(THE_MESSAGE);

    <a class="code" href="class_o_t_message.html">OTMessage</a> theMessage;

    <span class="keywordflow">if</span> (!strMessage.Exists() || !theMessage.<a class="code" href="class_o_t_contract.html#a36300e34dcd94ed7006d98b392d46815">LoadContractFromString</a>(strMessage))
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Unable to load message.\n&quot;</span>, __FUNCTION__);
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    }

    <span class="comment">// So far these are the only messages that use m_strNymboxHash:</span>
    <span class="keywordflow">if</span> (
        (<span class="keyword">false</span> == theMessage.<a class="code" href="class_o_t_message.html#a14c7dc1d2e11075a73e0a9aaf79fd762">m_strCommand</a>.<a class="code" href="class_o_t_string.html#a03401b39fb66d63696342c4f61ea8bf5">Compare</a>(<span class="stringliteral">&quot;processNymbox&quot;</span>)) &amp;&amp;
        (<span class="keyword">false</span> == theMessage.<a class="code" href="class_o_t_message.html#a14c7dc1d2e11075a73e0a9aaf79fd762">m_strCommand</a>.<a class="code" href="class_o_t_string.html#a03401b39fb66d63696342c4f61ea8bf5">Compare</a>(<span class="stringliteral">&quot;notarizeTransactions&quot;</span>)) &amp;&amp;
        (<span class="keyword">false</span> == theMessage.<a class="code" href="class_o_t_message.html#a14c7dc1d2e11075a73e0a9aaf79fd762">m_strCommand</a>.<a class="code" href="class_o_t_string.html#a03401b39fb66d63696342c4f61ea8bf5">Compare</a>(<span class="stringliteral">&quot;getTransactionNum&quot;</span>)) &amp;&amp;
        (<span class="keyword">false</span> == theMessage.<a class="code" href="class_o_t_message.html#a14c7dc1d2e11075a73e0a9aaf79fd762">m_strCommand</a>.<a class="code" href="class_o_t_string.html#a03401b39fb66d63696342c4f61ea8bf5">Compare</a>(<span class="stringliteral">&quot;processInbox&quot;</span>)) &amp;&amp;
        (<span class="keyword">false</span> == theMessage.<a class="code" href="class_o_t_message.html#a14c7dc1d2e11075a73e0a9aaf79fd762">m_strCommand</a>.<a class="code" href="class_o_t_string.html#a03401b39fb66d63696342c4f61ea8bf5">Compare</a>(<span class="stringliteral">&quot;triggerClause&quot;</span>)) &amp;&amp;
        (<span class="keyword">false</span> == theMessage.<a class="code" href="class_o_t_message.html#a14c7dc1d2e11075a73e0a9aaf79fd762">m_strCommand</a>.<a class="code" href="class_o_t_string.html#a03401b39fb66d63696342c4f61ea8bf5">Compare</a>(<span class="stringliteral">&quot;@getNymbox&quot;</span>)) &amp;&amp;
        (<span class="keyword">false</span> == theMessage.<a class="code" href="class_o_t_message.html#a14c7dc1d2e11075a73e0a9aaf79fd762">m_strCommand</a>.<a class="code" href="class_o_t_string.html#a03401b39fb66d63696342c4f61ea8bf5">Compare</a>(<span class="stringliteral">&quot;@getRequest&quot;</span>)) &amp;&amp;
        (<span class="keyword">false</span> == theMessage.<a class="code" href="class_o_t_message.html#a14c7dc1d2e11075a73e0a9aaf79fd762">m_strCommand</a>.<a class="code" href="class_o_t_string.html#a03401b39fb66d63696342c4f61ea8bf5">Compare</a>(<span class="stringliteral">&quot;@getTransactionNum&quot;</span>))
        )
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Wrong message type: %s \nFYI, with m_strNymboxHash: %s\n&quot;</span>, __FUNCTION__, theMessage.<a class="code" href="class_o_t_message.html#a14c7dc1d2e11075a73e0a9aaf79fd762">m_strCommand</a>.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(), theMessage.<a class="code" href="class_o_t_message.html#a3038ccc70302742da4df4c3af1093b78">m_strNymboxHash</a>.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    }

    <span class="keywordflow">if</span> (!theMessage.<a class="code" href="class_o_t_message.html#a3038ccc70302742da4df4c3af1093b78">m_strNymboxHash</a>.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>())
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: No NymboxHash found on message: %s\n&quot;</span>, __FUNCTION__, strMessage.Get());
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    }

    <a class="code" href="class_o_t_string.html">OTString</a> strOutput(theMessage.<a class="code" href="class_o_t_message.html#a3038ccc70302742da4df4c3af1093b78">m_strNymboxHash</a>);
    std::string pBuf = strOutput.Get();



    <span class="keywordflow">return</span> pBuf;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a8dc2de784de5e6ea5d73d71a56e951b2"></a><!-- doxytag: member="OTAPI_Exec::Message_GetPayload" ref="a8dc2de784de5e6ea5d73d71a56e951b2" args="(const std::string &amp;THE_MESSAGE)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a8dc2de784de5e6ea5d73d71a56e951b2">OTAPI_Exec::Message_GetPayload</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_MESSAGE</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>----------------------------------------------------------- GET MESSAGE PAYLOAD</p>
<p>This way you can retrieve the payload from any message. Useful, for example, for getting the encoded StringMap object from the queryAssetTypes and  messages, which both use the m_ascPayload field to transport it. </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l13833">13833</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (THE_MESSAGE.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_MESSAGE&quot;</span>       ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <a class="code" href="class_o_t_string.html">OTString</a>    strMessage(THE_MESSAGE);
    <a class="code" href="class_o_t_message.html">OTMessage</a>   theMessage;

    <span class="keywordflow">if</span> (!strMessage.Exists() || !theMessage.<a class="code" href="class_o_t_contract.html#a36300e34dcd94ed7006d98b392d46815">LoadContractFromString</a>(strMessage))
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;

    std::string pBuf = theMessage.<a class="code" href="class_o_t_message.html#aa6729578b97f61804e91035a7709800a">m_ascPayload</a>.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();



    <span class="keywordflow">return</span> pBuf;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a74918f6e7d392c9d1b5bd1bf6cf77647"></a><!-- doxytag: member="OTAPI_Exec::Message_GetSuccess" ref="a74918f6e7d392c9d1b5bd1bf6cf77647" args="(const std::string &amp;THE_MESSAGE)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_o_t_data_check_8hpp.html#aa3817cab69424142fb73706ef4871d36">OT_BOOL</a> <a class="el" href="class_o_t_a_p_i___exec.html#a74918f6e7d392c9d1b5bd1bf6cf77647">OTAPI_Exec::Message_GetSuccess</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_MESSAGE</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>----------------------------------------------------------- GET MESSAGE SUCCESS (True or False)</p>
<p>Returns OT_TRUE (1) for Success and OT_FALSE (0) for Failure. Returns -1 for Error condition. </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l14141">14141</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (THE_MESSAGE.empty())        { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_MESSAGE&quot;</span>        ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <a class="code" href="class_o_t_message.html">OTMessage</a>   theMessage;
    <a class="code" href="class_o_t_string.html">OTString</a>    strMessage(THE_MESSAGE);

    <span class="keywordflow">if</span> (!strMessage.Exists())
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error: THE_MESSAGE doesn&#39;t exist.\n&quot;</span>, __FUNCTION__);
        <span class="keywordflow">return</span> <a class="code" href="_o_t_a_p_i_8cpp.html#a8a0b2a3e3d4461ba60ae320c17b09ab4">OT_ERROR</a>;
    }

    <span class="keywordflow">if</span> (!theMessage.<a class="code" href="class_o_t_contract.html#a36300e34dcd94ed7006d98b392d46815">LoadContractFromString</a>(strMessage))
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error: Failed loading message from string:\n\n%s\n\n&quot;</span>, __FUNCTION__, THE_MESSAGE.c_str());
        <span class="keywordflow">return</span> <a class="code" href="_o_t_a_p_i_8cpp.html#a8a0b2a3e3d4461ba60ae320c17b09ab4">OT_ERROR</a>;
    }
    <span class="comment">// ---------------------------------------------</span>
    <span class="keywordflow">if</span> (<span class="keyword">true</span> == theMessage.<a class="code" href="class_o_t_message.html#ad6d611b1178ec24da0a380fb461300b8">m_bSuccess</a>)
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(2, <span class="stringliteral">&quot;%s: Server reply for RequestNum %lld (Message_GetSuccess was successful, but any transaction inside could have failed OR succeeded. Use Message_GetTransactionSuccess for that.)\n&quot;</span>,<span class="comment">// Contents: \n\n%s\n\n&quot;,</span>
            __FUNCTION__, <a class="code" href="class_o_t_a_p_i___exec.html#a1990c82970f94e5e7ca00f9e78d645c9">StringToLong</a>(theMessage.<a class="code" href="class_o_t_message.html#a1f97ec73f2a05d3d3d6fcb4854501dbe">m_strRequestNum</a>.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>()));<span class="comment">//, THE_MESSAGE);</span>
        <span class="keywordflow">return</span> <a class="code" href="_o_t_a_p_i_8cpp.html#a39b50c1f70f7626e72c95494a44f8921">OT_TRUE</a>;
    }
    <span class="keywordflow">else</span>
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(1, <span class="stringliteral">&quot;%s: ** FYI, server reply was received, and &quot;</span>
            <span class="stringliteral">&quot;it said &#39;No.&#39; (Status = failed). RequestNum: %lld\n&quot;</span>,<span class="comment">// Contents: \n\n%s\n\n&quot;,</span>
            __FUNCTION__, <a class="code" href="class_o_t_a_p_i___exec.html#a1990c82970f94e5e7ca00f9e78d645c9">StringToLong</a>(theMessage.<a class="code" href="class_o_t_message.html#a1f97ec73f2a05d3d3d6fcb4854501dbe">m_strRequestNum</a>.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>()));<span class="comment">//, THE_MESSAGE);</span>
    }
    <span class="keywordflow">return</span> <a class="code" href="_o_t_a_p_i_8cpp.html#aa4db9fe11de208bcc9e4b869c932948b">OT_FALSE</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a1be2395223951358285e4f32507dd405"></a><!-- doxytag: member="OTAPI_Exec::Message_GetTransactionSuccess" ref="a1be2395223951358285e4f32507dd405" args="(const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ACCOUNT_ID, const std::string &amp;THE_MESSAGE)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_o_t_data_check_8hpp.html#aa3817cab69424142fb73706ef4871d36">OT_BOOL</a> <a class="el" href="class_o_t_a_p_i___exec.html#a1be2395223951358285e4f32507dd405">OTAPI_Exec::Message_GetTransactionSuccess</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ACCOUNT_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_MESSAGE</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>----------------------------------------------------------- GET MESSAGE TRANSACTION SUCCESS (True or False)</p>
<p>Returns OT_TRUE (1) for Success and OT_FALSE (0) for Failure. Returns OT_ERROR for error. (-1) </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l14309">14309</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty())   { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>   ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID.empty())     { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>     ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (ACCOUNT_ID.empty())  { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;ACCOUNT_ID&quot;</span>  ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (THE_MESSAGE.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_MESSAGE&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theServerID(SERVER_ID), theUserID(USER_ID), theAccountID(ACCOUNT_ID);

    <a class="code" href="class_o_t_string.html">OTString</a> strMessage(THE_MESSAGE);

    <a class="code" href="class_o_t_message.html">OTMessage</a> theMessage;

    <span class="keywordflow">if</span> (!strMessage.Exists() || !theMessage.<a class="code" href="class_o_t_contract.html#a36300e34dcd94ed7006d98b392d46815">LoadContractFromString</a>(strMessage))
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Unable to load message.\n&quot;</span>,__FUNCTION__);
        <span class="keywordflow">return</span> <a class="code" href="_o_t_a_p_i_8cpp.html#a8a0b2a3e3d4461ba60ae320c17b09ab4">OT_ERROR</a>;
    }

    <span class="comment">// It&#39;s not a transaction request or response, so the Payload wouldn&#39;t</span>
    <span class="comment">// contain a ledger. (Don&#39;t want to pass back whatever it DOES contain</span>
    <span class="comment">// in that case, now do I?)</span>
    <span class="comment">//</span>
    <span class="keywordflow">if</span> (
        (<span class="keyword">false</span> == theMessage.<a class="code" href="class_o_t_message.html#a14c7dc1d2e11075a73e0a9aaf79fd762">m_strCommand</a>.<a class="code" href="class_o_t_string.html#a03401b39fb66d63696342c4f61ea8bf5">Compare</a>(<span class="stringliteral">&quot;@notarizeTransactions&quot;</span>)) &amp;&amp;
        (<span class="keyword">false</span> == theMessage.<a class="code" href="class_o_t_message.html#a14c7dc1d2e11075a73e0a9aaf79fd762">m_strCommand</a>.<a class="code" href="class_o_t_string.html#a03401b39fb66d63696342c4f61ea8bf5">Compare</a>(<span class="stringliteral">&quot;@processInbox&quot;</span>)) &amp;&amp;
        (<span class="keyword">false</span> == theMessage.<a class="code" href="class_o_t_message.html#a14c7dc1d2e11075a73e0a9aaf79fd762">m_strCommand</a>.<a class="code" href="class_o_t_string.html#a03401b39fb66d63696342c4f61ea8bf5">Compare</a>(<span class="stringliteral">&quot;@processNymbox&quot;</span>))
        )
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Wrong message type: %s\n&quot;</span>, __FUNCTION__, theMessage.<a class="code" href="class_o_t_message.html#a14c7dc1d2e11075a73e0a9aaf79fd762">m_strCommand</a>.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
        <span class="keywordflow">return</span> <a class="code" href="_o_t_a_p_i_8cpp.html#a8a0b2a3e3d4461ba60ae320c17b09ab4">OT_ERROR</a>;
    }

    <span class="comment">// The ledger is stored in the Payload, we&#39;ll grab it into the String.</span>
    <a class="code" href="class_o_t_string.html">OTString</a> strLedger(theMessage.<a class="code" href="class_o_t_message.html#aa6729578b97f61804e91035a7709800a">m_ascPayload</a>);

    <span class="keywordflow">if</span> (!strLedger.Exists())
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: No ledger found on message.\n&quot;</span>, __FUNCTION__);
        <span class="keywordflow">return</span> <a class="code" href="_o_t_a_p_i_8cpp.html#a8a0b2a3e3d4461ba60ae320c17b09ab4">OT_ERROR</a>;
    }

    <span class="comment">// ------------------------------------</span>

    <a class="code" href="class_o_t_ledger.html">OTLedger</a> theLedger(theUserID, theAccountID, theServerID);

    <span class="keywordflow">if</span> (<span class="keyword">false</span> == theLedger.LoadContractFromString(strLedger))
    {
        <a class="code" href="class_o_t_string.html">OTString</a> strAcctID(theAccountID);
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error loading ledger from string. Acct ID: %s\n&quot;</span>, __FUNCTION__, strAcctID.Get());
        <span class="keywordflow">return</span> <a class="code" href="_o_t_a_p_i_8cpp.html#a8a0b2a3e3d4461ba60ae320c17b09ab4">OT_ERROR</a>;
    }

    <span class="comment">// At this point, I know theLedger loaded successfully.</span>

    <span class="keywordflow">if</span> (theLedger.GetTransactionCount() &lt;= 0)
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: bad count in message ledger: %d\n&quot;</span>, __FUNCTION__, theLedger.GetTransactionCount());
        <span class="keywordflow">return</span> <a class="code" href="_o_t_a_p_i_8cpp.html#a8a0b2a3e3d4461ba60ae320c17b09ab4">OT_ERROR</a>; <span class="comment">// out of bounds. I&#39;m saving from an OT_ASSERT_MSG() happening here. (Maybe I shouldn&#39;t.)</span>
    }

    <a class="code" href="class_o_t_transaction.html">OTTransaction</a> * pTransaction = theLedger.GetTransactionByIndex(0); <span class="comment">// Right now this is a defacto standard. (only 1 transaction per message ledger, excepting process inbox.)</span>
<span class="comment">//  OTCleanup&lt;OTTransaction&gt; theAngel(pTransaction); // THE LEDGER CLEANS THIS ALREADY.</span>

    <span class="keywordflow">if</span> (NULL == pTransaction)
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: good index but uncovered \&quot;\&quot; pointer: %d\n&quot;</span>, __FUNCTION__, 0);
        <span class="keywordflow">return</span> <a class="code" href="_o_t_a_p_i_8cpp.html#a8a0b2a3e3d4461ba60ae320c17b09ab4">OT_ERROR</a>; <span class="comment">// Weird.</span>
    }

    <span class="comment">// At this point, I actually have the transaction pointer, so let&#39;s return its success status</span>
    <span class="comment">//</span>
    <span class="keywordflow">if</span> (pTransaction-&gt;<a class="code" href="class_o_t_transaction.html#ac5ffc9f0e274bbc617185a5335c061a3">GetSuccess</a>())
        <span class="keywordflow">return</span> <a class="code" href="_o_t_a_p_i_8cpp.html#a39b50c1f70f7626e72c95494a44f8921">OT_TRUE</a>;
    <span class="keywordflow">else</span>
    {
        <span class="keyword">const</span> int64_t lRequestNum     = <a class="code" href="class_o_t_a_p_i___exec.html#a1990c82970f94e5e7ca00f9e78d645c9">StringToLong</a>(theMessage.<a class="code" href="class_o_t_message.html#a1f97ec73f2a05d3d3d6fcb4854501dbe">m_strRequestNum</a>.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
        <span class="keyword">const</span> int64_t lTransactionNum = pTransaction-&gt;<a class="code" href="class_o_t_transaction_type.html#aa204b21b7f498389f746742c1d2007fa">GetTransactionNum</a>();

        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(1, <span class="stringliteral">&quot;%s: ** FYI, server reply was received, and it said &#39;No.&#39; (Status = failed). &quot;</span>
                      <span class="stringliteral">&quot;RequestNum: %lld, TransNum: %lld\n&quot;</span>,<span class="comment">// Contents: \n\n%s\n\n&quot;,</span>
            __FUNCTION__, lRequestNum, lTransactionNum);<span class="comment">//, THE_MESSAGE);</span>
    }

    <span class="keywordflow">return</span> <a class="code" href="_o_t_a_p_i_8cpp.html#aa4db9fe11de208bcc9e4b869c932948b">OT_FALSE</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a9ba3dd59c6ae3c669730014842bfb90e"></a><!-- doxytag: member="OTAPI_Exec::Message_GetUsageCredits" ref="a9ba3dd59c6ae3c669730014842bfb90e" args="(const std::string &amp;THE_MESSAGE)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64_t <a class="el" href="class_o_t_a_p_i___exec.html#a9ba3dd59c6ae3c669730014842bfb90e">OTAPI_Exec::Message_GetUsageCredits</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_MESSAGE</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>IF THE_MESSAGE is of command type , and IF it was a SUCCESS, then this function returns the usage credits BALANCE (it's a int64_t, but passed as a string). If you adjusted the balance using the usageCredits command (THE_MESSAGE being the server's reply to that) then you will see the balance AFTER the adjustment. (The current "Usage Credits" balance.) </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l12209">12209</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (THE_MESSAGE.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_MESSAGE&quot;</span>); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <a class="code" href="class_o_t_string.html">OTString</a>  strMessage(THE_MESSAGE);
    <a class="code" href="class_o_t_message.html">OTMessage</a> theMessage;

    <span class="keywordflow">if</span> (!strMessage.Exists())
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error: THE_MESSAGE doesn&#39;t exist.\n&quot;</span>, __FUNCTION__);
        <span class="keywordflow">return</span> -2;
    }

    <span class="keywordflow">if</span> (!theMessage.<a class="code" href="class_o_t_contract.html#a36300e34dcd94ed7006d98b392d46815">LoadContractFromString</a>(strMessage))
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Failed loading message from string.\n&quot;</span>, __FUNCTION__);
        <span class="keywordflow">return</span> -2;
    }

    <span class="keywordflow">if</span> (<span class="keyword">false</span> == theMessage.<a class="code" href="class_o_t_message.html#ad6d611b1178ec24da0a380fb461300b8">m_bSuccess</a>)
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Message success == false, thus unable to report Usage Credits balance. (Returning -2.)\n&quot;</span>, __FUNCTION__);
        <span class="keywordflow">return</span> -2;
    }

    <span class="keywordflow">if</span> (<span class="keyword">false</span> == theMessage.<a class="code" href="class_o_t_message.html#a14c7dc1d2e11075a73e0a9aaf79fd762">m_strCommand</a>.<a class="code" href="class_o_t_string.html#a03401b39fb66d63696342c4f61ea8bf5">Compare</a>(<span class="stringliteral">&quot;@usageCredits&quot;</span>))
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: THE_MESSAGE is supposed to be of command type \&quot;@usageCredits\&quot;, but instead it&#39;s a: %s\n (Failure. Returning -2.)&quot;</span>,
            __FUNCTION__, theMessage.<a class="code" href="class_o_t_message.html#a14c7dc1d2e11075a73e0a9aaf79fd762">m_strCommand</a>.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
        <span class="keywordflow">return</span> -2;
    }

    <span class="comment">// ----------------------------------------------</span>
    <span class="comment">// By this point, we know the message was a successful @usageCredits, loaded</span>
    <span class="comment">// properly from the string that was passed in. Let&#39;s return the usage credits</span>
    <span class="comment">// balance (a int64_t int32_t, returned in string format.)</span>

    <span class="keywordflow">return</span> theMessage.<a class="code" href="class_o_t_message.html#a04ef2907cff33f832b438c93f17880b7">m_lDepth</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a601be53bd7d0027de7a8f8c643a95bd3"></a><!-- doxytag: member="OTAPI_Exec::Message_IsTransactionCanceled" ref="a601be53bd7d0027de7a8f8c643a95bd3" args="(const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ACCOUNT_ID, const std::string &amp;THE_MESSAGE)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_o_t_data_check_8hpp.html#aa3817cab69424142fb73706ef4871d36">OT_BOOL</a> <a class="el" href="class_o_t_a_p_i___exec.html#a601be53bd7d0027de7a8f8c643a95bd3">OTAPI_Exec::Message_IsTransactionCanceled</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ACCOUNT_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_MESSAGE</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l14220">14220</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty())   { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>   ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID.empty())     { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>     ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (ACCOUNT_ID.empty())  { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;ACCOUNT_ID&quot;</span>  ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (THE_MESSAGE.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_MESSAGE&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theServerID(SERVER_ID), theUserID(USER_ID), theAccountID(ACCOUNT_ID);

    <a class="code" href="class_o_t_string.html">OTString</a> strMessage(THE_MESSAGE);

    <a class="code" href="class_o_t_message.html">OTMessage</a> theMessage;

    <span class="keywordflow">if</span> (!strMessage.Exists() || !theMessage.<a class="code" href="class_o_t_contract.html#a36300e34dcd94ed7006d98b392d46815">LoadContractFromString</a>(strMessage))
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Unable to load message.\n&quot;</span>,__FUNCTION__);
        <span class="keywordflow">return</span> <a class="code" href="_o_t_a_p_i_8cpp.html#a8a0b2a3e3d4461ba60ae320c17b09ab4">OT_ERROR</a>;
    }

    <span class="comment">// It&#39;s not a transaction request or response, so the Payload wouldn&#39;t</span>
    <span class="comment">// contain a ledger. (Don&#39;t want to pass back whatever it DOES contain</span>
    <span class="comment">// in that case, now do I?)</span>
    <span class="comment">//</span>
    <span class="keywordflow">if</span> (
        (<span class="keyword">false</span> == theMessage.<a class="code" href="class_o_t_message.html#a14c7dc1d2e11075a73e0a9aaf79fd762">m_strCommand</a>.<a class="code" href="class_o_t_string.html#a03401b39fb66d63696342c4f61ea8bf5">Compare</a>(<span class="stringliteral">&quot;@notarizeTransactions&quot;</span>)) &amp;&amp;
        (<span class="keyword">false</span> == theMessage.<a class="code" href="class_o_t_message.html#a14c7dc1d2e11075a73e0a9aaf79fd762">m_strCommand</a>.<a class="code" href="class_o_t_string.html#a03401b39fb66d63696342c4f61ea8bf5">Compare</a>(<span class="stringliteral">&quot;@processInbox&quot;</span>)) &amp;&amp;
        (<span class="keyword">false</span> == theMessage.<a class="code" href="class_o_t_message.html#a14c7dc1d2e11075a73e0a9aaf79fd762">m_strCommand</a>.<a class="code" href="class_o_t_string.html#a03401b39fb66d63696342c4f61ea8bf5">Compare</a>(<span class="stringliteral">&quot;@processNymbox&quot;</span>))
        )
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Wrong message type: %s\n&quot;</span>, __FUNCTION__, theMessage.<a class="code" href="class_o_t_message.html#a14c7dc1d2e11075a73e0a9aaf79fd762">m_strCommand</a>.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
        <span class="keywordflow">return</span> <a class="code" href="_o_t_a_p_i_8cpp.html#a8a0b2a3e3d4461ba60ae320c17b09ab4">OT_ERROR</a>;
    }

    <span class="comment">// The ledger is stored in the Payload, we&#39;ll grab it into the String.</span>
    <a class="code" href="class_o_t_string.html">OTString</a> strLedger(theMessage.<a class="code" href="class_o_t_message.html#aa6729578b97f61804e91035a7709800a">m_ascPayload</a>);

    <span class="keywordflow">if</span> (!strLedger.Exists())
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: No ledger found on message.\n&quot;</span>, __FUNCTION__);
        <span class="keywordflow">return</span> <a class="code" href="_o_t_a_p_i_8cpp.html#a8a0b2a3e3d4461ba60ae320c17b09ab4">OT_ERROR</a>;
    }

    <span class="comment">// ------------------------------------</span>

    <a class="code" href="class_o_t_ledger.html">OTLedger</a> theLedger(theUserID, theAccountID, theServerID);

    <span class="keywordflow">if</span> (<span class="keyword">false</span> == theLedger.LoadContractFromString(strLedger))
    {
        <a class="code" href="class_o_t_string.html">OTString</a> strAcctID(theAccountID);
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error loading ledger from string. Acct ID: %s\n&quot;</span>, __FUNCTION__, strAcctID.Get());
        <span class="keywordflow">return</span> <a class="code" href="_o_t_a_p_i_8cpp.html#a8a0b2a3e3d4461ba60ae320c17b09ab4">OT_ERROR</a>;
    }

    <span class="comment">// At this point, I know theLedger loaded successfully.</span>

    <span class="keywordflow">if</span> (theLedger.GetTransactionCount() &lt;= 0)
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: bad count in message ledger: %d\n&quot;</span>, __FUNCTION__, theLedger.GetTransactionCount());
        <span class="keywordflow">return</span> <a class="code" href="_o_t_a_p_i_8cpp.html#a8a0b2a3e3d4461ba60ae320c17b09ab4">OT_ERROR</a>; <span class="comment">// out of bounds. I&#39;m saving from an OT_ASSERT_MSG() happening here. (Maybe I shouldn&#39;t.)</span>
    }

    <a class="code" href="class_o_t_transaction.html">OTTransaction</a> * pTransaction = theLedger.GetTransactionByIndex(0); <span class="comment">// Right now this is a defacto standard. (only 1 transaction per message ledger, excepting process inbox.)</span>
<span class="comment">//  OTCleanup&lt;OTTransaction&gt; theAngel(pTransaction); // THE LEDGER CLEANS THIS ALREADY.</span>

    <span class="keywordflow">if</span> (NULL == pTransaction)
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: good index but uncovered \&quot;\&quot; pointer: %d\n&quot;</span>, __FUNCTION__, 0);
        <span class="keywordflow">return</span> <a class="code" href="_o_t_a_p_i_8cpp.html#a8a0b2a3e3d4461ba60ae320c17b09ab4">OT_ERROR</a>; <span class="comment">// Weird.</span>
    }

    <span class="comment">// At this point, I actually have the transaction pointer, so let&#39;s return its &#39;canceled&#39; status</span>
    <span class="comment">//</span>
    <span class="keywordflow">if</span> (pTransaction-&gt;<a class="code" href="class_o_t_transaction.html#aeabba0a2b6a52c8f50a329f7d14a1ba1">IsCancelled</a>())
        <span class="keywordflow">return</span> <a class="code" href="_o_t_a_p_i_8cpp.html#a39b50c1f70f7626e72c95494a44f8921">OT_TRUE</a>;

    <span class="keywordflow">return</span> <a class="code" href="_o_t_a_p_i_8cpp.html#aa4db9fe11de208bcc9e4b869c932948b">OT_FALSE</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a00f16d7a45e330d3d27fa562f49ada91"></a><!-- doxytag: member="OTAPI_Exec::Mint_IsStillGood" ref="a00f16d7a45e330d3d27fa562f49ada91" args="(const std::string &amp;SERVER_ID, const std::string &amp;ASSET_TYPE_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_a_p_i___exec.html#a00f16d7a45e330d3d27fa562f49ada91">OTAPI_Exec::Mint_IsStillGood</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ASSET_TYPE_ID</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns OT_TRUE if the mint is still usable. Returns OT_FALSE if expired or other error. </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l07440">7440</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty())     { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>     ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (ASSET_TYPE_ID.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;ASSET_TYPE_ID&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theServerID(SERVER_ID), theAssetID(ASSET_TYPE_ID);
    <span class="comment">// -----------------------------------------------------</span>
    <span class="comment">// There is an OT_ASSERT in here for memory failure,</span>
    <span class="comment">// but it still might return &quot;&quot; if various verification fails.</span>
    <a class="code" href="class_o_t_mint.html">OTMint</a> * pMint = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a7ed4ec7967a76d735047e5bae1574bf5">LoadMint</a>(theServerID, theAssetID);

    <span class="comment">// Make sure it gets cleaned up when this goes out of scope.</span>
    <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTMint&gt;</a>   theMintAngel(pMint); <span class="comment">// I pass the pointer, in case it&#39;s &quot;&quot;.</span>

    <span class="keywordflow">if</span> (NULL == pMint)
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Failure calling OT_API::LoadMint.\nServer: %s\n Asset Type: %s\n&quot;</span>,
                       __FUNCTION__, SERVER_ID.c_str(), ASSET_TYPE_ID.c_str());
    <span class="keywordflow">else</span> <span class="comment">// success</span>
    {
        <span class="keywordtype">bool</span> bExpired = pMint-&gt;<a class="code" href="class_o_t_mint.html#ae2aa73becb8bd2a00221860520fb8f4e">Expired</a>();

        <span class="keywordflow">if</span> (!bExpired)
            <span class="keywordflow">return</span> <span class="keyword">true</span>;
    }
    <span class="comment">// -----------------------------------------------------</span>
    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac54a50dc4fb602bccac015f4af652200"></a><!-- doxytag: member="OTAPI_Exec::Msg_HarvestTransactionNumbers" ref="ac54a50dc4fb602bccac015f4af652200" args="(const std::string &amp;THE_MESSAGE, const std::string &amp;USER_ID, const bool &amp;bHarvestingForRetry, const bool &amp;bReplyWasSuccess, const bool &amp;bReplyWasFailure, const bool &amp;bTransactionWasSuccess, const bool &amp;bTransactionWasFailure)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_a_p_i___exec.html#ac54a50dc4fb602bccac015f4af652200">OTAPI_Exec::Msg_HarvestTransactionNumbers</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_MESSAGE</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const bool &amp;&#160;</td>
          <td class="paramname"><em>bHarvestingForRetry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const bool &amp;&#160;</td>
          <td class="paramname"><em>bReplyWasSuccess</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const bool &amp;&#160;</td>
          <td class="paramname"><em>bReplyWasFailure</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const bool &amp;&#160;</td>
          <td class="paramname"><em>bTransactionWasSuccess</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const bool &amp;&#160;</td>
          <td class="paramname"><em>bTransactionWasFailure</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l07105">7105</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// -----------------------------------------------------</span>
    <span class="keywordtype">bool</span> bIsInitialized = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#af11b60d083c4a8e1e68a59a0824899d4">IsInitialized</a>();
    <span class="keywordflow">if</span> (!bIsInitialized) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Not initialized; call OT_API::Init first.\n&quot;</span>,__FUNCTION__); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// -----------------------------------------------------</span>
    <span class="keywordflow">if</span> (THE_MESSAGE.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_MESSAGE&quot;</span>  ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID.empty())     { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>      ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// -----------------------------------------------------</span>
    <span class="keywordflow">if</span> ( (<span class="keyword">true</span> != bHarvestingForRetry    ) &amp;&amp; (<span class="keyword">false</span> != bHarvestingForRetry   ))  { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Bad: %s \n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;bHarvestingForRetry&quot;</span>   ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> ( (<span class="keyword">true</span> != bReplyWasSuccess       ) &amp;&amp; (<span class="keyword">false</span> != bReplyWasSuccess      ))  { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Bad: %s \n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;bReplyWasSuccess&quot;</span>      ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> ( (<span class="keyword">true</span> != bReplyWasFailure       ) &amp;&amp; (<span class="keyword">false</span> != bReplyWasFailure      ))  { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Bad: %s \n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;bReplyWasFailure&quot;</span>      ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> ( (<span class="keyword">true</span> != bTransactionWasSuccess ) &amp;&amp; (<span class="keyword">false</span> != bTransactionWasSuccess))  { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Bad: %s \n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;bTransactionWasSuccess&quot;</span>); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> ( (<span class="keyword">true</span> != bTransactionWasFailure ) &amp;&amp; (<span class="keyword">false</span> != bTransactionWasFailure))  { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Bad: %s \n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;bTransactionWasFailure&quot;</span>); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// -----------------------------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theUserID(USER_ID);
    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_message.html">OTMessage</a> theMessage;
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a>  strMsg(THE_MESSAGE);
    <span class="keywordflow">if</span> (!strMsg.Exists())
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Failed trying to load message from empty string.\n&quot;</span>, __FUNCTION__);
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// -----------------------------------</span>
    <span class="comment">// Maybe it&#39;s not a message at all. Maybe it&#39;s a cron item</span>
    <span class="comment">// (smart contract... payment plan...)</span>
    <span class="comment">//</span>
    <span class="keywordflow">if</span> (strMsg.Contains(<span class="stringliteral">&quot;PAYMENT PLAN&quot;</span>) || strMsg.Contains(<span class="stringliteral">&quot;SMARTCONTRACT&quot;</span>))
    {
        <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> &amp; strCronItem = strMsg;

        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Attempting to harvest transaction numbers from cron item...\n&quot;</span>,
                       __FUNCTION__);
        <span class="comment">// -----------------------------------------------------</span>
        <span class="comment">// Unfortunately the ONLY reason we are loading up this cron item here,</span>
        <span class="comment">// is so we can get the server ID off of it.</span>
        <span class="comment">//</span>
        <a class="code" href="class_o_t_cron_item.html">OTCronItem</a> * pCronItem = <a class="code" href="class_o_t_cron_item.html#ad448bfdee05f5a1086d19d9edb2e2518">OTCronItem::NewCronItem</a>(strCronItem);
        <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTCronItem&gt;</a> theContractAngel;
        <span class="keywordflow">if</span> (NULL == pCronItem)
        {
            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Failed trying to load message from string.&quot;</span>, __FUNCTION__);

            <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Error trying to load the cron item from string (a cron item is a smart contract, or &quot;</span>
                <span class="stringliteral">&quot;some other recurring transaction such as a market offer, or a payment plan.) Contents:\n\n%s\n\n&quot;</span>,
                __FUNCTION__, strCronItem.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
            <span class="keywordflow">return</span> <span class="keyword">false</span>;
        }
        <span class="keywordflow">else</span>
            theContractAngel.<a class="code" href="class_o_t_cleanup.html#a00a399db45f730439d2263d4429d00c1">SetCleanupTarget</a>(*pCronItem);  <span class="comment">// Auto-cleanup.</span>
        <span class="comment">// -----------------------------------------------------</span>
        <span class="comment">// NOTE:</span>
        <span class="comment">// If a CronItem is passed in here instead of a Message, that means the client</span>
        <span class="comment">// didn&#39;t even TRY to send the message. He failed before reaching that point.</span>
        <span class="comment">// Therefore in this one, strange case, we don&#39;t really care about all the bools</span>
        <span class="comment">// that were passed in here. We&#39;re just going to harvest ALL the numbers, and</span>
        <span class="comment">// ASSUME all the bools were false.</span>
        <span class="comment">// Here goes...</span>
        <span class="comment">//</span>
        <span class="keywordflow">return</span> <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a3455b2ed3c8b4abef30b1eaaafa595ab">HarvestAllNumbers</a>(pCronItem-&gt;<a class="code" href="class_o_t_instrument.html#a878dd8998f7b131b85c082575e255375">GetServerID</a>(), theUserID, strCronItem);
    }
    <span class="comment">// ----------------------------------------------------------------</span>
    <span class="comment">// Maybe it&#39;s not a message at all. Maybe it&#39;s a basket exchange request that never</span>
    <span class="comment">// even got sent as a message...</span>
    <span class="comment">//</span>
    <span class="keywordflow">if</span> (strMsg.Contains(<span class="stringliteral">&quot;currencyBasket&quot;</span>))
    {
        <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> &amp; strBasket = strMsg;

        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Attempting to harvest transaction numbers from a basket currency exchange request...\n&quot;</span>,
                       __FUNCTION__);
        <span class="comment">// -----------------------------------------------------</span>
        <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pNym = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#aa53f110b77dee2bc71b70906ca64fbbc">GetOrLoadPrivateNym</a>(theUserID, <span class="keyword">false</span>, __FUNCTION__);
        <span class="keywordflow">if</span> (NULL == pNym) <span class="keywordflow">return</span> <span class="keyword">false</span>;
        <span class="comment">// ---------------------------------</span>
        <a class="code" href="class_o_t_basket.html">OTBasket</a> theRequestBasket;

        <span class="keywordflow">if</span> (theRequestBasket.<a class="code" href="class_o_t_contract.html#a36300e34dcd94ed7006d98b392d46815">LoadContractFromString</a>(strBasket))
        {
            <span class="keywordflow">if</span> (!theRequestBasket.<a class="code" href="class_o_t_basket.html#ada8331e15bbe66127c23c5e405adcfa7">IsExchanging</a>())
            {
                <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error: This is apparently NOT a basket exchange request!\nContents:\n%s\n&quot;</span>,
                              __FUNCTION__, strBasket.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
                <span class="keywordflow">return</span> <span class="keyword">false</span>;
            }
            <span class="comment">// -------------------------------------------------</span>
            <span class="comment">// Now we need to find the account ID (so we can find the server ID...)</span>
            <span class="comment">//</span>
            <a class="code" href="class_o_t_account.html">OTAccount</a> * pAccount = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a263e050929c3f000ce4172dfbc727149">GetAccount</a>(theRequestBasket.<a class="code" href="class_o_t_basket.html#ab555be54ac5511072afefe94ee15105a">GetRequestAccountID</a>(),
                                                                   __FUNCTION__);
            <span class="keywordflow">if</span> (NULL == pAccount)
            {
                <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strAcctID(theRequestBasket.<a class="code" href="class_o_t_basket.html#ab555be54ac5511072afefe94ee15105a">GetRequestAccountID</a>());
                <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error: Unable to find the main account based on the ID from the exchange request: %s\n&quot;</span>,
                              __FUNCTION__, strAcctID.Get());
                <span class="keywordflow">return</span> <span class="keyword">false</span>;
            }
            <span class="comment">// -------------------------------------------------</span>
            <span class="comment">// Now let&#39;s get the server ID...</span>
            <span class="comment">//</span>
            <a class="code" href="class_o_t_server_contract.html">OTServerContract</a> * pServer = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#afa4e2d39d29061b609d81f094c2ca25c">GetServer</a>(pAccount-&gt;<a class="code" href="class_o_t_transaction_type.html#a59fc08d52ef5bc0ea546da7a56e86fa5">GetPurportedServerID</a>(), __FUNCTION__);

            <span class="keywordflow">if</span> (NULL == pServer)
            {
                <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strServerID(pAccount-&gt;<a class="code" href="class_o_t_transaction_type.html#a59fc08d52ef5bc0ea546da7a56e86fa5">GetPurportedServerID</a>());
                <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error: Unable to find the server based on the exchange request: %s\n&quot;</span>,
                              __FUNCTION__, strServerID.Get());
                <span class="keywordflow">return</span> <span class="keyword">false</span>;
            }
            <span class="comment">// -------------------------------------------------</span>
            theRequestBasket.<a class="code" href="class_o_t_basket.html#a4fa7db8a28ae3adb021cd343b69fe2ff">HarvestClosingNumbers</a>(*pNym, pAccount-&gt;<a class="code" href="class_o_t_transaction_type.html#a59fc08d52ef5bc0ea546da7a56e86fa5">GetPurportedServerID</a>(), <span class="keyword">true</span>); <span class="comment">// bSave=true</span>
            <span class="keywordflow">return</span> <span class="keyword">true</span>;
        }
        <span class="keywordflow">else</span>
            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error loading original basket request.\n&quot;</span>, __FUNCTION__);

        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// ---------------------------------------------------</span>
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">false</span> == theMessage.<a class="code" href="class_o_t_contract.html#a36300e34dcd94ed7006d98b392d46815">LoadContractFromString</a>(strMsg))
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Failed trying to load message from string.\n&quot;</span>, __FUNCTION__);
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// ---------------------------------------------------</span>
    <span class="comment">// By this point, we have the actual message loaded up.</span>
    <span class="comment">//</span>
    <span class="keyword">const</span> <span class="keywordtype">bool</span> &amp; bSuccess = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#af1e69026904ab8b2a6a3a1185801bdf7">Msg_HarvestTransactionNumbers</a>(theMessage,
                                                                               theUserID,
                                                                               bHarvestingForRetry,
                                                                               bReplyWasSuccess,
                                                                               bReplyWasFailure,
                                                                               bTransactionWasSuccess,
                                                                               bTransactionWasFailure);
    <span class="keywordflow">return</span> bSuccess ? <span class="keyword">true</span> : <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab9ead57ad3597f23d1dfdf548c8d4a74"></a><!-- doxytag: member="OTAPI_Exec::notarizeDeposit" ref="ab9ead57ad3597f23d1dfdf548c8d4a74" args="(const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ACCT_ID, const std::string &amp;THE_PURSE)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_a_p_i___exec.html#ab9ead57ad3597f23d1dfdf548c8d4a74">OTAPI_Exec::notarizeDeposit</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ACCT_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_PURSE</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>-------------------------------------------------------------------------- DEPOSIT CASH</p>
<p>Use LoadPurse to load a purse from storage, and then use this function to actually deposit that cash into a server account. (The cash must, of course, be the same asset type as the account.)</p>
<p>Returns int32_t: -1 means error; no message was sent. -2 means the message was sent, but the request number must be passed as a string, so call GetLargeRequestNum. 0 means NO error, but also: no message was sent. &gt;0 means NO error, and the message was sent, and the request number fits into an integer... ...and in fact the requestNum IS the return value! ===&gt; In 99% of cases, this LAST option is what actually happens!! </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l12928">12928</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty())          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID.empty())            { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>            ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (ACCT_ID.empty())            { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;ACCT_ID&quot;</span>            ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (THE_PURSE.empty())          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_PURSE&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theServerID(SERVER_ID), theUserID(USER_ID), theAcctID(ACCT_ID);
    <a class="code" href="class_o_t_string.html">OTString</a> strPurse(THE_PURSE);

    <span class="keywordflow">return</span> <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a02e42976ba8ca2b4a667c97c94199780">notarizeDeposit</a>(theServerID, theUserID, theAcctID, strPurse);
}
</pre></div>
</div>
</div>
<a class="anchor" id="ada681fe672dc6e9c5dfa2273dc3d797d"></a><!-- doxytag: member="OTAPI_Exec::notarizeTransfer" ref="ada681fe672dc6e9c5dfa2273dc3d797d" args="(const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ACCT_FROM, const std::string &amp;ACCT_TO, const int64_t &amp;AMOUNT, const std::string &amp;NOTE)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_a_p_i___exec.html#ada681fe672dc6e9c5dfa2273dc3d797d">OTAPI_Exec::notarizeTransfer</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ACCT_FROM</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ACCT_TO</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int64_t &amp;&#160;</td>
          <td class="paramname"><em>AMOUNT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>NOTE</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>-------------------------------------------------------------------------- TRANSFER FROM ONE ASSET ACCOUNT TO ANOTHER</p>
<p>Send a request to the server to initiate a transfer from my account to another account's inbox. (With "transfer pending" notice in my outbox). Until the recipient accepts the transfer, I have the option to cancel it while it is still sitting in my outbox. But once he accepts it, it cannot be reversed. The server has signatures from BOTH parties requesting the transfer, and each party has the signature on the other party's request. Receipts are dropped into their respective inboxes.</p>
<p>Returns int32_t: -1 means error; no message was sent. -2 means the message was sent, but the request number must be passed as a string, so call GetLargeRequestNum. 0 means NO error, but also: no message was sent. &gt;0 means NO error, and the message was sent, and the request number fits into an integer... ...and in fact the requestNum IS the return value! ===&gt; In 99% of cases, this LAST option is what actually happens!! </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l12953">12953</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>,     __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>  ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID.empty())   { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>,     __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>    ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (ACCT_FROM.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>,     __FUNCTION__, <span class="stringliteral">&quot;ACCT_FROM&quot;</span>  ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (ACCT_TO.empty())   { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>,     __FUNCTION__, <span class="stringliteral">&quot;ACCT_TO&quot;</span>    ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (0 &gt; AMOUNT)        { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Negative: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;AMOUNT&quot;</span>     ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theServerID(SERVER_ID), theUserID(USER_ID);
    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theFromAcct(ACCT_FROM), theToAcct(ACCT_TO);

    <a class="code" href="class_o_t_string.html">OTString</a> strNote(NOTE.empty() ? <span class="stringliteral">&quot;&quot;</span> : NOTE);

    int64_t lAmount = AMOUNT;

    <span class="keywordflow">return</span> <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a10d6c5c156dfe6cf66860c3aa62e5fc0">notarizeTransfer</a>(theServerID, theUserID, theFromAcct, theToAcct, static_cast&lt;int64_t&gt;(lAmount), strNote);
}
</pre></div>
</div>
</div>
<a class="anchor" id="aff10a3fbcf70deccbce6ead956bc9d63"></a><!-- doxytag: member="OTAPI_Exec::notarizeWithdrawal" ref="aff10a3fbcf70deccbce6ead956bc9d63" args="(const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ACCT_ID, const int64_t &amp;AMOUNT)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_a_p_i___exec.html#aff10a3fbcf70deccbce6ead956bc9d63">OTAPI_Exec::notarizeWithdrawal</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ACCT_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int64_t &amp;&#160;</td>
          <td class="paramname"><em>AMOUNT</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>-------------------------------------------------------------------------- WITHDRAW CASH</p>
<p>User is requesting the server to withdraw AMOUNT from ACCT_ID and return a purse containing cash tokens.</p>
<p>Cash tokens come in specific denominations, such as 10, 25, 100, etc. Thus, if you want to withdraw a specific amount, such as 1291, then you are not withdrawing a single token, but a purse full of them. (An "OTPurse" is the object that contains a list of tokens.)</p>
<p>Therefore, any transactions involving cash withdrawals or deposits, you are actually using an <a class="el" href="class_o_t_purse.html">OTPurse</a>, rather than manipulating the individual tokens.</p>
<p>If Open Transactions receives a purse in reply from the server, it will automatically save the tokens in that purse into your purse file for that asset type. You can then reload the purse using LoadPurse, if you want to see the updated contents.</p>
<p>Returns int32_t: -1 means error; no message was sent. -2 means the message was sent, but the request number must be passed as a string, so call GetLargeRequestNum. 0 means NO error, but also: no message was sent. &gt;0 means NO error, and the message was sent, and the request number fits into an integer... ...and in fact the requestNum IS the return value! ===&gt; In 99% of cases, this LAST option is what actually happens!! </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l12904">12904</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty())          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID.empty())            { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>            ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (ACCT_ID.empty())            { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;ACCT_ID&quot;</span>            ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (0 &gt; AMOUNT)                 { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Negative: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;AMOUNT&quot;</span>         ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theServerID(SERVER_ID), theUserID(USER_ID), theAcctID(ACCT_ID);

    <span class="keywordflow">return</span> <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a598ad655514570fcbcc615709251c7e4">notarizeWithdrawal</a>(theServerID, theUserID, theAcctID, static_cast&lt;int64_t&gt;(AMOUNT));
}
</pre></div>
</div>
</div>
<a class="anchor" id="a9124f2093af217b37497f16941e1adc4"></a><!-- doxytag: member="OTAPI_Exec::NumList_Add" ref="a9124f2093af217b37497f16941e1adc4" args="(const std::string &amp;strNumList, const std::string &amp;strNumbers)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a9124f2093af217b37497f16941e1adc4">OTAPI_Exec::NumList_Add</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>strNumList</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>strNumbers</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>These 2 functions aren't in the <a class="el" href="class_o_t___a_p_i.html">OT_API</a> proper, but are only available inside the OTScripts on the client side. (They're not available in server-side scripts, and they're not available in, for example, the OTAPI Java programmable interface. You would use Java functions at that point.) Shown here only for reference. </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l00452">452</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// -----------------------------------------------------</span>
    <span class="keywordtype">bool</span> bIsInitialized = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#af11b60d083c4a8e1e68a59a0824899d4">IsInitialized</a>();
    <span class="keywordflow">if</span> (!bIsInitialized)    { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Not initialized; call OT_API::Init first.\n&quot;</span>,__FUNCTION__); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (strNumbers.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;strNumbers&quot;</span>       ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="comment">// strNumList can be null, (create a new one).</span>
    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_num_list.html">OTNumList</a> theList, theNewNumbers(strNumbers);

    <span class="keywordflow">if</span> (<span class="stringliteral">&quot;&quot;</span> != strNumList)
    {
        <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> otstrNumList(strNumList);
        theList.Add(otstrNumList);
    }

    <span class="keyword">const</span> <span class="keywordtype">bool</span> &amp; bAdded = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a12f34568b5ed20e3d1744f30e472f454">NumList_Add</a>(theList, theNewNumbers);

    <a class="code" href="class_o_t_string.html">OTString</a> strOutput;
    <span class="keywordflow">if</span> (bAdded &amp;&amp; theList.<a class="code" href="class_o_t_num_list.html#a3ebc9e933a8c248d0fdd0b11a3c49fe4">Output</a>(strOutput))
    {
        std::string pBuf = strOutput.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();

        <span class="keywordflow">return</span> pBuf;
    }

    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a6f109e383929c540c666db2c64932834"></a><!-- doxytag: member="OTAPI_Exec::NumList_Count" ref="a6f109e383929c540c666db2c64932834" args="(const std::string &amp;strNumList)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_a_p_i___exec.html#a6f109e383929c540c666db2c64932834">OTAPI_Exec::NumList_Count</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>strNumList</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l00546">546</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// -----------------------------------------------------</span>
    <span class="keywordtype">bool</span> bIsInitialized = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#af11b60d083c4a8e1e68a59a0824899d4">IsInitialized</a>();
    <span class="keywordflow">if</span> (!bIsInitialized)    { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Not initialized; call OT_API::Init first.\n&quot;</span>,__FUNCTION__  ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (strNumList.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;strNumList&quot;</span>         ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_num_list.html">OTNumList</a> theList(strNumList);

    <span class="keywordflow">return</span> <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#ad6a7774af0f1af97fe6c36c396e054a3">NumList_Count</a>(theList);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a133aaf7224244c363135a98aaef1df18"></a><!-- doxytag: member="OTAPI_Exec::NumList_Remove" ref="a133aaf7224244c363135a98aaef1df18" args="(const std::string &amp;strNumList, const std::string &amp;strNumbers)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a133aaf7224244c363135a98aaef1df18">OTAPI_Exec::NumList_Remove</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>strNumList</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>strNumbers</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l00485">485</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// -----------------------------------------------------</span>
    <span class="keywordtype">bool</span> bIsInitialized = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#af11b60d083c4a8e1e68a59a0824899d4">IsInitialized</a>();
    <span class="keywordflow">if</span> (!bIsInitialized) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Not initialized; call OT_API::Init first.\n&quot;</span>,__FUNCTION__);   <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keywordflow">if</span> (strNumList.empty())         { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;strNumList&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (strNumbers.empty())         { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;strNumbers&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// -----------------------------------------------------</span>

    <a class="code" href="class_o_t_num_list.html">OTNumList</a> theList(strNumList), theNewNumbers(strNumbers);

    <span class="keyword">const</span> <span class="keywordtype">bool</span> &amp; bRemoved = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a577cd1a86933ded118347ca37f537cee">NumList_Remove</a>(theList, theNewNumbers);

    <a class="code" href="class_o_t_string.html">OTString</a> strOutput;
    <span class="keywordflow">if</span> (bRemoved &amp;&amp; theList.Output(strOutput))
    {
        std::string pBuf = strOutput.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();

        <span class="keywordflow">return</span> pBuf;
    }

    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac288e2bf16e7f738d5450e5f43fdcc31"></a><!-- doxytag: member="OTAPI_Exec::NumList_VerifyAll" ref="ac288e2bf16e7f738d5450e5f43fdcc31" args="(const std::string &amp;strNumList, const std::string &amp;strNumbers)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_a_p_i___exec.html#ac288e2bf16e7f738d5450e5f43fdcc31">OTAPI_Exec::NumList_VerifyAll</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>strNumList</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>strNumbers</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l00531">531</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// -----------------------------------------------------</span>
    <span class="keywordtype">bool</span> bIsInitialized = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#af11b60d083c4a8e1e68a59a0824899d4">IsInitialized</a>();
    <span class="keywordflow">if</span> (!bIsInitialized)    { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Not initialized; call OT_API::Init first.\n&quot;</span>,__FUNCTION__  ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (strNumList.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;strNumList&quot;</span>         ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (strNumbers.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;strNumbers&quot;</span>         ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_num_list.html">OTNumList</a> theList(strNumList), theNewNumbers(strNumbers);

    <span class="keyword">const</span> <span class="keywordtype">bool</span> &amp; bVerified = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a909a6234b5e4dd04059a7e86f7883d1c">NumList_VerifyAll</a>(theList, theNewNumbers);

    <span class="keywordflow">return</span> bVerified ? <span class="keyword">true</span> : <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae87e416912965485351808676feb6421"></a><!-- doxytag: member="OTAPI_Exec::NumList_VerifyQuery" ref="ae87e416912965485351808676feb6421" args="(const std::string &amp;strNumList, const std::string &amp;strNumbers)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_a_p_i___exec.html#ae87e416912965485351808676feb6421">OTAPI_Exec::NumList_VerifyQuery</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>strNumList</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>strNumbers</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l00512">512</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// -----------------------------------------------------</span>
    <span class="keywordtype">bool</span> bIsInitialized = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#af11b60d083c4a8e1e68a59a0824899d4">IsInitialized</a>();
    <span class="keywordflow">if</span> (!bIsInitialized) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Not initialized; call OT_API::Init first.\n&quot;</span>,__FUNCTION__); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keywordflow">if</span> (strNumList.empty())         { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;strNumList&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (strNumbers.empty())         { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;strNumbers&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// -----------------------------------------------------</span>

    <a class="code" href="class_o_t_num_list.html">OTNumList</a> theList(strNumList), theNewNumbers(strNumbers);

    <span class="keyword">const</span> <span class="keywordtype">bool</span> &amp; bVerified = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#ac2bbcfd6aa2d7a7bf0f6a78b4dd2a654">NumList_VerifyQuery</a>(theList, theNewNumbers);

    <span class="keywordflow">return</span> bVerified ? <span class="keyword">true</span> : <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac70ad98b72adb62a7fbe2343fa316dda"></a><!-- doxytag: member="OTAPI_Exec::Nym_RemoveMailByIndex" ref="ac70ad98b72adb62a7fbe2343fa316dda" args="(const std::string &amp;NYM_ID, const int32_t &amp;nIndex)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_a_p_i___exec.html#ac70ad98b72adb62a7fbe2343fa316dda">OTAPI_Exec::Nym_RemoveMailByIndex</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>NYM_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int32_t &amp;&#160;</td>
          <td class="paramname"><em>nIndex</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l02724">2724</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (NYM_ID.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;NYM_ID&quot;</span>              ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (0 &gt; nIndex) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: nIndex is out of bounds (it&#39;s in the negative!)\n&quot;</span>, __FUNCTION__); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// -------------------------</span>
    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>    theNymID(NYM_ID);
    <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pNym = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a08144e29a333dd0e1087c4655e6981ee">GetNym</a>(theNymID, __FUNCTION__);
    <span class="keywordflow">if</span> (NULL == pNym) <span class="keywordflow">return</span> <span class="keyword">false</span>;
    <span class="comment">// -------------------------</span>
    <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pSignerNym = pNym;

    <span class="keywordflow">if</span> (pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#a7f32350b2827a62bbfa5ef09a392f129">RemoveMailByIndex</a>(nIndex))
    {
        <span class="keywordflow">if</span> (pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#a5d08ef86097db038c2c4fd30034f5dc8">SaveSignedNymfile</a>(*pSignerNym)) <span class="comment">// &lt;== save Nym to local storage, since a mail was erased.</span>
            <span class="keywordflow">return</span> <span class="keyword">true</span>;
        <span class="keywordflow">else</span>
            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error saving Nym: %s\n&quot;</span>, __FUNCTION__, NYM_ID.c_str());
    }
    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aebc780df2244d90c4ebd6d3ceb0f4268"></a><!-- doxytag: member="OTAPI_Exec::Nym_RemoveOutmailByIndex" ref="aebc780df2244d90c4ebd6d3ceb0f4268" args="(const std::string &amp;NYM_ID, const int32_t &amp;nIndex)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_a_p_i___exec.html#aebc780df2244d90c4ebd6d3ceb0f4268">OTAPI_Exec::Nym_RemoveOutmailByIndex</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>NYM_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int32_t &amp;&#160;</td>
          <td class="paramname"><em>nIndex</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l02902">2902</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (NYM_ID.empty())             { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;NYM_ID&quot;</span>  ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (0 &gt; nIndex) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: nIndex is out of bounds (it&#39;s in the negative!)\n&quot;</span>, __FUNCTION__); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// -------------------------</span>
    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>    theNymID(NYM_ID);
    <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pNym = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a08144e29a333dd0e1087c4655e6981ee">GetNym</a>(theNymID, __FUNCTION__);
    <span class="keywordflow">if</span> (NULL == pNym) <span class="keywordflow">return</span> <span class="keyword">false</span>;
    <span class="comment">// -------------------------</span>
    <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pSignerNym = pNym;

    <span class="keywordflow">if</span> (pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#ae2510d04ffb6c0e01aeda1b75a59d1ef">RemoveOutmailByIndex</a>(nIndex))
    {
        <span class="keywordflow">if</span> (pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#a5d08ef86097db038c2c4fd30034f5dc8">SaveSignedNymfile</a>(*pSignerNym)) <span class="comment">// &lt;== save Nym to local storage, since a mail was erased.</span>
            <span class="keywordflow">return</span> <span class="keyword">true</span>;
        <span class="keywordflow">else</span>
            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error saving Nym: %s\n&quot;</span>, __FUNCTION__, NYM_ID.c_str());
    }
    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a4e56f34553c3f5b2f79b7bf1b9aa46b0"></a><!-- doxytag: member="OTAPI_Exec::Nym_RemoveOutpaymentsByIndex" ref="a4e56f34553c3f5b2f79b7bf1b9aa46b0" args="(const std::string &amp;NYM_ID, const int32_t &amp;nIndex)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_a_p_i___exec.html#a4e56f34553c3f5b2f79b7bf1b9aa46b0">OTAPI_Exec::Nym_RemoveOutpaymentsByIndex</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>NYM_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int32_t &amp;&#160;</td>
          <td class="paramname"><em>nIndex</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l03101">3101</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (NYM_ID.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;NYM_ID&quot;</span>                  ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (0 &gt; nIndex)     { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: nIndex is out of bounds (it&#39;s in the negative!)\n&quot;</span>, __FUNCTION__); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="comment">// -------------------------</span>
    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>    theNymID(NYM_ID);
    <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pNym = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a08144e29a333dd0e1087c4655e6981ee">GetNym</a>(theNymID, __FUNCTION__);
    <span class="keywordflow">if</span> (NULL == pNym) <span class="keywordflow">return</span> <span class="keyword">false</span>;
    <span class="comment">// -------------------------</span>
    <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pSignerNym = pNym;

    <span class="keywordflow">if</span> (pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#a2d66a8a46d8e147ca0dbc0fb45bc364d">RemoveOutpaymentsByIndex</a>(nIndex))
    {
        <span class="keywordflow">if</span> (pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#a5d08ef86097db038c2c4fd30034f5dc8">SaveSignedNymfile</a>(*pSignerNym)) <span class="comment">// &lt;== save Nym to local storage, since a payment outmail was erased.</span>
            <span class="keywordflow">return</span> <span class="keyword">true</span>;
        <span class="keywordflow">else</span>
            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error saving Nym: %s\n&quot;</span>, __FUNCTION__, NYM_ID.c_str());
    }
    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="af5445f94adcbb66d9e6acd3962d0128d"></a><!-- doxytag: member="OTAPI_Exec::Nym_VerifyMailByIndex" ref="af5445f94adcbb66d9e6acd3962d0128d" args="(const std::string &amp;NYM_ID, const int32_t &amp;nIndex)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_a_p_i___exec.html#af5445f94adcbb66d9e6acd3962d0128d">OTAPI_Exec::Nym_VerifyMailByIndex</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>NYM_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int32_t &amp;&#160;</td>
          <td class="paramname"><em>nIndex</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l02765">2765</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (NYM_ID.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;NYM_ID&quot;</span>              ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (0 &gt; nIndex) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: nIndex is out of bounds (it&#39;s in the negative!)\n&quot;</span>, __FUNCTION__); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// -------------------------</span>
    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>    theNymID(NYM_ID);
    <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pNym = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a08144e29a333dd0e1087c4655e6981ee">GetNym</a>(theNymID, __FUNCTION__);
    <span class="keywordflow">if</span> (NULL == pNym) <span class="keywordflow">return</span> <span class="keyword">false</span>;
    <span class="comment">// -------------------------</span>
    <a class="code" href="class_o_t_message.html">OTMessage</a> * pMessage = pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#a41d4a62c9e863fa982c7b4899bfcd3cb">GetMailByIndex</a>(nIndex);

    <span class="keywordflow">if</span> (NULL != pMessage)
    {
        <span class="comment">// Grab the NymID of the sender.</span>
        <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theSenderNymID(pMessage-&gt;<a class="code" href="class_o_t_message.html#a61b38b159dbb516bb3f4f382b936238a">m_strNymID</a>);

        <span class="comment">// Grab a pointer to that Nym (if its public key is in my wallet.)</span>
        <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pSenderNym = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a08144e29a333dd0e1087c4655e6981ee">GetNym</a>(theSenderNymID, __FUNCTION__);

        <span class="comment">// If it&#39;s there, use it to verify the signature on the message.</span>
        <span class="comment">// return true if successful signature verification.</span>
        <span class="comment">//</span>
        <span class="keywordflow">if</span> (NULL != pSenderNym)
        {
            <span class="keywordflow">if</span> (pMessage-&gt;<a class="code" href="class_o_t_message.html#aa61f745665166abf8bed98f47c6252d0">VerifySignature</a>(*pSenderNym))
                <span class="keywordflow">return</span> <span class="keyword">true</span>;
        }
    }
    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a16545eb3a6c8b39d83964e01005077b0"></a><!-- doxytag: member="OTAPI_Exec::Nym_VerifyOutmailByIndex" ref="a16545eb3a6c8b39d83964e01005077b0" args="(const std::string &amp;NYM_ID, const int32_t &amp;nIndex)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_a_p_i___exec.html#a16545eb3a6c8b39d83964e01005077b0">OTAPI_Exec::Nym_VerifyOutmailByIndex</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>NYM_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int32_t &amp;&#160;</td>
          <td class="paramname"><em>nIndex</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l02943">2943</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (NYM_ID.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;NYM_ID&quot;</span>              ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (0 &gt; nIndex) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: nIndex is out of bounds (it&#39;s in the negative!)\n&quot;</span>, __FUNCTION__); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// -------------------------</span>
    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>    theNymID(NYM_ID);
    <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pNym = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a08144e29a333dd0e1087c4655e6981ee">GetNym</a>(theNymID, __FUNCTION__);
    <span class="keywordflow">if</span> (NULL == pNym) <span class="keywordflow">return</span> <span class="keyword">false</span>;
    <span class="comment">// -------------------------</span>
    <a class="code" href="class_o_t_message.html">OTMessage</a> * pMessage = pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#a126bbb8a3d356a0fd2118c95dfe6cbea">GetOutmailByIndex</a>(nIndex);
    <span class="keywordflow">if</span> (NULL != pMessage)
    {
        <span class="comment">// Grab the NymID of the sender.</span>
        <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theSenderNymID(pMessage-&gt;<a class="code" href="class_o_t_message.html#a61b38b159dbb516bb3f4f382b936238a">m_strNymID</a>);

        <span class="comment">// Grab a pointer to that Nym (if its public key is in my wallet.)</span>
        <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pSenderNym = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a08144e29a333dd0e1087c4655e6981ee">GetNym</a>(theSenderNymID, __FUNCTION__);

        <span class="comment">// If it&#39;s there, use it to verify the signature on the message.</span>
        <span class="comment">// return true if successful signature verification.</span>
        <span class="comment">//</span>
        <span class="keywordflow">if</span> (NULL != pSenderNym)
        {
            <span class="keywordflow">if</span> (pMessage-&gt;<a class="code" href="class_o_t_message.html#aa61f745665166abf8bed98f47c6252d0">VerifySignature</a>(*pSenderNym))
                <span class="keywordflow">return</span> <span class="keyword">true</span>;
        }
    }
    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a920a1595279a928a5056177f1d4c2adc"></a><!-- doxytag: member="OTAPI_Exec::Nym_VerifyOutpaymentsByIndex" ref="a920a1595279a928a5056177f1d4c2adc" args="(const std::string &amp;NYM_ID, const int32_t &amp;nIndex)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_a_p_i___exec.html#a920a1595279a928a5056177f1d4c2adc">OTAPI_Exec::Nym_VerifyOutpaymentsByIndex</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>NYM_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int32_t &amp;&#160;</td>
          <td class="paramname"><em>nIndex</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l03143">3143</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (NYM_ID.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;NYM_ID&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (0 &gt; nIndex) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: nIndex is out of bounds (it&#39;s in the negative!)\n&quot;</span>, __FUNCTION__); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// -------------------------</span>
    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>    theNymID(NYM_ID);
    <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pNym = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a08144e29a333dd0e1087c4655e6981ee">GetNym</a>(theNymID, __FUNCTION__);
    <span class="keywordflow">if</span> (NULL == pNym) <span class="keywordflow">return</span> <span class="keyword">false</span>;
    <span class="comment">// -------------------------</span>
    <a class="code" href="class_o_t_message.html">OTMessage</a> * pMessage = pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#acb808e89943f1f2d0009825a3fbcb34f">GetOutpaymentsByIndex</a>(nIndex);
    <span class="keywordflow">if</span> (NULL != pMessage)
    {
        <span class="comment">// Grab the NymID of the sender.</span>
        <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theSenderNymID(pMessage-&gt;<a class="code" href="class_o_t_message.html#a61b38b159dbb516bb3f4f382b936238a">m_strNymID</a>);

        <span class="comment">// Grab a pointer to that Nym (if its public key is in my wallet.)</span>
        <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pSenderNym = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a08144e29a333dd0e1087c4655e6981ee">GetNym</a>(theSenderNymID, __FUNCTION__);

        <span class="comment">// If it&#39;s there, use it to verify the signature on the message.</span>
        <span class="comment">// return true if successful signature verification.</span>
        <span class="comment">//</span>
        <span class="keywordflow">if</span> (NULL != pSenderNym)
        {
            <span class="keywordflow">if</span> (pMessage-&gt;<a class="code" href="class_o_t_message.html#aa61f745665166abf8bed98f47c6252d0">VerifySignature</a>(*pSenderNym))
                <span class="keywordflow">return</span> <span class="keyword">true</span>;
        }
    }
    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a280cb93214875fe7508fbf0cce2ac67b"></a><!-- doxytag: member="OTAPI_Exec::Nymbox_GetReplyNotice" ref="a280cb93214875fe7508fbf0cce2ac67b" args="(const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const int64_t &amp;REQUEST_NUMBER)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a280cb93214875fe7508fbf0cce2ac67b">OTAPI_Exec::Nymbox_GetReplyNotice</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int64_t &amp;&#160;</td>
          <td class="paramname"><em>REQUEST_NUMBER</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Some server replies (to your messages) are so important that a notice is dropped into your Nymbox with a copy of the server's reply. It's called a replyNotice. Since the server is usually replying to a message, I've added this function for quickly looking up the message reply, if it's there, based on the requestNumber. This is the only example in the entire OT API where a Transaction is looked-up from a ledger, based on a REQUEST NUMBER. (Normally transactions use transaction numbers, and messages use request numbers. But in this case, it's a transaction that carries a copy of a message.) </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l07612">7612</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty())  { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>,     __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>      ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID.empty())    { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>,     __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>        ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (0 &gt; REQUEST_NUMBER) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Negative: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;REQUEST_NUMBER&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theServerID(SERVER_ID);
    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theUserID(USER_ID);

    <span class="keyword">const</span> int64_t lRequestNumber = REQUEST_NUMBER;
    <span class="comment">// -----------------------------------------</span>
    <span class="comment">// There is an OT_ASSERT in here for memory failure,</span>
    <span class="comment">// but it still might return &quot;&quot; if various verification fails.</span>

    <a class="code" href="class_o_t_ledger.html">OTLedger</a> * pLedger = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a5d73d9af141c79478e431d81b3ac641d">LoadNymboxNoVerify</a>(theServerID, theUserID);
    <span class="comment">// Make sure it gets cleaned up when this goes out of scope.</span>
    <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTLedger&gt;</a> theAngel(pLedger); <span class="comment">// I pass the pointer, in case it&#39;s &quot;&quot;.</span>

    <span class="keywordflow">if</span> (NULL == pLedger)
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Failure calling OT_API::LoadNymboxNoVerify.\n&quot;</span>, __FUNCTION__);
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    }
    <span class="comment">// -----------------------------------</span>
    <a class="code" href="class_o_t_transaction.html">OTTransaction</a> * pTransaction = pLedger-&gt;<a class="code" href="class_o_t_ledger.html#abff95a14ed703447ec5557183f5dc91c">GetReplyNotice</a>(static_cast&lt;int64_t&gt;(lRequestNumber));
    <span class="comment">// No need to cleanup this transaction, the ledger owns it already.</span>

    <span class="keywordflow">if</span> (NULL == pTransaction)
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(4, <span class="stringliteral">&quot;%s: No replyNotice transactions found in ledger with request number: %lld\n&quot;</span>, __FUNCTION__, lRequestNumber);
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>; <span class="comment">// Maybe he was just looking; this isn&#39;t necessarily an error.</span>
    }
    <span class="comment">// -----------------------------------</span>
    <span class="comment">// At this point, I actually have the transaction pointer to the replyNotice,</span>
    <span class="comment">// so let&#39;s return it in string form...</span>
    <span class="comment">//</span>
    <span class="keyword">const</span> int64_t lTransactionNum = pTransaction-&gt;<a class="code" href="class_o_t_transaction_type.html#aa204b21b7f498389f746742c1d2007fa">GetTransactionNum</a>();

    <span class="comment">// Update: for transactions in ABBREVIATED form, the string is empty, since it has never actually</span>
    <span class="comment">// been signed (in fact the whole point32_t with abbreviated transactions in a ledger is that they</span>
    <span class="comment">// take up very little room, and have no signature of their own, but exist merely as XML tags on</span>
    <span class="comment">// their parent ledger.)</span>
    <span class="comment">//</span>
    <span class="comment">// THEREFORE I must check to see if this transaction is abbreviated and if so, sign it in order to</span>
    <span class="comment">// force the UpdateContents() call, so the programmatic user of this API will be able to load it up.</span>
    <span class="comment">//</span>

     <a class="code" href="class_o_t_string.html">OTString</a> strOutput(*pTransaction); <span class="comment">// we only have the Abbreviated, so we have to use this one.</span>

    <span class="keywordflow">if</span> (pTransaction-&gt;<a class="code" href="class_o_t_transaction.html#aacf7e02644aace6f245b9d493e721186">IsAbbreviated</a>())
    {
        pLedger-&gt;<a class="code" href="class_o_t_ledger.html#ae91873a35ebda05d8d91c78c1c1fcfbf">LoadBoxReceipt</a>(static_cast&lt;int64_t&gt;(lTransactionNum));
        <a class="code" href="class_o_t_transaction.html">OTTransaction</a> * pFullTransaction = pLedger-&gt;<a class="code" href="class_o_t_ledger.html#a89dedbb3be7bd6869ad5e345fd14fb20">GetTransaction</a>(static_cast&lt;int64_t&gt;(lTransactionNum));
        <span class="comment">// -------------------------</span>

        <span class="keywordflow">if</span> (NULL != pFullTransaction)
        {
            strOutput.<a class="code" href="class_o_t_transaction.html#a4f9c8be70e01dfcd7bedbac7d6af887b">Release</a>();
            strOutput.zeroMemory();
            strOutput.Set(*pFullTransaction); <span class="comment">// we have the FullTransaction, lets use that one.</span>
        }
        <span class="keywordflow">else</span> <span class="comment">// NULL == pFullTransaction</span>
        {
            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: good index but uncovered \&quot;\&quot; pointer after trying to load full &quot;</span>
                <span class="stringliteral">&quot;version of receipt (from abbreviated.) Thus, saving abbreviated version instead, &quot;</span>
                <span class="stringliteral">&quot;so I can still return SOMETHING.\n&quot;</span>, __FUNCTION__);
            <span class="comment">// ----------------------------------</span>
            <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pNym = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a08144e29a333dd0e1087c4655e6981ee">GetNym</a>(theUserID, __FUNCTION__);
            <span class="keywordflow">if</span> (NULL == pNym) <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
            <span class="comment">// -------------------------</span>
            pTransaction-&gt;<a class="code" href="class_o_t_contract.html#aae54340526fbd8eb8a18de27a4b97c83">ReleaseSignatures</a>();
            pTransaction-&gt;<a class="code" href="class_o_t_contract.html#abd60037fe655ee8cae9a3ece5d1e2ea6">SignContract</a>(*pNym);
            pTransaction-&gt;<a class="code" href="class_o_t_contract.html#a363ae430d4fd9256ab8364dbafb95444">SaveContract</a>();
            <span class="comment">// ------------------------</span>
        }
        strOutput.Release();
        pTransaction-&gt;<a class="code" href="class_o_t_contract.html#a5fd00cded794a6f96ba80d8d4081d591">SaveContractRaw</a>(strOutput); <span class="comment">// if it was abbreviated before, now it either IS the box receipt, or it&#39;s the abbreviated version.</span>
    }
    <span class="comment">// ------------------------------------------------</span>
    <span class="comment">// We return the abbreviated version because the developer using the OT API</span>
    <span class="comment">// needs to know if that receipt is there, whether it&#39;s abbreviated or not.</span>
    <span class="comment">// So rather than passing &quot;&quot; when it&#39;s abbreviated, and thus leading him</span>
    <span class="comment">// astray, we give him the next-best thing: the abbreviated version. That</span>
    <span class="comment">// way at least he knows for sure that the receipt is there, the one he is</span>
    <span class="comment">// asking about.</span>

    std::string pBuf = strOutput.Get();

    <span class="keywordflow">return</span> pBuf;
}
</pre></div>
</div>
</div>
<a class="anchor" id="afc695435b4053950845879a9e6b95d4f"></a><!-- doxytag: member="OTAPI_Exec::OTAPI" ref="afc695435b4053950845879a9e6b95d4f" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t___a_p_i.html">OT_API</a> * <a class="el" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI_Exec::OTAPI</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l00285">285</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> <a class="code" href="class_o_t_a_p_i___exec.html#a4a454ed385391e993ec5ebf323a54063">p_OTAPI</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a898873fe2d35440f6963b81e7a83ea84"></a><!-- doxytag: member="OTAPI_Exec::Output" ref="a898873fe2d35440f6963b81e7a83ea84" args="(const int32_t &amp;nLogLevel, const std::string &amp;strOutput)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_a_p_i___exec.html#a898873fe2d35440f6963b81e7a83ea84">OTAPI_Exec::Output</a> </td>
          <td>(</td>
          <td class="paramtype">const int32_t &amp;&#160;</td>
          <td class="paramname"><em>nLogLevel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>strOutput</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Output to the screen (stderr.) (This is so stdout can be left clean for the ACTUAL output.) Log level is 0 (least verbose) to 5 (most verbose.) </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l00332">332</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> otstrOutput(!strOutput.empty() ? strOutput : <span class="stringliteral">&quot;\n&quot;</span>);

    <a class="code" href="class_o_t_a_p_i___exec.html#a898873fe2d35440f6963b81e7a83ea84">OTLog::Output</a>(nLogLevel, otstrOutput.Get());
}
</pre></div>
</div>
</div>
<a class="anchor" id="a960e6c5c4819c494e9e5b79b2717d73b"></a><!-- doxytag: member="OTAPI_Exec::Party_GetAcctAgentName" ref="a960e6c5c4819c494e9e5b79b2717d73b" args="(const std::string &amp;THE_CONTRACT, const std::string &amp;PARTY_NAME, const std::string &amp;ACCT_NAME)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a960e6c5c4819c494e9e5b79b2717d73b">OTAPI_Exec::Party_GetAcctAgentName</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_CONTRACT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>PARTY_NAME</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ACCT_NAME</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l06834">6834</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (THE_CONTRACT.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_CONTRACT&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (PARTY_NAME.empty())   { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;PARTY_NAME&quot;</span>   ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (ACCT_NAME.empty())    { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;ACCT_NAME&quot;</span>    ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// -----------------------------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strContract(THE_CONTRACT);
    <a class="code" href="class_o_t_scriptable.html">OTScriptable</a> * pScriptable = <a class="code" href="class_o_t_scriptable.html#a4a89cbc1abd2bac0e5dec64da3452b7a">OTScriptable::InstantiateScriptable</a>(strContract);
    <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTScriptable&gt;</a> theContractAngel;
    <span class="keywordflow">if</span> (NULL == pScriptable)
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Failed trying to load smart contract from string:\n\n%s\n\n&quot;</span>,
                       __FUNCTION__, strContract.Get());
    }
    <span class="keywordflow">else</span>
    {
        theContractAngel.<a class="code" href="class_o_t_cleanup.html#a00a399db45f730439d2263d4429d00c1">SetCleanupTarget</a>(*pScriptable);  <span class="comment">// Auto-cleanup.</span>
        <span class="comment">// -----------------------------------------------------</span>
        <a class="code" href="class_o_t_party.html">OTParty</a> * pParty = pScriptable-&gt;<a class="code" href="class_o_t_scriptable.html#acd0f8e884ed00f1d082fa498323d8894">GetParty</a>(PARTY_NAME);
        <span class="comment">// -----------------------------------------------------</span>
        <span class="keywordflow">if</span> (NULL == pParty)
        {
            <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Smart contract loaded up, but failed to retrieve the party with name: %s\n&quot;</span>,
                           __FUNCTION__, PARTY_NAME.c_str());
        }
        <span class="keywordflow">else</span> <span class="comment">// We found the party...</span>
        {
            <span class="keyword">const</span> <a class="code" href="class_o_t_party_account.html">OTPartyAccount</a> * pAcct = pParty-&gt;<a class="code" href="class_o_t_party.html#aee3973dc05c042dab571781a9d454af2">GetAccount</a>(ACCT_NAME);

            <span class="keywordflow">if</span> (NULL == pAcct)
            {
                <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Smart contract loaded up, and party found, but failed to retrieve party&#39;s account named: %s\n&quot;</span>,
                               __FUNCTION__, ACCT_NAME.c_str());
            }
            <span class="keywordflow">else</span> <span class="comment">// We found the account...</span>
            {
                <span class="keyword">const</span> std::string str_return(pAcct-&gt;<a class="code" href="class_o_t_party_account.html#a86975046b18ac6d6c5841f5ba0befe69">GetAgentName</a>().<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());  <span class="comment">// Success.</span>
                <span class="keywordflow">return</span> str_return;
            }
        }
    }
    <span class="comment">// -----------------------------------------------------------</span>
    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae8794cf485acf05c70c5e10e66a8b211"></a><!-- doxytag: member="OTAPI_Exec::Party_GetAcctAssetID" ref="ae8794cf485acf05c70c5e10e66a8b211" args="(const std::string &amp;THE_CONTRACT, const std::string &amp;PARTY_NAME, const std::string &amp;ACCT_NAME)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#ae8794cf485acf05c70c5e10e66a8b211">OTAPI_Exec::Party_GetAcctAssetID</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_CONTRACT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>PARTY_NAME</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ACCT_NAME</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l06785">6785</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (THE_CONTRACT.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_CONTRACT&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (PARTY_NAME.empty())   { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;PARTY_NAME&quot;</span>   ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (ACCT_NAME.empty())    { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;ACCT_NAME&quot;</span>    ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// -----------------------------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strContract(THE_CONTRACT);
    <a class="code" href="class_o_t_scriptable.html">OTScriptable</a> * pScriptable = <a class="code" href="class_o_t_scriptable.html#a4a89cbc1abd2bac0e5dec64da3452b7a">OTScriptable::InstantiateScriptable</a>(strContract);
    <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTScriptable&gt;</a> theContractAngel;
    <span class="keywordflow">if</span> (NULL == pScriptable)
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Failed trying to load smart contract from string:\n\n%s\n\n&quot;</span>,
                       __FUNCTION__, strContract.Get());
    }
    <span class="keywordflow">else</span>
    {
        theContractAngel.<a class="code" href="class_o_t_cleanup.html#a00a399db45f730439d2263d4429d00c1">SetCleanupTarget</a>(*pScriptable);  <span class="comment">// Auto-cleanup.</span>
        <span class="comment">// -----------------------------------------------------</span>
        <a class="code" href="class_o_t_party.html">OTParty</a> * pParty = pScriptable-&gt;<a class="code" href="class_o_t_scriptable.html#acd0f8e884ed00f1d082fa498323d8894">GetParty</a>(PARTY_NAME);
        <span class="comment">// -----------------------------------------------------</span>
        <span class="keywordflow">if</span> (NULL == pParty)
        {
            <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Smart contract loaded up, but failed to retrieve the party with name: %s\n&quot;</span>,
                           __FUNCTION__, PARTY_NAME.c_str());
        }
        <span class="keywordflow">else</span> <span class="comment">// We found the party...</span>
        {
            <span class="keyword">const</span> <a class="code" href="class_o_t_party_account.html">OTPartyAccount</a> * pAcct = pParty-&gt;<a class="code" href="class_o_t_party.html#aee3973dc05c042dab571781a9d454af2">GetAccount</a>(ACCT_NAME);

            <span class="keywordflow">if</span> (NULL == pAcct)
            {
                <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Smart contract loaded up, and party found, but failed to retrieve party&#39;s account named: %s\n&quot;</span>,
                               __FUNCTION__, ACCT_NAME.c_str());
            }
            <span class="keywordflow">else</span> <span class="comment">// We found the account...</span>
            {
                <span class="keyword">const</span> std::string str_return(pAcct-&gt;<a class="code" href="class_o_t_party_account.html#adb6df939b40f2abe597cef270073a2fa">GetAssetTypeID</a>().<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());  <span class="comment">// Success.</span>
                <span class="keywordflow">return</span> str_return;
            }
        }
    }
    <span class="comment">// -----------------------------------------------------------</span>
    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa274d975294488d77a90b462d3e0bbde"></a><!-- doxytag: member="OTAPI_Exec::Party_GetAcctCount" ref="aa274d975294488d77a90b462d3e0bbde" args="(const std::string &amp;THE_CONTRACT, const std::string &amp;PARTY_NAME)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_a_p_i___exec.html#aa274d975294488d77a90b462d3e0bbde">OTAPI_Exec::Party_GetAcctCount</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_CONTRACT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>PARTY_NAME</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l06578">6578</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (THE_CONTRACT.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_CONTRACT&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (PARTY_NAME.empty())   { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;PARTY_NAME&quot;</span>   ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_string.html">OTString</a> strContract(THE_CONTRACT);
    <a class="code" href="class_o_t_scriptable.html">OTScriptable</a> * pScriptable = <a class="code" href="class_o_t_scriptable.html#a4a89cbc1abd2bac0e5dec64da3452b7a">OTScriptable::InstantiateScriptable</a>(strContract);
    <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTScriptable&gt;</a> theContractAngel;
    <span class="keywordflow">if</span> (NULL == pScriptable)
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Failed trying to load smart contract from string:\n\n%s\n\n&quot;</span>,
                       __FUNCTION__, strContract.Get());
    }
    <span class="keywordflow">else</span>
    {
        theContractAngel.<a class="code" href="class_o_t_cleanup.html#a00a399db45f730439d2263d4429d00c1">SetCleanupTarget</a>(*pScriptable);  <span class="comment">// Auto-cleanup.</span>
        <span class="comment">// -----------------------------------------------------</span>
        <a class="code" href="class_o_t_party.html">OTParty</a> * pParty = pScriptable-&gt;<a class="code" href="class_o_t_scriptable.html#acd0f8e884ed00f1d082fa498323d8894">GetParty</a>(PARTY_NAME);
        <span class="comment">// -----------------------------------------------------</span>
        <span class="keywordflow">if</span> (NULL == pParty)
        {
            <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Smart contract loaded up, but failed to find a party with the name: %s\n&quot;</span>,
                           __FUNCTION__, PARTY_NAME.c_str());
        }
        <span class="keywordflow">else</span> <span class="comment">// We found the party...</span>
        {
            <span class="keyword">const</span> int32_t nReturnValue = <span class="keyword">static_cast&lt;</span>int32_t<span class="keyword">&gt;</span>(pParty-&gt;<a class="code" href="class_o_t_party.html#a0b130989d275386c980ed34d587e5e87">GetAccountCount</a>());
            <span class="keywordflow">return</span> nReturnValue;
        }
    }
    <span class="comment">// -----------------------------------------------------------</span>
    <span class="keywordflow">return</span> (-1);
}
</pre></div>
</div>
</div>
<a class="anchor" id="ade083f86e74e59977670e02fb11de343"></a><!-- doxytag: member="OTAPI_Exec::Party_GetAcctID" ref="ade083f86e74e59977670e02fb11de343" args="(const std::string &amp;THE_CONTRACT, const std::string &amp;PARTY_NAME, const std::string &amp;ACCT_NAME)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#ade083f86e74e59977670e02fb11de343">OTAPI_Exec::Party_GetAcctID</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_CONTRACT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>PARTY_NAME</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ACCT_NAME</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l06737">6737</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (THE_CONTRACT.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_CONTRACT&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (PARTY_NAME.empty())   { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;PARTY_NAME&quot;</span>   ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (ACCT_NAME.empty())    { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;ACCT_NAME&quot;</span>    ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// -----------------------------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strContract(THE_CONTRACT);
    <a class="code" href="class_o_t_scriptable.html">OTScriptable</a> * pScriptable = <a class="code" href="class_o_t_scriptable.html#a4a89cbc1abd2bac0e5dec64da3452b7a">OTScriptable::InstantiateScriptable</a>(strContract);
    <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTScriptable&gt;</a> theContractAngel;
    <span class="keywordflow">if</span> (NULL == pScriptable)
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Failed trying to load smart contract from string:\n\n%s\n\n&quot;</span>,
                       __FUNCTION__, strContract.Get());
    }
    <span class="keywordflow">else</span>
    {
        theContractAngel.<a class="code" href="class_o_t_cleanup.html#a00a399db45f730439d2263d4429d00c1">SetCleanupTarget</a>(*pScriptable);  <span class="comment">// Auto-cleanup.</span>
        <span class="comment">// -----------------------------------------------------</span>
        <a class="code" href="class_o_t_party.html">OTParty</a> * pParty = pScriptable-&gt;<a class="code" href="class_o_t_scriptable.html#acd0f8e884ed00f1d082fa498323d8894">GetParty</a>(PARTY_NAME);
        <span class="comment">// -----------------------------------------------------</span>
        <span class="keywordflow">if</span> (NULL == pParty)
        {
            <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Smart contract loaded up, but failed to retrieve the party with name: %s\n&quot;</span>,
                           __FUNCTION__, PARTY_NAME.c_str());
        }
        <span class="keywordflow">else</span> <span class="comment">// We found the party...</span>
        {
            <span class="keyword">const</span> <a class="code" href="class_o_t_party_account.html">OTPartyAccount</a> * pAcct = pParty-&gt;<a class="code" href="class_o_t_party.html#aee3973dc05c042dab571781a9d454af2">GetAccount</a>(ACCT_NAME);

            <span class="keywordflow">if</span> (NULL == pAcct)
            {
                <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Smart contract loaded up, and party found, but failed to retrieve party&#39;s account named: %s\n&quot;</span>,
                               __FUNCTION__, ACCT_NAME.c_str());
            }
            <span class="keywordflow">else</span> <span class="comment">// We found the account...</span>
            {
                <span class="keyword">const</span> std::string str_return(pAcct-&gt;<a class="code" href="class_o_t_party_account.html#aa5e4e0cc77853d08b3708017fe694876">GetAcctID</a>().<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());  <span class="comment">// Success.</span>
                <span class="keywordflow">return</span> str_return;
            }
        }
    }
    <span class="comment">// -----------------------------------------------------------</span>
    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a959128265f75ed1a528c589311b9287f"></a><!-- doxytag: member="OTAPI_Exec::Party_GetAcctNameByIndex" ref="a959128265f75ed1a528c589311b9287f" args="(const std::string &amp;THE_CONTRACT, const std::string &amp;PARTY_NAME, const int32_t &amp;nIndex)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a959128265f75ed1a528c589311b9287f">OTAPI_Exec::Party_GetAcctNameByIndex</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_CONTRACT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>PARTY_NAME</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int32_t &amp;&#160;</td>
          <td class="paramname"><em>nIndex</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l06688">6688</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (THE_CONTRACT.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_CONTRACT&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (PARTY_NAME.empty())   { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;PARTY_NAME&quot;</span>   ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// -----------------------------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strContract(THE_CONTRACT);
    <a class="code" href="class_o_t_scriptable.html">OTScriptable</a> * pScriptable = <a class="code" href="class_o_t_scriptable.html#a4a89cbc1abd2bac0e5dec64da3452b7a">OTScriptable::InstantiateScriptable</a>(strContract);
    <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTScriptable&gt;</a> theContractAngel;
    <span class="keywordflow">if</span> (NULL == pScriptable)
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Failed trying to load smart contract from string:\n\n%s\n\n&quot;</span>,
                       __FUNCTION__, strContract.Get());
    }
    <span class="keywordflow">else</span>
    {
        theContractAngel.<a class="code" href="class_o_t_cleanup.html#a00a399db45f730439d2263d4429d00c1">SetCleanupTarget</a>(*pScriptable);  <span class="comment">// Auto-cleanup.</span>
        <span class="comment">// -----------------------------------------------------</span>
        <a class="code" href="class_o_t_party.html">OTParty</a> * pParty = pScriptable-&gt;<a class="code" href="class_o_t_scriptable.html#acd0f8e884ed00f1d082fa498323d8894">GetParty</a>(PARTY_NAME);
        <span class="comment">// -----------------------------------------------------</span>
        <span class="keywordflow">if</span> (NULL == pParty)
        {
            <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Smart contract loaded up, but failed to retrieve the party with name: %s\n&quot;</span>,
                           __FUNCTION__, PARTY_NAME.c_str());
        }
        <span class="keywordflow">else</span> <span class="comment">// We found the party...</span>
        {
            <span class="keyword">const</span> int32_t nTempIndex   = <span class="keyword">static_cast&lt;</span><span class="keyword">const </span>int32_t<span class="keyword">&gt;</span>(nIndex);
            <a class="code" href="class_o_t_party_account.html">OTPartyAccount</a> * pAcct = pParty-&gt;<a class="code" href="class_o_t_party.html#ad085e6ba37a006e0f8cf7e100a9b59eb">GetAccountByIndex</a>(nTempIndex);

            <span class="keywordflow">if</span> (NULL == pAcct)
            {
                <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Smart contract loaded up, and party found, but failed to retrieve the account at index: %d\n&quot;</span>,
                               __FUNCTION__, nTempIndex);
            }
            <span class="keywordflow">else</span> <span class="comment">// We found the account...</span>
            {
                <span class="keyword">const</span> std::string str_name(pAcct-&gt;<a class="code" href="class_o_t_party_account.html#a56b14b8bc2279fab08cc9c2c754043d4">GetName</a>().<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());  <span class="comment">// Success.</span>
                <span class="keywordflow">return</span> str_name;
            }
        }
    }
    <span class="comment">// -----------------------------------------------------------</span>
    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a4e74fd38565f07849781befa31281149"></a><!-- doxytag: member="OTAPI_Exec::Party_GetAgentCount" ref="a4e74fd38565f07849781befa31281149" args="(const std::string &amp;THE_CONTRACT, const std::string &amp;PARTY_NAME)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_a_p_i___exec.html#a4e74fd38565f07849781befa31281149">OTAPI_Exec::Party_GetAgentCount</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_CONTRACT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>PARTY_NAME</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l06614">6614</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (THE_CONTRACT.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_CONTRACT&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (PARTY_NAME.empty())   { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;PARTY_NAME&quot;</span>   ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_string.html">OTString</a> strContract(THE_CONTRACT);
    <a class="code" href="class_o_t_scriptable.html">OTScriptable</a> * pScriptable = <a class="code" href="class_o_t_scriptable.html#a4a89cbc1abd2bac0e5dec64da3452b7a">OTScriptable::InstantiateScriptable</a>(strContract);
    <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTScriptable&gt;</a> theContractAngel;
    <span class="keywordflow">if</span> (NULL == pScriptable)
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Failed trying to load smart contract from string:\n\n%s\n\n&quot;</span>,
                       __FUNCTION__, strContract.Get());
    }
    <span class="keywordflow">else</span>
    {
        theContractAngel.<a class="code" href="class_o_t_cleanup.html#a00a399db45f730439d2263d4429d00c1">SetCleanupTarget</a>(*pScriptable);  <span class="comment">// Auto-cleanup.</span>
        <span class="comment">// -----------------------------------------------------</span>
        <a class="code" href="class_o_t_party.html">OTParty</a> * pParty = pScriptable-&gt;<a class="code" href="class_o_t_scriptable.html#acd0f8e884ed00f1d082fa498323d8894">GetParty</a>(PARTY_NAME);
        <span class="comment">// -----------------------------------------------------</span>
        <span class="keywordflow">if</span> (NULL == pParty)
        {
            <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Smart contract loaded up, but failed to find a party with the name: %s\n&quot;</span>,
                           __FUNCTION__, PARTY_NAME.c_str());
        }
        <span class="keywordflow">else</span> <span class="comment">// We found the party...</span>
        {
            <span class="keyword">const</span> int32_t nReturnValue = <span class="keyword">static_cast&lt;</span>int32_t<span class="keyword">&gt;</span>(pParty-&gt;<a class="code" href="class_o_t_party.html#afb288a76dd356ce029b4792dc2d6c019">GetAgentCount</a>());
            <span class="keywordflow">return</span> nReturnValue;
        }
    }
    <span class="comment">// -----------------------------------------------------------</span>
    <span class="keywordflow">return</span> (-1);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a3fcc85b7d89f3fbc98683ae6c8e2dd9d"></a><!-- doxytag: member="OTAPI_Exec::Party_GetAgentID" ref="a3fcc85b7d89f3fbc98683ae6c8e2dd9d" args="(const std::string &amp;THE_CONTRACT, const std::string &amp;PARTY_NAME, const std::string &amp;AGENT_NAME)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a3fcc85b7d89f3fbc98683ae6c8e2dd9d">OTAPI_Exec::Party_GetAgentID</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_CONTRACT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>PARTY_NAME</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>AGENT_NAME</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l06934">6934</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (THE_CONTRACT.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_CONTRACT&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (PARTY_NAME.empty())   { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;PARTY_NAME&quot;</span>   ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (AGENT_NAME.empty())   { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;AGENT_NAME&quot;</span>   ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// -----------------------------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strContract(THE_CONTRACT);
    <a class="code" href="class_o_t_scriptable.html">OTScriptable</a> * pScriptable = <a class="code" href="class_o_t_scriptable.html#a4a89cbc1abd2bac0e5dec64da3452b7a">OTScriptable::InstantiateScriptable</a>(strContract);
    <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTScriptable&gt;</a> theContractAngel;
    <span class="keywordflow">if</span> (NULL == pScriptable)
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Failed trying to load smart contract from string:\n\n%s\n\n&quot;</span>,
                       __FUNCTION__, strContract.Get());
    }
    <span class="keywordflow">else</span>
    {
        theContractAngel.<a class="code" href="class_o_t_cleanup.html#a00a399db45f730439d2263d4429d00c1">SetCleanupTarget</a>(*pScriptable);  <span class="comment">// Auto-cleanup.</span>
        <span class="comment">// -----------------------------------------------------</span>
        <a class="code" href="class_o_t_party.html">OTParty</a> * pParty = pScriptable-&gt;<a class="code" href="class_o_t_scriptable.html#acd0f8e884ed00f1d082fa498323d8894">GetParty</a>(PARTY_NAME);
        <span class="comment">// -----------------------------------------------------</span>
        <span class="keywordflow">if</span> (NULL == pParty)
        {
            <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Smart contract loaded up, but failed to retrieve the party with name: %s\n&quot;</span>,
                           __FUNCTION__, PARTY_NAME.c_str());
        }
        <span class="keywordflow">else</span> <span class="comment">// We found the party...</span>
        {
            <a class="code" href="class_o_t_agent.html">OTAgent</a> * pAgent = pParty-&gt;<a class="code" href="class_o_t_party.html#af959cf9f0815a145c5a3072eadfaeb14">GetAgent</a>(AGENT_NAME);

            <span class="keywordflow">if</span> (NULL == pAgent)
            {
                <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Smart contract loaded up, and party found, but failed to retrieve party&#39;s agent named: %s\n&quot;</span>,
                               __FUNCTION__, AGENT_NAME.c_str());
            }
            <span class="keywordflow">else</span> <span class="comment">// We found the agent...</span>
            {
                std::string str_return;
                <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theAgentID;
                <span class="keywordflow">if</span> (pAgent-&gt;<a class="code" href="class_o_t_agent.html#a1969e4f8a5f13ee34ba0a68d8f082956">IsAnIndividual</a>() &amp;&amp; pAgent-&gt;<a class="code" href="class_o_t_agent.html#ac9a12b4a5e377991024dbe2772c73554">GetNymID</a>(theAgentID))
                {
                    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strTemp(theAgentID);
                    str_return = strTemp.Get();
                    <span class="keywordflow">return</span> str_return;
                }
            }
        }
    }
    <span class="comment">// -----------------------------------------------------------</span>
    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a3a6b89e1e57b7d76ef9b208e63c13e82"></a><!-- doxytag: member="OTAPI_Exec::Party_GetAgentNameByIndex" ref="a3a6b89e1e57b7d76ef9b208e63c13e82" args="(const std::string &amp;THE_CONTRACT, const std::string &amp;PARTY_NAME, const int32_t &amp;nIndex)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a3a6b89e1e57b7d76ef9b208e63c13e82">OTAPI_Exec::Party_GetAgentNameByIndex</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_CONTRACT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>PARTY_NAME</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int32_t &amp;&#160;</td>
          <td class="paramname"><em>nIndex</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l06883">6883</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (THE_CONTRACT.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_CONTRACT&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (PARTY_NAME.empty())   { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;PARTY_NAME&quot;</span>   ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// -----------------------------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strContract(THE_CONTRACT);
    <a class="code" href="class_o_t_scriptable.html">OTScriptable</a> * pScriptable = <a class="code" href="class_o_t_scriptable.html#a4a89cbc1abd2bac0e5dec64da3452b7a">OTScriptable::InstantiateScriptable</a>(strContract);
    <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTScriptable&gt;</a> theContractAngel;
    <span class="keywordflow">if</span> (NULL == pScriptable)
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Failed trying to load smart contract from string:\n\n%s\n\n&quot;</span>,
                       __FUNCTION__, strContract.Get());
    }
    <span class="keywordflow">else</span>
    {
        theContractAngel.<a class="code" href="class_o_t_cleanup.html#a00a399db45f730439d2263d4429d00c1">SetCleanupTarget</a>(*pScriptable);  <span class="comment">// Auto-cleanup.</span>
        <span class="comment">// -----------------------------------------------------</span>
        <a class="code" href="class_o_t_party.html">OTParty</a> * pParty = pScriptable-&gt;<a class="code" href="class_o_t_scriptable.html#acd0f8e884ed00f1d082fa498323d8894">GetParty</a>(PARTY_NAME);
        <span class="comment">// -----------------------------------------------------</span>
        <span class="keywordflow">if</span> (NULL == pParty)
        {
            <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Smart contract loaded up, but failed to retrieve the party with name: %s\n&quot;</span>,
                           __FUNCTION__, PARTY_NAME.c_str());
        }
        <span class="keywordflow">else</span> <span class="comment">// We found the party...</span>
        {
            <span class="keyword">const</span> int32_t nTempIndex   = <span class="keyword">static_cast&lt;</span><span class="keyword">const </span>int32_t<span class="keyword">&gt;</span>(nIndex);
            <a class="code" href="class_o_t_agent.html">OTAgent</a> * pAgent = pParty-&gt;<a class="code" href="class_o_t_party.html#aa3e7fa9717af688b00e1b0b0983fd891">GetAgentByIndex</a>(nTempIndex);

            <span class="keywordflow">if</span> (NULL == pAgent)
            {
                <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Smart contract loaded up, and party found, but failed to retrieve the agent at index: %d\n&quot;</span>,
                               __FUNCTION__, nTempIndex);
            }
            <span class="keywordflow">else</span> <span class="comment">// We found the agent...</span>
            {
                <span class="keyword">const</span> std::string str_name(pAgent-&gt;<a class="code" href="class_o_t_agent.html#a123d27f05e46977ecdbe0b83de3c119d">GetName</a>().<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());  <span class="comment">// Success.</span>
                <span class="keywordflow">return</span> str_name;
            }
        }
    }
    <span class="comment">// -----------------------------------------------------------</span>
    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="af9e9ccab4b7249ed60d07690a8765a59"></a><!-- doxytag: member="OTAPI_Exec::Party_GetID" ref="af9e9ccab4b7249ed60d07690a8765a59" args="(const std::string &amp;THE_CONTRACT, const std::string &amp;PARTY_NAME)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#af9e9ccab4b7249ed60d07690a8765a59">OTAPI_Exec::Party_GetID</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_CONTRACT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>PARTY_NAME</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l06652">6652</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (THE_CONTRACT.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_CONTRACT&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (PARTY_NAME.empty())   { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;PARTY_NAME&quot;</span>   ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_string.html">OTString</a> strContract(THE_CONTRACT);
    <a class="code" href="class_o_t_scriptable.html">OTScriptable</a> * pScriptable = <a class="code" href="class_o_t_scriptable.html#a4a89cbc1abd2bac0e5dec64da3452b7a">OTScriptable::InstantiateScriptable</a>(strContract);
    <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTScriptable&gt;</a> theContractAngel;
    <span class="keywordflow">if</span> (NULL == pScriptable)
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Failed trying to load smart contract from string:\n\n%s\n\n&quot;</span>,
                       __FUNCTION__, strContract.Get());
    }
    <span class="keywordflow">else</span>
    {
        theContractAngel.<a class="code" href="class_o_t_cleanup.html#a00a399db45f730439d2263d4429d00c1">SetCleanupTarget</a>(*pScriptable);  <span class="comment">// Auto-cleanup.</span>
        <span class="comment">// -----------------------------------------------------</span>
        <a class="code" href="class_o_t_party.html">OTParty</a> * pParty = pScriptable-&gt;<a class="code" href="class_o_t_scriptable.html#acd0f8e884ed00f1d082fa498323d8894">GetParty</a>(PARTY_NAME);
        <span class="comment">// -----------------------------------------------------</span>
        <span class="keywordflow">if</span> (NULL == pParty)
        {
            <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Smart contract loaded up, but failed to find a party with the name: %s\n&quot;</span>,
                           __FUNCTION__, PARTY_NAME.c_str());
        }
        <span class="keywordflow">else</span> <span class="comment">// We found the party...</span>
        {
            <span class="keywordflow">return</span> pParty-&gt;<a class="code" href="class_o_t_party.html#a4aa12384e93bd6c2f6d437cf8ca97dfa">GetPartyID</a>();
        }
    }
    <span class="comment">// -----------------------------------------------------------</span>
    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a7a7dbdb89197a47d1c62887b67d0054e"></a><!-- doxytag: member="OTAPI_Exec::payDividend" ref="a7a7dbdb89197a47d1c62887b67d0054e" args="(const std::string &amp;SERVER_ID, const std::string &amp;ISSUER_USER_ID, const std::string &amp;DIVIDEND_FROM_ACCT_ID, const std::string &amp;SHARES_ASSET_TYPE_ID, const std::string &amp;DIVIDEND_MEMO, const int64_t &amp;AMOUNT_PER_SHARE)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_a_p_i___exec.html#a7a7dbdb89197a47d1c62887b67d0054e">OTAPI_Exec::payDividend</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ISSUER_USER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>DIVIDEND_FROM_ACCT_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SHARES_ASSET_TYPE_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>DIVIDEND_MEMO</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int64_t &amp;&#160;</td>
          <td class="paramname"><em>AMOUNT_PER_SHARE</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>PAY DIVIDEND -- to shareholders. </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l13133">13133</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty())             { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>,     __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>            ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (ISSUER_USER_ID.empty())        { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>,     __FUNCTION__, <span class="stringliteral">&quot;ISSUER_USER_ID&quot;</span>       ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (DIVIDEND_FROM_ACCT_ID.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>,     __FUNCTION__, <span class="stringliteral">&quot;DIVIDEND_FROM_ACCT_ID&quot;</span>); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (SHARES_ASSET_TYPE_ID.empty())  { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>,     __FUNCTION__, <span class="stringliteral">&quot;SHARES_ASSET_TYPE_ID&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
<span class="comment">//  if (DIVIDEND_MEMO.empty())         { OTLog::vError(&quot;%s: Null: %s passed in!\n&quot;,     __FUNCTION__, &quot;DIVIDEND_MEMO&quot;        ); OT_FAIL; }</span>
    <span class="keywordflow">if</span> (0 &gt; AMOUNT_PER_SHARE)          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Negative: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;AMOUNT_PER_SHARE&quot;</span>     ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>    theServerID           (SERVER_ID),
                    theIssuerUserID       (ISSUER_USER_ID),
                    theDividendFromAcctID (DIVIDEND_FROM_ACCT_ID),
                    theSharesAssetTypeID  (SHARES_ASSET_TYPE_ID);

    <a class="code" href="class_o_t_string.html">OTString</a>  strMemo  (DIVIDEND_MEMO);
    int64_t   lAmount = AMOUNT_PER_SHARE;

    <span class="keywordflow">return</span> <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a867538fd96d36fc772d94cffef2e8d47">payDividend</a>(theServerID,
        theIssuerUserID,
        theDividendFromAcctID,
        theSharesAssetTypeID,
        strMemo,
        static_cast&lt;int64_t&gt;(lAmount));
}
</pre></div>
</div>
</div>
<a class="anchor" id="a2feab2347517775be8be3edc4696d603"></a><!-- doxytag: member="OTAPI_Exec::PeekMemlogBack" ref="a2feab2347517775be8be3edc4696d603" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a2feab2347517775be8be3edc4696d603">OTAPI_Exec::PeekMemlogBack</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l00415">415</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> <a class="code" href="class_o_t_a_p_i___exec.html#a2feab2347517775be8be3edc4696d603">OTLog::PeekMemlogBack</a>().Get();
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad6bbb4e5c846af672961cf6d9598be30"></a><!-- doxytag: member="OTAPI_Exec::PeekMemlogFront" ref="ad6bbb4e5c846af672961cf6d9598be30" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#ad6bbb4e5c846af672961cf6d9598be30">OTAPI_Exec::PeekMemlogFront</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l00409">409</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> <a class="code" href="class_o_t_a_p_i___exec.html#ad6bbb4e5c846af672961cf6d9598be30">OTLog::PeekMemlogFront</a>().Get();
}
</pre></div>
</div>
</div>
<a class="anchor" id="a01e724dcf58de268c61cb2699349a1f1"></a><!-- doxytag: member="OTAPI_Exec::Pending_GetNote" ref="a01e724dcf58de268c61cb2699349a1f1" args="(const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ACCOUNT_ID, const std::string &amp;THE_TRANSACTION)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a01e724dcf58de268c61cb2699349a1f1">OTAPI_Exec::Pending_GetNote</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ACCOUNT_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_TRANSACTION</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>--------------------------------------------------</p>
<p>PENDING TRANSFER (various functions)</p>
<p>When someone has sent you a PENDING TRANSFER (a form of transaction that will be sitting in your inbox waiting for you to accept/reject it) then, as you are reading the inbox, you can use these functions in order to get data from each pending transfer. That way your user can then decide whether to accept or reject it (see the ledger functions.) </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l10266">10266</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty())       { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>       ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID.empty())         { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>         ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (ACCOUNT_ID.empty())      { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;ACCOUNT_ID&quot;</span>      ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (THE_TRANSACTION.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_TRANSACTION&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theServerID(SERVER_ID), theUserID(USER_ID), theAccountID(ACCOUNT_ID);

    <a class="code" href="class_o_t_string.html">OTString</a> strTransaction(THE_TRANSACTION);
    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pNym = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#aa53f110b77dee2bc71b70906ca64fbbc">GetOrLoadPrivateNym</a>(theUserID, <span class="keyword">false</span>, __FUNCTION__); <span class="comment">// These copiously log, and ASSERT.</span>
    <span class="keywordflow">if</span> (NULL == pNym) <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_transaction.html">OTTransaction</a> theTransaction(theUserID, theAccountID, theServerID);

    <span class="keywordflow">if</span> (<span class="keyword">false</span> == theTransaction.LoadContractFromString(strTransaction))
    {
        <a class="code" href="class_o_t_string.html">OTString</a> strAcctID(theAccountID);
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error loading transaction from string. Acct ID: %s\n&quot;</span>, __FUNCTION__, strAcctID.Get());
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    }
    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_transaction.html">OTTransaction</a> * pTransaction = NULL;
    <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTTransaction&gt;</a> theTransAngel;

    <span class="keywordflow">if</span> (theTransaction.IsAbbreviated())
    {
        int64_t lBoxType = 0;

             <span class="keywordflow">if</span> (theTransaction.Contains(<span class="stringliteral">&quot;nymboxRecord&quot;</span>))       lBoxType = static_cast&lt;int64_t&gt;(<a class="code" href="class_o_t_ledger.html#ac03f2514d0c6ae00147c5d53bf19591aae7427339a1b7566f46fb6d60c66bbfae">OTLedger::nymbox</a>);
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (theTransaction.Contains(<span class="stringliteral">&quot;inboxRecord&quot;</span>))        lBoxType = static_cast&lt;int64_t&gt;(<a class="code" href="class_o_t_ledger.html#ac03f2514d0c6ae00147c5d53bf19591aa7bd594902e6c775ef4f356897fb36006">OTLedger::inbox</a>);
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (theTransaction.Contains(<span class="stringliteral">&quot;outboxRecord&quot;</span>))       lBoxType = static_cast&lt;int64_t&gt;(<a class="code" href="class_o_t_ledger.html#ac03f2514d0c6ae00147c5d53bf19591aaa0150c89048bba5eedf6a0919603d4e4">OTLedger::outbox</a>);
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (theTransaction.Contains(<span class="stringliteral">&quot;paymentInboxRecord&quot;</span>)) lBoxType = static_cast&lt;int64_t&gt;(<a class="code" href="class_o_t_ledger.html#ac03f2514d0c6ae00147c5d53bf19591aaf8b0cad55e051e014a4f9ebee8dd2984">OTLedger::paymentInbox</a>);
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (theTransaction.Contains(<span class="stringliteral">&quot;recordBoxRecord&quot;</span>))    lBoxType = static_cast&lt;int64_t&gt;(<a class="code" href="class_o_t_ledger.html#ac03f2514d0c6ae00147c5d53bf19591aae650dd1b5a89523bace1c54c06897922">OTLedger::recordBox</a>);
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (theTransaction.Contains(<span class="stringliteral">&quot;expiredBoxRecord&quot;</span>))   lBoxType = static_cast&lt;int64_t&gt;(<a class="code" href="class_o_t_ledger.html#ac03f2514d0c6ae00147c5d53bf19591aa500bad2900b83847f7cc16b8cc26817a">OTLedger::expiredBox</a>);
        <span class="keywordflow">else</span>
        {
            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s Error loading from abbreviated transaction: unknown ledger type. \n&quot;</span>, __FUNCTION__);
            <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
        }
        <span class="comment">// --------------</span>
        pTransaction = <a class="code" href="class_o_t_transaction.html#ae97bc794fe820f4f2e864c29c42df8eb">OTTransaction::LoadBoxReceipt</a>(theTransaction, static_cast&lt;int64_t&gt;(lBoxType));
        <span class="keywordflow">if</span> (NULL == pTransaction)
        {
            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error loading from abbreviated transaction: failed loading box receipt. \n&quot;</span>, __FUNCTION__);
            <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
        }
        <span class="comment">// ----------------</span>
        theTransAngel.<a class="code" href="class_o_t_cleanup.html#aac0b26193b0a59dbbf491a4e417af833">SetCleanupTargetPointer</a>(pTransaction);
    }
    <span class="keywordflow">else</span>
        pTransaction = &amp;theTransaction;
    <span class="comment">// -----------------------------------------------------</span>
    <span class="keywordflow">if</span> (<a class="code" href="class_o_t_transaction.html#af6b54636f1000e09f19d1c7a7886e1f8addbed2a5d0af9bf58ff0694f587b4e08">OTTransaction::pending</a> != pTransaction-&gt;<a class="code" href="class_o_t_transaction.html#ac964dfd1e704c02358a6641f030ead38">GetType</a>())
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: wrong transaction type: %s. (Expected \&quot;pending\&quot;.)\n&quot;</span>, __FUNCTION__, pTransaction-&gt;<a class="code" href="class_o_t_transaction.html#a5baeb1d30c71f3a37565cb2e91b05447">GetTypeString</a>());
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    }
    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_string.html">OTString</a> strReference;
    pTransaction-&gt;<a class="code" href="class_o_t_transaction_type.html#a88d404b8cebd7da409e551396cc45ee7">GetReferenceString</a>(strReference);

    <span class="keywordflow">if</span> (!strReference.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>())
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: No reference string found on transaction.\n&quot;</span>, __FUNCTION__);
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    }
    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_item.html">OTItem</a> * pItem = <a class="code" href="class_o_t_item.html#af742fa1f4ba90d4807bda01a758d2d6a">OTItem::CreateItemFromString</a>(strReference, theServerID, pTransaction-&gt;<a class="code" href="class_o_t_transaction_type.html#a08578043dac9d53f7a5a879b02785d46">GetReferenceToNum</a>());
    <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTItem&gt;</a> theAngel(pItem);

    <span class="keywordflow">if</span> (NULL == pItem)
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Failed loading transaction item from string.\n&quot;</span>, __FUNCTION__);
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    }

    <span class="comment">// pItem will be automatically cleaned up when it goes out of scope.</span>
    <span class="comment">// -----------------------------------------------------</span>
    <span class="keywordflow">if</span> ((<a class="code" href="class_o_t_item.html#a03db091faaab100aadc455f4ebe2c5d1a4b8c3e5db0f93a82b46a3d7dda75a835">OTItem::transfer</a>   != pItem-&gt;<a class="code" href="class_o_t_item.html#a2f4535b271f23b7c2b6b1dbabf279ffe">GetType</a>()) ||
        (<a class="code" href="class_o_t_item.html#a61e86f5b6c64a518664123907235f376a16fa1b0df4dbad1367dbd0f6dbac9572">OTItem::request</a>    != pItem-&gt;<a class="code" href="class_o_t_item.html#abadbfe245f0dbc8a035d8d6930dd9dfc">GetStatus</a>()))
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Wrong item type or status attached as reference on transaction.\n&quot;</span>, __FUNCTION__);
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    }
    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_string.html">OTString</a> strOutput;

    pItem-&gt;<a class="code" href="class_o_t_item.html#aba1bd99f0402a8918f7847c7a4901206">GetNote</a>(strOutput);
    <span class="comment">// -----------------------------------------------------</span>
    <span class="comment">// Didn&#39;t find one.</span>
    <span class="keywordflow">if</span> (!strOutput.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>())
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;

    <span class="comment">// We found a note -- let&#39;s return it!</span>
    <span class="comment">//</span>
    std::string pBuf = strOutput.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();

    <span class="keywordflow">return</span> pBuf;
}
</pre></div>
</div>
</div>
<a class="anchor" id="afdef7ce04ff0ddc2f67f626739ebaae6"></a><!-- doxytag: member="OTAPI_Exec::PopMemlogBack" ref="afdef7ce04ff0ddc2f67f626739ebaae6" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_a_p_i___exec.html#afdef7ce04ff0ddc2f67f626739ebaae6">OTAPI_Exec::PopMemlogBack</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l00427">427</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> <a class="code" href="class_o_t_a_p_i___exec.html#afdef7ce04ff0ddc2f67f626739ebaae6">OTLog::PopMemlogBack</a>();
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab78238ec98eb77bc76fb018835302037"></a><!-- doxytag: member="OTAPI_Exec::PopMemlogFront" ref="ab78238ec98eb77bc76fb018835302037" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_a_p_i___exec.html#ab78238ec98eb77bc76fb018835302037">OTAPI_Exec::PopMemlogFront</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l00421">421</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> <a class="code" href="class_o_t_a_p_i___exec.html#ab78238ec98eb77bc76fb018835302037">OTLog::PopMemlogFront</a>();
}
</pre></div>
</div>
</div>
<a class="anchor" id="a65175755753f15ff01e91312f349f5ea"></a><!-- doxytag: member="OTAPI_Exec::PopMessageBuffer" ref="a65175755753f15ff01e91312f349f5ea" args="(const int64_t &amp;REQUEST_NUMBER, const std::string &amp;SERVER_ID, const std::string &amp;USER_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a65175755753f15ff01e91312f349f5ea">OTAPI_Exec::PopMessageBuffer</a> </td>
          <td>(</td>
          <td class="paramtype">const int64_t &amp;&#160;</td>
          <td class="paramname"><em>REQUEST_NUMBER</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>----------------------------------------------------------- POP MESSAGE BUFFER</p>
<p>If there are any replies from the server, they are stored in the message buffer. This function will return those messages (and remove them from the list) one-by-one, newest first.</p>
<p>Returns the message as a string.</p>
<p>Update: added arguments for: ServerID AND NymID AND request number NOTE: Any messages, when popping, which have the CORRECT serverID and the CORRECT NymID, but the wrong Request number, will be discarded.</p>
<p>(Why? Because the client using the OT API will have already treated that message as "dropped" by now, if it's already on to the next one, and the protocol is designed to move forward properly based specifically on this function returning the one EXPECTED... outgoing messages flush the incoming buffer anyway, so the client will have assumed the wrong reply was flushed by now anyway.)</p>
<p>However, if the Server ID and the User ID are wrong, this just means that some other code is still expecting that reply, and hasn't even popped yet! Therefore, we do NOT want to discard THOSE replies, but put them back if necessary -- only discarding the ones where the IDs match. </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l13496">13496</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (0 &gt; REQUEST_NUMBER)         { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Negative: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;REQUEST_NUMBER&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (SERVER_ID.empty())          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID.empty())            { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>            ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="comment">// ------------------------------------------------</span>
    <span class="keyword">const</span> int64_t          lRequestNum = REQUEST_NUMBER;
    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>  theServerID(SERVER_ID),
        theUserID(USER_ID);
    <span class="comment">// ------------------------------------------------</span>
    <a class="code" href="class_o_t_message.html">OTMessage</a> * pMsg = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a04aee43cd2310d2da162f14c771e26cb">PopMessageBuffer</a>(static_cast&lt;int64_t&gt;(lRequestNum), theServerID, theUserID); <span class="comment">// caller responsible to delete.</span>
    <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTMessage&gt;</a> theAngel(pMsg);  <span class="comment">// Just making sure it gets cleaned up.</span>

    <span class="keywordflow">if</span> (NULL == pMsg) <span class="comment">// The buffer was empty.</span>
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s:  Reply not found, sorry.\n&quot;</span>, __FUNCTION__);
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    }

    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strOutput(*pMsg);

    std::string pBuf = strOutput.Get();
    <span class="keywordflow">return</span> pBuf;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab0f854984189e4ed4c309cff726f9ab4"></a><!-- doxytag: member="OTAPI_Exec::processInbox" ref="ab0f854984189e4ed4c309cff726f9ab4" args="(const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ACCT_ID, const std::string &amp;ACCT_LEDGER)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_a_p_i___exec.html#ab0f854984189e4ed4c309cff726f9ab4">OTAPI_Exec::processInbox</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ACCT_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ACCT_LEDGER</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>PROCESS INBOX</p>
<p>Assuming I have gone through the various transactions in my inbox, and chosen some that I wish to accept or reject, this message asks the server to accept or reject those transactions.</p>
<p>You must include a copy of the ledger, which contains your accept or reject requests for the various inbox items. In other words, you will need to use some other function call first to set up that ledger with the various requests (accept transfer, accept receipt, etc) before you can then use THIS function call to actually send those requests to the server. (See all the Ledger functions.)</p>
<p>(Try the 'i' command in the test client, if you want to empty out the inbox and automatically accept all of the transactions within.) </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l13049">13049</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty())          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID.empty())            { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>            ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (ACCT_ID.empty())            { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;ACCT_ID&quot;</span>            ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (ACCT_LEDGER.empty())        { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;ACCT_LEDGER&quot;</span>        ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

<span class="comment">//  OTLog::vOutput(0, &quot;%s: \n&quot;</span>
<span class="comment">//      &quot;SERVER_ID: %s \n&quot;</span>
<span class="comment">//      &quot;USER_ID: %s \n&quot;</span>
<span class="comment">//      &quot;ACCT_ID: %s \n&quot;</span>
<span class="comment">//      &quot;ACCT_LEDGER:\n%s\n\n&quot;,</span>
<span class="comment">//      __FUNCTION__, SERVER_ID.c_str(), USER_ID.c_str(), ACCT_ID.c_str(), ACCT_LEDGER.c_str());</span>

    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>    theServerID(SERVER_ID), theUserID(USER_ID), theAcctID(ACCT_ID);
    <a class="code" href="class_o_t_string.html">OTString</a>        strLedger(ACCT_LEDGER);

<span class="comment">//  OTString temp1(SERVER_ID), temp2(USER_ID), temp3(ACCT_ID), temp4(ACCT_LEDGER);</span>
<span class="comment">//  OTLog::vOutput(0,  &quot;%s: \n&quot;</span>
<span class="comment">//      &quot;\n\nSERVER_ID: %s \n&quot;</span>
<span class="comment">//      &quot;USER_ID: %s \n&quot;</span>
<span class="comment">//      &quot;ACCT_ID: %s \n&quot;</span>
<span class="comment">//      &quot;ACCT_LEDGER:\n%s\n\n&quot;,</span>
<span class="comment">//      __FUNCTION__, temp1.Get(), temp2.Get(), temp3.Get(), temp4.Get());</span>

    <span class="keywordflow">return</span> <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a937dc63294d4d989c0f691b6f12287df">processInbox</a>(theServerID, theUserID, theAcctID, strLedger);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a05803277a289a947cb936eb7dd3626d8"></a><!-- doxytag: member="OTAPI_Exec::processNymbox" ref="a05803277a289a947cb936eb7dd3626d8" args="(const std::string &amp;SERVER_ID, const std::string &amp;USER_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_a_p_i___exec.html#a05803277a289a947cb936eb7dd3626d8">OTAPI_Exec::processNymbox</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>I use this automatically to save the API developers the hassle (for now) added here for completeness. UPDATE: It was a mistake for me to automatically call this, which can mess up the client's expectation of which messages are being sent/received. It was causing network problems. Now clients NEED to call this themselves, after getting the Nymbox. I can't call it for them anymore.</p>
<p>Returns: -1 if error. 0 if Nymbox is empty. 1 or more: Count of items in Nymbox before processing. </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l13087">13087</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty())          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID.empty())            { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>            ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theServerID(SERVER_ID), theUserID(USER_ID);

    <span class="keywordflow">return</span> <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#aafe1988e1f3029dc633666816ccee743">processNymbox</a>(theServerID, theUserID);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a40f2d69da9c58ffe07517e2b5f22f125"></a><!-- doxytag: member="OTAPI_Exec::ProposePaymentPlan" ref="a40f2d69da9c58ffe07517e2b5f22f125" args="(const std::string &amp;SERVER_ID, const time64_t &amp;VALID_FROM, const time64_t &amp;VALID_TO, const std::string &amp;SENDER_ACCT_ID, const std::string &amp;SENDER_USER_ID, const std::string &amp;PLAN_CONSIDERATION, const std::string &amp;RECIPIENT_ACCT_ID, const std::string &amp;RECIPIENT_USER_ID, const int64_t &amp;INITIAL_PAYMENT_AMOUNT, const time64_t &amp;INITIAL_PAYMENT_DELAY, const int64_t &amp;PAYMENT_PLAN_AMOUNT, const time64_t &amp;PAYMENT_PLAN_DELAY, const time64_t &amp;PAYMENT_PLAN_PERIOD, const time64_t &amp;PAYMENT_PLAN_LENGTH, const int32_t &amp;PAYMENT_PLAN_MAX_PAYMENTS)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a40f2d69da9c58ffe07517e2b5f22f125">OTAPI_Exec::ProposePaymentPlan</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="_o_t_common_8hpp.html#ad28ff0a3eda18840f6bda5872819167f">time64_t</a> &amp;&#160;</td>
          <td class="paramname"><em>VALID_FROM</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="_o_t_common_8hpp.html#ad28ff0a3eda18840f6bda5872819167f">time64_t</a> &amp;&#160;</td>
          <td class="paramname"><em>VALID_TO</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SENDER_ACCT_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SENDER_USER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>PLAN_CONSIDERATION</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>RECIPIENT_ACCT_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>RECIPIENT_USER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int64_t &amp;&#160;</td>
          <td class="paramname"><em>INITIAL_PAYMENT_AMOUNT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="_o_t_common_8hpp.html#ad28ff0a3eda18840f6bda5872819167f">time64_t</a> &amp;&#160;</td>
          <td class="paramname"><em>INITIAL_PAYMENT_DELAY</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int64_t &amp;&#160;</td>
          <td class="paramname"><em>PAYMENT_PLAN_AMOUNT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="_o_t_common_8hpp.html#ad28ff0a3eda18840f6bda5872819167f">time64_t</a> &amp;&#160;</td>
          <td class="paramname"><em>PAYMENT_PLAN_DELAY</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="_o_t_common_8hpp.html#ad28ff0a3eda18840f6bda5872819167f">time64_t</a> &amp;&#160;</td>
          <td class="paramname"><em>PAYMENT_PLAN_PERIOD</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="_o_t_common_8hpp.html#ad28ff0a3eda18840f6bda5872819167f">time64_t</a> &amp;&#160;</td>
          <td class="paramname"><em>PAYMENT_PLAN_LENGTH</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int32_t &amp;&#160;</td>
          <td class="paramname"><em>PAYMENT_PLAN_MAX_PAYMENTS</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>PROPOSE PAYMENT PLAN --- Returns the payment plan in string form.</p>
<p>(Called by Merchant.)</p>
<p>PARAMETER NOTES: -- Payment Plan Delay, and Payment Plan Period, both default to 30 days (if you pass 0.)</p>
<p>-- Payment Plan Length, and Payment Plan Max Payments, both default to 0, which means no maximum length and no maximum number of payments.</p>
<p>----------------------------------------------------------------- FYI, the payment plan creation process (finally) is:</p>
<p>1) Payment plan is written, and signed, by the recipient. (This function: ProposePaymentPlan) 2) He sends it to the sender, who signs it and submits it. (ConfirmPaymentPlan and depositPaymentPlan) 3) The server loads the recipient nym to verify the transaction number. The sender also had to burn a transaction number (to submit it) so now, both have verified trns::s in this way.</p>
<p>----------------------------------------------------------------------------------------</p>
<p>FYI, here are all the OT library calls that are performed by this single API call:</p>
<p><a class="el" href="class_o_t_payment_plan.html">OTPaymentPlan</a> * pPlan = new <a class="el" href="class_o_t_payment_plan.html">OTPaymentPlan</a>(pAccount-&gt;GetRealServerID(), pAccount-&gt;GetAssetTypeID(), pAccount-&gt;GetRealAccountID(), pAccount-&gt;GetUserID(), RECIPIENT_ACCT_ID, RECIPIENT_USER_ID);</p>
<p>---------------------------------------------------------------------------------------- From <a class="el" href="class_o_t_agreement.html">OTAgreement</a>: (This must be called first, before the other two methods below can be called.)</p>
<p>bool <a class="el" href="class_o_t_agreement.html#ac02afd651c21e1df34c97061c30706fe">OTAgreement::SetProposal</a>( const <a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp; MERCHANT_NYM, const <a class="el" href="class_o_t_string.html">OTString</a> &amp; strConsideration, const time64_t &amp; VALID_FROM=0, const time64_t &amp; VALID_TO=0);</p>
<p>---------------------------------------------------------------------------------------- (Optional initial payment): bool <a class="el" href="class_o_t_payment_plan.html#ae51fed6db87911877df2324e231da710">OTPaymentPlan::SetInitialPayment</a>(const int64_t &amp; lAmount, time64_t tTimeUntilInitialPayment=0); // default: now. ----------------------------------------------------------------------------------------</p>
<p>These two (above and below) can be called independent of each other. You can have an initial payment, AND/OR a payment plan.</p>
<p>---------------------------------------------------------------------------------------- (Optional regular payments): bool <a class="el" href="class_o_t_payment_plan.html#a14669877c3f817148180d2556d63e839">OTPaymentPlan::SetPaymentPlan</a>(const int64_t &amp; lPaymentAmount, time64_t tTimeUntilPlanStart =OT_TIME_MONTH_IN_SECONDS, // Default: 1st payment in 30 days time64_t tBetweenPayments =OT_TIME_MONTH_IN_SECONDS, // Default: 30 days. time64_t tPlanLength=0, int32_t nMaxPayments=0); ---------------------------------------------------------------------------------------- </p>

<p>Reimplemented in <a class="el" href="class_mock___o_t_a_p_i___exec.html#a096849e912e546964d2c7944b08d5b3b">Mock_OTAPI_Exec</a>.</p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l04828">4828</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty())              { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>,     __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>                 ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (<a class="code" href="_o_t_common_8hpp.html#af4ca9fa2c7c290d647dd18de0a9ac25f">OT_TIME_ZERO</a> &gt; VALID_FROM)      { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Negative: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;VALID_FROM&quot;</span>); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (<a class="code" href="_o_t_common_8hpp.html#af4ca9fa2c7c290d647dd18de0a9ac25f">OT_TIME_ZERO</a> &gt; VALID_TO)        { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Negative: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;VALID_TO&quot;</span>); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (SENDER_ACCT_ID.empty())         { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>,     __FUNCTION__, <span class="stringliteral">&quot;SENDER_ACCT_ID&quot;</span>            ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (SENDER_USER_ID.empty())         { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>,     __FUNCTION__, <span class="stringliteral">&quot;SENDER_USER_ID&quot;</span>            ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (PLAN_CONSIDERATION.empty())     { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>,     __FUNCTION__, <span class="stringliteral">&quot;PLAN_CONSIDERATION&quot;</span>        ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (RECIPIENT_ACCT_ID.empty())      { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>,     __FUNCTION__, <span class="stringliteral">&quot;RECIPIENT_ACCT_ID&quot;</span>         ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (RECIPIENT_USER_ID.empty())      { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>,     __FUNCTION__, <span class="stringliteral">&quot;RECIPIENT_USER_ID&quot;</span>         ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (0 &gt; INITIAL_PAYMENT_AMOUNT)     { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Negative: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;INITIAL_PAYMENT_AMOUNT&quot;</span>    ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (<a class="code" href="_o_t_common_8hpp.html#af4ca9fa2c7c290d647dd18de0a9ac25f">OT_TIME_ZERO</a> &gt; INITIAL_PAYMENT_DELAY)       { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Negative: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;INITIAL_PAYMENT_DELAY&quot;</span>); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (0 &gt; PAYMENT_PLAN_AMOUNT)        { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Negative: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;PAYMENT_PLAN_AMOUNT&quot;</span>       ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (<a class="code" href="_o_t_common_8hpp.html#af4ca9fa2c7c290d647dd18de0a9ac25f">OT_TIME_ZERO</a> &gt; PAYMENT_PLAN_DELAY)          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Negative: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;PAYMENT_PLAN_DELAY&quot;</span>); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (<a class="code" href="_o_t_common_8hpp.html#af4ca9fa2c7c290d647dd18de0a9ac25f">OT_TIME_ZERO</a> &gt; PAYMENT_PLAN_PERIOD)     { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Negative: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;PAYMENT_PLAN_PERIOD&quot;</span>); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (<a class="code" href="_o_t_common_8hpp.html#af4ca9fa2c7c290d647dd18de0a9ac25f">OT_TIME_ZERO</a> &gt; PAYMENT_PLAN_LENGTH)     { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Negative: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;PAYMENT_PLAN_LENGTH&quot;</span>); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (0 &gt; PAYMENT_PLAN_MAX_PAYMENTS)  { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Negative: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;PAYMENT_PLAN_MAX_PAYMENTS&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// ---------------------------------------</span>
    <a class="code" href="class_o_t_payment_plan.html">OTPaymentPlan</a> * pPlan(<a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t_a_p_i___exec.html#a40f2d69da9c58ffe07517e2b5f22f125">ProposePaymentPlan</a>(
        <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>(SERVER_ID),
        <span class="comment">// ----------------------------------------</span>
        VALID_FROM,     <span class="comment">// Default (0) == NOW</span>
        VALID_TO,       <span class="comment">// Default (0) == no expiry / cancel anytime</span>
        <span class="comment">// ----------------------------------------</span>
        <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>(SENDER_ACCT_ID),
        <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>(SENDER_USER_ID),
        <span class="comment">// ----------------------------------------</span>
        PLAN_CONSIDERATION.empty() ? <span class="stringliteral">&quot;(Consideration for the agreement between the parties is meant to be recorded here.)&quot;</span> : PLAN_CONSIDERATION, <span class="comment">// Like a memo.</span>
        <span class="comment">// ----------------------------------------</span>
        <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>(RECIPIENT_ACCT_ID),
        <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>(RECIPIENT_USER_ID),
        <span class="comment">// ----------------------------------------</span>
        <span class="keyword">static_cast&lt;</span>int64_t<span class="keyword">&gt;</span>(INITIAL_PAYMENT_AMOUNT),
        INITIAL_PAYMENT_DELAY,
        <span class="comment">// ----------------------------------------</span>
        static_cast&lt;int64_t&gt;(PAYMENT_PLAN_AMOUNT),
        PAYMENT_PLAN_DELAY,
        PAYMENT_PLAN_PERIOD,
        <span class="comment">// ----------------------------------------</span>
        PAYMENT_PLAN_LENGTH,
        <span class="keyword">static_cast&lt;</span>int32_t<span class="keyword">&gt;</span>(PAYMENT_PLAN_MAX_PAYMENTS)
        ));
    <span class="comment">// ---------------------------------------</span>
    <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTPaymentPlan&gt;</a> theAngel(pPlan); <span class="comment">// Handles cleanup. (If necessary.)</span>
    <span class="keywordflow">if</span> (NULL == pPlan)
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: failed in OTAPI_Exec::ProposePaymentPlan.\n&quot;</span>,__FUNCTION__);
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    }
    <span class="comment">// At this point, I know pPlan is good (and will be cleaned up automatically.)</span>
    <span class="comment">// ---------------------------------------</span>
    <a class="code" href="class_o_t_string.html">OTString</a> strOutput(*pPlan); <span class="comment">// Extract the payment plan to string form.</span>
    <span class="comment">// ---------------------------------------</span>
    std::string pBuf = strOutput.Get();
    <span class="keywordflow">return</span> pBuf;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a34a956fd19fad82a197806fc87834709"></a><!-- doxytag: member="OTAPI_Exec::Purse_Count" ref="a34a956fd19fad82a197806fc87834709" args="(const std::string &amp;SERVER_ID, const std::string &amp;ASSET_TYPE_ID, const std::string &amp;THE_PURSE)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_a_p_i___exec.html#a34a956fd19fad82a197806fc87834709">OTAPI_Exec::Purse_Count</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ASSET_TYPE_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_PURSE</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>returns a count of the number of cash tokens inside this purse. </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l11184">11184</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty())          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (ASSET_TYPE_ID.empty())      { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;ASSET_TYPE_ID&quot;</span>      ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (THE_PURSE.empty())          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_PURSE&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theServerID(SERVER_ID),
                    theAssetTypeID(ASSET_TYPE_ID);
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a>     strPurse(THE_PURSE);
    <span class="comment">// -------------------------------------------------------------</span>
    <a class="code" href="class_o_t_purse.html">OTPurse</a> thePurse(theServerID, theAssetTypeID);

    <span class="keywordflow">if</span> (strPurse.Exists() &amp;&amp; thePurse.LoadContractFromString(strPurse) &amp;&amp;
        <span class="comment">// --------------------------------------</span>
            (thePurse.GetServerID() == theServerID) &amp;&amp;
            (thePurse.GetAssetID()  == theAssetTypeID))
    {
        <span class="keywordflow">return</span> thePurse.Count();
    }

    <span class="keywordflow">return</span> <a class="code" href="_o_t_a_p_i_8cpp.html#a8a0b2a3e3d4461ba60ae320c17b09ab4">OT_ERROR</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a701509c4d9b817d3beca03bc1cbe6d99"></a><!-- doxytag: member="OTAPI_Exec::Purse_Empty" ref="a701509c4d9b817d3beca03bc1cbe6d99" args="(const std::string &amp;SERVER_ID, const std::string &amp;ASSET_TYPE_ID, const std::string &amp;SIGNER_ID, const std::string &amp;THE_PURSE)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a701509c4d9b817d3beca03bc1cbe6d99">OTAPI_Exec::Purse_Empty</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ASSET_TYPE_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SIGNER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_PURSE</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Makes an exact copy of a purse, except with no tokens inside. (Value of zero.) Useful when you need to create a temporary purse for moving tokens around, and you don't want some new symmetric/master key being generated for that purse as though it were really some new "other purse." For example, if you have a password-protected purse, you might want to pop all of the tokens off of it, and as you iterate, re-assign half of them to new ownership, push those onto a new purse owned by that new owner. But you only want to do this with half of the tokens... the other half of the tokens, you just want to push onto a temp purse (for the loop) that's owned by the original owner, so you can then save it back over the original in storage (since it contains "all the tokens that WEREN'T
deposited" or "all the tokens that WEREN'T exported" etc.</p>
<p>The point? If the "original owner" is a password-protected purse with a symmetric key, then you can't just generate some new "temp purse" without also generating a whole new KEY, which you DO NOT want to do. You also don't want to have to deal with re-assigning ownership back and forth between the two purses -- you just want to shove some tokens into one temporarily so you can finish your loop. You could take the original purse and make a copy of it, and then just pop all the tokens off of it one-by-one, but that is very cumbersome and expensive. But that'd be the only way to get a copy of the original purse with the SAME symmetric key, except empty, so you can use it as a temp purse. Therefore, to make that easier and solve that whole dilemma, I present: Purse_Empty. Purse_Empty takes a purse and returns an empty version of it (except if there's a symmetric/master key inside, those are preserved, so you can use it as a temp purse.)</p>
<p>This function is effectively the same thing as calling Pop until the purse is empty. Returns: the empty purse, or NULL if failure. </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l11491">11491</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_o_t_string.html">OTString</a> strOutput; <span class="comment">// for later.</span>

    <span class="keywordflow">if</span> (SERVER_ID.empty())          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (ASSET_TYPE_ID.empty())      { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;ASSET_TYPE_ID&quot;</span>      ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (SIGNER_ID.empty())          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SIGNER_ID&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (THE_PURSE.empty())          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_PURSE&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="comment">// -------------------------------------------------------------</span>
    std::string strFunc = __FUNCTION__; <span class="comment">//&quot;OTAPI_Exec::Purse_Empty&quot;;</span>
    <span class="comment">// -----------------------------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strReason(<span class="stringliteral">&quot;Creating an empty copy of a cash purse.&quot;</span>);
    <a class="code" href="class_o_t_password_data.html">OTPasswordData</a> thePWData(strReason);
    <span class="comment">// -----------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theServerID(SERVER_ID),
        theAssetTypeID(ASSET_TYPE_ID),
        theNymID(SIGNER_ID);
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a>     strPurse(THE_PURSE);
    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pNym = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#aa53f110b77dee2bc71b70906ca64fbbc">GetOrLoadPrivateNym</a>(theNymID, <span class="keyword">false</span>, strFunc.c_str(), &amp;thePWData); <span class="comment">// These copiously log, and ASSERT.</span>
    <span class="keywordflow">if</span> (NULL == pNym) <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    <span class="comment">// By this point, pNym is a good pointer, and is on the wallet. (No need to cleanup.)</span>
    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_purse.html">OTPurse</a> * pPurse = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#adc667ad801925aaddd138f0dd7d0770e">Purse_Empty</a>(theServerID, theAssetTypeID, strPurse, &amp;strReason);
    <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTPurse&gt;</a> thePurseAngel(pPurse);
    <span class="comment">// -----------------------------------------------------</span>
    <span class="keywordflow">if</span> (NULL != pPurse)
    {
        pPurse-&gt;<a class="code" href="class_o_t_contract.html#aae54340526fbd8eb8a18de27a4b97c83">ReleaseSignatures</a>();
        pPurse-&gt;<a class="code" href="class_o_t_contract.html#abd60037fe655ee8cae9a3ece5d1e2ea6">SignContract</a>(*pNym, &amp;thePWData);
        pPurse-&gt;<a class="code" href="class_o_t_contract.html#a363ae430d4fd9256ab8364dbafb95444">SaveContract</a>();

        pPurse-&gt;<a class="code" href="class_o_t_contract.html#a5fd00cded794a6f96ba80d8d4081d591">SaveContractRaw</a>(strOutput);
        std::string pBuf = strOutput.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();

        <span class="keywordflow">return</span> pBuf;
    }
    <span class="keywordflow">else</span>
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Failed emptying a cash purse.\n&quot;</span>, strFunc.c_str());

    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;

}
</pre></div>
</div>
</div>
<a class="anchor" id="a8be549e91a6befefc633125e2980b69e"></a><!-- doxytag: member="OTAPI_Exec::Purse_GetTotalValue" ref="a8be549e91a6befefc633125e2980b69e" args="(const std::string &amp;SERVER_ID, const std::string &amp;ASSET_TYPE_ID, const std::string &amp;THE_PURSE)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64_t <a class="el" href="class_o_t_a_p_i___exec.html#a8be549e91a6befefc633125e2980b69e">OTAPI_Exec::Purse_GetTotalValue</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ASSET_TYPE_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_PURSE</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get Purse Total Value (internally uses GetTotalValue().) </p>
<p>Returns the purported sum of all the tokens within. </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l11148">11148</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty())          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (ASSET_TYPE_ID.empty())      { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;ASSET_TYPE_ID&quot;</span>      ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (THE_PURSE.empty())          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_PURSE&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// -----------------------------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theServerID(SERVER_ID), theAssetTypeID(ASSET_TYPE_ID);
    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_string.html">OTString</a> strPurse(THE_PURSE);
    <a class="code" href="class_o_t_purse.html">OTPurse</a>  thePurse(theServerID, theAssetTypeID);

    <span class="keywordflow">if</span> (<span class="keyword">false</span> == thePurse.LoadContractFromString(strPurse))
    {
        <a class="code" href="class_o_t_string.html">OTString</a> strAssetTypeID(theAssetTypeID);
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error loading purse from string. Asset Type ID: %s\n&quot;</span>,
            __FUNCTION__, strAssetTypeID.Get());
        <span class="keywordflow">return</span> -1;
    }
    <span class="comment">// -----------------------------------------------------</span>
    int64_t lTotalValue = 0;

    <span class="keywordflow">if</span> (thePurse.GetTotalValue() &gt; 0)
        lTotalValue = thePurse.GetTotalValue();

    <span class="keywordflow">return</span> lTotalValue;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a301c584efb3af64dc0047ae09307543a"></a><!-- doxytag: member="OTAPI_Exec::Purse_HasPassword" ref="a301c584efb3af64dc0047ae09307543a" args="(const std::string &amp;SERVER_ID, const std::string &amp;THE_PURSE)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_a_p_i___exec.html#a301c584efb3af64dc0047ae09307543a">OTAPI_Exec::Purse_HasPassword</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_PURSE</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Some purses are encrypted to a specific Nym. Whereas other purses are encrypted to a passphrase. This function returns bool and lets you know, either way. </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l11215">11215</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty())          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (THE_PURSE.empty())          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_PURSE&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theServerID(SERVER_ID);
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a>     strPurse(THE_PURSE);
    <span class="comment">// -------------------------------------------------------------</span>
    <a class="code" href="class_o_t_purse.html">OTPurse</a> thePurse(theServerID);

    <span class="keywordflow">if</span> (strPurse.Exists() &amp;&amp; thePurse.LoadContractFromString(strPurse) &amp;&amp;
        <span class="comment">// --------------------------------------</span>
            (thePurse.GetServerID() == theServerID))
    {
        <span class="keywordflow">return</span> thePurse.IsPasswordProtected();
    }

    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a8c71857a2fbfc51e6c6dc571fe27054c"></a><!-- doxytag: member="OTAPI_Exec::Purse_Peek" ref="a8c71857a2fbfc51e6c6dc571fe27054c" args="(const std::string &amp;SERVER_ID, const std::string &amp;ASSET_TYPE_ID, const std::string &amp;OWNER_ID, const std::string &amp;THE_PURSE)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a8c71857a2fbfc51e6c6dc571fe27054c">OTAPI_Exec::Purse_Peek</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ASSET_TYPE_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>OWNER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_PURSE</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns the TOKEN on top of the stock (LEAVING it on top of the stack, but giving you a string copy of it.) </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l11343">11343</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_o_t_string.html">OTString</a> strOutput; <span class="comment">// for later.</span>

    <span class="keywordflow">if</span> (SERVER_ID.empty())          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (ASSET_TYPE_ID.empty())      { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;ASSET_TYPE_ID&quot;</span>      ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">//if (OWNER_ID.empty())         { OTLog::vError(&quot;%s: Null: %s passed in!\n&quot;, __FUNCTION__, &quot;OWNER_ID&quot;           ); OT_FAIL; }</span>
    <span class="keywordflow">if</span> (THE_PURSE.empty())          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_PURSE&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="comment">// -------------------------------------------------------------</span>
    std::string strFunc = __FUNCTION__; <span class="comment">//&quot;OTAPI_Exec::Purse_Peek&quot;;</span>
    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_password_data.html">OTPasswordData</a> thePWData(<span class="stringliteral">&quot;Peeking at cash purse contents.&quot;</span>);
    <span class="comment">// -----------------------------------</span>
    <span class="keyword">const</span> <span class="keywordtype">bool</span> &amp; bDoesOwnerIDExist = ((<span class="stringliteral">&quot;&quot;</span> != OWNER_ID) &amp;&amp; (<span class="charliteral">&#39;\0&#39;</span> != OWNER_ID[0])); <span class="comment">// If bDoesOwnerIDExist is not true, then the purse MUST be password-protected.</span>
    <span class="comment">// -----------------------------------</span>
    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>  theOwnerID;
    <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pNym = NULL;
    <span class="keywordflow">if</span> (bDoesOwnerIDExist)
    {
        <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strOwnerID(OWNER_ID);

        <span class="keywordflow">if</span> (strOwnerID.Exists())
        {
            theOwnerID.<a class="code" href="class_o_t_identifier.html#ae29aa1245d3831a207aabc9b8a493bfc">SetString</a>(strOwnerID);
            pNym = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#aa53f110b77dee2bc71b70906ca64fbbc">GetOrLoadPrivateNym</a>(theOwnerID, <span class="keyword">false</span>, strFunc.c_str(), &amp;thePWData); <span class="comment">// These copiously log, and ASSERT.</span>
        }
        <span class="keywordflow">if</span> (NULL == pNym) <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    }
    <span class="comment">// By this point, pNym is a good pointer, and is on the wallet. (No need to cleanup.)</span>
    <span class="comment">// -----------------------------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theServerID(SERVER_ID),
        theAssetTypeID(ASSET_TYPE_ID);
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a>     strPurse(THE_PURSE);
    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_token.html">OTToken</a> * pToken = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#ac4922a16395e2da553cf4f0bd0fdaf62">Purse_Peek</a>(theServerID, theAssetTypeID,
        strPurse,
        bDoesOwnerIDExist ? &amp;theOwnerID : NULL,
        NULL);
    <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTToken&gt;</a> theTokenAngel(pToken);
    <span class="comment">// -----------------------------------------------------</span>
    <span class="keywordflow">if</span> (NULL != pToken)
    {
        pToken-&gt;<a class="code" href="class_o_t_contract.html#a5fd00cded794a6f96ba80d8d4081d591">SaveContractRaw</a>(strOutput);

        std::string pBuf = strOutput.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();

        <span class="keywordflow">return</span> pBuf;
    }
    <span class="keywordflow">else</span>
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Failed peeking at a token on a cash purse.\n&quot;</span>, strFunc.c_str());

    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="acc9c33a32376d1d8ea0cd64920905966"></a><!-- doxytag: member="OTAPI_Exec::Purse_Pop" ref="acc9c33a32376d1d8ea0cd64920905966" args="(const std::string &amp;SERVER_ID, const std::string &amp;ASSET_TYPE_ID, const std::string &amp;OWNER_OR_SIGNER_ID, const std::string &amp;THE_PURSE)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#acc9c33a32376d1d8ea0cd64920905966">OTAPI_Exec::Purse_Pop</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ASSET_TYPE_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>OWNER_OR_SIGNER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_PURSE</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Removes the token from the top of the stock and DESTROYS IT, and RETURNS THE UPDATED PURSE (with the token now missing from it.) WARNING: Do not call this function unless you have PEEK()d FIRST!! Otherwise you will lose the token and get left "holding the bag". </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l11411">11411</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_o_t_string.html">OTString</a> strOutput; <span class="comment">// for later.</span>

    <span class="keywordflow">if</span> (SERVER_ID.empty())          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (ASSET_TYPE_ID.empty())      { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;ASSET_TYPE_ID&quot;</span>      ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (OWNER_OR_SIGNER_ID.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;OWNER_OR_SIGNER_ID&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (THE_PURSE.empty())          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_PURSE&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="comment">// -------------------------------------------------------------</span>
    std::string strFunc = __FUNCTION__; <span class="comment">//&quot;OTAPI_Exec::Purse_Pop&quot;;</span>
    <span class="comment">// -----------------------------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strReason(<span class="stringliteral">&quot;Popping a token off of a cash purse.&quot;</span>);
    <a class="code" href="class_o_t_password_data.html">OTPasswordData</a> thePWData(strReason);
    <span class="comment">// -----------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theServerID(SERVER_ID),
        theAssetTypeID(ASSET_TYPE_ID),
        theNymID(OWNER_OR_SIGNER_ID);
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a>     strPurse(THE_PURSE);
    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pNym = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#aa53f110b77dee2bc71b70906ca64fbbc">GetOrLoadPrivateNym</a>(theNymID, <span class="keyword">false</span>, strFunc.c_str(), &amp;thePWData); <span class="comment">// These copiously log, and ASSERT.</span>
    <span class="keywordflow">if</span> (NULL == pNym) <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    <span class="comment">// By this point, pNym is a good pointer, and is on the wallet. (No need to cleanup.)</span>
    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_purse.html">OTPurse</a> * pPurse = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a71b132b76b09ced31829d59348aa6a08">Purse_Pop</a>(theServerID, theAssetTypeID,
        strPurse,
        &amp;theNymID, <span class="comment">// Note: if the purse is password-protected, then this parameter is ignored.</span>
        &amp;strReason);
    <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTPurse&gt;</a> thePurseAngel(pPurse);
    <span class="comment">// -----------------------------------------------------</span>
    <span class="keywordflow">if</span> (NULL != pPurse)
    {
        pPurse-&gt;<a class="code" href="class_o_t_contract.html#aae54340526fbd8eb8a18de27a4b97c83">ReleaseSignatures</a>();
        pPurse-&gt;<a class="code" href="class_o_t_contract.html#abd60037fe655ee8cae9a3ece5d1e2ea6">SignContract</a>(*pNym, &amp;thePWData);
        pPurse-&gt;<a class="code" href="class_o_t_contract.html#a363ae430d4fd9256ab8364dbafb95444">SaveContract</a>();

        pPurse-&gt;<a class="code" href="class_o_t_contract.html#a5fd00cded794a6f96ba80d8d4081d591">SaveContractRaw</a>(strOutput);
        std::string pBuf = strOutput.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();

        <span class="keywordflow">return</span> pBuf;
    }
    <span class="keywordflow">else</span>
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Failed popping a token off of a cash purse.\n&quot;</span>, strFunc.c_str());

    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a84cb52e90c17386b9d829cc19b9ec7fe"></a><!-- doxytag: member="OTAPI_Exec::Purse_Push" ref="a84cb52e90c17386b9d829cc19b9ec7fe" args="(const std::string &amp;SERVER_ID, const std::string &amp;ASSET_TYPE_ID, const std::string &amp;SIGNER_ID, const std::string &amp;OWNER_ID, const std::string &amp;THE_PURSE, const std::string &amp;THE_TOKEN)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a84cb52e90c17386b9d829cc19b9ec7fe">OTAPI_Exec::Purse_Push</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ASSET_TYPE_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SIGNER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>OWNER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_PURSE</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_TOKEN</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Pushes a token onto the stack (of the purse.) Returns the updated purse (now including the token.) </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l11545">11545</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_o_t_string.html">OTString</a> strOutput; <span class="comment">// for later.</span>

    <span class="keywordflow">if</span> (SERVER_ID.empty())      { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>     ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (ASSET_TYPE_ID.empty())  { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;ASSET_TYPE_ID&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (SIGNER_ID.empty())      { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SIGNER_ID&quot;</span>     ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
<span class="comment">//  if (OWNER_ID.empty())       { OTLog::vError(&quot;%s: Null: %s passed in!\n&quot;, __FUNCTION__, &quot;OWNER_ID&quot;      ); OT_FAIL; }</span>
    <span class="keywordflow">if</span> (THE_PURSE.empty())      { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_PURSE&quot;</span>     ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (THE_TOKEN.empty())      { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_TOKEN&quot;</span>     ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="comment">// -------------------------------------------------------------</span>
    std::string strFunc = __FUNCTION__; <span class="comment">//&quot;OTAPI_Exec::Purse_Push&quot;;</span>
    <span class="comment">// -----------------------------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strReason(<span class="stringliteral">&quot;Pushing a token onto a cash purse.&quot;</span>);
    <a class="code" href="class_o_t_password_data.html">OTPasswordData</a> thePWData(strReason);
    <span class="comment">// -----------------------------------</span>
    <span class="keyword">const</span> <span class="keywordtype">bool</span> &amp; bDoesOwnerIDExist = ((<span class="stringliteral">&quot;&quot;</span> != OWNER_ID) &amp;&amp; (<span class="charliteral">&#39;\0&#39;</span> != OWNER_ID[0])); <span class="comment">// If bDoesOwnerIDExist is not true, then the purse MUST be password-protected.</span>
    <span class="comment">// -----------------------------------</span>
    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>  theOwnerID;
    <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pOwnerNym = NULL;
    <span class="keywordflow">if</span> (bDoesOwnerIDExist)
    {
        <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strOwnerID(OWNER_ID);

        <span class="keywordflow">if</span> (strOwnerID.Exists())
        {
            theOwnerID.<a class="code" href="class_o_t_identifier.html#ae29aa1245d3831a207aabc9b8a493bfc">SetString</a>(strOwnerID);
            pOwnerNym = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#aa09f3af30f4bc451d56c6948d536922f">GetOrLoadNym</a>(theOwnerID, <span class="keyword">false</span>, strFunc.c_str(), &amp;thePWData); <span class="comment">// These copiously log, and ASSERT.</span>
        }
        <span class="keywordflow">if</span> (NULL == pOwnerNym) <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    }
    <span class="comment">// By this point, pOwnerNym is a good pointer, and is on the wallet. (No need to cleanup.)</span>
    <span class="comment">// -----------------------------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theServerID(SERVER_ID),
        theAssetTypeID(ASSET_TYPE_ID);
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a>     strPurse(THE_PURSE), strToken(THE_TOKEN);
    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_purse.html">OTPurse</a> * pPurse = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a480eef589ef3fd1f416930540e46082f">Purse_Push</a>(theServerID, theAssetTypeID,
        strPurse, strToken,
        bDoesOwnerIDExist ? &amp;theOwnerID : NULL, <span class="comment">// Note: if the purse is password-protected, then this parameter should be &quot;&quot;.</span>
        &amp;strReason);
    <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTPurse&gt;</a> thePurseAngel(pPurse);
    <span class="comment">// -----------------------------------------------------</span>
    <span class="keywordflow">if</span> (NULL != pPurse)
    {
        <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theSignerID(SIGNER_ID);
        <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pSignerNym = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#aa53f110b77dee2bc71b70906ca64fbbc">GetOrLoadPrivateNym</a>(theSignerID, <span class="keyword">false</span>, strFunc.c_str(), &amp;thePWData); <span class="comment">// These copiously log, and ASSERT.</span>
        <span class="keywordflow">if</span> (NULL == pSignerNym) <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
        <span class="comment">// By this point, pSignerNym is a good pointer, and is on the wallet. (No need to cleanup.)</span>
        <span class="comment">// -----------------------------------------------------</span>
        pPurse-&gt;<a class="code" href="class_o_t_contract.html#aae54340526fbd8eb8a18de27a4b97c83">ReleaseSignatures</a>();
        pPurse-&gt;<a class="code" href="class_o_t_contract.html#abd60037fe655ee8cae9a3ece5d1e2ea6">SignContract</a>(*pSignerNym, &amp;thePWData);
        pPurse-&gt;<a class="code" href="class_o_t_contract.html#a363ae430d4fd9256ab8364dbafb95444">SaveContract</a>();

        pPurse-&gt;<a class="code" href="class_o_t_contract.html#a5fd00cded794a6f96ba80d8d4081d591">SaveContractRaw</a>(strOutput);
        std::string pBuf = strOutput.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();

        <span class="keywordflow">return</span> pBuf;
    }
    <span class="keywordflow">else</span>
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Failed pushing a token onto a cash purse.\n&quot;</span>, strFunc.c_str());

    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;

}
</pre></div>
</div>
</div>
<a class="anchor" id="a9103c1fd88d7819719b3485bc2127e50"></a><!-- doxytag: member="OTAPI_Exec::queryAssetTypes" ref="a9103c1fd88d7819719b3485bc2127e50" args="(const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ENCODED_MAP)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_a_p_i___exec.html#a9103c1fd88d7819719b3485bc2127e50">OTAPI_Exec::queryAssetTypes</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ENCODED_MAP</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>----------------------------------------------------------- QUERY ASSET TYPES (server message)</p>
<p>This way you can ask the server to confirm whether various asset types are issued there.</p>
<p>Returns int32_t: -1 means error; no message was sent. -2 means the message was sent, but the request number must be passed as a string, so call GetLargeRequestNum. 0 means NO error, but also: no message was sent. &gt;0 means NO error, and the message was sent, and the request number fits into an integer... ...and in fact the requestNum IS the return value! ===&gt; In 99% of cases, this LAST option is what actually happens!! </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l13810">13810</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty())          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID.empty())            { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>            ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (ENCODED_MAP.empty())        { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;ENCODED_MAP&quot;</span>        ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theServerID(SERVER_ID), theUserID(USER_ID);
    <a class="code" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> theArmor(ENCODED_MAP);

    <span class="keywordflow">return</span> <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#ab1188ffba89c5ab70a5924effb4f0477">queryAssetTypes</a>(theServerID, theUserID, theArmor);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a49dd452b5c5f657861c4031e32632378"></a><!-- doxytag: member="OTAPI_Exec::RecordPayment" ref="a49dd452b5c5f657861c4031e32632378" args="(const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const bool &amp;bIsInbox, const int32_t &amp;nIndex, const bool &amp;bSaveCopy)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_a_p_i___exec.html#a49dd452b5c5f657861c4031e32632378">OTAPI_Exec::RecordPayment</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const bool &amp;&#160;</td>
          <td class="paramname"><em>bIsInbox</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int32_t &amp;&#160;</td>
          <td class="paramname"><em>nIndex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const bool &amp;&#160;</td>
          <td class="paramname"><em>bSaveCopy</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l08172">8172</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(nIndex &gt;= 0);
    <span class="keywordflow">if</span> (SERVER_ID.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID.empty())   { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>   ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theServerID(SERVER_ID);
    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theUserID  (USER_ID);

    <span class="keywordflow">return</span> <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#ad96c4b1b56f797482b7383072b9037db">RecordPayment</a>(theServerID, theUserID, bIsInbox, nIndex, bSaveCopy);
}
</pre></div>
</div>
</div>
<a class="anchor" id="af1dbcebe7dd7a4c24ba1c32c9d6c062a"></a><!-- doxytag: member="OTAPI_Exec::RemoveSentMessage" ref="af1dbcebe7dd7a4c24ba1c32c9d6c062a" args="(const int64_t &amp;REQUEST_NUMBER, const std::string &amp;SERVER_ID, const std::string &amp;USER_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_a_p_i___exec.html#af1dbcebe7dd7a4c24ba1c32c9d6c062a">OTAPI_Exec::RemoveSentMessage</a> </td>
          <td>(</td>
          <td class="paramtype">const int64_t &amp;&#160;</td>
          <td class="paramname"><em>REQUEST_NUMBER</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l13597">13597</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (0 &gt; REQUEST_NUMBER)     { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Negative: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;REQUEST_NUMBER&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (SERVER_ID.empty())          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID.empty())            { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>            ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// ------------------------------------------------</span>
    <span class="keyword">const</span> int64_t          lRequestNum = REQUEST_NUMBER;
    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>  theServerID(SERVER_ID),
        theUserID(USER_ID);
    <span class="comment">// ------------------------------------------------</span>
    <span class="keyword">const</span> <span class="keywordtype">bool</span> &amp; bSuccess = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a5ee70b9309b55c10ade9e0bf240c66a2">RemoveSentMessage</a>(static_cast&lt;int64_t&gt;(lRequestNum), theServerID, theUserID);

    <span class="keywordflow">return</span> bSuccess;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a5c24d944d0bb0c4597e39acc9ed400e3"></a><!-- doxytag: member="OTAPI_Exec::ReplyNotice_GetRequestNum" ref="a5c24d944d0bb0c4597e39acc9ed400e3" args="(const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;THE_TRANSACTION)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64_t <a class="el" href="class_o_t_a_p_i___exec.html#a5c24d944d0bb0c4597e39acc9ed400e3">OTAPI_Exec::ReplyNotice_GetRequestNum</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_TRANSACTION</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Transactions do not have request numbers. However, if you have a replyNotice in your Nymbox, which is an <a class="el" href="class_o_t_transaction.html">OTTransaction</a> object, it will CONTAIN a server reply to some previous message. This function will only work on a replyNotice, and it returns the actual request number of the server reply inside that notice. Used for calling <a class="el" href="class_o_t_a_p_i___exec.html#a21fc5967b732f9792d642ca567d2b68b">HaveAlreadySeenReply()</a> in order to see if we've already processed the reply for that message. </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l10543">10543</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty())          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID.empty())            { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>            ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (THE_TRANSACTION.empty())    { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_TRANSACTION&quot;</span>    ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>  theServerID(SERVER_ID),
        theUserID(USER_ID),
        theAccountID(USER_ID); <span class="comment">// account IS user, for Nymbox (the only box that carries replyNotices...)</span>

    <a class="code" href="class_o_t_string.html">OTString</a> strTransaction(THE_TRANSACTION);

    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pNym = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#aa53f110b77dee2bc71b70906ca64fbbc">GetOrLoadPrivateNym</a>(theUserID, <span class="keyword">false</span>, __FUNCTION__); <span class="comment">// These copiously log, and ASSERT.</span>
    <span class="keywordflow">if</span> (NULL == pNym) <span class="keywordflow">return</span> -1;
    <span class="comment">// -----------------------------------------------------</span>

    <a class="code" href="class_o_t_transaction.html">OTTransaction</a> theTransaction(theUserID, theAccountID, theServerID);

    <span class="keywordflow">if</span> (<span class="keyword">false</span> == theTransaction.LoadContractFromString(strTransaction))
    {
        <a class="code" href="class_o_t_string.html">OTString</a> strUserID(theUserID);
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error loading transaction from string. User ID: %s\n&quot;</span>,__FUNCTION__, strUserID.Get());
        <span class="keywordflow">return</span> -1;
    }

    <span class="comment">// -----------------------------------------------------</span>
    <span class="keywordflow">if</span> (<a class="code" href="class_o_t_transaction.html#af6b54636f1000e09f19d1c7a7886e1f8acae27254bdf46d3581a3ab1038566d7c">OTTransaction::replyNotice</a> != theTransaction.GetType())
    {
        <a class="code" href="class_o_t_string.html">OTString</a> strUserID(theUserID);
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Unexpected transaction type: %s. (Expected: %s) User: %s\n&quot;</span>,__FUNCTION__, theTransaction.GetTypeString(), <span class="stringliteral">&quot;replyNotice&quot;</span>, strUserID.Get());
        <span class="keywordflow">return</span> -1;
    }
    <span class="comment">// -----------------------------------------------------</span>
    <span class="comment">// NO need to load abbreviated version, since it already stores this number.</span>

    <span class="keyword">const</span> int64_t lRequestNumber = theTransaction.GetRequestNum();

    <span class="keywordflow">return</span> lRequestNumber;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a9dbdf7e9ccdf8e21ac5c3a6fbcf2705b"></a><!-- doxytag: member="OTAPI_Exec::ResyncNymWithServer" ref="a9dbdf7e9ccdf8e21ac5c3a6fbcf2705b" args="(const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;THE_MESSAGE)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_a_p_i___exec.html#a9dbdf7e9ccdf8e21ac5c3a6fbcf2705b">OTAPI_Exec::ResyncNymWithServer</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_MESSAGE</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l13708">13708</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// -----------------------------------------------------</span>
    <span class="keywordtype">bool</span> bIsInitialized = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#af11b60d083c4a8e1e68a59a0824899d4">IsInitialized</a>();
    <span class="keywordflow">if</span> (!bIsInitialized) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Not initialized; call OT_API::Init first.\n&quot;</span>,__FUNCTION__); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keywordflow">if</span> (SERVER_ID.empty())          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID.empty())            { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>            ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (THE_MESSAGE.empty())        { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_MESSAGE&quot;</span>        ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// -----------------------------------------------</span>


    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>    theServerID(SERVER_ID), theNymID(USER_ID);
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a>  strMessage(THE_MESSAGE), strNymID(theNymID);

    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pNym = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#aa53f110b77dee2bc71b70906ca64fbbc">GetOrLoadPrivateNym</a>(theNymID, <span class="keyword">false</span>);
    <span class="keywordflow">if</span> (NULL == pNym) <span class="keywordflow">return</span> <span class="keyword">false</span>;
    <span class="comment">// -----------------------------------------------------------------</span>
    <a class="code" href="class_o_t_message.html">OTMessage</a> theMessage;

    <span class="keywordflow">if</span> (<span class="keyword">false</span> == theMessage.<a class="code" href="class_o_t_contract.html#a36300e34dcd94ed7006d98b392d46815">LoadContractFromString</a>(strMessage))
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Failed trying to load @createUserAccount() message from string (it&#39;s a server reply.) Contents:\n\n%s\n\n&quot;</span>, __FUNCTION__, strMessage.Get());
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// -----------------------------------------------------------------</span>
    <span class="keywordflow">if</span> (<span class="keyword">false</span> == strNymID.Compare(theMessage.<a class="code" href="class_o_t_message.html#a61b38b159dbb516bb3f4f382b936238a">m_strNymID</a>))
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Failed. Though success loading message from string, it had the wrong NymID. &quot;</span>
            <span class="stringliteral">&quot;(Expected %s, but found %s.) Message contents:\n\n%s\n\n&quot;</span>, __FUNCTION__,
            strNymID.Get(), theMessage.<a class="code" href="class_o_t_message.html#a61b38b159dbb516bb3f4f382b936238a">m_strNymID</a>.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(), strMessage.Get());
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// -----------------------------------------------------------------</span>
    <span class="keywordflow">if</span> (<span class="keyword">false</span> == theMessage.<a class="code" href="class_o_t_message.html#a14c7dc1d2e11075a73e0a9aaf79fd762">m_strCommand</a>.<a class="code" href="class_o_t_string.html#a03401b39fb66d63696342c4f61ea8bf5">Compare</a>(<span class="stringliteral">&quot;@createUserAccount&quot;</span>))
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Failed. Though success loading message from string, it had the wrong command type. &quot;</span>
            <span class="stringliteral">&quot;(Expected @createUserAccount, but found %s.) Message contents:\n\n%s\n\n&quot;</span>, __FUNCTION__,
            theMessage.<a class="code" href="class_o_t_message.html#a14c7dc1d2e11075a73e0a9aaf79fd762">m_strCommand</a>.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(), strMessage.Get());
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// -----------------------------------------------------------------</span>
    <span class="keywordflow">if</span> (<span class="keyword">false</span> == theMessage.<a class="code" href="class_o_t_message.html#aa6729578b97f61804e91035a7709800a">m_ascPayload</a>.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>())
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Failed. Though success loading @createUserAccount() message, the payload was empty. &quot;</span>
            <span class="stringliteral">&quot;(Expected theMessageNym to be there, so I could re-sync client side to server.) Message contents:\n\n%s\n\n&quot;</span>, __FUNCTION__, strMessage.Get());
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// -----------------------------------------------------------------</span>
    <a class="code" href="class_o_t_string.html">OTString</a> strMessageNym;

    <span class="keywordflow">if</span> (<span class="keyword">false</span> == theMessage.<a class="code" href="class_o_t_message.html#aa6729578b97f61804e91035a7709800a">m_ascPayload</a>.<a class="code" href="class_o_t_a_s_c_i_i_armor.html#ab39b6cae69c14149716e5ce7a6f0bb0f">GetString</a>(strMessageNym))
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Failed decoding message payload in server reply: @createUserAccount(). &quot;</span>
            <span class="stringliteral">&quot;(Expected theMessageNym to be there, so I could re-sync client side to server.) Message contents:\n\n%s\n\n&quot;</span>, __FUNCTION__, strMessage.Get());
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// -----------------------------------------------------------------</span>
    <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> theMessageNym; <span class="comment">// &lt;====================</span>

    <span class="keywordflow">if</span> (<span class="keyword">false</span> == theMessageNym.<a class="code" href="class_o_t_pseudonym.html#a7992e8fbf785eeb2d5158cdf966c7a1b">LoadFromString</a>(strMessageNym))
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Failed loading theMessageNym from a string. String contents:\n\n%s\n\n&quot;</span>, __FUNCTION__, strMessageNym.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// -----------------------------------------------------------------</span>
    <span class="comment">// Based on serverID and UserID, load the Nymbox.</span>
    <span class="comment">//</span>
    <a class="code" href="class_o_t_ledger.html">OTLedger</a> theNymbox(theNymID, theNymID, theServerID); <span class="comment">// &lt;===========</span>

    <span class="keywordtype">bool</span> bSynced        = <span class="keyword">false</span>;
    <span class="keywordtype">bool</span> bLoadedNymbox  = (theNymbox.LoadNymbox() &amp;&amp; theNymbox.VerifyAccount(*pNym));

    <span class="keywordflow">if</span> (bLoadedNymbox)
        bSynced = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a8257fd4d11d7a54cc633edb5224d55f4">ResyncNymWithServer</a>(*pNym, theNymbox, theMessageNym);
    <span class="keywordflow">else</span>
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Failed while loading or verifying Nymbox for User %s, on Server %s \n&quot;</span>, __FUNCTION__, strNymID.Get(), SERVER_ID.c_str());
    <span class="comment">// -----------------------------------------------------------------</span>

    <span class="keywordflow">return</span> bSynced;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a71ed07f0a80c69ee796564a1458b3f9b"></a><!-- doxytag: member="OTAPI_Exec::RevokeSubcredential" ref="a71ed07f0a80c69ee796564a1458b3f9b" args="(const std::string &amp;NYM_ID, const std::string &amp;MASTER_CRED_ID, const std::string &amp;SUB_CRED_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_a_p_i___exec.html#a71ed07f0a80c69ee796564a1458b3f9b">OTAPI_Exec::RevokeSubcredential</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>NYM_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>MASTER_CRED_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SUB_CRED_ID</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l00906">906</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (NYM_ID.empty())         { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: NULL %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;NYM_ID&quot;</span>);         <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (MASTER_CRED_ID.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: NULL %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;MASTER_CRED_ID&quot;</span>); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (SUB_CRED_ID.empty())    { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: NULL %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SUB_CRED_ID&quot;</span>);    <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// ---------------------------------------------------------</span>
    <a class="code" href="class_o_t_password_data.html">OTPasswordData</a>   thePWData(<a class="code" href="_o_t_callback_8hpp.html#aec99f1909896090ab9b64ce848f50c6a">OT_PW_DISPLAY</a>);
    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>     nym_id(NYM_ID);
    <span class="comment">// This tries to get, then tries to load as public, then tries to load as private.</span>
    <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a>    * pNym = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#aa53f110b77dee2bc71b70906ca64fbbc">GetOrLoadPrivateNym</a>(nym_id, <span class="keyword">false</span>, __FUNCTION__, &amp;thePWData);
    <span class="keywordflow">if</span> (NULL == pNym) <span class="keywordflow">return</span> <span class="keyword">false</span>;
    <span class="comment">// ---------------------------------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strCredID(MASTER_CRED_ID);
    <a class="code" href="class_o_t_credential.html">OTCredential</a> * pCredential = pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#a94f8a8812ceae9a1f003aa79bfda73a5">GetMasterCredential</a>(strCredID);

    <span class="keywordflow">if</span> (NULL == pCredential)
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Sorry, (Nym %s) no master credential found with the ID: %s\n&quot;</span>,
                       __FUNCTION__, NYM_ID.c_str(), strCredID.Get());
    <span class="keywordflow">else</span> <span class="comment">// Found the master credential...</span>
    {
        <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strSubID(SUB_CRED_ID);
        <span class="keyword">const</span> <a class="code" href="class_o_t_subcredential.html">OTSubcredential</a> * pSub = pCredential-&gt;<a class="code" href="class_o_t_credential.html#a194a0401b7e78a94f298897138004e3e">GetSubcredential</a>(strSubID);

        <span class="keywordflow">if</span> (NULL == pSub)
            <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Found master credential (%s), but unable to find subcredential with ID: %s\n&quot;</span>,
                           __FUNCTION__, strCredID.Get(), strSubID.Get());
        <span class="keywordflow">else</span>
        {


            <span class="comment">// TODO: Okay we found master AND subcredential. Now let&#39;s revoke it...</span>
            <span class="comment">//</span>



            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;\n\n\nOTAPI_Wrap::%s: TODO: REVOKING IS NOT YET CODED. ADD FUNCTION CALL HERE TO REVOKE SUB-CREDENTIAL!\n\n\n&quot;</span>, __FUNCTION__);



<span class="comment">//          return true;</span>
        }
    }
    <span class="comment">// --------------</span>
    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="abf8584922878bf613ccbd5cbe5a237e5"></a><!-- doxytag: member="OTAPI_Exec::SavePurse" ref="abf8584922878bf613ccbd5cbe5a237e5" args="(const std::string &amp;SERVER_ID, const std::string &amp;ASSET_TYPE_ID, const std::string &amp;USER_ID, const std::string &amp;THE_PURSE)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_a_p_i___exec.html#abf8584922878bf613ccbd5cbe5a237e5">OTAPI_Exec::SavePurse</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ASSET_TYPE_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_PURSE</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>PURSES (containing cash tokens.)</p>
<p>UNDERSTAND: If you write someone a cheque, it can be in the amount of $27.63 But you cannot do this with a cash token, since it can only represent a standard denomination. (1, 5, 10, 25, 100, 500, 1000, 2000, 5000, 10000, etc.)</p>
<p>Therefore if you wanted to give CASH to someone in the amount of $27.63, you would have to give them a PURSE, not a single token. And the purse would contain a 2000 cent token, a 500 cent token, two 100-cent tokens, two 25-cent tokens, a 10-cent token, and three 1-cent tokens.</p>
<p>The purse would thus contain 2763 cents worth of digital cash tokens, all neatly wrapped up in the same purse, all encrypted to the same owner or key.</p>
<p>(The fact that 2763 displays as $27.63 should be purely the result of a mask applied by the currency contract.)</p>
<p>(above a bit.) EXPORT virtual std::string LoadPurse(const std::string &amp; SERVER_ID, const std::string &amp; ASSET_TYPE_ID, const std::string &amp; USER_ID); // returns NULL, or a purse. Warning! This will overwrite whatever purse is there. The proper way to use this function is, LOAD the purse, then Merge whatever other purse you want into it, then SAVE it again. (Which is all handled for you automatically if you use Wallet_ImportPurse.) Tokens may have to be decrypted from one owner and re-encrypted to the new owner. Do you want to have to deal with that? If you still insist on using SavePurse directly, just remember to load first, then pop/push any tokens you need to, keeping in mind that at this low level you are responsible to make sure the purse and token have the same owner, then save again to overwrite whatever purse was there before. (Presumably if any tokens were removed, it's because they are no longer any good, or because they were given to someone else and then a copy was recorded in your payment outbox, or whatever.) </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l11047">11047</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty())          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (ASSET_TYPE_ID.empty())      { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;ASSET_TYPE_ID&quot;</span>      ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID.empty())            { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>            ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (THE_PURSE.empty())          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_PURSE&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="comment">// -------------------------------------------------------------</span>
    std::string strFunc = __FUNCTION__;
    <span class="comment">// -------------------------------------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theServerID(SERVER_ID),
        theAssetTypeID(ASSET_TYPE_ID),
        theUserID(USER_ID);
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a>     strPurse(THE_PURSE);
    <span class="comment">// -------------------------------------------------------------</span>
    <span class="keywordtype">bool</span> bSuccess = <span class="keyword">false</span>;
    <span class="comment">// -------------------------------------------------------------</span>
    <a class="code" href="class_o_t_purse.html">OTPurse</a> thePurse(theServerID, theAssetTypeID, theUserID);

    <span class="keywordflow">if</span> (strPurse.Exists() &amp;&amp; thePurse.LoadContractFromString(strPurse))
    {
        <span class="comment">// NOTE: no need to verify the server / asset ID here, since the call</span>
        <span class="comment">// to SavePurse already does that.</span>
        <span class="comment">//</span>
        <span class="comment">//      if ((theServerID    != thePurse.GetServerID()) ||</span>
        <span class="comment">//          (theAssetTypeID != thePurse.GetAssetID()))</span>
        <span class="comment">//      {</span>
        <span class="comment">//          OTLog::vOutput(0, &quot;%s: Failure loading purse from string; server &quot;</span>
        <span class="comment">//                         &quot;or asset ID didn&#39;t match what was expected:\n%s\n&quot;,</span>
        <span class="comment">//                         strFunc, strPurse.Get());</span>
        <span class="comment">//      }</span>
        <span class="keywordflow">if</span> (<a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#ac3e808efa2420f7647ee0659de4ed176">SavePurse</a>(theServerID, theAssetTypeID, theUserID, thePurse))
        {
            bSuccess = <span class="keyword">true</span>;
        }
        <span class="keywordflow">else</span>
        {
            <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Failure saving purse:\n%s\n&quot;</span>, strFunc.c_str(), strPurse.Get());
        }
    }
    <span class="keywordflow">else</span>
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Failure loading purse from string:\n%s\n&quot;</span>, strFunc.c_str(), strPurse.Get());
    }

    <span class="keywordflow">return</span> bSuccess;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a01f5aa5a55a345259b808fceaf310eba"></a><!-- doxytag: member="OTAPI_Exec::sendUserInstrument" ref="a01f5aa5a55a345259b808fceaf310eba" args="(const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;USER_ID_RECIPIENT, const std::string &amp;RECIPIENT_PUBKEY, const std::string &amp;THE_INSTRUMENT, const std::string &amp;INSTRUMENT_FOR_SENDER)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_a_p_i___exec.html#a01f5aa5a55a345259b808fceaf310eba">OTAPI_Exec::sendUserInstrument</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID_RECIPIENT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>RECIPIENT_PUBKEY</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_INSTRUMENT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>INSTRUMENT_FOR_SENDER</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>sendUserMessage does this: -- Puts user message as encrypted Payload on an <a class="el" href="class_o_t_message.html">OTMessage</a> (1)... -- Also puts user message as a CLEAR payload on an <a class="el" href="class_o_t_message.html">OTMessage</a> (2)... -- (1) is sent to server, and (2) is added to Outmail messages. -- (1) gets added to recipient's Nymbox as "in ref to" string on a "message" transaction. -- When recipient processes Nymbox, <a class="el" href="class_o_t_message.html">OTMessage</a> (1) is extracted and added to recipient's nym Mail. -- When recipient gets mail contents, decryption occurs from (1) payload, before returning contents as original user message string. -- When sender gets outmail contents, original user message string is returned from (2) payload, with no decryption necessary. SEND USER INSTRUMENT --- (Send a financial instrument to another user, encrypted to his pubkey.)</p>
<p>ServerID -- Must be included with every message. USER_ID -- You must include your own userID so the server can reply. USER_ID_RECIPIENT -- This is a recipient user ID. RECIPIENT_PUBKEY -- Recipient's public key in base64-encoded form. THE_INSTRUMENT -- plainext string of instrument (cheque, payment plan, purse, invoice, voucher...)</p>
<p>In this message, you are requesting the server to send a financial instrument to another user, encrypted to his public key and dropped in his paymentInbox (by way of his nymbox.) </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l12337">12337</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty())             { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>            ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID.empty())               { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>              ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID_RECIPIENT.empty())     { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID_RECIPIENT&quot;</span>    ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (RECIPIENT_PUBKEY.empty())      { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;RECIPIENT_PUBKEY&quot;</span>     ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (THE_INSTRUMENT.empty())        { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_INSTRUMENT&quot;</span>       ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
<span class="comment">//  if (INSTRUMENT_FOR_SENDER.empty()) { OTLog::vError(&quot;%s: Null: %s passed in!\n&quot;, __FUNCTION__, &quot;INSTRUMENT_FOR_SENDER&quot;); OT_FAIL; }</span>
    <span class="comment">// (INSTRUMENT_FOR_SENDER is optional, so we allow it to be empty.)</span>

    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>    theServerID(SERVER_ID), theUserID(USER_ID), theOtherUserID(USER_ID_RECIPIENT);
    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_string.html">OTString</a>    strRecipPubkey(RECIPIENT_PUBKEY),
                strInstrument(THE_INSTRUMENT);
    <span class="comment">// -----------------------------------------------------</span>
    <span class="comment">// Note: this was removed and can be deleted from the code.</span>
    <span class="comment">//</span>
    <span class="comment">// Why? Because we pass the string version of the public key,</span>
    <span class="comment">// not the OTASCIIArmor version. The bookends are passed intact</span>
    <span class="comment">// into the OpenSSL call since the key is expected that way.</span>
    <span class="comment">// Whereas loading it into ascii-armor is just going to strip off</span>
    <span class="comment">// the bookends and pass the raw base64-encoded pubkey to OpenSSL</span>
    <span class="comment">// which is NOT what OpenSSL is expecting. FYI.</span>
    <span class="comment">//</span>
    <span class="comment">// Todo, security: Should we do this anyway, just purely for validation purposes?</span>
    <span class="comment">//</span>
<span class="comment">//  OTASCIIArmor ascRecipPubkey;</span>
<span class="comment">//  const bool bLoadedArmor = OTASCIIArmor::LoadFromString(ascRecipPubkey, strRecipPubkey); // str_bookend=&quot;-----BEGIN&quot; by default</span>
<span class="comment">//  // -----------------------------------------------------</span>
<span class="comment">//  if (!bLoadedArmor || !ascRecipPubkey.Exists())</span>
<span class="comment">//  {</span>
<span class="comment">//      OTLog::vError(&quot;%s: Failure loading string into OTASCIIArmor object:\n\n%s\n\n&quot;,</span>
<span class="comment">//                    __FUNCTION__, strRecipPubkey.Get());</span>
<span class="comment">//      return OT_ERROR;</span>
<span class="comment">//  }</span>
    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_payment.html">OTPayment</a> thePayment(strInstrument);

    <span class="keywordflow">if</span> (!thePayment.IsValid() || !thePayment.SetTempValues())
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Failure loading payment instrument (intended for recipient) from string:\n\n%s\n\n&quot;</span>,
                       __FUNCTION__, strInstrument.Get());
        <span class="keywordflow">return</span> <a class="code" href="_o_t_a_p_i_8cpp.html#a8a0b2a3e3d4461ba60ae320c17b09ab4">OT_ERROR</a>;
    }
    <span class="comment">// -----------------------------------------------------</span>
    <span class="keyword">const</span> <span class="keywordtype">bool</span> bSenderCopyIncluded = (INSTRUMENT_FOR_SENDER.size() &gt; 0);

    <span class="keywordflow">if</span> (bSenderCopyIncluded)
    {
        <a class="code" href="class_o_t_string.html">OTString</a>  strInstrumentForSender(INSTRUMENT_FOR_SENDER);
        <span class="comment">// -----------------------------------------------------</span>
        <a class="code" href="class_o_t_payment.html">OTPayment</a> theSenderPayment(strInstrumentForSender);

        <span class="keywordflow">if</span> (!theSenderPayment.IsValid() || !theSenderPayment.SetTempValues())
        {
            <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Failure loading payment instrument (copy intended for sender&#39;s records) from string:\n\n%s\n\n&quot;</span>,
                           __FUNCTION__, strInstrumentForSender.Get());
            <span class="keywordflow">return</span> <a class="code" href="_o_t_a_p_i_8cpp.html#a8a0b2a3e3d4461ba60ae320c17b09ab4">OT_ERROR</a>;
        }
        <span class="keywordflow">return</span> <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a579f8299c5c8df16a7d30e2226663d84">sendUserInstrument</a>(theServerID, theUserID, theOtherUserID, strRecipPubkey, thePayment, &amp;theSenderPayment);
    }
    <span class="comment">// -----------------------------------------------------</span>
    <span class="keywordflow">return</span> <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a579f8299c5c8df16a7d30e2226663d84">sendUserInstrument</a>(theServerID, theUserID, theOtherUserID, strRecipPubkey, thePayment);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a379cedb3b377bb28201da0989b0fdc43"></a><!-- doxytag: member="OTAPI_Exec::sendUserMessage" ref="a379cedb3b377bb28201da0989b0fdc43" args="(const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;USER_ID_RECIPIENT, const std::string &amp;RECIPIENT_PUBKEY, const std::string &amp;THE_MESSAGE)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_a_p_i___exec.html#a379cedb3b377bb28201da0989b0fdc43">OTAPI_Exec::sendUserMessage</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID_RECIPIENT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>RECIPIENT_PUBKEY</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_MESSAGE</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>SEND USER MESSAGE --- (Send a message to another user, encrypted to his pubkey.)</p>
<p>ServerID -- Must be included with every message. USER_ID -- You must include your own userID so the server can reply. USER_ID_RECIPIENT -- This is a recipient user ID. RECIPIENT_PUBKEY -- Recipient's public key in base64-encoded form. THE_MESSAGE -- plainext message you want to send. A cheque? Some cash? A note? Etc.</p>
<p>In this message, you are requesting the server to send a message to another user, encrypted to his public key and dropped in his nymbox. </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l12308">12308</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty())          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID.empty())            { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>            ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID_RECIPIENT.empty())  { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID_RECIPIENT&quot;</span>  ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (RECIPIENT_PUBKEY.empty())   { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;RECIPIENT_PUBKEY&quot;</span>   ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (THE_MESSAGE.empty())        { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_MESSAGE&quot;</span>        ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>    theServerID(SERVER_ID), theUserID(USER_ID), theOtherUserID(USER_ID_RECIPIENT);
    <a class="code" href="class_o_t_string.html">OTString</a>        strRecipPubkey(RECIPIENT_PUBKEY);
    <a class="code" href="class_o_t_string.html">OTString</a>        strMessage(THE_MESSAGE);

    <span class="keywordflow">return</span> <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#ab168fb55e1ce59b07f251517d6768076">sendUserMessage</a>(theServerID, theUserID, theOtherUserID, strRecipPubkey, strMessage);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a0343b96a3234afefa81e23926935252b"></a><!-- doxytag: member="OTAPI_Exec::SetAccountWallet_Name" ref="a0343b96a3234afefa81e23926935252b" args="(const std::string &amp;ACCT_ID, const std::string &amp;SIGNER_NYM_ID, const std::string &amp;ACCT_NEW_NAME)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_a_p_i___exec.html#a0343b96a3234afefa81e23926935252b">OTAPI_Exec::SetAccountWallet_Name</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ACCT_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SIGNER_NYM_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ACCT_NEW_NAME</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns OT_TRUE (1) or OT_FALSE (0) The asset account's name is merely a client-side label. </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l04580">4580</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (ACCT_ID.empty())            { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;ACCT_ID&quot;</span>            ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (SIGNER_NYM_ID.empty())      { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SIGNER_NYM_ID&quot;</span>      ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (ACCT_NEW_NAME.empty())      { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;ACCT_NEW_NAME&quot;</span>      ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>    theAcctID(ACCT_ID),
        theSignerNymID(SIGNER_NYM_ID);
    <a class="code" href="class_o_t_string.html">OTString</a>        strAcctNewName(ACCT_NEW_NAME);

    <span class="keywordtype">bool</span> bSuccess = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#aa2213ae9a93b111ca1c774df67818b6b">SetAccount_Name</a>(theAcctID, theSignerNymID, strAcctNewName);

    <span class="keywordflow">return</span> bSuccess ? <span class="keyword">true</span> : <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a52012141810b4ca4a72e713dc0fbbbab"></a><!-- doxytag: member="OTAPI_Exec::SetAppBinaryFolder" ref="a52012141810b4ca4a72e713dc0fbbbab" args="(const std::string &amp;strFolder)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_a_p_i___exec.html#a52012141810b4ca4a72e713dc0fbbbab">OTAPI_Exec::SetAppBinaryFolder</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>strFolder</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l00258">258</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_o_t_a_p_i___exec.html#a52012141810b4ca4a72e713dc0fbbbab">OTPaths::SetAppBinaryFolder</a>(strFolder.c_str());
}
</pre></div>
</div>
</div>
<a class="anchor" id="abbedf6402584e01cbc3c7716704f35d3"></a><!-- doxytag: member="OTAPI_Exec::SetAssetType_Name" ref="abbedf6402584e01cbc3c7716704f35d3" args="(const std::string &amp;ASSET_ID, const std::string &amp;STR_NEW_NAME)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_a_p_i___exec.html#abbedf6402584e01cbc3c7716704f35d3">OTAPI_Exec::SetAssetType_Name</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ASSET_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>STR_NEW_NAME</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l03855">3855</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (ASSET_ID.empty())     { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;ASSET_ID&quot;</span>     ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (STR_NEW_NAME.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;STR_NEW_NAME&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>  theContractID(ASSET_ID);
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a>      strNewName(STR_NEW_NAME);

    <span class="keywordtype">bool</span> bSuccess = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a62071d84252f0b233071c640b9de67de">SetAssetType_Name</a>(theContractID, strNewName);

    <span class="keywordflow">return</span> bSuccess;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae79f96dd7c3c35ce69b39aa7571499a6"></a><!-- doxytag: member="OTAPI_Exec::SetHomeFolder" ref="ae79f96dd7c3c35ce69b39aa7571499a6" args="(const std::string &amp;strFolder)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_a_p_i___exec.html#ae79f96dd7c3c35ce69b39aa7571499a6">OTAPI_Exec::SetHomeFolder</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>strFolder</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l00277">277</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_o_t_a_p_i___exec.html#ae79f96dd7c3c35ce69b39aa7571499a6">OTPaths::SetHomeFolder</a>(strFolder.c_str());
}
</pre></div>
</div>
</div>
<a class="anchor" id="acef95b1db2970770090244c83c00f4d3"></a><!-- doxytag: member="OTAPI_Exec::SetNym_Name" ref="acef95b1db2970770090244c83c00f4d3" args="(const std::string &amp;NYM_ID, const std::string &amp;SIGNER_NYM_ID, const std::string &amp;NYM_NEW_NAME)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_a_p_i___exec.html#acef95b1db2970770090244c83c00f4d3">OTAPI_Exec::SetNym_Name</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>NYM_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SIGNER_NYM_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>NYM_NEW_NAME</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>----------------------------------- SET NYM NAME</p>
<p>You might have 40 of your friends' public nyms in your wallet. You might have labels on each of them. But whenever you change a label (and thus re-sign the file for that Nym when you save it), you only SIGN using one of your OWN nyms, for which you have a private key available for signing.</p>
<p>Signer Nym? When testing, there is only one nym, so you just pass it twice. But in real production, a user will have a default signing nym, the same way that he might have a default signing key in PGP, and that must be passed in whenever he changes the name on any of the other nyms in his wallet. (In order to properly sign and save the change.)</p>
<p>Returns OT_TRUE (1) or OT_FALSE (0) </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l03821">3821</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (NYM_ID.empty())        { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;NYM_ID&quot;</span>        ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (SIGNER_NYM_ID.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SIGNER_NYM_ID&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (NYM_NEW_NAME.empty())  { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;NYM_NEW_NAME&quot;</span>  ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>  theNymID(NYM_ID),
                        theSignerNymID(SIGNER_NYM_ID);
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a>      strNymName(NYM_NEW_NAME);

    <span class="keywordtype">bool</span> bSuccess = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a765251304181ec99fa3874d0fe0a8568">SetNym_Name</a>(theNymID, theSignerNymID, strNymName);

    <span class="keywordflow">return</span> bSuccess;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae068763567655cc5428ae49de980e616"></a><!-- doxytag: member="OTAPI_Exec::SetServer_Name" ref="ae068763567655cc5428ae49de980e616" args="(const std::string &amp;SERVER_ID, const std::string &amp;STR_NEW_NAME)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_a_p_i___exec.html#ae068763567655cc5428ae49de980e616">OTAPI_Exec::SetServer_Name</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>STR_NEW_NAME</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l03838">3838</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty())    { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null SERVER_ID passed in!\n&quot;</span>    ,__FUNCTION__); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (STR_NEW_NAME.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null STR_NEW_NAME passed in!\n&quot;</span> ,__FUNCTION__); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>  theContractID(SERVER_ID);
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a>      strNewName(STR_NEW_NAME);

    <span class="keywordtype">bool</span> bSuccess = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a5e063a9ac2d1e9c15eb116948a16fb6e">SetServer_Name</a>(theContractID, strNewName);

    <span class="keywordflow">return</span> bSuccess;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a357e8cea1ca039682fb6d1076c8234fb"></a><!-- doxytag: member="OTAPI_Exec::SetWallet" ref="a357e8cea1ca039682fb6d1076c8234fb" args="(const std::string &amp;strWalletFilename)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_a_p_i___exec.html#a357e8cea1ca039682fb6d1076c8234fb">OTAPI_Exec::SetWallet</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>strWalletFilename</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>INITIALIZE an OTAPI context.</p>
<p>Call this once per context.</p>
<p>If the configuration value doesn't exist, it will be created.</p>
<p>Something like this: bool bInit = Init();</p>
<p>If this function fails, you can call it multiple times until it succeeds.</p>
<p>EXPORT virtual bool Cleanup(); // Call this before you delete OTAPI SET WALLET (optional)</p>
<p>This command will set the wallet filename in the configuration. Use this command to change what wallet will be loaded with the "LOAD WALLET" command.</p>
<p>e.g. SetWallet("wallet2.xml"); </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l00342">342</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">bool</span> bIsInitialized = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#af11b60d083c4a8e1e68a59a0824899d4">IsInitialized</a>();
    <span class="keywordflow">if</span> (!bIsInitialized)
    {
        <a class="code" href="class_o_t_log.html#a8c12a31fb887aa7a3023879a2ff86173">OTLog::sError</a>(<span class="stringliteral">&quot;%s: Error: OT_API not Initialized!!\n&quot;</span>, __FUNCTION__);
        <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>;
    }
    <span class="keywordflow">else</span>
    {
        <a class="code" href="class_o_t_string.html">OTString</a> sWalletFilename(strWalletFilename);

        <span class="keywordflow">if</span> (sWalletFilename.Exists())
        {
            <span class="keywordflow">return</span> <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a5eaacf363f5fb27e71c196cbb099cced">SetWalletFilename</a>(strWalletFilename);
        }
        <span class="keywordflow">else</span>
        {
            <a class="code" href="class_o_t_log.html#a8c12a31fb887aa7a3023879a2ff86173">OTLog::sError</a>(<span class="stringliteral">&quot;%s: Error:: Wallet Filename is Null!\n&quot;</span>, __FUNCTION__);
        }
        <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>;
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a4a74efbfa2260792f86e7712f56c4300"></a><!-- doxytag: member="OTAPI_Exec::SignContract" ref="a4a74efbfa2260792f86e7712f56c4300" args="(const std::string &amp;SIGNER_NYM_ID, const std::string &amp;THE_CONTRACT)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a4a74efbfa2260792f86e7712f56c4300">OTAPI_Exec::SignContract</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SIGNER_NYM_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_CONTRACT</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>OT-Sign a CONTRACT. (First signature)</p>
<p>EXPORT virtual std::string <a class="el" href="class_o_t_a_p_i___exec.html#a4a74efbfa2260792f86e7712f56c4300">SignContract(const std::string &amp; SIGNER_NYM_ID, const std::string &amp; THE_CONTRACT)</a>;</p>
<p>Tries to instantiate the contract object, based on the string passed in. Releases all signatures, and then signs the contract. Returns the signed contract, or NULL if failure.</p>
<p>NOTE: The actual OT functionality (Use Cases) NEVER requires you to sign via this function. Why not? because, anytime a signature is needed on something, the relevant OT API call will require you to pass in the Nym, and the API already signs internally wherever it deems appropriate. Thus, this function is only for advanced uses, for OT-Scripts, server operators, etc.</p>
<p>OT-Sign a CONTRACT. (First signature)</p>
<p>std::string <a class="el" href="class_o_t_a_p_i___exec.html#a4a74efbfa2260792f86e7712f56c4300">OTAPI_Exec::SignContract(const std::string &amp; SIGNER_NYM_ID, const std::string &amp; THE_CONTRACT)</a>;</p>
<p>Tries to instantiate the contract object, based on the string passed in. Releases all signatures, and then signs the contract. Returns the signed contract, or "" if failure.</p>
<p>NOTE: The actual OT functionality (Use Cases) NEVER requires you to sign via this function. Why not? because, anytime a signature is needed on something, the relevant OT API call will require you to pass in the Nym, and the API already signs internally wherever it deems appropriate. Thus, this function is only for advanced uses, for OT-Scripts, server operators, etc. </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l04385">4385</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">bool</span> bIsInitialized = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#af11b60d083c4a8e1e68a59a0824899d4">IsInitialized</a>();
    <span class="keywordflow">if</span> (!bIsInitialized) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Not initialized; call OT_API::Init first.\n&quot;</span>,__FUNCTION__);   <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keywordflow">if</span> (SIGNER_NYM_ID.empty())      { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SIGNER_NYM_ID&quot;</span>      ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (THE_CONTRACT.empty())       { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_CONTRACT&quot;</span>       ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="comment">// --------------------------------------------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a>      strContract(THE_CONTRACT);
    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>  theSignerNymID(SIGNER_NYM_ID);
    <span class="comment">// --------------------------------------------------------------------</span>
    <a class="code" href="class_o_t_string.html">OTString</a> strOutput;

    <span class="keyword">const</span> <span class="keywordtype">bool</span> &amp; bSigned  = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#aa354b7ac168afd7cacfcf045241f4771">SignContract</a>(theSignerNymID, strContract, strOutput);

    <span class="keywordflow">if</span> (!bSigned || !strOutput.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>())
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;

    std::string pBuf = strOutput.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();

    <span class="keywordflow">return</span> pBuf;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a393c8f1065be86b2bcb8192ebdfff64b"></a><!-- doxytag: member="OTAPI_Exec::Sleep" ref="a393c8f1065be86b2bcb8192ebdfff64b" args="(const int64_t &amp;MILLISECONDS)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_a_p_i___exec.html#a393c8f1065be86b2bcb8192ebdfff64b">OTAPI_Exec::Sleep</a> </td>
          <td>(</td>
          <td class="paramtype">const int64_t &amp;&#160;</td>
          <td class="paramname"><em>MILLISECONDS</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>SLEEP</p>
<p>If you want to go to sleep for one second, then pass "1000" to this function. </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l13681">13681</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// -----------------------------------------------------</span>
    <span class="keywordtype">bool</span> bIsInitialized = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#af11b60d083c4a8e1e68a59a0824899d4">IsInitialized</a>();
    <span class="keywordflow">if</span> (!bIsInitialized) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Not initialized; call OT_API::Init first.\n&quot;</span>,__FUNCTION__);   <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; <span class="keywordflow">return</span>; }

    <span class="keywordflow">if</span> (0 &gt; MILLISECONDS)       { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Negative: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;MILLISECONDS&quot;</span>       ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; <span class="keywordflow">return</span>; }
    <span class="comment">// -----------------------------------------------</span>

    <span class="keyword">const</span> int64_t lMilliseconds = MILLISECONDS;

    <a class="code" href="class_o_t_log.html#a10fba9fb1a7c5cb04178e2beb7fd10c9">OTLog::SleepMilliseconds</a>(static_cast&lt;int64_t&gt;(lMilliseconds));
}
</pre></div>
</div>
</div>
<a class="anchor" id="a8b4949fd9c42092c32e40f5f0657e2ea"></a><!-- doxytag: member="OTAPI_Exec::Smart_AreAllPartiesConfirmed" ref="a8b4949fd9c42092c32e40f5f0657e2ea" args="(const std::string &amp;THE_CONTRACT)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_a_p_i___exec.html#a8b4949fd9c42092c32e40f5f0657e2ea">OTAPI_Exec::Smart_AreAllPartiesConfirmed</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_CONTRACT</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l05610">5610</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (THE_CONTRACT.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_CONTRACT&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_string.html">OTString</a> strContract(THE_CONTRACT);
    <a class="code" href="class_o_t_scriptable.html">OTScriptable</a> * pScriptable = <a class="code" href="class_o_t_scriptable.html#a4a89cbc1abd2bac0e5dec64da3452b7a">OTScriptable::InstantiateScriptable</a>(strContract);
    <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTScriptable&gt;</a> theContractAngel;
    <span class="keywordflow">if</span> (NULL == pScriptable)
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Failed trying to load smart contract from string:\n\n%s\n\n&quot;</span>,
                       __FUNCTION__, strContract.Get());
    }
    <span class="keywordflow">else</span>
    {
        theContractAngel.<a class="code" href="class_o_t_cleanup.html#a00a399db45f730439d2263d4429d00c1">SetCleanupTarget</a>(*pScriptable);  <span class="comment">// Auto-cleanup.</span>
        <span class="comment">// -----------------------------------------------------</span>
        <span class="keyword">const</span> <span class="keywordtype">bool</span> bConfirmed = pScriptable-&gt;<a class="code" href="class_o_t_scriptable.html#a559702a7d59f37881a892129b911d330">AllPartiesHaveSupposedlyConfirmed</a>();
        <span class="keyword">const</span> <span class="keywordtype">bool</span> bVerified  = pScriptable-&gt;<a class="code" href="class_o_t_scriptable.html#ae83de8305c791c41e58e888cb873def0">VerifyThisAgainstAllPartiesSignedCopies</a>();
        <span class="comment">// -----------------------------------------------------</span>
        <span class="keywordflow">if</span> (<span class="keyword">false</span> == bConfirmed)
        {
<span class="comment">//          OTLog::vOutput(0, &quot;%s: Smart contract loaded up, but all parties are NOT confirmed:\n\n%s\n\n&quot;,</span>
<span class="comment">//                         __FUNCTION__, strContract.Get());</span>
            <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(1, <span class="stringliteral">&quot;%s: Smart contract loaded up, but all parties are NOT confirmed.\n&quot;</span>,
                           __FUNCTION__);
            <span class="keywordflow">return</span> <span class="keyword">false</span>;
        }
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (bVerified)
        {
<span class="comment">//          OTLog::vOutput(0, &quot;%s: Success: Smart contract loaded up, and all parties have confirmed,\n&quot;</span>
<span class="comment">//                         &quot;AND their signed versions verified also.\n&quot;, __FUNCTION__);</span>

            <span class="comment">// Todo security: We have confirmed that all parties have provided signed copies, but we have</span>
            <span class="comment">// not actually verified the signatures themselves. (Though we HAVE verified that their copies of</span>
            <span class="comment">// the contract match the main copy.)</span>
            <span class="comment">// The server DOES verify this before activation, but the client should as well, just in case. Todo.</span>
            <span class="comment">// (I&#39;d want MY client to do it...)</span>
            <span class="comment">//</span>
            <span class="keywordflow">return</span> <span class="keyword">true</span>;
        }
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Suspicious: Smart contract loaded up, and is supposedly confirmed by all parties, &quot;</span>
                       <span class="stringliteral">&quot;but failed to verify:\n\n%s\n\n&quot;</span>, __FUNCTION__, strContract.Get());
    }
    <span class="comment">// -----------------------------------------------------------</span>
    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="adc9632c0a4770131768cb39a5aada718"></a><!-- doxytag: member="OTAPI_Exec::Smart_GetBylawByIndex" ref="adc9632c0a4770131768cb39a5aada718" args="(const std::string &amp;THE_CONTRACT, const int32_t &amp;nIndex)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#adc9632c0a4770131768cb39a5aada718">OTAPI_Exec::Smart_GetBylawByIndex</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_CONTRACT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int32_t &amp;&#160;</td>
          <td class="paramname"><em>nIndex</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>returns the name of the bylaw. </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l05826">5826</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (THE_CONTRACT.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_CONTRACT&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// -----------------------------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strContract(THE_CONTRACT);
    <a class="code" href="class_o_t_scriptable.html">OTScriptable</a> * pScriptable = <a class="code" href="class_o_t_scriptable.html#a4a89cbc1abd2bac0e5dec64da3452b7a">OTScriptable::InstantiateScriptable</a>(strContract);
    <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTScriptable&gt;</a> theContractAngel;
    <span class="keywordflow">if</span> (NULL == pScriptable)
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Failed trying to load smart contract from string:\n\n%s\n\n&quot;</span>,
                       __FUNCTION__, strContract.Get());
    }
    <span class="keywordflow">else</span>
    {
        theContractAngel.<a class="code" href="class_o_t_cleanup.html#a00a399db45f730439d2263d4429d00c1">SetCleanupTarget</a>(*pScriptable);  <span class="comment">// Auto-cleanup.</span>
        <span class="comment">// -----------------------------------------------------</span>
        <span class="keyword">const</span> int32_t nTempIndex = <span class="keyword">static_cast&lt;</span><span class="keyword">const </span>int32_t<span class="keyword">&gt;</span>(nIndex);
        <a class="code" href="class_o_t_bylaw.html">OTBylaw</a> * pBylaw = pScriptable-&gt;<a class="code" href="class_o_t_scriptable.html#addfadf16de3cfbb972ec73e097a8dc81">GetBylawByIndex</a>(nTempIndex); <span class="comment">// has range-checking built-in.</span>
        <span class="comment">// -----------------------------------------------------</span>
        <span class="keywordflow">if</span> (NULL == pBylaw)
        {
            <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Smart contract loaded up, but failed to retrieve the bylaw using index: %d\n&quot;</span>,
                           __FUNCTION__, nTempIndex);
        }
        <span class="keywordflow">else</span> <span class="comment">// We found the bylaw...</span>
        {
            <span class="keyword">const</span> std::string str_name(pBylaw-&gt;<a class="code" href="class_o_t_bylaw.html#ad7c410277a99a3abed22249a8dfd8fb7">GetName</a>().<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());  <span class="comment">// Success.</span>
            <span class="keywordflow">return</span> str_name;
        }
    }
    <span class="comment">// -----------------------------------------------------------</span>
    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="acf89acc77de06a62961d95652495ecd6"></a><!-- doxytag: member="OTAPI_Exec::Smart_GetBylawCount" ref="acf89acc77de06a62961d95652495ecd6" args="(const std::string &amp;THE_CONTRACT)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_a_p_i___exec.html#acf89acc77de06a62961d95652495ecd6">OTAPI_Exec::Smart_GetBylawCount</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_CONTRACT</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l05763">5763</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (THE_CONTRACT.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_CONTRACT&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_string.html">OTString</a> strContract(THE_CONTRACT);
    <a class="code" href="class_o_t_scriptable.html">OTScriptable</a> * pScriptable = <a class="code" href="class_o_t_scriptable.html#a4a89cbc1abd2bac0e5dec64da3452b7a">OTScriptable::InstantiateScriptable</a>(strContract);
    <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTScriptable&gt;</a> theContractAngel;
    <span class="keywordflow">if</span> (NULL == pScriptable)
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Failed trying to load smart contract from string:\n\n%s\n\n&quot;</span>,
                       __FUNCTION__, strContract.Get());
    }
    <span class="keywordflow">else</span>
    {
        theContractAngel.<a class="code" href="class_o_t_cleanup.html#a00a399db45f730439d2263d4429d00c1">SetCleanupTarget</a>(*pScriptable);  <span class="comment">// Auto-cleanup.</span>
        <span class="comment">// -----------------------------------------------------</span>
        <span class="keyword">const</span> int32_t nReturnValue = <span class="keyword">static_cast&lt;</span>int32_t<span class="keyword">&gt;</span>(pScriptable-&gt;<a class="code" href="class_o_t_scriptable.html#a8ceb875e6117eaa14fd02d84e15cb9b3">GetBylawCount</a>());
        <span class="keywordflow">return</span> nReturnValue;
    }
    <span class="comment">// -----------------------------------------------------------</span>
    <span class="keywordflow">return</span> -1; <span class="comment">// Error condition.</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="a468ff276835a0795b1baed7ed7c038fa"></a><!-- doxytag: member="OTAPI_Exec::Smart_GetPartyByIndex" ref="a468ff276835a0795b1baed7ed7c038fa" args="(const std::string &amp;THE_CONTRACT, const int32_t &amp;nIndex)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a468ff276835a0795b1baed7ed7c038fa">OTAPI_Exec::Smart_GetPartyByIndex</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_CONTRACT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int32_t &amp;&#160;</td>
          <td class="paramname"><em>nIndex</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>returns the name of the party. </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l05791">5791</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (THE_CONTRACT.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_CONTRACT&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// -----------------------------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strContract(THE_CONTRACT);
    <a class="code" href="class_o_t_scriptable.html">OTScriptable</a> * pScriptable = <a class="code" href="class_o_t_scriptable.html#a4a89cbc1abd2bac0e5dec64da3452b7a">OTScriptable::InstantiateScriptable</a>(strContract);
    <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTScriptable&gt;</a> theContractAngel;
    <span class="keywordflow">if</span> (NULL == pScriptable)
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Failed trying to load smart contract from string:\n\n%s\n\n&quot;</span>,
                       __FUNCTION__, strContract.Get());
    }
    <span class="keywordflow">else</span>
    {
        theContractAngel.<a class="code" href="class_o_t_cleanup.html#a00a399db45f730439d2263d4429d00c1">SetCleanupTarget</a>(*pScriptable);  <span class="comment">// Auto-cleanup.</span>
        <span class="comment">// -----------------------------------------------------</span>
        <span class="keyword">const</span> int32_t nTempIndex = <span class="keyword">static_cast&lt;</span><span class="keyword">const </span>int32_t<span class="keyword">&gt;</span>(nIndex);
        <a class="code" href="class_o_t_party.html">OTParty</a> * pParty = pScriptable-&gt;<a class="code" href="class_o_t_scriptable.html#a4be857ffbe603f75f1dc5550ed4c20e9">GetPartyByIndex</a>(nTempIndex); <span class="comment">// has range-checking built-in.</span>
        <span class="comment">// -----------------------------------------------------</span>
        <span class="keywordflow">if</span> (NULL == pParty)
        {
            <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Smart contract loaded up, but failed to retrieve the party using index: %d\n&quot;</span>,
                           __FUNCTION__, nTempIndex);
        }
        <span class="keywordflow">else</span> <span class="comment">// We found the party...</span>
        {
            <span class="keywordflow">return</span> pParty-&gt;<a class="code" href="class_o_t_party.html#ad823a9d89b3d8d0d87bc85114eefcead">GetPartyName</a>();
        }
    }
    <span class="comment">// -----------------------------------------------------------</span>
    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a61b506249619e54aa58682ba5c723174"></a><!-- doxytag: member="OTAPI_Exec::Smart_GetPartyCount" ref="a61b506249619e54aa58682ba5c723174" args="(const std::string &amp;THE_CONTRACT)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_a_p_i___exec.html#a61b506249619e54aa58682ba5c723174">OTAPI_Exec::Smart_GetPartyCount</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_CONTRACT</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l05739">5739</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (THE_CONTRACT.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_CONTRACT&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_string.html">OTString</a> strContract(THE_CONTRACT);
    <a class="code" href="class_o_t_scriptable.html">OTScriptable</a> * pScriptable = <a class="code" href="class_o_t_scriptable.html#a4a89cbc1abd2bac0e5dec64da3452b7a">OTScriptable::InstantiateScriptable</a>(strContract);
    <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTScriptable&gt;</a> theContractAngel;
    <span class="keywordflow">if</span> (NULL == pScriptable)
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Failed trying to load smart contract from string:\n\n%s\n\n&quot;</span>,
                       __FUNCTION__, strContract.Get());
    }
    <span class="keywordflow">else</span>
    {
        theContractAngel.<a class="code" href="class_o_t_cleanup.html#a00a399db45f730439d2263d4429d00c1">SetCleanupTarget</a>(*pScriptable);  <span class="comment">// Auto-cleanup.</span>
        <span class="comment">// -----------------------------------------------------</span>
        <span class="keyword">const</span> int32_t nReturnValue = <span class="keyword">static_cast&lt;</span>int32_t<span class="keyword">&gt;</span>(pScriptable-&gt;<a class="code" href="class_o_t_scriptable.html#a862b70e3515a874a4fed101ad4af1a50">GetPartyCount</a>());
        <span class="keywordflow">return</span> nReturnValue;
    }
    <span class="comment">// -----------------------------------------------------------</span>
    <span class="keywordflow">return</span> -1; <span class="comment">// Error condition.</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="a3d40c93db335a728e07be5a52451a891"></a><!-- doxytag: member="OTAPI_Exec::Smart_IsPartyConfirmed" ref="a3d40c93db335a728e07be5a52451a891" args="(const std::string &amp;THE_CONTRACT, const std::string &amp;PARTY_NAME)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_a_p_i___exec.html#a3d40c93db335a728e07be5a52451a891">OTAPI_Exec::Smart_IsPartyConfirmed</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_CONTRACT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>PARTY_NAME</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l05658">5658</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (THE_CONTRACT.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_CONTRACT&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (PARTY_NAME.empty())   { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;PARTY_NAME&quot;</span>   ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// -----------------------------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strContract(THE_CONTRACT);
    <a class="code" href="class_o_t_scriptable.html">OTScriptable</a> * pScriptable = <a class="code" href="class_o_t_scriptable.html#a4a89cbc1abd2bac0e5dec64da3452b7a">OTScriptable::InstantiateScriptable</a>(strContract);
    <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTScriptable&gt;</a> theContractAngel;
    <span class="keywordflow">if</span> (NULL == pScriptable)
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Failed trying to load smart contract from string:\n\n%s\n\n&quot;</span>,
                       __FUNCTION__, strContract.Get());
    }
    <span class="keywordflow">else</span>
    {
        theContractAngel.<a class="code" href="class_o_t_cleanup.html#a00a399db45f730439d2263d4429d00c1">SetCleanupTarget</a>(*pScriptable);  <span class="comment">// Auto-cleanup.</span>
        <span class="comment">// -----------------------------------------------------</span>
        <a class="code" href="class_o_t_party.html">OTParty</a> * pParty = pScriptable-&gt;<a class="code" href="class_o_t_scriptable.html#acd0f8e884ed00f1d082fa498323d8894">GetParty</a>(PARTY_NAME);
        <span class="comment">// -----------------------------------------------------</span>
        <span class="keywordflow">if</span> (NULL == pParty)
        {
            <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Smart contract loaded up, but failed to find a party with the name: %s\n&quot;</span>,
                           __FUNCTION__, PARTY_NAME.c_str());
        }
        <span class="keywordflow">else</span> <span class="comment">// We found the party...</span>
        {
            <span class="comment">//...is he confirmed?</span>
            <span class="comment">//</span>
            <span class="keywordflow">if</span> (<span class="keyword">false</span> == pParty-&gt;<a class="code" href="class_o_t_party.html#a6559c663654d4f9d54628f6116737b47">GetMySignedCopy</a>().<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>())
            {
                <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(1, <span class="stringliteral">&quot;%s: Smart contract loaded up, and party %s was found, &quot;</span>
                               <span class="stringliteral">&quot;but didn&#39;t find a signed copy of the agreement for that party.\n&quot;</span>,
                               __FUNCTION__, PARTY_NAME.c_str());
            }
            <span class="keywordflow">else</span> <span class="comment">// FYI, this block comes from OTScriptable::VerifyThisAgainstAllPartiesSignedCopies.</span>
            {
                <a class="code" href="class_o_t_scriptable.html">OTScriptable</a> * pPartySignedCopy = <a class="code" href="class_o_t_scriptable.html#a4a89cbc1abd2bac0e5dec64da3452b7a">OTScriptable::InstantiateScriptable</a>(pParty-&gt;<a class="code" href="class_o_t_party.html#a6559c663654d4f9d54628f6116737b47">GetMySignedCopy</a>());
                <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTScriptable&gt;</a> theCopyAngel;

                <span class="keywordflow">if</span> (NULL == pPartySignedCopy)
                {
                    <span class="keyword">const</span> std::string current_party_name(pParty-&gt;<a class="code" href="class_o_t_party.html#ad823a9d89b3d8d0d87bc85114eefcead">GetPartyName</a>());
                    <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error loading party&#39;s (%s) signed copy of agreement. Has it been executed?\n&quot;</span>,
                                  __FUNCTION__, current_party_name.c_str());
                }
                <span class="keywordflow">else</span>
                {
                    theCopyAngel.SetCleanupTarget(*pPartySignedCopy);
                    <span class="comment">// ----------------------</span>
                    <span class="keywordflow">if</span> ( <span class="keyword">false</span> == pScriptable-&gt;<a class="code" href="class_o_t_scriptable.html#aa4735bf6c25261ea1a021fd8afb57916">Compare</a>(*pPartySignedCopy) )
                    {
                        <span class="keyword">const</span> std::string current_party_name(pParty-&gt;<a class="code" href="class_o_t_party.html#ad823a9d89b3d8d0d87bc85114eefcead">GetPartyName</a>());
                        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Suspicious: Party&#39;s (%s) signed copy of agreement doesn&#39;t match the contract.\n&quot;</span>,
                                      __FUNCTION__, current_party_name.c_str());
                    }
                    <span class="keywordflow">else</span>
                    {
                        <span class="comment">// TODO Security: This function doesn&#39;t actually verify the party&#39;s SIGNATURE on his signed</span>
                        <span class="comment">// version, only that it exists and it matches the main contract.</span>
                        <span class="comment">//</span>
                        <span class="comment">// The actual signatures are all verified by the server before activation, but I&#39;d still like the client</span>
                        <span class="comment">// to have the option to do so as well. I can imagine getting someone&#39;s signature on something (without</span>
                        <span class="comment">// signing it yourself) and then just retaining the OPTION to sign it later -- but he might not have</span>
                        <span class="comment">// actually signed it if he knew that you hadn&#39;t either. He&#39;d want his client to tell him, if this were</span>
                        <span class="comment">// the case. Todo.</span>

                        <span class="keywordflow">return</span> <span class="keyword">true</span>;
                    }
                }
            }
        }
    }
    <span class="comment">// -----------------------------------------------------------</span>
    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a2a052a570cd5fcaef7b58aebb895096f"></a><!-- doxytag: member="OTAPI_Exec::SmartContract_AddAccount" ref="a2a052a570cd5fcaef7b58aebb895096f" args="(const std::string &amp;THE_CONTRACT, const std::string &amp;SIGNER_NYM_ID, const std::string &amp;PARTY_NAME, const std::string &amp;ACCT_NAME, const std::string &amp;ASSET_TYPE_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a2a052a570cd5fcaef7b58aebb895096f">OTAPI_Exec::SmartContract_AddAccount</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_CONTRACT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SIGNER_NYM_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>PARTY_NAME</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ACCT_NAME</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ASSET_TYPE_ID</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l05455">5455</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (THE_CONTRACT.empty())       { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_CONTRACT&quot;</span>       ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (SIGNER_NYM_ID.empty())      { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SIGNER_NYM_ID&quot;</span>      ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (PARTY_NAME.empty())         { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;PARTY_NAME&quot;</span>         ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (ACCT_NAME.empty())          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;ACCT_NAME&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
<span class="comment">//  if (ASSET_TYPE_ID.empty())      { OTLog::vError(&quot;%s: Null: %s passed in!\n&quot;, __FUNCTION__, &quot;ASSET_TYPE_ID&quot;      ); OT_FAIL; }</span>

    <span class="comment">// -----------------------------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a>      strContract(THE_CONTRACT),  strPartyName(PARTY_NAME),
        strAcctName(ACCT_NAME),     strAssetTypeID(ASSET_TYPE_ID);
    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theSignerNymID(SIGNER_NYM_ID);
    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_string.html">OTString</a> strOutput;

    <span class="keyword">const</span> <span class="keywordtype">bool</span> &amp; bAdded = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a47bbd248e72e8d45609a5365f7fa5187">SmartContract_AddAccount</a>(strContract,        <span class="comment">// The contract, about to have the clause added to it.</span>
        theSignerNymID, <span class="comment">// Use any Nym you wish here. (The signing at this point32_t is only to cause a save.)</span>
        <span class="comment">// ----------------------------------------</span>
        strPartyName,       <span class="comment">// The Party&#39;s NAME as referenced in the smart contract. (And the scripts...)</span>
        <span class="comment">// ----------------------------------------</span>
        strAcctName,        <span class="comment">// The Account&#39;s name as referenced in the smart contract</span>
        strAssetTypeID, <span class="comment">// Asset Type ID for the Account.</span>
        strOutput);
    <span class="keywordflow">if</span> (!bAdded || !strOutput.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>())
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    <span class="comment">// -----------------------------------------------------</span>
    <span class="comment">// Success!</span>
    <span class="comment">//</span>
    std::string pBuf = strOutput.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();



    <span class="keywordflow">return</span> pBuf;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a9757000f80a55ac82268036dc50dc01c"></a><!-- doxytag: member="OTAPI_Exec::SmartContract_AddBylaw" ref="a9757000f80a55ac82268036dc50dc01c" args="(const std::string &amp;THE_CONTRACT, const std::string &amp;SIGNER_NYM_ID, const std::string &amp;BYLAW_NAME)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a9757000f80a55ac82268036dc50dc01c">OTAPI_Exec::SmartContract_AddBylaw</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_CONTRACT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SIGNER_NYM_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>BYLAW_NAME</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l05187">5187</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (THE_CONTRACT.empty())  { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_CONTRACT&quot;</span>  ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (SIGNER_NYM_ID.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SIGNER_NYM_ID&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (BYLAW_NAME.empty())    { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;BYLAW_NAME&quot;</span>    ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// -----------------------------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a>      strContract(THE_CONTRACT), strBylawName(BYLAW_NAME);
    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>  theSignerNymID(SIGNER_NYM_ID);
    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_string.html">OTString</a> strOutput;

    <span class="keyword">const</span> <span class="keywordtype">bool</span> &amp; bAdded = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a68be6928764334d775d466f0e4725d72">SmartContract_AddBylaw</a>(strContract,      <span class="comment">// The contract, about to have the bylaw added to it.</span>
        theSignerNymID, <span class="comment">// Use any Nym you wish here. (The signing at this point32_t is only to cause a save.)</span>
        strBylawName,       <span class="comment">// The Bylaw&#39;s NAME as referenced in the smart contract. (And the scripts...)</span>
        strOutput);
    <span class="keywordflow">if</span> (!bAdded || !strOutput.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>())
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    <span class="comment">// -----------------------------------------------------</span>
    <span class="comment">// Success!</span>
    <span class="comment">//</span>
    std::string pBuf = strOutput.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();

    <span class="keywordflow">return</span> pBuf;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa61e5835f6d10923e42800f2e1dc09bf"></a><!-- doxytag: member="OTAPI_Exec::SmartContract_AddCallback" ref="aa61e5835f6d10923e42800f2e1dc09bf" args="(const std::string &amp;THE_CONTRACT, const std::string &amp;SIGNER_NYM_ID, const std::string &amp;BYLAW_NAME, const std::string &amp;CALLBACK_NAME, const std::string &amp;CLAUSE_NAME)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#aa61e5835f6d10923e42800f2e1dc09bf">OTAPI_Exec::SmartContract_AddCallback</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_CONTRACT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SIGNER_NYM_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>BYLAW_NAME</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>CALLBACK_NAME</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>CLAUSE_NAME</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l05316">5316</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (THE_CONTRACT.empty())       { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_CONTRACT&quot;</span>       ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (SIGNER_NYM_ID.empty())      { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SIGNER_NYM_ID&quot;</span>      ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (BYLAW_NAME.empty())         { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;BYLAW_NAME&quot;</span>         ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (CALLBACK_NAME.empty())      { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;CALLBACK_NAME&quot;</span>      ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (CLAUSE_NAME.empty())        { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;CLAUSE_NAME&quot;</span>        ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="comment">// -----------------------------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a>      strContract(THE_CONTRACT),  strBylawName(BYLAW_NAME),
        strCallbackName(CALLBACK_NAME), strClauseName(CLAUSE_NAME);
    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theSignerNymID(SIGNER_NYM_ID);
    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_string.html">OTString</a> strOutput;

    <span class="keyword">const</span> <span class="keywordtype">bool</span> &amp; bAdded = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#acb0a85ed4e9125dea813ba87e2e9ecf8">SmartContract_AddCallback</a>(strContract,       <span class="comment">// The contract, about to have the clause added to it.</span>
        theSignerNymID, <span class="comment">// Use any Nym you wish here. (The signing at this point32_t is only to cause a save.)</span>
        <span class="comment">// ----------------------------------------</span>
        strBylawName,   <span class="comment">// Should already be on the contract. (This way we can find it.)</span>
        <span class="comment">// ----------------------------------------</span>
        strCallbackName,    <span class="comment">// The Callback&#39;s name as referenced in the smart contract. (And the scripts...)</span>
        strClauseName,  <span class="comment">// The actual clause that will be triggered by the callback. (Must exist.)</span>
        strOutput);
    <span class="keywordflow">if</span> (!bAdded || !strOutput.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>())
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    <span class="comment">// -----------------------------------------------------</span>
    <span class="comment">// Success!</span>
    <span class="comment">//</span>
    std::string pBuf = strOutput.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();



    <span class="keywordflow">return</span> pBuf;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac74dd9091ee7eb88601e88df9efde414"></a><!-- doxytag: member="OTAPI_Exec::SmartContract_AddClause" ref="ac74dd9091ee7eb88601e88df9efde414" args="(const std::string &amp;THE_CONTRACT, const std::string &amp;SIGNER_NYM_ID, const std::string &amp;BYLAW_NAME, const std::string &amp;CLAUSE_NAME, const std::string &amp;SOURCE_CODE)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#ac74dd9091ee7eb88601e88df9efde414">OTAPI_Exec::SmartContract_AddClause</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_CONTRACT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SIGNER_NYM_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>BYLAW_NAME</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>CLAUSE_NAME</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SOURCE_CODE</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l05222">5222</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (THE_CONTRACT.empty())       { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_CONTRACT&quot;</span>       ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (SIGNER_NYM_ID.empty())      { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SIGNER_NYM_ID&quot;</span>      ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (BYLAW_NAME.empty())         { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;BYLAW_NAME&quot;</span>         ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (CLAUSE_NAME.empty())        { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;CLAUSE_NAME&quot;</span>        ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (SOURCE_CODE.empty())        { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SOURCE_CODE&quot;</span>        ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="comment">// -----------------------------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a>      strContract(THE_CONTRACT),  strBylawName(BYLAW_NAME),
        strClauseName(CLAUSE_NAME), strSourceCode(SOURCE_CODE);
    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>  theSignerNymID(SIGNER_NYM_ID);
    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_string.html">OTString</a> strOutput;

    <span class="keyword">const</span> <span class="keywordtype">bool</span> &amp; bAdded = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a495e1b59fcfedf265a853665c7e2f73c">SmartContract_AddClause</a>(strContract, <span class="comment">// The contract, about to have the clause added to it.</span>
        theSignerNymID, <span class="comment">// Use any Nym you wish here. (The signing at this point32_t is only to cause a save.)</span>
        <span class="comment">// ----------------------------------------</span>
        strBylawName,   <span class="comment">// Should already be on the contract. (This way we can find it.)</span>
        <span class="comment">// ----------------------------------------</span>
        strClauseName,  <span class="comment">// The Clause&#39;s name as referenced in the smart contract. (And the scripts...)</span>
        strSourceCode,  <span class="comment">// The actual source code for the clause.</span>
        strOutput);
    <span class="keywordflow">if</span> (!bAdded || !strOutput.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>())
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    <span class="comment">// -----------------------------------------------------</span>
    <span class="comment">// Success!</span>
    <span class="comment">//</span>
    std::string pBuf = strOutput.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();



    <span class="keywordflow">return</span> pBuf;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a7abd80748cf7bba19b3f6edeb4a20f61"></a><!-- doxytag: member="OTAPI_Exec::SmartContract_AddHook" ref="a7abd80748cf7bba19b3f6edeb4a20f61" args="(const std::string &amp;THE_CONTRACT, const std::string &amp;SIGNER_NYM_ID, const std::string &amp;BYLAW_NAME, const std::string &amp;HOOK_NAME, const std::string &amp;CLAUSE_NAME)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a7abd80748cf7bba19b3f6edeb4a20f61">OTAPI_Exec::SmartContract_AddHook</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_CONTRACT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SIGNER_NYM_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>BYLAW_NAME</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>HOOK_NAME</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>CLAUSE_NAME</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l05362">5362</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (THE_CONTRACT.empty())       { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_CONTRACT&quot;</span>       ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (SIGNER_NYM_ID.empty())      { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SIGNER_NYM_ID&quot;</span>      ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (BYLAW_NAME.empty())         { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;BYLAW_NAME&quot;</span>         ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (HOOK_NAME.empty())          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;HOOK_NAME&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (CLAUSE_NAME.empty())        { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;CLAUSE_NAME&quot;</span>        ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="comment">// -----------------------------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a>      strContract(THE_CONTRACT),  strBylawName(BYLAW_NAME),
        strHookName(HOOK_NAME),     strClauseName(CLAUSE_NAME);
    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theSignerNymID(SIGNER_NYM_ID);
    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_string.html">OTString</a> strOutput;

    <span class="keyword">const</span> <span class="keywordtype">bool</span> &amp; bAdded = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#ae4c6e55f20c7609a2a6b774505483bab">SmartContract_AddHook</a>(strContract,       <span class="comment">// The contract, about to have the clause added to it.</span>
        theSignerNymID, <span class="comment">// Use any Nym you wish here. (The signing at this point32_t is only to cause a save.)</span>
        <span class="comment">// ----------------------------------------</span>
        strBylawName,   <span class="comment">// Should already be on the contract. (This way we can find it.)</span>
        <span class="comment">// ----------------------------------------</span>
        strHookName,        <span class="comment">// The Hook&#39;s name as referenced in the smart contract. (And the scripts...)</span>
        strClauseName,  <span class="comment">// The actual clause that will be triggered by the hook. (You can call this multiple times, and have multiple clauses trigger on the same hook.)</span>
        strOutput);
    <span class="keywordflow">if</span> (!bAdded || !strOutput.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>())
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    <span class="comment">// -----------------------------------------------------</span>
    <span class="comment">// Success!</span>
    <span class="comment">//</span>
    std::string pBuf = strOutput.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();



    <span class="keywordflow">return</span> pBuf;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a286cb092b658e466d02282075858aadd"></a><!-- doxytag: member="OTAPI_Exec::SmartContract_AddParty" ref="a286cb092b658e466d02282075858aadd" args="(const std::string &amp;THE_CONTRACT, const std::string &amp;SIGNER_NYM_ID, const std::string &amp;PARTY_NAME, const std::string &amp;AGENT_NAME)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a286cb092b658e466d02282075858aadd">OTAPI_Exec::SmartContract_AddParty</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_CONTRACT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SIGNER_NYM_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>PARTY_NAME</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>AGENT_NAME</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l05410">5410</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (THE_CONTRACT.empty())  { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_CONTRACT&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (SIGNER_NYM_ID.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SIGNER_NYM_ID&quot;</span>); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (PARTY_NAME.empty())    { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;PARTY_NAME&quot;</span>   ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (AGENT_NAME.empty())    { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;AGENT_NAME&quot;</span>   ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// -----------------------------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a>      strContract(THE_CONTRACT),  strPartyName(PARTY_NAME),
        strAgentName(AGENT_NAME);
    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theSignerNymID(SIGNER_NYM_ID);
    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_string.html">OTString</a> strOutput;

    <span class="keyword">const</span> <span class="keywordtype">bool</span> &amp; bAdded = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a357d0c597723cd9b03bb77b8636ec1ca">SmartContract_AddParty</a>(strContract,      <span class="comment">// The contract, about to have the bylaw added to it.</span>
        theSignerNymID, <span class="comment">// Use any Nym you wish here. (The signing at this point32_t is only to cause a save.)</span>
        <span class="comment">// ----------------------------------------</span>
        strPartyName,       <span class="comment">// The Party&#39;s NAME as referenced in the smart contract. (And the scripts...)</span>
        strAgentName,       <span class="comment">// An AGENT will be added by default for this party. Need Agent NAME.</span>
        strOutput);
    <span class="keywordflow">if</span> (!bAdded || !strOutput.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>())
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    <span class="comment">// -----------------------------------------------------</span>
    <span class="comment">// Success!</span>
    <span class="comment">//</span>
    std::string pBuf = strOutput.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();
    <span class="keywordflow">return</span> pBuf;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac5f3dd89fb7ec6869d67374ef05457ad"></a><!-- doxytag: member="OTAPI_Exec::SmartContract_AddVariable" ref="ac5f3dd89fb7ec6869d67374ef05457ad" args="(const std::string &amp;THE_CONTRACT, const std::string &amp;SIGNER_NYM_ID, const std::string &amp;BYLAW_NAME, const std::string &amp;VAR_NAME, const std::string &amp;VAR_ACCESS, const std::string &amp;VAR_TYPE, const std::string &amp;VAR_VALUE)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#ac5f3dd89fb7ec6869d67374ef05457ad">OTAPI_Exec::SmartContract_AddVariable</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_CONTRACT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SIGNER_NYM_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>BYLAW_NAME</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>VAR_NAME</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>VAR_ACCESS</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>VAR_TYPE</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>VAR_VALUE</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l05266">5266</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (THE_CONTRACT.empty())  { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_CONTRACT&quot;</span>  ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (SIGNER_NYM_ID.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SIGNER_NYM_ID&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (BYLAW_NAME.empty())    { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;BYLAW_NAME&quot;</span>    ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (VAR_NAME.empty())      { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;VAR_NAME&quot;</span>      ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (VAR_ACCESS.empty())    { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;VAR_ACCESS&quot;</span>    ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (VAR_TYPE.empty())      { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;VAR_TYPE&quot;</span>      ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
<span class="comment">//  if (VAR_VALUE.empty())     { OTLog::vError(&quot;%s: Null: %s passed in!\n&quot;, __FUNCTION__, &quot;VAR_VALUE&quot;     ); OT_FAIL; }</span>
    <span class="comment">// -----------------------------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a>      strContract(THE_CONTRACT),  strBylawName(BYLAW_NAME),
                        strVarName(VAR_NAME),       strVarAccess(VAR_ACCESS),
                        strVarType(VAR_TYPE),       strVarValue(VAR_VALUE);
    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>  theSignerNymID(SIGNER_NYM_ID);
    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_string.html">OTString</a> strOutput;

    <span class="keyword">const</span> <span class="keywordtype">bool</span> &amp; bAdded = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a561b64935144d650a1790b614a593be8">SmartContract_AddVariable</a>(strContract,       <span class="comment">// The contract, about to have the clause added to it.</span>
        theSignerNymID, <span class="comment">// Use any Nym you wish here. (The signing at this point32_t is only to cause a save.)</span>
        <span class="comment">// ----------------------------------------</span>
        strBylawName,   <span class="comment">// Should already be on the contract. (This way we can find it.)</span>
        <span class="comment">// ----------------------------------------</span>
        strVarName,     <span class="comment">// The Variable&#39;s name as referenced in the smart contract. (And the scripts...)</span>
        strVarAccess,   <span class="comment">// &quot;constant&quot;, &quot;persistent&quot;, or &quot;important&quot;.</span>
        strVarType,     <span class="comment">// &quot;string&quot;, &quot;int64_t&quot;, or &quot;bool&quot;</span>
        strVarValue,        <span class="comment">// Contains a string. If type is int64_t, StringToLong() will be used to convert value to a int64_t. If type is bool, the strings &quot;true&quot; or &quot;false&quot; are expected here in order to convert to a bool.</span>
        <span class="comment">// ----------------------------------------</span>
        strOutput);
    <span class="keywordflow">if</span> (!bAdded || !strOutput.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>())
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    <span class="comment">// -----------------------------------------------------</span>
    <span class="comment">// Success!</span>
    <span class="comment">//</span>
    std::string pBuf = strOutput.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();
    <span class="keywordflow">return</span> pBuf;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a633214d91a3563d6ea8ba0412a60d9e1"></a><!-- doxytag: member="OTAPI_Exec::SmartContract_ConfirmAccount" ref="a633214d91a3563d6ea8ba0412a60d9e1" args="(const std::string &amp;THE_CONTRACT, const std::string &amp;SIGNER_NYM_ID, const std::string &amp;PARTY_NAME, const std::string &amp;ACCT_NAME, const std::string &amp;AGENT_NAME, const std::string &amp;ACCT_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a633214d91a3563d6ea8ba0412a60d9e1">OTAPI_Exec::SmartContract_ConfirmAccount</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_CONTRACT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SIGNER_NYM_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>PARTY_NAME</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ACCT_NAME</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>AGENT_NAME</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ACCT_ID</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>---------------------------------------- Used when taking a theoretical smart contract, and setting it up to use specific Nyms and accounts. This function sets the ACCT ID for the acct specified by party name and acct name. Returns the updated smart contract (or NULL.) </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l05530">5530</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (THE_CONTRACT.empty())       { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_CONTRACT&quot;</span>       ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (SIGNER_NYM_ID.empty())      { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SIGNER_NYM_ID&quot;</span>      ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (PARTY_NAME.empty())         { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;PARTY_NAME&quot;</span>         ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (ACCT_NAME.empty())          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;ACCT_NAME&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (AGENT_NAME.empty())         { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;AGENT_NAME&quot;</span>         ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (ACCT_ID.empty())            { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;ACCT_ID&quot;</span>            ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// -----------------------------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a>      strContract(THE_CONTRACT), strPartyName(PARTY_NAME);
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a>      strAccountID(ACCT_ID), strAcctName(ACCT_NAME), strAgentName(AGENT_NAME);
    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>  theSignerNymID(SIGNER_NYM_ID), theAcctID(strAccountID);
    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_string.html">OTString</a> strOutput;

    <span class="keyword">const</span> <span class="keywordtype">bool</span> &amp; bConfirmed = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a10954b356a026ea6729ece4d16b281eb">SmartContract_ConfirmAccount</a>(strContract,
                                                                                theSignerNymID,
                                                                                strPartyName,
                                                                                strAcctName,
                                                                                strAgentName,
                                                                                strAccountID,
                                                                                strOutput);
    <span class="keywordflow">if</span> (!bConfirmed || !strOutput.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>())
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    <span class="comment">// -----------------------------------------------------</span>
    <span class="comment">// Success!</span>
    <span class="comment">//</span>
    std::string pBuf = strOutput.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();
    <span class="keywordflow">return</span> pBuf;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad69b7dcad7d5271e9987900ba6e1d5bb"></a><!-- doxytag: member="OTAPI_Exec::SmartContract_ConfirmParty" ref="ad69b7dcad7d5271e9987900ba6e1d5bb" args="(const std::string &amp;THE_CONTRACT, const std::string &amp;PARTY_NAME, const std::string &amp;NYM_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#ad69b7dcad7d5271e9987900ba6e1d5bb">OTAPI_Exec::SmartContract_ConfirmParty</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_CONTRACT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>PARTY_NAME</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>NYM_ID</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>---------------------------------------- Called by each Party. Pass in the smart contract obtained in the above call. Call <a class="el" href="class_o_t_a_p_i___exec.html#a633214d91a3563d6ea8ba0412a60d9e1">SmartContract_ConfirmAccount()</a> first, as much as you need to. Returns the updated smart contract (or NULL.) </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l05575">5575</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (THE_CONTRACT.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_CONTRACT&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (PARTY_NAME.empty())   { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;PARTY_NAME&quot;</span>   ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (NYM_ID.empty())       { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;NYM_ID&quot;</span>       ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// -----------------------------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>  theNymID(NYM_ID);
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a>      strContract(THE_CONTRACT), strPartyName(PARTY_NAME);
    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_string.html">OTString</a> strOutput;

    <span class="keyword">const</span> <span class="keywordtype">bool</span> &amp; bConfirmed = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a3c1974fc1798d311264ff55ef1724dcf">SmartContract_ConfirmParty</a>(strContract,  <span class="comment">// The smart contract, about to be changed by this function.</span>
        strPartyName,   <span class="comment">// Should already be on the contract. This way we can find it.</span>
        <span class="comment">// ----------------------------------------</span>
        theNymID,       <span class="comment">// Nym ID for the party, the actual owner,</span>
        strOutput);
    <span class="keywordflow">if</span> (!bConfirmed || !strOutput.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>())
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    <span class="comment">// -----------------------------------------------------</span>
    <span class="comment">// Success!</span>
    <span class="comment">//</span>
    std::string pBuf = strOutput.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();
    <span class="keywordflow">return</span> pBuf;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a3007ed01f5915c23604c987b9d9ba30d"></a><!-- doxytag: member="OTAPI_Exec::SmartContract_CountNumsNeeded" ref="a3007ed01f5915c23604c987b9d9ba30d" args="(const std::string &amp;THE_CONTRACT, const std::string &amp;AGENT_NAME)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_a_p_i___exec.html#a3007ed01f5915c23604c987b9d9ba30d">OTAPI_Exec::SmartContract_CountNumsNeeded</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_CONTRACT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>AGENT_NAME</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This function returns the count of how many trans::s a Nym needs in order to confirm as a specific agent for a contract. (An opening number is needed for every party of which agent is the authorizing agent, plus a closing number for every acct of which agent is the authorized agent.) </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l05510">5510</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (THE_CONTRACT.empty())       { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_CONTRACT&quot;</span>       ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (AGENT_NAME.empty())         { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;AGENT_NAME&quot;</span>         ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// -------------------------------------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a>      strContract(THE_CONTRACT), strAgentName(AGENT_NAME);
    <span class="comment">// -------------------------------------------------------------</span>
    <span class="comment">//</span>
    <span class="keyword">const</span> int32_t &amp; nCount = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#ae9ebf14defb8aa50c6c40a1b20fbe20d">SmartContract_CountNumsNeeded</a>(strContract, strAgentName);

    <span class="keywordflow">return</span> nCount;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a0188891ee269124f924f7b39e32e4ce7"></a><!-- doxytag: member="OTAPI_Exec::StringToAmount" ref="a0188891ee269124f924f7b39e32e4ce7" args="(const std::string &amp;ASSET_TYPE_ID, const std::string &amp;str_input)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64_t <a class="el" href="class_o_t_a_p_i___exec.html#a0188891ee269124f924f7b39e32e4ce7">OTAPI_Exec::StringToAmount</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ASSET_TYPE_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>str_input</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>StringToAmount: Input: currency contract, formatted string. (And locale, internally.) Output: "$5.45" becomes 545 (for example.)</p>
<p>Returns amount from formatted string, based on currency contract and locale. </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l01257">1257</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// -----------------------------------------------------</span>
    <span class="keywordtype">bool</span> bIsInitialized = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#af11b60d083c4a8e1e68a59a0824899d4">IsInitialized</a>();
    <span class="keywordflow">if</span> (!bIsInitialized)       { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Not initialized; call OT_API::Init first.\n&quot;</span>,__FUNCTION__); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (ASSET_TYPE_ID.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Empty %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;ASSET_TYPE_ID&quot;</span>    ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// -----------------------------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theAssetID(ASSET_TYPE_ID);
    <a class="code" href="class_o_t_asset_contract.html">OTAssetContract</a> * pContract = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a291b0f7c5298ceecc8d4aa929146d4db">GetAssetType</a>(theAssetID, __FUNCTION__);
    <span class="keywordflow">if</span> (NULL == pContract) <span class="keywordflow">return</span> 0;
    <span class="comment">// By this point, pContract is a good pointer.  (No need to cleanup.)</span>
    <span class="comment">// --------------------------------------------------------------------</span>
    <a class="code" href="class_o_t_amount.html">OTAmount</a>        theResult;
    <span class="keyword">const</span> int64_t   lBackup = <a class="code" href="class_o_t_a_p_i___exec.html#a1990c82970f94e5e7ca00f9e78d645c9">StringToLong</a>(str_input);
    <span class="keyword">const</span> <span class="keywordtype">bool</span>      bParsed = pContract-&gt;<a class="code" href="class_o_t_asset_contract.html#a31632d6a9bd0efb34c427b04f3bd2b37">StringToAmount</a>(theResult, str_input); <span class="comment">// Convert $5.45 to 545.</span>

    <span class="keywordflow">if</span> (bParsed)
        <span class="keywordflow">return</span> theResult.<a class="code" href="class_o_t_amount.html#a10d1ed25cf2a5262c4f1c73a39663a1c">GetAmount</a>();

    <span class="keywordflow">return</span> lBackup;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a1990c82970f94e5e7ca00f9e78d645c9"></a><!-- doxytag: member="OTAPI_Exec::StringToLong" ref="a1990c82970f94e5e7ca00f9e78d645c9" args="(const std::string &amp;strNumber)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64_t <a class="el" href="class_o_t_a_p_i___exec.html#a1990c82970f94e5e7ca00f9e78d645c9">OTAPI_Exec::StringToLong</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>strNumber</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l00291">291</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> <a class="code" href="class_o_t_a_p_i___exec.html#a1990c82970f94e5e7ca00f9e78d645c9">OTString::StringToLong</a>(strNumber);
}
</pre></div>
</div>
</div>
<a class="anchor" id="af0e3de0bfdee8ea9bc6dcb6e58fee398"></a><!-- doxytag: member="OTAPI_Exec::StringToUlong" ref="af0e3de0bfdee8ea9bc6dcb6e58fee398" args="(const std::string &amp;strNumber)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t <a class="el" href="class_o_t_a_p_i___exec.html#af0e3de0bfdee8ea9bc6dcb6e58fee398">OTAPI_Exec::StringToUlong</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>strNumber</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l00309">309</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> <a class="code" href="class_o_t_a_p_i___exec.html#af0e3de0bfdee8ea9bc6dcb6e58fee398">OTString::StringToUlong</a>(strNumber);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a0417d34f4d85922e732f4a835cb53c6a"></a><!-- doxytag: member="OTAPI_Exec::SwitchWallet" ref="a0417d34f4d85922e732f4a835cb53c6a" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_a_p_i___exec.html#a0417d34f4d85922e732f4a835cb53c6a">OTAPI_Exec::SwitchWallet</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>SWITCH WALLET (experimental)</p>
<p>Experimental. Set the new wallet with the "SET WALLET FILENAME" function. Then call this function to switch to the new wallet. </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l00388">388</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a3a0ae20d8736f8588d76441a18ac2c6e">LoadWallet</a>();
}
</pre></div>
</div>
</div>
<a class="anchor" id="a87fe72dc0aa6fc6f384f87bc3b5269ac"></a><!-- doxytag: member="OTAPI_Exec::SymmetricDecrypt" ref="a87fe72dc0aa6fc6f384f87bc3b5269ac" args="(const std::string &amp;SYMMETRIC_KEY, const std::string &amp;CIPHERTEXT_ENVELOPE)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a87fe72dc0aa6fc6f384f87bc3b5269ac">OTAPI_Exec::SymmetricDecrypt</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SYMMETRIC_KEY</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>CIPHERTEXT_ENVELOPE</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l04338">4338</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SYMMETRIC_KEY.empty())      { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SYMMETRIC_KEY&quot;</span>      ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (CIPHERTEXT_ENVELOPE.empty()){ <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;CIPHERTEXT_ENVELOPE&quot;</span>); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// ---------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a>  strKey(SYMMETRIC_KEY);
    <a class="code" href="class_o_t_string.html">OTString</a>  strCiphertext(CIPHERTEXT_ENVELOPE);
    <span class="comment">// ---------------------------</span>
    <a class="code" href="class_o_t_string.html">OTString</a>  strOutput;
    <span class="comment">// ---------------------------</span>
    std::string    strDisplay = <span class="stringliteral">&quot;OTAPI: Decrypting a password-protected ciphertext.&quot;</span>;
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a>  otstrDisplay(strDisplay);
    <span class="comment">// ---------------------------</span>
    <span class="keyword">const</span> <span class="keywordtype">bool</span> &amp;      bSuccess  = <a class="code" href="class_o_t_a_p_i___exec.html#ae28cbabad8107e944b504986f929300f">OTSymmetricKey::Decrypt</a>(strKey, strCiphertext, strOutput, &amp;otstrDisplay);<span class="comment">//pAlreadyHavePW=&quot;&quot;</span>

    <span class="keywordflow">if</span> (!bSuccess)
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;

    std::string pBuf = strOutput.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();

    <span class="keywordflow">return</span> pBuf;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a2ef85cec19e635f13c565dd93359589e"></a><!-- doxytag: member="OTAPI_Exec::SymmetricEncrypt" ref="a2ef85cec19e635f13c565dd93359589e" args="(const std::string &amp;SYMMETRIC_KEY, const std::string &amp;PLAintEXT)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a2ef85cec19e635f13c565dd93359589e">OTAPI_Exec::SymmetricEncrypt</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SYMMETRIC_KEY</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>PLAintEXT</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l04311">4311</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SYMMETRIC_KEY.empty())      { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SYMMETRIC_KEY&quot;</span>      ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (PLAINTEXT.empty())          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;PLAINTEXT&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// ---------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a>  strKey(SYMMETRIC_KEY);
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a>  strPlaintext(PLAINTEXT);
    <span class="comment">// -----------------------------------</span>
    <a class="code" href="class_o_t_string.html">OTString</a>  strOutput;
    <span class="comment">// ---------------------------</span>
    std::string    strDisplay = <span class="stringliteral">&quot;OTAPI: Password-protecting a plaintext.&quot;</span>;
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a>  otstrDisplay(strDisplay);
    <span class="comment">// ---------------------------</span>
    <span class="keyword">const</span> <span class="keywordtype">bool</span> &amp;      bSuccess = <a class="code" href="class_o_t_a_p_i___exec.html#a4daf6ceaab8227c0eb5deb777d8337df">OTSymmetricKey::Encrypt</a>(strKey, strPlaintext, strOutput, &amp;otstrDisplay); <span class="comment">//bBookends=true, pAlreadyHavePW=&quot;&quot;</span>

    <span class="keywordflow">if</span> (!bSuccess)
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;

    std::string pBuf = strOutput.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();

    <span class="keywordflow">return</span> pBuf;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a69c71e95a4ef9eb2bb19937618735fbe"></a><!-- doxytag: member="OTAPI_Exec::Token_ChangeOwner" ref="a69c71e95a4ef9eb2bb19937618735fbe" args="(const std::string &amp;SERVER_ID, const std::string &amp;ASSET_TYPE_ID, const std::string &amp;THE_TOKEN, const std::string &amp;SIGNER_NYM_ID, const std::string &amp;OLD_OWNER, const std::string &amp;NEW_OWNER)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a69c71e95a4ef9eb2bb19937618735fbe">OTAPI_Exec::Token_ChangeOwner</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ASSET_TYPE_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_TOKEN</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SIGNER_NYM_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>OLD_OWNER</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>NEW_OWNER</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Tokens are stored in an encrypted state for security reasons. This function is used for exporting those tokens to another Nym, such as a Dummy nym, or another user's Nym. </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l11733">11733</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty())          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (ASSET_TYPE_ID.empty())      { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;ASSET_TYPE_ID&quot;</span>      ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (THE_TOKEN.empty())          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_TOKEN&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (SIGNER_NYM_ID.empty())      { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SIGNER_NYM_ID&quot;</span>      ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (OLD_OWNER.empty())          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;OLD_OWNER&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (NEW_OWNER.empty())          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;NEW_OWNER&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="comment">// -----------------------------------------------------</span>
    std::string strFunc = __FUNCTION__; <span class="comment">//OTAPI_Exec::Token_ChangeOwner</span>
    <span class="comment">// -----------------------------------------------------</span>
    <span class="keyword">const</span>
        <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>    theServerID(SERVER_ID),
        theAssetTypeID(ASSET_TYPE_ID),
        theSignerNymID(SIGNER_NYM_ID);
    <span class="comment">// -----------------------------------------------------</span>
    <span class="keyword">const</span>
        <a class="code" href="class_o_t_string.html">OTString</a>      strOldOwner(OLD_OWNER), <span class="comment">// Either of these MIGHT contain a Nym ID, OR might contain a purse...</span>
        strNewOwner(NEW_OWNER); <span class="comment">// (purse is passed in cases where the token is encrypted with a passphrase aka symmetric crypto, versus being encrypted to a Nym&#39;s public key.)</span>
    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_string.html">OTString</a>      strToken   (THE_TOKEN);
    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_token.html">OTToken</a> * pToken = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a7183d283456ab1e13c01f88b71062828">Token_ChangeOwner</a>(theServerID, theAssetTypeID,
        strToken, theSignerNymID,
        strOldOwner,  <span class="comment">// Pass a NymID here as a string, or a purse. (IF symmetrically encrypted, the relevant key is in the purse.)</span>
        strNewOwner); <span class="comment">// Pass a NymID here as a string, or a purse. (IF symmetrically encrypted, the relevant key is in the purse.)</span>
    <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTToken&gt;</a> theTokenAngel(pToken);
    <span class="comment">// -----------------------------------------------------</span>
    <span class="keywordflow">if</span> (NULL != pToken) <span class="comment">// Success!</span>
    {
        <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strOutput(*pToken);

        std::string pBuf = strOutput.Get();

        <span class="keywordflow">return</span> pBuf;
    }

    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad7ab09b32bc246b3370f65456c5acfcd"></a><!-- doxytag: member="OTAPI_Exec::Token_GetAssetID" ref="ad7ab09b32bc246b3370f65456c5acfcd" args="(const std::string &amp;THE_TOKEN)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#ad7ab09b32bc246b3370f65456c5acfcd">OTAPI_Exec::Token_GetAssetID</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_TOKEN</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l11928">11928</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (THE_TOKEN.empty())          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_TOKEN&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <a class="code" href="class_o_t_string.html">OTString</a> strOutput;

    <a class="code" href="class_o_t_string.html">OTString</a> strToken(THE_TOKEN);
    <a class="code" href="class_o_t_token.html">OTToken</a> * pToken = <a class="code" href="class_o_t_token.html#ac758de04ed60991098005a7ac9578d71">OTToken::TokenFactory</a>(strToken);
    <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTToken&gt;</a> theTokenAngel(pToken);

    <span class="keywordflow">if</span> (NULL != pToken) <span class="comment">// TokenFactory instantiates AND loads from string.</span>
    {
        <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> &amp; theID = pToken-&gt;<a class="code" href="class_o_t_instrument.html#a1f6c7b528680d84dcb998d473bdd99a6">GetAssetID</a>();
        theID.<a class="code" href="class_o_t_identifier.html#a4bccb30446b4b515d9d6016b86b260bb">GetString</a>(strOutput);
    }

    std::string pBuf = strOutput.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();

    <span class="keywordflow">return</span> pBuf;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a806f47fc133eb237a14ecd5e6416d71a"></a><!-- doxytag: member="OTAPI_Exec::Token_GetDenomination" ref="a806f47fc133eb237a14ecd5e6416d71a" args="(const std::string &amp;SERVER_ID, const std::string &amp;ASSET_TYPE_ID, const std::string &amp;THE_TOKEN)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64_t <a class="el" href="class_o_t_a_p_i___exec.html#a806f47fc133eb237a14ecd5e6416d71a">OTAPI_Exec::Token_GetDenomination</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ASSET_TYPE_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_TOKEN</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The actual cash value of the token. Returns a int64_t. </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l11821">11821</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty())          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (ASSET_TYPE_ID.empty())      { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;ASSET_TYPE_ID&quot;</span>      ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (THE_TOKEN.empty())          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_TOKEN&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theServerID(SERVER_ID), theAssetTypeID(ASSET_TYPE_ID);

    <a class="code" href="class_o_t_string.html">OTString</a> strOutput(<span class="stringliteral">&quot;0&quot;</span>);

    <a class="code" href="class_o_t_string.html">OTString</a> strToken(THE_TOKEN);
    <a class="code" href="class_o_t_token.html">OTToken</a> * pToken = <a class="code" href="class_o_t_token.html#ac758de04ed60991098005a7ac9578d71">OTToken::TokenFactory</a>(strToken, theServerID, theAssetTypeID);
    <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTToken&gt;</a> theTokenAngel(pToken);

    <span class="keywordflow">if</span> (NULL != pToken) <span class="comment">// TokenFactory instantiates AND loads from string.</span>
    {
        <span class="keywordflow">return</span> pToken-&gt;<a class="code" href="class_o_t_token.html#a4e17470c475313139d1ed975e6c26b5a">GetDenomination</a>();
    }
    <span class="keywordflow">else</span> <span class="keywordflow">return</span> -1;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad7f11418c03d9e3ad70c23bb220da105"></a><!-- doxytag: member="OTAPI_Exec::Token_GetID" ref="ad7f11418c03d9e3ad70c23bb220da105" args="(const std::string &amp;SERVER_ID, const std::string &amp;ASSET_TYPE_ID, const std::string &amp;THE_TOKEN)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#ad7f11418c03d9e3ad70c23bb220da105">OTAPI_Exec::Token_GetID</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ASSET_TYPE_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_TOKEN</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns an encrypted form of the actual blinded token ID. (There's no need to decrypt the ID until redeeming the token, when you re-encrypt it to the server's public key, or until spending it, when you re-encrypt it to the recipient's public key, or exporting it, when you create a dummy recipient and attach it to the purse.) </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l11789">11789</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty())          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (ASSET_TYPE_ID.empty())      { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;ASSET_TYPE_ID&quot;</span>      ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (THE_TOKEN.empty())          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_TOKEN&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theServerID(SERVER_ID), theAssetTypeID(ASSET_TYPE_ID);

    <a class="code" href="class_o_t_string.html">OTString</a> strOutput(<span class="stringliteral">&quot;0&quot;</span>);

    <a class="code" href="class_o_t_string.html">OTString</a> strToken(THE_TOKEN);
    <a class="code" href="class_o_t_token.html">OTToken</a> * pToken = <a class="code" href="class_o_t_token.html#ac758de04ed60991098005a7ac9578d71">OTToken::TokenFactory</a>(strToken, theServerID, theAssetTypeID);
    <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTToken&gt;</a> theTokenAngel(pToken);

    <span class="keywordflow">if</span> (NULL != pToken) <span class="comment">// TokenFactory instantiates AND loads from string.</span>
    {
        <span class="keyword">const</span> <a class="code" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> &amp; ascSpendable = pToken-&gt;<a class="code" href="class_o_t_token.html#ac66cb04fd3053e8fa444010b59a89332">GetSpendable</a>(); <span class="comment">// encrypted version of Token ID, used as an &quot;ID&quot; on client side.</span>

        strOutput.<a class="code" href="class_o_t_string.html#af1c861f21033a1d583b3cb12f952422e">Format</a>(<span class="stringliteral">&quot;%s&quot;</span>, ascSpendable.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
    }

    std::string pBuf = strOutput.Get();

    <span class="keywordflow">return</span> pBuf;
}
</pre></div>
</div>
</div>
<a class="anchor" id="af2b5c6e571ec7670ffcf36e6f65b8494"></a><!-- doxytag: member="OTAPI_Exec::Token_GetSeries" ref="af2b5c6e571ec7670ffcf36e6f65b8494" args="(const std::string &amp;SERVER_ID, const std::string &amp;ASSET_TYPE_ID, const std::string &amp;THE_TOKEN)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_a_p_i___exec.html#af2b5c6e571ec7670ffcf36e6f65b8494">OTAPI_Exec::Token_GetSeries</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ASSET_TYPE_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_TOKEN</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l11850">11850</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty())          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (ASSET_TYPE_ID.empty())      { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;ASSET_TYPE_ID&quot;</span>      ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (THE_TOKEN.empty())          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_TOKEN&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theServerID(SERVER_ID), theAssetTypeID(ASSET_TYPE_ID);

    <a class="code" href="class_o_t_string.html">OTString</a> strOutput;

    <a class="code" href="class_o_t_string.html">OTString</a> strToken(THE_TOKEN);
    <a class="code" href="class_o_t_token.html">OTToken</a> * pToken = <a class="code" href="class_o_t_token.html#ac758de04ed60991098005a7ac9578d71">OTToken::TokenFactory</a>(strToken, theServerID, theAssetTypeID);
    <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTToken&gt;</a> theTokenAngel(pToken);

    <span class="keywordflow">if</span> (NULL != pToken) <span class="comment">// TokenFactory instantiates AND loads from string.</span>
        <span class="keywordflow">return</span> pToken-&gt;<a class="code" href="class_o_t_token.html#ad68798a37c37605745ae99475a942126">GetSeries</a>();

    <span class="keywordflow">return</span> -1;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a37c61882ab4f0fc0d8621e2dc062740b"></a><!-- doxytag: member="OTAPI_Exec::Token_GetServerID" ref="a37c61882ab4f0fc0d8621e2dc062740b" args="(const std::string &amp;THE_TOKEN)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a37c61882ab4f0fc0d8621e2dc062740b">OTAPI_Exec::Token_GetServerID</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_TOKEN</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l11950">11950</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (THE_TOKEN.empty())          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_TOKEN&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <a class="code" href="class_o_t_string.html">OTString</a> strOutput;

    <a class="code" href="class_o_t_string.html">OTString</a> strToken(THE_TOKEN);
    <a class="code" href="class_o_t_token.html">OTToken</a> * pToken = <a class="code" href="class_o_t_token.html#ac758de04ed60991098005a7ac9578d71">OTToken::TokenFactory</a>(strToken);
    <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTToken&gt;</a> theTokenAngel(pToken);

    <span class="keywordflow">if</span> (NULL != pToken) <span class="comment">// TokenFactory instantiates AND loads from string.</span>
    {
        <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> &amp; theID = pToken-&gt;<a class="code" href="class_o_t_instrument.html#a878dd8998f7b131b85c082575e255375">GetServerID</a>();
        theID.<a class="code" href="class_o_t_identifier.html#a4bccb30446b4b515d9d6016b86b260bb">GetString</a>(strOutput);
    }

    std::string pBuf = strOutput.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();

    <span class="keywordflow">return</span> pBuf;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad238d24c7f5b9ed5dcc075e63e05b9d0"></a><!-- doxytag: member="OTAPI_Exec::Token_GetValidFrom" ref="ad238d24c7f5b9ed5dcc075e63e05b9d0" args="(const std::string &amp;SERVER_ID, const std::string &amp;ASSET_TYPE_ID, const std::string &amp;THE_TOKEN)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_o_t_common_8hpp.html#ad28ff0a3eda18840f6bda5872819167f">time64_t</a> <a class="el" href="class_o_t_a_p_i___exec.html#ad238d24c7f5b9ed5dcc075e63e05b9d0">OTAPI_Exec::Token_GetValidFrom</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ASSET_TYPE_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_TOKEN</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>the date is seconds since Jan 1970. </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l11877">11877</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty())          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (ASSET_TYPE_ID.empty())      { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;ASSET_TYPE_ID&quot;</span>      ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (THE_TOKEN.empty())          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_TOKEN&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theServerID(SERVER_ID), theAssetTypeID(ASSET_TYPE_ID);

    <a class="code" href="class_o_t_string.html">OTString</a> strOutput;

    <a class="code" href="class_o_t_string.html">OTString</a> strToken(THE_TOKEN);
    <a class="code" href="class_o_t_token.html">OTToken</a> * pToken = <a class="code" href="class_o_t_token.html#ac758de04ed60991098005a7ac9578d71">OTToken::TokenFactory</a>(strToken, theServerID, theAssetTypeID);
    <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTToken&gt;</a> theTokenAngel(pToken);

    <span class="keywordflow">if</span> (NULL != pToken) <span class="comment">// TokenFactory instantiates AND loads from string.</span>
    {
        <span class="keywordflow">return</span> pToken-&gt;<a class="code" href="class_o_t_instrument.html#a08eb5f25566832e1a67b3e33c0dcc13f">GetValidFrom</a>();
    }
    <span class="keywordflow">return</span> <a class="code" href="_o_t_common_8hpp.html#a5c0893ffd83818f1c3c6b3b7ae92da13">OTTimeGetTimeFromSeconds</a>(-1);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a18f41ee30a81eddd1abd8c0ecc42e1c8"></a><!-- doxytag: member="OTAPI_Exec::Token_GetValidTo" ref="a18f41ee30a81eddd1abd8c0ecc42e1c8" args="(const std::string &amp;SERVER_ID, const std::string &amp;ASSET_TYPE_ID, const std::string &amp;THE_TOKEN)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_o_t_common_8hpp.html#ad28ff0a3eda18840f6bda5872819167f">time64_t</a> <a class="el" href="class_o_t_a_p_i___exec.html#a18f41ee30a81eddd1abd8c0ecc42e1c8">OTAPI_Exec::Token_GetValidTo</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ASSET_TYPE_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_TOKEN</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l11903">11903</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty())          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (ASSET_TYPE_ID.empty())      { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;ASSET_TYPE_ID&quot;</span>      ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (THE_TOKEN.empty())          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_TOKEN&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theServerID(SERVER_ID), theAssetTypeID(ASSET_TYPE_ID);

    <a class="code" href="class_o_t_string.html">OTString</a> strOutput;

    <a class="code" href="class_o_t_string.html">OTString</a> strToken(THE_TOKEN);
    <a class="code" href="class_o_t_token.html">OTToken</a> * pToken = <a class="code" href="class_o_t_token.html#ac758de04ed60991098005a7ac9578d71">OTToken::TokenFactory</a>(strToken, theServerID, theAssetTypeID);
    <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTToken&gt;</a> theTokenAngel(pToken);

    <span class="keywordflow">if</span> (NULL != pToken) <span class="comment">// TokenFactory instantiates AND loads from string.</span>
    {
        <span class="keywordflow">return</span> pToken-&gt;<a class="code" href="class_o_t_instrument.html#ab83a62f51692c946ff394408026b0c18">GetValidTo</a>();
    }
    <span class="keywordflow">return</span> <a class="code" href="_o_t_common_8hpp.html#a5c0893ffd83818f1c3c6b3b7ae92da13">OTTimeGetTimeFromSeconds</a>(-1);
}
</pre></div>
</div>
</div>
<a class="anchor" id="aff7a984d28b09d76103f52faebfb754c"></a><!-- doxytag: member="OTAPI_Exec::Transaction_CreateResponse" ref="aff7a984d28b09d76103f52faebfb754c" args="(const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ACCOUNT_ID, const std::string &amp;RESPONSE_LEDGER, const std::string &amp;ORIGINAL_TRANSACTION, const bool &amp;BOOL_DO_I_ACCEPT)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#aff7a984d28b09d76103f52faebfb754c">OTAPI_Exec::Transaction_CreateResponse</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ACCOUNT_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>RESPONSE_LEDGER</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ORIGINAL_TRANSACTION</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const bool &amp;&#160;</td>
          <td class="paramname"><em>BOOL_DO_I_ACCEPT</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Create a 'response' transaction, that will be used to indicate my acceptance or rejection of another transaction. Usually an entire ledger full of these is sent to the server as I process the various transactions in my inbox. </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l08872">8872</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty())       { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>       ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID.empty())         { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>         ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (ACCOUNT_ID.empty())      { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;ACCOUNT_ID&quot;</span>      ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (THE_LEDGER.empty())      { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_LEDGER&quot;</span>      ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (THE_TRANSACTION.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_TRANSACTION&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>  theServerID(SERVER_ID), theUserID(USER_ID), theAcctID(ACCOUNT_ID);

    <a class="code" href="class_o_t_string.html">OTString</a> strLedger(THE_LEDGER);
    <a class="code" href="class_o_t_string.html">OTString</a> strTransaction(THE_TRANSACTION);
    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_server_contract.html">OTServerContract</a> * pServer = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#afa4e2d39d29061b609d81f094c2ca25c">GetServer</a>(theServerID, __FUNCTION__);
    <span class="keywordflow">if</span> (NULL == pServer) <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    <span class="comment">// By this point, pServer is a good pointer.  (No need to cleanup.)</span>
    <span class="comment">// --------------------------------------------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pServerNym = pServer-&gt;<a class="code" href="class_o_t_contract.html#affb6a11ee52ad13fd6e1e1ef6e4bbdc1">GetContractPublicNym</a>();

    <span class="keywordflow">if</span> (NULL == pServerNym)
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: No Contract Nym found in that Server Contract.\n&quot;</span>, __FUNCTION__);
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    }
    <span class="comment">// By this point, pServerNym is a good pointer.  (No need to cleanup.)</span>
    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pNym = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#aa53f110b77dee2bc71b70906ca64fbbc">GetOrLoadPrivateNym</a>(theUserID, <span class="keyword">false</span>, __FUNCTION__); <span class="comment">// This logs, ASSERTs, etc.</span>
    <span class="keywordflow">if</span> (NULL == pNym) <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    <span class="comment">// By this point, pNym is a good pointer, and is on the wallet. (No need to cleanup.)</span>
    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_ledger.html">OTLedger</a> theLedger(theUserID, theAcctID, theServerID);

    <span class="keywordflow">if</span> (<span class="keyword">false</span> == theLedger.LoadLedgerFromString(strLedger))
    {
        <a class="code" href="class_o_t_string.html">OTString</a> strAcctID(theAcctID);
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error loading ledger from string. Acct ID: %s\n&quot;</span>, __FUNCTION__, strAcctID.Get());
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    }
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">false</span> == theLedger.VerifyAccount(*pNym))
    {
        <a class="code" href="class_o_t_string.html">OTString</a> strAcctID(theAcctID);
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error verifying ledger. Acct ID: %s\n&quot;</span>, __FUNCTION__, strAcctID.Get());
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    }

    <span class="comment">// At this point, I know theLedger loaded and verified successfully.</span>
    <span class="comment">// (This is the &#39;response&#39; ledger that the user previously generated,</span>
    <span class="comment">// and now he is loading it up with responses that this function will</span>
    <span class="comment">// generate on his behalf.)</span>
    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_transaction.html">OTTransaction</a> theTransaction(theUserID, theAcctID, theServerID);

    <span class="keywordflow">if</span> (<span class="keyword">false</span> == theTransaction.LoadContractFromString(strTransaction))
    {
        <a class="code" href="class_o_t_string.html">OTString</a> strAcctID(theAcctID);
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error loading transaction from string. Acct ID: %s\n&quot;</span>, __FUNCTION__, strAcctID.Get());
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    }
    <span class="comment">// --------------------------------------</span>
    <a class="code" href="class_o_t_transaction.html">OTTransaction</a> * pTransaction = NULL;
    <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTTransaction&gt;</a> theTransAngel;

    <span class="keywordflow">if</span> (theTransaction.IsAbbreviated())
    {
        pTransaction = <a class="code" href="class_o_t_transaction.html#ae97bc794fe820f4f2e864c29c42df8eb">OTTransaction::LoadBoxReceipt</a>(theTransaction, static_cast&lt;int64_t&gt;(<a class="code" href="class_o_t_ledger.html#ac03f2514d0c6ae00147c5d53bf19591aa7bd594902e6c775ef4f356897fb36006">OTLedger::inbox</a>));

        <span class="keywordflow">if</span> (NULL == pTransaction)
        {
            <a class="code" href="class_o_t_string.html">OTString</a> strAcctID(theAcctID);
            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error loading full transaction from abbreviated version of inbox receipt. Acct ID: %s\n&quot;</span>,
                          __FUNCTION__, strAcctID.Get());
            <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
        }
        theTransAngel.<a class="code" href="class_o_t_cleanup.html#aac0b26193b0a59dbbf491a4e417af833">SetCleanupTargetPointer</a>(pTransaction);
    }
    <span class="keywordflow">else</span>
        pTransaction = &amp;theTransaction;
    <span class="comment">// --------------------------------------</span>
    <span class="comment">// BELOW THIS POINT, only use pTransaction, not theTransaction.</span>

    <span class="comment">// This transaction is presumably from the server, since we are in this</span>
    <span class="comment">// function in order to generate a response back to the server. So therefore</span>
    <span class="comment">// I want to verify that the server has actually signed the thing, before</span>
    <span class="comment">// I go off responding to it like a damned fool.</span>
    <span class="comment">//</span>
    <span class="keywordflow">if</span> (<span class="keyword">false</span> == pTransaction-&gt;<a class="code" href="class_o_t_transaction.html#afba0d981b40568e307178f908788fd7b">VerifyAccount</a>(*((<a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> *)pServerNym)))
    {
        <a class="code" href="class_o_t_string.html">OTString</a> strAcctID(theAcctID);
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error verifying transaction. Acct ID: %s\n&quot;</span>, __FUNCTION__, strAcctID.Get());
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    }

    <span class="comment">// -----------------------------------------------------</span>

    <span class="keywordflow">if</span> (
            (<a class="code" href="class_o_t_transaction.html#af6b54636f1000e09f19d1c7a7886e1f8addbed2a5d0af9bf58ff0694f587b4e08">OTTransaction::pending</a>         != pTransaction-&gt;<a class="code" href="class_o_t_transaction.html#ac964dfd1e704c02358a6641f030ead38">GetType</a>())
        &amp;&amp;  (<a class="code" href="class_o_t_transaction.html#af6b54636f1000e09f19d1c7a7886e1f8a9a92eac3a7ccff17583eb089a056f5af">OTTransaction::chequeReceipt</a>   != pTransaction-&gt;<a class="code" href="class_o_t_transaction.html#ac964dfd1e704c02358a6641f030ead38">GetType</a>())
        &amp;&amp;  (<a class="code" href="class_o_t_transaction.html#af6b54636f1000e09f19d1c7a7886e1f8a11b89ff8cbf5b3d7c526f4d166f653c8">OTTransaction::voucherReceipt</a>  != pTransaction-&gt;<a class="code" href="class_o_t_transaction.html#ac964dfd1e704c02358a6641f030ead38">GetType</a>())
        &amp;&amp;  (<a class="code" href="class_o_t_transaction.html#af6b54636f1000e09f19d1c7a7886e1f8ab184c4314c99d16d439c96380a4e27cb">OTTransaction::transferReceipt</a> != pTransaction-&gt;<a class="code" href="class_o_t_transaction.html#ac964dfd1e704c02358a6641f030ead38">GetType</a>())
        &amp;&amp;  (<a class="code" href="class_o_t_transaction.html#af6b54636f1000e09f19d1c7a7886e1f8ad46b36946aa172b4e69558c3c5697c63">OTTransaction::marketReceipt</a>   != pTransaction-&gt;<a class="code" href="class_o_t_transaction.html#ac964dfd1e704c02358a6641f030ead38">GetType</a>())
        &amp;&amp;  (<a class="code" href="class_o_t_transaction.html#af6b54636f1000e09f19d1c7a7886e1f8aac41b416522c9ba6453c787607c6c68d">OTTransaction::paymentReceipt</a>  != pTransaction-&gt;<a class="code" href="class_o_t_transaction.html#ac964dfd1e704c02358a6641f030ead38">GetType</a>())
        &amp;&amp;  (<a class="code" href="class_o_t_transaction.html#af6b54636f1000e09f19d1c7a7886e1f8a3877decda88be6b275652a6e4930ddc4">OTTransaction::finalReceipt</a>    != pTransaction-&gt;<a class="code" href="class_o_t_transaction.html#ac964dfd1e704c02358a6641f030ead38">GetType</a>())
        &amp;&amp;  (<a class="code" href="class_o_t_transaction.html#af6b54636f1000e09f19d1c7a7886e1f8a2f852a3f97691d417faa322cdbbb3377">OTTransaction::basketReceipt</a>   != pTransaction-&gt;<a class="code" href="class_o_t_transaction.html#ac964dfd1e704c02358a6641f030ead38">GetType</a>())
        )
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: wrong transaction type: %s.\n&quot;</span>, __FUNCTION__, pTransaction-&gt;<a class="code" href="class_o_t_transaction.html#a5baeb1d30c71f3a37565cb2e91b05447">GetTypeString</a>());
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    }
    <span class="comment">// -----------------------------------------------------</span>
    <span class="comment">// At this point, I know pTransaction loaded and verified successfully.</span>
    <span class="comment">// So let&#39;s generate a response item based on it, and add it to a processInbox</span>
    <span class="comment">// transaction to be added to that ledger (if one&#39;s not already there...)</span>

    <span class="comment">// First, check to see if there is a processInbox transaction already on</span>
    <span class="comment">// the ledger...</span>
    <a class="code" href="class_o_t_transaction.html">OTTransaction</a> * pResponse = theLedger.GetTransaction(<a class="code" href="class_o_t_transaction.html#af6b54636f1000e09f19d1c7a7886e1f8a17de28d6bffb971efeebbd9a2fff5ada">OTTransaction::processInbox</a>);

    <span class="comment">// If it&#39;s not already there, create it and add it.</span>
    <span class="keywordflow">if</span> (NULL == pResponse)
    {
        <a class="code" href="class_o_t_string.html">OTString</a> strServerID(theServerID);
        int64_t lTransactionNumber=0;
        <span class="keywordtype">bool</span> bGotTransNum = pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#a82c5ec5457947738c807bffd581181ac">GetNextTransactionNum</a>(*pNym, strServerID, lTransactionNumber);

        <span class="keywordflow">if</span> (<span class="keyword">false</span> == bGotTransNum)
        {
            <a class="code" href="class_o_t_string.html">OTString</a> strNymID(theUserID);
            <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: User is all out of transaction numbers:\n%s\n&quot;</span>,
                           __FUNCTION__, strNymID.Get());
            <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
        }

        pResponse = <a class="code" href="class_o_t_transaction.html#a5bfc7ce34aa67cf9dad96e661e118020">OTTransaction::GenerateTransaction</a>(theUserID, theAcctID, theServerID,
            <a class="code" href="class_o_t_transaction.html#af6b54636f1000e09f19d1c7a7886e1f8a17de28d6bffb971efeebbd9a2fff5ada">OTTransaction::processInbox</a>, lTransactionNumber);

        <span class="keywordflow">if</span> (NULL == pResponse)
        {
            <a class="code" href="class_o_t_string.html">OTString</a> strAcctID(theAcctID);
            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error generating processInbox transaction for AcctID: %s\n&quot;</span>, __FUNCTION__, strAcctID.Get());

            pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#a2771ea8cf77d2ac05d942e149c2bc3e6">AddTransactionNum</a>(*pNym, strServerID, lTransactionNumber, <span class="keyword">true</span>); <span class="comment">// bSave=true.  Have to add this back since we failed to use it.</span>

            <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
        }

        theLedger.AddTransaction(*pResponse); <span class="comment">// Ledger now &quot;owns&quot; it and will handle cleanup.</span>
    }

    <span class="comment">// At this point32_t I know pResponse is a processInbox transaction, ready to go,</span>
    <span class="comment">// and that theLedger will handle any cleanup issues related to it.</span>

    <span class="comment">// -----------------------------------------------------</span>

    <span class="comment">// Next let&#39;s create a new item that responds to pTransaction, and add that</span>
    <span class="comment">// item to pResponse. Then we&#39;ll return the updated ledger.</span>

    <a class="code" href="class_o_t_item.html#a03db091faaab100aadc455f4ebe2c5d1">OTItem::itemType</a> theAcceptItemType = <a class="code" href="class_o_t_item.html#a03db091faaab100aadc455f4ebe2c5d1a2990979bdd62bac5b4bc4f6e1a2cc5e6">OTItem::error_state</a>;
    <a class="code" href="class_o_t_item.html#a03db091faaab100aadc455f4ebe2c5d1">OTItem::itemType</a> theRejectItemType = <a class="code" href="class_o_t_item.html#a03db091faaab100aadc455f4ebe2c5d1a2990979bdd62bac5b4bc4f6e1a2cc5e6">OTItem::error_state</a>;

    <span class="keywordflow">switch</span> (pTransaction-&gt;<a class="code" href="class_o_t_transaction.html#ac964dfd1e704c02358a6641f030ead38">GetType</a>())
    {
    <span class="keywordflow">case</span> <a class="code" href="class_o_t_transaction.html#af6b54636f1000e09f19d1c7a7886e1f8addbed2a5d0af9bf58ff0694f587b4e08">OTTransaction::pending</a>:
        theAcceptItemType = <a class="code" href="class_o_t_item.html#a03db091faaab100aadc455f4ebe2c5d1ae3e8669bd29e01bd4ed8d1fa35ba3773">OTItem::acceptPending</a>;
        theRejectItemType = <a class="code" href="class_o_t_item.html#a03db091faaab100aadc455f4ebe2c5d1a873fcfb43e552e1f81d475fb898e9ac8">OTItem::rejectPending</a>;
        <span class="keywordflow">break</span>;


    <span class="keywordflow">case</span> <a class="code" href="class_o_t_transaction.html#af6b54636f1000e09f19d1c7a7886e1f8ad46b36946aa172b4e69558c3c5697c63">OTTransaction::marketReceipt</a>:
    <span class="keywordflow">case</span> <a class="code" href="class_o_t_transaction.html#af6b54636f1000e09f19d1c7a7886e1f8aac41b416522c9ba6453c787607c6c68d">OTTransaction::paymentReceipt</a>:
        theAcceptItemType = <a class="code" href="class_o_t_item.html#a03db091faaab100aadc455f4ebe2c5d1a9f650965f11bddf081bb017e1cd0efe0">OTItem::acceptCronReceipt</a>;
        theRejectItemType = <a class="code" href="class_o_t_item.html#a03db091faaab100aadc455f4ebe2c5d1a0ae31723e4a6a715f4de40bf18aa932f">OTItem::disputeCronReceipt</a>;
        <span class="keywordflow">break</span>;

    <span class="keywordflow">case</span> <a class="code" href="class_o_t_transaction.html#af6b54636f1000e09f19d1c7a7886e1f8a9a92eac3a7ccff17583eb089a056f5af">OTTransaction::chequeReceipt</a>:
    <span class="keywordflow">case</span> <a class="code" href="class_o_t_transaction.html#af6b54636f1000e09f19d1c7a7886e1f8a11b89ff8cbf5b3d7c526f4d166f653c8">OTTransaction::voucherReceipt</a>:
    <span class="keywordflow">case</span> <a class="code" href="class_o_t_transaction.html#af6b54636f1000e09f19d1c7a7886e1f8ab184c4314c99d16d439c96380a4e27cb">OTTransaction::transferReceipt</a>:
        theAcceptItemType = <a class="code" href="class_o_t_item.html#a03db091faaab100aadc455f4ebe2c5d1a357f900e6fdf2a978e3bc03f11d9cc75">OTItem::acceptItemReceipt</a>;
        theRejectItemType = <a class="code" href="class_o_t_item.html#a03db091faaab100aadc455f4ebe2c5d1a4eb8608cbf2db1dd590856c3777e70a2">OTItem::disputeItemReceipt</a>;
        <span class="keywordflow">break</span>;

    <span class="keywordflow">case</span> <a class="code" href="class_o_t_transaction.html#af6b54636f1000e09f19d1c7a7886e1f8a3877decda88be6b275652a6e4930ddc4">OTTransaction::finalReceipt</a>:
        theAcceptItemType = <a class="code" href="class_o_t_item.html#a03db091faaab100aadc455f4ebe2c5d1a6c434f644f481079015d0330d6a5efad">OTItem::acceptFinalReceipt</a>;
        theRejectItemType = <a class="code" href="class_o_t_item.html#a03db091faaab100aadc455f4ebe2c5d1a62442ecb84d96e94176c7f9b533a9061">OTItem::disputeFinalReceipt</a>;
        <span class="keywordflow">break</span>;

    <span class="keywordflow">case</span> <a class="code" href="class_o_t_transaction.html#af6b54636f1000e09f19d1c7a7886e1f8a2f852a3f97691d417faa322cdbbb3377">OTTransaction::basketReceipt</a>:
        theAcceptItemType = <a class="code" href="class_o_t_item.html#a03db091faaab100aadc455f4ebe2c5d1aa4bc2fbc10cdf7c47dd361c4c17c605d">OTItem::acceptBasketReceipt</a>;
        theRejectItemType = <a class="code" href="class_o_t_item.html#a03db091faaab100aadc455f4ebe2c5d1a69a150fe3a7ec3726dc71d183d572a87">OTItem::disputeBasketReceipt</a>;
        <span class="keywordflow">break</span>;

    <span class="keywordflow">default</span>:
        theAcceptItemType = <a class="code" href="class_o_t_item.html#a03db091faaab100aadc455f4ebe2c5d1a2990979bdd62bac5b4bc4f6e1a2cc5e6">OTItem::error_state</a>;
        theRejectItemType = <a class="code" href="class_o_t_item.html#a03db091faaab100aadc455f4ebe2c5d1a2990979bdd62bac5b4bc4f6e1a2cc5e6">OTItem::error_state</a>;
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Unexpected transaction type in: %s\n&quot;</span>, __FUNCTION__, pTransaction-&gt;<a class="code" href="class_o_t_transaction.html#a5baeb1d30c71f3a37565cb2e91b05447">GetTypeString</a>());
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    }
    <span class="comment">// -------------------------------------------------</span>
    int64_t  lReferenceTransactionNum = 0;
    int64_t     lNumberOfOrigin          = 0;
    <a class="code" href="class_o_t_string.html">OTString</a> strNote;
    <span class="comment">// -------------------------------------------------</span>
    <span class="keywordflow">switch</span> (pTransaction-&gt;<a class="code" href="class_o_t_transaction.html#ac964dfd1e704c02358a6641f030ead38">GetType</a>())
    {
    <span class="keywordflow">case</span> <a class="code" href="class_o_t_transaction.html#af6b54636f1000e09f19d1c7a7886e1f8ad46b36946aa172b4e69558c3c5697c63">OTTransaction::marketReceipt</a>:
    <span class="keywordflow">case</span> <a class="code" href="class_o_t_transaction.html#af6b54636f1000e09f19d1c7a7886e1f8aac41b416522c9ba6453c787607c6c68d">OTTransaction::paymentReceipt</a>:
    <span class="keywordflow">case</span> <a class="code" href="class_o_t_transaction.html#af6b54636f1000e09f19d1c7a7886e1f8a3877decda88be6b275652a6e4930ddc4">OTTransaction::finalReceipt</a>:
    <span class="keywordflow">case</span> <a class="code" href="class_o_t_transaction.html#af6b54636f1000e09f19d1c7a7886e1f8a2f852a3f97691d417faa322cdbbb3377">OTTransaction::basketReceipt</a>:
            lNumberOfOrigin          = pTransaction-&gt;<a class="code" href="class_o_t_transaction_type.html#a08578043dac9d53f7a5a879b02785d46">GetReferenceToNum</a>();
            lReferenceTransactionNum = pTransaction-&gt;<a class="code" href="class_o_t_transaction_type.html#aa204b21b7f498389f746742c1d2007fa">GetTransactionNum</a>();   <span class="comment">// &lt;=== References the receipt in my inbox.</span>
        <span class="keywordflow">break</span>;

    <span class="keywordflow">case</span> <a class="code" href="class_o_t_transaction.html#af6b54636f1000e09f19d1c7a7886e1f8ab184c4314c99d16d439c96380a4e27cb">OTTransaction::transferReceipt</a>: <span class="comment">// Contains &quot;in ref to&quot; acceptPending item from someone who processed their inbox to accept my transfer.</span>
    <span class="keywordflow">case</span> <a class="code" href="class_o_t_transaction.html#af6b54636f1000e09f19d1c7a7886e1f8addbed2a5d0af9bf58ff0694f587b4e08">OTTransaction::pending</a>:         <span class="comment">// Contains &quot;in ref to&quot; transfer item from someone who sent me a transfer.</span>
    <span class="keywordflow">case</span> <a class="code" href="class_o_t_transaction.html#af6b54636f1000e09f19d1c7a7886e1f8a9a92eac3a7ccff17583eb089a056f5af">OTTransaction::chequeReceipt</a>:   <span class="comment">// Contains &quot;in ref to&quot; depositCheque item from someone who deposited my cheque.</span>
    <span class="keywordflow">case</span> <a class="code" href="class_o_t_transaction.html#af6b54636f1000e09f19d1c7a7886e1f8a11b89ff8cbf5b3d7c526f4d166f653c8">OTTransaction::voucherReceipt</a>:  <span class="comment">// Contains &quot;in ref to&quot; depositCheque item from someone who deposited my voucher.</span>
        {
            <span class="comment">// -----------------------------------------------------</span>
            <span class="comment">// Here&#39;s some code in case you need to load up the item.</span>
            <a class="code" href="class_o_t_string.html">OTString</a> strReference;
            pTransaction-&gt;<a class="code" href="class_o_t_transaction_type.html#a88d404b8cebd7da409e551396cc45ee7">GetReferenceString</a>(strReference);

            <span class="keywordflow">if</span> (!strReference.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>())
            {
                <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: No reference string found on transaction.\n&quot;</span>, __FUNCTION__);
                <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
            }
            <span class="comment">// -----------------------------------------------------</span>
            <a class="code" href="class_o_t_item.html">OTItem</a> * pOriginalItem = <a class="code" href="class_o_t_item.html#af742fa1f4ba90d4807bda01a758d2d6a">OTItem::CreateItemFromString</a>(strReference, theServerID, pTransaction-&gt;<a class="code" href="class_o_t_transaction_type.html#a08578043dac9d53f7a5a879b02785d46">GetReferenceToNum</a>());
            <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTItem&gt;</a> theAngel(pOriginalItem);

            <span class="keywordflow">if</span> (NULL == pOriginalItem)
            {
                <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Failed loading transaction item from string.\n&quot;</span>,__FUNCTION__);
                <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
            }
            <span class="comment">// pItem will be automatically cleaned up when it goes out of scope.</span>
            <span class="comment">// -----------------------------------------------------</span>
            <span class="keywordflow">if</span> (
                (<a class="code" href="class_o_t_item.html#a61e86f5b6c64a518664123907235f376a16fa1b0df4dbad1367dbd0f6dbac9572">OTItem::request</a> != pOriginalItem-&gt;<a class="code" href="class_o_t_item.html#abadbfe245f0dbc8a035d8d6930dd9dfc">GetStatus</a>())
                ||
                (
                (<a class="code" href="class_o_t_item.html#a03db091faaab100aadc455f4ebe2c5d1ae3e8669bd29e01bd4ed8d1fa35ba3773">OTItem::acceptPending</a>  != pOriginalItem-&gt;<a class="code" href="class_o_t_item.html#a2f4535b271f23b7c2b6b1dbabf279ffe">GetType</a>())  &amp;&amp; <span class="comment">// I&#39;m accepting a transfer receipt that was created by someone&#39;s acceptPending (from a transfer I sent.)</span>
                 (<a class="code" href="class_o_t_item.html#a03db091faaab100aadc455f4ebe2c5d1a4b8c3e5db0f93a82b46a3d7dda75a835">OTItem::transfer</a>      != pOriginalItem-&gt;<a class="code" href="class_o_t_item.html#a2f4535b271f23b7c2b6b1dbabf279ffe">GetType</a>())  &amp;&amp; <span class="comment">// I&#39;m accepting a pending transfer that was created by someone&#39;s transfer to me.</span>
                (<a class="code" href="class_o_t_item.html#a03db091faaab100aadc455f4ebe2c5d1ac98fe1ea932d3c87f450a216e6a26bec">OTItem::depositCheque</a>  != pOriginalItem-&gt;<a class="code" href="class_o_t_item.html#a2f4535b271f23b7c2b6b1dbabf279ffe">GetType</a>())     <span class="comment">// I&#39;m accepting a cheque or voucher receipt that was created by someone&#39;s depositCheque (of a cheque I wrote or a voucher I remitted.)</span>
                )
                )
            {
                <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Wrong item type or status attached as reference on transaction.\n&quot;</span>, __FUNCTION__);
                <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
            }
            <span class="comment">// -----------------------------------------------------------</span>
            <span class="keywordflow">if</span> (<a class="code" href="class_o_t_item.html#a03db091faaab100aadc455f4ebe2c5d1a4b8c3e5db0f93a82b46a3d7dda75a835">OTItem::transfer</a> == pOriginalItem-&gt;<a class="code" href="class_o_t_item.html#a2f4535b271f23b7c2b6b1dbabf279ffe">GetType</a>())
                pOriginalItem-&gt;<a class="code" href="class_o_t_item.html#aba1bd99f0402a8918f7847c7a4901206">GetNote</a>(strNote);
            <span class="comment">// -----------------------------------------------------------</span>
            lNumberOfOrigin          = pOriginalItem-&gt;<a class="code" href="class_o_t_item.html#a1d99913429afbd6827becd042fac67a8">GetNumberOfOrigin</a>();
            lReferenceTransactionNum = pTransaction-&gt; GetTransactionNum();  <span class="comment">// &lt;=== References the receipt in my inbox.</span>
<span class="comment">//          lReferenceTransactionNum = pOriginalItem-&gt;GetReferenceToNum();  // &lt;=== References the original transfer I sent, or N/A (for pending), or cheque I wrote.</span>
<span class="comment">//          lReferenceTransactionNum = pOriginalItem-&gt;GetTransactionNum();  // &lt;=== References someone else&#39;s transaction that put the receipt into my inbox.</span>
        }
        <span class="comment">// -----------------------------------------------------</span>
        <span class="keywordflow">break</span>;

    <span class="keywordflow">default</span>:
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Unexpected transaction type in: %s\n&quot;</span>, __FUNCTION__, pTransaction-&gt;<a class="code" href="class_o_t_transaction.html#a5baeb1d30c71f3a37565cb2e91b05447">GetTypeString</a>());
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    }
    <span class="comment">// ------------------------------------------------------------------</span>
    <a class="code" href="class_o_t_item.html">OTItem</a> * pAcceptItem = <a class="code" href="class_o_t_item.html#a2376ee56b6c536a63a59e2bfebada0b3">OTItem::CreateItemFromTransaction</a>(*pResponse,
        (<span class="keyword">true</span> == BOOL_DO_I_ACCEPT) ? theAcceptItemType : theRejectItemType); <span class="comment">// set above.</span>
    <span class="comment">// ------------------------------------------------------------------</span>
    pAcceptItem-&gt;<a class="code" href="class_o_t_transaction_type.html#a4ebf2e97c2c1895b80f0c5fee2f9a87f">SetNumberOfOrigin</a>(lNumberOfOrigin);
    <span class="comment">// ------------------------------------------------------------------</span>
    <span class="comment">// Set up the &quot;accept&quot; transaction item to be sent to the server</span>
    <span class="comment">// (this item references and accepts another item by its transaction number--</span>
    <span class="comment">//  one that is already there in my inbox)</span>
    pAcceptItem-&gt;<a class="code" href="class_o_t_transaction_type.html#ab0f87cd43699c20eddd70b5970c092d1">SetReferenceToNum</a>(static_cast&lt;int64_t&gt;(lReferenceTransactionNum)); <span class="comment">// This is critical. Server needs this to look up the original.</span>
    <span class="comment">// Don&#39;t need to set transaction num on item since the constructor already got it off the owner transaction.</span>
    <span class="comment">// ------------------------------------------------------------------</span>
    pAcceptItem-&gt;<a class="code" href="class_o_t_item.html#a81d53d2910a45fdbb11d92ae680519fb">SetAmount</a>(pTransaction-&gt;<a class="code" href="class_o_t_transaction.html#a7a01fdc95811465496f953c5a50dcef6">GetReceiptAmount</a>()); <span class="comment">// Server validates this, so make sure it&#39;s right.</span>
    <span class="comment">// ------------------------------------------------------------------</span>
    <span class="keywordflow">if</span> (strNote.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>())
        pAcceptItem-&gt;<a class="code" href="class_o_t_item.html#ac0a3c73f3c09f2fdbd83a381898360df">SetNote</a>(strNote);
    <span class="comment">// ------------------------------------------------------------------</span>
    <span class="comment">// sign the item</span>
    pAcceptItem-&gt;<a class="code" href="class_o_t_contract.html#abd60037fe655ee8cae9a3ece5d1e2ea6">SignContract</a>(*pNym);
    pAcceptItem-&gt;<a class="code" href="class_o_t_contract.html#a363ae430d4fd9256ab8364dbafb95444">SaveContract</a>();
    <span class="comment">// ----------------------------------------------------------------------------------</span>
    <span class="comment">// Make sure there&#39;s not already a response item in reference to the same receipt.</span>
    <span class="comment">//</span>
    <span class="comment">// UPDATE, NOTE: Turns out, it&#39;s normal to have multiple receipts in reference to the same thing.</span>
    <span class="comment">// For example, I might have two transfer receipts that are both in reference to the same notarizeInbox.</span>
    <span class="comment">//</span>
<span class="comment">//    OTItem * pExistingItem = pResponse-&gt;GetItemInRefTo(lReferenceTransactionNum);</span>
<span class="comment">//    if (NULL != pExistingItem)</span>
<span class="comment">//    {</span>
<span class="comment">//        OTLog::vError(&quot;%s: Error: There&#39;s already a response item in reference to the same receipt! (In Ref: %lld User: %s Account: %s) Failure.\n\n&quot;,</span>
<span class="comment">//                      __FUNCTION__, static_cast&lt;int64_t&gt;(lReferenceTransactionNum), USER_ID.c_str(), ACCOUNT_ID.c_str());</span>
<span class="comment">//</span>
<span class="comment">//        const OTString strAccept(*pAcceptItem);</span>
<span class="comment">//        OTLog::vError(&quot;===&gt; Failed accept item:\n%s\n\n&quot;, strAccept.Get());</span>
<span class="comment">//</span>
<span class="comment">//        const OTString strExisting(*pExistingItem);</span>
<span class="comment">//        OTLog::vError(&quot;===&gt; Pre-existing item:\n%s\n\n&quot;, strExisting.Get());</span>
<span class="comment">//</span>
<span class="comment">//        return &quot;&quot;;</span>
<span class="comment">//    }</span>
    <span class="comment">// ----------------------------------------------------------------------------------</span>
    <span class="comment">// the transaction will handle cleaning up the transaction item.</span>
    pResponse-&gt;<a class="code" href="class_o_t_transaction.html#a5abc071b7eeddc40ea151cccd011e4d6">AddItem</a>(*pAcceptItem);

    <span class="comment">// I don&#39;t attach the original item here because I already reference it by transaction num,</span>
    <span class="comment">// and because the server already has it and sent it to me. SO I just need to give the server</span>
    <span class="comment">// enough info to look it up again.</span>

    pResponse-&gt;<a class="code" href="class_o_t_contract.html#aae54340526fbd8eb8a18de27a4b97c83">ReleaseSignatures</a>();
    pResponse-&gt;<a class="code" href="class_o_t_contract.html#abd60037fe655ee8cae9a3ece5d1e2ea6">SignContract</a>(*pNym);
    pResponse-&gt;<a class="code" href="class_o_t_contract.html#a363ae430d4fd9256ab8364dbafb95444">SaveContract</a>();

    theLedger.ReleaseSignatures();
    theLedger.SignContract(*pNym);
    theLedger.SaveContract();

    <a class="code" href="class_o_t_string.html">OTString</a> strOutput(theLedger); <span class="comment">// For the output</span>

    std::string pBuf = strOutput.Get();

    <span class="keywordflow">return</span> pBuf;
}
</pre></div>
</div>
</div>
<a class="anchor" id="add760095ec8b4d8acb2fe4edb7e5e996"></a><!-- doxytag: member="OTAPI_Exec::Transaction_GetAmount" ref="add760095ec8b4d8acb2fe4edb7e5e996" args="(const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ACCOUNT_ID, const std::string &amp;THE_TRANSACTION)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64_t <a class="el" href="class_o_t_a_p_i___exec.html#add760095ec8b4d8acb2fe4edb7e5e996">OTAPI_Exec::Transaction_GetAmount</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ACCOUNT_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_TRANSACTION</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l10374">10374</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty())          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID.empty())            { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>            ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (ACCOUNT_ID.empty())         { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;ACCOUNT_ID&quot;</span>         ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (THE_TRANSACTION.empty())    { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_TRANSACTION&quot;</span>    ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theServerID(SERVER_ID), theUserID(USER_ID), theAccountID(ACCOUNT_ID);

    <a class="code" href="class_o_t_string.html">OTString</a> strTransaction(THE_TRANSACTION);

    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pNym = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#aa53f110b77dee2bc71b70906ca64fbbc">GetOrLoadPrivateNym</a>(theUserID, <span class="keyword">false</span>, __FUNCTION__); <span class="comment">// These copiously log, and ASSERT.</span>
    <span class="keywordflow">if</span> (NULL == pNym) <span class="keywordflow">return</span> -1;
    <span class="comment">// -----------------------------------------------------</span>

    <a class="code" href="class_o_t_transaction.html">OTTransaction</a> theTransaction(theUserID, theAccountID, theServerID);

    <span class="keywordflow">if</span> (<span class="keyword">false</span> == theTransaction.LoadContractFromString(strTransaction))
    {
        <a class="code" href="class_o_t_string.html">OTString</a> strAcctID(theAccountID);
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error loading transaction from string. Acct ID: %s\n&quot;</span>, __FUNCTION__, strAcctID.Get());
        <span class="keywordflow">return</span> -1;
    }

    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_transaction.html">OTTransaction</a> * pTransaction = NULL;
    <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTTransaction&gt;</a> theTransAngel;

    <span class="keywordflow">if</span> (theTransaction.IsAbbreviated())
    {
        int64_t lBoxType = 0;

             <span class="keywordflow">if</span> (theTransaction.Contains(<span class="stringliteral">&quot;nymboxRecord&quot;</span>))       lBoxType = static_cast&lt;int64_t&gt;(<a class="code" href="class_o_t_ledger.html#ac03f2514d0c6ae00147c5d53bf19591aae7427339a1b7566f46fb6d60c66bbfae">OTLedger::nymbox</a>);
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (theTransaction.Contains(<span class="stringliteral">&quot;inboxRecord&quot;</span>))        lBoxType = static_cast&lt;int64_t&gt;(<a class="code" href="class_o_t_ledger.html#ac03f2514d0c6ae00147c5d53bf19591aa7bd594902e6c775ef4f356897fb36006">OTLedger::inbox</a>);
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (theTransaction.Contains(<span class="stringliteral">&quot;outboxRecord&quot;</span>))       lBoxType = static_cast&lt;int64_t&gt;(<a class="code" href="class_o_t_ledger.html#ac03f2514d0c6ae00147c5d53bf19591aaa0150c89048bba5eedf6a0919603d4e4">OTLedger::outbox</a>);
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (theTransaction.Contains(<span class="stringliteral">&quot;paymentInboxRecord&quot;</span>)) lBoxType = static_cast&lt;int64_t&gt;(<a class="code" href="class_o_t_ledger.html#ac03f2514d0c6ae00147c5d53bf19591aaf8b0cad55e051e014a4f9ebee8dd2984">OTLedger::paymentInbox</a>);
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (theTransaction.Contains(<span class="stringliteral">&quot;recordBoxRecord&quot;</span>))    lBoxType = static_cast&lt;int64_t&gt;(<a class="code" href="class_o_t_ledger.html#ac03f2514d0c6ae00147c5d53bf19591aae650dd1b5a89523bace1c54c06897922">OTLedger::recordBox</a>);
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (theTransaction.Contains(<span class="stringliteral">&quot;expiredBoxRecord&quot;</span>))   lBoxType = static_cast&lt;int64_t&gt;(<a class="code" href="class_o_t_ledger.html#ac03f2514d0c6ae00147c5d53bf19591aa500bad2900b83847f7cc16b8cc26817a">OTLedger::expiredBox</a>);
        <span class="keywordflow">else</span>
        {
            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error loading from abbreviated transaction: unknown ledger type. \n&quot;</span>, __FUNCTION__);
            <span class="keywordflow">return</span> -1;
        }
        <span class="comment">// --------------</span>
        pTransaction = <a class="code" href="class_o_t_transaction.html#ae97bc794fe820f4f2e864c29c42df8eb">OTTransaction::LoadBoxReceipt</a>(theTransaction, static_cast&lt;int64_t&gt;(lBoxType));
        <span class="keywordflow">if</span> (NULL == pTransaction)
        {
            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error loading from abbreviated transaction: failed loading box receipt. \n&quot;</span>, __FUNCTION__);
            <span class="keywordflow">return</span> -1;
        }
        <span class="comment">// ----------------</span>
        theTransAngel.<a class="code" href="class_o_t_cleanup.html#aac0b26193b0a59dbbf491a4e417af833">SetCleanupTargetPointer</a>(pTransaction);
    }
    <span class="keywordflow">else</span>
        pTransaction = &amp;theTransaction;
    <span class="comment">// -----------------------------------------------------</span>

    <a class="code" href="class_o_t_string.html">OTString</a> strOutput;
    <span class="keyword">const</span> int64_t lAmount = pTransaction-&gt;<a class="code" href="class_o_t_transaction.html#a7a01fdc95811465496f953c5a50dcef6">GetReceiptAmount</a>();

    <span class="keywordflow">return</span> lAmount;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac9008c5a1c984e5870207e87dff173e3"></a><!-- doxytag: member="OTAPI_Exec::Transaction_GetBalanceAgreementSuccess" ref="ac9008c5a1c984e5870207e87dff173e3" args="(const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ACCOUNT_ID, const std::string &amp;THE_TRANSACTION)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_o_t_data_check_8hpp.html#aa3817cab69424142fb73706ef4871d36">OT_BOOL</a> <a class="el" href="class_o_t_a_p_i___exec.html#ac9008c5a1c984e5870207e87dff173e3">OTAPI_Exec::Transaction_GetBalanceAgreementSuccess</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ACCOUNT_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_TRANSACTION</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Gets the balance agreement success (from a transaction.) returns OT_BOOL. OT_TRUE (1) == acknowledgment OT_FALSE (0) == rejection OT_ERROR(-1) == error_state (such as dropped message.) </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l10798">10798</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty())          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID.empty())            { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>            ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (ACCOUNT_ID.empty())         { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;ACCOUNT_ID&quot;</span>         ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (THE_TRANSACTION.empty())    { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_TRANSACTION&quot;</span>    ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theServerID(SERVER_ID), theUserID(USER_ID), theAccountID(ACCOUNT_ID);

    <a class="code" href="class_o_t_string.html">OTString</a> strTransaction(THE_TRANSACTION);
    <span class="comment">// -----------------------------------------------------</span>

    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pNym = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#aa53f110b77dee2bc71b70906ca64fbbc">GetOrLoadPrivateNym</a>(theUserID, <span class="keyword">false</span>, __FUNCTION__); <span class="comment">// These copiously log, and ASSERT.</span>
    <span class="keywordflow">if</span> (NULL == pNym) <span class="keywordflow">return</span> <a class="code" href="_o_t_a_p_i_8cpp.html#a8a0b2a3e3d4461ba60ae320c17b09ab4">OT_ERROR</a>;
    <span class="comment">// By this point, pNym is a good pointer, and is on the wallet. (No need to cleanup.)</span>
    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_transaction.html">OTTransaction</a> theTransaction(theUserID, theAccountID, theServerID);

    <span class="keywordflow">if</span> (<span class="keyword">false</span> == theTransaction.LoadContractFromString(strTransaction))
    {
        <a class="code" href="class_o_t_string.html">OTString</a> strAcctID(theAccountID);
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error loading transaction from string. Acct ID: %s\n&quot;</span>, __FUNCTION__, strAcctID.Get());
        <span class="keywordflow">return</span> <a class="code" href="_o_t_a_p_i_8cpp.html#a8a0b2a3e3d4461ba60ae320c17b09ab4">OT_ERROR</a>;
    }
    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_transaction.html">OTTransaction</a> * pTransaction = NULL;
    <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTTransaction&gt;</a> theTransAngel;

    <span class="keywordflow">if</span> (theTransaction.IsAbbreviated())  <span class="comment">// IF TRANSACTION IS ABBREVIATED (Ledger may only contain stubs, not full records...)</span>
    {
        int64_t lBoxType = 0;

        <span class="comment">// ----------------</span>
             <span class="keywordflow">if</span> (theTransaction.Contains(<span class="stringliteral">&quot;nymboxRecord&quot;</span>))       lBoxType = static_cast&lt;int64_t&gt;(<a class="code" href="class_o_t_ledger.html#ac03f2514d0c6ae00147c5d53bf19591aae7427339a1b7566f46fb6d60c66bbfae">OTLedger::nymbox</a>);
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (theTransaction.Contains(<span class="stringliteral">&quot;inboxRecord&quot;</span>))        lBoxType = static_cast&lt;int64_t&gt;(<a class="code" href="class_o_t_ledger.html#ac03f2514d0c6ae00147c5d53bf19591aa7bd594902e6c775ef4f356897fb36006">OTLedger::inbox</a>);
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (theTransaction.Contains(<span class="stringliteral">&quot;outboxRecord&quot;</span>))       lBoxType = static_cast&lt;int64_t&gt;(<a class="code" href="class_o_t_ledger.html#ac03f2514d0c6ae00147c5d53bf19591aaa0150c89048bba5eedf6a0919603d4e4">OTLedger::outbox</a>);
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (theTransaction.Contains(<span class="stringliteral">&quot;paymentInboxRecord&quot;</span>)) lBoxType = static_cast&lt;int64_t&gt;(<a class="code" href="class_o_t_ledger.html#ac03f2514d0c6ae00147c5d53bf19591aaf8b0cad55e051e014a4f9ebee8dd2984">OTLedger::paymentInbox</a>);
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (theTransaction.Contains(<span class="stringliteral">&quot;recordBoxRecord&quot;</span>))    lBoxType = static_cast&lt;int64_t&gt;(<a class="code" href="class_o_t_ledger.html#ac03f2514d0c6ae00147c5d53bf19591aae650dd1b5a89523bace1c54c06897922">OTLedger::recordBox</a>);
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (theTransaction.Contains(<span class="stringliteral">&quot;expiredBoxRecord&quot;</span>))   lBoxType = static_cast&lt;int64_t&gt;(<a class="code" href="class_o_t_ledger.html#ac03f2514d0c6ae00147c5d53bf19591aa500bad2900b83847f7cc16b8cc26817a">OTLedger::expiredBox</a>);
        <span class="keywordflow">else</span>
        {
            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error loading from abbreviated transaction: unknown ledger type. \n&quot;</span>, __FUNCTION__);
            <span class="keywordflow">return</span> <a class="code" href="_o_t_a_p_i_8cpp.html#a8a0b2a3e3d4461ba60ae320c17b09ab4">OT_ERROR</a>;
        }
        <span class="comment">// --------------</span>
        pTransaction = <a class="code" href="class_o_t_transaction.html#ae97bc794fe820f4f2e864c29c42df8eb">OTTransaction::LoadBoxReceipt</a>(theTransaction, static_cast&lt;int64_t&gt;(lBoxType));
        <span class="keywordflow">if</span> (NULL == pTransaction)
        {
            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error loading from abbreviated transaction: failed loading box receipt.\n&quot;</span>, __FUNCTION__);
            <span class="keywordflow">return</span> <a class="code" href="_o_t_a_p_i_8cpp.html#a8a0b2a3e3d4461ba60ae320c17b09ab4">OT_ERROR</a>;
        }
        <span class="comment">// ----------------</span>
        theTransAngel.<a class="code" href="class_o_t_cleanup.html#aac0b26193b0a59dbbf491a4e417af833">SetCleanupTargetPointer</a>(pTransaction);
    }
    <span class="keywordflow">else</span>
        pTransaction = &amp;theTransaction;
    <span class="comment">// -----------------------------------------------------</span>
    <span class="comment">// At this point, I actually have the transaction pointer, so let&#39;s return its success status</span>
    <a class="code" href="class_o_t_item.html">OTItem</a> * pReplyItem = pTransaction-&gt;<a class="code" href="class_o_t_transaction.html#a62bf5069d7a7fda92fa1d6746a75bb49">GetItem</a>(<a class="code" href="class_o_t_item.html#a03db091faaab100aadc455f4ebe2c5d1af8bcd696284c0bcd0fe198dceaf2f6d5">OTItem::atBalanceStatement</a>);

    <span class="keywordflow">if</span> (NULL == pReplyItem)
        pReplyItem = pTransaction-&gt;<a class="code" href="class_o_t_transaction.html#a62bf5069d7a7fda92fa1d6746a75bb49">GetItem</a>(<a class="code" href="class_o_t_item.html#a03db091faaab100aadc455f4ebe2c5d1a53f9e1f8ef8651545c50d933db94636c">OTItem::atTransactionStatement</a>);

    <span class="keywordflow">if</span> (NULL == pReplyItem)
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: good transaction (could have been abbreviated though) &quot;</span>
                      <span class="stringliteral">&quot;but uncovered \&quot;\&quot; item pointer.\n&quot;</span>, __FUNCTION__);
        <span class="keywordflow">return</span> <a class="code" href="_o_t_a_p_i_8cpp.html#a8a0b2a3e3d4461ba60ae320c17b09ab4">OT_ERROR</a>; <span class="comment">// Weird.</span>
    }

    <span class="keywordflow">return</span> (pReplyItem-&gt;<a class="code" href="class_o_t_item.html#abadbfe245f0dbc8a035d8d6930dd9dfc">GetStatus</a>() == <a class="code" href="class_o_t_item.html#a61e86f5b6c64a518664123907235f376aa099f14a8a9ef5987b1161b764895cdf">OTItem::acknowledgement</a>) ? <a class="code" href="_o_t_a_p_i_8cpp.html#a39b50c1f70f7626e72c95494a44f8921">OT_TRUE</a> : <a class="code" href="_o_t_a_p_i_8cpp.html#aa4db9fe11de208bcc9e4b869c932948b">OT_FALSE</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a08f64194b0ac81e9b3695d6500894303"></a><!-- doxytag: member="OTAPI_Exec::Transaction_GetDateSigned" ref="a08f64194b0ac81e9b3695d6500894303" args="(const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ACCOUNT_ID, const std::string &amp;THE_TRANSACTION)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_o_t_common_8hpp.html#ad28ff0a3eda18840f6bda5872819167f">time64_t</a> <a class="el" href="class_o_t_a_p_i___exec.html#a08f64194b0ac81e9b3695d6500894303">OTAPI_Exec::Transaction_GetDateSigned</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ACCOUNT_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_TRANSACTION</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>--------------------------------------------------</p>
<p>Get Transaction Date Signed (internally uses <a class="el" href="class_o_t_transaction.html#afb069b9f7ab72f90e9e42aed0ba3b17c">OTTransaction::GetDateSigned()</a>.) </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l10593">10593</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty())          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID.empty())            { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>            ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (ACCOUNT_ID.empty())         { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;ACCOUNT_ID&quot;</span>         ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (THE_TRANSACTION.empty())    { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_TRANSACTION&quot;</span>    ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theServerID(SERVER_ID), theUserID(USER_ID), theAccountID(ACCOUNT_ID);

    <a class="code" href="class_o_t_string.html">OTString</a> strTransaction(THE_TRANSACTION);

    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pNym = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#aa53f110b77dee2bc71b70906ca64fbbc">GetOrLoadPrivateNym</a>(theUserID, <span class="keyword">false</span>, __FUNCTION__); <span class="comment">// These copiously log, and ASSERT.</span>
    <span class="keywordflow">if</span> (NULL == pNym) <span class="keywordflow">return</span> <a class="code" href="_o_t_common_8hpp.html#a5c0893ffd83818f1c3c6b3b7ae92da13">OTTimeGetTimeFromSeconds</a>(-1);
    <span class="comment">// -----------------------------------------------------</span>

    <a class="code" href="class_o_t_transaction.html">OTTransaction</a> theTransaction(theUserID, theAccountID, theServerID);

    <span class="keywordflow">if</span> (<span class="keyword">false</span> == theTransaction.LoadContractFromString(strTransaction))
    {
        <a class="code" href="class_o_t_string.html">OTString</a> strAcctID(theAccountID);
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error loading transaction from string. Acct ID: %s\n&quot;</span>, __FUNCTION__, strAcctID.Get());
        <span class="keywordflow">return</span> <a class="code" href="_o_t_common_8hpp.html#a5c0893ffd83818f1c3c6b3b7ae92da13">OTTimeGetTimeFromSeconds</a>(-1);
    }
    <span class="comment">// NO need to load abbreviated version here, since it already stores the date.</span>
    <span class="comment">// -----------------------------------------------------</span>

    <a class="code" href="class_o_t_string.html">OTString</a> strOutput;
    <span class="keywordflow">return</span> theTransaction.GetDateSigned();
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab87d86f975e78c01b27d61d960fe9fd5"></a><!-- doxytag: member="OTAPI_Exec::Transaction_GetDisplayReferenceToNum" ref="ab87d86f975e78c01b27d61d960fe9fd5" args="(const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ACCOUNT_ID, const std::string &amp;THE_TRANSACTION)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64_t <a class="el" href="class_o_t_a_p_i___exec.html#ab87d86f975e78c01b27d61d960fe9fd5">OTAPI_Exec::Transaction_GetDisplayReferenceToNum</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ACCOUNT_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_TRANSACTION</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The pending notice in the inbox has a transaction number that was issued to the server (so it could put the notice in your inbox.) But it's IN REFERENCE TO a transfer that was initiated by another user. THIS function will retrieve THAT transaction number, because this function queries a pending transaction to see what transaction it is "in reference to." </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l10455">10455</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty())          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID.empty())            { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>            ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (ACCOUNT_ID.empty())         { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;ACCOUNT_ID&quot;</span>         ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (THE_TRANSACTION.empty())    { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_TRANSACTION&quot;</span>    ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theServerID(SERVER_ID), theUserID(USER_ID), theAccountID(ACCOUNT_ID);

    <a class="code" href="class_o_t_string.html">OTString</a> strTransaction(THE_TRANSACTION);

    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pNym = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#aa53f110b77dee2bc71b70906ca64fbbc">GetOrLoadPrivateNym</a>(theUserID, <span class="keyword">false</span>, __FUNCTION__); <span class="comment">// These copiously log, and ASSERT.</span>
    <span class="keywordflow">if</span> (NULL == pNym) <span class="keywordflow">return</span> -1;
    <span class="comment">// -----------------------------------------------------</span>

    <a class="code" href="class_o_t_transaction.html">OTTransaction</a> theTransaction(theUserID, theAccountID, theServerID);

    <span class="keywordflow">if</span> (<span class="keyword">false</span> == theTransaction.LoadContractFromString(strTransaction))
    {
        <a class="code" href="class_o_t_string.html">OTString</a> strAcctID(theAccountID);
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error loading transaction from string. Acct ID: %s\n&quot;</span>, __FUNCTION__, strAcctID.Get());
        <span class="keywordflow">return</span> -1;
    }

    <span class="comment">// -----------------------------------------------------</span>
    <span class="comment">// NO need to load abbreviated version here, since it already stores this number.</span>
    <span class="comment">//</span>
    <span class="keyword">const</span> int64_t lDisplayNum = theTransaction.GetReferenceNumForDisplay();
    <span class="keywordflow">return</span> lDisplayNum;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a8f7548ab82a6b82c625758e8fbca116b"></a><!-- doxytag: member="OTAPI_Exec::Transaction_GetRecipientAcctID" ref="a8f7548ab82a6b82c625758e8fbca116b" args="(const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ACCOUNT_ID, const std::string &amp;THE_TRANSACTION)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a8f7548ab82a6b82c625758e8fbca116b">OTAPI_Exec::Transaction_GetRecipientAcctID</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ACCOUNT_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_TRANSACTION</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l10158">10158</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty())          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID.empty())            { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>            ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (ACCOUNT_ID.empty())         { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;ACCOUNT_ID&quot;</span>         ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (THE_TRANSACTION.empty())    { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_TRANSACTION&quot;</span>    ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theServerID(SERVER_ID), theUserID(USER_ID), theAccountID(ACCOUNT_ID);

    <a class="code" href="class_o_t_string.html">OTString</a> strTransaction(THE_TRANSACTION);

    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pNym = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#aa53f110b77dee2bc71b70906ca64fbbc">GetOrLoadPrivateNym</a>(theUserID, <span class="keyword">false</span>, __FUNCTION__); <span class="comment">// These copiously log, and ASSERT.</span>
    <span class="keywordflow">if</span> (NULL == pNym) <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    <span class="comment">// -----------------------------------------------------</span>

    <a class="code" href="class_o_t_transaction.html">OTTransaction</a> theTransaction(theUserID, theAccountID, theServerID);

    <span class="keywordflow">if</span> (<span class="keyword">false</span> == theTransaction.LoadContractFromString(strTransaction))
    {
        <a class="code" href="class_o_t_string.html">OTString</a> strAcctID(theAccountID);
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error loading transaction from string in OTAPI_Exec::Transaction_GetRecipientAcctID. Acct ID: %s\n&quot;</span>, __FUNCTION__, strAcctID.Get());
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    }

    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_transaction.html">OTTransaction</a> * pTransaction = NULL;
    <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTTransaction&gt;</a> theTransAngel;

    <span class="keywordflow">if</span> (theTransaction.IsAbbreviated())
    {
        int64_t lBoxType = 0;

             <span class="keywordflow">if</span> (theTransaction.Contains(<span class="stringliteral">&quot;nymboxRecord&quot;</span>))       lBoxType = static_cast&lt;int64_t&gt;(<a class="code" href="class_o_t_ledger.html#ac03f2514d0c6ae00147c5d53bf19591aae7427339a1b7566f46fb6d60c66bbfae">OTLedger::nymbox</a>);
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (theTransaction.Contains(<span class="stringliteral">&quot;inboxRecord&quot;</span>))        lBoxType = static_cast&lt;int64_t&gt;(<a class="code" href="class_o_t_ledger.html#ac03f2514d0c6ae00147c5d53bf19591aa7bd594902e6c775ef4f356897fb36006">OTLedger::inbox</a>);
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (theTransaction.Contains(<span class="stringliteral">&quot;outboxRecord&quot;</span>))       lBoxType = static_cast&lt;int64_t&gt;(<a class="code" href="class_o_t_ledger.html#ac03f2514d0c6ae00147c5d53bf19591aaa0150c89048bba5eedf6a0919603d4e4">OTLedger::outbox</a>);
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (theTransaction.Contains(<span class="stringliteral">&quot;paymentInboxRecord&quot;</span>)) lBoxType = static_cast&lt;int64_t&gt;(<a class="code" href="class_o_t_ledger.html#ac03f2514d0c6ae00147c5d53bf19591aaf8b0cad55e051e014a4f9ebee8dd2984">OTLedger::paymentInbox</a>);
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (theTransaction.Contains(<span class="stringliteral">&quot;recordBoxRecord&quot;</span>))    lBoxType = static_cast&lt;int64_t&gt;(<a class="code" href="class_o_t_ledger.html#ac03f2514d0c6ae00147c5d53bf19591aae650dd1b5a89523bace1c54c06897922">OTLedger::recordBox</a>);
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (theTransaction.Contains(<span class="stringliteral">&quot;expiredBoxRecord&quot;</span>))   lBoxType = static_cast&lt;int64_t&gt;(<a class="code" href="class_o_t_ledger.html#ac03f2514d0c6ae00147c5d53bf19591aa500bad2900b83847f7cc16b8cc26817a">OTLedger::expiredBox</a>);
        <span class="keywordflow">else</span>
        {
            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error loading from abbreviated transaction: unknown ledger type. \n&quot;</span>, __FUNCTION__);
            <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
        }
        <span class="comment">// --------------</span>
        pTransaction = <a class="code" href="class_o_t_transaction.html#ae97bc794fe820f4f2e864c29c42df8eb">OTTransaction::LoadBoxReceipt</a>(theTransaction, static_cast&lt;int64_t&gt;(lBoxType));
        <span class="keywordflow">if</span> (NULL == pTransaction)
        {
            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error loading from abbreviated transaction: failed loading box receipt.\n&quot;</span>, __FUNCTION__);
            <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
        }
        <span class="comment">// ----------------</span>
        theTransAngel.<a class="code" href="class_o_t_cleanup.html#aac0b26193b0a59dbbf491a4e417af833">SetCleanupTargetPointer</a>(pTransaction);
    }
    <span class="keywordflow">else</span>
        pTransaction = &amp;theTransaction;
    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theOutput;

    <span class="keywordtype">bool</span> bSuccess = pTransaction-&gt;<a class="code" href="class_o_t_transaction.html#a54221d2117096fd673147492a67f6755">GetRecipientAcctIDForDisplay</a>(theOutput);

    <span class="comment">// -----------------------------------------------------</span>

    <span class="keywordflow">if</span> (bSuccess)
    {
        <a class="code" href="class_o_t_string.html">OTString</a> strOutput(theOutput);

        <span class="comment">// Didn&#39;t find one.</span>
        <span class="keywordflow">if</span> (!strOutput.Exists())
            <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;

        <span class="comment">// We found it -- let&#39;s return the user ID</span>
        <span class="comment">//</span>
        std::string pBuf = strOutput.Get();



        <span class="keywordflow">return</span> pBuf;
    }
    <span class="keywordflow">else</span>
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a99ab2f74125acea47ded3a6878354cc8"></a><!-- doxytag: member="OTAPI_Exec::Transaction_GetRecipientUserID" ref="a99ab2f74125acea47ded3a6878354cc8" args="(const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ACCOUNT_ID, const std::string &amp;THE_TRANSACTION)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a99ab2f74125acea47ded3a6878354cc8">OTAPI_Exec::Transaction_GetRecipientUserID</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ACCOUNT_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_TRANSACTION</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l09962">9962</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty())          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID.empty())            { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>            ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (ACCOUNT_ID.empty())         { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;ACCOUNT_ID&quot;</span>         ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (THE_TRANSACTION.empty())    { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_TRANSACTION&quot;</span>    ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theServerID(SERVER_ID), theUserID(USER_ID), theAccountID(ACCOUNT_ID);

    <a class="code" href="class_o_t_string.html">OTString</a> strTransaction(THE_TRANSACTION);
    <span class="comment">// -----------------------------------------------------</span>

    <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pNym = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#aa53f110b77dee2bc71b70906ca64fbbc">GetOrLoadPrivateNym</a>(theUserID, <span class="keyword">false</span>, __FUNCTION__); <span class="comment">// These copiously log, and ASSERT.</span>
    <span class="keywordflow">if</span> (NULL == pNym) <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    <span class="comment">// By this point, pNym is a good pointer, and is on the wallet. (No need to cleanup.)</span>
    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_transaction.html">OTTransaction</a> theTransaction(theUserID, theAccountID, theServerID);

    <span class="keywordflow">if</span> (<span class="keyword">false</span> == theTransaction.LoadContractFromString(strTransaction))
    {
        <a class="code" href="class_o_t_string.html">OTString</a> strAcctID(theAccountID);
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error loading transaction from string. Acct ID: %s\n&quot;</span>, __FUNCTION__, strAcctID.Get());
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    }
    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_transaction.html">OTTransaction</a> * pTransaction = NULL;
    <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTTransaction&gt;</a> theTransAngel;

    <span class="keywordflow">if</span> (theTransaction.IsAbbreviated())
    {
        int64_t lBoxType = 0;

             <span class="keywordflow">if</span> (theTransaction.Contains(<span class="stringliteral">&quot;nymboxRecord&quot;</span>))       lBoxType = static_cast&lt;int64_t&gt;(<a class="code" href="class_o_t_ledger.html#ac03f2514d0c6ae00147c5d53bf19591aae7427339a1b7566f46fb6d60c66bbfae">OTLedger::nymbox</a>);
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (theTransaction.Contains(<span class="stringliteral">&quot;inboxRecord&quot;</span>))        lBoxType = static_cast&lt;int64_t&gt;(<a class="code" href="class_o_t_ledger.html#ac03f2514d0c6ae00147c5d53bf19591aa7bd594902e6c775ef4f356897fb36006">OTLedger::inbox</a>);
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (theTransaction.Contains(<span class="stringliteral">&quot;outboxRecord&quot;</span>))       lBoxType = static_cast&lt;int64_t&gt;(<a class="code" href="class_o_t_ledger.html#ac03f2514d0c6ae00147c5d53bf19591aaa0150c89048bba5eedf6a0919603d4e4">OTLedger::outbox</a>);
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (theTransaction.Contains(<span class="stringliteral">&quot;paymentInboxRecord&quot;</span>)) lBoxType = static_cast&lt;int64_t&gt;(<a class="code" href="class_o_t_ledger.html#ac03f2514d0c6ae00147c5d53bf19591aaf8b0cad55e051e014a4f9ebee8dd2984">OTLedger::paymentInbox</a>);
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (theTransaction.Contains(<span class="stringliteral">&quot;recordBoxRecord&quot;</span>))    lBoxType = static_cast&lt;int64_t&gt;(<a class="code" href="class_o_t_ledger.html#ac03f2514d0c6ae00147c5d53bf19591aae650dd1b5a89523bace1c54c06897922">OTLedger::recordBox</a>);
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (theTransaction.Contains(<span class="stringliteral">&quot;expiredBoxRecord&quot;</span>))   lBoxType = static_cast&lt;int64_t&gt;(<a class="code" href="class_o_t_ledger.html#ac03f2514d0c6ae00147c5d53bf19591aa500bad2900b83847f7cc16b8cc26817a">OTLedger::expiredBox</a>);
        <span class="keywordflow">else</span>
        {
            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error loading from abbreviated transaction: unknown ledger type. \n&quot;</span>, __FUNCTION__);
            <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
        }
        <span class="comment">// --------------</span>
        pTransaction = <a class="code" href="class_o_t_transaction.html#ae97bc794fe820f4f2e864c29c42df8eb">OTTransaction::LoadBoxReceipt</a>(theTransaction, static_cast&lt;int64_t&gt;(lBoxType));
        <span class="keywordflow">if</span> (NULL == pTransaction)
        {
            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error loading from abbreviated transaction: failed loading box receipt.&quot;</span>, __FUNCTION__);
            <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
        }
        <span class="comment">// ----------------</span>
        theTransAngel.<a class="code" href="class_o_t_cleanup.html#aac0b26193b0a59dbbf491a4e417af833">SetCleanupTargetPointer</a>(pTransaction);
    }
    <span class="keywordflow">else</span>
        pTransaction = &amp;theTransaction;
    <span class="comment">// -----------------------------------------------------</span>

    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theOutput;

    <span class="keywordtype">bool</span> bSuccess = pTransaction-&gt;<a class="code" href="class_o_t_transaction.html#a829e1dc63a933dae6fd3761091a9a2b1">GetRecipientUserIDForDisplay</a>(theOutput);

    <span class="comment">// -----------------------------------------------------</span>

    <span class="comment">// Normally, there IS NO recipient user ID for a transfer (only a recipient acct ID.)</span>
    <span class="comment">// But here, as a special trick, I&#39;ll see if the account is in my address book.</span>
    <span class="comment">// THIS MEANS THE ADDRESS BOOK needs to store nyms (for other people, their public nym)</span>
    <span class="comment">// as well as a list of acct IDs that I have associated with each Nym. That way, I can</span>
    <span class="comment">// later look up the Nym ID based on the acct ID, and then look up my display label for</span>
    <span class="comment">// that Nym.</span>
    <span class="comment">//</span>
    <span class="comment">//  if (!bSuccess &amp;&amp; (theTransaction.GetType() == OTTransaction::pending))</span>
    <span class="comment">//  {</span>
    <span class="comment">//      // AS SOON AS ADDRESS BOOK FEATURE IS ADDED, THEN THIS CAN BE COMPLETED HERE.</span>
    <span class="comment">//  }</span>

    <span class="comment">// -----------------------------------------------------</span>

    <span class="keywordflow">if</span> (bSuccess)
    {
        <a class="code" href="class_o_t_string.html">OTString</a> strOutput(theOutput);

        <span class="comment">// Didn&#39;t find one.</span>
        <span class="keywordflow">if</span> (!strOutput.Exists())
            <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;

        <span class="comment">// We found it -- let&#39;s return the user ID</span>
        <span class="comment">//</span>
        std::string pBuf = strOutput.Get();



        <span class="keywordflow">return</span> pBuf;
    }
    <span class="keywordflow">else</span>
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aae89130ef52fd5d564c399093e685b56"></a><!-- doxytag: member="OTAPI_Exec::Transaction_GetSenderAcctID" ref="aae89130ef52fd5d564c399093e685b56" args="(const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ACCOUNT_ID, const std::string &amp;THE_TRANSACTION)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#aae89130ef52fd5d564c399093e685b56">OTAPI_Exec::Transaction_GetSenderAcctID</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ACCOUNT_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_TRANSACTION</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l10067">10067</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty())          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID.empty())            { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>            ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (ACCOUNT_ID.empty())         { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;ACCOUNT_ID&quot;</span>         ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (THE_TRANSACTION.empty())    { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_TRANSACTION&quot;</span>    ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theServerID(SERVER_ID), theUserID(USER_ID), theAccountID(ACCOUNT_ID);

    <a class="code" href="class_o_t_string.html">OTString</a> strTransaction(THE_TRANSACTION);

    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pNym = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#aa53f110b77dee2bc71b70906ca64fbbc">GetOrLoadPrivateNym</a>(theUserID, <span class="keyword">false</span>, __FUNCTION__); <span class="comment">// These copiously log, and ASSERT.</span>
    <span class="keywordflow">if</span> (NULL == pNym) <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    <span class="comment">// -----------------------------------------------------</span>

    <a class="code" href="class_o_t_transaction.html">OTTransaction</a> theTransaction(theUserID, theAccountID, theServerID);

    <span class="keywordflow">if</span> (<span class="keyword">false</span> == theTransaction.LoadContractFromString(strTransaction))
    {
        <a class="code" href="class_o_t_string.html">OTString</a> strAcctID(theAccountID);
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error loading transaction from string. Acct ID: %s\n&quot;</span>, __FUNCTION__, strAcctID.Get());
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    }
    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_transaction.html">OTTransaction</a> * pTransaction = NULL;
    <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTTransaction&gt;</a> theTransAngel;

    <span class="keywordflow">if</span> (theTransaction.IsAbbreviated())
    {
        int64_t lBoxType = 0;

             <span class="keywordflow">if</span> (theTransaction.Contains(<span class="stringliteral">&quot;nymboxRecord&quot;</span>))       lBoxType = static_cast&lt;int64_t&gt;(<a class="code" href="class_o_t_ledger.html#ac03f2514d0c6ae00147c5d53bf19591aae7427339a1b7566f46fb6d60c66bbfae">OTLedger::nymbox</a>);
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (theTransaction.Contains(<span class="stringliteral">&quot;inboxRecord&quot;</span>))        lBoxType = static_cast&lt;int64_t&gt;(<a class="code" href="class_o_t_ledger.html#ac03f2514d0c6ae00147c5d53bf19591aa7bd594902e6c775ef4f356897fb36006">OTLedger::inbox</a>);
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (theTransaction.Contains(<span class="stringliteral">&quot;outboxRecord&quot;</span>))       lBoxType = static_cast&lt;int64_t&gt;(<a class="code" href="class_o_t_ledger.html#ac03f2514d0c6ae00147c5d53bf19591aaa0150c89048bba5eedf6a0919603d4e4">OTLedger::outbox</a>);
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (theTransaction.Contains(<span class="stringliteral">&quot;paymentInboxRecord&quot;</span>)) lBoxType = static_cast&lt;int64_t&gt;(<a class="code" href="class_o_t_ledger.html#ac03f2514d0c6ae00147c5d53bf19591aaf8b0cad55e051e014a4f9ebee8dd2984">OTLedger::paymentInbox</a>);
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (theTransaction.Contains(<span class="stringliteral">&quot;recordBoxRecord&quot;</span>))    lBoxType = static_cast&lt;int64_t&gt;(<a class="code" href="class_o_t_ledger.html#ac03f2514d0c6ae00147c5d53bf19591aae650dd1b5a89523bace1c54c06897922">OTLedger::recordBox</a>);
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (theTransaction.Contains(<span class="stringliteral">&quot;expiredBoxRecord&quot;</span>))   lBoxType = static_cast&lt;int64_t&gt;(<a class="code" href="class_o_t_ledger.html#ac03f2514d0c6ae00147c5d53bf19591aa500bad2900b83847f7cc16b8cc26817a">OTLedger::expiredBox</a>);
        <span class="keywordflow">else</span>
        {
            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error loading from abbreviated transaction: unknown ledger type.\n&quot;</span>, __FUNCTION__);
            <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
        }
        <span class="comment">// --------------</span>
        pTransaction = <a class="code" href="class_o_t_transaction.html#ae97bc794fe820f4f2e864c29c42df8eb">OTTransaction::LoadBoxReceipt</a>(theTransaction, static_cast&lt;int64_t&gt;(lBoxType));
        <span class="keywordflow">if</span> (NULL == pTransaction)
        {
            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error loading from abbreviated transaction: failed loading box receipt. \n&quot;</span>, __FUNCTION__);
            <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
        }
        <span class="comment">// ----------------</span>
        theTransAngel.<a class="code" href="class_o_t_cleanup.html#aac0b26193b0a59dbbf491a4e417af833">SetCleanupTargetPointer</a>(pTransaction);
    }
    <span class="keywordflow">else</span>
        pTransaction = &amp;theTransaction;
    <span class="comment">// -----------------------------------------------------</span>

    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theOutput;

    <span class="keywordtype">bool</span> bSuccess = pTransaction-&gt;<a class="code" href="class_o_t_transaction.html#acf66d9f8f5d3a6e4ee0a418a41db6019">GetSenderAcctIDForDisplay</a>(theOutput);

    <span class="comment">// -----------------------------------------------------</span>

    <span class="keywordflow">if</span> (bSuccess)
    {
        <a class="code" href="class_o_t_string.html">OTString</a> strOutput(theOutput);

        <span class="comment">// Didn&#39;t find one.</span>
        <span class="keywordflow">if</span> (!strOutput.Exists())
            <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;

        <span class="comment">// We found it -- let&#39;s return the user ID</span>
        <span class="comment">//</span>
        std::string pBuf = strOutput.Get();



        <span class="keywordflow">return</span> pBuf;
    }
    <span class="keywordflow">else</span>
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a56963563f1323165940629fe18280c47"></a><!-- doxytag: member="OTAPI_Exec::Transaction_GetSenderUserID" ref="a56963563f1323165940629fe18280c47" args="(const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ACCOUNT_ID, const std::string &amp;THE_TRANSACTION)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a56963563f1323165940629fe18280c47">OTAPI_Exec::Transaction_GetSenderUserID</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ACCOUNT_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_TRANSACTION</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l09873">9873</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty())          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID.empty())            { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>            ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (ACCOUNT_ID.empty())         { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;ACCOUNT_ID&quot;</span>         ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (THE_TRANSACTION.empty())    { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_TRANSACTION&quot;</span>    ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theServerID(SERVER_ID), theUserID(USER_ID), theAccountID(ACCOUNT_ID);

    <a class="code" href="class_o_t_string.html">OTString</a> strTransaction(THE_TRANSACTION);

    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pNym = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#aa53f110b77dee2bc71b70906ca64fbbc">GetOrLoadPrivateNym</a>(theUserID, <span class="keyword">false</span>, __FUNCTION__); <span class="comment">// These copiously log, and ASSERT.</span>
    <span class="keywordflow">if</span> (NULL == pNym) <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    <span class="comment">// -----------------------------------------------------</span>

    <a class="code" href="class_o_t_transaction.html">OTTransaction</a> theTransaction(theUserID, theAccountID, theServerID);

    <span class="keywordflow">if</span> (<span class="keyword">false</span> == theTransaction.LoadContractFromString(strTransaction))
    {
        <a class="code" href="class_o_t_string.html">OTString</a> strAcctID(theAccountID);
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error loading transaction from string. Acct ID: %s\n&quot;</span>, __FUNCTION__, strAcctID.Get());
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    }
    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_transaction.html">OTTransaction</a> * pTransaction = NULL;
    <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTTransaction&gt;</a> theTransAngel;

    <span class="keywordflow">if</span> (theTransaction.IsAbbreviated())
    {
        int64_t lBoxType = 0;

             <span class="keywordflow">if</span> (theTransaction.Contains(<span class="stringliteral">&quot;nymboxRecord&quot;</span>))       lBoxType = static_cast&lt;int64_t&gt;(<a class="code" href="class_o_t_ledger.html#ac03f2514d0c6ae00147c5d53bf19591aae7427339a1b7566f46fb6d60c66bbfae">OTLedger::nymbox</a>);
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (theTransaction.Contains(<span class="stringliteral">&quot;inboxRecord&quot;</span>))        lBoxType = static_cast&lt;int64_t&gt;(<a class="code" href="class_o_t_ledger.html#ac03f2514d0c6ae00147c5d53bf19591aa7bd594902e6c775ef4f356897fb36006">OTLedger::inbox</a>);
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (theTransaction.Contains(<span class="stringliteral">&quot;outboxRecord&quot;</span>))       lBoxType = static_cast&lt;int64_t&gt;(<a class="code" href="class_o_t_ledger.html#ac03f2514d0c6ae00147c5d53bf19591aaa0150c89048bba5eedf6a0919603d4e4">OTLedger::outbox</a>);
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (theTransaction.Contains(<span class="stringliteral">&quot;paymentInboxRecord&quot;</span>)) lBoxType = static_cast&lt;int64_t&gt;(<a class="code" href="class_o_t_ledger.html#ac03f2514d0c6ae00147c5d53bf19591aaf8b0cad55e051e014a4f9ebee8dd2984">OTLedger::paymentInbox</a>);
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (theTransaction.Contains(<span class="stringliteral">&quot;recordBoxRecord&quot;</span>))    lBoxType = static_cast&lt;int64_t&gt;(<a class="code" href="class_o_t_ledger.html#ac03f2514d0c6ae00147c5d53bf19591aae650dd1b5a89523bace1c54c06897922">OTLedger::recordBox</a>);
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (theTransaction.Contains(<span class="stringliteral">&quot;expiredBoxRecord&quot;</span>))   lBoxType = static_cast&lt;int64_t&gt;(<a class="code" href="class_o_t_ledger.html#ac03f2514d0c6ae00147c5d53bf19591aa500bad2900b83847f7cc16b8cc26817a">OTLedger::expiredBox</a>);
        <span class="keywordflow">else</span>
        {
            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error loading from abbreviated transaction: unknown ledger type.\n&quot;</span>, __FUNCTION__);
            <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
        }
        <span class="comment">// --------------</span>
        pTransaction = <a class="code" href="class_o_t_transaction.html#ae97bc794fe820f4f2e864c29c42df8eb">OTTransaction::LoadBoxReceipt</a>(theTransaction, static_cast&lt;int64_t&gt;(lBoxType));
        <span class="keywordflow">if</span> (NULL == pTransaction)
        {
            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error loading from abbreviated transaction: failed loading box receipt.\n&quot;</span>, __FUNCTION__);
            <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
        }
        <span class="comment">// ----------------</span>
        theTransAngel.<a class="code" href="class_o_t_cleanup.html#aac0b26193b0a59dbbf491a4e417af833">SetCleanupTargetPointer</a>(pTransaction);
    }
    <span class="keywordflow">else</span>
        pTransaction = &amp;theTransaction;
    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theOutput;

    <span class="keywordtype">bool</span> bSuccess = pTransaction-&gt;<a class="code" href="class_o_t_transaction.html#a1091822e3072f014a8b2f64b93917ca7" title="For display purposes. The &quot;ref #&quot; you actually display (versus the one you use internally) might chan...">GetSenderUserIDForDisplay</a>(theOutput);
    <span class="comment">// -----------------------------------------------------</span>

    <span class="keywordflow">if</span> (bSuccess)
    {
        <a class="code" href="class_o_t_string.html">OTString</a> strOutput(theOutput);

        <span class="comment">// Didn&#39;t find one.</span>
        <span class="keywordflow">if</span> (!strOutput.Exists())
            <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;

        <span class="comment">// We found it -- let&#39;s return the user ID</span>
        <span class="comment">//</span>
        std::string pBuf = strOutput.Get();



        <span class="keywordflow">return</span> pBuf;
    }
    <span class="keywordflow">else</span>
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a53d79e4cf2d08e573668e7d5950a88ff"></a><!-- doxytag: member="OTAPI_Exec::Transaction_GetSuccess" ref="a53d79e4cf2d08e573668e7d5950a88ff" args="(const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ACCOUNT_ID, const std::string &amp;THE_TRANSACTION)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_o_t_data_check_8hpp.html#aa3817cab69424142fb73706ef4871d36">OT_BOOL</a> <a class="el" href="class_o_t_a_p_i___exec.html#a53d79e4cf2d08e573668e7d5950a88ff">OTAPI_Exec::Transaction_GetSuccess</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ACCOUNT_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_TRANSACTION</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>--------------------------------------------------</p>
<p>Get TransactionSuccess</p>
<p>OT_TRUE (1) == acknowledgment OT_FALSE (0) == rejection OT_ERROR(-1) == error_state (such as dropped message.)</p>
<p>Returns OT_BOOL. </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l10638">10638</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty())          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID.empty())            { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>            ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (ACCOUNT_ID.empty())         { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;ACCOUNT_ID&quot;</span>         ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (THE_TRANSACTION.empty())    { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_TRANSACTION&quot;</span>    ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theServerID(SERVER_ID), theUserID(USER_ID), theAccountID(ACCOUNT_ID);

    <a class="code" href="class_o_t_string.html">OTString</a> strTransaction(THE_TRANSACTION);
    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pNym = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#aa53f110b77dee2bc71b70906ca64fbbc">GetOrLoadPrivateNym</a>(theUserID, <span class="keyword">false</span>, __FUNCTION__); <span class="comment">// These copiously log, and ASSERT.</span>
    <span class="keywordflow">if</span> (NULL == pNym) <span class="keywordflow">return</span> <a class="code" href="_o_t_a_p_i_8cpp.html#a8a0b2a3e3d4461ba60ae320c17b09ab4">OT_ERROR</a>;
    <span class="comment">// By this point, pNym is a good pointer, and is on the wallet. (No need to cleanup.)</span>
    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_transaction.html">OTTransaction</a> theTransaction(theUserID, theAccountID, theServerID);

    <span class="keywordflow">if</span> (<span class="keyword">false</span> == theTransaction.LoadContractFromString(strTransaction))
    {
        <a class="code" href="class_o_t_string.html">OTString</a> strAcctID(theAccountID);
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error loading transaction from string. Acct ID: %s\n&quot;</span>, __FUNCTION__, strAcctID.Get());
        <span class="keywordflow">return</span> <a class="code" href="_o_t_a_p_i_8cpp.html#a8a0b2a3e3d4461ba60ae320c17b09ab4">OT_ERROR</a>;
    }
    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_transaction.html">OTTransaction</a> * pTransaction = NULL;
    <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTTransaction&gt;</a> theTransAngel;

    <span class="keywordflow">if</span> (theTransaction.IsAbbreviated()) <span class="comment">// Abbreviated.</span>
    {
        int64_t lBoxType = 0;

        <span class="comment">// --------------</span>
             <span class="keywordflow">if</span> (theTransaction.Contains(<span class="stringliteral">&quot;nymboxRecord&quot;</span>))           lBoxType = static_cast&lt;int64_t&gt;(<a class="code" href="class_o_t_ledger.html#ac03f2514d0c6ae00147c5d53bf19591aae7427339a1b7566f46fb6d60c66bbfae">OTLedger::nymbox</a>);
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (theTransaction.Contains(<span class="stringliteral">&quot;inboxRecord&quot;</span>))            lBoxType = static_cast&lt;int64_t&gt;(<a class="code" href="class_o_t_ledger.html#ac03f2514d0c6ae00147c5d53bf19591aa7bd594902e6c775ef4f356897fb36006">OTLedger::inbox</a>);
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (theTransaction.Contains(<span class="stringliteral">&quot;outboxRecord&quot;</span>))           lBoxType = static_cast&lt;int64_t&gt;(<a class="code" href="class_o_t_ledger.html#ac03f2514d0c6ae00147c5d53bf19591aaa0150c89048bba5eedf6a0919603d4e4">OTLedger::outbox</a>);
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (theTransaction.Contains(<span class="stringliteral">&quot;paymentInboxRecord&quot;</span>))     lBoxType = static_cast&lt;int64_t&gt;(<a class="code" href="class_o_t_ledger.html#ac03f2514d0c6ae00147c5d53bf19591aaf8b0cad55e051e014a4f9ebee8dd2984">OTLedger::paymentInbox</a>);
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (theTransaction.Contains(<span class="stringliteral">&quot;recordBoxRecord&quot;</span>))        lBoxType = static_cast&lt;int64_t&gt;(<a class="code" href="class_o_t_ledger.html#ac03f2514d0c6ae00147c5d53bf19591aae650dd1b5a89523bace1c54c06897922">OTLedger::recordBox</a>);
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (theTransaction.Contains(<span class="stringliteral">&quot;expiredBoxRecord&quot;</span>))       lBoxType = static_cast&lt;int64_t&gt;(<a class="code" href="class_o_t_ledger.html#ac03f2514d0c6ae00147c5d53bf19591aa500bad2900b83847f7cc16b8cc26817a">OTLedger::expiredBox</a>);
        <span class="keywordflow">else</span>
        {
            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error loading from abbreviated transaction: unknown ledger type. \n&quot;</span>, __FUNCTION__);
            <span class="keywordflow">return</span> <a class="code" href="_o_t_a_p_i_8cpp.html#a8a0b2a3e3d4461ba60ae320c17b09ab4">OT_ERROR</a>;
        }
        <span class="comment">// --------------</span>
        pTransaction = <a class="code" href="class_o_t_transaction.html#ae97bc794fe820f4f2e864c29c42df8eb">OTTransaction::LoadBoxReceipt</a>(theTransaction, static_cast&lt;int64_t&gt;(lBoxType));
        <span class="keywordflow">if</span> (NULL == pTransaction)
        {
            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error loading from abbreviated transaction: failed loading box receipt. \n&quot;</span>, __FUNCTION__);
            <span class="keywordflow">return</span> <a class="code" href="_o_t_a_p_i_8cpp.html#a8a0b2a3e3d4461ba60ae320c17b09ab4">OT_ERROR</a>;
        }
        <span class="comment">// ----------------</span>
        theTransAngel.<a class="code" href="class_o_t_cleanup.html#aac0b26193b0a59dbbf491a4e417af833">SetCleanupTargetPointer</a>(pTransaction);
    }
    <span class="keywordflow">else</span>  <span class="comment">// NOT abbreviated.</span>
        pTransaction = &amp;theTransaction;
    <span class="comment">// -----------------------------------------------------</span>

    <span class="keywordflow">if</span> (pTransaction-&gt;<a class="code" href="class_o_t_transaction.html#ac5ffc9f0e274bbc617185a5335c061a3">GetSuccess</a>())
    {
        <span class="keywordflow">return</span> <a class="code" href="_o_t_a_p_i_8cpp.html#a39b50c1f70f7626e72c95494a44f8921">OT_TRUE</a>;
    }
    <span class="keywordflow">else</span>
    {
        <span class="keyword">const</span> int64_t lTransactionNum = pTransaction-&gt;<a class="code" href="class_o_t_transaction_type.html#aa204b21b7f498389f746742c1d2007fa">GetTransactionNum</a>();

        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: ** FYI, this transaction has a &#39;failure&#39; status from the server. TransNum: %lld\n&quot;</span>, __FUNCTION__, lTransactionNum);
    }

    <span class="keywordflow">return</span> <a class="code" href="_o_t_a_p_i_8cpp.html#aa4db9fe11de208bcc9e4b869c932948b">OT_FALSE</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa97dac68f36dde2f0e43c3059ac9efe2"></a><!-- doxytag: member="OTAPI_Exec::Transaction_GetType" ref="aa97dac68f36dde2f0e43c3059ac9efe2" args="(const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ACCOUNT_ID, const std::string &amp;THE_TRANSACTION)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#aa97dac68f36dde2f0e43c3059ac9efe2">OTAPI_Exec::Transaction_GetType</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ACCOUNT_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_TRANSACTION</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get Transaction Type (internally uses GetTransactionTypeString().) </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l10500">10500</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty())          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID.empty())            { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>            ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (ACCOUNT_ID.empty())         { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;ACCOUNT_ID&quot;</span>         ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (THE_TRANSACTION.empty())    { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_TRANSACTION&quot;</span>    ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theServerID(SERVER_ID), theUserID(USER_ID), theAccountID(ACCOUNT_ID);

    <a class="code" href="class_o_t_string.html">OTString</a> strTransaction(THE_TRANSACTION);

    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pNym = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#aa53f110b77dee2bc71b70906ca64fbbc">GetOrLoadPrivateNym</a>(theUserID, <span class="keyword">false</span>, __FUNCTION__); <span class="comment">// These copiously log, and ASSERT.</span>
    <span class="keywordflow">if</span> (NULL == pNym) <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_transaction.html">OTTransaction</a> theTransaction(theUserID, theAccountID, theServerID);

    <span class="keywordflow">if</span> (<span class="keyword">false</span> == theTransaction.LoadContractFromString(strTransaction))
    {
        <a class="code" href="class_o_t_string.html">OTString</a> strAcctID(theAccountID);
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error loading transaction from string. Acct ID: %s\n&quot;</span>, __FUNCTION__, strAcctID.Get());
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    }
    <span class="comment">// -----------------------------------------------------</span>
    <span class="comment">// NO need to load abbreviated version, since it already stores this number.</span>

    std::string pBuf = theTransaction.GetTypeString();

    <span class="keywordflow">return</span> pBuf;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a42b95aab2376ff21fb6a7b9704212956"></a><!-- doxytag: member="OTAPI_Exec::Transaction_GetVoucher" ref="a42b95aab2376ff21fb6a7b9704212956" args="(const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ACCOUNT_ID, const std::string &amp;THE_TRANSACTION)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a42b95aab2376ff21fb6a7b9704212956">OTAPI_Exec::Transaction_GetVoucher</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ACCOUNT_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_TRANSACTION</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>-------------------------------------------------------------------- Retrieve Voucher from Transaction</p>
<p>If you withdrew into a voucher instead of cash, this function allows you to retrieve the actual voucher cheque from the reply transaction. (A voucher is a cheque drawn on an int32_t server account instead of a user's asset account, so the voucher cannot ever bounce due to insufficient funds. We are accustomed to this functionality already in our daily lives, via "money orders" and "cashier's cheques".)</p>
<p>How would you use this in full?</p>
<p>First, call <a class="el" href="class_o_t_a_p_i___exec.html#a141b6f08b693940b3cc24797d9fdaa92">withdrawVoucher()</a> in order to send the request to the server. (You may optionally call <a class="el" href="class_o_t_a_p_i___exec.html#aa920e604052b505d382202593c050a11">FlushMessageBuffer()</a> before doing this.)</p>
<p>Then, call <a class="el" href="class_o_t_a_p_i___exec.html#a65175755753f15ff01e91312f349f5ea">PopMessageBuffer()</a> to retrieve any server reply.</p>
<p>If there is a message from the server in reply, then call Message_GetCommand to verify that it's a reply to the message that you sent, and call Message_GetSuccess to verify whether the message was a success.</p>
<p>If it was a success, next call Message_GetLedger to retrieve the actual "reply ledger" from the server.</p>
<p>Penultimately, call <a class="el" href="class_o_t_a_p_i___exec.html#aabc9b8e0c20f23310e9bf1f273d44d04">Ledger_GetTransactionByID()</a> and then, finally, call <a class="el" href="class_o_t_a_p_i___exec.html#a42b95aab2376ff21fb6a7b9704212956">Transaction_GetVoucher()</a> (below) in order to retrieve the voucher cheque itself from the transaction. </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l09789">9789</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty())       { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>       ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID.empty())         { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>         ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (ACCOUNT_ID.empty())      { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;ACCOUNT_ID&quot;</span>      ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (THE_TRANSACTION.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_TRANSACTION&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theServerID(SERVER_ID), theUserID(USER_ID), theAccountID(ACCOUNT_ID);

    <a class="code" href="class_o_t_string.html">OTString</a> strTransaction(THE_TRANSACTION);

    <a class="code" href="class_o_t_string.html">OTString</a> strOutput;

    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pNym = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#aa53f110b77dee2bc71b70906ca64fbbc">GetOrLoadPrivateNym</a>(theUserID, <span class="keyword">false</span>, __FUNCTION__); <span class="comment">// These copiously log, and ASSERT.</span>
    <span class="keywordflow">if</span> (NULL == pNym) <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    <span class="comment">// -----------------------------------------------------</span>

    <a class="code" href="class_o_t_transaction.html">OTTransaction</a> theTransaction(theUserID, theAccountID, theServerID);

    <span class="keywordflow">if</span> (<span class="keyword">false</span> == theTransaction.LoadContractFromString(strTransaction))
    {
        <a class="code" href="class_o_t_string.html">OTString</a> strAcctID(theAccountID);
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error loading transaction from string. Acct ID: %s\n&quot;</span>, __FUNCTION__, strAcctID.Get());
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    }
    <span class="comment">// No need to check if transaction is abbreviated, since it&#39;s coming from a message ledger.</span>
    <span class="comment">// (Those always contain the full version of the transactions, automatically.)</span>
    <span class="comment">// -----------------------------------------------------</span>

    <span class="keywordflow">if</span> (<a class="code" href="class_o_t_transaction.html#af6b54636f1000e09f19d1c7a7886e1f8a97e769c64e9e1ea2d8e7730e7d758949">OTTransaction::atWithdrawal</a> != theTransaction.GetType())
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error: tried to retrieve voucher from wrong transaction (not atWithdrawal).\n&quot;</span>, __FUNCTION__);
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    }

    <span class="comment">// -----------------------------------------------------</span>

    <span class="comment">// loop through the ALL items that make up this transaction and check to see if a response to withdrawal.</span>

    <span class="comment">// if pointer not null, and it&#39;s a withdrawal, and it&#39;s an acknowledgement (not a rejection or error)</span>
    <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_item_8hpp.html#afed69f7c75742cc24ea837d6589e9d19">listOfItems</a>, theTransaction.GetItemList())
    {
        <a class="code" href="class_o_t_item.html">OTItem</a> * pItem = *it;
        <span class="keywordflow">if</span> (NULL == pItem)  { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Pointer: %s should not have been &quot;</span><span class="stringliteral">&quot;.\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;pItem&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

        <span class="keywordflow">if</span> ((<a class="code" href="class_o_t_item.html#a03db091faaab100aadc455f4ebe2c5d1a36d4c6faf8ad5aae6ea36fe5a66012c8">OTItem::atWithdrawVoucher</a>  == pItem-&gt;<a class="code" href="class_o_t_item.html#a2f4535b271f23b7c2b6b1dbabf279ffe">GetType</a>()) &amp;&amp;
            (<a class="code" href="class_o_t_item.html#a61e86f5b6c64a518664123907235f376aa099f14a8a9ef5987b1161b764895cdf">OTItem::acknowledgement</a>    == pItem-&gt;<a class="code" href="class_o_t_item.html#abadbfe245f0dbc8a035d8d6930dd9dfc">GetStatus</a>()))
        {
            <a class="code" href="class_o_t_string.html">OTString</a>    strVoucher;
            pItem-&gt;<a class="code" href="class_o_t_item.html#aec0f00f6526a35766297615a43429ba5">GetAttachment</a>(strVoucher);

            <a class="code" href="class_o_t_cheque.html">OTCheque</a>    theVoucher;
            <span class="keywordflow">if</span> (theVoucher.<a class="code" href="class_o_t_contract.html#a36300e34dcd94ed7006d98b392d46815">LoadContractFromString</a>(strVoucher)) <span class="comment">// Todo additional verification here on the cheque.</span>
            {
                theVoucher.<a class="code" href="class_o_t_contract.html#a5fd00cded794a6f96ba80d8d4081d591">SaveContractRaw</a>(strOutput);
                <span class="keywordflow">break</span>;
            }
        }
    }

    <span class="comment">// -----------------------------------------------------</span>

    <span class="comment">// Didn&#39;t find one.</span>
    <span class="keywordflow">if</span> (!strOutput.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>())
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;

    <span class="comment">// We found a voucher -- let&#39;s return it!</span>
    <span class="comment">//</span>
    std::string pBuf = strOutput.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();

    <span class="keywordflow">return</span> pBuf;
}
</pre></div>
</div>
</div>
<a class="anchor" id="abd80f7e0caf22e569fcdf9173cafb8fa"></a><!-- doxytag: member="OTAPI_Exec::Transaction_IsCanceled" ref="abd80f7e0caf22e569fcdf9173cafb8fa" args="(const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ACCOUNT_ID, const std::string &amp;THE_TRANSACTION)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_o_t_data_check_8hpp.html#aa3817cab69424142fb73706ef4871d36">OT_BOOL</a> <a class="el" href="class_o_t_a_p_i___exec.html#abd80f7e0caf22e569fcdf9173cafb8fa">OTAPI_Exec::Transaction_IsCanceled</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ACCOUNT_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_TRANSACTION</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l10713">10713</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty())          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID.empty())            { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>            ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (ACCOUNT_ID.empty())         { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;ACCOUNT_ID&quot;</span>         ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (THE_TRANSACTION.empty())    { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_TRANSACTION&quot;</span>    ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theServerID(SERVER_ID), theUserID(USER_ID), theAccountID(ACCOUNT_ID);

    <a class="code" href="class_o_t_string.html">OTString</a> strTransaction(THE_TRANSACTION);
    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pNym = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#aa53f110b77dee2bc71b70906ca64fbbc">GetOrLoadPrivateNym</a>(theUserID, <span class="keyword">false</span>, __FUNCTION__); <span class="comment">// These copiously log, and ASSERT.</span>
    <span class="keywordflow">if</span> (NULL == pNym) <span class="keywordflow">return</span> <a class="code" href="_o_t_a_p_i_8cpp.html#a8a0b2a3e3d4461ba60ae320c17b09ab4">OT_ERROR</a>;
    <span class="comment">// By this point, pNym is a good pointer, and is on the wallet. (No need to cleanup.)</span>
    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_transaction.html">OTTransaction</a> theTransaction(theUserID, theAccountID, theServerID);

    <span class="keywordflow">if</span> (<span class="keyword">false</span> == theTransaction.LoadContractFromString(strTransaction))
    {
        <a class="code" href="class_o_t_string.html">OTString</a> strAcctID(theAccountID);
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error loading transaction from string. Acct ID: %s\n&quot;</span>, __FUNCTION__, strAcctID.Get());
        <span class="keywordflow">return</span> <a class="code" href="_o_t_a_p_i_8cpp.html#a8a0b2a3e3d4461ba60ae320c17b09ab4">OT_ERROR</a>;
    }
    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_transaction.html">OTTransaction</a> * pTransaction = NULL;
    <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTTransaction&gt;</a> theTransAngel;

    <span class="comment">// Note: This is an artifact from Transaction_GetSuccess, whose code was copied to make</span>
    <span class="comment">// this function. In reality, a cancelled transaction will never be abbreviated, since it</span>
    <span class="comment">// won&#39;t be used as any kind of box receipt in the first place. Rather, a canceled transaction</span>
    <span class="comment">// will only occur as a server reply to a transaction request. For example, if you cancel a</span>
    <span class="comment">// cheque, or cancel a payment plan, and that cancellation is successful, then the server</span>
    <span class="comment">// will return a &quot;reply transaction&quot; to that request, which has &#39;cancelled&#39; set to true.</span>
    <span class="comment">// So why am I leaving this code here for now? We can trim it down later I suppose.</span>
    <span class="comment">//</span>
    <span class="keywordflow">if</span> (theTransaction.IsAbbreviated()) <span class="comment">// Abbreviated.</span>
    {
        int64_t lBoxType = 0;

        <span class="comment">// --------------</span>
             <span class="keywordflow">if</span> (theTransaction.Contains(<span class="stringliteral">&quot;nymboxRecord&quot;</span>))           lBoxType = static_cast&lt;int64_t&gt;(<a class="code" href="class_o_t_ledger.html#ac03f2514d0c6ae00147c5d53bf19591aae7427339a1b7566f46fb6d60c66bbfae">OTLedger::nymbox</a>);
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (theTransaction.Contains(<span class="stringliteral">&quot;inboxRecord&quot;</span>))            lBoxType = static_cast&lt;int64_t&gt;(<a class="code" href="class_o_t_ledger.html#ac03f2514d0c6ae00147c5d53bf19591aa7bd594902e6c775ef4f356897fb36006">OTLedger::inbox</a>);
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (theTransaction.Contains(<span class="stringliteral">&quot;outboxRecord&quot;</span>))           lBoxType = static_cast&lt;int64_t&gt;(<a class="code" href="class_o_t_ledger.html#ac03f2514d0c6ae00147c5d53bf19591aaa0150c89048bba5eedf6a0919603d4e4">OTLedger::outbox</a>);
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (theTransaction.Contains(<span class="stringliteral">&quot;paymentInboxRecord&quot;</span>))     lBoxType = static_cast&lt;int64_t&gt;(<a class="code" href="class_o_t_ledger.html#ac03f2514d0c6ae00147c5d53bf19591aaf8b0cad55e051e014a4f9ebee8dd2984">OTLedger::paymentInbox</a>);
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (theTransaction.Contains(<span class="stringliteral">&quot;recordBoxRecord&quot;</span>))        lBoxType = static_cast&lt;int64_t&gt;(<a class="code" href="class_o_t_ledger.html#ac03f2514d0c6ae00147c5d53bf19591aae650dd1b5a89523bace1c54c06897922">OTLedger::recordBox</a>);
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (theTransaction.Contains(<span class="stringliteral">&quot;expiredBoxRecord&quot;</span>))       lBoxType = static_cast&lt;int64_t&gt;(<a class="code" href="class_o_t_ledger.html#ac03f2514d0c6ae00147c5d53bf19591aa500bad2900b83847f7cc16b8cc26817a">OTLedger::expiredBox</a>);
        <span class="keywordflow">else</span>
        {
            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error loading from abbreviated transaction: unknown ledger type. \n&quot;</span>, __FUNCTION__);
            <span class="keywordflow">return</span> <a class="code" href="_o_t_a_p_i_8cpp.html#a8a0b2a3e3d4461ba60ae320c17b09ab4">OT_ERROR</a>;
        }
        <span class="comment">// --------------</span>
        pTransaction = <a class="code" href="class_o_t_transaction.html#ae97bc794fe820f4f2e864c29c42df8eb">OTTransaction::LoadBoxReceipt</a>(theTransaction, static_cast&lt;int64_t&gt;(lBoxType));
        <span class="keywordflow">if</span> (NULL == pTransaction)
        {
            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error loading from abbreviated transaction: failed loading box receipt. \n&quot;</span>, __FUNCTION__);
            <span class="keywordflow">return</span> <a class="code" href="_o_t_a_p_i_8cpp.html#a8a0b2a3e3d4461ba60ae320c17b09ab4">OT_ERROR</a>;
        }
        <span class="comment">// ----------------</span>
        theTransAngel.<a class="code" href="class_o_t_cleanup.html#aac0b26193b0a59dbbf491a4e417af833">SetCleanupTargetPointer</a>(pTransaction);
    }
    <span class="keywordflow">else</span>  <span class="comment">// NOT abbreviated.</span>
        pTransaction = &amp;theTransaction;
    <span class="comment">// -----------------------------------------------------</span>
    <span class="keywordflow">if</span> (pTransaction-&gt;<a class="code" href="class_o_t_transaction.html#aeabba0a2b6a52c8f50a329f7d14a1ba1">IsCancelled</a>())
    {
        <span class="keywordflow">return</span> <a class="code" href="_o_t_a_p_i_8cpp.html#a39b50c1f70f7626e72c95494a44f8921">OT_TRUE</a>;
    }

    <span class="keywordflow">return</span> <a class="code" href="_o_t_a_p_i_8cpp.html#aa4db9fe11de208bcc9e4b869c932948b">OT_FALSE</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a9b1d0d0ffda7a21c9b6bb16a4a675d73"></a><!-- doxytag: member="OTAPI_Exec::triggerClause" ref="a9b1d0d0ffda7a21c9b6bb16a4a675d73" args="(const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const int64_t &amp;TRANSACTION_NUMBER, const std::string &amp;CLAUSE_NAME, const std::string &amp;STR_PARAM)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_a_p_i___exec.html#a9b1d0d0ffda7a21c9b6bb16a4a675d73">OTAPI_Exec::triggerClause</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int64_t &amp;&#160;</td>
          <td class="paramname"><em>TRANSACTION_NUMBER</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>CLAUSE_NAME</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>STR_PARAM</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>If a smart contract is already running on the server, this allows a party to trigger clauses on that smart contract, by name. This is NOT a transaction, but it DOES message the server.</p>
<p>Returns int32_t: -1 means error; no message was sent. -2 means the message was sent, but the request number must be passed as a string, so call GetLargeRequestNum. 0 means NO error, but also: no message was sent. &gt;0 means NO error, and the message was sent, and the request number fits into an integer... ...and in fact the requestNum IS the return value! ===&gt; In 99% of cases, this LAST option is what actually happens!! </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l07040">7040</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty())      { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID.empty())        { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>            ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (0 &gt; TRANSACTION_NUMBER) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;TRANSACTION_NUMBER&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (CLAUSE_NAME.empty())    { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;CLAUSE_NAME&quot;</span>        ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
<span class="comment">//  if (STR_PARAM.empty())      { OTLog::vError(&quot;%s: Null: %s passed in!\n&quot;, __FUNCTION__, &quot;STR_PARAM&quot;          ); OT_FAIL; }  // optional param</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>  theServerID(SERVER_ID),
                        theUserID(USER_ID);
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a>      strClauseName(CLAUSE_NAME);
    <span class="keyword">const</span> int64_t       lTransactionNum = TRANSACTION_NUMBER;
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strParam((STR_PARAM.empty()) ? <span class="stringliteral">&quot;&quot;</span> : STR_PARAM);
    <span class="keywordflow">return</span> <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a0bf5890924481ffbf89bc2a6fb529b04">triggerClause</a>(theServerID,
                                              theUserID,
                                              static_cast&lt;int64_t&gt;(lTransactionNum),
                                              strClauseName,
                                              STR_PARAM.empty() ? NULL : &amp;strParam);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a17d4c4b6225b79c5e23929f1ef1669bd"></a><!-- doxytag: member="OTAPI_Exec::UlongToString" ref="a17d4c4b6225b79c5e23929f1ef1669bd" args="(const uint64_t &amp;lNumber)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a17d4c4b6225b79c5e23929f1ef1669bd">OTAPI_Exec::UlongToString</a> </td>
          <td>(</td>
          <td class="paramtype">const uint64_t &amp;&#160;</td>
          <td class="paramname"><em>lNumber</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l00315">315</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    std::string strNumber;
    std::stringstream strstream;

    strstream &lt;&lt; lNumber;
    strstream &gt;&gt; strNumber;

    <span class="keywordflow">return</span> strNumber;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a4e5460e41424176727e7043b278d8350"></a><!-- doxytag: member="OTAPI_Exec::usageCredits" ref="a4e5460e41424176727e7043b278d8350" args="(const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;USER_ID_CHECK, const int64_t &amp;ADJUSTMENT)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_a_p_i___exec.html#a4e5460e41424176727e7043b278d8350">OTAPI_Exec::usageCredits</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID_CHECK</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int64_t &amp;&#160;</td>
          <td class="paramname"><em>ADJUSTMENT</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>USAGE CREDITS --- (Based on a UserID, retrieve or adjust the Usage Credits for that Nym.)</p>
<p>ServerID -- Must be included with every message. USER_ID -- You must include your own userID so the server can reply. USER_CHECK_ID -- This is a SECOND user's ID. (Whose usage credits we are checking) ADJUSTMENT -- This can be NULL (resolves as "0"). Otherwise, positive or negative, and passed as a string. This gives the option to adjust the usage credits balance, up or down.</p>
<p>In this message, you are requesting the server to send you the current balance of the usage credits for the second user_id. You may also adjust this balance up or down (+ or - any int64_t value in string format). If you do, the server reply will contain the updated usage credits, AFTER the adjustment.</p>
<p>You might ask: Doesn't this mean that ANY user can get/set the usage credits for any other?? --------------- ANSWER: Most OT server operators will set cmd_usage_credits=false in the ~/.ot/server.cfg file. (BECAUSE ONLY AN ADMINISTRATOR SHOULD BE ABLE TO ADJUST ANYONE'S USAGE CREDITS.) In this case, users will still be able to use this message to VIEW their own personal usage credits, but they will be unable to see others' balances, and they will be unable to do any adjustments to any balances, including their own.</p>
<p>If you wish to give full rights to this function to a specific admin Nym, use the override_nym_id found in ~/.ot/server.cfg --------------------------- After you call <a class="el" href="class_o_t_a_p_i___exec.html#a4e5460e41424176727e7043b278d8350">usageCredits()</a>, you will receive a server reply. Pass that into the next function: <a class="el" href="class_o_t_a_p_i___exec.html#a9ba3dd59c6ae3c669730014842bfb90e">Message_GetUsageCredits()</a> </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l12259">12259</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty())     { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>    ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID.empty())       { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>      ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID_CHECK.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID_CHECK&quot;</span>); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

<span class="comment">//  OT_ASSERT_MSG(&quot;&quot; != ADJUSTMENT, &quot;OTAPI_Exec::usageCredits: Null ADJUSTMENT passed in.&quot;); // &quot;&quot; is allowed here.</span>

    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theServerID(SERVER_ID), theUserID(USER_ID), theOtherUserID(USER_ID_CHECK);

    <span class="keyword">const</span> int64_t lAdjustment = ADJUSTMENT; <span class="comment">// &quot;&quot; resolves as 0.</span>

    <span class="keywordflow">return</span> <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#aae87777314e8bcd258a117082559b024">usageCredits</a>(theServerID, theUserID, theOtherUserID, static_cast&lt;int64_t&gt;(lAdjustment));
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad1a0d1ccc8870c2478f9aa9659dc51e1"></a><!-- doxytag: member="OTAPI_Exec::Variable_GetAccess" ref="ad1a0d1ccc8870c2478f9aa9659dc51e1" args="(const std::string &amp;THE_CONTRACT, const std::string &amp;BYLAW_NAME, const std::string &amp;VARIABLE_NAME)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#ad1a0d1ccc8870c2478f9aa9659dc51e1">OTAPI_Exec::Variable_GetAccess</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_CONTRACT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>BYLAW_NAME</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>VARIABLE_NAME</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l06241">6241</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (THE_CONTRACT.empty())  { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_CONTRACT&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (BYLAW_NAME.empty())    { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;BYLAW_NAME&quot;</span>   ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (VARIABLE_NAME.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;VARIABLE_NAME&quot;</span>); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// -----------------------------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strContract(THE_CONTRACT);
    <a class="code" href="class_o_t_scriptable.html">OTScriptable</a> * pScriptable = <a class="code" href="class_o_t_scriptable.html#a4a89cbc1abd2bac0e5dec64da3452b7a">OTScriptable::InstantiateScriptable</a>(strContract);
    <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTScriptable&gt;</a> theContractAngel;
    <span class="keywordflow">if</span> (NULL == pScriptable)
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Failed trying to load smart contract from string:\n\n%s\n\n&quot;</span>,
                       __FUNCTION__, strContract.Get());
    }
    <span class="keywordflow">else</span>
    {
        theContractAngel.<a class="code" href="class_o_t_cleanup.html#a00a399db45f730439d2263d4429d00c1">SetCleanupTarget</a>(*pScriptable);  <span class="comment">// Auto-cleanup.</span>
        <span class="comment">// -----------------------------------------------------</span>
        <a class="code" href="class_o_t_bylaw.html">OTBylaw</a> * pBylaw = pScriptable-&gt;<a class="code" href="class_o_t_scriptable.html#a970014fa028541c7a3c908800bfa4ee9">GetBylaw</a>(BYLAW_NAME);
        <span class="comment">// -----------------------------------------------------</span>
        <span class="keywordflow">if</span> (NULL == pBylaw)
        {
            <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Smart contract loaded up, but failed to retrieve the bylaw with name: %s\n&quot;</span>,
                           __FUNCTION__, BYLAW_NAME.c_str());
        }
        <span class="keywordflow">else</span> <span class="comment">// We found the bylaw...</span>
        {
            <a class="code" href="class_o_t_variable.html">OTVariable</a> * pVar = pBylaw-&gt;<a class="code" href="class_o_t_bylaw.html#aae26ff96d920fcc17ef69e9f0c762710">GetVariable</a>(VARIABLE_NAME);

            <span class="keywordflow">if</span> (NULL == pVar)
            {
                <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Smart contract loaded up, and bylaw found, but failed to retrieve the variable with name: %s\n&quot;</span>,
                               __FUNCTION__, VARIABLE_NAME.c_str());
            }
            <span class="keywordflow">else</span> <span class="comment">// We found the variable...</span>
            {
                <span class="keyword">const</span> std::string str_return(  pVar-&gt;<a class="code" href="class_o_t_variable.html#a74916be2f82d09b711e9667c48ef3a4b">IsConstant</a>()   ? <span class="stringliteral">&quot;constant&quot;</span>    :
                                             ( pVar-&gt;<a class="code" href="class_o_t_variable.html#a36881b81635a0622eac46309a33874ea">IsImportant</a>()  ? <span class="stringliteral">&quot;important&quot;</span>   :
                                              (pVar-&gt;<a class="code" href="class_o_t_variable.html#abe7b418016381937ac175c58bf5e6792">IsPersistent</a>() ? <span class="stringliteral">&quot;persistent&quot;</span>  : <span class="stringliteral">&quot;error_access&quot;</span> )) ); <span class="comment">// Success.</span>
                <span class="keywordflow">return</span> str_return;
            }
        }
    }
    <span class="comment">// -----------------------------------------------------------</span>
    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a041f07e1744c9d1b6008748e5f3c904a"></a><!-- doxytag: member="OTAPI_Exec::Variable_GetContents" ref="a041f07e1744c9d1b6008748e5f3c904a" args="(const std::string &amp;THE_CONTRACT, const std::string &amp;BYLAW_NAME, const std::string &amp;VARIABLE_NAME)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a041f07e1744c9d1b6008748e5f3c904a">OTAPI_Exec::Variable_GetContents</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_CONTRACT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>BYLAW_NAME</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>VARIABLE_NAME</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l06291">6291</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (THE_CONTRACT.empty())  { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_CONTRACT&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (BYLAW_NAME.empty())    { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;BYLAW_NAME&quot;</span>   ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (VARIABLE_NAME.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;VARIABLE_NAME&quot;</span>); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// -----------------------------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strContract(THE_CONTRACT);
    <a class="code" href="class_o_t_scriptable.html">OTScriptable</a> * pScriptable = <a class="code" href="class_o_t_scriptable.html#a4a89cbc1abd2bac0e5dec64da3452b7a">OTScriptable::InstantiateScriptable</a>(strContract);
    <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTScriptable&gt;</a> theContractAngel;
    <span class="keywordflow">if</span> (NULL == pScriptable)
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Failed trying to load smart contract from string:\n\n%s\n\n&quot;</span>,
                       __FUNCTION__, strContract.Get());
    }
    <span class="keywordflow">else</span>
    {
        theContractAngel.<a class="code" href="class_o_t_cleanup.html#a00a399db45f730439d2263d4429d00c1">SetCleanupTarget</a>(*pScriptable);  <span class="comment">// Auto-cleanup.</span>
        <span class="comment">// -----------------------------------------------------</span>
        <a class="code" href="class_o_t_bylaw.html">OTBylaw</a> * pBylaw = pScriptable-&gt;<a class="code" href="class_o_t_scriptable.html#a970014fa028541c7a3c908800bfa4ee9">GetBylaw</a>(BYLAW_NAME);
        <span class="comment">// -----------------------------------------------------</span>
        <span class="keywordflow">if</span> (NULL == pBylaw)
        {
            <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Smart contract loaded up, but failed to retrieve the bylaw with name: %s\n&quot;</span>,
                           __FUNCTION__, BYLAW_NAME.c_str());
        }
        <span class="keywordflow">else</span> <span class="comment">// We found the bylaw...</span>
        {
            <a class="code" href="class_o_t_variable.html">OTVariable</a> * pVar = pBylaw-&gt;<a class="code" href="class_o_t_bylaw.html#aae26ff96d920fcc17ef69e9f0c762710">GetVariable</a>(VARIABLE_NAME);

            <span class="keywordflow">if</span> (NULL == pVar)
            {
                <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Smart contract loaded up, and bylaw found, but failed to retrieve the variable with name: %s\n&quot;</span>,
                               __FUNCTION__, VARIABLE_NAME.c_str());
            }
            <span class="keywordflow">else</span> <span class="comment">// We found the variable...</span>
            {
                std::string  str_return;

                <span class="keywordflow">switch</span> (pVar-&gt;<a class="code" href="class_o_t_variable.html#abcb55fa45012907c7b446d7ab5969168">GetType</a>())
                {
                    <span class="keywordflow">case</span> <a class="code" href="class_o_t_variable.html#a368e6a27177cbd9016c4dc40a6c67009a814483713bd6ebb3b01c06378fc60fa7">OTVariable::Var_String</a>  : str_return = pVar-&gt;<a class="code" href="class_o_t_variable.html#a74efdd2f7064b6b9429f13884d297043">GetValueString</a>(); <span class="keywordflow">break</span>;
                    <span class="keywordflow">case</span> <a class="code" href="class_o_t_variable.html#a368e6a27177cbd9016c4dc40a6c67009ad6ecaa07337c8641bed85deab47c1a1d">OTVariable::Var_Integer</a> : str_return = <a class="code" href="class_o_t_a_p_i___exec.html#ab27795fbc9d11a3ada075eaa64b95831">OTAPI_Exec::LongToString</a>(static_cast&lt;int64_t&gt;(pVar-&gt;<a class="code" href="class_o_t_variable.html#a2476ccc8b149df1f393a089e5c98c03c">GetValueInteger</a>())); <span class="keywordflow">break</span>;
                    <span class="keywordflow">case</span> <a class="code" href="class_o_t_variable.html#a368e6a27177cbd9016c4dc40a6c67009a4f6c0ea25b7a5aed16bc7710389e77da">OTVariable::Var_Bool</a>    : str_return = pVar-&gt;<a class="code" href="class_o_t_variable.html#aaab7544d5c8fe9ae82dc5f379a19022a">GetValueBool</a>() ? <span class="stringliteral">&quot;true&quot;</span> : <span class="stringliteral">&quot;false&quot;</span>; <span class="keywordflow">break</span>;
                    <span class="keywordflow">default</span>                      : <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error: Unknown variable type.\n&quot;</span>, __FUNCTION__); <span class="keywordflow">break</span>;
                }
                <span class="keywordflow">return</span> str_return;
            }
        }
    }
    <span class="comment">// -----------------------------------------------------------</span>
    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa7005d90b193d8bf451375145dcdd1c6"></a><!-- doxytag: member="OTAPI_Exec::Variable_GetNameByIndex" ref="aa7005d90b193d8bf451375145dcdd1c6" args="(const std::string &amp;THE_CONTRACT, const std::string &amp;BYLAW_NAME, const int32_t &amp;nIndex)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#aa7005d90b193d8bf451375145dcdd1c6">OTAPI_Exec::Variable_GetNameByIndex</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_CONTRACT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>BYLAW_NAME</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int32_t &amp;&#160;</td>
          <td class="paramname"><em>nIndex</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l06143">6143</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (THE_CONTRACT.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_CONTRACT&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (BYLAW_NAME.empty())   { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;BYLAW_NAME&quot;</span>   ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// -----------------------------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strContract(THE_CONTRACT);
    <a class="code" href="class_o_t_scriptable.html">OTScriptable</a> * pScriptable = <a class="code" href="class_o_t_scriptable.html#a4a89cbc1abd2bac0e5dec64da3452b7a">OTScriptable::InstantiateScriptable</a>(strContract);
    <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTScriptable&gt;</a> theContractAngel;
    <span class="keywordflow">if</span> (NULL == pScriptable)
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Failed trying to load smart contract from string:\n\n%s\n\n&quot;</span>,
                       __FUNCTION__, strContract.Get());
    }
    <span class="keywordflow">else</span>
    {
        theContractAngel.<a class="code" href="class_o_t_cleanup.html#a00a399db45f730439d2263d4429d00c1">SetCleanupTarget</a>(*pScriptable);  <span class="comment">// Auto-cleanup.</span>
        <span class="comment">// -----------------------------------------------------</span>
        <a class="code" href="class_o_t_bylaw.html">OTBylaw</a> * pBylaw = pScriptable-&gt;<a class="code" href="class_o_t_scriptable.html#a970014fa028541c7a3c908800bfa4ee9">GetBylaw</a>(BYLAW_NAME);
        <span class="comment">// -----------------------------------------------------</span>
        <span class="keywordflow">if</span> (NULL == pBylaw)
        {
            <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Smart contract loaded up, but failed to retrieve the bylaw with name: %s\n&quot;</span>,
                           __FUNCTION__, BYLAW_NAME.c_str());
        }
        <span class="keywordflow">else</span> <span class="comment">// We found the bylaw...</span>
        {
            <span class="keyword">const</span> int32_t nTempIndex = <span class="keyword">static_cast&lt;</span><span class="keyword">const </span>int32_t<span class="keyword">&gt;</span>(nIndex);

            <a class="code" href="class_o_t_variable.html">OTVariable</a> * pVar = pBylaw-&gt;<a class="code" href="class_o_t_bylaw.html#ac849f0ab0c7c14436748761ccd507c11">GetVariableByIndex</a>(nTempIndex);

            <span class="keywordflow">if</span> (NULL == pVar)
            {
                <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Smart contract loaded up, and bylaw found, but failed to retrieve the variable at index: %d\n&quot;</span>,
                               __FUNCTION__, nTempIndex);
            }
            <span class="keywordflow">else</span> <span class="comment">// We found the variable...</span>
            {
                <span class="keyword">const</span> std::string str_name(pVar-&gt;<a class="code" href="class_o_t_variable.html#ab860143fe625f877ee5d2bbe385e5654">GetName</a>().<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());  <span class="comment">// Success.</span>
                <span class="keywordflow">return</span> str_name;
            }
        }
    }
    <span class="comment">// -----------------------------------------------------------</span>
    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac0e35836e8d0f79d604365a390661cc6"></a><!-- doxytag: member="OTAPI_Exec::Variable_GetType" ref="ac0e35836e8d0f79d604365a390661cc6" args="(const std::string &amp;THE_CONTRACT, const std::string &amp;BYLAW_NAME, const std::string &amp;VARIABLE_NAME)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#ac0e35836e8d0f79d604365a390661cc6">OTAPI_Exec::Variable_GetType</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_CONTRACT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>BYLAW_NAME</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>VARIABLE_NAME</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l06192">6192</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (THE_CONTRACT.empty())  { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_CONTRACT&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (BYLAW_NAME.empty())    { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;BYLAW_NAME&quot;</span>   ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (VARIABLE_NAME.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;VARIABLE_NAME&quot;</span>); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// -----------------------------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strContract(THE_CONTRACT);
    <a class="code" href="class_o_t_scriptable.html">OTScriptable</a> * pScriptable = <a class="code" href="class_o_t_scriptable.html#a4a89cbc1abd2bac0e5dec64da3452b7a">OTScriptable::InstantiateScriptable</a>(strContract);
    <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTScriptable&gt;</a> theContractAngel;
    <span class="keywordflow">if</span> (NULL == pScriptable)
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Failed trying to load smart contract from string:\n\n%s\n\n&quot;</span>,
                       __FUNCTION__, strContract.Get());
    }
    <span class="keywordflow">else</span>
    {
        theContractAngel.<a class="code" href="class_o_t_cleanup.html#a00a399db45f730439d2263d4429d00c1">SetCleanupTarget</a>(*pScriptable);  <span class="comment">// Auto-cleanup.</span>
        <span class="comment">// -----------------------------------------------------</span>
        <a class="code" href="class_o_t_bylaw.html">OTBylaw</a> * pBylaw = pScriptable-&gt;<a class="code" href="class_o_t_scriptable.html#a970014fa028541c7a3c908800bfa4ee9">GetBylaw</a>(BYLAW_NAME);
        <span class="comment">// -----------------------------------------------------</span>
        <span class="keywordflow">if</span> (NULL == pBylaw)
        {
            <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Smart contract loaded up, but failed to retrieve the bylaw with name: %s\n&quot;</span>,
                           __FUNCTION__, BYLAW_NAME.c_str());
        }
        <span class="keywordflow">else</span> <span class="comment">// We found the bylaw...</span>
        {
            <a class="code" href="class_o_t_variable.html">OTVariable</a> * pVar = pBylaw-&gt;<a class="code" href="class_o_t_bylaw.html#aae26ff96d920fcc17ef69e9f0c762710">GetVariable</a>(VARIABLE_NAME);

            <span class="keywordflow">if</span> (NULL == pVar)
            {
                <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Smart contract loaded up, and bylaw found, but failed to retrieve the variable with name: %s\n&quot;</span>,
                               __FUNCTION__, VARIABLE_NAME.c_str());
            }
            <span class="keywordflow">else</span> <span class="comment">// We found the variable...</span>
            {
                <span class="keyword">const</span> std::string str_return(  pVar-&gt;<a class="code" href="class_o_t_variable.html#a4f1c8eecf62a4d493e71eaf68b92f18c">IsInteger</a>() ? <span class="stringliteral">&quot;integer&quot;</span> :
                                             ( pVar-&gt;<a class="code" href="class_o_t_variable.html#a3bd1483f88633f323bd48c491e3060d4">IsBool</a>()    ? <span class="stringliteral">&quot;boolean&quot;</span> :
                                              (pVar-&gt;<a class="code" href="class_o_t_variable.html#abb756ec5d1fc799387e4aa7189989624">IsString</a>()  ? <span class="stringliteral">&quot;string&quot;</span>  : <span class="stringliteral">&quot;error_type&quot;</span> )) ); <span class="comment">// Success.</span>
                <span class="keywordflow">return</span> str_return;
            }
        }
    }
    <span class="comment">// -----------------------------------------------------------</span>
    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae39f85e4d8ad13120b1f9b90e50b6b21"></a><!-- doxytag: member="OTAPI_Exec::VerifyAccountReceipt" ref="ae39f85e4d8ad13120b1f9b90e50b6b21" args="(const std::string &amp;SERVER_ID, const std::string &amp;NYM_ID, const std::string &amp;ACCT_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_a_p_i___exec.html#ae39f85e4d8ad13120b1f9b90e50b6b21">OTAPI_Exec::VerifyAccountReceipt</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>NYM_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ACCT_ID</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns OT_BOOL. Verifies any asset account (intermediary files) against its own last signed receipt. Obviously this will fail for any new account that hasn't done any transactions yet, and thus has no receipts. </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l04557">4557</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty())          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (NYM_ID.empty())             { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;NYM_ID&quot;</span>             ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (ACCT_ID.empty())            { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;ACCT_ID&quot;</span>            ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theServerID(SERVER_ID), theNymID(NYM_ID), theAcctID(ACCT_ID);
    <span class="comment">// -----------------------------------------------------</span>
    <span class="keyword">const</span> <span class="keywordtype">bool</span> &amp; bVerified = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a6db6ca5618edfb53c7a8a7bc38e4bd0e">VerifyAccountReceipt</a>(theServerID, theNymID, theAcctID);
    <span class="comment">// -----------------------------------------------------</span>
    <span class="keywordflow">return</span> bVerified ? <span class="keyword">true</span> : <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a0233aa61ac24910bdc4671054734ede2"></a><!-- doxytag: member="OTAPI_Exec::VerifyAndRetrieveXMLContents" ref="a0233aa61ac24910bdc4671054734ede2" args="(const std::string &amp;THE_CONTRACT, const std::string &amp;SIGNER_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a0233aa61ac24910bdc4671054734ede2">OTAPI_Exec::VerifyAndRetrieveXMLContents</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_CONTRACT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SIGNER_ID</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Verify and Retrieve XML Contents.</p>
<p>Pass in a contract and a user ID, and this function will: -- Load the contract up and verify it. (Most classes in OT are derived in some way from <a class="el" href="class_o_t_contract.html">OTContract</a>.) -- Verify the user's signature on it. -- Remove the PGP-style bookends (the signatures, etc) and return the XML contents of the contract in string form. &lt;== </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l04524">4524</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (THE_CONTRACT.empty())       { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_CONTRACT&quot;</span>       ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (SIGNER_ID.empty())          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SIGNER_ID&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="comment">// -----------------------------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a>      strContract(THE_CONTRACT);
    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>  theSignerID(SIGNER_ID);
    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_string.html">OTString</a> strOutput;

    <span class="keywordflow">if</span> (<span class="keyword">false</span> == <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t_a_p_i___exec.html#a0233aa61ac24910bdc4671054734ede2">VerifyAndRetrieveXMLContents</a>(strContract, theSignerID, strOutput))
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Failure: OTAPI()-&gt;VerifyAndRetrieveXMLContents() returned false.\n&quot;</span>,__FUNCTION__);
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    }
    <span class="comment">// -----------------------------------------------------</span>
    std::string pBuf = strOutput.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();



    <span class="keywordflow">return</span> pBuf;
}
</pre></div>
</div>
</div>
<a class="anchor" id="afadde01e1b2244f7d85f4420c3f4dfdc"></a><!-- doxytag: member="OTAPI_Exec::VerifySignature" ref="afadde01e1b2244f7d85f4420c3f4dfdc" args="(const std::string &amp;SIGNER_NYM_ID, const std::string &amp;THE_CONTRACT)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_a_p_i___exec.html#afadde01e1b2244f7d85f4420c3f4dfdc">OTAPI_Exec::VerifySignature</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SIGNER_NYM_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_CONTRACT</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>OT-Verify the signature on a CONTRACT.</p>
<p>Returns OT_BOOL -- OT_TRUE (1) or OT_FALSE (0)</p>
<p>OT-Verify the signature on a CONTRACT stored in a string.</p>
<p>Returns bool -- true (1) or false (0) </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l04498">4498</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SIGNER_NYM_ID.empty())      { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SIGNER_NYM_ID&quot;</span>      ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (THE_CONTRACT.empty())       { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_CONTRACT&quot;</span>       ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// -----------------------------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a>      strContract(THE_CONTRACT);
    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>  theNymID(SIGNER_NYM_ID);
    <span class="comment">// -----------------------------------------------------</span>
    <span class="keyword">const</span> <span class="keywordtype">bool</span> &amp; bVerified = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a1ffc5ff556721c5ab9fee696ea922ec1">VerifySignature</a>(strContract, theNymID); <span class="comment">/*ppContract=&quot;&quot; (optional third parameter for retrieving loaded contract.)*/</span>
    <span class="comment">// -----------------------------------------------------</span>
    <span class="keywordflow">return</span> bVerified ? <span class="keyword">true</span> : <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="afa8f5a1b2e21636b59f90a3b60f7aa80"></a><!-- doxytag: member="OTAPI_Exec::VerifyUserPrivateKey" ref="afa8f5a1b2e21636b59f90a3b60f7aa80" args="(const std::string &amp;USER_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_a_p_i___exec.html#afa8f5a1b2e21636b59f90a3b60f7aa80">OTAPI_Exec::VerifyUserPrivateKey</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>------------------------------------------------------------------------</p>
<p>Verify that USER_ID (including its Private Key) is an available and verified user in local storage.</p>
<p>Loads the user's private key, verifies, then returns OT_TRUE or OT_FALSE. </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l07422">7422</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (USER_ID.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// -----------------------------------------------------------------</span>
    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>    NYM_ID(USER_ID);
    <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a>   * pNym = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#aa53f110b77dee2bc71b70906ca64fbbc">GetOrLoadPrivateNym</a>(NYM_ID); <span class="comment">// No need to cleanup.</span>
    <span class="keywordflow">if</span> (NULL == pNym) <span class="keywordflow">return</span> <span class="keyword">false</span>;
    <span class="comment">// -----------------------------------------------------------------</span>
    <span class="keywordflow">return</span> <span class="keyword">true</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a591518898ab86707f0c4a241a3873f93"></a><!-- doxytag: member="OTAPI_Exec::Wallet_CanRemoveAccount" ref="a591518898ab86707f0c4a241a3873f93" args="(const std::string &amp;ACCOUNT_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_a_p_i___exec.html#a591518898ab86707f0c4a241a3873f93">OTAPI_Exec::Wallet_CanRemoveAccount</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ACCOUNT_ID</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Can I remove this Account from my wallet?</p>
<p>You cannot remove the Account from your wallet if there are transactions still open. This function tells you whether you can remove the Account or not. (Whether there are transactions...) returns OT_BOOL </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l01788">1788</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// -----------------------------------------------------</span>
    <span class="keywordtype">bool</span> bIsInitialized = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#af11b60d083c4a8e1e68a59a0824899d4">IsInitialized</a>();
    <span class="keywordflow">if</span> (!bIsInitialized) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Not initialized; call OT_API::Init first.\n&quot;</span>,__FUNCTION__); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keywordflow">if</span> (ACCOUNT_ID.empty())         { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;ACCOUNT_ID&quot;</span>         ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// -----------------------------------------------------</span>

    <span class="comment">// -----------------------------------------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theAccountID(ACCOUNT_ID);

    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_account.html">OTAccount</a> * pAccount = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a263e050929c3f000ce4172dfbc727149">GetAccount</a>(theAccountID, __FUNCTION__);
    <span class="keywordflow">if</span> (NULL == pAccount) <span class="keywordflow">return</span> <span class="keyword">false</span>;
    <span class="comment">// -----------------------------------------------------</span>
    <span class="comment">// Balance must be zero in order to close an account!</span>
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pAccount-&gt;<a class="code" href="class_o_t_account.html#a77fbaae9496caec7cd899721971a89c0">GetBalance</a>() != 0)
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Account balance MUST be zero in order to close an asset account: %s.\n&quot;</span>, __FUNCTION__, ACCOUNT_ID.c_str());
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// -----------------------------------------------------------------</span>
    <span class="keywordtype">bool</span> BOOL_RETURN_VALUE = <span class="keyword">false</span>;

    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> &amp; theServerID    = pAccount-&gt;<a class="code" href="class_o_t_transaction_type.html#a59fc08d52ef5bc0ea546da7a56e86fa5">GetPurportedServerID</a>();
    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> &amp; theUserID      = pAccount-&gt;<a class="code" href="class_o_t_transaction_type.html#a845d76c16f6f5f3f4bc9ac04393ca3c0">GetUserID</a>();

    <span class="comment">// There is an OT_ASSERT in here for memory failure,</span>
    <span class="comment">// but it still might return &quot;&quot; if various verification fails.</span>
    <a class="code" href="class_o_t_ledger.html">OTLedger</a> * pInbox   = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a478f3f32e383e05a203807810bc94940">LoadInbox</a>(theServerID, theUserID, theAccountID);
    <a class="code" href="class_o_t_ledger.html">OTLedger</a> * pOutbox  = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#aeaf758c15cb39763d3ac80e7582e5409">LoadOutbox</a>(theServerID, theUserID, theAccountID);

    <span class="comment">// Make sure it gets cleaned up pInbox this goes out of scope.</span>
    <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTLedger&gt;</a> theInboxAngel(pInbox); <span class="comment">// I pass the pointer, in case it&#39;s &quot;&quot;.</span>
    <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTLedger&gt;</a> theOutboxAngel(pOutbox); <span class="comment">// I pass the pointer, in case it&#39;s &quot;&quot;.</span>

    <span class="keywordflow">if</span> (NULL == pInbox){
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Failure calling OT_API::LoadInbox.\n Account ID: %s\n&quot;</span>, __FUNCTION__, ACCOUNT_ID.c_str());
    }
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (NULL == pOutbox) {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Failure calling OT_API::LoadOutbox.\n Account ID: %s\n&quot;</span>,__FUNCTION__ , ACCOUNT_ID.c_str());
    }
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( (pInbox-&gt;<a class="code" href="class_o_t_ledger.html#a963473034789aca7bab8ddb4b089a3ff">GetTransactionCount</a>() &gt; 0) || (pOutbox-&gt;<a class="code" href="class_o_t_ledger.html#a963473034789aca7bab8ddb4b089a3ff">GetTransactionCount</a>() &gt; 0) ) {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Failure: You cannot remove an asset account if there are inbox/outbox items still waiting to be processed.\n&quot;</span>, __FUNCTION__);
    }
    <span class="keywordflow">else</span> BOOL_RETURN_VALUE = <span class="keyword">true</span>; <span class="comment">// SUCCESS!</span>

    <span class="keywordflow">return</span> BOOL_RETURN_VALUE;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae0264d14564877e5645790a46e455870"></a><!-- doxytag: member="OTAPI_Exec::Wallet_CanRemoveAssetType" ref="ae0264d14564877e5645790a46e455870" args="(const std::string &amp;ASSET_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_a_p_i___exec.html#ae0264d14564877e5645790a46e455870">OTAPI_Exec::Wallet_CanRemoveAssetType</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ASSET_ID</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Can I remove this asset contract from my wallet?</p>
<p>You cannot remove the asset contract from your wallet if there are accounts in there using it. This function tells you whether you can remove the asset contract or not. (Whether there are accounts...) returns OT_BOOL </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l01569">1569</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// -----------------------------------------------------</span>
    <span class="keywordtype">bool</span> bIsInitialized = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#af11b60d083c4a8e1e68a59a0824899d4">IsInitialized</a>();
    <span class="keywordflow">if</span> (!bIsInitialized) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Not initialized; call OT_API::Init first.\n&quot;</span>,__FUNCTION__); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keywordflow">if</span> (ASSET_ID.empty())           { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;ASSET_ID&quot;</span>           ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// -----------------------------------------------------</span>

    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theID(ASSET_ID);
    <span class="comment">// ------------------------------------------</span>
    <span class="keyword">const</span> int32_t &amp; nCount = <a class="code" href="class_o_t_a_p_i___exec.html#a3b5978e2f813cf10ebe34fa7d85b80be">OTAPI_Exec::GetAccountCount</a>();

    <span class="comment">// Loop through all the accounts.</span>
    <span class="keywordflow">for</span> (int32_t i = 0; i &lt; nCount; i++)
    {
        std::string pAcctID = <a class="code" href="class_o_t_a_p_i___exec.html#a07d988d698bb0f914031141297445e72">OTAPI_Exec::GetAccountWallet_ID</a>(i);
        <a class="code" href="class_o_t_string.html">OTString</a> strAcctID(pAcctID);

        std::string pID = <a class="code" href="class_o_t_a_p_i___exec.html#af812b71a9eb104706179bd10e06d5170">OTAPI_Exec::GetAccountWallet_AssetTypeID</a>(strAcctID.Get());
        <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theCompareID(pID);

        <span class="keywordflow">if</span> (theID == theCompareID)
        {
            <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Unable to remove asset contract %s from wallet: Account %s uses it.\n&quot;</span>, __FUNCTION__,
                ASSET_ID.c_str(), strAcctID.Get());
            <span class="keywordflow">return</span> <span class="keyword">false</span>;
        }
    }
    <span class="keywordflow">return</span> <span class="keyword">true</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a021b69143268a7aabd977638cd26cfed"></a><!-- doxytag: member="OTAPI_Exec::Wallet_CanRemoveNym" ref="a021b69143268a7aabd977638cd26cfed" args="(const std::string &amp;NYM_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_a_p_i___exec.html#a021b69143268a7aabd977638cd26cfed">OTAPI_Exec::Wallet_CanRemoveNym</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>NYM_ID</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Can I remove this Nym from my wallet?</p>
<p>You cannot remove the Nym from your wallet if there are accounts in there using it. This function tells you whether you can remove the Nym or not. (Whether there are accounts...) returns OT_BOOL </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l01653">1653</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// -----------------------------------------------------</span>
    <span class="keywordtype">bool</span> bIsInitialized = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#af11b60d083c4a8e1e68a59a0824899d4">IsInitialized</a>();
    <span class="keywordflow">if</span> (!bIsInitialized) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Not initialized; call OT_API::Init first.\n&quot;</span>,__FUNCTION__); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keywordflow">if</span> (NYM_ID.empty())             { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;NYM_ID&quot;</span>             ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// -----------------------------------------------------</span>

    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theID(NYM_ID);
    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pNym = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a08144e29a333dd0e1087c4655e6981ee">GetNym</a>(theID, __FUNCTION__);
    <span class="keywordflow">if</span> (NULL == pNym) <span class="keywordflow">return</span> <span class="keyword">false</span>;
    <span class="comment">// ------------------------------------------</span>
    <span class="comment">// Make sure the Nym doesn&#39;t have any accounts in the wallet.</span>
    <span class="comment">// (Client must close those before calling this.)</span>
    <span class="comment">//</span>
    <span class="keyword">const</span> int32_t &amp; nCount = <a class="code" href="class_o_t_a_p_i___exec.html#a3b5978e2f813cf10ebe34fa7d85b80be">OTAPI_Exec::GetAccountCount</a>();

    <span class="comment">// Loop through all the accounts.</span>
    <span class="keywordflow">for</span> (int32_t i = 0; i &lt; nCount; i++)
    {
        std::string pAcctID = <a class="code" href="class_o_t_a_p_i___exec.html#a07d988d698bb0f914031141297445e72">OTAPI_Exec::GetAccountWallet_ID</a>(i);
        <a class="code" href="class_o_t_string.html">OTString</a> strAcctID(pAcctID);

        std::string pID = <a class="code" href="class_o_t_a_p_i___exec.html#a5c11f6d8c1dd9024788124685c8bb8d8">OTAPI_Exec::GetAccountWallet_NymID</a>(strAcctID.Get());

        <span class="keywordflow">if</span> (pID.empty())
        {
            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Bug in OTAPI_Exec::Wallet_CanRemoveNym / OTAPI_Exec::GetAccountWallet_NymID\n&quot;</span>, __FUNCTION__);
            <span class="keywordflow">return</span> <span class="keyword">false</span>;
        }

        <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theCompareID(pID);

        <span class="comment">// Looks like the Nym still has some accounts in this wallet.</span>
        <span class="keywordflow">if</span> (theID == theCompareID)
        {
            <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Nym cannot be removed because there are still accounts in the wallet for that Nym.\n&quot;</span>, __FUNCTION__);
            <span class="keywordflow">return</span> <span class="keyword">false</span>;
        }
    }

    <span class="comment">// ------------------------------------------</span>
    <span class="comment">// Make sure the Nym isn&#39;t registered at any servers...</span>
    <span class="comment">// (Client must unregister at those servers before calling this function..)</span>
    <span class="comment">//</span>
    <span class="keyword">const</span> int32_t &amp; nServerCount = <a class="code" href="class_o_t_a_p_i___exec.html#ae78b8db3ee94ba98fc4a320f2365a64c">OTAPI_Exec::GetServerCount</a>();

    <span class="keywordflow">for</span> (int32_t i = 0; i &lt; nServerCount; i++)
    {
        std::string str_ServerID = <a class="code" href="class_o_t_a_p_i___exec.html#a75a82ad6c9be31757dc6211f7987e815">OTAPI_Exec::GetServer_ID</a>(i);

        <span class="keywordflow">if</span> (<span class="stringliteral">&quot;&quot;</span> != str_ServerID)
        {
            <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strServerID(str_ServerID);

            <span class="keywordflow">if</span> (pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#af5e9078ab475e6cd9c53e4ad2fae0417">IsRegisteredAtServer</a>(strServerID))
            {
                <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Nym cannot be removed because there are still servers in the wallet that the Nym is registered at.\n&quot;</span>, __FUNCTION__);
                <span class="keywordflow">return</span> <span class="keyword">false</span>;
            }
        }
    }

    <span class="comment">// ------------------------------------------</span>

    <span class="comment">// TODO:  Make sure Nym doesn&#39;t have any cash in any purses...</span>

    <span class="keywordflow">return</span> <span class="keyword">true</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad5b66d7e6143d6e75ce5a4d32a87e8ea"></a><!-- doxytag: member="OTAPI_Exec::Wallet_CanRemoveServer" ref="ad5b66d7e6143d6e75ce5a4d32a87e8ea" args="(const std::string &amp;SERVER_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_a_p_i___exec.html#ad5b66d7e6143d6e75ce5a4d32a87e8ea">OTAPI_Exec::Wallet_CanRemoveServer</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>---------------------------------------------------------</p>
<p>FUNCTIONS FOR REMOVING VARIOUS CONTRACTS AND NYMS FROM THE WALLET ***</p>
<p>Can I remove this server contract from my wallet?</p>
<p>You cannot remove the server contract from your wallet if there are accounts in there using it. This function tells you whether you can remove the server contract or not. (Whether there are accounts...) returns OT_BOOL </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l01467">1467</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// -----------------------------------------------------</span>
    <span class="keywordtype">bool</span> bIsInitialized = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#af11b60d083c4a8e1e68a59a0824899d4">IsInitialized</a>();
    <span class="keywordflow">if</span> (!bIsInitialized)   { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Not initialized; call OT_API::Init first.\n&quot;</span>,__FUNCTION__); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (SERVER_ID.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span> ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theID(SERVER_ID);
    <span class="comment">// ------------------------------------------</span>
    <span class="keyword">const</span> int32_t &amp; nCount = <a class="code" href="class_o_t_a_p_i___exec.html#a3b5978e2f813cf10ebe34fa7d85b80be">OTAPI_Exec::GetAccountCount</a>();

    <span class="comment">// Loop through all the accounts.</span>
    <span class="keywordflow">for</span> (int32_t i = 0; i &lt; nCount; i++)
    {
        std::string pAcctID = <a class="code" href="class_o_t_a_p_i___exec.html#a07d988d698bb0f914031141297445e72">OTAPI_Exec::GetAccountWallet_ID</a>(i);
        <a class="code" href="class_o_t_string.html">OTString</a> strAcctID(pAcctID);

        std::string pID = <a class="code" href="class_o_t_a_p_i___exec.html#afb2255e4fb7fb27bbeebe753eb827770">OTAPI_Exec::GetAccountWallet_ServerID</a>(strAcctID.Get());
        <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theCompareID(pID);

        <span class="keywordflow">if</span> (theID == theCompareID)
        {
            <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Unable to remove server contract %s from wallet, because Account %s uses it.\n&quot;</span>,__FUNCTION__, SERVER_ID.c_str(), strAcctID.Get());
            <span class="keywordflow">return</span> <span class="keyword">false</span>;
        }
    }
    <span class="comment">// ------------------------------------------</span>
    <span class="keyword">const</span> int32_t &amp; nNymCount = <a class="code" href="class_o_t_a_p_i___exec.html#a363b1cd3cb27fce58e6d113641fb65bb">OTAPI_Exec::GetNymCount</a>();

    <span class="comment">// Loop through all the Nyms. (One might be registered on that server.)</span>
    <span class="comment">//</span>
    <span class="keywordflow">for</span> (int32_t i = 0; i &lt; nNymCount; i++)
    {
        std::string pNymID = <a class="code" href="class_o_t_a_p_i___exec.html#a5c205cfa5e6f9a05e87b4894e92e8086" title="based on Index this returns the Nym&#39;s ID">OTAPI_Exec::GetNym_ID</a>(i);
        <a class="code" href="class_o_t_string.html">OTString</a> strNymID(pNymID);

        <span class="keywordflow">if</span> (<span class="keyword">true</span> == <a class="code" href="class_o_t_a_p_i___exec.html#a7de7a08dccfd1343129932f3459b8298">OTAPI_Exec::IsNym_RegisteredAtServer</a>(strNymID.Get(), SERVER_ID))
        {
            <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Unable to remove server contract %s from wallet, because Nym %s is registered there. (Delete that first...)\n&quot;</span>,
                __FUNCTION__, SERVER_ID.c_str(), strNymID.Get());
            <span class="keywordflow">return</span> <span class="keyword">false</span>;
        }
    }
    <span class="keywordflow">return</span> <span class="keyword">true</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a16826a31571be5b0281660464b2ff2af"></a><!-- doxytag: member="OTAPI_Exec::Wallet_ChangePassphrase" ref="a16826a31571be5b0281660464b2ff2af" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_a_p_i___exec.html#a16826a31571be5b0281660464b2ff2af">OTAPI_Exec::Wallet_ChangePassphrase</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>CHANGE MASTER KEY and PASSWORD.</p>
<p>Normally your passphrase is used to derive a key, which is used to unlock a random number (a symmetric key), which is used as the passphrase to open the master key, which is used as the passphrase to any given Nym.</p>
<p>Since all the Nyms are encrypted to the master key, and since we can change the passphrase on the master key without changing the master key itself, then we don't have to do anything to update all the Nyms, since that part hasn't changed.</p>
<p>But we might want a separate "Change Master Key" function that replaces that key itself, in which case we'd HAVE to load up all the Nyms and re-save them.</p>
<p>UPDATE: Seems the easiest thing to do is to just change both the key and passphase at the same time here, by loading up all the private nyms, destroying the master key, and then saving all the private Nyms. (With master key never actually being "paused.") This will automatically cause it to generate a new master key during the saving process. (Make sure to save the wallet also.) </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l02153">2153</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a90f13aec197a306faca8f87d1dd8d1dd">Wallet_ChangePassphrase</a>();
}
</pre></div>
</div>
</div>
<a class="anchor" id="a5caeac705fea6d1e302b8c3c8bda0ca4"></a><!-- doxytag: member="OTAPI_Exec::Wallet_ExportCert" ref="a5caeac705fea6d1e302b8c3c8bda0ca4" args="(const std::string &amp;NYM_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a5caeac705fea6d1e302b8c3c8bda0ca4">OTAPI_Exec::Wallet_ExportCert</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>NYM_ID</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the exported cert, if successful. Else NULL. </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l02012">2012</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// -----------------------------------------------------</span>
    <span class="keywordtype">bool</span> bIsInitialized = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#af11b60d083c4a8e1e68a59a0824899d4">IsInitialized</a>();
    <span class="keywordflow">if</span> (!bIsInitialized) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Not initialized; call OT_API::Init first.\n&quot;</span>,__FUNCTION__);   <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keywordflow">if</span> (NYM_ID.empty())         { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;NYM_ID&quot;</span>         ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theNymID(NYM_ID);

    <a class="code" href="class_o_t_string.html">OTString</a> strOutput;

    <span class="keyword">const</span> <span class="keywordtype">bool</span> &amp; bExported = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#afebfabab4241d6aa75ce0e178e248592">Wallet_ExportCert</a>(theNymID, strOutput);

    <span class="keywordflow">if</span> (bExported)
    {
        std::string pBuf = strOutput.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();

        <span class="keywordflow">return</span> pBuf;
    }

    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a5dbebdf1790c77bb839a6850cc3eb88c"></a><!-- doxytag: member="OTAPI_Exec::Wallet_ExportNym" ref="a5dbebdf1790c77bb839a6850cc3eb88c" args="(const std::string &amp;NYM_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a5dbebdf1790c77bb839a6850cc3eb88c">OTAPI_Exec::Wallet_ExportNym</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>NYM_ID</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the exported Nym, if success. (Else NULL.) </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l01975">1975</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// -----------------------------------------------------</span>
    <span class="keywordtype">bool</span> bIsInitialized = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#af11b60d083c4a8e1e68a59a0824899d4">IsInitialized</a>();
    <span class="keywordflow">if</span> (!bIsInitialized) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Not initialized; call OT_API::Init first.\n&quot;</span>,__FUNCTION__);   <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keywordflow">if</span> (NYM_ID.empty())         { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;NYM_ID&quot;</span>         ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theNymID(NYM_ID);

    <span class="comment">// Create a StringMap object with these values:</span>
    <span class="comment">//</span>
    <span class="comment">// id:      The NymID.</span>
    <span class="comment">// name:    The display name from the wallet.</span>
    <span class="comment">// cert:    The public / private certfile in openssl format.</span>
    <span class="comment">// nymfile: The contents of the nymfile.</span>
    <span class="comment">//</span>
    <span class="comment">// Make sure to use master key when accessing them, but then put that on</span>
    <span class="comment">// pause while saving them to string. (Then unpause again.)</span>
    <span class="comment">//</span>
    <span class="comment">// Then Encode the StringMap into packed string form, and return it</span>
    <span class="comment">// from this function (or &quot;&quot;.)</span>
    <span class="comment">//</span>
    <a class="code" href="class_o_t_string.html">OTString</a> strOutput;

    <span class="keyword">const</span> <span class="keywordtype">bool</span> &amp; bExported = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#abe3cee60ee8f3d8e3660067d481b2dcc">Wallet_ExportNym</a>(theNymID, strOutput);

    <span class="keywordflow">if</span> (bExported)
    {
        std::string pBuf = strOutput.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();

        <span class="keywordflow">return</span> pBuf;
    }

    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a5e624ce60190f892ba9e77463862b258"></a><!-- doxytag: member="OTAPI_Exec::Wallet_GetAccountIDFromPartial" ref="a5e624ce60190f892ba9e77463862b258" args="(const std::string &amp;PARTIAL_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a5e624ce60190f892ba9e77463862b258">OTAPI_Exec::Wallet_GetAccountIDFromPartial</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>PARTIAL_ID</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l02304">2304</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">//    OTAccount *   GetAccount(const OTIdentifier &amp; THE_ID, const std::string &amp; strFuncName=&quot;&quot;);</span>
    <span class="comment">//    OTAccount *   GetAccountPartialMatch(const std::string &amp;PARTIAL_ID, const std::string &amp; strFuncName=&quot;&quot;);</span>

    <span class="comment">// -----------------------------------------------------</span>
    <span class="keywordtype">bool</span> bIsInitialized = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#af11b60d083c4a8e1e68a59a0824899d4">IsInitialized</a>();
    <span class="keywordflow">if</span> (!bIsInitialized) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Not initialized; call OT_API::Init first.\n&quot;</span>      ,__FUNCTION__); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keywordflow">if</span> (PARTIAL_ID.empty())         { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;PARTIAL_ID&quot;</span>         ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// -----------------------------------------------------</span>

    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>  thePartialID(PARTIAL_ID);

    <span class="comment">// In this case, the user passed in the FULL ID.</span>
    <span class="comment">// (We STILL confirm whether he&#39;s found in the wallet...)</span>
    <span class="comment">//</span>
    <a class="code" href="class_o_t_account.html">OTAccount</a> * pObject = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a263e050929c3f000ce4172dfbc727149">GetAccount</a>(thePartialID, <span class="stringliteral">&quot;OTAPI_Exec::Wallet_GetNymIDFromPartial&quot;</span>);

    <span class="keywordflow">if</span> (NULL != pObject) <span class="comment">// Found it (as full ID.)</span>
    {
        <a class="code" href="class_o_t_string.html">OTString</a> strID_Output(thePartialID);
        std::string pBuf = strID_Output.Get();

        <span class="keywordflow">return</span> pBuf;
    }
    <span class="comment">// ------------------------------------------</span>
    <span class="comment">// Below this point, it definitely wasn&#39;t a FULL ID, so now we can</span>
    <span class="comment">// go ahead and search for it as a PARTIAL ID...</span>
    <span class="comment">//</span>
    pObject = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a7a602b75fccd8b11b73508ce358a4594">GetAccountPartialMatch</a>(PARTIAL_ID, <span class="stringliteral">&quot;OTAPI_Exec::Wallet_GetNymIDFromPartial&quot;</span>);

    <span class="keywordflow">if</span> (NULL != pObject) <span class="comment">// Found it (as partial ID.)</span>
    {
        <a class="code" href="class_o_t_string.html">OTString</a> strID_Output;
        pObject-&gt;<a class="code" href="class_o_t_contract.html#acf77d2db6da3904aa8b03e7b87c02e4e">GetIdentifier</a>(strID_Output);
        std::string pBuf = strID_Output.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();

        <span class="keywordflow">return</span> pBuf;
    }

    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a25b73aa089db9d5b4452e1a2bb5dfff4"></a><!-- doxytag: member="OTAPI_Exec::Wallet_GetAssetIDFromPartial" ref="a25b73aa089db9d5b4452e1a2bb5dfff4" args="(const std::string &amp;PARTIAL_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a25b73aa089db9d5b4452e1a2bb5dfff4">OTAPI_Exec::Wallet_GetAssetIDFromPartial</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>PARTIAL_ID</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l02260">2260</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">//    OTAssetContract * GetAssetType(const OTIdentifier &amp; THE_ID, const std::string &amp; strFuncName=&quot;&quot;);</span>
    <span class="comment">//    OTAssetContract * GetAssetContractPartialMatch(const std::string &amp;PARTIAL_ID, const std::string &amp; strFuncName=&quot;&quot;);</span>

    <span class="comment">// -----------------------------------------------------</span>
    <span class="keywordtype">bool</span> bIsInitialized = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#af11b60d083c4a8e1e68a59a0824899d4">IsInitialized</a>();
    <span class="keywordflow">if</span> (!bIsInitialized) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Not initialized; call OT_API::Init first.\n&quot;</span>      ,__FUNCTION__); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keywordflow">if</span> (PARTIAL_ID.empty())         { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;PARTIAL_ID&quot;</span>         ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// -----------------------------------------------------</span>

    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>  thePartialID(PARTIAL_ID);

    <span class="comment">// In this case, the user passed in the FULL ID.</span>
    <span class="comment">// (We STILL confirm whether he&#39;s found in the wallet...)</span>
    <span class="comment">//</span>
    <a class="code" href="class_o_t_asset_contract.html">OTAssetContract</a> * pObject = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a291b0f7c5298ceecc8d4aa929146d4db">GetAssetType</a>(thePartialID, <span class="stringliteral">&quot;OTAPI_Exec::Wallet_GetAssetIDFromPartial&quot;</span>);

    <span class="keywordflow">if</span> (NULL != pObject) <span class="comment">// Found it (as full ID.)</span>
    {
        <a class="code" href="class_o_t_string.html">OTString</a> strID_Output(thePartialID);
        std::string pBuf = strID_Output.Get();

        <span class="keywordflow">return</span> pBuf;
    }
    <span class="comment">// ------------------------------------------</span>
    <span class="comment">// Below this point, it definitely wasn&#39;t a FULL ID, so now we can</span>
    <span class="comment">// go ahead and search for it as a PARTIAL ID...</span>
    <span class="comment">//</span>
    pObject = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#aec51f205544c3c4a8acf95e1562292ba">GetAssetContractPartialMatch</a>(PARTIAL_ID, <span class="stringliteral">&quot;OTAPI_Exec::Wallet_GetAssetIDFromPartial&quot;</span>);

    <span class="keywordflow">if</span> (NULL != pObject) <span class="comment">// Found it (as partial ID.)</span>
    {
        <a class="code" href="class_o_t_string.html">OTString</a> strID_Output;
        pObject-&gt;<a class="code" href="class_o_t_contract.html#acf77d2db6da3904aa8b03e7b87c02e4e">GetIdentifier</a>(strID_Output);
        std::string pBuf = strID_Output.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();

        <span class="keywordflow">return</span> pBuf;
    }

    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a5b814460ca849a37beb4a11f8983e420"></a><!-- doxytag: member="OTAPI_Exec::Wallet_GetNymIDFromPartial" ref="a5b814460ca849a37beb4a11f8983e420" args="(const std::string &amp;PARTIAL_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a5b814460ca849a37beb4a11f8983e420">OTAPI_Exec::Wallet_GetNymIDFromPartial</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>PARTIAL_ID</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Attempts to find a full ID in the wallet, based on a partial of the same ID. Returns NULL on failure, otherwise returns the full ID. </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l02172">2172</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
<span class="comment">//  OTPseudonym *   GetNym(const OTIdentifier &amp; NYM_ID, const std::string &amp; strFuncName=&quot;&quot;);</span>
<span class="comment">//  OTPseudonym *   GetNymByIDPartialMatch(const std::string &amp;PARTIAL_ID, const std::string &amp; strFuncName=&quot;&quot;);</span>
    <span class="comment">// -----------------------------------------------------</span>
    <span class="keywordtype">bool</span> bIsInitialized = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#af11b60d083c4a8e1e68a59a0824899d4">IsInitialized</a>();
    <span class="keywordflow">if</span> (!bIsInitialized)    { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Not initialized; call OT_API::Init first.\n&quot;</span> ,__FUNCTION__); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (PARTIAL_ID.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;PARTIAL_ID&quot;</span>        ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>  thePartialID(PARTIAL_ID);

    <span class="comment">// In this case, the user passed in the FULL ID.</span>
    <span class="comment">// (We STILL confirm whether he&#39;s found in the wallet...)</span>
    <span class="comment">//</span>
    <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pObject = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a08144e29a333dd0e1087c4655e6981ee">GetNym</a>(thePartialID, <span class="stringliteral">&quot;OTAPI_Exec::Wallet_GetNymIDFromPartial&quot;</span>);

    <span class="keywordflow">if</span> (NULL != pObject) <span class="comment">// Found it (as full ID.)</span>
    {
        <a class="code" href="class_o_t_string.html">OTString</a> strID_Output(thePartialID);
        std::string pBuf = strID_Output.Get();

        <span class="keywordflow">return</span> pBuf;
    }
    <span class="comment">// ------------------------------------------</span>
    <span class="comment">// Below this point, it definitely wasn&#39;t a FULL ID, so now we can</span>
    <span class="comment">// go ahead and search for it as a PARTIAL ID...</span>
    <span class="comment">//</span>
    pObject = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#aa0bdb71f4b4b19f8a49061cbc2d037c4">GetNymByIDPartialMatch</a>(PARTIAL_ID, <span class="stringliteral">&quot;OTAPI_Exec::Wallet_GetNymIDFromPartial&quot;</span>);

    <span class="keywordflow">if</span> (NULL != pObject) <span class="comment">// Found it (as partial ID.)</span>
    {
        <a class="code" href="class_o_t_string.html">OTString</a> strID_Output;
        pObject-&gt;<a class="code" href="class_o_t_pseudonym.html#a1775c7aedd0dd25b2faf3f78dcccabe7">GetIdentifier</a>(strID_Output);
        std::string pBuf = strID_Output.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();
        <span class="keywordflow">return</span> pBuf;
    }

    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a4dadb29632efad3f1b9f71ae72b14e9d"></a><!-- doxytag: member="OTAPI_Exec::Wallet_GetServerIDFromPartial" ref="a4dadb29632efad3f1b9f71ae72b14e9d" args="(const std::string &amp;PARTIAL_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a4dadb29632efad3f1b9f71ae72b14e9d">OTAPI_Exec::Wallet_GetServerIDFromPartial</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>PARTIAL_ID</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l02215">2215</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
<span class="comment">//    OTServerContract *    GetServer(const OTIdentifier &amp; THE_ID, const std::string &amp; strFuncName=&quot;&quot;);</span>
<span class="comment">//    OTServerContract *    GetServerContractPartialMatch(const std::string &amp;PARTIAL_ID, const std::string &amp; strFuncName=&quot;&quot;);</span>
    <span class="comment">// -----------------------------------------------------</span>
    <span class="keywordtype">bool</span> bIsInitialized = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#af11b60d083c4a8e1e68a59a0824899d4">IsInitialized</a>();
    <span class="keywordflow">if</span> (!bIsInitialized) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Not initialized; call OT_API::Init first.\n&quot;</span>      ,__FUNCTION__); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keywordflow">if</span> (PARTIAL_ID.empty())         { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;PARTIAL_ID&quot;</span>         ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>  thePartialID(PARTIAL_ID);

    <span class="comment">// In this case, the user passed in the FULL ID.</span>
    <span class="comment">// (We STILL confirm whether he&#39;s found in the wallet...)</span>
    <span class="comment">//</span>
    <a class="code" href="class_o_t_server_contract.html">OTServerContract</a> * pObject = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#afa4e2d39d29061b609d81f094c2ca25c">GetServer</a>(thePartialID, <span class="stringliteral">&quot;OTAPI_Exec::Wallet_GetServerIDFromPartial&quot;</span>);

    <span class="keywordflow">if</span> (NULL != pObject) <span class="comment">// Found it (as full ID.)</span>
    {
        <a class="code" href="class_o_t_string.html">OTString</a> strID_Output(thePartialID);
        std::string pBuf = strID_Output.Get();

        <span class="keywordflow">return</span> pBuf;
    }
    <span class="comment">// ------------------------------------------</span>
    <span class="comment">// Below this point, it definitely wasn&#39;t a FULL ID, so now we can</span>
    <span class="comment">// go ahead and search for it as a PARTIAL ID...</span>
    <span class="comment">//</span>
    pObject = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a27228b655e5c661959812e3a2b7f144e">GetServerContractPartialMatch</a>(PARTIAL_ID, <span class="stringliteral">&quot;OTAPI_Exec::Wallet_GetServerIDFromPartial&quot;</span>);

    <span class="keywordflow">if</span> (NULL != pObject) <span class="comment">// Found it (as partial ID.)</span>
    {
        <a class="code" href="class_o_t_string.html">OTString</a> strID_Output;
        pObject-&gt;<a class="code" href="class_o_t_contract.html#acf77d2db6da3904aa8b03e7b87c02e4e">GetIdentifier</a>(strID_Output);
        std::string pBuf = strID_Output.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();

        <span class="keywordflow">return</span> pBuf;
    }

    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a58c93b75b825ddee3ab441c9384584d8"></a><!-- doxytag: member="OTAPI_Exec::Wallet_ImportCert" ref="a58c93b75b825ddee3ab441c9384584d8" args="(const std::string &amp;DISPLAY_NAME, const std::string &amp;FILE_CONTENTS)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a58c93b75b825ddee3ab441c9384584d8">OTAPI_Exec::Wallet_ImportCert</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>DISPLAY_NAME</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>FILE_CONTENTS</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the imported cert's NymID, if successful. Else NULL. </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l02101">2101</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// -----------------------------------------------------</span>
    <span class="keywordtype">bool</span> bIsInitialized = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#af11b60d083c4a8e1e68a59a0824899d4">IsInitialized</a>();
    <span class="keywordflow">if</span> (!bIsInitialized) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Not initialized; call OT_API::Init first.\n&quot;</span>,__FUNCTION__);   <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

<span class="comment">//  if (DISPLAY_NAME.empty())  { OTLog::vError(&quot;%s: Null: %s passed in!\n&quot;, __FUNCTION__, &quot;DISPLAY_NAME&quot;        ); OT_FAIL; }</span>
    <span class="keywordflow">if</span> (FILE_CONTENTS.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;FILE_CONTENTS&quot;</span>       ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strDisplayName (DISPLAY_NAME),
                   strFileContents(FILE_CONTENTS);

    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theNymID;

    <span class="keyword">const</span> <span class="keywordtype">bool</span> &amp; bImported = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a52464281f46358635dde59e3b787354e">Wallet_ImportCert</a>(strDisplayName, strFileContents, &amp;theNymID);

    <span class="keywordflow">if</span> (bImported)
    {
        <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strNymID(theNymID);

        std::string pBuf = strNymID.Get();

        <span class="keywordflow">return</span> pBuf;
    }

    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a362daf677ff1aa397a02b4ba9e5be0d2"></a><!-- doxytag: member="OTAPI_Exec::Wallet_ImportNym" ref="a362daf677ff1aa397a02b4ba9e5be0d2" args="(const std::string &amp;FILE_CONTENTS)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a362daf677ff1aa397a02b4ba9e5be0d2">OTAPI_Exec::Wallet_ImportNym</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>FILE_CONTENTS</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>returns NymID if success, else NULL. </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l02043">2043</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// -----------------------------------------------------</span>
    <span class="keywordtype">bool</span> bIsInitialized = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#af11b60d083c4a8e1e68a59a0824899d4">IsInitialized</a>();
    <span class="keywordflow">if</span> (!bIsInitialized) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Not initialized; call OT_API::Init first.\n&quot;</span>,__FUNCTION__);   <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keywordflow">if</span> (FILE_CONTENTS.empty())      { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;FILE_CONTENTS&quot;</span>      ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// -----------------------------------------------------</span>

    <span class="comment">// Pause the master key, since this Nym is coming from outside</span>
    <span class="comment">// the wallet.</span>
    <span class="comment">//</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strFileContents(FILE_CONTENTS);

    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theNymID;

    <span class="keyword">const</span> <span class="keywordtype">bool</span> &amp; bImported = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a77a64ebe7b8942ae50ed25c31834eb7c">Wallet_ImportNym</a>(strFileContents, &amp;theNymID);

    <span class="comment">// Decode the FILE_CONTENTS into a StringMap object,</span>
    <span class="comment">// and if success, make sure it contains these values:</span>
    <span class="comment">//</span>
    <span class="comment">// id:      The NymID.</span>
    <span class="comment">// name:    The display name from the wallet.</span>
    <span class="comment">// cert:    The public / private certfile in openssl format.</span>
    <span class="comment">// nymfile: The contents of the nymfile.</span>
    <span class="comment">//</span>
    <span class="comment">// Unpause the master key.</span>
    <span class="comment">//</span>
    <span class="comment">// Do various verifications on the values to make sure there&#39;s no funny business.</span>
    <span class="comment">//</span>
    <span class="comment">// Make sure the Nym with this ID isn&#39;t ALREADY in the wallet. If not, then add it.</span>
    <span class="comment">//</span>
    <span class="comment">//</span>
    <span class="comment">//</span>

    <span class="keywordflow">if</span> (bImported)
    {
        <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strNymID(theNymID);

        std::string pBuf = strNymID.Get();



        <span class="keywordflow">return</span> pBuf;
    }

    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a3c0090685d45d8d765eef17619afa089"></a><!-- doxytag: member="OTAPI_Exec::Wallet_ImportPurse" ref="a3c0090685d45d8d765eef17619afa089" args="(const std::string &amp;SERVER_ID, const std::string &amp;ASSET_TYPE_ID, const std::string &amp;USER_ID, const std::string &amp;THE_PURSE)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_a_p_i___exec.html#a3c0090685d45d8d765eef17619afa089">OTAPI_Exec::Wallet_ImportPurse</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ASSET_TYPE_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>THE_PURSE</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Should handle duplicates. Should load, merge, and save. </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l11625">11625</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty())          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (ASSET_TYPE_ID.empty())      { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;ASSET_TYPE_ID&quot;</span>      ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID.empty())            { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>            ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (THE_PURSE.empty())          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;THE_PURSE&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="comment">// -----------------------------------------------------</span>
    std::string strFunc = __FUNCTION__; <span class="comment">//&quot;OTAPI_Exec::Wallet_ImportPurse&quot;;</span>
    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_string.html">OTString</a> strReason(<span class="stringliteral">&quot;Importing a cash purse into the wallet.&quot;</span>);
    <span class="comment">//  OTPasswordData thePWData(strReason);</span>
    <span class="comment">// -----------------------------------------------------</span>
    <span class="keyword">const</span>
        <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>  theServerID(SERVER_ID), theAssetTypeID(ASSET_TYPE_ID), theUserID(USER_ID);
    <span class="keyword">const</span>
        <a class="code" href="class_o_t_string.html">OTString</a>      strNewPurse(THE_PURSE);
    <span class="comment">// -----------------------------------------------------</span>
    <span class="comment">// THE_PURSE (the new purse) either is for a Nym, or a Symmetric Key.</span>
    <span class="comment">// If it&#39;s for a Nym, it either has a NymID, or the ID is left blank.</span>
    <span class="comment">//</span>
    <span class="comment">// This call already logs on failure, so I won&#39;t bother logging again here.</span>
    <span class="comment">//</span>
    <a class="code" href="class_o_t_string.html">OTString</a> strDisplay(<span class="stringliteral">&quot;&quot;</span>);

    <span class="keyword">const</span> <span class="keywordtype">bool</span> &amp; bImported = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a4b5282e8670208c395d3ab98a9a2a315">Wallet_ImportPurse</a>(theServerID, theAssetTypeID, theUserID,
        strNewPurse, &amp;strDisplay);
    <span class="comment">// --------------------------------------------------------------</span>
    <span class="keywordflow">return</span> bImported ? <span class="keyword">true</span> : <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a3e02e35f0243b096335c78dcb45f4f0c"></a><!-- doxytag: member="OTAPI_Exec::Wallet_RemoveAssetType" ref="a3e02e35f0243b096335c78dcb45f4f0c" args="(const std::string &amp;ASSET_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_a_p_i___exec.html#a3e02e35f0243b096335c78dcb45f4f0c">OTAPI_Exec::Wallet_RemoveAssetType</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ASSET_ID</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Remove this asset contract from my wallet!</p>
<p>Try to remove the asset contract from the wallet. This will not work if there are any accounts in the wallet for the same asset type ID. returns OT_BOOL </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l01610">1610</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// -----------------------------------------------------</span>
    <span class="keywordtype">bool</span> bIsInitialized = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#af11b60d083c4a8e1e68a59a0824899d4">IsInitialized</a>();
    <span class="keywordflow">if</span> (!bIsInitialized) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Not initialized; call OT_API::Init first.\n&quot;</span>,__FUNCTION__); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keywordflow">if</span> (ASSET_ID.empty())           { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;ASSET_ID&quot;</span>           ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// -----------------------------------------------------</span>

    <span class="comment">// Make sure there aren&#39;t any dependent accounts..</span>
    <span class="keywordflow">if</span> (<span class="keyword">false</span> == <a class="code" href="class_o_t_a_p_i___exec.html#ae0264d14564877e5645790a46e455870">OTAPI_Exec::Wallet_CanRemoveAssetType</a>(ASSET_ID))
        <span class="keywordflow">return</span> <span class="keyword">false</span>;

    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_wallet.html">OTWallet</a> * pWallet = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#af759173aae6f4592c3d6ef1f6a9aa4ff">GetWallet</a>(__FUNCTION__);

    <span class="keywordflow">if</span> (NULL == pWallet) {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: No wallet found...!\n&quot;</span>,__FUNCTION__);
        <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>;
    }

    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theID(ASSET_ID);

    <span class="keywordflow">if</span> (pWallet-&gt;<a class="code" href="class_o_t_wallet.html#a1eae600871447c75a3ddd155c86674a3">RemoveAssetContract</a>(theID))
    {
        pWallet-&gt;<a class="code" href="class_o_t_wallet.html#aa16fe70ac5913e3223f994d7dc8a4831">SaveWallet</a>();
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Removed asset contract from the wallet: %s\n&quot;</span>,__FUNCTION__, ASSET_ID.c_str());
        <span class="keywordflow">return</span> <span class="keyword">true</span>;
    }
    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a026fd730a998874c4dbacb72decc550b"></a><!-- doxytag: member="OTAPI_Exec::Wallet_RemoveNym" ref="a026fd730a998874c4dbacb72decc550b" args="(const std::string &amp;NYM_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_a_p_i___exec.html#a026fd730a998874c4dbacb72decc550b">OTAPI_Exec::Wallet_RemoveNym</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>NYM_ID</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Remove this Nym from my wallet!</p>
<p>Try to remove the Nym from the wallet. This will not work if there are any nyms in the wallet for the same server ID. returns OT_BOOL </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l01732">1732</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// -----------------------------------------------------</span>
    <span class="keywordtype">bool</span> bIsInitialized = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#af11b60d083c4a8e1e68a59a0824899d4">IsInitialized</a>();
    <span class="keywordflow">if</span> (!bIsInitialized) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Not initialized; call OT_API::Init first.\n&quot;</span>,__FUNCTION__); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keywordflow">if</span> (NYM_ID.empty())             { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;NYM_ID&quot;</span>             ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// -----------------------------------------------------</span>

    <span class="comment">// ------------------------------------------</span>
    <span class="comment">// DONE: The below call proves already that there are no accounts laying around</span>
    <span class="comment">// for this Nym. (No need to worry about &quot;orphaned accounts.&quot;)</span>
    <span class="comment">//</span>
    <span class="comment">// DONE (finally):</span>
    <span class="comment">// However, the Nym might still be registered at various servers, even without asset accounts.</span>
    <span class="comment">// Therefore, we need to iterate through the server contracts, and if the Nym is registered at</span>
    <span class="comment">// any of the servers, then &quot;deregister&quot; (before deleting the Nym entirely.) This is much</span>
    <span class="comment">// cleaner for the server side, who otherwise has to expired unused nyms based on some rule</span>
    <span class="comment">// presumably to be found in the server contract.</span>
    <span class="comment">// ------------------------------------------</span>
    <span class="keywordflow">if</span> (<span class="keyword">false</span> == <a class="code" href="class_o_t_a_p_i___exec.html#a021b69143268a7aabd977638cd26cfed">OTAPI_Exec::Wallet_CanRemoveNym</a>(NYM_ID))
        <span class="keywordflow">return</span> <span class="keyword">false</span>;

    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_wallet.html">OTWallet</a> * pWallet = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#af759173aae6f4592c3d6ef1f6a9aa4ff">GetWallet</a>(__FUNCTION__);

    <span class="keywordflow">if</span> (NULL == pWallet) {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: No wallet found...!\n&quot;</span>,__FUNCTION__);
        <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>;
    }

    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theID(NYM_ID);

    <span class="keywordflow">if</span> (pWallet-&gt;<a class="code" href="class_o_t_wallet.html#a7dd1cf4ba4922eacc2c3c81d21dd07dc">RemoveNym</a>(theID))
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Success erasing Nym from wallet: %s\n&quot;</span>, __FUNCTION__, NYM_ID.c_str());
        pWallet-&gt;<a class="code" href="class_o_t_wallet.html#aa16fe70ac5913e3223f994d7dc8a4831">SaveWallet</a>();
        <span class="keywordflow">return</span> <span class="keyword">true</span>;
    }
    <span class="keywordflow">else</span>
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Failure erasing Nym from wallet: %s\n&quot;</span>, __FUNCTION__, NYM_ID.c_str());

    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a529310cf664653d079f4830c3e00add7"></a><!-- doxytag: member="OTAPI_Exec::Wallet_RemoveServer" ref="a529310cf664653d079f4830c3e00add7" args="(const std::string &amp;SERVER_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_a_p_i___exec.html#a529310cf664653d079f4830c3e00add7">OTAPI_Exec::Wallet_RemoveServer</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Remove this server contract from my wallet!</p>
<p>Try to remove the server contract from the wallet. This will not work if there are any accounts in the wallet for the same server ID. returns OT_BOOL </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l01519">1519</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// -----------------------------------------------------</span>
    <span class="keywordtype">bool</span> bIsInitialized = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#af11b60d083c4a8e1e68a59a0824899d4">IsInitialized</a>();
    <span class="keywordflow">if</span> (!bIsInitialized) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Not initialized; call OT_API::Init first.\n&quot;</span>,__FUNCTION__); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <span class="keywordflow">if</span> (SERVER_ID.empty())          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// -----------------------------------------------------</span>

    <span class="comment">// Make sure there aren&#39;t any dependent accounts..</span>
    <span class="keywordflow">if</span> (<span class="keyword">false</span> == <a class="code" href="class_o_t_a_p_i___exec.html#ad5b66d7e6143d6e75ce5a4d32a87e8ea">OTAPI_Exec::Wallet_CanRemoveServer</a>(SERVER_ID))
        <span class="keywordflow">return</span> <span class="keyword">false</span>;

    <span class="comment">// TODO: the above call proves that there are no accounts laying around</span>
    <span class="comment">// for this server ID. (No need to worry about &quot;orphaned accounts.&quot;)</span>
    <span class="comment">//</span>
    <span class="comment">// However, there may still be Nyms registered at the server! Therefore,</span>
    <span class="comment">// we need to loop through the Nyms, and make sure none of them has been</span>
    <span class="comment">// registered at this server ID. If it has, then we need to message the server</span>
    <span class="comment">// to &quot;deregister&quot; the Nym, which is much cleaner.  Otherwise server&#39;s only</span>
    <span class="comment">// other alternative is to expire Nyms that have gone unused for some specific</span>
    <span class="comment">// period of time, presumably those terms are described in the server contract.</span>
    <span class="comment">//</span>
    <span class="comment">// -----------------------------------------------------</span>
    <a class="code" href="class_o_t_wallet.html">OTWallet</a> * pWallet = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#af759173aae6f4592c3d6ef1f6a9aa4ff">GetWallet</a>(__FUNCTION__);

    <span class="keywordflow">if</span> (NULL == pWallet) {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s:  No wallet found...\n&quot;</span>,__FUNCTION__);
        <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>;
    }

    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theID(SERVER_ID);

    <span class="keywordflow">if</span> (pWallet-&gt;<a class="code" href="class_o_t_wallet.html#ab739c1b18f6dcc6958cfd1ac53f728d8">RemoveServerContract</a>(theID))
    {
        pWallet-&gt;<a class="code" href="class_o_t_wallet.html#aa16fe70ac5913e3223f994d7dc8a4831">SaveWallet</a>();
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Removed server contract from the wallet: %s\n&quot;</span>, __FUNCTION__, SERVER_ID.c_str());
        <span class="keywordflow">return</span> <span class="keyword">true</span>;
    }
    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a06e34b62c3e36073dafa653a28ee6f5d"></a><!-- doxytag: member="OTAPI_Exec::WalletExists" ref="a06e34b62c3e36073dafa653a28ee6f5d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_a_p_i___exec.html#a06e34b62c3e36073dafa653a28ee6f5d">OTAPI_Exec::WalletExists</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>WALLET EXISTS</p>
<p>Just Checks if the m_pWallet pointer is not null.</p>
<p><a class="el" href="class_o_t_a_p_i___exec.html#a06e34b62c3e36073dafa653a28ee6f5d">WalletExists()</a>; </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l00375">375</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a798f3a326f18f31b8e62a682bbaa6a6d">WalletExists</a>();
}
</pre></div>
</div>
</div>
<a class="anchor" id="a141b6f08b693940b3cc24797d9fdaa92"></a><!-- doxytag: member="OTAPI_Exec::withdrawVoucher" ref="a141b6f08b693940b3cc24797d9fdaa92" args="(const std::string &amp;SERVER_ID, const std::string &amp;USER_ID, const std::string &amp;ACCT_ID, const std::string &amp;RECIPIENT_USER_ID, const std::string &amp;CHEQUE_MEMO, const int64_t &amp;AMOUNT)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_a_p_i___exec.html#a141b6f08b693940b3cc24797d9fdaa92">OTAPI_Exec::withdrawVoucher</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>USER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ACCT_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>RECIPIENT_USER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>CHEQUE_MEMO</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int64_t &amp;&#160;</td>
          <td class="paramname"><em>AMOUNT</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>-------------------------------------------------------------------------- WITHDRAW VOUCHER -- aka CASHIER'S CHEQUE.</p>
<p>This is VERY similar to withdrawing cash, except the server gives you a voucher instead of cash. It's the same thing as a CASHIER'S CHEQUE...</p>
<p>Basically the funds are moved into an int32_t server account, and then the server gives you a cheque drawn on its own account. This way you can use it like a cheque, but it will never bounce.</p>
<p>Returns int32_t: -1 means error; no message was sent. -2 means the message was sent, but the request number must be passed as a string, so call GetLargeRequestNum. 0 means NO error, but also: no message was sent. &gt;0 means NO error, and the message was sent, and the request number fits into an integer... ...and in fact the requestNum IS the return value! ===&gt; In 99% of cases, this LAST option is what actually happens!! </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l13107">13107</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty())          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>,     __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (USER_ID.empty())            { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>,     __FUNCTION__, <span class="stringliteral">&quot;USER_ID&quot;</span>            ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (ACCT_ID.empty())            { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>,     __FUNCTION__, <span class="stringliteral">&quot;ACCT_ID&quot;</span>            ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (RECIPIENT_USER_ID.empty())  { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>,     __FUNCTION__, <span class="stringliteral">&quot;RECIPIENT_USER_ID&quot;</span>  ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
<span class="comment">//  if (CHEQUE_MEMO.empty())        { OTLog::vError(&quot;%s: Null: %s passed in!\n&quot;,     __FUNCTION__, &quot;CHEQUE_MEMO&quot;        ); OT_FAIL; }</span>
    <span class="keywordflow">if</span> (0 &gt; AMOUNT)                 { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Negative: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;AMOUNT&quot;</span>             ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>    theServerID(SERVER_ID), theUserID(USER_ID),
                    theAcctID(ACCT_ID),     theRecipientUserID(RECIPIENT_USER_ID);

    <a class="code" href="class_o_t_string.html">OTString</a> strMemo(CHEQUE_MEMO);
    int64_t  lAmount = AMOUNT;

    <span class="keywordflow">return</span> <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a7157cd6bf562305e24867b9521188a3c">withdrawVoucher</a>(theServerID, theUserID, theAcctID, theRecipientUserID, strMemo, static_cast&lt;int64_t&gt;(lAmount));
}
</pre></div>
</div>
</div>
<a class="anchor" id="a27dd75c5354aa488495ff2636cff1d64"></a><!-- doxytag: member="OTAPI_Exec::WriteCheque" ref="a27dd75c5354aa488495ff2636cff1d64" args="(const std::string &amp;SERVER_ID, const int64_t &amp;CHEQUE_AMOUNT, const time64_t &amp;VALID_FROM, const time64_t &amp;VALID_TO, const std::string &amp;SENDER_ACCT_ID, const std::string &amp;SENDER_USER_ID, const std::string &amp;CHEQUE_MEMO, const std::string &amp;RECIPIENT_USER_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_a_p_i___exec.html#a27dd75c5354aa488495ff2636cff1d64">OTAPI_Exec::WriteCheque</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int64_t &amp;&#160;</td>
          <td class="paramname"><em>CHEQUE_AMOUNT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="_o_t_common_8hpp.html#ad28ff0a3eda18840f6bda5872819167f">time64_t</a> &amp;&#160;</td>
          <td class="paramname"><em>VALID_FROM</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="_o_t_common_8hpp.html#ad28ff0a3eda18840f6bda5872819167f">time64_t</a> &amp;&#160;</td>
          <td class="paramname"><em>VALID_TO</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SENDER_ACCT_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>SENDER_USER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>CHEQUE_MEMO</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>RECIPIENT_USER_ID</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>(Above) IMPORTANT: USE the above functions for setting the CLIENT-SIDE display labels that you use in your UI for the Nyms/Servers/AssetTypes/Accounts. These labels are stored SEPARATELY from their own files, in the wallet file.</p>
<p>If you just added the contract, it will SET the label for you based on the contract type. like if it's an asset contract, it uses the currency name field from the asset contract. If it's a server contract it uses the entity short name. After that, it's configurable for the user, and stays on client side, and persists via wallet.</p>
<p>EVEN WHEN OT has to re-download one of those files, it will make sure to save the display label properly in the wallet.</p>
<p>THIS MEANS *you*, as a client developer: 1) CAN DEPEND on these labels to have the right value. 2) Can expect them to start out with good default values. 3) Can configure them from there. 4) SHOULD DISPLAY THEM as appropriate in your application. 5) Of course, use the ID behind the scenes for making all your OT calls... just use the name for display purposes.</p>
<p>WRITE A CHEQUE --- (Returns the cheque in string form.)</p>
<p>==&gt; <a class="el" href="class_o_t_a_p_i___exec.html#a27dd75c5354aa488495ff2636cff1d64">WriteCheque()</a> internally constructs an <a class="el" href="class_o_t_cheque.html">OTCheque</a> and issues it, like so:</p>
<p><a class="el" href="class_o_t_cheque.html">OTCheque</a> theCheque( SERVER_ID, ASSET_TYPE_ID );</p>
<p>theCheque.IssueCheque( AMOUNT // The amount of the cheque, in string form, which OTAPI will convert to a int64_t integer. Negative amounts allowed, since that is how OT implements invoices. (An invoice is just a cheque with a negative amount.)</p>
<p>lTransactionNumber, // The API will supply this automatically, as long as there are some transaction numbers in the wallet. (Call <a class="el" href="class_o_t_a_p_i___exec.html#a89358c9cc2fa0dcfff007c3bcbc2ed5c">getTransactionNumber()</a> if your wallet needs more.)</p>
<p>VALID_FROM, VALID_TO, // Valid date range (in seconds since Jan 1970...)</p>
<p>ACCOUNT_ID, USER_ID, // User ID and Acct ID for SENDER.</p>
<p>CHEQUE_MEMO, // The memo for the cheque. (Can be empty or be NULL.)</p>
<p>RECIPIENT_USER_ID); // Recipient User ID is optional. (You can use an empty string here, to write a blank cheque, or pass NULL.) </p>

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html#l04727">4727</a> of file <a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (SERVER_ID.empty())          { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SERVER_ID&quot;</span>          ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (0 == CHEQUE_AMOUNT)         { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;CHEQUE_AMOUNT&quot;</span>      ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (<a class="code" href="_o_t_common_8hpp.html#af4ca9fa2c7c290d647dd18de0a9ac25f">OT_TIME_ZERO</a> &gt; VALID_FROM)  { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;VALID_FROM&quot;</span>); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (<a class="code" href="_o_t_common_8hpp.html#af4ca9fa2c7c290d647dd18de0a9ac25f">OT_TIME_ZERO</a> &gt; VALID_TO)    { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;VALID_TO&quot;</span>); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (SENDER_ACCT_ID.empty())     { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SENDER_ACCT_ID&quot;</span>     ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (SENDER_USER_ID.empty())     { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Null: %s passed in!\n&quot;</span>, __FUNCTION__, <span class="stringliteral">&quot;SENDER_USER_ID&quot;</span>     ); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
<span class="comment">//  if (CHEQUE_MEMO.empty())        { OTLog::vError(&quot;%s: Null: %s passed in!\n&quot;, __FUNCTION__, &quot;CHEQUE_MEMO&quot;        ); OT_FAIL; } // optional</span>
<span class="comment">//  if (RECIPIENT_USER_ID.empty())  { OTLog::vError(&quot;%s: Null: %s passed in!\n&quot;, __FUNCTION__, &quot;RECIPIENT_USER_ID&quot;  ); OT_FAIL; } // optional</span>

    <span class="keyword">const</span> int64_t lAmount = CHEQUE_AMOUNT;
    <span class="keyword">const</span> <a class="code" href="_o_t_common_8hpp.html#ad28ff0a3eda18840f6bda5872819167f">time64_t</a>  time_From = <span class="keyword">static_cast&lt;</span><a class="code" href="_o_t_common_8hpp.html#ad28ff0a3eda18840f6bda5872819167f">time64_t</a><span class="keyword">&gt;</span>(VALID_FROM), time_To = static_cast&lt;time64_t&gt;(VALID_TO);

    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theServerID(SERVER_ID);
    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theSenderAcctID(SENDER_ACCT_ID);
    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theSenderUserID(SENDER_USER_ID);
          <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theRecipientUserID;
    <span class="keywordtype">bool</span>  bHasRecipient = !RECIPIENT_USER_ID.empty();
    <span class="keywordflow">if</span> (bHasRecipient)
        theRecipientUserID.<a class="code" href="class_o_t_identifier.html#ae29aa1245d3831a207aabc9b8a493bfc">SetString</a>(RECIPIENT_USER_ID);
    <span class="comment">// ----------------------------------------------------</span>
    <a class="code" href="class_o_t_string.html">OTString</a> strMemo;

    <span class="keywordflow">if</span> (!CHEQUE_MEMO.empty())
        strMemo.<a class="code" href="class_o_t_string.html#aa5db620fe8e60c849585d741975db991">Set</a>(CHEQUE_MEMO);

    <a class="code" href="class_o_t_cheque.html">OTCheque</a> * pCheque = <a class="code" href="class_o_t_a_p_i___exec.html#afc695435b4053950845879a9e6b95d4f">OTAPI</a>()-&gt;<a class="code" href="class_o_t___a_p_i.html#a504e99bac03c227bbecb79f869a76578">WriteCheque</a>(theServerID,
        static_cast&lt;int64_t&gt;(lAmount),
        time_From, time_To,
        theSenderAcctID,
        theSenderUserID,
        strMemo,
        bHasRecipient ? &amp;(theRecipientUserID) : NULL);

    <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTCheque&gt;</a> theChequeAngel(pCheque); <span class="comment">// Handles cleanup. (If necessary.)</span>

    <span class="keywordflow">if</span> (NULL == pCheque)
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: OT_API::WriteCheque failed.\n&quot;</span>,__FUNCTION__);
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    }
    <span class="comment">// ------------------------------------------------</span>
    <span class="comment">// At this point, I know pCheque is good (and will be cleaned up automatically.)</span>

    <a class="code" href="class_o_t_string.html">OTString</a> strCheque(*pCheque); <span class="comment">// Extract the cheque to string form.</span>

    std::string pBuf = strCheque.Get();

    <span class="keywordflow">return</span> pBuf;
}
</pre></div>
</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="a9faaa894d65345064dddada36d292b46"></a><!-- doxytag: member="OTAPI_Exec::bCleanupOTApp" ref="a9faaa894d65345064dddada36d292b46" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_a_p_i___exec.html#a9faaa894d65345064dddada36d292b46">OTAPI_Exec::bCleanupOTApp</a> = false<code> [static, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8hpp_source.html#l00180">180</a> of file <a class="el" href="_o_t_a_p_i___exec_8hpp_source.html">OTAPI_Exec.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a908efdafde9c9738835069849c1e05ae"></a><!-- doxytag: member="OTAPI_Exec::bInitOTApp" ref="a908efdafde9c9738835069849c1e05ae" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_a_p_i___exec.html#a908efdafde9c9738835069849c1e05ae">OTAPI_Exec::bInitOTApp</a> = false<code> [static, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8hpp_source.html#l00179">179</a> of file <a class="el" href="_o_t_a_p_i___exec_8hpp_source.html">OTAPI_Exec.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a4a454ed385391e993ec5ebf323a54063"></a><!-- doxytag: member="OTAPI_Exec::p_OTAPI" ref="a4a454ed385391e993ec5ebf323a54063" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t___a_p_i.html">OT_API</a>* <a class="el" href="class_o_t_a_p_i___exec.html#a4a454ed385391e993ec5ebf323a54063">OTAPI_Exec::p_OTAPI</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_a_p_i___exec_8hpp_source.html#l00182">182</a> of file <a class="el" href="_o_t_a_p_i___exec_8hpp_source.html">OTAPI_Exec.hpp</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>include/otapi/<a class="el" href="_o_t_a_p_i___exec_8hpp_source.html">OTAPI_Exec.hpp</a></li>
<li>src/otapi/<a class="el" href="_o_t_a_p_i___exec_8cpp_source.html">OTAPI_Exec.cpp</a></li>
</ul>
</div><!-- contents -->
</div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="class_o_t_a_p_i___exec.html">OTAPI_Exec</a>      </li>

    <li class="footer">Generated on Wed May 21 2014 11:26:10 for Open-Transactions by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.6.1 </li>
   </ul>
 </div>


</body>
</html>
