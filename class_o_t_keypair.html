<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Open-Transactions: OTKeypair Class Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Open-Transactions
   &#160;<span id="projectnumber">master/1066fb4910a63ee3f7de8e0807fee3eb663b66c7</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('class_o_t_keypair.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#friends">Friends</a>  </div>
  <div class="headertitle">
<div class="title">OTKeypair Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<!-- doxytag: class="OTKeypair" -->
<p><code>#include &lt;<a class="el" href="_o_t_keypair_8hpp_source.html">OTKeypair.hpp</a>&gt;</code></p>

<p><a href="class_o_t_keypair-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_keypair.html#aade0cd755f82672f25d1971dd59db688">MakeNewKeypair</a> (int32_t nBits=1024)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_keypair.html#a419824f89809a794dec17b4a4d35f84e">ReEncrypt</a> (<a class="el" href="class_o_t_password.html">OTPassword</a> &amp;theExportPassword, bool bImporting, <a class="el" href="class_o_t_string.html">OTString</a> &amp;strOutput)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_keypair.html#a9dbda6c4a4863b5768f8167bf41749f9">HasPublicKey</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_keypair.html#a47869a3947c52895cd1a60d528e34440">HasPrivateKey</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT const <a class="el" href="class_o_t_asymmetric_key.html">OTAsymmetricKey</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_keypair.html#a67aebd0a39826bbc429bb2676fde9fcd">GetPublicKey</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT const <a class="el" href="class_o_t_asymmetric_key.html">OTAsymmetricKey</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_keypair.html#af81de69986e6aa2404fce47311871902">GetPrivateKey</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_keypair.html#abaedcf0bc34c23c733be8a84371ef27f">CalculateID</a> (<a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;theOutput) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_keypair.html#a59de77c54e52bfffc9acc97bbad772a2">SaveCertToString</a> (<a class="el" href="class_o_t_string.html">OTString</a> &amp;strOutput, const <a class="el" href="class_o_t_string.html">OTString</a> *pstrReason=NULL, <a class="el" href="class_o_t_password.html">OTPassword</a> *pImportPassword=NULL)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_keypair.html#aa567a26ab5ffb6adad6765f72bfb1f72">SavePrivateKeyToString</a> (<a class="el" href="class_o_t_string.html">OTString</a> &amp;strOutput, const <a class="el" href="class_o_t_string.html">OTString</a> *pstrReason=NULL, <a class="el" href="class_o_t_password.html">OTPassword</a> *pImportPassword=NULL)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_keypair.html#a856051cd5e93e30a8f166dd8132ed844">SaveCertAndPrivateKeyToString</a> (<a class="el" href="class_o_t_string.html">OTString</a> &amp;strOutput, const <a class="el" href="class_o_t_string.html">OTString</a> *pstrReason=NULL, <a class="el" href="class_o_t_password.html">OTPassword</a> *pImportPassword=NULL)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_keypair.html#a490c69739f011d0f99b7eb09634fa922">LoadPrivateKey</a> (const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strFoldername, const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strFilename, const <a class="el" href="class_o_t_string.html">OTString</a> *pstrReason=NULL, <a class="el" href="class_o_t_password.html">OTPassword</a> *pImportPassword=NULL)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_keypair.html#ad60512b79c736b2b84a40a87b5828e56">LoadPublicKey</a> (const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strFoldername, const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strFilename)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_keypair.html#a929d8d989c56858d29ed170fbd46c2f7">LoadPrivateKeyFromCertString</a> (const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strCert, bool bEscaped=true, const <a class="el" href="class_o_t_string.html">OTString</a> *pstrReason=NULL, <a class="el" href="class_o_t_password.html">OTPassword</a> *pImportPassword=NULL)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_keypair.html#af013da535649676fbb039b19cdf5ac01">LoadPublicKeyFromCertString</a> (const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strCert, bool bEscaped=true, const <a class="el" href="class_o_t_string.html">OTString</a> *pstrReason=NULL, <a class="el" href="class_o_t_password.html">OTPassword</a> *pImportPassword=NULL)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_keypair.html#a28da00c3dfee5c577464916f0df90c52">LoadPublicKeyFromCertFile</a> (const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strFoldername, const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strFilename, const <a class="el" href="class_o_t_string.html">OTString</a> *pstrReason=NULL, <a class="el" href="class_o_t_password.html">OTPassword</a> *pImportPassword=NULL)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_keypair.html#a0b684d7b641792b07e5b75c3c482ca09">LoadCertAndPrivateKeyFromString</a> (const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strInput, const <a class="el" href="class_o_t_string.html">OTString</a> *pstrReason=NULL, <a class="el" href="class_o_t_password.html">OTPassword</a> *pImportPassword=NULL)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_keypair.html#a05bdbf56aa6c0c58331cb79a7dd59ca4">LoadBothKeysFromCertFile</a> (const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strFoldername, const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strFilename, const <a class="el" href="class_o_t_string.html">OTString</a> *pstrReason=NULL, <a class="el" href="class_o_t_password.html">OTPassword</a> *pImportPassword=NULL)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_keypair.html#af431803f4f3e6635d4ecf71c211b2873">SaveAndReloadBothKeysFromTempFile</a> (<a class="el" href="class_o_t_string.html">OTString</a> *pstrOutputCert=NULL, const <a class="el" href="class_o_t_string.html">OTString</a> *pstrReason=NULL, <a class="el" href="class_o_t_password.html">OTPassword</a> *pImportPassword=NULL)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_keypair.html#a1bea3a98ad8470b33c57d8790ca62d8d">GetPublicKey</a> (<a class="el" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> &amp;strKey) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_keypair.html#a29a111b87a9ebbb5587fe2a4504b13e4">GetPublicKey</a> (<a class="el" href="class_o_t_string.html">OTString</a> &amp;strKey, bool bEscaped=true) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_keypair.html#ad6f380447668e4d9b5180e88fe257045">SetPublicKey</a> (const <a class="el" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> &amp;strKey)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_keypair.html#a404cd42ec39e5925cbe45529f049ac7c">SetPublicKey</a> (const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strKey, bool bEscaped=false)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_keypair.html#a5edaecda56fa9b5166d6814eda13d8b4">GetPrivateKey</a> (<a class="el" href="class_o_t_string.html">OTString</a> &amp;strKey, bool bEscaped=true) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_keypair.html#a728bead0366c0e321ba5f63e7cf8c3fd">GetPrivateKey</a> (<a class="el" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> &amp;strKey) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_keypair.html#a3b1ee76bc280c8f19f2f8f3a882263ff">SetPrivateKey</a> (const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strKey, bool bEscaped=false)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_keypair.html#acd58620775b5f903461a6588c99b4a13">SetPrivateKey</a> (const <a class="el" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> &amp;strKey)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_keypair.html#a59fc9eeb553ebced164c0bda3a7789fc">SignContract</a> (<a class="el" href="class_o_t_contract.html">OTContract</a> &amp;theContract, <a class="el" href="class_o_t_password_data.html">OTPasswordData</a> *pPWData=NULL)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_keypair.html#a5b3981ab58f514f8b56cbd8e648f5d27">SetMetadata</a> (const <a class="el" href="class_o_t_signature_metadata.html">OTSignatureMetadata</a> &amp;theMetadata)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_keypair.html#ae735cba959b6d91b069cc71741adbb4c">GetPublicKeyBySignature</a> (<a class="el" href="_o_t_asymmetric_key_8hpp.html#ada6127549a4970b60a8939215dd89ddb">listOfAsymmetricKeys</a> &amp;listOutput, const <a class="el" href="class_o_t_signature.html">OTSignature</a> &amp;theSignature, bool bInclusive=false) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_keypair.html#a8215b65170c5557abb52671c38b1f76e">OTKeypair</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_keypair.html#aa2bcf3b8bd40186160ec723f6e6deb78">~OTKeypair</a> ()</td></tr>
<tr><td colspan="2"><h2><a name="friends"></a>
Friends</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_keypair.html#aea75e350ce59a0252a374c34873d6477">OTLowLevelKeyData</a></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock">
<p>Definition at line <a class="el" href="_o_t_keypair_8hpp_source.html#l00188">188</a> of file <a class="el" href="_o_t_keypair_8hpp_source.html">OTKeypair.hpp</a>.</p>
</div><hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a8215b65170c5557abb52671c38b1f76e"></a><!-- doxytag: member="OTKeypair::OTKeypair" ref="a8215b65170c5557abb52671c38b1f76e" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_keypair.html#a8215b65170c5557abb52671c38b1f76e">OTKeypair::OTKeypair</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_keypair_8cpp_source.html#l00180">180</a> of file <a class="el" href="_o_t_keypair_8cpp_source.html">OTKeypair.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                     :
    m_pkeyPublic (<a class="code" href="class_o_t_asymmetric_key.html#a4437342fa5841152e2dfa6ee48a69094">OTAsymmetricKey::KeyFactory</a>()),
    m_pkeyPrivate(<a class="code" href="class_o_t_asymmetric_key.html#a4437342fa5841152e2dfa6ee48a69094">OTAsymmetricKey::KeyFactory</a>())
{
    
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa2bcf3b8bd40186160ec723f6e6deb78"></a><!-- doxytag: member="OTKeypair::~OTKeypair" ref="aa2bcf3b8bd40186160ec723f6e6deb78" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_keypair.html#aa2bcf3b8bd40186160ec723f6e6deb78">OTKeypair::~OTKeypair</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_keypair_8cpp_source.html#l00188">188</a> of file <a class="el" href="_o_t_keypair_8cpp_source.html">OTKeypair.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// -----------------------------</span>
    <span class="keywordflow">if</span> (NULL != m_pkeyPublic)
        <span class="keyword">delete</span> m_pkeyPublic; <span class="comment">// todo: else error</span>
    m_pkeyPublic    = NULL;
    <span class="comment">// -----------------------------</span>
    <span class="keywordflow">if</span> (NULL != m_pkeyPrivate)
        <span class="keyword">delete</span> m_pkeyPrivate; <span class="comment">// todo: else error</span>
    m_pkeyPrivate   = NULL;
    <span class="comment">// -----------------------------</span>
}
</pre></div>
</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="abaedcf0bc34c23c733be8a84371ef27f"></a><!-- doxytag: member="OTKeypair::CalculateID" ref="abaedcf0bc34c23c733be8a84371ef27f" args="(OTIdentifier &amp;theOutput) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_keypair.html#abaedcf0bc34c23c733be8a84371ef27f">OTKeypair::CalculateID</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;&#160;</td>
          <td class="paramname"><em>theOutput</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_keypair_8cpp_source.html#l00633">633</a> of file <a class="el" href="_o_t_keypair_8cpp_source.html">OTKeypair.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != m_pkeyPublic);
    <span class="comment">// ---------------------------------------------------------------</span>
    <span class="keywordflow">return</span> m_pkeyPublic-&gt;<a class="code" href="class_o_t_asymmetric_key.html#a16ddedee7b57fd7771142b56cecb2f57">CalculateID</a>(theOutput); <span class="comment">// Only works for public keys.</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="af81de69986e6aa2404fce47311871902"></a><!-- doxytag: member="OTKeypair::GetPrivateKey" ref="af81de69986e6aa2404fce47311871902" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="class_o_t_asymmetric_key.html">OTAsymmetricKey</a> &amp; <a class="el" href="class_o_t_keypair.html#af81de69986e6aa2404fce47311871902">OTKeypair::GetPrivateKey</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_keypair_8cpp_source.html#l00240">240</a> of file <a class="el" href="_o_t_keypair_8cpp_source.html">OTKeypair.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != m_pkeyPrivate);
    <span class="comment">// ---------------------------------------------------------------</span>
    <span class="keywordflow">return</span> (*m_pkeyPrivate);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a5edaecda56fa9b5166d6814eda13d8b4"></a><!-- doxytag: member="OTKeypair::GetPrivateKey" ref="a5edaecda56fa9b5166d6814eda13d8b4" args="(OTString &amp;strKey, bool bEscaped=true) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_keypair.html#af81de69986e6aa2404fce47311871902">OTKeypair::GetPrivateKey</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strKey</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>bEscaped</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_keypair_8cpp_source.html#l00569">569</a> of file <a class="el" href="_o_t_keypair_8cpp_source.html">OTKeypair.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != m_pkeyPrivate);
    <span class="comment">// ---------------------------------------------------------------</span>
    <span class="keywordflow">return</span> m_pkeyPrivate-&gt;<a class="code" href="class_o_t_asymmetric_key.html#a872b0df2c5e7a1d8878e062ccd7e1a6e">GetPrivateKey</a>(strKey, bEscaped);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a728bead0366c0e321ba5f63e7cf8c3fd"></a><!-- doxytag: member="OTKeypair::GetPrivateKey" ref="a728bead0366c0e321ba5f63e7cf8c3fd" args="(OTASCIIArmor &amp;strKey) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_keypair.html#af81de69986e6aa2404fce47311871902">OTKeypair::GetPrivateKey</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> &amp;&#160;</td>
          <td class="paramname"><em>strKey</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_keypair_8cpp_source.html#l00577">577</a> of file <a class="el" href="_o_t_keypair_8cpp_source.html">OTKeypair.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != m_pkeyPrivate);
    <span class="comment">// ---------------------------------------------------------------</span>
    <span class="keywordflow">return</span> m_pkeyPrivate-&gt;<a class="code" href="class_o_t_asymmetric_key.html#a872b0df2c5e7a1d8878e062ccd7e1a6e">GetPrivateKey</a>(strKey);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a67aebd0a39826bbc429bb2676fde9fcd"></a><!-- doxytag: member="OTKeypair::GetPublicKey" ref="a67aebd0a39826bbc429bb2676fde9fcd" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="class_o_t_asymmetric_key.html">OTAsymmetricKey</a> &amp; <a class="el" href="class_o_t_keypair.html#a67aebd0a39826bbc429bb2676fde9fcd">OTKeypair::GetPublicKey</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_keypair_8cpp_source.html#l00232">232</a> of file <a class="el" href="_o_t_keypair_8cpp_source.html">OTKeypair.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != m_pkeyPublic);
    <span class="comment">// ---------------------------------------------------------------</span>
    <span class="keywordflow">return</span> (*m_pkeyPublic);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a1bea3a98ad8470b33c57d8790ca62d8d"></a><!-- doxytag: member="OTKeypair::GetPublicKey" ref="a1bea3a98ad8470b33c57d8790ca62d8d" args="(OTASCIIArmor &amp;strKey) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_keypair.html#a67aebd0a39826bbc429bb2676fde9fcd">OTKeypair::GetPublicKey</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> &amp;&#160;</td>
          <td class="paramname"><em>strKey</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_keypair_8cpp_source.html#l00506">506</a> of file <a class="el" href="_o_t_keypair_8cpp_source.html">OTKeypair.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != m_pkeyPublic);
    <span class="comment">// ---------------------------------------------------------------</span>
    <span class="keywordflow">return</span> m_pkeyPublic-&gt;<a class="code" href="class_o_t_asymmetric_key.html#ab4eee84fb4faf0a374fa10f110853214">GetPublicKey</a>(strKey);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a29a111b87a9ebbb5587fe2a4504b13e4"></a><!-- doxytag: member="OTKeypair::GetPublicKey" ref="a29a111b87a9ebbb5587fe2a4504b13e4" args="(OTString &amp;strKey, bool bEscaped=true) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_keypair.html#a67aebd0a39826bbc429bb2676fde9fcd">OTKeypair::GetPublicKey</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strKey</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>bEscaped</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_keypair_8cpp_source.html#l00514">514</a> of file <a class="el" href="_o_t_keypair_8cpp_source.html">OTKeypair.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != m_pkeyPublic);
    <span class="comment">// ---------------------------------------------------------------</span>
    <span class="keywordflow">return</span> m_pkeyPublic-&gt;<a class="code" href="class_o_t_asymmetric_key.html#ab4eee84fb4faf0a374fa10f110853214">GetPublicKey</a>(strKey, bEscaped);
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae735cba959b6d91b069cc71741adbb4c"></a><!-- doxytag: member="OTKeypair::GetPublicKeyBySignature" ref="ae735cba959b6d91b069cc71741adbb4c" args="(listOfAsymmetricKeys &amp;listOutput, const OTSignature &amp;theSignature, bool bInclusive=false) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_keypair.html#ae735cba959b6d91b069cc71741adbb4c">OTKeypair::GetPublicKeyBySignature</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_o_t_asymmetric_key_8hpp.html#ada6127549a4970b60a8939215dd89ddb">listOfAsymmetricKeys</a> &amp;&#160;</td>
          <td class="paramname"><em>listOutput</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_signature.html">OTSignature</a> &amp;&#160;</td>
          <td class="paramname"><em>theSignature</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>bInclusive</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_keypair_8cpp_source.html#l00641">641</a> of file <a class="el" href="_o_t_keypair_8cpp_source.html">OTKeypair.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != m_pkeyPublic);
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != m_pkeyPublic-&gt;<a class="code" href="class_o_t_asymmetric_key.html#a071e09c59ab0b1460debd3c092da0034">m_pMetadata</a>);
    
    <span class="comment">// We know that EITHER exact metadata matches must occur, and the signature MUST have metadata, (bInclusive=false)</span>
    <span class="comment">// OR if bInclusive=true, we know that metadata is still used to eliminate keys where possible, but that otherwise,</span>
    <span class="comment">// if the signature has no metadata, then the key is still returned, &quot;just in case.&quot;</span>
    <span class="comment">//</span>
    <span class="keywordflow">if</span> ((<span class="keyword">false</span> == bInclusive) &amp;&amp; (<span class="keyword">false</span> == theSignature.<a class="code" href="class_o_t_signature.html#ab82c216636edf6583efa7e5344b3c6e0">m_metadata</a>.<a class="code" href="class_o_t_signature_metadata.html#a026c60514737f48d1dd2a0643d1d431f">HasMetadata</a>()))
        <span class="keywordflow">return</span> 0;
    <span class="comment">// -------------------------</span>
    <span class="comment">// Below this point, metadata is used if it&#39;s available.</span>
    <span class="comment">// It&#39;s assumed to be &quot;okay&quot; if it&#39;s not available, since any non-inclusive</span>
    <span class="comment">// calls would have already returned by now, if that were the case.</span>
    <span class="comment">// (But if it IS available, then it must match, or the key won&#39;t be returned.)</span>
    <span class="comment">//</span>
    <span class="keywordflow">if</span> ((<span class="keyword">false</span> == theSignature.<a class="code" href="class_o_t_signature.html#ab82c216636edf6583efa7e5344b3c6e0">m_metadata</a>.<a class="code" href="class_o_t_signature_metadata.html#a026c60514737f48d1dd2a0643d1d431f">HasMetadata</a>())    || <span class="comment">// If the signature has no metadata,</span>
        (<span class="keyword">false</span> == m_pkeyPublic-&gt;<a class="code" href="class_o_t_asymmetric_key.html#a071e09c59ab0b1460debd3c092da0034">m_pMetadata</a>-&gt;<a class="code" href="class_o_t_signature_metadata.html#a026c60514737f48d1dd2a0643d1d431f">HasMetadata</a>()) || <span class="comment">// Or if m_pkeyPublic has no metadata,</span>
        (m_pkeyPublic-&gt;<a class="code" href="class_o_t_asymmetric_key.html#a071e09c59ab0b1460debd3c092da0034">m_pMetadata</a>-&gt;<a class="code" href="class_o_t_signature_metadata.html#a026c60514737f48d1dd2a0643d1d431f">HasMetadata</a>() &amp;&amp;           <span class="comment">// OR if they BOTH have metadata, and</span>
         theSignature.<a class="code" href="class_o_t_signature.html#ab82c216636edf6583efa7e5344b3c6e0">m_metadata</a>.   HasMetadata() &amp;&amp;           <span class="comment">// their metadata is a MATCH...</span>
         (theSignature.<a class="code" href="class_o_t_signature.html#ab82c216636edf6583efa7e5344b3c6e0">m_metadata</a> == *(m_pkeyPublic-&gt;<a class="code" href="class_o_t_asymmetric_key.html#a071e09c59ab0b1460debd3c092da0034">m_pMetadata</a>)) ) )
    {
        <span class="comment">// ...Then add m_pkeyPublic as a possible match, to listOutput.</span>
        <span class="comment">//</span>
        listOutput.push_back(m_pkeyPublic);
        <span class="keywordflow">return</span> 1;
    }
    <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a47869a3947c52895cd1a60d528e34440"></a><!-- doxytag: member="OTKeypair::HasPrivateKey" ref="a47869a3947c52895cd1a60d528e34440" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_keypair.html#a47869a3947c52895cd1a60d528e34440">OTKeypair::HasPrivateKey</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_keypair_8cpp_source.html#l00224">224</a> of file <a class="el" href="_o_t_keypair_8cpp_source.html">OTKeypair.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != m_pkeyPrivate);
    <span class="comment">// ---------------------------------------------------------------</span>
    <span class="keywordflow">return</span> m_pkeyPrivate-&gt;<a class="code" href="class_o_t_asymmetric_key.html#a40da82b0005ea3c08531d8aaa3f41b28">IsPrivate</a>(); <span class="comment">// This means it actually has a private key in it, or tried to.</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="a9dbda6c4a4863b5768f8167bf41749f9"></a><!-- doxytag: member="OTKeypair::HasPublicKey" ref="a9dbda6c4a4863b5768f8167bf41749f9" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_keypair.html#a9dbda6c4a4863b5768f8167bf41749f9">OTKeypair::HasPublicKey</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_keypair_8cpp_source.html#l00216">216</a> of file <a class="el" href="_o_t_keypair_8cpp_source.html">OTKeypair.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != m_pkeyPublic);
    <span class="comment">// ---------------------------------------------------------------</span>
    <span class="keywordflow">return</span> m_pkeyPublic-&gt;<a class="code" href="class_o_t_asymmetric_key.html#a22a32d97edbacc280fcd45a76bd9cd60">IsPublic</a>(); <span class="comment">// This means it actually has a public key in it, or tried to.</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="a05bdbf56aa6c0c58331cb79a7dd59ca4"></a><!-- doxytag: member="OTKeypair::LoadBothKeysFromCertFile" ref="a05bdbf56aa6c0c58331cb79a7dd59ca4" args="(const OTString &amp;strFoldername, const OTString &amp;strFilename, const OTString *pstrReason=NULL, OTPassword *pImportPassword=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_keypair.html#a05bdbf56aa6c0c58331cb79a7dd59ca4">OTKeypair::LoadBothKeysFromCertFile</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strFoldername</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strFilename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> *&#160;</td>
          <td class="paramname"><em>pstrReason</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_password.html">OTPassword</a> *&#160;</td>
          <td class="paramname"><em>pImportPassword</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_keypair_8cpp_source.html#l00446">446</a> of file <a class="el" href="_o_t_keypair_8cpp_source.html">OTKeypair.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keyword">const</span> <span class="keywordtype">char</span> * szFunc = <span class="stringliteral">&quot;OTKeypair::LoadBothKeysFromCertFile&quot;</span>;
    <span class="comment">// -------------------------------------</span>
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != m_pkeyPublic);
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != m_pkeyPrivate);
    <span class="comment">// ---------------------------------------------------------------</span>
    <span class="keywordtype">bool</span> bPublic  = <span class="keyword">false</span>;
    <span class="keywordtype">bool</span> bPrivate = <span class="keyword">false</span>;
    
    bPublic  = m_pkeyPublic-&gt; <a class="code" href="class_o_t_keypair.html#a28da00c3dfee5c577464916f0df90c52">LoadPublicKeyFromCertFile</a> (strFoldername.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(), strFilename.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(),
                                                         pstrReason, pImportPassword);
    bPrivate = m_pkeyPrivate-&gt;<a class="code" href="class_o_t_asymmetric_key.html#a4c337637abe6e0ec1a1083b4e4712785">LoadPrivateKey</a>            (strFoldername.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(), strFilename.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(),
                                                         pstrReason, pImportPassword);
    <span class="keywordflow">if</span> (!bPublic)
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Although the ascii-armored file (%s) was read, LoadPublicKeyFromCert &quot;</span>
                      <span class="stringliteral">&quot;returned false.\n&quot;</span>, szFunc, strFilename.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="keywordflow">else</span>
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(2, <span class="stringliteral">&quot;%s: Successfully loaded public key from Certfile: %s\n&quot;</span>,
                       szFunc, strFilename.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
    }
    <span class="comment">// -----------------</span>
    <span class="keywordflow">if</span> (!bPrivate)
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Although the ascii-armored file (%s) was read, LoadPrivateKey returned false.\n&quot;</span>,
                      szFunc, strFilename.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="keywordflow">else</span>
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(2, <span class="stringliteral">&quot;%s: Successfully loaded private key from certfile: %s\n&quot;</span>,
                       szFunc, strFilename.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
    }
    <span class="comment">// -----------------------------------------</span>
    <span class="keywordflow">return</span> <span class="keyword">true</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a0b684d7b641792b07e5b75c3c482ca09"></a><!-- doxytag: member="OTKeypair::LoadCertAndPrivateKeyFromString" ref="a0b684d7b641792b07e5b75c3c482ca09" args="(const OTString &amp;strInput, const OTString *pstrReason=NULL, OTPassword *pImportPassword=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_keypair.html#a0b684d7b641792b07e5b75c3c482ca09">OTKeypair::LoadCertAndPrivateKeyFromString</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strInput</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> *&#160;</td>
          <td class="paramname"><em>pstrReason</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_password.html">OTPassword</a> *&#160;</td>
          <td class="paramname"><em>pImportPassword</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_keypair_8cpp_source.html#l00292">292</a> of file <a class="el" href="_o_t_keypair_8cpp_source.html">OTKeypair.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// ---------------------------------------------------------------</span>
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(strInput.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>());
    <span class="comment">// ---------------------------------------------------------------</span>
    <span class="comment">// &quot;escaped&quot; means pre-pended with &quot;- &quot; as in:   - -----BEGIN CER....</span>
    <span class="comment">//</span>
    <span class="keyword">const</span> <span class="keywordtype">bool</span> bPublic  = this-&gt;<a class="code" href="class_o_t_keypair.html#af013da535649676fbb039b19cdf5ac01">LoadPublicKeyFromCertString</a> (strInput,   <span class="keyword">false</span>,  <span class="comment">//bool bEscaped=true by default</span>
                                                             pstrReason, pImportPassword);
    <span class="keyword">const</span> <span class="keywordtype">bool</span> bPrivate = this-&gt;<a class="code" href="class_o_t_keypair.html#a929d8d989c56858d29ed170fbd46c2f7">LoadPrivateKeyFromCertString</a>(strInput,   <span class="keyword">false</span>,  <span class="comment">//bool bEscaped=true by default,</span>
                                                             pstrReason, pImportPassword);
    <span class="keywordflow">if</span> (!bPublic)
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Although the input string apparently exists, &quot;</span>
                      <span class="stringliteral">&quot;LoadPublicKeyFromCertString returned false.\n&quot;</span>, __FUNCTION__);
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="keywordflow">else</span>
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(2, <span class="stringliteral">&quot;%s: Successfully loaded public key from string.\n&quot;</span>,
                       __FUNCTION__);
    }
    <span class="comment">// ----------------</span>
    <span class="keywordflow">if</span> (!bPrivate)
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Although the input string apparently exists, &quot;</span>
                      <span class="stringliteral">&quot;LoadPrivateKeyFromCertString returned false.\n&quot;</span>, __FUNCTION__);
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="keywordflow">else</span>
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(2, <span class="stringliteral">&quot;%s: Successfully loaded private key from string.\n&quot;</span>, __FUNCTION__);
    }
    <span class="comment">// ----------------</span>
    <span class="keywordflow">return</span> <span class="keyword">true</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a490c69739f011d0f99b7eb09634fa922"></a><!-- doxytag: member="OTKeypair::LoadPrivateKey" ref="a490c69739f011d0f99b7eb09634fa922" args="(const OTString &amp;strFoldername, const OTString &amp;strFilename, const OTString *pstrReason=NULL, OTPassword *pImportPassword=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_keypair.html#a490c69739f011d0f99b7eb09634fa922">OTKeypair::LoadPrivateKey</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strFoldername</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strFilename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> *&#160;</td>
          <td class="paramname"><em>pstrReason</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_password.html">OTPassword</a> *&#160;</td>
          <td class="paramname"><em>pImportPassword</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_keypair_8cpp_source.html#l00364">364</a> of file <a class="el" href="_o_t_keypair_8cpp_source.html">OTKeypair.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != m_pkeyPrivate);
    <span class="comment">// ---------------------------------------------------------------</span>
    <span class="keywordflow">return</span> m_pkeyPrivate-&gt;<a class="code" href="class_o_t_asymmetric_key.html#a4c337637abe6e0ec1a1083b4e4712785">LoadPrivateKey</a>(strFoldername, strFilename, pstrReason, pImportPassword);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a929d8d989c56858d29ed170fbd46c2f7"></a><!-- doxytag: member="OTKeypair::LoadPrivateKeyFromCertString" ref="a929d8d989c56858d29ed170fbd46c2f7" args="(const OTString &amp;strCert, bool bEscaped=true, const OTString *pstrReason=NULL, OTPassword *pImportPassword=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_keypair.html#a929d8d989c56858d29ed170fbd46c2f7">OTKeypair::LoadPrivateKeyFromCertString</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strCert</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>bEscaped</em> = <code>true</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> *&#160;</td>
          <td class="paramname"><em>pstrReason</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_password.html">OTPassword</a> *&#160;</td>
          <td class="paramname"><em>pImportPassword</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_keypair_8cpp_source.html#l00386">386</a> of file <a class="el" href="_o_t_keypair_8cpp_source.html">OTKeypair.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != m_pkeyPrivate);
    <span class="comment">// ---------------------------------------------------------------</span>
    <span class="keywordflow">return</span> m_pkeyPrivate-&gt;<a class="code" href="class_o_t_asymmetric_key.html#ad073c7e52b61e491a664a44defc2e9d8">LoadPrivateKeyFromCertString</a>(strCert, bEscaped, pstrReason, pImportPassword);
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad60512b79c736b2b84a40a87b5828e56"></a><!-- doxytag: member="OTKeypair::LoadPublicKey" ref="ad60512b79c736b2b84a40a87b5828e56" args="(const OTString &amp;strFoldername, const OTString &amp;strFilename)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_keypair.html#ad60512b79c736b2b84a40a87b5828e56">OTKeypair::LoadPublicKey</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strFoldername</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strFilename</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_keypair_8cpp_source.html#l00373">373</a> of file <a class="el" href="_o_t_keypair_8cpp_source.html">OTKeypair.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != m_pkeyPublic);
    <span class="comment">// ---------------------------------------------------------------</span>
    <span class="keywordflow">return</span> m_pkeyPublic-&gt;<a class="code" href="class_o_t_asymmetric_key.html#a5ef7ec49f5bb33874cb3c432ec97796d">LoadPublicKey</a>(strFoldername, strFilename);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a28da00c3dfee5c577464916f0df90c52"></a><!-- doxytag: member="OTKeypair::LoadPublicKeyFromCertFile" ref="a28da00c3dfee5c577464916f0df90c52" args="(const OTString &amp;strFoldername, const OTString &amp;strFilename, const OTString *pstrReason=NULL, OTPassword *pImportPassword=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_keypair.html#a28da00c3dfee5c577464916f0df90c52">OTKeypair::LoadPublicKeyFromCertFile</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strFoldername</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strFilename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> *&#160;</td>
          <td class="paramname"><em>pstrReason</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_password.html">OTPassword</a> *&#160;</td>
          <td class="paramname"><em>pImportPassword</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_keypair_8cpp_source.html#l00409">409</a> of file <a class="el" href="_o_t_keypair_8cpp_source.html">OTKeypair.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != m_pkeyPublic);
    <span class="comment">// ---------------------------------------------------------------</span>
    <span class="keywordflow">return</span> m_pkeyPublic-&gt;<a class="code" href="class_o_t_asymmetric_key.html#a7edde863933c25a20233acfd7d7f0b03">LoadPublicKeyFromCertFile</a>(strFoldername, strFilename, pstrReason, pImportPassword);
}
</pre></div>
</div>
</div>
<a class="anchor" id="af013da535649676fbb039b19cdf5ac01"></a><!-- doxytag: member="OTKeypair::LoadPublicKeyFromCertString" ref="af013da535649676fbb039b19cdf5ac01" args="(const OTString &amp;strCert, bool bEscaped=true, const OTString *pstrReason=NULL, OTPassword *pImportPassword=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_keypair.html#af013da535649676fbb039b19cdf5ac01">OTKeypair::LoadPublicKeyFromCertString</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strCert</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>bEscaped</em> = <code>true</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> *&#160;</td>
          <td class="paramname"><em>pstrReason</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_password.html">OTPassword</a> *&#160;</td>
          <td class="paramname"><em>pImportPassword</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_keypair_8cpp_source.html#l00399">399</a> of file <a class="el" href="_o_t_keypair_8cpp_source.html">OTKeypair.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != m_pkeyPublic);
    <span class="comment">// ---------------------------------------------------------------</span>
    <span class="keywordflow">return</span> m_pkeyPublic-&gt;<a class="code" href="class_o_t_asymmetric_key.html#a2a38f9a40d7476120584fe69d9b60f0a">LoadPublicKeyFromCertString</a>(strCert, bEscaped, pstrReason, pImportPassword);
}
</pre></div>
</div>
</div>
<a class="anchor" id="aade0cd755f82672f25d1971dd59db688"></a><!-- doxytag: member="OTKeypair::MakeNewKeypair" ref="aade0cd755f82672f25d1971dd59db688" args="(int32_t nBits=1024)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_keypair.html#aade0cd755f82672f25d1971dd59db688">OTKeypair::MakeNewKeypair</a> </td>
          <td>(</td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>nBits</em> = <code>1024</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_keypair_8cpp_source.html#l00420">420</a> of file <a class="el" href="_o_t_keypair_8cpp_source.html">OTKeypair.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keyword">const</span> <span class="keywordtype">char</span> * szFunc = <span class="stringliteral">&quot;OTKeypair::MakeNewKeypair&quot;</span>;
    <span class="comment">// ---------------------------------------------------------------</span>
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != m_pkeyPrivate);
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != m_pkeyPublic);
    <span class="comment">// ---------------------------------------------------------------</span>
    <a class="code" href="class_o_t_low_level_key_data.html">OTLowLevelKeyData</a> lowLevelData;
    
    <span class="keywordflow">if</span> (!lowLevelData.<a class="code" href="class_o_t_low_level_key_data.html#af6d1d6e0216fd95acd6544409c3a3e69">MakeNewKeypair</a>(nBits))
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Failed in a call to OTLowLevelKeyData::MakeNewKeypair(%d).\n&quot;</span>,
                      szFunc, nBits);
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// ---------------------------------------------------------------</span>
    <span class="keywordflow">return</span> lowLevelData.<a class="code" href="class_o_t_low_level_key_data.html#ad25a4748123304b4eca86d179214d785">SetOntoKeypair</a>(*<span class="keyword">this</span>);
    
    <span class="comment">// If true is returned:</span>
    <span class="comment">// Success! At this point, theKeypair&#39;s public and private keys have been set.</span>
    <span class="comment">// Keep in mind though, they still won&#39;t be &quot;quite right&quot; until saved and loaded</span>
    <span class="comment">// again, at least according to existing logic. That saving/reloading is currently</span>
    <span class="comment">// performed in OTPseudonym::GenerateNym().</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="a419824f89809a794dec17b4a4d35f84e"></a><!-- doxytag: member="OTKeypair::ReEncrypt" ref="a419824f89809a794dec17b4a4d35f84e" args="(OTPassword &amp;theExportPassword, bool bImporting, OTString &amp;strOutput)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_keypair.html#a419824f89809a794dec17b4a4d35f84e">OTKeypair::ReEncrypt</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_password.html">OTPassword</a> &amp;&#160;</td>
          <td class="paramname"><em>theExportPassword</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>bImporting</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strOutput</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_keypair_8cpp_source.html#l00676">676</a> of file <a class="el" href="_o_t_keypair_8cpp_source.html">OTKeypair.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// --------------------------------------</span>
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != m_pkeyPublic );
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != m_pkeyPrivate);
    <span class="comment">// --------------------------------------</span>
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(this-&gt;<a class="code" href="class_o_t_keypair.html#a9dbda6c4a4863b5768f8167bf41749f9">HasPublicKey</a>() );
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(this-&gt;<a class="code" href="class_o_t_keypair.html#a47869a3947c52895cd1a60d528e34440">HasPrivateKey</a>());
    <span class="comment">// --------------------------------------</span>
    <span class="comment">// If we were importing, we were in the exported format but now we&#39;re in the internal format.</span>
    <span class="comment">// Therefore we want to use the wallet&#39;s internal cached master passphrase to save. Therefore</span>
    <span class="comment">// strReason will be used for the import case.</span>
    <span class="comment">//</span>
    <span class="comment">// But if we were exporting, then we were in the internal format and just re-encrypted to the</span>
    <span class="comment">// export format. So we&#39;d want to pass the export passphrase when saving.</span>
    <span class="comment">//    </span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strReasonAbove(bImporting ?
                                  <span class="stringliteral">&quot;Enter the new export passphrase. (Above ReEncryptPrivateKey in OTKeypair::ReEncrypt)&quot;</span> :
                                  <span class="stringliteral">&quot;Enter your wallet&#39;s master passphrase. (Above ReEncryptPrivateKey in OTKeypair::ReEncrypt)&quot;</span>);

    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strReasonBelow(bImporting ?
                                  <span class="stringliteral">&quot;Enter your wallet&#39;s master passphrase. (Below ReEncryptPrivateKey in OTKeypair::ReEncrypt)&quot;</span> :
                                  <span class="stringliteral">&quot;Enter the new export passphrase. (Below ReEncryptPrivateKey in OTKeypair::ReEncrypt)&quot;</span>);
    <span class="comment">// --------------------------------------</span>
    <span class="comment">// At this point the public key was loaded from a public key, not a cert,</span>
    <span class="comment">// but the private key was loaded from the cert. Therefore we&#39;ll save the</span>
    <span class="comment">// public cert from the private key, and then use that to reload the public</span>
    <span class="comment">// key after ReEncrypting. (Otherwise the public key would be there, but it</span>
    <span class="comment">// would be missing the x509, which is only available in the cert, not the</span>
    <span class="comment">// pubkey alone -- and without the x509 being there, the &quot;SaveAndReload&quot; call</span>
    <span class="comment">// below would fail.</span>
    <span class="comment">// Why don&#39;t I just stick the Cert itself into the public data, instead of</span>
    <span class="comment">// sticking the public key in there? Because not all key credentials will use</span>
    <span class="comment">// certs. Some will use pubkeys from certs, and some will use pubkeys not from</span>
    <span class="comment">// certs. But I might still just stick it in there, and code things to be able to</span>
    <span class="comment">// load either indiscriminately. After all, that&#39;s what I&#39;m doing already in the</span>
    <span class="comment">// asset and server contracts. But even in those cases, there will be times when</span>
    <span class="comment">// only a pubkey is available, not a cert, so I&#39;ll probably still find myself having</span>
    <span class="comment">// to do this. Hmm...</span>
    
    <span class="comment">// ---------------------------------------</span>
    
    <span class="keyword">const</span> <span class="keywordtype">bool</span> bReEncrypted = m_pkeyPrivate-&gt;<a class="code" href="class_o_t_asymmetric_key.html#a6f81f86ccb457f2e9a40a269d60fc39d">ReEncryptPrivateKey</a>(theExportPassword, bImporting); <span class="comment">// &lt;==== IMPORT or EXPORT occurs here.</span>
          <span class="keywordtype">bool</span> bGotCert = <span class="keyword">false</span>;
    
    <span class="keywordflow">if</span> (bReEncrypted)
    {
        <span class="comment">// ------------------------------------------------</span>
        <span class="comment">// Keys won&#39;t be right until this happens. Todo: eliminate this need.</span>
        bGotCert = this-&gt;<a class="code" href="class_o_t_keypair.html#af431803f4f3e6635d4ecf71c211b2873">SaveAndReloadBothKeysFromTempFile</a>(&amp;strOutput, &amp;strReasonBelow,
                                                           bImporting ? NULL : &amp;theExportPassword);
    }
    
    <span class="keyword">const</span> <span class="keywordtype">bool</span> bSuccess = (bReEncrypted &amp;&amp; bGotCert);
    <span class="comment">// --------------------------------------</span>
    <span class="keywordflow">if</span> (!bSuccess)
    {
        strOutput.<a class="code" href="class_o_t_string.html#abef4b21b2170468705c58d64212d7257">Release</a>();
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Failure, either when re-encrypting, or when subsequently retrieving &quot;</span>
                      <span class="stringliteral">&quot;the public/private keys. bImporting == %s\n&quot;</span>, __FUNCTION__,
                      bImporting ? <span class="stringliteral">&quot;true&quot;</span> : <span class="stringliteral">&quot;false&quot;</span>);
    }
    <span class="comment">// --------------------------------------</span>
    <span class="keywordflow">return</span> bSuccess;
}
</pre></div>
</div>
</div>
<a class="anchor" id="af431803f4f3e6635d4ecf71c211b2873"></a><!-- doxytag: member="OTKeypair::SaveAndReloadBothKeysFromTempFile" ref="af431803f4f3e6635d4ecf71c211b2873" args="(OTString *pstrOutputCert=NULL, const OTString *pstrReason=NULL, OTPassword *pImportPassword=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_keypair.html#af431803f4f3e6635d4ecf71c211b2873">OTKeypair::SaveAndReloadBothKeysFromTempFile</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_string.html">OTString</a> *&#160;</td>
          <td class="paramname"><em>pstrOutputCert</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> *&#160;</td>
          <td class="paramname"><em>pstrReason</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_password.html">OTPassword</a> *&#160;</td>
          <td class="paramname"><em>pImportPassword</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_keypair_8cpp_source.html#l00330">330</a> of file <a class="el" href="_o_t_keypair_8cpp_source.html">OTKeypair.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != m_pkeyPrivate);
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != m_pkeyPublic);
    <span class="comment">// ---------------------------------------------------------------</span>
    <a class="code" href="class_o_t_string.html">OTString</a>    strOutput;
    <span class="keyword">const</span> <span class="keywordtype">bool</span>  bSuccess   = this-&gt;<a class="code" href="class_o_t_keypair.html#a856051cd5e93e30a8f166dd8132ed844">SaveCertAndPrivateKeyToString</a>(strOutput, pstrReason, pImportPassword);
    <span class="comment">// ---------------------------------------</span>
    <span class="keywordflow">if</span> (bSuccess)
    {
        <span class="comment">// todo security. Revisit this part during security audit.</span>
        <span class="comment">//</span>
        <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strFilename(<span class="stringliteral">&quot;temp.nym&quot;</span>); <span class="comment">// todo stop hardcoding. Plus this maybe should select a random number too.</span>
        
        <span class="keywordflow">if</span> (<span class="keyword">false</span> == <a class="code" href="namespace_o_t_d_b.html#a7ec0a905bba2c1c8ba5b1e873e12eab4">OTDB::StorePlainString</a>(strOutput.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(), <a class="code" href="class_o_t_folders.html#a340bfd0a9302aa1f6436ebc365a391d7">OTFolders::Cert</a>().<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(), strFilename.Get())) <span class="comment">// temp.nym</span>
        {
            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Failure storing new cert in temp file: %s\n&quot;</span>, __FUNCTION__, strFilename.Get());
            <span class="keywordflow">return</span> <span class="keyword">false</span>;
        }
        <span class="comment">// ------------------------------------------</span>
        <span class="keywordflow">if</span> (<span class="keyword">false</span> == this-&gt;<a class="code" href="class_o_t_keypair.html#a05bdbf56aa6c0c58331cb79a7dd59ca4">LoadBothKeysFromCertFile</a>(<a class="code" href="class_o_t_folders.html#a340bfd0a9302aa1f6436ebc365a391d7">OTFolders::Cert</a>().Get(), strFilename, pstrReason, pImportPassword))
            <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">// LoadBothKeysFromCertFile already has error logs, no need to log twice at this point.</span>
        <span class="comment">// ------------------------------------------</span>
        <span class="keywordflow">if</span> (NULL != pstrOutputCert)
            pstrOutputCert-&gt;<a class="code" href="class_o_t_string.html#aa5db620fe8e60c849585d741975db991">Set</a>(strOutput); <span class="comment">// Success!</span>
    }
    
    <span class="keywordflow">return</span> bSuccess;   
}
</pre></div>
</div>
</div>
<a class="anchor" id="a856051cd5e93e30a8f166dd8132ed844"></a><!-- doxytag: member="OTKeypair::SaveCertAndPrivateKeyToString" ref="a856051cd5e93e30a8f166dd8132ed844" args="(OTString &amp;strOutput, const OTString *pstrReason=NULL, OTPassword *pImportPassword=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_keypair.html#a856051cd5e93e30a8f166dd8132ed844">OTKeypair::SaveCertAndPrivateKeyToString</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strOutput</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> *&#160;</td>
          <td class="paramname"><em>pstrReason</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_password.html">OTPassword</a> *&#160;</td>
          <td class="paramname"><em>pImportPassword</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_keypair_8cpp_source.html#l00278">278</a> of file <a class="el" href="_o_t_keypair_8cpp_source.html">OTKeypair.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_o_t_string.html">OTString</a> strCert, strPrivateKey;
    
    <span class="keyword">const</span> <span class="keywordtype">bool</span> bSaved1 = this-&gt;<a class="code" href="class_o_t_keypair.html#a59de77c54e52bfffc9acc97bbad772a2">SaveCertToString</a>      (strCert,       pstrReason, pImportPassword);
    <span class="keyword">const</span> <span class="keywordtype">bool</span> bSaved2 = this-&gt;<a class="code" href="class_o_t_keypair.html#aa567a26ab5ffb6adad6765f72bfb1f72">SavePrivateKeyToString</a>(strPrivateKey, pstrReason, pImportPassword);
    <span class="comment">// ---------------------------------------------------------------</span>
    <span class="keywordflow">if</span> (bSaved1 &amp;&amp; bSaved2)
        strOutput.<a class="code" href="class_o_t_string.html#af1c861f21033a1d583b3cb12f952422e">Format</a>(const_cast&lt;char*&gt;(<span class="stringliteral">&quot;%s%s&quot;</span>), strPrivateKey.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(), strCert.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
    
    <span class="keywordflow">return</span> (bSaved1 &amp;&amp; bSaved2);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a59de77c54e52bfffc9acc97bbad772a2"></a><!-- doxytag: member="OTKeypair::SaveCertToString" ref="a59de77c54e52bfffc9acc97bbad772a2" args="(OTString &amp;strOutput, const OTString *pstrReason=NULL, OTPassword *pImportPassword=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_keypair.html#a59de77c54e52bfffc9acc97bbad772a2">OTKeypair::SaveCertToString</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strOutput</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> *&#160;</td>
          <td class="paramname"><em>pstrReason</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_password.html">OTPassword</a> *&#160;</td>
          <td class="paramname"><em>pImportPassword</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_keypair_8cpp_source.html#l00248">248</a> of file <a class="el" href="_o_t_keypair_8cpp_source.html">OTKeypair.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != m_pkeyPublic);
    <span class="comment">// ---------------------------------------------------------------</span>
    <a class="code" href="class_o_t_string.html">OTString</a> strCert, strReason(NULL == pstrReason ? <span class="stringliteral">&quot;OTKeypair::SaveCertToString&quot;</span> : pstrReason-&gt;<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
    
    <span class="keyword">const</span> <span class="keywordtype">bool</span> bSaved = m_pkeyPublic-&gt;<a class="code" href="class_o_t_asymmetric_key.html#a7090b3da6224e9657809c033c1680b4b">SaveCertToString</a>(strCert, &amp;strReason, pImportPassword);
    <span class="comment">// ---------------------------------------------------------------</span>
    <span class="keywordflow">if</span> (bSaved)
        strOutput = strCert;
    
    <span class="keywordflow">return</span> bSaved;    
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa567a26ab5ffb6adad6765f72bfb1f72"></a><!-- doxytag: member="OTKeypair::SavePrivateKeyToString" ref="aa567a26ab5ffb6adad6765f72bfb1f72" args="(OTString &amp;strOutput, const OTString *pstrReason=NULL, OTPassword *pImportPassword=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_keypair.html#aa567a26ab5ffb6adad6765f72bfb1f72">OTKeypair::SavePrivateKeyToString</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strOutput</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> *&#160;</td>
          <td class="paramname"><em>pstrReason</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_password.html">OTPassword</a> *&#160;</td>
          <td class="paramname"><em>pImportPassword</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_keypair_8cpp_source.html#l00263">263</a> of file <a class="el" href="_o_t_keypair_8cpp_source.html">OTKeypair.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != m_pkeyPrivate);
    <span class="comment">// ---------------------------------------------------------------</span>
    <a class="code" href="class_o_t_string.html">OTString</a> strPrivateKey;
    
    <span class="keyword">const</span> <span class="keywordtype">bool</span> bSaved = m_pkeyPrivate-&gt;<a class="code" href="class_o_t_asymmetric_key.html#a0793ec27c04def4b0e8b2976a07aad1a">SavePrivateKeyToString</a>(strPrivateKey, pstrReason, pImportPassword);
    <span class="comment">// ---------------------------------------------------------------</span>
    <span class="keywordflow">if</span> (bSaved)
        strOutput = strPrivateKey;
    
    <span class="keywordflow">return</span> bSaved;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a5b3981ab58f514f8b56cbd8e648f5d27"></a><!-- doxytag: member="OTKeypair::SetMetadata" ref="a5b3981ab58f514f8b56cbd8e648f5d27" args="(const OTSignatureMetadata &amp;theMetadata)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_keypair.html#a5b3981ab58f514f8b56cbd8e648f5d27">OTKeypair::SetMetadata</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_signature_metadata.html">OTSignatureMetadata</a> &amp;&#160;</td>
          <td class="paramname"><em>theMetadata</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_keypair_8cpp_source.html#l00202">202</a> of file <a class="el" href="_o_t_keypair_8cpp_source.html">OTKeypair.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != m_pkeyPublic);
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != m_pkeyPrivate);
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != m_pkeyPublic-&gt; m_pMetadata);
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != m_pkeyPrivate-&gt;<a class="code" href="class_o_t_asymmetric_key.html#a071e09c59ab0b1460debd3c092da0034">m_pMetadata</a>);
    <span class="comment">// ------------------------------</span>
    <span class="comment">// Set it for both keys.</span>
    <span class="comment">//</span>
    *(m_pkeyPublic-&gt; m_pMetadata) = theMetadata;
    *(m_pkeyPrivate-&gt;<a class="code" href="class_o_t_asymmetric_key.html#a071e09c59ab0b1460debd3c092da0034">m_pMetadata</a>) = theMetadata;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a3b1ee76bc280c8f19f2f8f3a882263ff"></a><!-- doxytag: member="OTKeypair::SetPrivateKey" ref="a3b1ee76bc280c8f19f2f8f3a882263ff" args="(const OTString &amp;strKey, bool bEscaped=false)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_keypair.html#a3b1ee76bc280c8f19f2f8f3a882263ff">OTKeypair::SetPrivateKey</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strKey</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>bEscaped</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_keypair_8cpp_source.html#l00588">588</a> of file <a class="el" href="_o_t_keypair_8cpp_source.html">OTKeypair.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != m_pkeyPrivate);
    <span class="comment">// ---------------------------------------------------------------</span>
    <span class="keyword">const</span> <span class="keywordtype">char</span> * szOverride = <span class="stringliteral">&quot;PGP PRIVATE KEY&quot;</span>;

    <span class="keywordflow">if</span> (strKey.<a class="code" href="class_o_t_string.html#acb212b06102322aebb96090601794825">Contains</a>(szOverride))
    {
        <a class="code" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> theArmor;
        
        <span class="keywordflow">if</span> (theArmor.<a class="code" href="class_o_t_a_s_c_i_i_armor.html#a6b5c0069db88e2c884d213ea64d3bbe4">LoadFromString</a>(const_cast&lt;OTString &amp;&gt;(strKey), bEscaped,
                                    szOverride)) <span class="comment">// szOverride == &quot;PGP PRIVATE KEY&quot;</span>
        {
            <span class="comment">// This function expects that the bookends are already removed.</span>
            <span class="comment">// The ascii-armor loading code removes them and handles the escapes also.</span>
<span class="comment">//          return m_pkeyPrivate-&gt;LoadPrivateKeyFromPGPKey(theArmor);</span>
            <span class="comment">//</span>
            <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;OTKeypair::SetPrivateKey 1: Failure: PGP private keys are NOT YET SUPPORTED.\n\n&quot;</span>);
<span class="comment">//          OTLog::vOutput(0, &quot;OTKeypair::SetPrivateKey 1: Failure: PGP private keys are NOT YET SUPPORTED:\n\n%s\n\n&quot;,</span>
<span class="comment">//                           strKey.Get());</span>
            <span class="keywordflow">return</span> <span class="keyword">false</span>;
        }
        <span class="keywordflow">else</span> 
        {
            <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;OTKeypair::SetPrivateKey 2: Failure: PGP private keys are NOT YET SUPPORTED.\n\n&quot;</span>);
<span class="comment">//          OTLog::vOutput(0, &quot;OTKeypair::SetPrivateKey 2: Failure: PGP private keys are NOT YET SUPPORTED:\n\n%s\n\n&quot;,</span>
<span class="comment">//                           strKey.Get());</span>
            <span class="keywordflow">return</span> <span class="keyword">false</span>;
        }
    }
    <span class="keywordflow">else</span> <span class="comment">// the below function SetPrivateKey (in the return call) expects the</span>
         <span class="comment">// bookends to still be there, and it will handle removing them. (Unlike PGP code above.)</span>
        <span class="comment">//</span>
        <span class="keywordflow">return</span> m_pkeyPrivate-&gt;<a class="code" href="class_o_t_asymmetric_key.html#ab22e31cf5871684effc6191a2827bdd7">SetPrivateKey</a>(strKey, bEscaped);
}
</pre></div>
</div>
</div>
<a class="anchor" id="acd58620775b5f903461a6588c99b4a13"></a><!-- doxytag: member="OTKeypair::SetPrivateKey" ref="acd58620775b5f903461a6588c99b4a13" args="(const OTASCIIArmor &amp;strKey)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_keypair.html#a3b1ee76bc280c8f19f2f8f3a882263ff">OTKeypair::SetPrivateKey</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> &amp;&#160;</td>
          <td class="paramname"><em>strKey</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_keypair_8cpp_source.html#l00625">625</a> of file <a class="el" href="_o_t_keypair_8cpp_source.html">OTKeypair.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != m_pkeyPrivate);
    <span class="comment">// ---------------------------------------------------------------</span>
    <span class="keywordflow">return</span> m_pkeyPrivate-&gt;<a class="code" href="class_o_t_asymmetric_key.html#ab22e31cf5871684effc6191a2827bdd7">SetPrivateKey</a>(strKey);
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad6f380447668e4d9b5180e88fe257045"></a><!-- doxytag: member="OTKeypair::SetPublicKey" ref="ad6f380447668e4d9b5180e88fe257045" args="(const OTASCIIArmor &amp;strKey)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_keypair.html#ad6f380447668e4d9b5180e88fe257045">OTKeypair::SetPublicKey</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> &amp;&#160;</td>
          <td class="paramname"><em>strKey</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_keypair_8cpp_source.html#l00525">525</a> of file <a class="el" href="_o_t_keypair_8cpp_source.html">OTKeypair.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != m_pkeyPublic);
    <span class="comment">// ---------------------------------------------------------------</span>
    <span class="keywordflow">return</span> m_pkeyPublic-&gt;<a class="code" href="class_o_t_asymmetric_key.html#abe1f83bcc64a9f56406c4e145cd65651">SetPublicKey</a>(strKey);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a404cd42ec39e5925cbe45529f049ac7c"></a><!-- doxytag: member="OTKeypair::SetPublicKey" ref="a404cd42ec39e5925cbe45529f049ac7c" args="(const OTString &amp;strKey, bool bEscaped=false)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_keypair.html#ad6f380447668e4d9b5180e88fe257045">OTKeypair::SetPublicKey</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strKey</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>bEscaped</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_keypair_8cpp_source.html#l00537">537</a> of file <a class="el" href="_o_t_keypair_8cpp_source.html">OTKeypair.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != m_pkeyPublic);
    
    <span class="comment">// ---------------------------------------------------------------</span>
    <span class="keywordflow">if</span> (strKey.<a class="code" href="class_o_t_string.html#acb212b06102322aebb96090601794825">Contains</a>(<span class="stringliteral">&quot;PGP PUBLIC KEY&quot;</span>))
    {
        <a class="code" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> theArmor;
        
        <span class="keywordflow">if</span> (theArmor.<a class="code" href="class_o_t_a_s_c_i_i_armor.html#a6b5c0069db88e2c884d213ea64d3bbe4">LoadFromString</a>(const_cast&lt;OTString &amp;&gt;(strKey), bEscaped))
        {
            <span class="comment">// This function expects that the bookends are already removed.</span>
            <span class="comment">// The ascii-armor loading code removes them and handles the escapes also.</span>
            <span class="keywordflow">return</span> m_pkeyPublic-&gt;<a class="code" href="class_o_t_asymmetric_key.html#aef5421ede5b0a55b47ddeddafb22c7e5">LoadPublicKeyFromPGPKey</a>(theArmor);
        }
        <span class="keywordflow">else</span>
        {
            <a class="code" href="class_o_t_log.html#a1f7549d776ee919dcb6517f611ded015">OTLog::Output</a>(2, <span class="stringliteral">&quot;OTKeypair::SetPublicKey: Failed extracting PGP public key from ascii-armored text.\n&quot;</span>);
            <span class="keywordflow">return</span> <span class="keyword">false</span>;
        }
    }
    <span class="keywordflow">else</span> <span class="comment">// the below function SetPublicKey (in the return call) expects the</span>
        <span class="comment">// bookends to still be there, and it will handle removing them. (Unlike PGP code above.)</span>
        <span class="keywordflow">return</span> m_pkeyPublic-&gt;<a class="code" href="class_o_t_asymmetric_key.html#abe1f83bcc64a9f56406c4e145cd65651">SetPublicKey</a>(strKey, bEscaped);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a59fc9eeb553ebced164c0bda3a7789fc"></a><!-- doxytag: member="OTKeypair::SignContract" ref="a59fc9eeb553ebced164c0bda3a7789fc" args="(OTContract &amp;theContract, OTPasswordData *pPWData=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_keypair.html#a59fc9eeb553ebced164c0bda3a7789fc">OTKeypair::SignContract</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_contract.html">OTContract</a> &amp;&#160;</td>
          <td class="paramname"><em>theContract</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_password_data.html">OTPasswordData</a> *&#160;</td>
          <td class="paramname"><em>pPWData</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_keypair_8cpp_source.html#l00491">491</a> of file <a class="el" href="_o_t_keypair_8cpp_source.html">OTKeypair.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != m_pkeyPrivate);
    <span class="comment">// --------------------------------------------</span>
    <span class="keywordflow">return</span> theContract.<a class="code" href="class_o_t_contract.html#a6809f5b245c2ba7fdd757abd7a6e6133">SignWithKey</a>(*m_pkeyPrivate, pPWData);
}
</pre></div>
</div>
</div>
<hr/><h2>Friends And Related Function Documentation</h2>
<a class="anchor" id="aea75e350ce59a0252a374c34873d6477"></a><!-- doxytag: member="OTKeypair::OTLowLevelKeyData" ref="aea75e350ce59a0252a374c34873d6477" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">friend class <a class="el" href="class_o_t_low_level_key_data.html">OTLowLevelKeyData</a><code> [friend]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_keypair_8hpp_source.html#l00190">190</a> of file <a class="el" href="_o_t_keypair_8hpp_source.html">OTKeypair.hpp</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>include/otlib/<a class="el" href="_o_t_keypair_8hpp_source.html">OTKeypair.hpp</a></li>
<li>src/otlib/<a class="el" href="_o_t_keypair_8cpp_source.html">OTKeypair.cpp</a></li>
</ul>
</div><!-- contents -->
</div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="class_o_t_keypair.html">OTKeypair</a>      </li>

    <li class="footer">Generated on Wed May 21 2014 11:26:13 for Open-Transactions by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.6.1 </li>
   </ul>
 </div>


</body>
</html>
