<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Open-Transactions: OTToken Class Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Open-Transactions
   &#160;<span id="projectnumber">master/1066fb4910a63ee3f7de8e0807fee3eb663b66c7</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('class_o_t_token.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a>  </div>
  <div class="headertitle">
<div class="title">OTToken Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<!-- doxytag: class="OTToken" --><!-- doxytag: inherits="OTInstrument" -->
<p><code>#include &lt;<a class="el" href="_o_t_token_8hpp_source.html">OTToken.hpp</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for OTToken:</div>
<div class="dyncontent">
 <div class="center">
  <img src="class_o_t_token.png" usemap="#OTToken_map" alt=""/>
  <map id="OTToken_map" name="OTToken_map">
<area href="class_o_t_instrument.html" alt="OTInstrument" shape="rect" coords="0,112,86,136"/>
<area href="class_o_t_scriptable.html" alt="OTScriptable" shape="rect" coords="0,56,86,80"/>
<area href="class_o_t_contract.html" alt="OTContract" shape="rect" coords="0,0,86,24"/>
</map>
 </div></div>

<p><a href="class_o_t_token-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_token.html#ad0fb0c562a9e37fcdb561e56075672dd">tokenState</a> { <br/>
&#160;&#160;<a class="el" href="class_o_t_token.html#ad0fb0c562a9e37fcdb561e56075672dda7aa332ee22a810c02591b7d50a86263b">blankToken</a>, 
<a class="el" href="class_o_t_token.html#ad0fb0c562a9e37fcdb561e56075672dda791cacb01ee68d2917d9176dc862b4ec">protoToken</a>, 
<a class="el" href="class_o_t_token.html#ad0fb0c562a9e37fcdb561e56075672ddade23d1dd76bccd72a985f722f6ce74bd">signedToken</a>, 
<a class="el" href="class_o_t_token.html#ad0fb0c562a9e37fcdb561e56075672dda1596fd8aed4ab475660fbfca4f27427d">spendableToken</a>, 
<br/>
&#160;&#160;<a class="el" href="class_o_t_token.html#ad0fb0c562a9e37fcdb561e56075672ddac49e6ae0a44b874f2670773a47d1fc3c">verifiedToken</a>, 
<a class="el" href="class_o_t_token.html#ad0fb0c562a9e37fcdb561e56075672dda7db8f3ddd84b028c7231362536ab518e">errorToken</a>
<br/>
 }</td></tr>
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_token.html#a83cc84022464d496b4220f2844d68332">~OTToken</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_token.html#a923ed4bd7498f5f2d6bfafa12c01153d">Release_Token</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_token.html#a973344e50b0b1e8cab012a3a1dc54a0d">Release</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_token.html#ab089fa43a5066ec0387d319f22e98b69">ReleasePrototokens</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_token.html#a2863bbe79da29265b1274ddabd187f44">UpdateContents</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_token.html#a8666afcdee1f4cb0b45e278d7196d6db">SetSavePrivateKeys</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_token.html#aa661b16971fbca2e3b4a1c3452e4c030">ReassignOwnership</a> (<a class="el" href="class_o_t_nym__or___symmetric_key.html">OTNym_or_SymmetricKey</a> &amp;oldOwner, <a class="el" href="class_o_t_nym__or___symmetric_key.html">OTNym_or_SymmetricKey</a> &amp;newOwner)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const <a class="el" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_token.html#ac66cb04fd3053e8fa444010b59a89332">GetSpendable</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_token.html#a77bee79c2162e2b3e0ca64fa21739c3d">SetSpendable</a> (const <a class="el" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> &amp;theArmor)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_token.html#ac8ba8227c8762aeb4cccc3a9af39abbc">GetSpendableString</a> (<a class="el" href="class_o_t_nym__or___symmetric_key.html">OTNym_or_SymmetricKey</a> theOwner, <a class="el" href="class_o_t_string.html">OTString</a> &amp;theString) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_o_t_token.html#ad0fb0c562a9e37fcdb561e56075672dd">OTToken::tokenState</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_token.html#a0b7813d8f9c8564904a7efa3be0f5a7e">GetState</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_token.html#ad68798a37c37605745ae99475a942126">GetSeries</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_token.html#adda0500e68d514fdd08a2b6837400d2a">SetSeriesAndExpiration</a> (int32_t nSeries, <a class="el" href="_o_t_common_8hpp.html#ad28ff0a3eda18840f6bda5872819167f">time64_t</a> VALID_FROM, <a class="el" href="_o_t_common_8hpp.html#ad28ff0a3eda18840f6bda5872819167f">time64_t</a> VALID_TO)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_token.html#a088fd14cc04aabcf3fcd47a7028b461d">ProcessToken</a> (const <a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;theNym, <a class="el" href="class_o_t_mint.html">OTMint</a> &amp;theMint, <a class="el" href="class_o_t_token.html">OTToken</a> &amp;theRequest)=0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_token.html#ace3316371a1b6ff2fd8a6b35e0a0f820">VerifyToken</a> (<a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;theNotary, <a class="el" href="class_o_t_mint.html">OTMint</a> &amp;theMint)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_token.html#a63c87c3fe61440f554e37f3ad98b241b">IsTokenAlreadySpent</a> (<a class="el" href="class_o_t_string.html">OTString</a> &amp;theCleartextToken)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_token.html#a30331c0d3eb5a5a78e989dca54440b7d">RecordTokenAsSpent</a> (<a class="el" href="class_o_t_string.html">OTString</a> &amp;theCleartextToken)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_token.html#a0d086617307060980956b431c6b020c5">SetSignature</a> (const <a class="el" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> &amp;theSignature, int32_t nTokenIndex)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_token.html#a8773363e9dd7cca5ac00c44555961c0c">GetSignature</a> (<a class="el" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> &amp;theSignature) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_token.html#a4e17470c475313139d1ed975e6c26b5a">GetDenomination</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_token.html#a54332197c14671c10d0a0c6177b6339f">SetDenomination</a> (int64_t lVal)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_token.html#ac9f8ceac04a2856116ece83c4b6ddc2e">GetPrototoken</a> (<a class="el" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> &amp;ascPrototoken, int32_t nTokenIndex)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_token.html#a4b06088db3d33d54da293eca57045170">GetPrivatePrototoken</a> (<a class="el" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> &amp;ascPrototoken, int32_t nTokenIndex)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_token.html#a9774f03f56290413acff03b8ea428052">SaveContractWallet</a> (std::ofstream &amp;ofs)</td></tr>
<tr><td colspan="2"><h2><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static EXPORT const int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_token.html#aeb321df891285fe0a0f2aba3963f0f30">GetMinimumPrototokenCount</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static EXPORT <a class="el" href="class_o_t_token.html">OTToken</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_token.html#ac758de04ed60991098005a7ac9578d71">TokenFactory</a> (<a class="el" href="class_o_t_string.html">OTString</a> strInput)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static EXPORT <a class="el" href="class_o_t_token.html">OTToken</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_token.html#a051bef4d15a507ef1c7e3922aba9252d">TokenFactory</a> (<a class="el" href="class_o_t_string.html">OTString</a> strInput, const <a class="el" href="class_o_t_purse.html">OTPurse</a> &amp;thePurse)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static EXPORT <a class="el" href="class_o_t_token.html">OTToken</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_token.html#ac2f914c3ff3d07c9fd1150e507da0a42">TokenFactory</a> (<a class="el" href="class_o_t_string.html">OTString</a> strInput, const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;SERVER_ID, const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;ASSET_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static EXPORT <a class="el" href="class_o_t_token.html">OTToken</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_token.html#a4743b9502c620181569445d58fbdf826">LowLevelInstantiate</a> (const <a class="el" href="class_o_t_purse.html">OTPurse</a> &amp;thePurse)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static EXPORT <a class="el" href="class_o_t_token.html">OTToken</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_token.html#a192cbbd8eb8061e030cee661c32ce12b">LowLevelInstantiate</a> (const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strFirstLine)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static EXPORT <a class="el" href="class_o_t_token.html">OTToken</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_token.html#ad13f372e577783d36f8419468432d6f1">LowLevelInstantiate</a> (const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strFirstLine, const <a class="el" href="class_o_t_purse.html">OTPurse</a> &amp;thePurse)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static EXPORT <a class="el" href="class_o_t_token.html">OTToken</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_token.html#ae8064a8a4018e4ed13e5685b4cb1db27">LowLevelInstantiate</a> (const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strFirstLine, const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;SERVER_ID, const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;ASSET_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static EXPORT <a class="el" href="class_o_t_token.html">OTToken</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_token.html#ad661596f621b1b697f1e8328cdbc3683">InstantiateAndGenerateTokenRequest</a> (const <a class="el" href="class_o_t_purse.html">OTPurse</a> &amp;thePurse, const <a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;theNym, <a class="el" href="class_o_t_mint.html">OTMint</a> &amp;theMint, int64_t lDenomination, int32_t nTokenCount=<a class="el" href="class_o_t_token.html#aeb321df891285fe0a0f2aba3963f0f30">OTToken::GetMinimumPrototokenCount</a>())</td></tr>
<tr><td colspan="2"><h2><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_token.html#a1f672677602d84c0b435eeb960bd6107">ProcessXMLNode</a> (<a class="el" href="namespaceirr_1_1io.html#a1628edbb9d5d53f18c82d2a92b0ad27e">irr::io::IrrXMLReader</a> *&amp;xml)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_token.html#a42c06ba601cc8bc3558347f0666a60ca">InitToken</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_token.html#a346126e90c4cf017d695dd44f5d0d8e9">ChooseIndex</a> (const int32_t nIndex)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_token.html#add07693a09f4f5654d67806315f836dc">OTToken</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT <a class="el" href="class_o_t_token.html">OTToken</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_token.html#ad723b93a64ceebe45861dc3d62f02062">operator=</a> (const <a class="el" href="class_o_t_token.html">OTToken</a> &amp;rhs)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_token.html#a8cd5e36981c7dbb8c37c424495b9fc59">OTToken</a> (const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;SERVER_ID, const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;ASSET_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_token.html#aa514c9b26b6694893f60ff850bdba6c9">OTToken</a> (const <a class="el" href="class_o_t_purse.html">OTPurse</a> &amp;thePurse)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_token.html#af26688188271e0fbd5c452efbeb84df0">GenerateTokenRequest</a> (const <a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;theNym, <a class="el" href="class_o_t_mint.html">OTMint</a> &amp;theMint, int64_t lDenomination, int32_t nTokenCount=<a class="el" href="class_o_t_token.html#aeb321df891285fe0a0f2aba3963f0f30">OTToken::GetMinimumPrototokenCount</a>())=0</td></tr>
<tr><td colspan="2"><h2><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_token.html#a04d6c0d6812cb5b4ba5a9950f5fab251">m_bPasswordProtected</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_token.html#ac029e1035d9610f3f042a46877ccab64">m_ascSpendable</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_token.html#a01a0360eaceb37845f0b4f35256aaab3">m_Signature</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_token.html#ab60d3bcde176d6f5dff82dac58c4573c">m_lDenomination</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="_o_t_token_8hpp.html#a953c4fc4f20b141e33a3dc9a82d7d5cd">mapOfPrototokens</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_token.html#a3535301cfd5f293433150904c30b392e">m_mapPublic</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="_o_t_token_8hpp.html#a953c4fc4f20b141e33a3dc9a82d7d5cd">mapOfPrototokens</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_token.html#a912ee7462a62c21eb168e527474bb35a">m_mapPrivate</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_token.html#a1cc49ca8ea8914ae5bf2ad65a2c8fee0">m_nTokenCount</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_token.html#a7eac324070d47ee46a46d1a084f0676c">m_nChosenIndex</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_token.html#a3952d4ce82c81016a70a94f319be337d">m_nSeries</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_o_t_token.html#ad0fb0c562a9e37fcdb561e56075672dd">tokenState</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_token.html#abb3c86c043242862d2e3a6dacf9d1a08">m_State</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_token.html#a62b6a27bb859c163ce65a8c2df253335">m_bSavePrivateKeys</a></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock">
<p>Definition at line <a class="el" href="_o_t_token_8hpp_source.html#l00183">183</a> of file <a class="el" href="_o_t_token_8hpp_source.html">OTToken.hpp</a>.</p>
</div><hr/><h2>Member Enumeration Documentation</h2>
<a class="anchor" id="ad0fb0c562a9e37fcdb561e56075672dd"></a><!-- doxytag: member="OTToken::tokenState" ref="ad0fb0c562a9e37fcdb561e56075672dd" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="class_o_t_token.html#ad0fb0c562a9e37fcdb561e56075672dd">OTToken::tokenState</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="ad0fb0c562a9e37fcdb561e56075672dda7aa332ee22a810c02591b7d50a86263b"></a><!-- doxytag: member="blankToken" ref="ad0fb0c562a9e37fcdb561e56075672dda7aa332ee22a810c02591b7d50a86263b" args="" -->blankToken</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ad0fb0c562a9e37fcdb561e56075672dda791cacb01ee68d2917d9176dc862b4ec"></a><!-- doxytag: member="protoToken" ref="ad0fb0c562a9e37fcdb561e56075672dda791cacb01ee68d2917d9176dc862b4ec" args="" -->protoToken</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ad0fb0c562a9e37fcdb561e56075672ddade23d1dd76bccd72a985f722f6ce74bd"></a><!-- doxytag: member="signedToken" ref="ad0fb0c562a9e37fcdb561e56075672ddade23d1dd76bccd72a985f722f6ce74bd" args="" -->signedToken</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ad0fb0c562a9e37fcdb561e56075672dda1596fd8aed4ab475660fbfca4f27427d"></a><!-- doxytag: member="spendableToken" ref="ad0fb0c562a9e37fcdb561e56075672dda1596fd8aed4ab475660fbfca4f27427d" args="" -->spendableToken</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ad0fb0c562a9e37fcdb561e56075672ddac49e6ae0a44b874f2670773a47d1fc3c"></a><!-- doxytag: member="verifiedToken" ref="ad0fb0c562a9e37fcdb561e56075672ddac49e6ae0a44b874f2670773a47d1fc3c" args="" -->verifiedToken</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ad0fb0c562a9e37fcdb561e56075672dda7db8f3ddd84b028c7231362536ab518e"></a><!-- doxytag: member="errorToken" ref="ad0fb0c562a9e37fcdb561e56075672dda7db8f3ddd84b028c7231362536ab518e" args="" -->errorToken</em>&nbsp;</td><td>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="_o_t_token_8hpp_source.html#l00189">189</a> of file <a class="el" href="_o_t_token_8hpp_source.html">OTToken.hpp</a>.</p>
<div class="fragment"><pre class="fragment">                    {
        <a class="code" href="class_o_t_token.html#ad0fb0c562a9e37fcdb561e56075672dda7aa332ee22a810c02591b7d50a86263b">blankToken</a>,
        <a class="code" href="class_o_t_token.html#ad0fb0c562a9e37fcdb561e56075672dda791cacb01ee68d2917d9176dc862b4ec">protoToken</a>,
        <a class="code" href="class_o_t_token.html#ad0fb0c562a9e37fcdb561e56075672ddade23d1dd76bccd72a985f722f6ce74bd">signedToken</a>,
        <a class="code" href="class_o_t_token.html#ad0fb0c562a9e37fcdb561e56075672dda1596fd8aed4ab475660fbfca4f27427d">spendableToken</a>,
        <a class="code" href="class_o_t_token.html#ad0fb0c562a9e37fcdb561e56075672ddac49e6ae0a44b874f2670773a47d1fc3c">verifiedToken</a>,
        <a class="code" href="class_o_t_token.html#ad0fb0c562a9e37fcdb561e56075672dda7db8f3ddd84b028c7231362536ab518e">errorToken</a>
    };
</pre></div>
</div>
</div>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="add07693a09f4f5654d67806315f836dc"></a><!-- doxytag: member="OTToken::OTToken" ref="add07693a09f4f5654d67806315f836dc" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_token.html#add07693a09f4f5654d67806315f836dc">OTToken::OTToken</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_token_8cpp_source.html#l00207">207</a> of file <a class="el" href="_o_t_token_8cpp_source.html">OTToken.cpp</a>.</p>
<div class="fragment"><pre class="fragment">  : ot_super(),
    <a class="code" href="class_o_t_token.html#a04d6c0d6812cb5b4ba5a9950f5fab251">m_bPasswordProtected</a>(<span class="keyword">false</span>),
    <a class="code" href="class_o_t_token.html#ab60d3bcde176d6f5dff82dac58c4573c">m_lDenomination</a>(0),
    <a class="code" href="class_o_t_token.html#a1cc49ca8ea8914ae5bf2ad65a2c8fee0">m_nTokenCount</a>(0),
    <a class="code" href="class_o_t_token.html#a7eac324070d47ee46a46d1a084f0676c">m_nChosenIndex</a>(0), 
    <a class="code" href="class_o_t_token.html#a3952d4ce82c81016a70a94f319be337d">m_nSeries</a>(0), 
    <a class="code" href="class_o_t_token.html#abb3c86c043242862d2e3a6dacf9d1a08">m_State</a>(<a class="code" href="class_o_t_token.html#ad0fb0c562a9e37fcdb561e56075672dda7aa332ee22a810c02591b7d50a86263b">blankToken</a>), 
    <a class="code" href="class_o_t_token.html#a62b6a27bb859c163ce65a8c2df253335">m_bSavePrivateKeys</a>(<span class="keyword">false</span>)
{
    <a class="code" href="class_o_t_token.html#a42c06ba601cc8bc3558347f0666a60ca">InitToken</a>();
}
</pre></div>
</div>
</div>
<a class="anchor" id="a8cd5e36981c7dbb8c37c424495b9fc59"></a><!-- doxytag: member="OTToken::OTToken" ref="a8cd5e36981c7dbb8c37c424495b9fc59" args="(const OTIdentifier &amp;SERVER_ID, const OTIdentifier &amp;ASSET_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_token.html#add07693a09f4f5654d67806315f836dc">OTToken::OTToken</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;&#160;</td>
          <td class="paramname"><em>ASSET_ID</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_token_8cpp_source.html#l00228">228</a> of file <a class="el" href="_o_t_token_8cpp_source.html">OTToken.cpp</a>.</p>
<div class="fragment"><pre class="fragment">  : ot_super(SERVER_ID, ASSET_ID), 
    <a class="code" href="class_o_t_token.html#a04d6c0d6812cb5b4ba5a9950f5fab251">m_bPasswordProtected</a>(<span class="keyword">false</span>),
    <a class="code" href="class_o_t_token.html#ab60d3bcde176d6f5dff82dac58c4573c">m_lDenomination</a>(0), 
    <a class="code" href="class_o_t_token.html#a1cc49ca8ea8914ae5bf2ad65a2c8fee0">m_nTokenCount</a>(0), 
    <a class="code" href="class_o_t_token.html#a7eac324070d47ee46a46d1a084f0676c">m_nChosenIndex</a>(0), 
    <a class="code" href="class_o_t_token.html#a3952d4ce82c81016a70a94f319be337d">m_nSeries</a>(0), 
    <a class="code" href="class_o_t_token.html#abb3c86c043242862d2e3a6dacf9d1a08">m_State</a>(<a class="code" href="class_o_t_token.html#ad0fb0c562a9e37fcdb561e56075672dda7aa332ee22a810c02591b7d50a86263b">blankToken</a>), 
    <a class="code" href="class_o_t_token.html#a62b6a27bb859c163ce65a8c2df253335">m_bSavePrivateKeys</a>(<span class="keyword">false</span>)
{
    <a class="code" href="class_o_t_token.html#a42c06ba601cc8bc3558347f0666a60ca">InitToken</a>();
    
    <span class="comment">// m_ServerID and m_AssetTypeID are now in the parent class (OTInstrument)</span>
    <span class="comment">// So they are initialized there now.</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa514c9b26b6694893f60ff850bdba6c9"></a><!-- doxytag: member="OTToken::OTToken" ref="aa514c9b26b6694893f60ff850bdba6c9" args="(const OTPurse &amp;thePurse)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_token.html#add07693a09f4f5654d67806315f836dc">OTToken::OTToken</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_purse.html">OTPurse</a> &amp;&#160;</td>
          <td class="paramname"><em>thePurse</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_token_8cpp_source.html#l00245">245</a> of file <a class="el" href="_o_t_token_8cpp_source.html">OTToken.cpp</a>.</p>
<div class="fragment"><pre class="fragment">  : ot_super(),
    <a class="code" href="class_o_t_token.html#a04d6c0d6812cb5b4ba5a9950f5fab251">m_bPasswordProtected</a>(<span class="keyword">false</span>),
    <a class="code" href="class_o_t_token.html#ab60d3bcde176d6f5dff82dac58c4573c">m_lDenomination</a>(0), 
    <a class="code" href="class_o_t_token.html#a1cc49ca8ea8914ae5bf2ad65a2c8fee0">m_nTokenCount</a>(0), 
    <a class="code" href="class_o_t_token.html#a7eac324070d47ee46a46d1a084f0676c">m_nChosenIndex</a>(0), 
    <a class="code" href="class_o_t_token.html#a3952d4ce82c81016a70a94f319be337d">m_nSeries</a>(0), 
    <a class="code" href="class_o_t_token.html#abb3c86c043242862d2e3a6dacf9d1a08">m_State</a>(<a class="code" href="class_o_t_token.html#ad0fb0c562a9e37fcdb561e56075672dda7aa332ee22a810c02591b7d50a86263b">blankToken</a>), 
    <a class="code" href="class_o_t_token.html#a62b6a27bb859c163ce65a8c2df253335">m_bSavePrivateKeys</a>(<span class="keyword">false</span>)
{
    <a class="code" href="class_o_t_token.html#a42c06ba601cc8bc3558347f0666a60ca">InitToken</a>();

    <span class="comment">// These are in the parent class, OTInstrument.</span>
    <span class="comment">// I set them here because the &quot;Purse&quot; argument only exists </span>
    <span class="comment">// in this subclass constructor, not the base.</span>
    <a class="code" href="class_o_t_instrument.html#a53186ff153aef87f510ed1afdb347913">m_ServerID</a>      = thePurse.<a class="code" href="class_o_t_purse.html#aa6b026618394154f1a7f80064a5e6c50">GetServerID</a>();
    <a class="code" href="class_o_t_instrument.html#abf1f971534fd87a5f3ad3b7306aebe4c">m_AssetTypeID</a>   = thePurse.<a class="code" href="class_o_t_purse.html#af87e5b076d8d738e6b32e56cc49737c1">GetAssetID</a>();
}
</pre></div>
</div>
</div>
<a class="anchor" id="a83cc84022464d496b4220f2844d68332"></a><!-- doxytag: member="OTToken::~OTToken" ref="a83cc84022464d496b4220f2844d68332" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_token.html#a83cc84022464d496b4220f2844d68332">OTToken::~OTToken</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_token_8cpp_source.html#l00286">286</a> of file <a class="el" href="_o_t_token_8cpp_source.html">OTToken.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_o_t_token.html#a923ed4bd7498f5f2d6bfafa12c01153d">Release_Token</a>();

    <a class="code" href="class_o_t_token.html#a04d6c0d6812cb5b4ba5a9950f5fab251">m_bPasswordProtected</a> = <span class="keyword">false</span>;

    <span class="comment">// todo: optimization (probably just remove these here.)</span>
    <a class="code" href="class_o_t_token.html#ab60d3bcde176d6f5dff82dac58c4573c">m_lDenomination</a> = 0; 
<span class="comment">//  m_nTokenCount   = 0;  // this happens in ReleasePrototokens. (Called by Release_Token above.)</span>
    <a class="code" href="class_o_t_token.html#a7eac324070d47ee46a46d1a084f0676c">m_nChosenIndex</a>  = 0;
    <a class="code" href="class_o_t_token.html#a3952d4ce82c81016a70a94f319be337d">m_nSeries</a>       = 0;
    <a class="code" href="class_o_t_token.html#abb3c86c043242862d2e3a6dacf9d1a08">m_State</a>         = <a class="code" href="class_o_t_token.html#ad0fb0c562a9e37fcdb561e56075672dda7aa332ee22a810c02591b7d50a86263b">blankToken</a>;
    <a class="code" href="class_o_t_token.html#a62b6a27bb859c163ce65a8c2df253335">m_bSavePrivateKeys</a> = <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a346126e90c4cf017d695dd44f5d0d8e9"></a><!-- doxytag: member="OTToken::ChooseIndex" ref="a346126e90c4cf017d695dd44f5d0d8e9" args="(const int32_t nIndex)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_token.html#a346126e90c4cf017d695dd44f5d0d8e9">OTToken::ChooseIndex</a> </td>
          <td>(</td>
          <td class="paramtype">const int32_t&#160;</td>
          <td class="paramname"><em>nIndex</em></td><td>)</td>
          <td><code> [inline, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_token_8cpp_source.html#l01064">1064</a> of file <a class="el" href="_o_t_token_8cpp_source.html">OTToken.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{ 
    <span class="keywordflow">if</span> (nIndex &gt; (<a class="code" href="class_o_t_token.html#a1cc49ca8ea8914ae5bf2ad65a2c8fee0">m_nTokenCount</a>-1) || nIndex &lt; 0) 
        <span class="keywordflow">return</span> <span class="keyword">false</span>; 
    <span class="keywordflow">else</span> 
    { 
        <a class="code" href="class_o_t_token.html#a7eac324070d47ee46a46d1a084f0676c">m_nChosenIndex</a> = nIndex; 
        <span class="keywordflow">return</span> <span class="keyword">true</span>;
    } 
} 
</pre></div>
</div>
</div>
<a class="anchor" id="af26688188271e0fbd5c452efbeb84df0"></a><!-- doxytag: member="OTToken::GenerateTokenRequest" ref="af26688188271e0fbd5c452efbeb84df0" args="(const OTPseudonym &amp;theNym, OTMint &amp;theMint, int64_t lDenomination, int32_t nTokenCount=OTToken::GetMinimumPrototokenCount())=0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual EXPORT bool <a class="el" href="class_o_t_token.html#af26688188271e0fbd5c452efbeb84df0">OTToken::GenerateTokenRequest</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;&#160;</td>
          <td class="paramname"><em>theNym</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_mint.html">OTMint</a> &amp;&#160;</td>
          <td class="paramname"><em>theMint</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>lDenomination</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>nTokenCount</em> = <code><a class="el" href="class_o_t_token.html#aeb321df891285fe0a0f2aba3963f0f30">OTToken::GetMinimumPrototokenCount</a>()</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected, pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a4e17470c475313139d1ed975e6c26b5a"></a><!-- doxytag: member="OTToken::GetDenomination" ref="a4e17470c475313139d1ed975e6c26b5a" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64_t <a class="el" href="class_o_t_token.html#a4e17470c475313139d1ed975e6c26b5a">OTToken::GetDenomination</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_token_8hpp_source.html#l00340">340</a> of file <a class="el" href="_o_t_token_8hpp_source.html">OTToken.hpp</a>.</p>
<div class="fragment"><pre class="fragment">{ <span class="keywordflow">return</span> <a class="code" href="class_o_t_token.html#ab60d3bcde176d6f5dff82dac58c4573c">m_lDenomination</a>; }
</pre></div>
</div>
</div>
<a class="anchor" id="aeb321df891285fe0a0f2aba3963f0f30"></a><!-- doxytag: member="OTToken::GetMinimumPrototokenCount" ref="aeb321df891285fe0a0f2aba3963f0f30" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const int32_t <a class="el" href="class_o_t_token.html#aeb321df891285fe0a0f2aba3963f0f30">OTToken::GetMinimumPrototokenCount</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_token_8cpp_source.html#l00175">175</a> of file <a class="el" href="_o_t_token_8cpp_source.html">OTToken.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> <a class="code" href="_o_t_token_8cpp.html#a963bb5d9473bea0ae6f808773dc68869">OTToken__nMinimumPrototokenCount</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a4b06088db3d33d54da293eca57045170"></a><!-- doxytag: member="OTToken::GetPrivatePrototoken" ref="a4b06088db3d33d54da293eca57045170" args="(OTASCIIArmor &amp;ascPrototoken, int32_t nTokenIndex)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_token.html#a4b06088db3d33d54da293eca57045170">OTToken::GetPrivatePrototoken</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> &amp;&#160;</td>
          <td class="paramname"><em>ascPrototoken</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>nTokenIndex</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_token_8cpp_source.html#l01015">1015</a> of file <a class="el" href="_o_t_token_8cpp_source.html">OTToken.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// out of bounds. For a count 10 element array, index 10 is out of bounds.</span>
    <span class="comment">// thus if attempted index is equal or larger to the count, out of bounds.</span>
    <span class="keywordflow">if</span> (nTokenIndex &gt;= <a class="code" href="class_o_t_token.html#a1cc49ca8ea8914ae5bf2ad65a2c8fee0">m_nTokenCount</a>)
    {
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
        
    <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_token_8hpp.html#a953c4fc4f20b141e33a3dc9a82d7d5cd">mapOfPrototokens</a>, <a class="code" href="class_o_t_token.html#a912ee7462a62c21eb168e527474bb35a">m_mapPrivate</a>)
    {
        <a class="code" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> * pPrototoken = (*it).second;
        <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pPrototoken);
        
        <span class="keyword">const</span> <span class="keywordtype">bool</span> bSuccess = (nTokenIndex == (*it).first);
        
        <span class="keywordflow">if</span> (bSuccess)
        {
            ascPrototoken.<a class="code" href="class_o_t_string.html#aa5db620fe8e60c849585d741975db991">Set</a>(*pPrototoken);
            <span class="keywordflow">return</span> <span class="keyword">true</span>;
        }
    }
    <span class="keywordflow">return</span> <span class="keyword">false</span>;   
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac9f8ceac04a2856116ece83c4b6ddc2e"></a><!-- doxytag: member="OTToken::GetPrototoken" ref="ac9f8ceac04a2856116ece83c4b6ddc2e" args="(OTASCIIArmor &amp;ascPrototoken, int32_t nTokenIndex)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_token.html#ac9f8ceac04a2856116ece83c4b6ddc2e">OTToken::GetPrototoken</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> &amp;&#160;</td>
          <td class="paramname"><em>ascPrototoken</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>nTokenIndex</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_token_8cpp_source.html#l00988">988</a> of file <a class="el" href="_o_t_token_8cpp_source.html">OTToken.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// out of bounds. For a count 10 element array, index 10 is out of bounds.</span>
    <span class="comment">// thus if attempted index is equal or larger to the count, out of bounds.</span>
    <span class="keywordflow">if</span> (nTokenIndex &gt;= <a class="code" href="class_o_t_token.html#a1cc49ca8ea8914ae5bf2ad65a2c8fee0">m_nTokenCount</a>)
    {
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// --------------------------------------</span>
    <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_token_8hpp.html#a953c4fc4f20b141e33a3dc9a82d7d5cd">mapOfPrototokens</a>, <a class="code" href="class_o_t_token.html#a3535301cfd5f293433150904c30b392e">m_mapPublic</a>)
    {
        <a class="code" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> * pPrototoken = (*it).second;
        <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pPrototoken);
        
        <span class="keyword">const</span> <span class="keywordtype">bool</span> bSuccess = (nTokenIndex == (*it).first);
        
        <span class="keywordflow">if</span> (bSuccess)
        {
            ascPrototoken.<a class="code" href="class_o_t_string.html#aa5db620fe8e60c849585d741975db991">Set</a>(*pPrototoken);

            <span class="keywordflow">return</span> <span class="keyword">true</span>;
        }
    }
    <span class="keywordflow">return</span> <span class="keyword">false</span>;   
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad68798a37c37605745ae99475a942126"></a><!-- doxytag: member="OTToken::GetSeries" ref="ad68798a37c37605745ae99475a942126" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_token.html#ad68798a37c37605745ae99475a942126">OTToken::GetSeries</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_token_8hpp_source.html#l00315">315</a> of file <a class="el" href="_o_t_token_8hpp_source.html">OTToken.hpp</a>.</p>
<div class="fragment"><pre class="fragment">{ <span class="keywordflow">return</span> <a class="code" href="class_o_t_token.html#a3952d4ce82c81016a70a94f319be337d">m_nSeries</a>; }
</pre></div>
</div>
</div>
<a class="anchor" id="a8773363e9dd7cca5ac00c44555961c0c"></a><!-- doxytag: member="OTToken::GetSignature" ref="a8773363e9dd7cca5ac00c44555961c0c" args="(OTASCIIArmor &amp;theSignature) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_token.html#a8773363e9dd7cca5ac00c44555961c0c">OTToken::GetSignature</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> &amp;&#160;</td>
          <td class="paramname"><em>theSignature</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_token_8cpp_source.html#l01105">1105</a> of file <a class="el" href="_o_t_token_8cpp_source.html">OTToken.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    theSignature = <a class="code" href="class_o_t_token.html#a01a0360eaceb37845f0b4f35256aaab3">m_Signature</a>;
    
    <span class="keywordflow">return</span> <span class="keyword">true</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac66cb04fd3053e8fa444010b59a89332"></a><!-- doxytag: member="OTToken::GetSpendable" ref="ac66cb04fd3053e8fa444010b59a89332" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a>&amp; <a class="el" href="class_o_t_token.html#ac66cb04fd3053e8fa444010b59a89332">OTToken::GetSpendable</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_token_8hpp_source.html#l00286">286</a> of file <a class="el" href="_o_t_token_8hpp_source.html">OTToken.hpp</a>.</p>
<div class="fragment"><pre class="fragment">{ <span class="keywordflow">return</span> <a class="code" href="class_o_t_token.html#ac029e1035d9610f3f042a46877ccab64">m_ascSpendable</a>; }
</pre></div>
</div>
</div>
<a class="anchor" id="ac8ba8227c8762aeb4cccc3a9af39abbc"></a><!-- doxytag: member="OTToken::GetSpendableString" ref="ac8ba8227c8762aeb4cccc3a9af39abbc" args="(OTNym_or_SymmetricKey theOwner, OTString &amp;theString) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_token.html#ac8ba8227c8762aeb4cccc3a9af39abbc">OTToken::GetSpendableString</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_nym__or___symmetric_key.html">OTNym_or_SymmetricKey</a>&#160;</td>
          <td class="paramname"><em>theOwner</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>theString</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_token_8cpp_source.html#l00690">690</a> of file <a class="el" href="_o_t_token_8cpp_source.html">OTToken.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keyword">const</span> <span class="keywordtype">char</span> * szFunc = <span class="stringliteral">&quot;OTToken::GetSpendableString&quot;</span>;
    <span class="comment">// -------------------------------------</span>
    <span class="keywordflow">if</span> (<a class="code" href="class_o_t_token.html#ac029e1035d9610f3f042a46877ccab64">m_ascSpendable</a>.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>())
    {
        <a class="code" href="class_o_t_envelope.html">OTEnvelope</a> theEnvelope(<a class="code" href="class_o_t_token.html#ac029e1035d9610f3f042a46877ccab64">m_ascSpendable</a>);
        
        <span class="comment">// Decrypt the Envelope into strContents</span>
        <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strDisplay(szFunc);
        
        <span class="keywordflow">if</span> (theOwner.<a class="code" href="class_o_t_nym__or___symmetric_key.html#a1c32b029ccef668d2058d54bc69f1b00">Open_or_Decrypt</a>(theEnvelope, theString, &amp;strDisplay))
            <span class="keywordflow">return</span> <span class="keyword">true</span>;
    }
    <span class="keywordflow">else</span>
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: m_ascSpendable is empty... (failure.)\n&quot;</span>, szFunc);
    
    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a0b7813d8f9c8564904a7efa3be0f5a7e"></a><!-- doxytag: member="OTToken::GetState" ref="a0b7813d8f9c8564904a7efa3be0f5a7e" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_token.html#ad0fb0c562a9e37fcdb561e56075672dd">OTToken::tokenState</a> <a class="el" href="class_o_t_token.html#a0b7813d8f9c8564904a7efa3be0f5a7e">OTToken::GetState</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_token_8hpp_source.html#l00291">291</a> of file <a class="el" href="_o_t_token_8hpp_source.html">OTToken.hpp</a>.</p>
<div class="fragment"><pre class="fragment">{ <span class="keywordflow">return</span> <a class="code" href="class_o_t_token.html#abb3c86c043242862d2e3a6dacf9d1a08">m_State</a>; }
</pre></div>
</div>
</div>
<a class="anchor" id="a42c06ba601cc8bc3558347f0666a60ca"></a><!-- doxytag: member="OTToken::InitToken" ref="a42c06ba601cc8bc3558347f0666a60ca" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_token.html#a42c06ba601cc8bc3558347f0666a60ca">OTToken::InitToken</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_token_8cpp_source.html#l00194">194</a> of file <a class="el" href="_o_t_token_8cpp_source.html">OTToken.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
<span class="comment">//  m_lDenomination = 0; </span>
<span class="comment">//  m_nTokenCount   = 0;</span>
<span class="comment">//  m_nChosenIndex  = 0;</span>
<span class="comment">//  m_nSeries       = 0;</span>
<span class="comment">//  m_State         = blankToken;</span>
<span class="comment">//  m_bSavePrivateKeys = false;</span>
        
    <a class="code" href="class_o_t_contract.html#ac523dac7d72b72e54b1ebb5b3a3b21cc">m_strContractType</a>.<a class="code" href="class_o_t_string.html#aa5db620fe8e60c849585d741975db991">Set</a>(<span class="stringliteral">&quot;CASH TOKEN&quot;</span>); <span class="comment">// todo internationalization.</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad661596f621b1b697f1e8328cdbc3683"></a><!-- doxytag: member="OTToken::InstantiateAndGenerateTokenRequest" ref="ad661596f621b1b697f1e8328cdbc3683" args="(const OTPurse &amp;thePurse, const OTPseudonym &amp;theNym, OTMint &amp;theMint, int64_t lDenomination, int32_t nTokenCount=OTToken::GetMinimumPrototokenCount())" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_token.html">OTToken</a> * <a class="el" href="class_o_t_token.html#ad661596f621b1b697f1e8328cdbc3683">OTToken::InstantiateAndGenerateTokenRequest</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_purse.html">OTPurse</a> &amp;&#160;</td>
          <td class="paramname"><em>thePurse</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;&#160;</td>
          <td class="paramname"><em>theNym</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_mint.html">OTMint</a> &amp;&#160;</td>
          <td class="paramname"><em>theMint</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>lDenomination</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>nTokenCount</em> = <code><a class="el" href="class_o_t_token.html#aeb321df891285fe0a0f2aba3963f0f30">OTToken::GetMinimumPrototokenCount</a>()</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_token_8cpp_source.html#l01042">1042</a> of file <a class="el" href="_o_t_token_8cpp_source.html">OTToken.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_o_t_token.html">OTToken</a> * pToken = <a class="code" href="class_o_t_token.html#a4743b9502c620181569445d58fbdf826">OTToken::LowLevelInstantiate</a>(thePurse); <span class="comment">// already asserts.</span>
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pToken); <span class="comment">// Just for good measure.</span>

    <span class="keyword">const</span> <span class="keywordtype">bool</span> bGeneratedRequest = pToken-&gt;<a class="code" href="class_o_t_token.html#af26688188271e0fbd5c452efbeb84df0">GenerateTokenRequest</a>(theNym, theMint, lDenomination, nTokenCount);
    
    <span class="keywordflow">if</span> (!bGeneratedRequest)
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Failed trying to generate token request.\n&quot;</span>, __FUNCTION__);
        <span class="keyword">delete</span> pToken;
        pToken = NULL;
    }
    
    <span class="keywordflow">return</span> pToken;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a63c87c3fe61440f554e37f3ad98b241b"></a><!-- doxytag: member="OTToken::IsTokenAlreadySpent" ref="a63c87c3fe61440f554e37f3ad98b241b" args="(OTString &amp;theCleartextToken)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_token.html#a63c87c3fe61440f554e37f3ad98b241b">OTToken::IsTokenAlreadySpent</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>theCleartextToken</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_token_8cpp_source.html#l00514">514</a> of file <a class="el" href="_o_t_token_8cpp_source.html">OTToken.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_o_t_string.html">OTString</a> strAssetID(<a class="code" href="class_o_t_instrument.html#a1f6c7b528680d84dcb998d473bdd99a6">GetAssetID</a>());
    <span class="comment">// ----------------------------------------------------------------------------     </span>
    <span class="comment">// Calculate the filename (a hash of the Lucre cleartext token ID)</span>
    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theTokenHash;
    theTokenHash.<a class="code" href="class_o_t_identifier.html#ac50b356cf5d5d04c08eaf568d07bcc46">CalculateDigest</a>(theCleartextToken);
    
    <span class="comment">// Grab the new hash into a string (for use as a filename)</span>
    <a class="code" href="class_o_t_string.html">OTString</a> strTokenHash(theTokenHash);
    <span class="comment">// ---------------------------------------------------------------------------- </span>
    <a class="code" href="class_o_t_string.html">OTString</a> strAssetFolder;
    strAssetFolder.<a class="code" href="class_o_t_string.html#af1c861f21033a1d583b3cb12f952422e">Format</a>(<span class="stringliteral">&quot;%s.%d&quot;</span>, strAssetID.Get(), <a class="code" href="class_o_t_token.html#ad68798a37c37605745ae99475a942126">GetSeries</a>());
    
    <span class="keywordtype">bool</span> bTokenIsPresent = <a class="code" href="namespace_o_t_d_b.html#a73e39a590dfb64f63065821c6bbcd4c6">OTDB::Exists</a>(<a class="code" href="class_o_t_folders.html#a42ae2661716e4b253807bf95f6d9697e">OTFolders::Spent</a>().Get(), strAssetFolder.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(), strTokenHash.Get());
    <span class="comment">// --------------------------------------------------------------------</span>
    <span class="keywordflow">if</span> (bTokenIsPresent)
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;\nOTToken::IsTokenAlreadySpent: Token was already spent: %s%s%s%s%s\n&quot;</span>, 
                       <a class="code" href="class_o_t_folders.html#a42ae2661716e4b253807bf95f6d9697e">OTFolders::Spent</a>().Get(), <a class="code" href="class_o_t_log.html#a42d3c91ff84ecae0690e34efb4619a77">OTLog::PathSeparator</a>(), strAssetFolder.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(), 
                       <a class="code" href="class_o_t_log.html#a42d3c91ff84ecae0690e34efb4619a77">OTLog::PathSeparator</a>(), strTokenHash.Get());
        <span class="keywordflow">return</span> <span class="keyword">true</span>;    <span class="comment">// all errors must return true in this function.</span>
                        <span class="comment">// But this is not an error. Token really WAS already</span>
    }                   <span class="comment">// spent, and this true is for real. The others are just</span>
                        <span class="comment">// for security reasons because of this one.</span>
    
    <span class="comment">// This is the ideal case: the token was NOT already spent, it was good,</span>
    <span class="comment">// so we can return false and the depositor can be credited appropriately.</span>
    <span class="comment">// IsTokenAlreadySpent?  NO-it was NOT already spent. You can only POSSIBLY</span>
    <span class="comment">// get a false out of this method if you actually reached the bottom (here.)</span>
    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a4743b9502c620181569445d58fbdf826"></a><!-- doxytag: member="OTToken::LowLevelInstantiate" ref="a4743b9502c620181569445d58fbdf826" args="(const OTPurse &amp;thePurse)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_token.html">OTToken</a> * <a class="el" href="class_o_t_token.html#a4743b9502c620181569445d58fbdf826">OTToken::LowLevelInstantiate</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_purse.html">OTPurse</a> &amp;&#160;</td>
          <td class="paramname"><em>thePurse</em></td><td>)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_token_8cpp_source.html#l00383">383</a> of file <a class="el" href="_o_t_token_8cpp_source.html">OTToken.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_o_t_token.html">OTToken</a> * pToken = NULL;
    
<span class="preprocessor">#if defined (OT_CASH_USING_LUCRE)</span>
<span class="preprocessor"></span>    pToken = <span class="keyword">new</span> OTToken_Lucre(thePurse);
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pToken);
<span class="preprocessor">#else</span>
<span class="preprocessor"></span>    <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Open-Transactions is not built for any digital cash algorithms. (Failure.)&quot;</span>,
                  __FUNCTION__);
<span class="preprocessor">#endif // defined (OT_CASH_USING_LUCRE)</span>
<span class="preprocessor"></span>
    <span class="keywordflow">return</span> pToken;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a192cbbd8eb8061e030cee661c32ce12b"></a><!-- doxytag: member="OTToken::LowLevelInstantiate" ref="a192cbbd8eb8061e030cee661c32ce12b" args="(const OTString &amp;strFirstLine)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_token.html">OTToken</a> * <a class="el" href="class_o_t_token.html#a4743b9502c620181569445d58fbdf826">OTToken::LowLevelInstantiate</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strFirstLine</em></td><td>)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_token_8cpp_source.html#l00399">399</a> of file <a class="el" href="_o_t_token_8cpp_source.html">OTToken.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_o_t_token.html">OTToken</a> * pToken = NULL;

<span class="preprocessor">#if defined (OT_CASH_USING_LUCRE)</span>
<span class="preprocessor"></span>    <span class="keywordflow">if</span> (strFirstLine.<a class="code" href="class_o_t_string.html#acb212b06102322aebb96090601794825">Contains</a>(<span class="stringliteral">&quot;-----BEGIN SIGNED CASH-----&quot;</span>))  <span class="comment">// this string is 27 chars long.</span>
    {   pToken = <span class="keyword">new</span> OTToken_Lucre;     <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pToken); }
    
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strFirstLine.<a class="code" href="class_o_t_string.html#acb212b06102322aebb96090601794825">Contains</a>(<span class="stringliteral">&quot;-----BEGIN SIGNED CASH TOKEN-----&quot;</span>))  <span class="comment">// this string is 33 chars long.</span>
    {   pToken = <span class="keyword">new</span> OTToken_Lucre;     <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pToken); }
    
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strFirstLine.<a class="code" href="class_o_t_string.html#acb212b06102322aebb96090601794825">Contains</a>(<span class="stringliteral">&quot;-----BEGIN SIGNED LUCRE CASH TOKEN-----&quot;</span>))  <span class="comment">// this string is 39 chars long.</span>
    {   pToken = <span class="keyword">new</span> OTToken_Lucre;     <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pToken); }
<span class="preprocessor">#else</span>
<span class="preprocessor"></span>    <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Open-Transactions is not built for any digital cash algorithms. (Failure.)&quot;</span>,
                  __FUNCTION__);
<span class="preprocessor">#endif // defined (OT_CASH_USING_LUCRE)</span>
<span class="preprocessor"></span>
    <span class="keywordflow">return</span> pToken;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad13f372e577783d36f8419468432d6f1"></a><!-- doxytag: member="OTToken::LowLevelInstantiate" ref="ad13f372e577783d36f8419468432d6f1" args="(const OTString &amp;strFirstLine, const OTPurse &amp;thePurse)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_token.html">OTToken</a> * <a class="el" href="class_o_t_token.html#a4743b9502c620181569445d58fbdf826">OTToken::LowLevelInstantiate</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strFirstLine</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_purse.html">OTPurse</a> &amp;&#160;</td>
          <td class="paramname"><em>thePurse</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_token_8cpp_source.html#l00361">361</a> of file <a class="el" href="_o_t_token_8cpp_source.html">OTToken.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_o_t_token.html">OTToken</a> * pToken = NULL;

<span class="preprocessor">#if defined (OT_CASH_USING_LUCRE)</span>
<span class="preprocessor"></span>    <span class="keywordflow">if</span> (strFirstLine.<a class="code" href="class_o_t_string.html#acb212b06102322aebb96090601794825">Contains</a>(<span class="stringliteral">&quot;-----BEGIN SIGNED CASH-----&quot;</span>))  <span class="comment">// this string is 27 chars long.</span>
    {   pToken = <span class="keyword">new</span> OTToken_Lucre(thePurse);       <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pToken); }
    
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strFirstLine.<a class="code" href="class_o_t_string.html#acb212b06102322aebb96090601794825">Contains</a>(<span class="stringliteral">&quot;-----BEGIN SIGNED CASH TOKEN-----&quot;</span>))  <span class="comment">// this string is 33 chars long.</span>
    {   pToken = <span class="keyword">new</span> OTToken_Lucre(thePurse);     <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pToken); }
    
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strFirstLine.<a class="code" href="class_o_t_string.html#acb212b06102322aebb96090601794825">Contains</a>(<span class="stringliteral">&quot;-----BEGIN SIGNED LUCRE CASH TOKEN-----&quot;</span>))  <span class="comment">// this string is 39 chars long.</span>
    {   pToken = <span class="keyword">new</span> OTToken_Lucre(thePurse);       <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pToken); }
<span class="preprocessor">#else</span>
<span class="preprocessor"></span>    <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Open-Transactions is not built for any digital cash algorithms. (Failure.)&quot;</span>,
                  __FUNCTION__);
<span class="preprocessor">#endif // defined (OT_CASH_USING_LUCRE)</span>
<span class="preprocessor"></span>
    <span class="keywordflow">return</span> pToken;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae8064a8a4018e4ed13e5685b4cb1db27"></a><!-- doxytag: member="OTToken::LowLevelInstantiate" ref="ae8064a8a4018e4ed13e5685b4cb1db27" args="(const OTString &amp;strFirstLine, const OTIdentifier &amp;SERVER_ID, const OTIdentifier &amp;ASSET_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_token.html">OTToken</a> * <a class="el" href="class_o_t_token.html#a4743b9502c620181569445d58fbdf826">OTToken::LowLevelInstantiate</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strFirstLine</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;&#160;</td>
          <td class="paramname"><em>ASSET_ID</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_token_8cpp_source.html#l00339">339</a> of file <a class="el" href="_o_t_token_8cpp_source.html">OTToken.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_o_t_token.html">OTToken</a> * pToken = NULL;
    
<span class="preprocessor">#if defined (OT_CASH_USING_LUCRE)</span>
<span class="preprocessor"></span>    <span class="keywordflow">if</span> (strFirstLine.<a class="code" href="class_o_t_string.html#acb212b06102322aebb96090601794825">Contains</a>(<span class="stringliteral">&quot;-----BEGIN SIGNED CASH-----&quot;</span>))  <span class="comment">// this string is 27 chars long.</span>
    {   pToken = <span class="keyword">new</span> OTToken_Lucre(SERVER_ID, ASSET_ID);        <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pToken); }
    
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strFirstLine.<a class="code" href="class_o_t_string.html#acb212b06102322aebb96090601794825">Contains</a>(<span class="stringliteral">&quot;-----BEGIN SIGNED CASH TOKEN-----&quot;</span>))  <span class="comment">// this string is 33 chars long.</span>
    {   pToken = <span class="keyword">new</span> OTToken_Lucre(SERVER_ID, ASSET_ID);      <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pToken); }
    
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strFirstLine.<a class="code" href="class_o_t_string.html#acb212b06102322aebb96090601794825">Contains</a>(<span class="stringliteral">&quot;-----BEGIN SIGNED LUCRE CASH TOKEN-----&quot;</span>))  <span class="comment">// this string is 39 chars long.</span>
    {   pToken = <span class="keyword">new</span> OTToken_Lucre(SERVER_ID, ASSET_ID);        <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pToken); }
<span class="preprocessor">#else</span>
<span class="preprocessor"></span>    <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Open-Transactions is not built for any digital cash algorithms. (Failure.)&quot;</span>,
                  __FUNCTION__);
<span class="preprocessor">#endif // defined (OT_CASH_USING_LUCRE)</span>
<span class="preprocessor"></span>
    <span class="keywordflow">return</span> pToken;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad723b93a64ceebe45861dc3d62f02062"></a><!-- doxytag: member="OTToken::operator=" ref="ad723b93a64ceebe45861dc3d62f02062" args="(const OTToken &amp;rhs)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EXPORT <a class="el" href="class_o_t_token.html">OTToken</a>&amp; OTToken::operator= </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_token.html">OTToken</a> &amp;&#160;</td>
          <td class="paramname"><em>rhs</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a088fd14cc04aabcf3fcd47a7028b461d"></a><!-- doxytag: member="OTToken::ProcessToken" ref="a088fd14cc04aabcf3fcd47a7028b461d" args="(const OTPseudonym &amp;theNym, OTMint &amp;theMint, OTToken &amp;theRequest)=0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual EXPORT bool <a class="el" href="class_o_t_token.html#a088fd14cc04aabcf3fcd47a7028b461d">OTToken::ProcessToken</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;&#160;</td>
          <td class="paramname"><em>theNym</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_mint.html">OTMint</a> &amp;&#160;</td>
          <td class="paramname"><em>theMint</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_token.html">OTToken</a> &amp;&#160;</td>
          <td class="paramname"><em>theRequest</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a1f672677602d84c0b435eeb960bd6107"></a><!-- doxytag: member="OTToken::ProcessXMLNode" ref="a1f672677602d84c0b435eeb960bd6107" args="(irr::io::IrrXMLReader *&amp;xml)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_token.html#a1f672677602d84c0b435eeb960bd6107">OTToken::ProcessXMLNode</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespaceirr_1_1io.html#a1628edbb9d5d53f18c82d2a92b0ad27e">irr::io::IrrXMLReader</a> *&amp;&#160;</td>
          <td class="paramname"><em>xml</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reimplemented from <a class="el" href="class_o_t_instrument.html#a7c81b5fa331d2020d41b6da686a0033a">OTInstrument</a>.</p>

<p>Definition at line <a class="el" href="_o_t_token_8cpp_source.html#l00812">812</a> of file <a class="el" href="_o_t_token_8cpp_source.html">OTToken.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keyword">static</span> int32_t nPublicTokenCount  = 0;
    <span class="keyword">static</span> int32_t nPrivateTokenCount = 0;
    
    int32_t nReturnVal = 0;
    
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strNodeName(xml-&gt;getNodeName());

    <span class="comment">// Here we call the parent class first.</span>
    <span class="comment">// If the node is found there, or there is some error,</span>
    <span class="comment">// then we just return either way.  But if it comes back</span>
    <span class="comment">// as &#39;0&#39;, then nothing happened, and we&#39;ll continue executing.</span>
    <span class="comment">//</span>
    <span class="comment">// -- Note you can choose not to call the parent if</span>
    <span class="comment">// you don&#39;t want to use any of those xml tags.</span>
    <span class="comment">// As I do below, in the case of OTAccount.</span>
    <span class="comment">//if (nReturnVal = OTContract::ProcessXMLNode(xml))</span>
    <span class="comment">//  return nReturnVal;</span>
    
    <span class="keywordflow">if</span> ( strNodeName.Compare(<span class="stringliteral">&quot;token&quot;</span>)  ) 
    {
        <a class="code" href="class_o_t_string.html">OTString</a> strState;

        <a class="code" href="class_o_t_contract.html#aa0d889e0e1670b56fedca245041a5ed3">m_strVersion</a>    = xml-&gt;getAttributeValue(<span class="stringliteral">&quot;version&quot;</span>);                    
        strState        = xml-&gt;getAttributeValue(<span class="stringliteral">&quot;state&quot;</span>);

        <a class="code" href="class_o_t_token.html#a3952d4ce82c81016a70a94f319be337d">m_nSeries</a>       = atoi(xml-&gt;getAttributeValue(<span class="stringliteral">&quot;series&quot;</span>));
        
        <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> str_from = xml-&gt;getAttributeValue(<span class="stringliteral">&quot;validFrom&quot;</span>);
        <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> str_to   = xml-&gt;getAttributeValue(<span class="stringliteral">&quot;validTo&quot;</span>);
        
        int64_t tFrom = str_from.<a class="code" href="class_o_t_string.html#a18ca8f42f6e90ab7801c019611d9dca8">ToLong</a>();
        int64_t tTo   = str_to.<a class="code" href="class_o_t_string.html#a18ca8f42f6e90ab7801c019611d9dca8">ToLong</a>();
        
        <a class="code" href="class_o_t_instrument.html#aeb9de88f78cf2ffe456a7a679afcd206">m_VALID_FROM</a> = <a class="code" href="_o_t_common_8hpp.html#a5c0893ffd83818f1c3c6b3b7ae92da13">OTTimeGetTimeFromSeconds</a>(tFrom);
        <a class="code" href="class_o_t_instrument.html#a4cf6fc2e7939f741c070331b5f35a1ea">m_VALID_TO</a> = <a class="code" href="_o_t_common_8hpp.html#a5c0893ffd83818f1c3c6b3b7ae92da13">OTTimeGetTimeFromSeconds</a>(tTo);
        
        <a class="code" href="class_o_t_token.html#a54332197c14671c10d0a0c6177b6339f">SetDenomination</a>(atol(xml-&gt;getAttributeValue(<span class="stringliteral">&quot;denomination&quot;</span>)));

        <span class="keywordflow">if</span> (strState.<a class="code" href="class_o_t_string.html#a03401b39fb66d63696342c4f61ea8bf5">Compare</a>(<span class="stringliteral">&quot;blankToken&quot;</span>))
            <a class="code" href="class_o_t_token.html#abb3c86c043242862d2e3a6dacf9d1a08">m_State</a> = <a class="code" href="class_o_t_token.html#ad0fb0c562a9e37fcdb561e56075672dda7aa332ee22a810c02591b7d50a86263b">OTToken::blankToken</a>;
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strState.<a class="code" href="class_o_t_string.html#a03401b39fb66d63696342c4f61ea8bf5">Compare</a>(<span class="stringliteral">&quot;protoToken&quot;</span>))
            <a class="code" href="class_o_t_token.html#abb3c86c043242862d2e3a6dacf9d1a08">m_State</a> = <a class="code" href="class_o_t_token.html#ad0fb0c562a9e37fcdb561e56075672dda791cacb01ee68d2917d9176dc862b4ec">OTToken::protoToken</a>;
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strState.<a class="code" href="class_o_t_string.html#a03401b39fb66d63696342c4f61ea8bf5">Compare</a>(<span class="stringliteral">&quot;signedToken&quot;</span>))
            <a class="code" href="class_o_t_token.html#abb3c86c043242862d2e3a6dacf9d1a08">m_State</a> = <a class="code" href="class_o_t_token.html#ad0fb0c562a9e37fcdb561e56075672ddade23d1dd76bccd72a985f722f6ce74bd">OTToken::signedToken</a>;
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strState.<a class="code" href="class_o_t_string.html#a03401b39fb66d63696342c4f61ea8bf5">Compare</a>(<span class="stringliteral">&quot;spendableToken&quot;</span>))
            <a class="code" href="class_o_t_token.html#abb3c86c043242862d2e3a6dacf9d1a08">m_State</a> = <a class="code" href="class_o_t_token.html#ad0fb0c562a9e37fcdb561e56075672dda1596fd8aed4ab475660fbfca4f27427d">OTToken::spendableToken</a>;
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strState.<a class="code" href="class_o_t_string.html#a03401b39fb66d63696342c4f61ea8bf5">Compare</a>(<span class="stringliteral">&quot;verifiedToken&quot;</span>))
            <a class="code" href="class_o_t_token.html#abb3c86c043242862d2e3a6dacf9d1a08">m_State</a> = <a class="code" href="class_o_t_token.html#ad0fb0c562a9e37fcdb561e56075672ddac49e6ae0a44b874f2670773a47d1fc3c">OTToken::verifiedToken</a>;
        <span class="keywordflow">else</span>
            <a class="code" href="class_o_t_token.html#abb3c86c043242862d2e3a6dacf9d1a08">m_State</a> = <a class="code" href="class_o_t_token.html#ad0fb0c562a9e37fcdb561e56075672dda7db8f3ddd84b028c7231362536ab518e">OTToken::errorToken</a>;
        
        <span class="keywordflow">if</span> (<a class="code" href="class_o_t_token.html#abb3c86c043242862d2e3a6dacf9d1a08">m_State</a> == <a class="code" href="class_o_t_token.html#ad0fb0c562a9e37fcdb561e56075672dda1596fd8aed4ab475660fbfca4f27427d">OTToken::spendableToken</a>)
            <a class="code" href="class_o_t_contract.html#ac523dac7d72b72e54b1ebb5b3a3b21cc">m_strContractType</a>.<a class="code" href="class_o_t_string.html#aa5db620fe8e60c849585d741975db991">Set</a>(<span class="stringliteral">&quot;CASH TOKEN&quot;</span>);

        <a class="code" href="class_o_t_string.html">OTString</a>    strAssetTypeID(xml-&gt;getAttributeValue(<span class="stringliteral">&quot;assetTypeID&quot;</span>)),
                    strServerID(xml-&gt;getAttributeValue(<span class="stringliteral">&quot;serverID&quot;</span>));
        
        <a class="code" href="class_o_t_instrument.html#abf1f971534fd87a5f3ad3b7306aebe4c">m_AssetTypeID</a>.<a class="code" href="class_o_t_identifier.html#ae29aa1245d3831a207aabc9b8a493bfc">SetString</a>(strAssetTypeID);
        <a class="code" href="class_o_t_instrument.html#a53186ff153aef87f510ed1afdb347913">m_ServerID</a>.<a class="code" href="class_o_t_identifier.html#ae29aa1245d3831a207aabc9b8a493bfc">SetString</a>(strServerID);

        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(4,
                <span class="comment">//  &quot;\n===&gt; Loading XML for token into memory structures...&quot;</span>
                <span class="stringliteral">&quot;\n\nToken State: %s\n Denomination: %lld\n&quot;</span>
                <span class="stringliteral">&quot; AssetTypeID: %s\nServerID: %s\n&quot;</span>, 
                strState.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(), <a class="code" href="class_o_t_token.html#a4e17470c475313139d1ed975e6c26b5a">GetDenomination</a>(), strAssetTypeID.Get(), strServerID.Get());
        
        nReturnVal = 1;
    }
    
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( strNodeName.Compare(<span class="stringliteral">&quot;tokenID&quot;</span>)  )
    {
        <span class="keywordflow">if</span> (<span class="keyword">false</span> == <a class="code" href="class_o_t_contract.html#a72ffe11fdcf2f6e3566afa9061241f30">OTContract::LoadEncodedTextField</a>(xml, <a class="code" href="class_o_t_token.html#ac029e1035d9610f3f042a46877ccab64">m_ascSpendable</a>))
        {
            <a class="code" href="class_o_t_log.html#a5acd90ac91c2618f395b0ff37ad4f8ee">OTLog::Error</a>(<span class="stringliteral">&quot;Error in OTToken::ProcessXMLNode: token ID without value.\n&quot;</span>);
            <span class="keywordflow">return</span> (-1); <span class="comment">// error condition</span>
        }
        
        <span class="keywordflow">return</span> 1;
    }
    
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( strNodeName.Compare(<span class="stringliteral">&quot;tokenSignature&quot;</span>)  )
    {       
        <span class="keywordflow">if</span> (<span class="keyword">false</span> == <a class="code" href="class_o_t_contract.html#a72ffe11fdcf2f6e3566afa9061241f30">OTContract::LoadEncodedTextField</a>(xml, <a class="code" href="class_o_t_token.html#a01a0360eaceb37845f0b4f35256aaab3">m_Signature</a>))
        {
            <a class="code" href="class_o_t_log.html#a5acd90ac91c2618f395b0ff37ad4f8ee">OTLog::Error</a>(<span class="stringliteral">&quot;Error in OTToken::ProcessXMLNode: token Signature without value.\n&quot;</span>);
            <span class="keywordflow">return</span> (-1); <span class="comment">// error condition</span>
        }
        
        <span class="keywordflow">return</span> 1;
    }
    
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( strNodeName.Compare(<span class="stringliteral">&quot;protopurse&quot;</span>)  )
    {   <span class="comment">// TODO for security, if the count here doesn&#39;t match what&#39;s loaded up, that should be part of</span>
        <span class="comment">// what is verified in each token when it&#39;s verified..</span>
        <a class="code" href="class_o_t_token.html#a1cc49ca8ea8914ae5bf2ad65a2c8fee0">m_nTokenCount</a>   = atoi(xml-&gt;getAttributeValue(<span class="stringliteral">&quot;count&quot;</span>));
        <a class="code" href="class_o_t_token.html#a7eac324070d47ee46a46d1a084f0676c">m_nChosenIndex</a>  = atoi(xml-&gt;getAttributeValue(<span class="stringliteral">&quot;chosenIndex&quot;</span>));

        nPublicTokenCount = 0;
        
        <span class="keywordflow">return</span> 1;
    }
    
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( strNodeName.Compare(<span class="stringliteral">&quot;prototoken&quot;</span>)  )
    {
        <a class="code" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> * pArmoredPrototoken = <span class="keyword">new</span> <a class="code" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a>;
        <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pArmoredPrototoken);
        
        <span class="keywordflow">if</span> (!<a class="code" href="class_o_t_contract.html#a72ffe11fdcf2f6e3566afa9061241f30">OTContract::LoadEncodedTextField</a>(xml, *pArmoredPrototoken) || !pArmoredPrototoken-&gt;<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>())
        {
            <a class="code" href="class_o_t_log.html#a5acd90ac91c2618f395b0ff37ad4f8ee">OTLog::Error</a>(<span class="stringliteral">&quot;Error in OTToken::ProcessXMLNode: prototoken field without value.\n&quot;</span>);
            
            <span class="keyword">delete</span> pArmoredPrototoken;
            pArmoredPrototoken = NULL;
            
            <span class="keywordflow">return</span> (-1); <span class="comment">// error condition</span>
        }
        <span class="keywordflow">else</span> 
        {           
            <a class="code" href="class_o_t_token.html#a3535301cfd5f293433150904c30b392e">m_mapPublic</a>[nPublicTokenCount] = pArmoredPrototoken;
            nPublicTokenCount++;
        }
        
        <span class="keywordflow">return</span> 1;
    }
        
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( strNodeName.Compare(<span class="stringliteral">&quot;privateProtopurse&quot;</span>)  )
    {   
        nPrivateTokenCount = 0;
        
        <span class="keywordflow">return</span> 1;
    }
    
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( strNodeName.Compare(<span class="stringliteral">&quot;privatePrototoken&quot;</span>)  )
    {
        <a class="code" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> * pArmoredPrototoken = <span class="keyword">new</span> <a class="code" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a>;
        <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pArmoredPrototoken);
        
        <span class="keywordflow">if</span> (!<a class="code" href="class_o_t_contract.html#a72ffe11fdcf2f6e3566afa9061241f30">OTContract::LoadEncodedTextField</a>(xml, *pArmoredPrototoken) || !pArmoredPrototoken-&gt;<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>())
        {
            <a class="code" href="class_o_t_log.html#a5acd90ac91c2618f395b0ff37ad4f8ee">OTLog::Error</a>(<span class="stringliteral">&quot;Error in OTToken::ProcessXMLNode: privatePrototoken field without value.\n&quot;</span>);
            
            <span class="keyword">delete</span> pArmoredPrototoken;
            pArmoredPrototoken = NULL;
            
            <span class="keywordflow">return</span> (-1); <span class="comment">// error condition</span>
        }
        <span class="keywordflow">else</span> 
        {           
            <a class="code" href="class_o_t_token.html#a912ee7462a62c21eb168e527474bb35a">m_mapPrivate</a>[nPrivateTokenCount] = pArmoredPrototoken;
            nPrivateTokenCount++;
            
            <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(4, <span class="stringliteral">&quot;Loaded prototoken and adding to m_mapPrivate at index: %d\n&quot;</span>, nPrivateTokenCount-1);
        }
        
        <span class="keywordflow">return</span> 1;
    }
        
    <span class="keywordflow">return</span> nReturnVal;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa661b16971fbca2e3b4a1c3452e4c030"></a><!-- doxytag: member="OTToken::ReassignOwnership" ref="aa661b16971fbca2e3b4a1c3452e4c030" args="(OTNym_or_SymmetricKey &amp;oldOwner, OTNym_or_SymmetricKey &amp;newOwner)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_token.html#aa661b16971fbca2e3b4a1c3452e4c030">OTToken::ReassignOwnership</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_nym__or___symmetric_key.html">OTNym_or_SymmetricKey</a> &amp;&#160;</td>
          <td class="paramname"><em>oldOwner</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_nym__or___symmetric_key.html">OTNym_or_SymmetricKey</a> &amp;&#160;</td>
          <td class="paramname"><em>newOwner</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_token_8cpp_source.html#l00655">655</a> of file <a class="el" href="_o_t_token_8cpp_source.html">OTToken.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keyword">const</span> <span class="keywordtype">char</span> *   szFunc = <span class="stringliteral">&quot;OTToken::ReassignOwnership&quot;</span>;
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strDisplay(szFunc);
    <span class="comment">// --------------------------    </span>
    <span class="keywordtype">bool</span> bSuccess = <span class="keyword">true</span>;

    <span class="keywordflow">if</span> (!oldOwner.<a class="code" href="class_o_t_nym__or___symmetric_key.html#a93b52e7e9810101fbd71680541e7d2eb">CompareID</a>(newOwner)) <span class="comment">// only re-assign if they don&#39;t ALREADY have the same owner.</span>
    {
        <a class="code" href="class_o_t_envelope.html">OTEnvelope</a> theEnvelope(<a class="code" href="class_o_t_token.html#ac029e1035d9610f3f042a46877ccab64">m_ascSpendable</a>);
        <a class="code" href="class_o_t_string.html">OTString</a>   theString; <span class="comment">// output from opening/decrypting (and eventually input for sealing/encrypting) envelope.</span>

        <span class="comment">// Remember, OTPurse can store its own internal symmetric key, for cases</span>
        <span class="comment">// where the purse is &quot;password protected&quot; instead of belonging to a specific Nym.</span>
        <span class="comment">// Therefore the old or new &quot;owner&quot; might actually be a symmetric key.</span>
        <span class="comment">// ******************************************</span>
        <span class="comment">// Decrypt/Open the Envelope into theString</span>
        <span class="comment">//</span>
        bSuccess = oldOwner.<a class="code" href="class_o_t_nym__or___symmetric_key.html#a1c32b029ccef668d2058d54bc69f1b00">Open_or_Decrypt</a>(theEnvelope, theString, &amp;strDisplay);
        <span class="comment">// ******************************************</span>
        <span class="keywordflow">if</span> (bSuccess)
        {
            <a class="code" href="class_o_t_envelope.html">OTEnvelope</a> theNewEnvelope;
            bSuccess = newOwner.<a class="code" href="class_o_t_nym__or___symmetric_key.html#a5ce503bc2494e269fcdb639d559a89c7">Seal_or_Encrypt</a>(theNewEnvelope, theString, &amp;strDisplay);
            <span class="comment">// ******************************************</span>
            <span class="keywordflow">if</span> (bSuccess)
                bSuccess = theNewEnvelope.<a class="code" href="class_o_t_envelope.html#a4ecb56611bd11931de4fae77b8b735ec">GetAsciiArmoredData</a>(<a class="code" href="class_o_t_token.html#ac029e1035d9610f3f042a46877ccab64">m_ascSpendable</a>);
            <span class="comment">// ******************************************</span>
        }
    }
    <span class="keywordflow">return</span> bSuccess;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a30331c0d3eb5a5a78e989dca54440b7d"></a><!-- doxytag: member="OTToken::RecordTokenAsSpent" ref="a30331c0d3eb5a5a78e989dca54440b7d" args="(OTString &amp;theCleartextToken)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_token.html#a30331c0d3eb5a5a78e989dca54440b7d">OTToken::RecordTokenAsSpent</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>theCleartextToken</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_token_8cpp_source.html#l00548">548</a> of file <a class="el" href="_o_t_token_8cpp_source.html">OTToken.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_o_t_string.html">OTString</a> strAssetID(<a class="code" href="class_o_t_instrument.html#a1f6c7b528680d84dcb998d473bdd99a6">GetAssetID</a>());
    <span class="comment">// ----------------------------------------------------------------------------</span>
    <span class="comment">// Calculate the filename (a hash of the Lucre cleartext token ID)</span>
    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theTokenHash;
    theTokenHash.<a class="code" href="class_o_t_identifier.html#ac50b356cf5d5d04c08eaf568d07bcc46">CalculateDigest</a>(theCleartextToken);

    <span class="comment">// Grab the new hash into a string (for use as a filename)</span>
    <a class="code" href="class_o_t_string.html">OTString</a> strTokenHash(theTokenHash);
        
    <a class="code" href="class_o_t_string.html">OTString</a> strAssetFolder;
    strAssetFolder.<a class="code" href="class_o_t_string.html#af1c861f21033a1d583b3cb12f952422e">Format</a>(<span class="stringliteral">&quot;%s.%d&quot;</span>, strAssetID.Get(), <a class="code" href="class_o_t_token.html#ad68798a37c37605745ae99475a942126">GetSeries</a>());
    <span class="comment">// --------------------------------------------------------------------</span>
    <span class="comment">// See if the spent token file ALREADY EXISTS...</span>
    <span class="keywordtype">bool</span> bTokenIsPresent = <a class="code" href="namespace_o_t_d_b.html#a73e39a590dfb64f63065821c6bbcd4c6">OTDB::Exists</a>(<a class="code" href="class_o_t_folders.html#a42ae2661716e4b253807bf95f6d9697e">OTFolders::Spent</a>().Get(), strAssetFolder.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(), strTokenHash.Get());
    
    <span class="comment">// If so, we&#39;re trying to record a token that was already recorded...</span>
    <span class="keywordflow">if</span> (bTokenIsPresent)
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;OTToken::RecordTokenAsSpent: Trying to record token as spent,&quot;</span>
                      <span class="stringliteral">&quot; but it was already recorded: %s%s%s%s%s\n&quot;</span>, 
                      <a class="code" href="class_o_t_folders.html#a42ae2661716e4b253807bf95f6d9697e">OTFolders::Spent</a>().Get(), <a class="code" href="class_o_t_log.html#a42d3c91ff84ecae0690e34efb4619a77">OTLog::PathSeparator</a>(), strAssetFolder.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(), 
                      <a class="code" href="class_o_t_log.html#a42d3c91ff84ecae0690e34efb4619a77">OTLog::PathSeparator</a>(), strTokenHash.Get());
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// ----------------------------------------------------------------------   </span>
    <span class="comment">// FINISHED:</span>
    <span class="comment">//</span>
    <span class="comment">// We actually save the token itself into the file, which is named based</span>
    <span class="comment">// on a hash of the Lucre data.</span>
    <span class="comment">// The success of that operation is also now the success of this one.</span>
    <span class="comment">// --------------------------------------------------------------------</span>
    <span class="comment">//</span>
    <a class="code" href="class_o_t_string.html">OTString</a> strFinal;
    <a class="code" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> ascTemp(<a class="code" href="class_o_t_contract.html#a90c53743214bc0f0025ad63c3ace7bf2">m_strRawFile</a>);
    
    <span class="keywordflow">if</span> (<span class="keyword">false</span> == ascTemp.WriteArmoredString(strFinal, <a class="code" href="class_o_t_contract.html#ac523dac7d72b72e54b1ebb5b3a3b21cc">m_strContractType</a>.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>()))
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;OTToken::RecordTokenAsSpent: Error recording token as &quot;</span>
                      <span class="stringliteral">&quot;spent (failed writing armored string):\n%s%s%s%s%s\n&quot;</span>,
                      <a class="code" href="class_o_t_folders.html#a42ae2661716e4b253807bf95f6d9697e">OTFolders::Spent</a>().Get(), <a class="code" href="class_o_t_log.html#a42d3c91ff84ecae0690e34efb4619a77">OTLog::PathSeparator</a>(), strAssetFolder.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(), 
                      <a class="code" href="class_o_t_log.html#a42d3c91ff84ecae0690e34efb4619a77">OTLog::PathSeparator</a>(), strTokenHash.Get());
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// --------------------------------------------------------------------</span>
    <span class="keyword">const</span> <span class="keywordtype">bool</span> bSaved = <a class="code" href="namespace_o_t_d_b.html#a7ec0a905bba2c1c8ba5b1e873e12eab4">OTDB::StorePlainString</a>(strFinal.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(), <a class="code" href="class_o_t_folders.html#a42ae2661716e4b253807bf95f6d9697e">OTFolders::Spent</a>().<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(), 
                                               strAssetFolder.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(), strTokenHash.Get());
    <span class="keywordflow">if</span> (!bSaved)
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;OTToken::RecordTokenAsSpent: Error saving file: %s%s%s%s%s\n&quot;</span>, 
                      <a class="code" href="class_o_t_folders.html#a42ae2661716e4b253807bf95f6d9697e">OTFolders::Spent</a>().Get(), <a class="code" href="class_o_t_log.html#a42d3c91ff84ecae0690e34efb4619a77">OTLog::PathSeparator</a>(), strAssetFolder.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(), 
                      <a class="code" href="class_o_t_log.html#a42d3c91ff84ecae0690e34efb4619a77">OTLog::PathSeparator</a>(), strTokenHash.Get());
    }
    
    <span class="keywordflow">return</span> bSaved;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a973344e50b0b1e8cab012a3a1dc54a0d"></a><!-- doxytag: member="OTToken::Release" ref="a973344e50b0b1e8cab012a3a1dc54a0d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_token.html#a973344e50b0b1e8cab012a3a1dc54a0d">OTToken::Release</a> </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reimplemented from <a class="el" href="class_o_t_instrument.html#a4fdc0a70ec257ea7f8f58e7774932d60">OTInstrument</a>.</p>

<p>Definition at line <a class="el" href="_o_t_token_8cpp_source.html#l00278">278</a> of file <a class="el" href="_o_t_token_8cpp_source.html">OTToken.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_o_t_token.html#a923ed4bd7498f5f2d6bfafa12c01153d">Release_Token</a>();
    
    <a class="code" href="class_o_t_instrument.html#a4fdc0a70ec257ea7f8f58e7774932d60">ot_super::Release</a>(); <span class="comment">// since I&#39;ve overridden the base class, I call it now...</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="a923ed4bd7498f5f2d6bfafa12c01153d"></a><!-- doxytag: member="OTToken::Release_Token" ref="a923ed4bd7498f5f2d6bfafa12c01153d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_token.html#a923ed4bd7498f5f2d6bfafa12c01153d">OTToken::Release_Token</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_token_8cpp_source.html#l00265">265</a> of file <a class="el" href="_o_t_token_8cpp_source.html">OTToken.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// -------------------------</span>
    <a class="code" href="class_o_t_token.html#a01a0360eaceb37845f0b4f35256aaab3">m_Signature</a>.<a class="code" href="class_o_t_string.html#abef4b21b2170468705c58d64212d7257">Release</a>();
    <a class="code" href="class_o_t_token.html#ac029e1035d9610f3f042a46877ccab64">m_ascSpendable</a>.<a class="code" href="class_o_t_string.html#abef4b21b2170468705c58d64212d7257">Release</a>();
    <span class="comment">// -------------------------</span>
<span class="comment">//  InitToken();</span>
    <span class="comment">// -------------------------    </span>
    <a class="code" href="class_o_t_token.html#ab089fa43a5066ec0387d319f22e98b69">ReleasePrototokens</a>();
    <span class="comment">// -------------------------</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab089fa43a5066ec0387d319f22e98b69"></a><!-- doxytag: member="OTToken::ReleasePrototokens" ref="ab089fa43a5066ec0387d319f22e98b69" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_token.html#ab089fa43a5066ec0387d319f22e98b69">OTToken::ReleasePrototokens</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_token_8cpp_source.html#l00302">302</a> of file <a class="el" href="_o_t_token_8cpp_source.html">OTToken.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_token_8hpp.html#a953c4fc4f20b141e33a3dc9a82d7d5cd">mapOfPrototokens</a>, <a class="code" href="class_o_t_token.html#a3535301cfd5f293433150904c30b392e">m_mapPublic</a>)
    {       
        <a class="code" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> * pPrototoken = (*it).second;
        <a class="code" href="_o_t_assert_8hpp.html#a033b133f48e61f2b227c52ad2be0c882">OT_ASSERT_MSG</a>(NULL != pPrototoken, <span class="stringliteral">&quot;NULL OTASCIIArmor pointer in OTToken::ReleasePrototokens.&quot;</span>);
        
        <span class="keyword">delete</span> pPrototoken; pPrototoken = NULL;
    }
    <span class="comment">// ------------------------------------------------</span>
    <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_token_8hpp.html#a953c4fc4f20b141e33a3dc9a82d7d5cd">mapOfPrototokens</a>, <a class="code" href="class_o_t_token.html#a912ee7462a62c21eb168e527474bb35a">m_mapPrivate</a>)
    {       
        <a class="code" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> * pPrototoken = (*it).second;
        <a class="code" href="_o_t_assert_8hpp.html#a033b133f48e61f2b227c52ad2be0c882">OT_ASSERT_MSG</a>(NULL != pPrototoken, <span class="stringliteral">&quot;NULL OTASCIIArmor pointer in OTToken::ReleasePrototokens.&quot;</span>);
        
        <span class="keyword">delete</span> pPrototoken; pPrototoken = NULL;
    }
    <span class="comment">// ------------------------------------------------    </span>
    <a class="code" href="class_o_t_token.html#a3535301cfd5f293433150904c30b392e">m_mapPublic</a>.clear();
    <a class="code" href="class_o_t_token.html#a912ee7462a62c21eb168e527474bb35a">m_mapPrivate</a>.clear();
    <span class="comment">// ------------------------------------------------</span>
    <a class="code" href="class_o_t_token.html#a1cc49ca8ea8914ae5bf2ad65a2c8fee0">m_nTokenCount</a>   = 0;
    <span class="comment">// ------------------------------------------------</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="a9774f03f56290413acff03b8ea428052"></a><!-- doxytag: member="OTToken::SaveContractWallet" ref="a9774f03f56290413acff03b8ea428052" args="(std::ofstream &amp;ofs)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_token.html#a9774f03f56290413acff03b8ea428052">OTToken::SaveContractWallet</a> </td>
          <td>(</td>
          <td class="paramtype">std::ofstream &amp;&#160;</td>
          <td class="paramname"><em>ofs</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reimplemented from <a class="el" href="class_o_t_instrument.html#a4d5f08d86edc07a603c300fd46ebfca5">OTInstrument</a>.</p>

<p>Definition at line <a class="el" href="_o_t_token_8cpp_source.html#l00329">329</a> of file <a class="el" href="_o_t_token_8cpp_source.html">OTToken.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// mapOfPrototokens m_mapPrivate;   // The elements are accessed [0..N]. mapPublic[2] corresponds to map_Private[2], etc.</span>

    <span class="keywordflow">return</span> <span class="keyword">true</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a54332197c14671c10d0a0c6177b6339f"></a><!-- doxytag: member="OTToken::SetDenomination" ref="a54332197c14671c10d0a0c6177b6339f" args="(int64_t lVal)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_token.html#a54332197c14671c10d0a0c6177b6339f">OTToken::SetDenomination</a> </td>
          <td>(</td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>lVal</em></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_token_8hpp_source.html#l00341">341</a> of file <a class="el" href="_o_t_token_8hpp_source.html">OTToken.hpp</a>.</p>
<div class="fragment"><pre class="fragment">{ <a class="code" href="class_o_t_token.html#ab60d3bcde176d6f5dff82dac58c4573c">m_lDenomination</a> = lVal; }
</pre></div>
</div>
</div>
<a class="anchor" id="a8666afcdee1f4cb0b45e278d7196d6db"></a><!-- doxytag: member="OTToken::SetSavePrivateKeys" ref="a8666afcdee1f4cb0b45e278d7196d6db" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_token.html#a8666afcdee1f4cb0b45e278d7196d6db">OTToken::SetSavePrivateKeys</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_token_8hpp_source.html#l00275">275</a> of file <a class="el" href="_o_t_token_8hpp_source.html">OTToken.hpp</a>.</p>
<div class="fragment"><pre class="fragment">{ <a class="code" href="class_o_t_token.html#a62b6a27bb859c163ce65a8c2df253335">m_bSavePrivateKeys</a> = <span class="keyword">true</span>; }
</pre></div>
</div>
</div>
<a class="anchor" id="adda0500e68d514fdd08a2b6837400d2a"></a><!-- doxytag: member="OTToken::SetSeriesAndExpiration" ref="adda0500e68d514fdd08a2b6837400d2a" args="(int32_t nSeries, time64_t VALID_FROM, time64_t VALID_TO)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_token.html#adda0500e68d514fdd08a2b6837400d2a">OTToken::SetSeriesAndExpiration</a> </td>
          <td>(</td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>nSeries</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="_o_t_common_8hpp.html#ad28ff0a3eda18840f6bda5872819167f">time64_t</a>&#160;</td>
          <td class="paramname"><em>VALID_FROM</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="_o_t_common_8hpp.html#ad28ff0a3eda18840f6bda5872819167f">time64_t</a>&#160;</td>
          <td class="paramname"><em>VALID_TO</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_token_8hpp_source.html#l00317">317</a> of file <a class="el" href="_o_t_token_8hpp_source.html">OTToken.hpp</a>.</p>
<div class="fragment"><pre class="fragment">    {   <a class="code" href="class_o_t_token.html#a3952d4ce82c81016a70a94f319be337d">m_nSeries</a> = nSeries;    <a class="code" href="class_o_t_instrument.html#aeb9de88f78cf2ffe456a7a679afcd206">m_VALID_FROM</a> = VALID_FROM;  <a class="code" href="class_o_t_instrument.html#a4cf6fc2e7939f741c070331b5f35a1ea">m_VALID_TO</a> = VALID_TO; }
</pre></div>
</div>
</div>
<a class="anchor" id="a0d086617307060980956b431c6b020c5"></a><!-- doxytag: member="OTToken::SetSignature" ref="a0d086617307060980956b431c6b020c5" args="(const OTASCIIArmor &amp;theSignature, int32_t nTokenIndex)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_token.html#a0d086617307060980956b431c6b020c5">OTToken::SetSignature</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> &amp;&#160;</td>
          <td class="paramname"><em>theSignature</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>nTokenIndex</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_token_8cpp_source.html#l01078">1078</a> of file <a class="el" href="_o_t_token_8cpp_source.html">OTToken.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// The server sets the signature, and then sends the token back to the</span>
    <span class="comment">// client. We release all these prototokens before doing so, because there&#39;s</span>
    <span class="comment">// no point in sending them all back to the client again, who already has them anyway.</span>
    <span class="comment">// This is important because otherwise I wouldn&#39;t release, because the client</span>
    <span class="comment">// still has to look up the private coin in order to unblind. But we&#39;re not</span>
    <span class="comment">// on the client if we&#39;re signing -- we&#39;re on the server -- who doesn&#39;t have</span>
    <span class="comment">// those private coins anyway.</span>
    <a class="code" href="class_o_t_token.html#ab089fa43a5066ec0387d319f22e98b69">ReleasePrototokens</a>();
    
    <span class="comment">// We now officially have the bank&#39;s signature on this token.</span>
    <a class="code" href="class_o_t_token.html#a01a0360eaceb37845f0b4f35256aaab3">m_Signature</a>.<a class="code" href="class_o_t_string.html#aa5db620fe8e60c849585d741975db991">Set</a>(theSignature);
    
<span class="comment">//  OTLog::vError(&quot;DEBUG OTToken::SetSignature. nTokenIndex is %d.\nm_Signature is:\n%s\n&quot;</span>
<span class="comment">//          &quot;-------------------------------------\n&quot;,</span>
<span class="comment">//          nTokenIndex, m_Signature.Get());</span>
    
    <span class="comment">// We have to flag which index was signed by the mint, so that</span>
    <span class="comment">// the client knows which private coin to use for unblinding.</span>
    <span class="comment">// (Once the coin is unblinded, it will be ready to spend.)</span>
    <a class="code" href="class_o_t_token.html#a346126e90c4cf017d695dd44f5d0d8e9">ChooseIndex</a>(nTokenIndex);

    <a class="code" href="class_o_t_token.html#abb3c86c043242862d2e3a6dacf9d1a08">m_State</a> = <a class="code" href="class_o_t_token.html#ad0fb0c562a9e37fcdb561e56075672ddade23d1dd76bccd72a985f722f6ce74bd">OTToken::signedToken</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a77bee79c2162e2b3e0ca64fa21739c3d"></a><!-- doxytag: member="OTToken::SetSpendable" ref="a77bee79c2162e2b3e0ca64fa21739c3d" args="(const OTASCIIArmor &amp;theArmor)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_token.html#a77bee79c2162e2b3e0ca64fa21739c3d">OTToken::SetSpendable</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> &amp;&#160;</td>
          <td class="paramname"><em>theArmor</em></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_token_8hpp_source.html#l00287">287</a> of file <a class="el" href="_o_t_token_8hpp_source.html">OTToken.hpp</a>.</p>
<div class="fragment"><pre class="fragment">{ <a class="code" href="class_o_t_token.html#ac029e1035d9610f3f042a46877ccab64">m_ascSpendable</a>.<a class="code" href="class_o_t_string.html#aa5db620fe8e60c849585d741975db991">Set</a>(theArmor); }
</pre></div>
</div>
</div>
<a class="anchor" id="ac758de04ed60991098005a7ac9578d71"></a><!-- doxytag: member="OTToken::TokenFactory" ref="ac758de04ed60991098005a7ac9578d71" args="(OTString strInput)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_token.html">OTToken</a> * <a class="el" href="class_o_t_token.html#ac758de04ed60991098005a7ac9578d71">OTToken::TokenFactory</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_string.html">OTString</a>&#160;</td>
          <td class="paramname"><em>strInput</em></td><td>)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_token_8cpp_source.html#l00475">475</a> of file <a class="el" href="_o_t_token_8cpp_source.html">OTToken.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
<span class="comment">//  const char * szFunc = &quot;OTToken::TokenFactory&quot;;</span>
    <span class="comment">// --------------------------------------------------------------------</span>
    <a class="code" href="class_o_t_string.html">OTString</a> strContract, strFirstLine; <span class="comment">// output for the below function.</span>
    <span class="keyword">const</span> <span class="keywordtype">bool</span> bProcessed = <a class="code" href="class_o_t_contract.html#a00d55a1901fa72acbbe9271b7c984d37">OTContract::DearmorAndTrim</a>(strInput, strContract, strFirstLine);
    <span class="comment">// --------------------------------------------------------------------</span>
    <span class="keywordflow">if</span> (bProcessed)
    {
        <a class="code" href="class_o_t_token.html">OTToken</a> * pToken = <a class="code" href="class_o_t_token.html#a4743b9502c620181569445d58fbdf826">OTToken::LowLevelInstantiate</a>(strFirstLine);
        
        <span class="comment">// The string didn&#39;t match any of the options in the factory.</span>
        <span class="keywordflow">if</span> (NULL == pToken)
            <span class="keywordflow">return</span> NULL;
        
        <span class="comment">// Does the contract successfully load from the string passed in?</span>
        <span class="keywordflow">if</span> (pToken-&gt;<a class="code" href="class_o_t_contract.html#a36300e34dcd94ed7006d98b392d46815">LoadContractFromString</a>(strContract))
            <span class="keywordflow">return</span> pToken;
        <span class="keywordflow">else</span>
            <span class="keyword">delete</span> pToken;
    }
    
    <span class="keywordflow">return</span> NULL;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a051bef4d15a507ef1c7e3922aba9252d"></a><!-- doxytag: member="OTToken::TokenFactory" ref="a051bef4d15a507ef1c7e3922aba9252d" args="(OTString strInput, const OTPurse &amp;thePurse)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_token.html">OTToken</a> * <a class="el" href="class_o_t_token.html#ac758de04ed60991098005a7ac9578d71">OTToken::TokenFactory</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_string.html">OTString</a>&#160;</td>
          <td class="paramname"><em>strInput</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_purse.html">OTPurse</a> &amp;&#160;</td>
          <td class="paramname"><em>thePurse</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_token_8cpp_source.html#l00449">449</a> of file <a class="el" href="_o_t_token_8cpp_source.html">OTToken.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
<span class="comment">//  const char * szFunc = &quot;OTToken::TokenFactory&quot;;</span>
    <span class="comment">// --------------------------------------------------------------------</span>
    <a class="code" href="class_o_t_string.html">OTString</a> strContract, strFirstLine; <span class="comment">// output for the below function.</span>
    <span class="keyword">const</span> <span class="keywordtype">bool</span> bProcessed = <a class="code" href="class_o_t_contract.html#a00d55a1901fa72acbbe9271b7c984d37">OTContract::DearmorAndTrim</a>(strInput, strContract, strFirstLine);
    <span class="comment">// --------------------------------------------------------------------</span>
    <span class="keywordflow">if</span> (bProcessed)
    {
        <a class="code" href="class_o_t_token.html">OTToken</a> * pToken = <a class="code" href="class_o_t_token.html#a4743b9502c620181569445d58fbdf826">OTToken::LowLevelInstantiate</a>(strFirstLine, thePurse);
        
        <span class="comment">// The string didn&#39;t match any of the options in the factory.</span>
        <span class="keywordflow">if</span> (NULL == pToken)
            <span class="keywordflow">return</span> NULL;
        
        <span class="comment">// Does the contract successfully load from the string passed in?</span>
        <span class="keywordflow">if</span> (pToken-&gt;<a class="code" href="class_o_t_contract.html#a36300e34dcd94ed7006d98b392d46815">LoadContractFromString</a>(strContract))
            <span class="keywordflow">return</span> pToken;
        <span class="keywordflow">else</span>
            <span class="keyword">delete</span> pToken;
    }
    
    <span class="keywordflow">return</span> NULL;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac2f914c3ff3d07c9fd1150e507da0a42"></a><!-- doxytag: member="OTToken::TokenFactory" ref="ac2f914c3ff3d07c9fd1150e507da0a42" args="(OTString strInput, const OTIdentifier &amp;SERVER_ID, const OTIdentifier &amp;ASSET_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_token.html">OTToken</a> * <a class="el" href="class_o_t_token.html#ac758de04ed60991098005a7ac9578d71">OTToken::TokenFactory</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_string.html">OTString</a>&#160;</td>
          <td class="paramname"><em>strInput</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;&#160;</td>
          <td class="paramname"><em>ASSET_ID</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_token_8cpp_source.html#l00423">423</a> of file <a class="el" href="_o_t_token_8cpp_source.html">OTToken.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
<span class="comment">//  const char * szFunc = &quot;OTToken::TokenFactory&quot;;</span>
    <span class="comment">// --------------------------------------------------------------------</span>
    <a class="code" href="class_o_t_string.html">OTString</a> strContract, strFirstLine; <span class="comment">// output for the below function.</span>
    <span class="keyword">const</span> <span class="keywordtype">bool</span> bProcessed = <a class="code" href="class_o_t_contract.html#a00d55a1901fa72acbbe9271b7c984d37">OTContract::DearmorAndTrim</a>(strInput, strContract, strFirstLine);
    <span class="comment">// --------------------------------------------------------------------</span>
    <span class="keywordflow">if</span> (bProcessed)
    {
        <a class="code" href="class_o_t_token.html">OTToken</a> * pToken = <a class="code" href="class_o_t_token.html#a4743b9502c620181569445d58fbdf826">OTToken::LowLevelInstantiate</a>(strFirstLine, SERVER_ID, ASSET_ID);
        
        <span class="comment">// The string didn&#39;t match any of the options in the factory.</span>
        <span class="keywordflow">if</span> (NULL == pToken)
            <span class="keywordflow">return</span> NULL;
        
        <span class="comment">// Does the contract successfully load from the string passed in?</span>
        <span class="keywordflow">if</span> (pToken-&gt;<a class="code" href="class_o_t_contract.html#a36300e34dcd94ed7006d98b392d46815">LoadContractFromString</a>(strContract))
            <span class="keywordflow">return</span> pToken;
        <span class="keywordflow">else</span>
            <span class="keyword">delete</span> pToken;
    }
    
    <span class="keywordflow">return</span> NULL;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a2863bbe79da29265b1274ddabd187f44"></a><!-- doxytag: member="OTToken::UpdateContents" ref="a2863bbe79da29265b1274ddabd187f44" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_token.html#a2863bbe79da29265b1274ddabd187f44">OTToken::UpdateContents</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reimplemented from <a class="el" href="class_o_t_scriptable.html#accb9d578e3b10cee62e6aba7c178cf62">OTScriptable</a>.</p>

<p>Definition at line <a class="el" href="_o_t_token_8cpp_source.html#l00711">711</a> of file <a class="el" href="_o_t_token_8cpp_source.html">OTToken.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (<a class="code" href="class_o_t_token.html#abb3c86c043242862d2e3a6dacf9d1a08">m_State</a> == <a class="code" href="class_o_t_token.html#ad0fb0c562a9e37fcdb561e56075672dda1596fd8aed4ab475660fbfca4f27427d">OTToken::spendableToken</a>)
        <a class="code" href="class_o_t_contract.html#ac523dac7d72b72e54b1ebb5b3a3b21cc">m_strContractType</a>.<a class="code" href="class_o_t_string.html#aa5db620fe8e60c849585d741975db991">Set</a>(<span class="stringliteral">&quot;CASH TOKEN&quot;</span>);
    
    <a class="code" href="class_o_t_string.html">OTString</a> ASSET_TYPE_ID(<a class="code" href="class_o_t_instrument.html#abf1f971534fd87a5f3ad3b7306aebe4c">m_AssetTypeID</a>), SERVER_ID(<a class="code" href="class_o_t_instrument.html#a53186ff153aef87f510ed1afdb347913">m_ServerID</a>);
    
    <a class="code" href="class_o_t_string.html">OTString</a> strState;
    <span class="keywordflow">switch</span> (<a class="code" href="class_o_t_token.html#abb3c86c043242862d2e3a6dacf9d1a08">m_State</a>) {
        <span class="keywordflow">case</span> <a class="code" href="class_o_t_token.html#ad0fb0c562a9e37fcdb561e56075672dda7aa332ee22a810c02591b7d50a86263b">OTToken::blankToken</a>:
            strState.<a class="code" href="class_o_t_string.html#aa5db620fe8e60c849585d741975db991">Set</a>(<span class="stringliteral">&quot;blankToken&quot;</span>);
            <span class="keywordflow">break</span>;
        <span class="keywordflow">case</span> <a class="code" href="class_o_t_token.html#ad0fb0c562a9e37fcdb561e56075672dda791cacb01ee68d2917d9176dc862b4ec">OTToken::protoToken</a>:
            strState.<a class="code" href="class_o_t_string.html#aa5db620fe8e60c849585d741975db991">Set</a>(<span class="stringliteral">&quot;protoToken&quot;</span>);
            <span class="keywordflow">break</span>;
        <span class="keywordflow">case</span> <a class="code" href="class_o_t_token.html#ad0fb0c562a9e37fcdb561e56075672ddade23d1dd76bccd72a985f722f6ce74bd">OTToken::signedToken</a>:
            strState.<a class="code" href="class_o_t_string.html#aa5db620fe8e60c849585d741975db991">Set</a>(<span class="stringliteral">&quot;signedToken&quot;</span>);
            <span class="keywordflow">break</span>;
        <span class="keywordflow">case</span> <a class="code" href="class_o_t_token.html#ad0fb0c562a9e37fcdb561e56075672dda1596fd8aed4ab475660fbfca4f27427d">OTToken::spendableToken</a>:
            strState.<a class="code" href="class_o_t_string.html#aa5db620fe8e60c849585d741975db991">Set</a>(<span class="stringliteral">&quot;spendableToken&quot;</span>);
            <span class="keywordflow">break</span>;
        <span class="keywordflow">case</span> <a class="code" href="class_o_t_token.html#ad0fb0c562a9e37fcdb561e56075672ddac49e6ae0a44b874f2670773a47d1fc3c">OTToken::verifiedToken</a>:
            strState.<a class="code" href="class_o_t_string.html#aa5db620fe8e60c849585d741975db991">Set</a>(<span class="stringliteral">&quot;verifiedToken&quot;</span>);
            <span class="keywordflow">break</span>;
        <span class="keywordflow">default</span>:
            strState.<a class="code" href="class_o_t_string.html#aa5db620fe8e60c849585d741975db991">Set</a>(<span class="stringliteral">&quot;errorToken&quot;</span>);
            <span class="keywordflow">break</span>;
    }

    int64_t lFrom = <a class="code" href="_o_t_common_8hpp.html#a4c31551b478d298d694f7df4915b4302">OTTimeGetSecondsFromTime</a>(<a class="code" href="class_o_t_instrument.html#aeb9de88f78cf2ffe456a7a679afcd206">m_VALID_FROM</a>);
    int64_t lTo = <a class="code" href="_o_t_common_8hpp.html#a4c31551b478d298d694f7df4915b4302">OTTimeGetSecondsFromTime</a>(<a class="code" href="class_o_t_instrument.html#a4cf6fc2e7939f741c070331b5f35a1ea">m_VALID_TO</a>);

    <span class="comment">// I release this because I&#39;m about to repopulate it.</span>
    <a class="code" href="class_o_t_contract.html#a087fc09cfa4b2fd9076088360a5e5039">m_xmlUnsigned</a>.<a class="code" href="class_o_t_string.html#abef4b21b2170468705c58d64212d7257">Release</a>();
    
    <a class="code" href="class_o_t_contract.html#a087fc09cfa4b2fd9076088360a5e5039">m_xmlUnsigned</a>.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;&lt;?xml version=\&quot;%s\&quot;?&gt;\n\n&quot;</span>, <span class="stringliteral">&quot;1.0&quot;</span>);     
    
    <a class="code" href="class_o_t_contract.html#a087fc09cfa4b2fd9076088360a5e5039">m_xmlUnsigned</a>.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;&lt;token\n version=\&quot;%s\&quot;\n state=\&quot;%s\&quot;\n denomination=\&quot;%lld\&quot;\n&quot;</span>
                              <span class="stringliteral">&quot; assetTypeID=\&quot;%s\&quot;\n&quot;</span>
                              <span class="stringliteral">&quot; serverID=\&quot;%s\&quot;\n&quot;</span>
                              <span class="stringliteral">&quot; series=\&quot;%d\&quot;\n&quot;</span>
                              <span class="stringliteral">&quot; validFrom=\&quot;%&quot;</span> PRId64<span class="stringliteral">&quot;\&quot;\n&quot;</span>
                              <span class="stringliteral">&quot; validTo=\&quot;%&quot;</span> PRId64<span class="stringliteral">&quot;\&quot;&quot;</span>
                              <span class="stringliteral">&quot; &gt;\n\n&quot;</span>, 
                              <a class="code" href="class_o_t_contract.html#aa0d889e0e1670b56fedca245041a5ed3">m_strVersion</a>.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(), strState.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(), <a class="code" href="class_o_t_token.html#a4e17470c475313139d1ed975e6c26b5a">GetDenomination</a>(), 
                              ASSET_TYPE_ID.Get(), 
                              SERVER_ID.Get(),
                              <a class="code" href="class_o_t_token.html#a3952d4ce82c81016a70a94f319be337d">m_nSeries</a>, lFrom, lTo );      

    <span class="comment">// signed tokens, as well as spendable tokens, both carry a TokenID</span>
    <span class="comment">// (The spendable token contains the unblinded version.)</span>
    <span class="keywordflow">if</span> (<a class="code" href="class_o_t_token.html#ad0fb0c562a9e37fcdb561e56075672ddade23d1dd76bccd72a985f722f6ce74bd">OTToken::signedToken</a>    == <a class="code" href="class_o_t_token.html#abb3c86c043242862d2e3a6dacf9d1a08">m_State</a> || 
        <a class="code" href="class_o_t_token.html#ad0fb0c562a9e37fcdb561e56075672dda1596fd8aed4ab475660fbfca4f27427d">OTToken::spendableToken</a> == <a class="code" href="class_o_t_token.html#abb3c86c043242862d2e3a6dacf9d1a08">m_State</a>)
    {
        <a class="code" href="class_o_t_contract.html#a087fc09cfa4b2fd9076088360a5e5039">m_xmlUnsigned</a>.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;&lt;tokenID&gt;\n%s&lt;/tokenID&gt;\n\n&quot;</span>, <a class="code" href="class_o_t_token.html#ac029e1035d9610f3f042a46877ccab64">m_ascSpendable</a>.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
    }
    
    <span class="comment">// Only signedTokens carry the signature, which is discarded in spendable tokens.</span>
    <span class="comment">// (Because it is not used past the unblinding stage anyway, and because it could</span>
    <span class="comment">// be used to track the token.)</span>
    <span class="keywordflow">if</span> (<a class="code" href="class_o_t_token.html#ad0fb0c562a9e37fcdb561e56075672ddade23d1dd76bccd72a985f722f6ce74bd">OTToken::signedToken</a> == <a class="code" href="class_o_t_token.html#abb3c86c043242862d2e3a6dacf9d1a08">m_State</a>)
    {
        <a class="code" href="class_o_t_contract.html#a087fc09cfa4b2fd9076088360a5e5039">m_xmlUnsigned</a>.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;&lt;tokenSignature&gt;\n%s&lt;/tokenSignature&gt;\n\n&quot;</span>, <a class="code" href="class_o_t_token.html#a01a0360eaceb37845f0b4f35256aaab3">m_Signature</a>.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
    }
    
    <span class="keywordflow">if</span> ((<a class="code" href="class_o_t_token.html#ad0fb0c562a9e37fcdb561e56075672dda791cacb01ee68d2917d9176dc862b4ec">OTToken::protoToken</a> == <a class="code" href="class_o_t_token.html#abb3c86c043242862d2e3a6dacf9d1a08">m_State</a> || 
         <a class="code" href="class_o_t_token.html#ad0fb0c562a9e37fcdb561e56075672ddade23d1dd76bccd72a985f722f6ce74bd">OTToken::signedToken</a> == <a class="code" href="class_o_t_token.html#abb3c86c043242862d2e3a6dacf9d1a08">m_State</a>)   &amp;&amp; <a class="code" href="class_o_t_token.html#a1cc49ca8ea8914ae5bf2ad65a2c8fee0">m_nTokenCount</a>)
    {
        <a class="code" href="class_o_t_contract.html#a087fc09cfa4b2fd9076088360a5e5039">m_xmlUnsigned</a>.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;&lt;protopurse count=\&quot;%d\&quot; chosenIndex=\&quot;%d\&quot;&gt;\n\n&quot;</span>, <a class="code" href="class_o_t_token.html#a1cc49ca8ea8914ae5bf2ad65a2c8fee0">m_nTokenCount</a>, <a class="code" href="class_o_t_token.html#a7eac324070d47ee46a46d1a084f0676c">m_nChosenIndex</a>);
        
        <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_token_8hpp.html#a953c4fc4f20b141e33a3dc9a82d7d5cd">mapOfPrototokens</a>, <a class="code" href="class_o_t_token.html#a3535301cfd5f293433150904c30b392e">m_mapPublic</a>)
        {
            <a class="code" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> * pPrototoken = (*it).second;
            <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pPrototoken);
            
            <a class="code" href="class_o_t_contract.html#a087fc09cfa4b2fd9076088360a5e5039">m_xmlUnsigned</a>.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;&lt;prototoken&gt;\n%s&lt;/prototoken&gt;\n\n&quot;</span>, pPrototoken-&gt;<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
        }       
        <a class="code" href="class_o_t_contract.html#a087fc09cfa4b2fd9076088360a5e5039">m_xmlUnsigned</a>.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;&lt;/protopurse&gt;\n\n&quot;</span>);
    }
    
    <span class="keywordflow">if</span> (<a class="code" href="class_o_t_token.html#a62b6a27bb859c163ce65a8c2df253335">m_bSavePrivateKeys</a>)
    {
        <a class="code" href="class_o_t_token.html#a62b6a27bb859c163ce65a8c2df253335">m_bSavePrivateKeys</a> = <span class="keyword">false</span>; <span class="comment">// set it back to false;</span>
        
        <a class="code" href="class_o_t_contract.html#a087fc09cfa4b2fd9076088360a5e5039">m_xmlUnsigned</a>.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;&lt;privateProtopurse&gt;\n\n&quot;</span>);
        
        <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_token_8hpp.html#a953c4fc4f20b141e33a3dc9a82d7d5cd">mapOfPrototokens</a>, <a class="code" href="class_o_t_token.html#a912ee7462a62c21eb168e527474bb35a">m_mapPrivate</a>)
        {
            <a class="code" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> * pPrototoken = (*it).second;
            <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pPrototoken);
            
            <a class="code" href="class_o_t_contract.html#a087fc09cfa4b2fd9076088360a5e5039">m_xmlUnsigned</a>.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;&lt;privatePrototoken&gt;\n%s&lt;/privatePrototoken&gt;\n\n&quot;</span>, pPrototoken-&gt;<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
        }       
        <a class="code" href="class_o_t_contract.html#a087fc09cfa4b2fd9076088360a5e5039">m_xmlUnsigned</a>.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;&lt;/privateProtopurse&gt;\n\n&quot;</span>);
    }
    
    <a class="code" href="class_o_t_contract.html#a087fc09cfa4b2fd9076088360a5e5039">m_xmlUnsigned</a>.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;&lt;/token&gt;\n&quot;</span>);            
}
</pre></div>
</div>
</div>
<a class="anchor" id="ace3316371a1b6ff2fd8a6b35e0a0f820"></a><!-- doxytag: member="OTToken::VerifyToken" ref="ace3316371a1b6ff2fd8a6b35e0a0f820" args="(OTPseudonym &amp;theNotary, OTMint &amp;theMint)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_token.html#ace3316371a1b6ff2fd8a6b35e0a0f820">OTToken::VerifyToken</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;&#160;</td>
          <td class="paramname"><em>theNotary</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_mint.html">OTMint</a> &amp;&#160;</td>
          <td class="paramname"><em>theMint</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_token_8cpp_source.html#l01120">1120</a> of file <a class="el" href="_o_t_token_8cpp_source.html">OTToken.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">//OTLog::vError(&quot;%s &lt;bank info&gt; &lt;coin&gt;\n&quot;,argv[0]);</span>
    
    <span class="keywordflow">if</span> (<a class="code" href="class_o_t_token.html#ad0fb0c562a9e37fcdb561e56075672dda1596fd8aed4ab475660fbfca4f27427d">OTToken::spendableToken</a> != <a class="code" href="class_o_t_token.html#abb3c86c043242862d2e3a6dacf9d1a08">m_State</a>)
    {
        <a class="code" href="class_o_t_log.html#a5acd90ac91c2618f395b0ff37ad4f8ee">OTLog::Error</a>(<span class="stringliteral">&quot;Expected spendable token in OTToken::VerifyToken\n&quot;</span>);
        

        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    
<span class="comment">//  _OT_Lucre_Dumper setDumper; // OTMint::VerifyToken already does this. Unnecessary here?</span>

    <span class="comment">// load the bank and coin info into the bios</span>
    <span class="comment">// The Mint private info is encrypted in m_ascPrivate. So I need to extract that</span>
    <span class="comment">// first before I can use it.</span>
    <a class="code" href="class_o_t_envelope.html">OTEnvelope</a> theEnvelope(<a class="code" href="class_o_t_token.html#ac029e1035d9610f3f042a46877ccab64">m_ascSpendable</a>);
    
    <a class="code" href="class_o_t_string.html">OTString</a> strContents; <span class="comment">// output from opening the envelope.</span>
    <span class="comment">// Decrypt the Envelope into strContents    </span>
    <span class="keywordflow">if</span> (!theEnvelope.Open(theNotary, strContents))
        <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">// todo log error, etc.</span>
    
    <span class="comment">// Verify that the series is correct...</span>
    <span class="comment">// (Otherwise, someone passed us the wrong Mint and the</span>
    <span class="comment">// thing won&#39;t verify anyway, since we&#39;d have the wrong keys.)</span>
    <span class="keywordflow">if</span> (<a class="code" href="class_o_t_token.html#a3952d4ce82c81016a70a94f319be337d">m_nSeries</a>       != theMint.<a class="code" href="class_o_t_mint.html#a18ccc7a8eebfdf973533cf3b96e6b7ea">GetSeries</a>() ||
        <span class="comment">// Someone might, however, in a clever attack, choose to leave</span>
        <span class="comment">// the series intact, but change the expiration dates, so that the</span>
        <span class="comment">// mint keys continue to work properly for this token, but then</span>
        <span class="comment">// when we check the date, it APPEARS good, when really the dates</span>
        <span class="comment">// were altered! To prevent this, we explicitly verify the series</span>
        <span class="comment">// information on the token against the same info on the mint,</span>
        <span class="comment">// BEFORE checking the date.</span>
        <a class="code" href="class_o_t_instrument.html#aeb9de88f78cf2ffe456a7a679afcd206">m_VALID_FROM</a>    != theMint.<a class="code" href="class_o_t_mint.html#addbba94b7aa7b18eb04cc4f30a72531b">GetValidFrom</a>() ||
        <a class="code" href="class_o_t_instrument.html#a4cf6fc2e7939f741c070331b5f35a1ea">m_VALID_TO</a>      != theMint.<a class="code" href="class_o_t_mint.html#acf016a6e45dd64aed970dbd97038ed58">GetValidTo</a>())
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;Token series information doesn&#39;t match Mint series information!\n&quot;</span>);
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    
    <span class="comment">// Verify whether token has expired...expiration date is validated here.</span>
    <span class="comment">// We know the series is correct or the key wouldn&#39;t verify below... and</span>
    <span class="comment">// we know that the dates are correct because we compared them against the</span>
    <span class="comment">// mint of that series above. So now we just make sure that the CURRENT date</span>
    <span class="comment">// and time is within the range described on the token.</span>
    <span class="keywordflow">if</span> (!<a class="code" href="class_o_t_instrument.html#a8a90b4e37984058d8e6fb836311c5dd9">VerifyCurrentDate</a>())
    {
        <a class="code" href="class_o_t_log.html#a1f7549d776ee919dcb6517f611ded015">OTLog::Output</a>(0, <span class="stringliteral">&quot;Token is expired!\n&quot;</span>);
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    
    <span class="comment">// pass the cleartext Lucre spendable coin data to the Mint to be verified.</span>
    <span class="keywordflow">if</span> (theMint.<a class="code" href="class_o_t_mint.html#aaa92a68483a8454aa726c64eefe4ab4b">VerifyToken</a>(theNotary, strContents, <a class="code" href="class_o_t_token.html#a4e17470c475313139d1ed975e6c26b5a">GetDenomination</a>()))  <span class="comment">// Here&#39;s the boolean output: coin is verified!</span>
    {
        <a class="code" href="class_o_t_log.html#a1f7549d776ee919dcb6517f611ded015">OTLog::Output</a>(0, <span class="stringliteral">&quot;Token verified!\n&quot;</span>);
        <span class="keywordflow">return</span> <span class="keyword">true</span>;
    }
    <span class="keywordflow">else</span>
    {
        <a class="code" href="class_o_t_log.html#a1f7549d776ee919dcb6517f611ded015">OTLog::Output</a>(0, <span class="stringliteral">&quot;Bad coin!\n&quot;</span>);
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
}
</pre></div>
</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="ac029e1035d9610f3f042a46877ccab64"></a><!-- doxytag: member="OTToken::m_ascSpendable" ref="ac029e1035d9610f3f042a46877ccab64" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> <a class="el" href="class_o_t_token.html#ac029e1035d9610f3f042a46877ccab64">OTToken::m_ascSpendable</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_token_8hpp_source.html#l00209">209</a> of file <a class="el" href="_o_t_token_8hpp_source.html">OTToken.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a04d6c0d6812cb5b4ba5a9950f5fab251"></a><!-- doxytag: member="OTToken::m_bPasswordProtected" ref="a04d6c0d6812cb5b4ba5a9950f5fab251" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_token.html#a04d6c0d6812cb5b4ba5a9950f5fab251">OTToken::m_bPasswordProtected</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_token_8hpp_source.html#l00206">206</a> of file <a class="el" href="_o_t_token_8hpp_source.html">OTToken.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a62b6a27bb859c163ce65a8c2df253335"></a><!-- doxytag: member="OTToken::m_bSavePrivateKeys" ref="a62b6a27bb859c163ce65a8c2df253335" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_token.html#a62b6a27bb859c163ce65a8c2df253335">OTToken::m_bSavePrivateKeys</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_token_8hpp_source.html#l00241">241</a> of file <a class="el" href="_o_t_token_8hpp_source.html">OTToken.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="ab60d3bcde176d6f5dff82dac58c4573c"></a><!-- doxytag: member="OTToken::m_lDenomination" ref="ab60d3bcde176d6f5dff82dac58c4573c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64_t <a class="el" href="class_o_t_token.html#ab60d3bcde176d6f5dff82dac58c4573c">OTToken::m_lDenomination</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_token_8hpp_source.html#l00213">213</a> of file <a class="el" href="_o_t_token_8hpp_source.html">OTToken.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a912ee7462a62c21eb168e527474bb35a"></a><!-- doxytag: member="OTToken::m_mapPrivate" ref="a912ee7462a62c21eb168e527474bb35a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_o_t_token_8hpp.html#a953c4fc4f20b141e33a3dc9a82d7d5cd">mapOfPrototokens</a> <a class="el" href="class_o_t_token.html#a912ee7462a62c21eb168e527474bb35a">OTToken::m_mapPrivate</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_token_8hpp_source.html#l00219">219</a> of file <a class="el" href="_o_t_token_8hpp_source.html">OTToken.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a3535301cfd5f293433150904c30b392e"></a><!-- doxytag: member="OTToken::m_mapPublic" ref="a3535301cfd5f293433150904c30b392e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_o_t_token_8hpp.html#a953c4fc4f20b141e33a3dc9a82d7d5cd">mapOfPrototokens</a> <a class="el" href="class_o_t_token.html#a3535301cfd5f293433150904c30b392e">OTToken::m_mapPublic</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_token_8hpp_source.html#l00218">218</a> of file <a class="el" href="_o_t_token_8hpp_source.html">OTToken.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a7eac324070d47ee46a46d1a084f0676c"></a><!-- doxytag: member="OTToken::m_nChosenIndex" ref="a7eac324070d47ee46a46d1a084f0676c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_token.html#a7eac324070d47ee46a46d1a084f0676c">OTToken::m_nChosenIndex</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_token_8hpp_source.html#l00222">222</a> of file <a class="el" href="_o_t_token_8hpp_source.html">OTToken.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a3952d4ce82c81016a70a94f319be337d"></a><!-- doxytag: member="OTToken::m_nSeries" ref="a3952d4ce82c81016a70a94f319be337d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_token.html#a3952d4ce82c81016a70a94f319be337d">OTToken::m_nSeries</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_token_8hpp_source.html#l00239">239</a> of file <a class="el" href="_o_t_token_8hpp_source.html">OTToken.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a1cc49ca8ea8914ae5bf2ad65a2c8fee0"></a><!-- doxytag: member="OTToken::m_nTokenCount" ref="a1cc49ca8ea8914ae5bf2ad65a2c8fee0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_token.html#a1cc49ca8ea8914ae5bf2ad65a2c8fee0">OTToken::m_nTokenCount</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_token_8hpp_source.html#l00221">221</a> of file <a class="el" href="_o_t_token_8hpp_source.html">OTToken.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a01a0360eaceb37845f0b4f35256aaab3"></a><!-- doxytag: member="OTToken::m_Signature" ref="a01a0360eaceb37845f0b4f35256aaab3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> <a class="el" href="class_o_t_token.html#a01a0360eaceb37845f0b4f35256aaab3">OTToken::m_Signature</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_token_8hpp_source.html#l00211">211</a> of file <a class="el" href="_o_t_token_8hpp_source.html">OTToken.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="abb3c86c043242862d2e3a6dacf9d1a08"></a><!-- doxytag: member="OTToken::m_State" ref="abb3c86c043242862d2e3a6dacf9d1a08" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_token.html#ad0fb0c562a9e37fcdb561e56075672dd">tokenState</a> <a class="el" href="class_o_t_token.html#abb3c86c043242862d2e3a6dacf9d1a08">OTToken::m_State</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_token_8hpp_source.html#l00240">240</a> of file <a class="el" href="_o_t_token_8hpp_source.html">OTToken.hpp</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>include/otlib/<a class="el" href="_o_t_token_8hpp_source.html">OTToken.hpp</a></li>
<li>src/otlib/<a class="el" href="_o_t_token_8cpp_source.html">OTToken.cpp</a></li>
</ul>
</div><!-- contents -->
</div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="class_o_t_token.html">OTToken</a>      </li>

    <li class="footer">Generated on Wed May 21 2014 11:26:17 for Open-Transactions by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.6.1 </li>
   </ul>
 </div>


</body>
</html>
