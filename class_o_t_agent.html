<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Open-Transactions: OTAgent Class Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Open-Transactions
   &#160;<span id="projectnumber">master/1066fb4910a63ee3f7de8e0807fee3eb663b66c7</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('class_o_t_agent.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">OTAgent Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<!-- doxytag: class="OTAgent" -->
<p><code>#include &lt;<a class="el" href="_o_t_agent_8hpp_source.html">OTAgent.hpp</a>&gt;</code></p>

<p><a href="class_o_t_agent-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_agent.html#aef2c5160acd3099c851c38390b0e9eae">OTAgent</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_agent.html#a7150d084c4020054a0d7f2ba9228050f">OTAgent</a> (const std::string str_agent_name, <a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;theNym, bool bNymRepresentsSelf=true)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_agent.html#a4fa4ecf4b6973f288b24530dbb7389c4">OTAgent</a> (bool bNymRepresentsSelf, bool bIsAnIndividual, const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strName, const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strNymID, const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strRoleID, const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strGroupName)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_agent.html#a9f00aa23d3f763c0676dc033f2c2904f">~OTAgent</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_agent.html#af76ae393d78775d897a7bd53cd277a5d">Serialize</a> (<a class="el" href="class_o_t_string.html">OTString</a> &amp;strAppend)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_agent.html#a90211a756315e750b9e658bc6a224f0e">ClearTemporaryPointers</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_agent.html#aa5175fb8a0a26e3b5cb7ea54ba3c2f7e">VerifyIssuedNumber</a> (const int64_t &amp;lNumber, const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strServerID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_agent.html#adb89b362ce9a7100d4bd736d8e54d92a">VerifyTransactionNumber</a> (const int64_t &amp;lNumber, const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strServerID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_agent.html#a934b2f47826d1b754f07c312099edf86">RemoveIssuedNumber</a> (const int64_t &amp;lNumber, const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strServerID, bool bSave=false, <a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> *pSignerNym=NULL)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_agent.html#a6e4e4cc1971996a8da677b1c789a324e">RemoveTransactionNumber</a> (const int64_t &amp;lNumber, const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strServerID, <a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;SIGNER_NYM, bool bSave=true)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_agent.html#af39f8957fe7553c34f3dbaf9d87696f4">HarvestTransactionNumber</a> (const int64_t &amp;lNumber, const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strServerID, bool bSave=false, <a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> *pSignerNym=NULL)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_agent.html#a06d548dade08b7b10ea6eb25a827ed66">ReserveOpeningTransNum</a> (const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strServerID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_agent.html#a0be26af3347949b48498878fdce65ddf">ReserveClosingTransNum</a> (const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strServerID, <a class="el" href="class_o_t_party_account.html">OTPartyAccount</a> &amp;thePartyAcct)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_agent.html#a0749f394cfbabd6a64942bbf53af0e7b">SignContract</a> (<a class="el" href="class_o_t_contract.html">OTContract</a> &amp;theInput)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_agent.html#a0ebeaa707c5793be4ac3c1a906f89f7c">VerifyAgencyOfAccount</a> (const <a class="el" href="class_o_t_account.html">OTAccount</a> &amp;theAccount) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_agent.html#a63316db5c765344066a18d87e39cef60">VerifySignature</a> (<a class="el" href="class_o_t_contract.html">OTContract</a> &amp;theContract)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_agent.html#a8809ec0331164b75700e462c8d808dd6">SetParty</a> (<a class="el" href="class_o_t_party.html">OTParty</a> &amp;theOwnerParty)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_agent.html#a202afbb3ebae1e34fc795d5c5d2e724c">SetNymPointer</a> (<a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;theNym)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_agent.html#a2039e8ad981abeecabf0a3aa412a3a9f">IsValidSigner</a> (<a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;theNym)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_agent.html#a173cbf501c1f882637bc405f91ebfc41">IsValidSignerID</a> (const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;theNymID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_agent.html#a4fd83cc610c9c64e1e3dd043b050a81a">IsAuthorizingAgentForParty</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_agent.html#a3bb37db7c624b498462ca875783d9f50">GetCountAuthorizedAccts</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_agent.html#a6e9c37100a8e0e4cf9f982ee5f4d3eec">DoesRepresentHimself</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_agent.html#addaf1c4a07a45bc5f9416bfbc78c5be6">DoesRepresentAnEntity</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_agent.html#a1969e4f8a5f13ee34ba0a68d8f082956">IsAnIndividual</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_agent.html#af69d572617d77110f4bb671ef41cd1a4">IsAGroup</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_agent.html#ac9a12b4a5e377991024dbe2772c73554">GetNymID</a> (<a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;theOutput) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_agent.html#ab63739d559ecc2ff8815057ce0482c87">GetRoleID</a> (<a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;theOutput) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_agent.html#a7750c7f5840047c5413d95e92ad87578">GetSignerID</a> (<a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;theOutput) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_agent.html#ae6eb3469ba2a0eec8ca67fc5ef929355">GetEntityID</a> (<a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;theOutput) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_agent.html#a123d27f05e46977ecdbe0b83de3c119d">GetName</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_agent.html#a781634eb1321d653e9cfb9ae11e1e083">GetGroupName</a> (<a class="el" href="class_o_t_string.html">OTString</a> &amp;strGroupName)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_agent.html#a6a388c6564be36b836dcfcab4a137d73">GetPartyID</a> (<a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;theOutput) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_o_t_party.html">OTParty</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_agent.html#a929a2489984f5487bd1819ed6d8862f2">GetParty</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_agent.html#a86f8664531c96aeaaae9796131ec2f2f">RetrieveNymPointer</a> (<a class="el" href="_o_t_agent_8hpp.html#ac89892658f6bc83e354078647b704e8f">mapOfNyms</a> &amp;map_Nyms_Already_Loaded)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_agent.html#a1d171907da631ad60789969fbee12bbf">LoadNym</a> (<a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;theServerNym)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_agent.html#af0cd869a6def04dbd4319e3643bdd837">DropFinalReceiptToNymbox</a> (<a class="el" href="class_o_t_smart_contract.html">OTSmartContract</a> &amp;theSmartContract, const int64_t &amp;lNewTransactionNumber, const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strOrigCronItem, <a class="el" href="class_o_t_string.html">OTString</a> *pstrNote=NULL, <a class="el" href="class_o_t_string.html">OTString</a> *pstrAttachment=NULL, <a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> *pActualNym=NULL)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_agent.html#aaf9ffef3f774fce875a899fe67069d8f">DropFinalReceiptToInbox</a> (<a class="el" href="_o_t_agent_8hpp.html#ac89892658f6bc83e354078647b704e8f">mapOfNyms</a> *pNymMap, const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strServerID, <a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;theServerNym, <a class="el" href="class_o_t_smart_contract.html">OTSmartContract</a> &amp;theSmartContract, const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;theAccountID, const int64_t &amp;lNewTransactionNumber, const int64_t &amp;lClosingNumber, const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strOrigCronItem, <a class="el" href="class_o_t_string.html">OTString</a> *pstrNote=NULL, <a class="el" href="class_o_t_string.html">OTString</a> *pstrAttachment=NULL)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_agent.html#ac08c26cf521a1de25b2e6cd26358d6a2">DropServerNoticeToNymbox</a> (bool bSuccessMsg, <a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;theServerNym, const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;theServerID, const int64_t &amp;lNewTransactionNumber, const int64_t &amp;lInReferenceTo, const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strReference, <a class="el" href="class_o_t_string.html">OTString</a> *pstrNote=NULL, <a class="el" href="class_o_t_string.html">OTString</a> *pstrAttachment=NULL, <a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> *pActualNym=NULL)</td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock">
<p>Definition at line <a class="el" href="_o_t_agent_8hpp_source.html#l00165">165</a> of file <a class="el" href="_o_t_agent_8hpp_source.html">OTAgent.hpp</a>.</p>
</div><hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="aef2c5160acd3099c851c38390b0e9eae"></a><!-- doxytag: member="OTAgent::OTAgent" ref="aef2c5160acd3099c851c38390b0e9eae" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_agent.html#aef2c5160acd3099c851c38390b0e9eae">OTAgent::OTAgent</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_agent_8cpp_source.html#l00250">250</a> of file <a class="el" href="_o_t_agent_8cpp_source.html">OTAgent.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                 : m_bNymRepresentsSelf(<span class="keyword">false</span>), m_bIsAnIndividual(<span class="keyword">false</span>), m_pNym(NULL), m_pForParty(NULL)
{

}
</pre></div>
</div>
</div>
<a class="anchor" id="a7150d084c4020054a0d7f2ba9228050f"></a><!-- doxytag: member="OTAgent::OTAgent" ref="a7150d084c4020054a0d7f2ba9228050f" args="(const std::string str_agent_name, OTPseudonym &amp;theNym, bool bNymRepresentsSelf=true)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_agent.html#aef2c5160acd3099c851c38390b0e9eae">OTAgent::OTAgent</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string&#160;</td>
          <td class="paramname"><em>str_agent_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;&#160;</td>
          <td class="paramname"><em>theNym</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>bNymRepresentsSelf</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_agent_8cpp_source.html#l00268">268</a> of file <a class="el" href="_o_t_agent_8cpp_source.html">OTAgent.cpp</a>.</p>
<div class="fragment"><pre class="fragment">: m_bNymRepresentsSelf(bNymRepresentsSelf), m_bIsAnIndividual(<span class="keyword">true</span>), m_pNym(&amp;theNym), m_pForParty(NULL),
  m_strName(str_agent_name.c_str())
{
    <span class="comment">// Grab m_strNymID</span>
    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theNymID;
    theNym.<a class="code" href="class_o_t_pseudonym.html#a1775c7aedd0dd25b2faf3f78dcccabe7">GetIdentifier</a>(theNymID);
    theNymID.<a class="code" href="class_o_t_identifier.html#a4bccb30446b4b515d9d6016b86b260bb">GetString</a>(m_strNymID);

    <span class="comment">//</span>

    <span class="keywordflow">if</span> (<span class="keyword">false</span> == bNymRepresentsSelf)
    {
        <span class="comment">// Todo: if the Nym represents an Entity, then RoleID should</span>
        <span class="comment">// be passed in, and set here.  I WILL PROBABLY make that part into a SEPARATE CONSTRUCTOR.</span>
        <span class="comment">// (Once I get around to adding Entities.)</span>
        <span class="comment">//</span>
        <a class="code" href="class_o_t_log.html#a5acd90ac91c2618f395b0ff37ad4f8ee">OTLog::Error</a>(<span class="stringliteral">&quot;OTAgent::OTAgent: THIS HASN&#39;T BEEN WRITTEN YET!!\n&quot;</span>);
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a4fa4ecf4b6973f288b24530dbb7389c4"></a><!-- doxytag: member="OTAgent::OTAgent" ref="a4fa4ecf4b6973f288b24530dbb7389c4" args="(bool bNymRepresentsSelf, bool bIsAnIndividual, const OTString &amp;strName, const OTString &amp;strNymID, const OTString &amp;strRoleID, const OTString &amp;strGroupName)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_agent.html#aef2c5160acd3099c851c38390b0e9eae">OTAgent::OTAgent</a> </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>bNymRepresentsSelf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>bIsAnIndividual</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strNymID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strRoleID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strGroupName</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_agent_8cpp_source.html#l00256">256</a> of file <a class="el" href="_o_t_agent_8cpp_source.html">OTAgent.cpp</a>.</p>
<div class="fragment"><pre class="fragment">: m_bNymRepresentsSelf(bNymRepresentsSelf), m_bIsAnIndividual(bIsAnIndividual), m_pNym(NULL), m_pForParty(NULL),
  m_strName(strName), m_strNymID(strNymID), m_strRoleID(strRoleID), m_strGroupName(strGroupName)
{

}
</pre></div>
</div>
</div>
<a class="anchor" id="a9f00aa23d3f763c0676dc033f2c2904f"></a><!-- doxytag: member="OTAgent::~OTAgent" ref="a9f00aa23d3f763c0676dc033f2c2904f" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_agent.html#a9f00aa23d3f763c0676dc033f2c2904f">OTAgent::~OTAgent</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_agent_8cpp_source.html#l00320">320</a> of file <a class="el" href="_o_t_agent_8cpp_source.html">OTAgent.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    m_pNym      = NULL;  <span class="comment">// this pointer is not owned by this object, and is here for convenience only.</span>
    m_pForParty = NULL;  <span class="comment">// The agent probably has a pointer to the party it acts on behalf of.</span>

}
</pre></div>
</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a90211a756315e750b9e658bc6a224f0e"></a><!-- doxytag: member="OTAgent::ClearTemporaryPointers" ref="a90211a756315e750b9e658bc6a224f0e" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_agent.html#a90211a756315e750b9e658bc6a224f0e">OTAgent::ClearTemporaryPointers</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_agent_8hpp_source.html#l00221">221</a> of file <a class="el" href="_o_t_agent_8hpp_source.html">OTAgent.hpp</a>.</p>
<div class="fragment"><pre class="fragment">{ m_pNym = NULL; } <span class="comment">/* Someday clear entity/role ptr here? And do NOT</span>
</pre></div>
</div>
</div>
<a class="anchor" id="addaf1c4a07a45bc5f9416bfbc78c5be6"></a><!-- doxytag: member="OTAgent::DoesRepresentAnEntity" ref="addaf1c4a07a45bc5f9416bfbc78c5be6" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_agent.html#addaf1c4a07a45bc5f9416bfbc78c5be6">OTAgent::DoesRepresentAnEntity</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_agent_8cpp_source.html#l00339">339</a> of file <a class="el" href="_o_t_agent_8cpp_source.html">OTAgent.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> !m_bNymRepresentsSelf;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a6e9c37100a8e0e4cf9f982ee5f4d3eec"></a><!-- doxytag: member="OTAgent::DoesRepresentHimself" ref="a6e9c37100a8e0e4cf9f982ee5f4d3eec" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_agent.html#a6e9c37100a8e0e4cf9f982ee5f4d3eec">OTAgent::DoesRepresentHimself</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_agent_8cpp_source.html#l00330">330</a> of file <a class="el" href="_o_t_agent_8cpp_source.html">OTAgent.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{

    <span class="keywordflow">return</span> m_bNymRepresentsSelf;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aaf9ffef3f774fce875a899fe67069d8f"></a><!-- doxytag: member="OTAgent::DropFinalReceiptToInbox" ref="aaf9ffef3f774fce875a899fe67069d8f" args="(mapOfNyms *pNymMap, const OTString &amp;strServerID, OTPseudonym &amp;theServerNym, OTSmartContract &amp;theSmartContract, const OTIdentifier &amp;theAccountID, const int64_t &amp;lNewTransactionNumber, const int64_t &amp;lClosingNumber, const OTString &amp;strOrigCronItem, OTString *pstrNote=NULL, OTString *pstrAttachment=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_agent.html#aaf9ffef3f774fce875a899fe67069d8f">OTAgent::DropFinalReceiptToInbox</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_o_t_agent_8hpp.html#ac89892658f6bc83e354078647b704e8f">mapOfNyms</a> *&#160;</td>
          <td class="paramname"><em>pNymMap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strServerID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;&#160;</td>
          <td class="paramname"><em>theServerNym</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_smart_contract.html">OTSmartContract</a> &amp;&#160;</td>
          <td class="paramname"><em>theSmartContract</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;&#160;</td>
          <td class="paramname"><em>theAccountID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int64_t &amp;&#160;</td>
          <td class="paramname"><em>lNewTransactionNumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int64_t &amp;&#160;</td>
          <td class="paramname"><em>lClosingNumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strOrigCronItem</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_string.html">OTString</a> *&#160;</td>
          <td class="paramname"><em>pstrNote</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_string.html">OTString</a> *&#160;</td>
          <td class="paramname"><em>pstrAttachment</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_agent_8cpp_source.html#l00658">658</a> of file <a class="el" href="_o_t_agent_8cpp_source.html">OTAgent.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// TODO: When entites and ROLES are added, this function may change a bit to accommodate them.</span>
    <span class="keyword">const</span> <span class="keywordtype">char</span> * szFunc = <span class="stringliteral">&quot;OTAgent::DropFinalReceiptToInbox&quot;</span>;

    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theAgentNymID;
    <span class="keywordtype">bool</span> bNymID = this-&gt;<a class="code" href="class_o_t_agent.html#ac9a12b4a5e377991024dbe2772c73554">GetNymID</a>(theAgentNymID);

    <span class="comment">// Not all agents have Nyms. (Might be a voting group.)</span>
    <span class="comment">// But in the case of Inboxes for asset accounts, shouldn&#39;t the agent be a Nym?</span>
    <span class="comment">// Perhaps not... perhaps not... we shall see.</span>

    <span class="keywordflow">if</span> (<span class="keyword">true</span> == bNymID) <span class="comment">// therefore IsAnIndividual() is definitely true.</span>
    {
        <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> *   pNym        = NULL;
        <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTPseudonym&gt;</a> theNymAngel;

        <span class="comment">// -------------------------------------------------</span>
        <span class="comment">// If a list of pre-loaded Nyms was passed in, see if one of them is ours.</span>
        <span class="comment">//</span>
        <span class="keywordflow">if</span> (NULL != pNymMap)
        {
            <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a>  strNymID    (theAgentNymID);
            <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(strNymID.Exists());

            mapOfNyms::iterator ittt = pNymMap-&gt;find(strNymID.Get());

            <span class="keywordflow">if</span> (pNymMap-&gt;end() != ittt) <span class="comment">// found it!</span>
            {
                pNym = (*ittt).second;
                <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pNym);
            }
        }
        <span class="comment">// -------------------------------------------------</span>

        <span class="keywordflow">if</span> (NULL == pNym) <span class="comment">// It wasn&#39;t on the list of already-loaded nyms that was passed in, so we have to load it.</span>
        {
            <span class="comment">// By this point we also know that pNym is NOT the server Nym, nor is it the</span>
            <span class="comment">// Originator, nor pActingNym, nor pPartyNym, as they were all loaded already and</span>
            <span class="comment">// were added to pNymMap, yet we didn&#39;t find the Nym we were looking for among them.</span>
            <span class="comment">//</span>
            <span class="comment">// (Therefore this is some new Nym, and doesn&#39;t need to be verified against those Nyms again,</span>
            <span class="comment">// before loading it. Let&#39;s load it up!)</span>
            <span class="comment">//</span>
            <span class="keywordflow">if</span> (NULL == (pNym = this-&gt;<a class="code" href="class_o_t_agent.html#a1d171907da631ad60789969fbee12bbf">LoadNym</a>(theServerNym)))
                <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Failed loading Nym.\n&quot;</span>, szFunc);
            <span class="keywordflow">else</span>
                theNymAngel.<a class="code" href="class_o_t_cleanup.html#a00a399db45f730439d2263d4429d00c1">SetCleanupTarget</a>(*pNym); <span class="comment">// CLEANUP  :-)</span>
        }
        <span class="comment">// ************************************************************</span>

        <span class="comment">// I call this because LoadNym sets my internal Nym pointer to pNym, and then</span>
        <span class="comment">// it goes out of scope before the end of this function and gets cleaned-up.</span>
        <span class="comment">// Therefore, no point in letting this agent continue to point to bad memory...</span>
        <span class="comment">//</span>
        this-&gt;<a class="code" href="class_o_t_agent.html#a90211a756315e750b9e658bc6a224f0e">ClearTemporaryPointers</a>();

        <span class="keywordflow">if</span> ( (NULL != pNym) &amp;&amp;
            (lClosingNumber &gt; 0) &amp;&amp;
            pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#a66cf3b97f1769f9d422bad8787a6c1a0">VerifyIssuedNum</a>(strServerID, lClosingNumber)) <span class="comment">// &lt;====================</span>
        {
            <span class="keywordflow">return</span> theSmartContract.<a class="code" href="class_o_t_cron_item.html#a32b2f6d524b7a0b9cacff58845b2161c">DropFinalReceiptToInbox</a>(theAgentNymID,         theAccountID,
                                                            lNewTransactionNumber, lClosingNumber,
                                                            strOrigCronItem,       pstrNote,
                                                            pstrAttachment); <span class="comment">// pActualAcct=NULL here. (This call will load the acct up and update its inbox hash.)</span>
        }
        <span class="keywordflow">else</span>
            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error: pNym is NULL, or lClosingNumber &lt;=0, &quot;</span>
                         <span class="stringliteral">&quot;or pNym-&gt;VerifyIssuedNum(strServerID, lClosingNumber)) failed to verify.\n&quot;</span>,
                         szFunc);
    }
    <span class="keywordflow">else</span>
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: No NymID available for this agent...\n&quot;</span>, szFunc);

    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="af0cd869a6def04dbd4319e3643bdd837"></a><!-- doxytag: member="OTAgent::DropFinalReceiptToNymbox" ref="af0cd869a6def04dbd4319e3643bdd837" args="(OTSmartContract &amp;theSmartContract, const int64_t &amp;lNewTransactionNumber, const OTString &amp;strOrigCronItem, OTString *pstrNote=NULL, OTString *pstrAttachment=NULL, OTPseudonym *pActualNym=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_agent.html#af0cd869a6def04dbd4319e3643bdd837">OTAgent::DropFinalReceiptToNymbox</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_smart_contract.html">OTSmartContract</a> &amp;&#160;</td>
          <td class="paramname"><em>theSmartContract</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int64_t &amp;&#160;</td>
          <td class="paramname"><em>lNewTransactionNumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strOrigCronItem</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_string.html">OTString</a> *&#160;</td>
          <td class="paramname"><em>pstrNote</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_string.html">OTString</a> *&#160;</td>
          <td class="paramname"><em>pstrAttachment</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> *&#160;</td>
          <td class="paramname"><em>pActualNym</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_agent_8cpp_source.html#l00745">745</a> of file <a class="el" href="_o_t_agent_8cpp_source.html">OTAgent.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theAgentNymID;
    <span class="keywordtype">bool</span> bNymID = this-&gt;<a class="code" href="class_o_t_agent.html#ac9a12b4a5e377991024dbe2772c73554">GetNymID</a>(theAgentNymID);

    <span class="comment">// Not all agents have Nyms. (Might be a voting group.)</span>

    <span class="keywordflow">if</span> (<span class="keyword">true</span> == bNymID)
    {
        <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pToActualNym = NULL;

        <span class="keywordflow">if</span> ((NULL != pActualNym) &amp;&amp; pActualNym-&gt;<a class="code" href="class_o_t_pseudonym.html#a5ec9340b8d1d0fcd32f754ea63f9915a">CompareID</a>(theAgentNymID))
            pToActualNym = pActualNym;

        <span class="keywordflow">return</span> theSmartContract.<a class="code" href="class_o_t_cron_item.html#a4ed44ef1289676261061180691359bad">DropFinalReceiptToNymbox</a>(theAgentNymID, lNewTransactionNumber,
                                                         strOrigCronItem, pstrNote, pstrAttachment,
                                                         pToActualNym);
    }

    <span class="comment">// TODO: When entites and roles are added, this function may change a bit to accommodate them.</span>

    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac08c26cf521a1de25b2e6cd26358d6a2"></a><!-- doxytag: member="OTAgent::DropServerNoticeToNymbox" ref="ac08c26cf521a1de25b2e6cd26358d6a2" args="(bool bSuccessMsg, OTPseudonym &amp;theServerNym, const OTIdentifier &amp;theServerID, const int64_t &amp;lNewTransactionNumber, const int64_t &amp;lInReferenceTo, const OTString &amp;strReference, OTString *pstrNote=NULL, OTString *pstrAttachment=NULL, OTPseudonym *pActualNym=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_agent.html#ac08c26cf521a1de25b2e6cd26358d6a2">OTAgent::DropServerNoticeToNymbox</a> </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>bSuccessMsg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;&#160;</td>
          <td class="paramname"><em>theServerNym</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;&#160;</td>
          <td class="paramname"><em>theServerID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int64_t &amp;&#160;</td>
          <td class="paramname"><em>lNewTransactionNumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int64_t &amp;&#160;</td>
          <td class="paramname"><em>lInReferenceTo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strReference</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_string.html">OTString</a> *&#160;</td>
          <td class="paramname"><em>pstrNote</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_string.html">OTString</a> *&#160;</td>
          <td class="paramname"><em>pstrAttachment</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> *&#160;</td>
          <td class="paramname"><em>pActualNym</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_agent_8cpp_source.html#l00775">775</a> of file <a class="el" href="_o_t_agent_8cpp_source.html">OTAgent.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theAgentNymID;
    <span class="keywordtype">bool</span> bNymID = this-&gt;<a class="code" href="class_o_t_agent.html#ac9a12b4a5e377991024dbe2772c73554">GetNymID</a>(theAgentNymID);

    <span class="comment">// Not all agents have Nyms. (Might be a voting group.)</span>

    <span class="keywordflow">if</span> (<span class="keyword">true</span> == bNymID)
    {
        <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pToActualNym = NULL;

        <span class="keywordflow">if</span> ((NULL != pActualNym) &amp;&amp; pActualNym-&gt;<a class="code" href="class_o_t_pseudonym.html#a5ec9340b8d1d0fcd32f754ea63f9915a">CompareID</a>(theAgentNymID))
            pToActualNym = pActualNym;
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((NULL != m_pNym) &amp;&amp; m_pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#a5ec9340b8d1d0fcd32f754ea63f9915a">CompareID</a>(theAgentNymID))
            pToActualNym = m_pNym;

        <span class="keywordflow">return</span> <a class="code" href="class_o_t_agent.html#ac08c26cf521a1de25b2e6cd26358d6a2">OTAgreement::DropServerNoticeToNymbox</a>(bSuccessMsg,
                                                     theServerNym,
                                                     theServerID,
                                                     theAgentNymID,
                                                     lNewTransactionNumber,
                                                     lInReferenceTo,
                                                     strReference,
                                                     pstrNote,
                                                     pstrAttachment,
                                                     pToActualNym);
    }

    <span class="comment">// TODO: When entites and roles are added, this function may change a bit to accommodate them.</span>

    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a3bb37db7c624b498462ca875783d9f50"></a><!-- doxytag: member="OTAgent::GetCountAuthorizedAccts" ref="a3bb37db7c624b498462ca875783d9f50" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_agent.html#a3bb37db7c624b498462ca875783d9f50">OTAgent::GetCountAuthorizedAccts</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_agent_8cpp_source.html#l00572">572</a> of file <a class="el" href="_o_t_agent_8cpp_source.html">OTAgent.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (NULL == m_pForParty)
    {
        <a class="code" href="class_o_t_log.html#a5acd90ac91c2618f395b0ff37ad4f8ee">OTLog::Error</a>(<span class="stringliteral">&quot;OTAgent::CountAuthorizedAccts: Error: m_pForParty was NULL.\n&quot;</span>);
        <span class="keywordflow">return</span> 0; <span class="comment">// Maybe should log here...</span>
    }
    <span class="comment">// -------------------------------------</span>
    <span class="keywordflow">return</span> m_pForParty-&gt;<a class="code" href="class_o_t_party.html#a0b130989d275386c980ed34d587e5e87">GetAccountCount</a>(m_strName.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae6eb3469ba2a0eec8ca67fc5ef929355"></a><!-- doxytag: member="OTAgent::GetEntityID" ref="ae6eb3469ba2a0eec8ca67fc5ef929355" args="(OTIdentifier &amp;theOutput) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_agent.html#ae6eb3469ba2a0eec8ca67fc5ef929355">OTAgent::GetEntityID</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;&#160;</td>
          <td class="paramname"><em>theOutput</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_agent_8cpp_source.html#l00533">533</a> of file <a class="el" href="_o_t_agent_8cpp_source.html">OTAgent.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// IF represents an entity, then this is its ID. Else fail.</span>
    <span class="comment">//</span>
    <span class="keywordflow">if</span> (<a class="code" href="class_o_t_agent.html#addaf1c4a07a45bc5f9416bfbc78c5be6">DoesRepresentAnEntity</a>() &amp;&amp; (NULL != m_pForParty) &amp;&amp; m_pForParty-&gt;<a class="code" href="class_o_t_party.html#a89552b5fb6769fd7ad69deedb633653f">IsEntity</a>() )
    {
        <span class="keywordtype">bool</span> bSuccessEntityID = <span class="keyword">false</span>;
        std::string str_entity_id = m_pForParty-&gt;<a class="code" href="class_o_t_party.html#af97e994c6b77aaf57fc4bf7fd1ff4861">GetEntityID</a>(&amp;bSuccessEntityID);

        <span class="keywordflow">if</span> (bSuccessEntityID &amp;&amp; (str_entity_id.size() &gt; 0))
        {
            <a class="code" href="class_o_t_string.html">OTString</a> strEntityID(str_entity_id.c_str());
            theOutput.<a class="code" href="class_o_t_identifier.html#ae29aa1245d3831a207aabc9b8a493bfc">SetString</a>(strEntityID);

            <span class="keywordflow">return</span> <span class="keyword">true</span>;
        }
    }

    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a781634eb1321d653e9cfb9ae11e1e083"></a><!-- doxytag: member="OTAgent::GetGroupName" ref="a781634eb1321d653e9cfb9ae11e1e083" args="(OTString &amp;strGroupName)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_agent.html#a781634eb1321d653e9cfb9ae11e1e083">OTAgent::GetGroupName</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strGroupName</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_agent_8cpp_source.html#l00587">587</a> of file <a class="el" href="_o_t_agent_8cpp_source.html">OTAgent.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (<a class="code" href="class_o_t_agent.html#af69d572617d77110f4bb671ef41cd1a4">IsAGroup</a>())
    {
        strGroupName.<a class="code" href="class_o_t_string.html#aa5db620fe8e60c849585d741975db991">Set</a>(m_strGroupName);

        <span class="keywordflow">return</span> <span class="keyword">true</span>;
    }

    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a123d27f05e46977ecdbe0b83de3c119d"></a><!-- doxytag: member="OTAgent::GetName" ref="a123d27f05e46977ecdbe0b83de3c119d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EXPORT const <a class="el" href="class_o_t_string.html">OTString</a>&amp; <a class="el" href="class_o_t_agent.html#a123d27f05e46977ecdbe0b83de3c119d">OTAgent::GetName</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_agent_8hpp_source.html#l00321">321</a> of file <a class="el" href="_o_t_agent_8hpp_source.html">OTAgent.hpp</a>.</p>
<div class="fragment"><pre class="fragment">{ <span class="keywordflow">return</span> m_strName; } <span class="comment">// agent&#39;s name as used in a script.</span>
</pre></div>
</div>
</div>
<a class="anchor" id="ac9a12b4a5e377991024dbe2772c73554"></a><!-- doxytag: member="OTAgent::GetNymID" ref="ac9a12b4a5e377991024dbe2772c73554" args="(OTIdentifier &amp;theOutput) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_agent.html#ac9a12b4a5e377991024dbe2772c73554">OTAgent::GetNymID</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;&#160;</td>
          <td class="paramname"><em>theOutput</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_agent_8cpp_source.html#l00411">411</a> of file <a class="el" href="_o_t_agent_8cpp_source.html">OTAgent.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (<a class="code" href="class_o_t_agent.html#a1969e4f8a5f13ee34ba0a68d8f082956">IsAnIndividual</a>())
    {
        theOutput.<a class="code" href="class_o_t_identifier.html#ae29aa1245d3831a207aabc9b8a493bfc">SetString</a>(m_strNymID);

        <span class="keywordflow">return</span> <span class="keyword">true</span>;
    }

    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a929a2489984f5487bd1819ed6d8862f2"></a><!-- doxytag: member="OTAgent::GetParty" ref="a929a2489984f5487bd1819ed6d8862f2" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_party.html">OTParty</a>* <a class="el" href="class_o_t_agent.html#a929a2489984f5487bd1819ed6d8862f2">OTAgent::GetParty</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_agent_8hpp_source.html#l00344">344</a> of file <a class="el" href="_o_t_agent_8hpp_source.html">OTAgent.hpp</a>.</p>
<div class="fragment"><pre class="fragment">{ <span class="keywordflow">return</span> m_pForParty; }
</pre></div>
</div>
</div>
<a class="anchor" id="a6a388c6564be36b836dcfcab4a137d73"></a><!-- doxytag: member="OTAgent::GetPartyID" ref="a6a388c6564be36b836dcfcab4a137d73" args="(OTIdentifier &amp;theOutput) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_agent.html#a6a388c6564be36b836dcfcab4a137d73">OTAgent::GetPartyID</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;&#160;</td>
          <td class="paramname"><em>theOutput</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_agent_8cpp_source.html#l00608">608</a> of file <a class="el" href="_o_t_agent_8cpp_source.html">OTAgent.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// If DoesRepresentHimself() then return GetNymID()</span>
    <span class="comment">// else (thus DoesRepresentAnEntity()) so return GetEntityID()</span>
    <span class="comment">//</span>

    <span class="keywordflow">if</span> (<a class="code" href="class_o_t_agent.html#a6e9c37100a8e0e4cf9f982ee5f4d3eec">DoesRepresentHimself</a>())
        <span class="keywordflow">return</span> <a class="code" href="class_o_t_agent.html#ac9a12b4a5e377991024dbe2772c73554">GetNymID</a>(theOutput);

    <span class="keywordflow">return</span> <a class="code" href="class_o_t_agent.html#ae6eb3469ba2a0eec8ca67fc5ef929355">GetEntityID</a>(theOutput);
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab63739d559ecc2ff8815057ce0482c87"></a><!-- doxytag: member="OTAgent::GetRoleID" ref="ab63739d559ecc2ff8815057ce0482c87" args="(OTIdentifier &amp;theOutput) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_agent.html#ab63739d559ecc2ff8815057ce0482c87">OTAgent::GetRoleID</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;&#160;</td>
          <td class="paramname"><em>theOutput</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_agent_8cpp_source.html#l00426">426</a> of file <a class="el" href="_o_t_agent_8cpp_source.html">OTAgent.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (<a class="code" href="class_o_t_agent.html#a1969e4f8a5f13ee34ba0a68d8f082956">IsAnIndividual</a>() &amp;&amp; <a class="code" href="class_o_t_agent.html#addaf1c4a07a45bc5f9416bfbc78c5be6">DoesRepresentAnEntity</a>())
    {
        theOutput.<a class="code" href="class_o_t_identifier.html#ae29aa1245d3831a207aabc9b8a493bfc">SetString</a>(m_strRoleID);

        <span class="keywordflow">return</span> <span class="keyword">true</span>;
    }


    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a7750c7f5840047c5413d95e92ad87578"></a><!-- doxytag: member="OTAgent::GetSignerID" ref="a7750c7f5840047c5413d95e92ad87578" args="(OTIdentifier &amp;theOutput) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_agent.html#a7750c7f5840047c5413d95e92ad87578">OTAgent::GetSignerID</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;&#160;</td>
          <td class="paramname"><em>theOutput</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_agent_8cpp_source.html#l00450">450</a> of file <a class="el" href="_o_t_agent_8cpp_source.html">OTAgent.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// If IsIndividual() and DoesRepresentAnEntity() then this returns GetRoleID().</span>
    <span class="comment">// else if Individual() and DoesRepresentHimself() then this returns GetNymID().</span>
    <span class="comment">// else (if IsGroup()) then return false;</span>

    <span class="keywordflow">if</span> (<a class="code" href="class_o_t_agent.html#a1969e4f8a5f13ee34ba0a68d8f082956">IsAnIndividual</a>())
    {
        <span class="keywordflow">if</span> (<a class="code" href="class_o_t_agent.html#addaf1c4a07a45bc5f9416bfbc78c5be6">DoesRepresentAnEntity</a>())
        {
            <span class="keywordflow">return</span> <a class="code" href="class_o_t_agent.html#ab63739d559ecc2ff8815057ce0482c87">GetRoleID</a>(theOutput);
        }
        <span class="keywordflow">else</span> <span class="comment">// DoesRepresentHimself()</span>
        {
            <span class="keywordflow">return</span> <a class="code" href="class_o_t_agent.html#ac9a12b4a5e377991024dbe2772c73554">GetNymID</a>(theOutput);
        }
    }
    <span class="comment">// ---------------------------------</span>
    <span class="comment">// else IsGroup()... unable to sign directly; must hold votes instead.</span>
    <span class="comment">//</span>
    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="af39f8957fe7553c34f3dbaf9d87696f4"></a><!-- doxytag: member="OTAgent::HarvestTransactionNumber" ref="af39f8957fe7553c34f3dbaf9d87696f4" args="(const int64_t &amp;lNumber, const OTString &amp;strServerID, bool bSave=false, OTPseudonym *pSignerNym=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_agent.html#af39f8957fe7553c34f3dbaf9d87696f4">OTAgent::HarvestTransactionNumber</a> </td>
          <td>(</td>
          <td class="paramtype">const int64_t &amp;&#160;</td>
          <td class="paramname"><em>lNumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strServerID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>bSave</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> *&#160;</td>
          <td class="paramname"><em>pSignerNym</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_agent_8cpp_source.html#l00880">880</a> of file <a class="el" href="_o_t_agent_8cpp_source.html">OTAgent.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// -------------------------------------</span>
    <span class="comment">// Todo: this function may change when entities / roles are added.</span>
    <span class="comment">//</span>
    <span class="keywordflow">if</span> (!<a class="code" href="class_o_t_agent.html#a1969e4f8a5f13ee34ba0a68d8f082956">IsAnIndividual</a>() || !<a class="code" href="class_o_t_agent.html#a6e9c37100a8e0e4cf9f982ee5f4d3eec">DoesRepresentHimself</a>())
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s:  Error: Entities and Roles are not yet supported. Agent: %s\n&quot;</span>,
                     __FUNCTION__, m_strName.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// -----------------------------------------</span>
    <span class="keywordflow">if</span> (NULL != m_pNym)
    {
        <span class="comment">// If a signer wasn&#39;t passed in (the server-side uses server nym to sign)</span>
        <span class="comment">// then we use the Nym himself as his own signer (common to client-side.)</span>
        <span class="comment">//</span>
        <span class="keywordflow">if</span> (NULL == pSignerNym)
            pSignerNym = m_pNym;
        <span class="comment">// -----------------------------------------------</span>
        <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theServerID(strServerID);

        <span class="comment">// This won&#39;t &quot;add it back&quot; unless we&#39;re SURE he had it in the first place...</span>
        <span class="comment">//</span>
        <span class="keyword">const</span> <span class="keywordtype">bool</span> bSuccess = m_pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#a29c787987f96abc9de8f3b268596a79e">ClawbackTransactionNumber</a>(theServerID, lNumber, bSave, pSignerNym);

        <span class="keywordflow">if</span> (bSuccess)
        {
            <span class="comment">// The transaction is being removed from play, so we will remove it from this list.</span>
            <span class="comment">// That is, when we called RemoveTransactionNumber, the number was being put into play</span>
            <span class="comment">// until RemoveIssuedNumber is called to close it out. But now RemoveIssuedNumber won&#39;t</span>
            <span class="comment">// ever be called, since we are harvesting it back for future use. Therefore the number</span>
            <span class="comment">// is currently no longer in play, therefore we remove it from the list of open cron numbers.</span>
            <span class="comment">//</span>
            std::set&lt;int64_t&gt;         &amp; theIDSet = m_pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#a92abc7a6b6253681f3379f135597f5a9">GetSetOpenCronItems</a>();
            std::set&lt;int64_t&gt;::iterator theSetIT = theIDSet.find(lNumber);

            <span class="keywordflow">if</span> (theIDSet.end() != theSetIT) <span class="comment">// IF it was there, THEN remove it. (Client doesn&#39;t even track these, though server does.)</span>
                theIDSet.erase(lNumber);

            <span class="keywordflow">return</span> <span class="keyword">true</span>;
        }
        <span class="keywordflow">else</span>
            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Number (%lld) failed to verify for agent: %s (Thus didn&#39;t bother &quot;</span>
                          <span class="stringliteral">&quot;&#39;adding it back&#39;.)\n&quot;</span>, __FUNCTION__, lNumber, m_strName.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
    }
    <span class="keywordflow">else</span>
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error: m_pNym was NULL. For agent: %s\n&quot;</span>,
                      __FUNCTION__, m_strName.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());

    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="af69d572617d77110f4bb671ef41cd1a4"></a><!-- doxytag: member="OTAgent::IsAGroup" ref="af69d572617d77110f4bb671ef41cd1a4" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_agent.html#af69d572617d77110f4bb671ef41cd1a4">OTAgent::IsAGroup</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_agent_8cpp_source.html#l00360">360</a> of file <a class="el" href="_o_t_agent_8cpp_source.html">OTAgent.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> !m_bIsAnIndividual;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a1969e4f8a5f13ee34ba0a68d8f082956"></a><!-- doxytag: member="OTAgent::IsAnIndividual" ref="a1969e4f8a5f13ee34ba0a68d8f082956" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_agent.html#a1969e4f8a5f13ee34ba0a68d8f082956">OTAgent::IsAnIndividual</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_agent_8cpp_source.html#l00352">352</a> of file <a class="el" href="_o_t_agent_8cpp_source.html">OTAgent.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> m_bIsAnIndividual;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a4fd83cc610c9c64e1e3dd043b050a81a"></a><!-- doxytag: member="OTAgent::IsAuthorizingAgentForParty" ref="a4fd83cc610c9c64e1e3dd043b050a81a" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_agent.html#a4fd83cc610c9c64e1e3dd043b050a81a">OTAgent::IsAuthorizingAgentForParty</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_agent_8cpp_source.html#l00557">557</a> of file <a class="el" href="_o_t_agent_8cpp_source.html">OTAgent.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (NULL == m_pForParty)
        <span class="keywordflow">return</span> <span class="keyword">false</span>;

    <span class="keywordflow">if</span> (m_strName.<a class="code" href="class_o_t_string.html#a03401b39fb66d63696342c4f61ea8bf5">Compare</a>(m_pForParty-&gt;<a class="code" href="class_o_t_party.html#a374056d26b9a605719f4bd585b4d264c">GetAuthorizingAgentName</a>().c_str()))
        <span class="keywordflow">return</span> <span class="keyword">true</span>;

    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a2039e8ad981abeecabf0a3aa412a3a9f"></a><!-- doxytag: member="OTAgent::IsValidSigner" ref="a2039e8ad981abeecabf0a3aa412a3a9f" args="(OTPseudonym &amp;theNym)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_agent.html#a2039e8ad981abeecabf0a3aa412a3a9f">OTAgent::IsValidSigner</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;&#160;</td>
          <td class="paramname"><em>theNym</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_agent_8cpp_source.html#l00492">492</a> of file <a class="el" href="_o_t_agent_8cpp_source.html">OTAgent.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theAgentNymID;
    <span class="keywordtype">bool</span> bNymID = this-&gt;<a class="code" href="class_o_t_agent.html#ac9a12b4a5e377991024dbe2772c73554">GetNymID</a>(theAgentNymID);

    <span class="comment">// If there&#39;s a NymID on this agent, and it matches theNym&#39;s ID...</span>
    <span class="comment">//</span>
    <span class="keywordflow">if</span> (bNymID &amp;&amp; theNym.<a class="code" href="class_o_t_pseudonym.html#a5ec9340b8d1d0fcd32f754ea63f9915a">CompareID</a>(theAgentNymID))
    {
        <span class="comment">// That means theNym *is* the Nym for this agent!</span>
        <span class="comment">// We&#39;ll save his pointer, for future reference...</span>
        <span class="comment">//</span>
        this-&gt;<a class="code" href="class_o_t_agent.html#a202afbb3ebae1e34fc795d5c5d2e724c">SetNymPointer</a>(theNym);

        <span class="keywordflow">return</span> <span class="keyword">true</span>;
    }

    <span class="comment">// TODO Entity: Perhaps the original Nym was fired from his role... another Nym has now</span>
    <span class="comment">// taken his place. In which case, the original Nym should be refused as a valid</span>
    <span class="comment">// signer, and the new Nym should be allowed to sign in his place!</span>
    <span class="comment">//</span>
    <span class="comment">// This means if DoesRepresentAnEntity(), then I have to load the Role, and verify</span>
    <span class="comment">// the Nym against that Role (which contains the updated status). Since I haven&#39;t</span>
    <span class="comment">// coded Entities/Roles yet, then I don&#39;t have to do this just yet...</span>
    <span class="comment">// Might even update the NymID on this agent, for updated copies of the agreement.</span>
    <span class="comment">// (Obviously the original can&#39;t be changed...)</span>
    <span class="comment">//</span>

    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a173cbf501c1f882637bc405f91ebfc41"></a><!-- doxytag: member="OTAgent::IsValidSignerID" ref="a173cbf501c1f882637bc405f91ebfc41" args="(const OTIdentifier &amp;theNymID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_agent.html#a173cbf501c1f882637bc405f91ebfc41">OTAgent::IsValidSignerID</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;&#160;</td>
          <td class="paramname"><em>theNymID</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_agent_8cpp_source.html#l00474">474</a> of file <a class="el" href="_o_t_agent_8cpp_source.html">OTAgent.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theAgentNymID;
    <span class="keywordtype">bool</span> bNymID = this-&gt;<a class="code" href="class_o_t_agent.html#ac9a12b4a5e377991024dbe2772c73554">GetNymID</a>(theAgentNymID);

    <span class="comment">// If there&#39;s a NymID on this agent, and it matches theNymID...</span>
    <span class="comment">//</span>
    <span class="keywordflow">if</span> (bNymID &amp;&amp; (theNymID == theAgentNymID))
        <span class="keywordflow">return</span> <span class="keyword">true</span>;

    <span class="comment">// TODO Entities...</span>
    <span class="comment">//</span>
    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a1d171907da631ad60789969fbee12bbf"></a><!-- doxytag: member="OTAgent::LoadNym" ref="a1d171907da631ad60789969fbee12bbf" args="(OTPseudonym &amp;theServerNym)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> * <a class="el" href="class_o_t_agent.html#a1d171907da631ad60789969fbee12bbf">OTAgent::LoadNym</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;&#160;</td>
          <td class="paramname"><em>theServerNym</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_agent_8cpp_source.html#l00209">209</a> of file <a class="el" href="_o_t_agent_8cpp_source.html">OTAgent.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theAgentNymID;
    <span class="keywordtype">bool</span> bNymID = this-&gt;<a class="code" href="class_o_t_agent.html#ac9a12b4a5e377991024dbe2772c73554">GetNymID</a>(theAgentNymID);

    <span class="keywordflow">if</span> (bNymID)
    {
        <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pNym = <span class="keyword">new</span> <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a>;
        <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pNym);

        pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#a4b5f98378bb2ff1c48c5410f7283aff6">SetIdentifier</a>(theAgentNymID);

        <span class="keywordflow">if</span> (<span class="keyword">false</span> == pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#aeb1c675ec72d6450e5c151d1f3eb95bf">LoadPublicKey</a>())
        {
            <a class="code" href="class_o_t_string.html">OTString</a> strNymID(theAgentNymID);
            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;OTAgent::LoadNym: Failure loading &quot;</span>
                          <span class="stringliteral">&quot;agent&#39;s public key:\n%s\n&quot;</span>, strNymID.Get());
            <span class="keyword">delete</span> pNym; pNym=NULL;
        }
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#aae8a707c7799efb6944d485be31a7c3e">VerifyPseudonym</a>() &amp;&amp;
                 pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#ad24db39caa89399f659f414b19903f90">LoadSignedNymfile</a>(theServerNym))
        {
            this-&gt;<a class="code" href="class_o_t_agent.html#a202afbb3ebae1e34fc795d5c5d2e724c">SetNymPointer</a>(*pNym); <span class="comment">// set this pointer in case I need it for later.</span>
                                        <span class="comment">// also remember, caller is responsible to delete, so there&#39;s no guarantee the pointer</span>
            <span class="keywordflow">return</span> pNym;                <span class="comment">// is any good.  Then again, caller is also responsible to call ClearTemporaryPointers().</span>
        }
        <span class="keywordflow">else</span>
        {
            <a class="code" href="class_o_t_string.html">OTString</a> strNymID(theAgentNymID);
            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;OTAgent::LoadNym: Failure verifying agent&#39;s public key or loading signed nymfile: %s\n&quot;</span>,
                          strNymID.Get());
            <span class="keyword">delete</span> pNym; pNym=NULL;
        }
    }
    <span class="keywordflow">else</span>
        <a class="code" href="class_o_t_log.html#a5acd90ac91c2618f395b0ff37ad4f8ee">OTLog::Error</a>(<span class="stringliteral">&quot;OTAgent::LoadNym: Failure. Are you sure this agent IS a Nym at all? \n&quot;</span>);

    <span class="keywordflow">return</span> NULL;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a934b2f47826d1b754f07c312099edf86"></a><!-- doxytag: member="OTAgent::RemoveIssuedNumber" ref="a934b2f47826d1b754f07c312099edf86" args="(const int64_t &amp;lNumber, const OTString &amp;strServerID, bool bSave=false, OTPseudonym *pSignerNym=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_agent.html#a934b2f47826d1b754f07c312099edf86">OTAgent::RemoveIssuedNumber</a> </td>
          <td>(</td>
          <td class="paramtype">const int64_t &amp;&#160;</td>
          <td class="paramname"><em>lNumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strServerID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>bSave</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> *&#160;</td>
          <td class="paramname"><em>pSignerNym</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_agent_8cpp_source.html#l00978">978</a> of file <a class="el" href="_o_t_agent_8cpp_source.html">OTAgent.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// Todo: this function may change when entities / roles are added.</span>
    <span class="keywordflow">if</span> (!<a class="code" href="class_o_t_agent.html#a1969e4f8a5f13ee34ba0a68d8f082956">IsAnIndividual</a>() || !<a class="code" href="class_o_t_agent.html#a6e9c37100a8e0e4cf9f982ee5f4d3eec">DoesRepresentHimself</a>())
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;OTAgent::%s:  Error: Entities and Roles are not yet supported. Agent: %s\n&quot;</span>,
                      __FUNCTION__, m_strName.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// -----------------------------------------</span>
    <span class="keywordflow">if</span> (NULL != m_pNym)
    {
        std::set&lt;int64_t&gt; &amp; theIDSet = m_pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#a92abc7a6b6253681f3379f135597f5a9">GetSetOpenCronItems</a>(); <span class="comment">// The transaction is being removed from play, so we will remove it from this list.</span>
        <span class="keyword">const</span> <span class="keywordtype">bool</span> bSuccess       = m_pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#a17f25f5eb52440cc3ffc139dcbff75fe">RemoveIssuedNum</a>(strServerID, lNumber);  <span class="comment">// Doesn&#39;t save.</span>

        <span class="keywordflow">if</span> (bSuccess)
        {
            <span class="keywordflow">if</span> (NULL == pSignerNym)
                pSignerNym = m_pNym;
            <span class="comment">// -----------------------------------</span>
            <span class="comment">// Since the Trans# is now out of play, the server removes it as an open cron item.</span>
            <span class="comment">//</span>
            std::set&lt;int64_t&gt;::iterator theSetIT = theIDSet.find(lNumber);

            <span class="keywordflow">if</span> (theIDSet.end() != theSetIT) <span class="comment">// IF it was there, THEN remove it. (Client doesn&#39;t even track these, though server does.)</span>
                theIDSet.erase(lNumber);

            <span class="keywordflow">if</span> (bSave)
                m_pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#a5d08ef86097db038c2c4fd30034f5dc8">SaveSignedNymfile</a>(*pSignerNym);
        }
        <span class="keywordflow">else</span>
            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;OTAgent::%s: Error, should never happen. (I&#39;d assume you aren&#39;t &quot;</span>
                          <span class="stringliteral">&quot;removing issued numbers without verifying first if they&#39;re there.)\n&quot;</span>, __FUNCTION__);
        <span class="keywordflow">return</span> bSuccess;
    }
    <span class="keywordflow">else</span>
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;OTAgent::%s: Error: m_pNym was NULL. For agent: %s\n&quot;</span>,
                      __FUNCTION__, m_strName.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());

    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a6e4e4cc1971996a8da677b1c789a324e"></a><!-- doxytag: member="OTAgent::RemoveTransactionNumber" ref="a6e4e4cc1971996a8da677b1c789a324e" args="(const int64_t &amp;lNumber, const OTString &amp;strServerID, OTPseudonym &amp;SIGNER_NYM, bool bSave=true)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_agent.html#a6e4e4cc1971996a8da677b1c789a324e">OTAgent::RemoveTransactionNumber</a> </td>
          <td>(</td>
          <td class="paramtype">const int64_t &amp;&#160;</td>
          <td class="paramname"><em>lNumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strServerID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;&#160;</td>
          <td class="paramname"><em>SIGNER_NYM</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>bSave</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_agent_8cpp_source.html#l00940">940</a> of file <a class="el" href="_o_t_agent_8cpp_source.html">OTAgent.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// Todo: this function may change when entities / roles are added.</span>
    <span class="keywordflow">if</span> (!<a class="code" href="class_o_t_agent.html#a1969e4f8a5f13ee34ba0a68d8f082956">IsAnIndividual</a>() || !<a class="code" href="class_o_t_agent.html#a6e9c37100a8e0e4cf9f982ee5f4d3eec">DoesRepresentHimself</a>())
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;OTAgent::%s:  Error: Entities and Roles are not yet supported. Agent: %s\n&quot;</span>,
                      __FUNCTION__, m_strName.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// -----------------------------------------</span>
    <span class="keywordflow">if</span> (NULL != m_pNym)
    {
        std::set&lt;int64_t&gt; &amp; theIDSet = m_pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#a92abc7a6b6253681f3379f135597f5a9">GetSetOpenCronItems</a>(); <span class="comment">// The transaction is now in play, so we are going to add it to this list.</span>
        <span class="keyword">const</span> <span class="keywordtype">bool</span> bSuccess       = m_pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#a3fb93588f8e68c7f56cee00930f07d34">RemoveTransactionNum</a>(strServerID, lNumber);  <span class="comment">// Doesn&#39;t save.</span>

        <span class="keywordflow">if</span> (bSuccess)
        {
            theIDSet.insert(lNumber); <span class="comment">// Since the Trans# is now in play, the server records it as an open cron item.</span>

            <span class="keywordflow">if</span> (bSave)
                m_pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#a5d08ef86097db038c2c4fd30034f5dc8">SaveSignedNymfile</a>(SIGNER_NYM);
        }
        <span class="keywordflow">else</span>
            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;OTAgent::%s: Error, should never happen. (I&#39;d assume you aren&#39;t &quot;</span>
                          <span class="stringliteral">&quot;removing numbers without verifying first if they&#39;re there.)\n&quot;</span>, __FUNCTION__);
        <span class="keywordflow">return</span> bSuccess;
    }
    <span class="keywordflow">else</span>
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;OTAgent::%s: Error: m_pNym was NULL. For agent: %s\n&quot;</span>,
                      __FUNCTION__, m_strName.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());

    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a0be26af3347949b48498878fdce65ddf"></a><!-- doxytag: member="OTAgent::ReserveClosingTransNum" ref="a0be26af3347949b48498878fdce65ddf" args="(const OTString &amp;strServerID, OTPartyAccount &amp;thePartyAcct)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_agent.html#a0be26af3347949b48498878fdce65ddf">OTAgent::ReserveClosingTransNum</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strServerID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_party_account.html">OTPartyAccount</a> &amp;&#160;</td>
          <td class="paramname"><em>thePartyAcct</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_agent_8cpp_source.html#l01025">1025</a> of file <a class="el" href="_o_t_agent_8cpp_source.html">OTAgent.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    int64_t lTransactionNumber = 0;

    <span class="keywordflow">if</span> (<a class="code" href="class_o_t_agent.html#a1969e4f8a5f13ee34ba0a68d8f082956">IsAnIndividual</a>() &amp;&amp; <a class="code" href="class_o_t_agent.html#a6e9c37100a8e0e4cf9f982ee5f4d3eec">DoesRepresentHimself</a>() &amp;&amp; (NULL != m_pNym))
    {
        <span class="keywordflow">if</span> (thePartyAcct.<a class="code" href="class_o_t_party_account.html#add572c3b200be9265d9dcc4a1b1f4185">GetClosingTransNo</a>() &gt; 0)
        {
            <a class="code" href="class_o_t_log.html#a1f7549d776ee919dcb6517f611ded015">OTLog::Output</a>(0, <span class="stringliteral">&quot;OTAgent::ReserveClosingTransNum: Failure: The account ALREADY has a closing transaction number &quot;</span>
                          <span class="stringliteral">&quot;set on it. Don&#39;t you want to save that first, before overwriting it?\n&quot;</span>);
            <span class="keywordflow">return</span> <span class="keyword">false</span>;
        }
        <span class="comment">// ----------------------------------------------</span>
        <span class="keywordflow">if</span> (m_pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#adee7eef0a51e8e94522c43ac898c2308">GetTransactionNumCount</a>(strServerID) &lt; 1) <span class="comment">// Need a closing number...</span>
        {
            <a class="code" href="class_o_t_log.html#a1f7549d776ee919dcb6517f611ded015">OTLog::Output</a>(0, <span class="stringliteral">&quot;OTAgent::ReserveClosingTransNum: *** Failure *** Nym needs at least 1 transaction number available in order to do this.\n&quot;</span>);
            <span class="keywordflow">return</span> <span class="keyword">false</span>;
        }
        <span class="comment">// ----------------------------------------------</span>
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">false</span> == m_pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#a82c5ec5457947738c807bffd581181ac">GetNextTransactionNum</a>(*m_pNym, strServerID, lTransactionNumber))
        {
            <a class="code" href="class_o_t_log.html#a5acd90ac91c2618f395b0ff37ad4f8ee">OTLog::Error</a>(<span class="stringliteral">&quot;OTAgent::ReserveClosingTransNum: Error: Strangely, unable to get a transaction number, even though supposedly one was there.\n&quot;</span>);
            <span class="keywordflow">return</span> <span class="keyword">false</span>;
        }
        <span class="comment">// ------------------------------------------------</span>
        <span class="comment">// BELOW THIS POINT, TRANSACTION # HAS BEEN RESERVED, AND MUST BE SAVED...</span>
        <span class="comment">// Any errors below this point will require this call before returning:</span>
        <span class="comment">// HarvestAllTransactionNumbers(strServerID);</span>
        <span class="comment">//</span>
        thePartyAcct.<a class="code" href="class_o_t_party_account.html#aa01d85490c9998c048bd39fa4512610e">SetClosingTransNo</a>(lTransactionNumber);
        thePartyAcct.<a class="code" href="class_o_t_party_account.html#afcfac1f0d683d7cc47f990c9a2e5866c">SetAgentName</a>(m_strName);

        <span class="keywordflow">return</span> <span class="keyword">true</span>;
    }
    <span class="comment">// -------------------------------------------------</span>
    <span class="keywordflow">else</span> <span class="comment">// todo: when entities and roles are added... this function will change.</span>
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;OTAgent::ReserveClosingTransNum: Either the Nym pointer isn&#39;t set properly, &quot;</span>
                      <span class="stringliteral">&quot;or you tried to use Entities when they haven&#39;t been coded yet. Agent: %s \n&quot;</span>,
                      m_strName.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
    }

    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a06d548dade08b7b10ea6eb25a827ed66"></a><!-- doxytag: member="OTAgent::ReserveOpeningTransNum" ref="a06d548dade08b7b10ea6eb25a827ed66" args="(const OTString &amp;strServerID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_agent.html#a06d548dade08b7b10ea6eb25a827ed66">OTAgent::ReserveOpeningTransNum</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strServerID</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_agent_8cpp_source.html#l01072">1072</a> of file <a class="el" href="_o_t_agent_8cpp_source.html">OTAgent.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    int64_t lTransactionNumber = 0;

    <span class="keywordflow">if</span> (<a class="code" href="class_o_t_agent.html#a1969e4f8a5f13ee34ba0a68d8f082956">IsAnIndividual</a>() &amp;&amp; <a class="code" href="class_o_t_agent.html#a6e9c37100a8e0e4cf9f982ee5f4d3eec">DoesRepresentHimself</a>() &amp;&amp; (NULL != m_pNym))
    {
        <span class="keywordflow">if</span> (NULL == m_pForParty)
        {
            <a class="code" href="class_o_t_log.html#a5acd90ac91c2618f395b0ff37ad4f8ee">OTLog::Error</a>(<span class="stringliteral">&quot;OTAgent::ReserveOpeningTransNum: Error: Party pointer was NULL.  SHOULD NEVER HAPPEN!!\n&quot;</span>);
            <span class="keywordflow">return</span> <span class="keyword">false</span>;
        }
        <span class="keywordflow">if</span> (m_pForParty-&gt;<a class="code" href="class_o_t_party.html#aa11f990dfe9743dd1d8e34af8bfd693a">GetOpeningTransNo</a>() &gt; 0)
        {
            <a class="code" href="class_o_t_log.html#a1f7549d776ee919dcb6517f611ded015">OTLog::Output</a>(0, <span class="stringliteral">&quot;OTAgent::ReserveOpeningTransNum: Failure: Party ALREADY had an opening transaction number &quot;</span>
                          <span class="stringliteral">&quot;set on it. Don&#39;t you want to save that first, before overwriting it?\n&quot;</span>);
            <span class="keywordflow">return</span> <span class="keyword">false</span>;
        }
        <span class="comment">// ----------------------------------------------</span>
        <span class="keywordflow">if</span> (m_pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#adee7eef0a51e8e94522c43ac898c2308">GetTransactionNumCount</a>(strServerID) &lt; 1) <span class="comment">// Need opening number...</span>
        {
            <a class="code" href="class_o_t_log.html#a1f7549d776ee919dcb6517f611ded015">OTLog::Output</a>(0, <span class="stringliteral">&quot;OTAgent::ReserveOpeningTransNum: *** Failure *** Nym needs at least 1 transaction number available in order to do this.\n&quot;</span>);
            <span class="keywordflow">return</span> <span class="keyword">false</span>;
        }
        <span class="comment">// ----------------------------------------------</span>
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">false</span> == m_pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#a82c5ec5457947738c807bffd581181ac">GetNextTransactionNum</a>(*m_pNym, strServerID, lTransactionNumber))
        {
            <a class="code" href="class_o_t_log.html#a5acd90ac91c2618f395b0ff37ad4f8ee">OTLog::Error</a>(<span class="stringliteral">&quot;OTAgent::ReserveOpeningTransNum: Error: Strangely, unable to get a transaction number, even though supposedly one was there.\n&quot;</span>);
            <span class="keywordflow">return</span> <span class="keyword">false</span>;
        }
        <span class="comment">// ------------------------------------------------</span>
        <span class="comment">// BELOW THIS POINT, TRANSACTION # HAS BEEN RESERVED, AND MUST BE SAVED...</span>
        <span class="comment">// Any errors below this point will require this call before returning:</span>
        <span class="comment">// HarvestAllTransactionNumbers(strServerID);</span>
        <span class="comment">//</span>
        m_pForParty-&gt;<a class="code" href="class_o_t_party.html#a7f587b2f9dc4305e035057fa252b8fa7">SetOpeningTransNo</a>(lTransactionNumber);
        m_pForParty-&gt;<a class="code" href="class_o_t_party.html#a45b9f2d265bf4717ce325ec4923b7a13">SetAuthorizingAgentName</a>(m_strName.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());

        <span class="keywordflow">return</span> <span class="keyword">true</span>;
    }
    <span class="comment">// -------------------------------------------------</span>
    <span class="keywordflow">else</span> <span class="comment">// todo: when entities and roles are added... this function will change.</span>
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;OTAgent::ReserveOpeningTransNum: Either the Nym pointer isn&#39;t set properly, &quot;</span>
                     <span class="stringliteral">&quot;or you tried to use Entities when they haven&#39;t been coded yet. Agent: %s \n&quot;</span>,
                      m_strName.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
    }

    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a86f8664531c96aeaaae9796131ec2f2f"></a><!-- doxytag: member="OTAgent::RetrieveNymPointer" ref="a86f8664531c96aeaaae9796131ec2f2f" args="(mapOfNyms &amp;map_Nyms_Already_Loaded)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_agent.html#a86f8664531c96aeaaae9796131ec2f2f">OTAgent::RetrieveNymPointer</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_o_t_agent_8hpp.html#ac89892658f6bc83e354078647b704e8f">mapOfNyms</a> &amp;&#160;</td>
          <td class="paramname"><em>map_Nyms_Already_Loaded</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_agent_8cpp_source.html#l00621">621</a> of file <a class="el" href="_o_t_agent_8cpp_source.html">OTAgent.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keyword">const</span> std::string str_agent_name(m_strName.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());

    <span class="comment">//  We actually have a Nym pointer on this agent somehow (so let&#39;s add it to the list.)</span>
    <span class="comment">//</span>
    <span class="keywordflow">if</span> (NULL != m_pNym)
    {
        <span class="keywordflow">if</span> (!m_strName.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>())  <span class="comment">// Whoaa!! Can&#39;t add it without the agent&#39;s name for the map!</span>
        {
            <a class="code" href="class_o_t_log.html#a5acd90ac91c2618f395b0ff37ad4f8ee">OTLog::Error</a>(<span class="stringliteral">&quot;OTAgent::RetrieveNymPointers: Failed: m_strName is empty!\n&quot;</span>);
        }
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (map_Nyms_Already_Loaded.end() ==
                 map_Nyms_Already_Loaded.insert(map_Nyms_Already_Loaded.begin(), std::pair&lt;std::string, OTPseudonym *&gt;(str_agent_name, m_pNym)))
            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;OTAgent::RetrieveNymPointer: Failed on insertion, as though another nym were already &quot;</span>
                         <span class="stringliteral">&quot;there with the same agent name! (%s)\n&quot;</span>, m_strName.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
        <span class="comment">// (else it was inserted successfully.)</span>
    }
    <span class="comment">// else nothing, since it&#39;s normal that most of them are NULL, even when one is goood.</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="af76ae393d78775d897a7bd53cd277a5d"></a><!-- doxytag: member="OTAgent::Serialize" ref="af76ae393d78775d897a7bd53cd277a5d" args="(OTString &amp;strAppend)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_agent.html#af76ae393d78775d897a7bd53cd277a5d">OTAgent::Serialize</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strAppend</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_agent_8cpp_source.html#l01123">1123</a> of file <a class="el" href="_o_t_agent_8cpp_source.html">OTAgent.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
<span class="comment">//  strAppend.Concatenate(&quot;&lt;agent&gt;\n\n&quot;);</span>

    strAppend.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;&lt;agent\n name=\&quot;%s\&quot;\n&quot;</span>
                          <span class="stringliteral">&quot; doesAgentRepresentHimself=\&quot;%s\&quot;\n&quot;</span>
                          <span class="stringliteral">&quot; isAgentAnIndividual=\&quot;%s\&quot;\n&quot;</span>
                          <span class="stringliteral">&quot; nymID=\&quot;%s\&quot;\n&quot;</span>
                          <span class="stringliteral">&quot; roleID=\&quot;%s\&quot;\n&quot;</span>
                          <span class="stringliteral">&quot; groupName=\&quot;%s\&quot; /&gt;\n\n&quot;</span>,
                          m_strName.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(),
                          m_bNymRepresentsSelf ? <span class="stringliteral">&quot;true&quot;</span> : <span class="stringliteral">&quot;false&quot;</span>,
                          m_bIsAnIndividual ? <span class="stringliteral">&quot;true&quot;</span> : <span class="stringliteral">&quot;false&quot;</span>,
                          m_strNymID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(),
                          m_strRoleID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(),
                          m_strGroupName.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());

<span class="comment">//  strAppend.Concatenate(&quot;&lt;/agent&gt;\n&quot;);</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="a202afbb3ebae1e34fc795d5c5d2e724c"></a><!-- doxytag: member="OTAgent::SetNymPointer" ref="a202afbb3ebae1e34fc795d5c5d2e724c" args="(OTPseudonym &amp;theNym)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_agent.html#a202afbb3ebae1e34fc795d5c5d2e724c">OTAgent::SetNymPointer</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;&#160;</td>
          <td class="paramname"><em>theNym</em></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_agent_8hpp_source.html#l00254">254</a> of file <a class="el" href="_o_t_agent_8hpp_source.html">OTAgent.hpp</a>.</p>
<div class="fragment"><pre class="fragment">{ m_pNym = &amp;theNym; }
</pre></div>
</div>
</div>
<a class="anchor" id="a8809ec0331164b75700e462c8d808dd6"></a><!-- doxytag: member="OTAgent::SetParty" ref="a8809ec0331164b75700e462c8d808dd6" args="(OTParty &amp;theOwnerParty)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_agent.html#a8809ec0331164b75700e462c8d808dd6">OTAgent::SetParty</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_party.html">OTParty</a> &amp;&#160;</td>
          <td class="paramname"><em>theOwnerParty</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_agent_8cpp_source.html#l00292">292</a> of file <a class="el" href="_o_t_agent_8cpp_source.html">OTAgent.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    m_pForParty = &amp;theOwnerParty;

    <span class="comment">// A Nym can only act as agent for himself or for an entity</span>
    <span class="comment">// (never for another Nym. Start an entity if you want that.)</span>
    <span class="comment">// If the owner party is a Nym, therefore this agent IS the Nym acting for himself.</span>
    <span class="comment">// Whereas if the owner party were an entity, then this agent could be a Nym or a voting group.</span>
    <span class="comment">// Since inside this block the owner party IS a Nym, not an entity, then the agent can therefore</span>
    <span class="comment">// only be THAT Nym, acting as an agent for himself. Remember, a Nym cannot act as agent for</span>
    <span class="comment">// another Nym. That is only possible by an agreement between them, and that agreement becomes</span>
    <span class="comment">// the entity (therefore it&#39;s only possible using an entity.)</span>
    <span class="comment">//</span>
    <span class="keywordflow">if</span> (theOwnerParty.<a class="code" href="class_o_t_party.html#a1c2f66b28bd7062505430fcbe18f9c12">IsNym</a>()) <span class="comment">// Thus, this basically means the agent IS the party.</span>
    {
        m_bNymRepresentsSelf    = <span class="keyword">true</span>;
        m_bIsAnIndividual       = <span class="keyword">true</span>;

        <span class="keywordtype">bool</span> bGetOwnerNymID = <span class="keyword">false</span>;
        <span class="keyword">const</span> std::string str_owner_nym_id = theOwnerParty.<a class="code" href="class_o_t_party.html#a22ca91a1414fd1457f192d91fe740d80">GetNymID</a>(&amp;bGetOwnerNymID);
        m_strNymID.<a class="code" href="class_o_t_string.html#aa5db620fe8e60c849585d741975db991">Set</a>(bGetOwnerNymID ? str_owner_nym_id.c_str() : <span class="stringliteral">&quot;&quot;</span>);

        <span class="comment">// Todo here, instead of copying the Owner&#39;s Nym ID like above, just make sure they match.</span>
        <span class="comment">// Similarly, make sure that the RoleID or GroupName, whichever is relevant, is validated for the owner.</span>
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a0749f394cfbabd6a64942bbf53af0e7b"></a><!-- doxytag: member="OTAgent::SignContract" ref="a0749f394cfbabd6a64942bbf53af0e7b" args="(OTContract &amp;theInput)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_agent.html#a0749f394cfbabd6a64942bbf53af0e7b">OTAgent::SignContract</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_contract.html">OTContract</a> &amp;&#160;</td>
          <td class="paramname"><em>theInput</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_agent_8cpp_source.html#l00817">817</a> of file <a class="el" href="_o_t_agent_8cpp_source.html">OTAgent.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (!<a class="code" href="class_o_t_agent.html#a1969e4f8a5f13ee34ba0a68d8f082956">IsAnIndividual</a>() || !<a class="code" href="class_o_t_agent.html#a6e9c37100a8e0e4cf9f982ee5f4d3eec">DoesRepresentHimself</a>())
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;OTAgent::SignContract: Entities and roles are not yet supported. Agent: %s.\n&quot;</span>,
                      m_strName.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }<span class="comment">// todo: when adding entities, this will change.</span>
    <span class="comment">// ---------------------------</span>
    <span class="keywordflow">if</span> (NULL == m_pNym)
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;OTAgent::SignContract: Nym was NULL while trying to sign contract. Agent: %s.\n&quot;</span>,
                      m_strName.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }<span class="comment">// todo: when adding entities, this will change.</span>

    <span class="keywordflow">return</span> theInput.<a class="code" href="class_o_t_contract.html#abd60037fe655ee8cae9a3ece5d1e2ea6">SignContract</a>(*m_pNym);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a0ebeaa707c5793be4ac3c1a906f89f7c"></a><!-- doxytag: member="OTAgent::VerifyAgencyOfAccount" ref="a0ebeaa707c5793be4ac3c1a906f89f7c" args="(const OTAccount &amp;theAccount) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_agent.html#a0ebeaa707c5793be4ac3c1a906f89f7c">OTAgent::VerifyAgencyOfAccount</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_account.html">OTAccount</a> &amp;&#160;</td>
          <td class="paramname"><em>theAccount</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_agent_8cpp_source.html#l00643">643</a> of file <a class="el" href="_o_t_agent_8cpp_source.html">OTAgent.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theSignerID;

    <span class="keywordflow">if</span> (!this-&gt;<a class="code" href="class_o_t_agent.html#a7750c7f5840047c5413d95e92ad87578">GetSignerID</a>(theSignerID))
    {
        <a class="code" href="class_o_t_log.html#a5acd90ac91c2618f395b0ff37ad4f8ee">OTLog::Error</a>(<span class="stringliteral">&quot;OTAgent::VerifyAgencyOfAccount: ERROR: Entities and roles haven&#39;t been coded yet.\n&quot;</span>);
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// --------------------</span>

    <span class="keywordflow">return</span> theAccount.<a class="code" href="class_o_t_account.html#a4b6aa9e72c2ad3e395f9fe6cea00dd4d">VerifyOwnerByID</a>(theSignerID); <span class="comment">// todo when entities and roles come, won&#39;t this &quot;just work&quot;, or do I also have to warn the acct whether it&#39;s a Nym or a Role being passed?</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa5175fb8a0a26e3b5cb7ea54ba3c2f7e"></a><!-- doxytag: member="OTAgent::VerifyIssuedNumber" ref="aa5175fb8a0a26e3b5cb7ea54ba3c2f7e" args="(const int64_t &amp;lNumber, const OTString &amp;strServerID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_agent.html#aa5175fb8a0a26e3b5cb7ea54ba3c2f7e">OTAgent::VerifyIssuedNumber</a> </td>
          <td>(</td>
          <td class="paramtype">const int64_t &amp;&#160;</td>
          <td class="paramname"><em>lNumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strServerID</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_agent_8cpp_source.html#l00837">837</a> of file <a class="el" href="_o_t_agent_8cpp_source.html">OTAgent.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// Todo: this function may change when entities / roles are added.</span>
    <span class="keywordflow">if</span> (!<a class="code" href="class_o_t_agent.html#a1969e4f8a5f13ee34ba0a68d8f082956">IsAnIndividual</a>() || !<a class="code" href="class_o_t_agent.html#a6e9c37100a8e0e4cf9f982ee5f4d3eec">DoesRepresentHimself</a>())
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;OTAgent::VerifyIssuedNumber:  Error: Entities and Roles are not yet supported. Agent: %s\n&quot;</span>,
                     m_strName.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// -----------------------------------------</span>
    <span class="keywordflow">if</span> (NULL != m_pNym)
        <span class="keywordflow">return</span> m_pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#a66cf3b97f1769f9d422bad8787a6c1a0">VerifyIssuedNum</a>(strServerID, lNumber);
    <span class="keywordflow">else</span>
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;OTAgent::VerifyIssuedNumber: Error: m_pNym was NULL. For agent: %s\n&quot;</span>,
                      m_strName.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());

    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a63316db5c765344066a18d87e39cef60"></a><!-- doxytag: member="OTAgent::VerifySignature" ref="a63316db5c765344066a18d87e39cef60" args="(OTContract &amp;theContract)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_agent.html#a63316db5c765344066a18d87e39cef60">OTAgent::VerifySignature</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_contract.html">OTContract</a> &amp;&#160;</td>
          <td class="paramname"><em>theContract</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_agent_8cpp_source.html#l00156">156</a> of file <a class="el" href="_o_t_agent_8cpp_source.html">OTAgent.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// Only individual agents can sign for things, not groups (groups vote, they don&#39;t sign.)</span>
    <span class="comment">// Thus, an individual can verify a signature, whereas a voting group would verify an election result (or whatever.)</span>
    <span class="comment">//</span>
    <span class="keywordflow">if</span> (!<a class="code" href="class_o_t_agent.html#a1969e4f8a5f13ee34ba0a68d8f082956">IsAnIndividual</a>() || !<a class="code" href="class_o_t_agent.html#a6e9c37100a8e0e4cf9f982ee5f4d3eec">DoesRepresentHimself</a>())
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;OTAgent::VerifySignature: Entities and roles are not yet supported. Agent: %s.\n&quot;</span>,
                      m_strName.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }<span class="comment">// todo: when adding entities, this will change.</span>

<span class="comment">//  if (DoesRepresentAnEntity)</span>
<span class="comment">//  {</span>
<span class="comment">//      // The original version of a smartcontract might show that Frank, the Sales Director, signed it.</span>
<span class="comment">//      // Years later, Frank is fired, and Jim is appointed to his former Role of sales director, in the same entity.</span>
<span class="comment">//      // The original copy of the smart contract still contains Frank&#39;s signature, and thus we still need to load Frank</span>
<span class="comment">//      // in order to verify that original signature.  That&#39;s why we load Frank by the NymID stored there. He was the Nym</span>
<span class="comment">//      // at the time, so that&#39;s the key we load.</span>
<span class="comment">//      //</span>
<span class="comment">//      // NEXT: What if JIM tries to verify the signature on the contract, even though FRANK was the original signer?</span>
<span class="comment">//      // Should OTAgent be smart enough here to substitute Frank whenever Jim tries to verify? I argue no: this function is</span>
<span class="comment">//      // too low-level. Plus it&#39;s backwards. If Jim tries to DO an action, THEN OT should be smart enough to verify that Jim</span>
<span class="comment">//      // is in the proper Role and that Jim&#39;s signature is good enough to authorize actions. But if OT is verifying Frank&#39;s</span>
<span class="comment">//      // signature on some old copy of something that Frank formerly signed, then this function should clearly tell me if Frank&#39;s</span>
<span class="comment">//      // sig verified... or not.</span>
<span class="comment">//      //</span>
<span class="comment">//      // Therefore the &quot;DoesRepresentAnEntity()&quot; option is useless here, since we are verifying the same Nym&#39;s signature whether</span>
<span class="comment">//      // he represents an entity or not.</span>
<span class="comment">//      //</span>
<span class="comment">//  }</span>
<span class="comment">//  else</span>
    <span class="keywordflow">if</span> (NULL == m_pNym)
    {
        <a class="code" href="class_o_t_string.html">OTString</a> strTemp(theContract);
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;OTAgent::VerifySignature: Attempted to verify signature on contract, &quot;</span>
                     <span class="stringliteral">&quot;but no Nym had ever been loaded for this agent:\n\n%s\n\n&quot;</span>,
                     strTemp.Get());
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }

    <span class="keywordflow">return</span> theContract.<a class="code" href="class_o_t_contract.html#a38f51d593b6dfc8a75d1c5a535965392">VerifySignature</a>(*m_pNym);
}
</pre></div>
</div>
</div>
<a class="anchor" id="adb89b362ce9a7100d4bd736d8e54d92a"></a><!-- doxytag: member="OTAgent::VerifyTransactionNumber" ref="adb89b362ce9a7100d4bd736d8e54d92a" args="(const int64_t &amp;lNumber, const OTString &amp;strServerID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_agent.html#adb89b362ce9a7100d4bd736d8e54d92a">OTAgent::VerifyTransactionNumber</a> </td>
          <td>(</td>
          <td class="paramtype">const int64_t &amp;&#160;</td>
          <td class="paramname"><em>lNumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strServerID</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_agent_8cpp_source.html#l00857">857</a> of file <a class="el" href="_o_t_agent_8cpp_source.html">OTAgent.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// Todo: this function may change when entities / roles are added.</span>
    <span class="keywordflow">if</span> (!<a class="code" href="class_o_t_agent.html#a1969e4f8a5f13ee34ba0a68d8f082956">IsAnIndividual</a>() || !<a class="code" href="class_o_t_agent.html#a6e9c37100a8e0e4cf9f982ee5f4d3eec">DoesRepresentHimself</a>())
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;OTAgent::VerifyTransactionNumber:  Error: Entities and Roles are not yet supported. Agent: %s\n&quot;</span>,
                     m_strName.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// -----------------------------------------</span>
    <span class="keywordflow">if</span> (NULL != m_pNym)
        <span class="keywordflow">return</span> m_pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#a13bbb470e627968c184ef4728ef85d7a">VerifyTransactionNum</a>(strServerID, lNumber);
    <span class="keywordflow">else</span>
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;OTAgent::VerifyTransactionNumber: Error: m_pNym was NULL. For agent: %s\n&quot;</span>,
                      m_strName.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());

    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>include/otlib/<a class="el" href="_o_t_agent_8hpp_source.html">OTAgent.hpp</a></li>
<li>src/otlib/<a class="el" href="_o_t_agent_8cpp_source.html">OTAgent.cpp</a></li>
</ul>
</div><!-- contents -->
</div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="class_o_t_agent.html">OTAgent</a>      </li>

    <li class="footer">Generated on Wed May 21 2014 11:26:08 for Open-Transactions by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.6.1 </li>
   </ul>
 </div>


</body>
</html>
