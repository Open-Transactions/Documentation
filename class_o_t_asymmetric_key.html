<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Open-Transactions: OTAsymmetricKey Class Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Open-Transactions
   &#160;<span id="projectnumber">master/1066fb4910a63ee3f7de8e0807fee3eb663b66c7</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('class_o_t_asymmetric_key.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="#pro-static-attribs">Static Protected Attributes</a>  </div>
  <div class="headertitle">
<div class="title">OTAsymmetricKey Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<!-- doxytag: class="OTAsymmetricKey" -->
<p><code>#include &lt;<a class="el" href="_o_t_asymmetric_key_8hpp_source.html">OTAsymmetricKey.hpp</a>&gt;</code></p>

<p><a href="class_o_t_asymmetric_key-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="class_o_t_asymmetric_key.html">OTAsymmetricKey</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_asymmetric_key.html#a37e6f518edc84ed791ab0af9dff2cc11">ClonePubKey</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_asymmetric_key.html#aeeb94d323fdde87a5b2f5c5295525ace">~OTAsymmetricKey</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_asymmetric_key.html#ad10673a51a994dcc6d62f5ed51c2217e">Release</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_asymmetric_key.html#ae67026950c62348bfd51bddaa2c1d216">Release_AsymmetricKey</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_asymmetric_key.html#a27ea981228472cd93db81a4e96a76c43">ReleaseKey</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_asymmetric_key.html#af46fb386cc409488a67df46bcd8b8571">IsEmpty</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_asymmetric_key.html#a22a32d97edbacc280fcd45a76bd9cd60">IsPublic</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_asymmetric_key.html#a40da82b0005ea3c08531d8aaa3f41b28">IsPrivate</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_asymmetric_key.html#a839879275f1b65d57be967deea663251">SetAsPublic</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_asymmetric_key.html#a3c839a010c728ad5dc99dc6eb9176e99">SetAsPrivate</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_asymmetric_key.html#a16ddedee7b57fd7771142b56cecb2f57">CalculateID</a> (<a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;theOutput) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_asymmetric_key.html#a4c337637abe6e0ec1a1083b4e4712785">LoadPrivateKey</a> (const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strFoldername, const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strFilename, const <a class="el" href="class_o_t_string.html">OTString</a> *pstrReason=NULL, <a class="el" href="class_o_t_password.html">OTPassword</a> *pImportPassword=NULL)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_asymmetric_key.html#a5ef7ec49f5bb33874cb3c432ec97796d">LoadPublicKey</a> (const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strFoldername, const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strFilename)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_asymmetric_key.html#aef5421ede5b0a55b47ddeddafb22c7e5">LoadPublicKeyFromPGPKey</a> (const <a class="el" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> &amp;strKey)=0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_asymmetric_key.html#ad073c7e52b61e491a664a44defc2e9d8">LoadPrivateKeyFromCertString</a> (const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strCert, bool bEscaped=true, const <a class="el" href="class_o_t_string.html">OTString</a> *pstrReason=NULL, <a class="el" href="class_o_t_password.html">OTPassword</a> *pImportPassword=NULL)=0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_asymmetric_key.html#a2a38f9a40d7476120584fe69d9b60f0a">LoadPublicKeyFromCertString</a> (const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strCert, bool bEscaped=true, const <a class="el" href="class_o_t_string.html">OTString</a> *pstrReason=NULL, <a class="el" href="class_o_t_password.html">OTPassword</a> *pImportPassword=NULL)=0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_asymmetric_key.html#a7edde863933c25a20233acfd7d7f0b03">LoadPublicKeyFromCertFile</a> (const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strFoldername, const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strFilename, const <a class="el" href="class_o_t_string.html">OTString</a> *pstrReason=NULL, <a class="el" href="class_o_t_password.html">OTPassword</a> *pImportPassword=NULL)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_asymmetric_key.html#a7090b3da6224e9657809c033c1680b4b">SaveCertToString</a> (<a class="el" href="class_o_t_string.html">OTString</a> &amp;strOutput, const <a class="el" href="class_o_t_string.html">OTString</a> *pstrReason=NULL, <a class="el" href="class_o_t_password.html">OTPassword</a> *pImportPassword=NULL)=0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_asymmetric_key.html#a0793ec27c04def4b0e8b2976a07aad1a">SavePrivateKeyToString</a> (<a class="el" href="class_o_t_string.html">OTString</a> &amp;strOutput, const <a class="el" href="class_o_t_string.html">OTString</a> *pstrReason=NULL, <a class="el" href="class_o_t_password.html">OTPassword</a> *pImportPassword=NULL)=0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_asymmetric_key.html#a6f81f86ccb457f2e9a40a269d60fc39d">ReEncryptPrivateKey</a> (<a class="el" href="class_o_t_password.html">OTPassword</a> &amp;theExportPassword, bool bImporting)=0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_asymmetric_key.html#ab4eee84fb4faf0a374fa10f110853214">GetPublicKey</a> (<a class="el" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> &amp;strKey) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_asymmetric_key.html#a314d1ca07019c1e3c0ea49e1770db6de">GetPublicKey</a> (<a class="el" href="class_o_t_string.html">OTString</a> &amp;strKey, bool bEscaped=true) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_asymmetric_key.html#abe1f83bcc64a9f56406c4e145cd65651">SetPublicKey</a> (const <a class="el" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> &amp;strKey)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_asymmetric_key.html#af60481c34a7b82115c0a5a4a39d5bb1f">SetPublicKey</a> (const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strKey, bool bEscaped=false)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_asymmetric_key.html#a872b0df2c5e7a1d8878e062ccd7e1a6e">GetPrivateKey</a> (<a class="el" href="class_o_t_string.html">OTString</a> &amp;strKey, bool bEscaped=true) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_asymmetric_key.html#aef904c0455862c1474f059b95aed2b37">GetPrivateKey</a> (<a class="el" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> &amp;strKey) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_asymmetric_key.html#ab22e31cf5871684effc6191a2827bdd7">SetPrivateKey</a> (const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strKey, bool bEscaped=false)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_asymmetric_key.html#a07ad066e8ecf70e0ae6116fbaf60a1e6">SetPrivateKey</a> (const <a class="el" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> &amp;strKey)</td></tr>
<tr><td colspan="2"><h2><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static EXPORT <a class="el" href="class_o_t_asymmetric_key.html">OTAsymmetricKey</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_asymmetric_key.html#a4437342fa5841152e2dfa6ee48a69094">KeyFactory</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_asymmetric_key.html#a43086e379109294710864a8b8ef909a9">SetPasswordCallback</a> (<a class="el" href="_o_t_low_level_key_data_8hpp.html#a8feb89a83902654f856b22a62538e8a1">OT_OPENSSL_CALLBACK</a> *pCallback)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static EXPORT <a class="el" href="_o_t_low_level_key_data_8hpp.html#a8feb89a83902654f856b22a62538e8a1">OT_OPENSSL_CALLBACK</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_asymmetric_key.html#a7515df1669bf358ddfc7ea477aedafdf">GetPasswordCallback</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_asymmetric_key.html#a4815b347d60fb11927b981d7ce8d192b">IsPasswordCallbackSet</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_asymmetric_key.html#a2bb4ed26696a979c6eb8031ebe080043">SetPasswordCaller</a> (<a class="el" href="class_o_t_caller.html">OTCaller</a> &amp;theCaller)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="class_o_t_caller.html">OTCaller</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_asymmetric_key.html#ad46a79607e180ef1f583710f4135e1f1">GetPasswordCaller</a> ()</td></tr>
<tr><td colspan="2"><h2><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_o_t_signature_metadata.html">OTSignatureMetadata</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_asymmetric_key.html#a071e09c59ab0b1460debd3c092da0034">m_pMetadata</a></td></tr>
<tr><td colspan="2"><h2><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_asymmetric_key.html#a3e4194e3050b8b60c047b983b6ada849">ReleaseKeyLowLevel</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_asymmetric_key.html#afc7e52e8c350454feec26cbed072ba3e">ReleaseKeyLowLevel_Hook</a> ()=0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_asymmetric_key.html#a8adce34a0d7c2a6cd6fbd36cf4d7870b">OTAsymmetricKey</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_asymmetric_key.html#ae6d8f85efa82a71807162d90285da605">OTAsymmetricKey</a> (const <a class="el" href="class_o_t_asymmetric_key.html">OTAsymmetricKey</a> &amp;rhs)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_o_t_asymmetric_key.html">OTAsymmetricKey</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_asymmetric_key.html#abd4f82bc0e3d64b8d76b7b29ee7f81e3">operator=</a> (const <a class="el" href="class_o_t_asymmetric_key.html">OTAsymmetricKey</a> &amp;rhs)</td></tr>
<tr><td colspan="2"><h2><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_asymmetric_key.html#af204791997a2b6549190d14beea8f5b3">m_p_ascKey</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_asymmetric_key.html#aba2665c0a98034096001748118a3b265">m_bIsPublicKey</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_asymmetric_key.html#a20f69009c311b6d071b40a1b977f31fb">m_bIsPrivateKey</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_timer.html">Timer</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_asymmetric_key.html#a182ca35576244f8506497dc781429631">m_timer</a></td></tr>
<tr><td colspan="2"><h2><a name="pro-static-attribs"></a>
Static Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="_o_t_low_level_key_data_8hpp.html#a8feb89a83902654f856b22a62538e8a1">OT_OPENSSL_CALLBACK</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_asymmetric_key.html#a17907805777c1a34ef4e7e50fc0c3101">s_pwCallback</a> = NULL</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="class_o_t_caller.html">OTCaller</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_asymmetric_key.html#a3c3b456ec4fe74255a1c7fe4571c71c7">s_pCaller</a> = NULL</td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock">
<p>Definition at line <a class="el" href="_o_t_asymmetric_key_8hpp_source.html#l00203">203</a> of file <a class="el" href="_o_t_asymmetric_key_8hpp_source.html">OTAsymmetricKey.hpp</a>.</p>
</div><hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a8adce34a0d7c2a6cd6fbd36cf4d7870b"></a><!-- doxytag: member="OTAsymmetricKey::OTAsymmetricKey" ref="a8adce34a0d7c2a6cd6fbd36cf4d7870b" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_asymmetric_key.html#a8adce34a0d7c2a6cd6fbd36cf4d7870b">OTAsymmetricKey::OTAsymmetricKey</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_asymmetric_key_8cpp_source.html#l02452">2452</a> of file <a class="el" href="_o_t_asymmetric_key_8cpp_source.html">OTAsymmetricKey.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                 :
    <a class="code" href="class_o_t_asymmetric_key.html#af204791997a2b6549190d14beea8f5b3">m_p_ascKey</a>(NULL),
    <a class="code" href="class_o_t_asymmetric_key.html#aba2665c0a98034096001748118a3b265">m_bIsPublicKey</a>(<span class="keyword">false</span>),
    <a class="code" href="class_o_t_asymmetric_key.html#a20f69009c311b6d071b40a1b977f31fb">m_bIsPrivateKey</a>(<span class="keyword">false</span>),
    <a class="code" href="class_o_t_asymmetric_key.html#a071e09c59ab0b1460debd3c092da0034">m_pMetadata</a>(<span class="keyword">new</span> <a class="code" href="class_o_t_signature_metadata.html">OTSignatureMetadata</a>)
{
<span class="comment">//    if (NULL == m_p_ascKey)</span>
<span class="comment">//    {</span>
<span class="comment">//        m_p_ascKey = new OTASCIIArmor;</span>
<span class="comment">//        OT_ASSERT(NULL != m_p_ascKey);</span>
<span class="comment">//    }   </span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae6d8f85efa82a71807162d90285da605"></a><!-- doxytag: member="OTAsymmetricKey::OTAsymmetricKey" ref="ae6d8f85efa82a71807162d90285da605" args="(const OTAsymmetricKey &amp;rhs)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_asymmetric_key.html#a8adce34a0d7c2a6cd6fbd36cf4d7870b">OTAsymmetricKey::OTAsymmetricKey</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_asymmetric_key.html">OTAsymmetricKey</a> &amp;&#160;</td>
          <td class="paramname"><em>rhs</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_asymmetric_key_8cpp_source.html#l02421">2421</a> of file <a class="el" href="_o_t_asymmetric_key_8cpp_source.html">OTAsymmetricKey.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                            : 
    <a class="code" href="class_o_t_asymmetric_key.html#af204791997a2b6549190d14beea8f5b3">m_p_ascKey</a>(NULL),
    <a class="code" href="class_o_t_asymmetric_key.html#aba2665c0a98034096001748118a3b265">m_bIsPublicKey</a>(<span class="keyword">true</span>),   <span class="comment">// PUBLIC KEY</span>
    <a class="code" href="class_o_t_asymmetric_key.html#a20f69009c311b6d071b40a1b977f31fb">m_bIsPrivateKey</a>(<span class="keyword">false</span>),
    <a class="code" href="class_o_t_asymmetric_key.html#a071e09c59ab0b1460debd3c092da0034">m_pMetadata</a>(<span class="keyword">new</span> <a class="code" href="class_o_t_signature_metadata.html">OTSignatureMetadata</a>)
{
    <span class="keywordflow">if</span> ((&amp;rhs != <span class="keyword">this</span>) &amp;&amp; (<span class="keyword">false</span> == rhs.<a class="code" href="class_o_t_asymmetric_key.html#a40da82b0005ea3c08531d8aaa3f41b28">IsPrivate</a>()) &amp;&amp; (rhs.<a class="code" href="class_o_t_asymmetric_key.html#a22a32d97edbacc280fcd45a76bd9cd60">IsPublic</a>()))
    {
        <a class="code" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> ascTransfer;
        
        <span class="comment">// Get the Issuer&#39;s public key in ASCII-armored format</span>
        rhs.<a class="code" href="class_o_t_asymmetric_key.html#ab4eee84fb4faf0a374fa10f110853214">GetPublicKey</a>(ascTransfer);
        
        <span class="comment">// Decodes a public key from ASCII armor into m_keyPublic, which stores it as a EVP_PKEY pointer.</span>
        this-&gt;<a class="code" href="class_o_t_asymmetric_key.html#abe1f83bcc64a9f56406c4e145cd65651">SetPublicKey</a>(ascTransfer);
        
        <span class="keywordflow">if</span> ((NULL != this-&gt;<a class="code" href="class_o_t_asymmetric_key.html#a071e09c59ab0b1460debd3c092da0034">m_pMetadata</a>) &amp;&amp; (NULL != rhs.<a class="code" href="class_o_t_asymmetric_key.html#a071e09c59ab0b1460debd3c092da0034">m_pMetadata</a>))
            *(this-&gt;<a class="code" href="class_o_t_asymmetric_key.html#a071e09c59ab0b1460debd3c092da0034">m_pMetadata</a>) = *(rhs.<a class="code" href="class_o_t_asymmetric_key.html#a071e09c59ab0b1460debd3c092da0034">m_pMetadata</a>);
    }
    <span class="keywordflow">else</span>
        <a class="code" href="class_o_t_log.html#a5acd90ac91c2618f395b0ff37ad4f8ee">OTLog::Error</a>(<span class="stringliteral">&quot;OTAsymmetricKey::OTAsymmetricKey: Error: Asymmetric key construction attempt either with itself, &quot;</span>
                     <span class="stringliteral">&quot;or with a private key (when expecting public.)\n&quot;</span>);
    
<span class="comment">//    if (NULL == m_p_ascKey)</span>
<span class="comment">//    {</span>
<span class="comment">//        m_p_ascKey = new OTASCIIArmor;</span>
<span class="comment">//        OT_ASSERT(NULL != m_p_ascKey);</span>
<span class="comment">//    }</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="aeeb94d323fdde87a5b2f5c5295525ace"></a><!-- doxytag: member="OTAsymmetricKey::~OTAsymmetricKey" ref="aeeb94d323fdde87a5b2f5c5295525ace" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_asymmetric_key.html#aeeb94d323fdde87a5b2f5c5295525ace">OTAsymmetricKey::~OTAsymmetricKey</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_asymmetric_key_8cpp_source.html#l02466">2466</a> of file <a class="el" href="_o_t_asymmetric_key_8cpp_source.html">OTAsymmetricKey.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
<span class="comment">//  Release_AsymmetricKey(); // ******</span>
    
    <a class="code" href="class_o_t_asymmetric_key.html#a182ca35576244f8506497dc781429631">m_timer</a>.<a class="code" href="class_timer.html#a6a69c5013bf0718850825e647619f62d">clear</a>(); <span class="comment">// Since ReleaseKeyLowLevel is no longer called here (via Release_AsymmetricKey) then</span>
    <span class="comment">// m_timer.clear() was no longer getting called, so I added it here to rectify that. See below NOTE for</span>
    <span class="comment">// more details.</span>
    <span class="comment">//</span>
    <span class="comment">// NOTE: It&#39;s very unusual that the above is commented out, since my normal convention is to</span>
    <span class="comment">// call this function both in the destructor, as well as in the Release() method for any given</span>
    <span class="comment">// class.</span>
    <span class="comment">// Here&#39;s why it&#39;s commented out, in this case. Because all it does is call ReleaseKeyLowLevel,</span>
    <span class="comment">// which calls ReleaseKeyLowLevel_Hook, which is pure virtual and is what allows the</span>
    <span class="comment">// OTAsymmetricKey_OpenSSL class to clean up its OpenSSL-specific private members.</span>
    <span class="comment">// We CANNOT call a pure virtual method from a destructor (which is where we currently are)</span>
    <span class="comment">// and so we cannot call Release_AsymmetricKey without removing that pure virtual call. The</span>
    <span class="comment">// problem is, ReleaseKeyLowLevel USES that pure virtual call all over this file (i.e. in many</span>
    <span class="comment">// other places BESIDES the destructor) and so we cannot just remove the pure virtual call it</span>
    <span class="comment">// uses which is, in fact, the entire purpose it&#39;s being called in the first place. So what I</span>
    <span class="comment">// did was, I changed OTAsymmetricKey_OpenSSL to directly clean up its OpenSSL-specific key data,</span>
    <span class="comment">// and it just ALSO has the hook override doing the same thing. This way Release_AsymmetricKey</span>
    <span class="comment">// can continue to be used by ReleaseKeyLowLevel all over this file, as it was designed, using</span>
    <span class="comment">// the hook and the override, yet also this destructor will continue to work perfectly... because</span>
    <span class="comment">// Release_AsymmetricKey() is commented out above, we won&#39;t have any runtime errors from trying to</span>
    <span class="comment">// run a pure virtual method from a destructor. And because OTAsymmetricKey_OpenSSL now cleans itself</span>
    <span class="comment">// up in its own destructor automatically, we have no need whatsoever to call a virtual function here</span>
    <span class="comment">// to clean it up. So it&#39;s commented out.</span>
    <span class="comment">// Makes sense? Of course we didn&#39;t have any virtuality before OTAsymmetricKey_OpenSSL was added,</span>
    <span class="comment">// since OTAsymmetricKey previously had no subclasses at all. But that has changed recently, so that</span>
    <span class="comment">// it is now an abstract interface, so that someday a GPG implementation, or NaCl implementation can</span>
    <span class="comment">// someday be added.</span>
    <span class="comment">// -------------------------</span>
    <span class="comment">// Release the ascii-armored version of the key (safe to store in this form.)</span>
    <span class="comment">//</span>
    <span class="keywordflow">if</span> (NULL != <a class="code" href="class_o_t_asymmetric_key.html#af204791997a2b6549190d14beea8f5b3">m_p_ascKey</a>)
        <span class="keyword">delete</span> <a class="code" href="class_o_t_asymmetric_key.html#af204791997a2b6549190d14beea8f5b3">m_p_ascKey</a>;
    <a class="code" href="class_o_t_asymmetric_key.html#af204791997a2b6549190d14beea8f5b3">m_p_ascKey</a> = NULL;
    <span class="comment">// -------------------------</span>
    <span class="keywordflow">if</span> (NULL != <a class="code" href="class_o_t_asymmetric_key.html#a071e09c59ab0b1460debd3c092da0034">m_pMetadata</a>)
        <span class="keyword">delete</span> <a class="code" href="class_o_t_asymmetric_key.html#a071e09c59ab0b1460debd3c092da0034">m_pMetadata</a>;
    <a class="code" href="class_o_t_asymmetric_key.html#a071e09c59ab0b1460debd3c092da0034">m_pMetadata</a> = NULL;
}
</pre></div>
</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a16ddedee7b57fd7771142b56cecb2f57"></a><!-- doxytag: member="OTAsymmetricKey::CalculateID" ref="a16ddedee7b57fd7771142b56cecb2f57" args="(OTIdentifier &amp;theOutput) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_asymmetric_key.html#a16ddedee7b57fd7771142b56cecb2f57">OTAsymmetricKey::CalculateID</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;&#160;</td>
          <td class="paramname"><em>theOutput</em></td><td>)</td>
          <td> const<code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_asymmetric_key_8cpp_source.html#l02162">2162</a> of file <a class="el" href="_o_t_asymmetric_key_8cpp_source.html">OTAsymmetricKey.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keyword">const</span> <span class="keywordtype">char</span> * szFunc = <span class="stringliteral">&quot;OTAsymmetricKey::CalculateID&quot;</span>;
    
    theOutput.<a class="code" href="class_o_t_data.html#aab9a5758e85597ef1d7250bcf2cc56a6">Release</a>();
    
    <span class="keywordflow">if</span> (!<a class="code" href="class_o_t_asymmetric_key.html#a22a32d97edbacc280fcd45a76bd9cd60">IsPublic</a>())
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error: !IsPublic() (This function should only be called on a public key.)\n&quot;</span>, szFunc);
        <span class="keywordflow">return</span> <span class="keyword">false</span>;   
    }
    <span class="comment">// ------------------------------</span>
    <a class="code" href="class_o_t_string.html">OTString</a> strPublicKey;
    <span class="keywordtype">bool</span> bGotPublicKey = this-&gt;<a class="code" href="class_o_t_asymmetric_key.html#ab4eee84fb4faf0a374fa10f110853214">GetPublicKey</a>(strPublicKey);
    
    <span class="keywordflow">if</span> (!bGotPublicKey)
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error getting public key.\n&quot;</span>, szFunc);
        <span class="keywordflow">return</span> <span class="keyword">false</span>;   
    }
    <span class="comment">// ------------------------------</span>
    <span class="keywordtype">bool</span> bSuccessCalculateDigest = theOutput.<a class="code" href="class_o_t_identifier.html#ac50b356cf5d5d04c08eaf568d07bcc46">CalculateDigest</a>(strPublicKey);
    
    <span class="keywordflow">if</span> (!bSuccessCalculateDigest)
    {
        theOutput.<a class="code" href="class_o_t_data.html#aab9a5758e85597ef1d7250bcf2cc56a6">Release</a>();
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error calculating digest of public key.\n&quot;</span>, szFunc);
        <span class="keywordflow">return</span> <span class="keyword">false</span>;   
    }
    
    <span class="keywordflow">return</span> <span class="keyword">true</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a37e6f518edc84ed791ab0af9dff2cc11"></a><!-- doxytag: member="OTAsymmetricKey::ClonePubKey" ref="a37e6f518edc84ed791ab0af9dff2cc11" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_asymmetric_key.html">OTAsymmetricKey</a> * <a class="el" href="class_o_t_asymmetric_key.html#a37e6f518edc84ed791ab0af9dff2cc11">OTAsymmetricKey::ClonePubKey</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_asymmetric_key_8cpp_source.html#l00175">175</a> of file <a class="el" href="_o_t_asymmetric_key_8cpp_source.html">OTAsymmetricKey.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_o_t_asymmetric_key.html">OTAsymmetricKey</a> * pKey = <a class="code" href="class_o_t_asymmetric_key.html#a4437342fa5841152e2dfa6ee48a69094">OTAsymmetricKey::KeyFactory</a>();
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pKey);
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != this-&gt;<a class="code" href="class_o_t_asymmetric_key.html#a071e09c59ab0b1460debd3c092da0034">m_pMetadata</a>);
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pKey-&gt;<a class="code" href="class_o_t_asymmetric_key.html#a071e09c59ab0b1460debd3c092da0034">m_pMetadata</a>);
    
    <a class="code" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> ascTransfer;
    this-&gt;<a class="code" href="class_o_t_asymmetric_key.html#ab4eee84fb4faf0a374fa10f110853214">GetPublicKey</a>(ascTransfer);     <span class="comment">// Get this&#39;s public key in ASCII-armored format</span>
    pKey-&gt;<a class="code" href="class_o_t_asymmetric_key.html#abe1f83bcc64a9f56406c4e145cd65651">SetPublicKey</a>(ascTransfer);     <span class="comment">// Decodes that public key from ASCII armor into pKey</span>
    
    *(pKey-&gt;<a class="code" href="class_o_t_asymmetric_key.html#a071e09c59ab0b1460debd3c092da0034">m_pMetadata</a>) = *(this-&gt;<a class="code" href="class_o_t_asymmetric_key.html#a071e09c59ab0b1460debd3c092da0034">m_pMetadata</a>); <span class="comment">// Metadata will be attached to signatures, if set.</span>
    
    <span class="keywordflow">return</span> pKey;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a7515df1669bf358ddfc7ea477aedafdf"></a><!-- doxytag: member="OTAsymmetricKey::GetPasswordCallback" ref="a7515df1669bf358ddfc7ea477aedafdf" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_o_t_low_level_key_data_8hpp.html#a8feb89a83902654f856b22a62538e8a1">OT_OPENSSL_CALLBACK</a> * <a class="el" href="class_o_t_asymmetric_key.html#a7515df1669bf358ddfc7ea477aedafdf">OTAsymmetricKey::GetPasswordCallback</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_asymmetric_key_8cpp_source.html#l01711">1711</a> of file <a class="el" href="_o_t_asymmetric_key_8cpp_source.html">OTAsymmetricKey.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keyword">const</span> <span class="keywordtype">char</span> * szFunc = <span class="stringliteral">&quot;OTAsymmetricKey::GetPasswordCallback&quot;</span>;
    
<span class="preprocessor">#if defined (OT_TEST_PASSWORD)</span>
<span class="preprocessor"></span>    <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(2, <span class="stringliteral">&quot;%s: WARNING, OT_TEST_PASSWORD *is* defined. The internal &#39;C&#39;-based password callback was just &quot;</span>
                  <span class="stringliteral">&quot;requested by OT (to pass to OpenSSL). So, returning the default_pass_cb password callback, which will automatically return &quot;</span>
                  <span class="stringliteral">&quot;the &#39;test&#39; password to OpenSSL, if/when it calls that callback function.\n&quot;</span>, szFunc);
    <span class="keywordflow">return</span> &amp;<a class="code" href="_o_t_asymmetric_key_8hpp.html#a3441e87769dbd0d212ceed6c7a18c877">default_pass_cb</a>;
<span class="preprocessor">#else</span>
<span class="preprocessor"></span>    <span class="keywordflow">if</span> (<a class="code" href="class_o_t_asymmetric_key.html#a4815b347d60fb11927b981d7ce8d192b">IsPasswordCallbackSet</a>())
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(5, <span class="stringliteral">&quot;%s: FYI, the internal &#39;C&#39;-based password callback is now being returning to OT, &quot;</span>
                      <span class="stringliteral">&quot;which is passing it to OpenSSL &quot;</span>
                      <span class="stringliteral">&quot;during a crypto operation. (If OpenSSL invokes it, then we should see other logs after this from when it triggers &quot;</span>
                      <span class="stringliteral">&quot;whatever password-collection dialog is provided at startup by the (probably Java) OTAPI client.)\n&quot;</span>, szFunc);
        <span class="keywordflow">return</span> <a class="code" href="class_o_t_asymmetric_key.html#a17907805777c1a34ef4e7e50fc0c3101">s_pwCallback</a>;
    }
    <span class="keywordflow">else</span>
    {
<span class="comment">//      OTLog::Output(2, &quot;OTAsymmetricKey::GetPasswordCallback: FYI, the internal &#39;C&#39;-based password callback was requested by OT (to pass to OpenSSL), &quot;</span>
<span class="comment">//                    &quot;but the callback hasn&#39;t been set yet. (Returning NULL CALLBACK to OpenSSL!! Thus causing it to instead ask for the passphrase on the CONSOLE, &quot;</span>
<span class="comment">//                    &quot;since no Java password dialog was apparently available.)\n&quot;);</span>
        
        
<span class="comment">//      return static_cast&lt;OT_OPENSSL_CALLBACK *&gt;(NULL);</span>
        
        <span class="comment">// We have our own &quot;console&quot; password-gathering function, which allows us to use our master key.</span>
        <span class="comment">// Since the souped-up cb uses it, I&#39;m just returning that here as a default, for now.</span>
        <a class="code" href="class_o_t_asymmetric_key.html#a43086e379109294710864a8b8ef909a9">OTAsymmetricKey::SetPasswordCallback</a>(&amp;<a class="code" href="_o_t_asymmetric_key_8hpp.html#a79d50d373e469219a3c6d17f9bee6bd1">souped_up_pass_cb</a>);
        <span class="keywordflow">return</span> <a class="code" href="class_o_t_asymmetric_key.html#a17907805777c1a34ef4e7e50fc0c3101">s_pwCallback</a>;
    }
<span class="preprocessor">#endif  </span>
<span class="preprocessor"></span>}
</pre></div>
</div>
</div>
<a class="anchor" id="ad46a79607e180ef1f583710f4135e1f1"></a><!-- doxytag: member="OTAsymmetricKey::GetPasswordCaller" ref="ad46a79607e180ef1f583710f4135e1f1" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_caller.html">OTCaller</a> * <a class="el" href="class_o_t_asymmetric_key.html#ad46a79607e180ef1f583710f4135e1f1">OTAsymmetricKey::GetPasswordCaller</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_asymmetric_key_8cpp_source.html#l01792">1792</a> of file <a class="el" href="_o_t_asymmetric_key_8cpp_source.html">OTAsymmetricKey.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keyword">const</span> <span class="keywordtype">char</span> * szFunc = <span class="stringliteral">&quot;OTAsymmetricKey::GetPasswordCaller&quot;</span>;
    
    <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(4, <span class="stringliteral">&quot;%s: FYI, this was just called by souped_up_pass_cb &quot;</span>
                   <span class="stringliteral">&quot;(which must have just been called by OpenSSL.) &quot;</span>
                   <span class="stringliteral">&quot;Returning s_pCaller == %s (Hopefully NOT NULL, so the &quot;</span>
                   <span class="stringliteral">&quot;custom password dialog can be triggered.)\n&quot;</span>, szFunc,
                   (NULL == <a class="code" href="class_o_t_asymmetric_key.html#a3c3b456ec4fe74255a1c7fe4571c71c7">s_pCaller</a>) ? <span class="stringliteral">&quot;NULL&quot;</span> : <span class="stringliteral">&quot;VALID POINTER&quot;</span>);
    
    <span class="keywordflow">return</span> <a class="code" href="class_o_t_asymmetric_key.html#a3c3b456ec4fe74255a1c7fe4571c71c7">s_pCaller</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a872b0df2c5e7a1d8878e062ccd7e1a6e"></a><!-- doxytag: member="OTAsymmetricKey::GetPrivateKey" ref="a872b0df2c5e7a1d8878e062ccd7e1a6e" args="(OTString &amp;strKey, bool bEscaped=true) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_asymmetric_key.html#a872b0df2c5e7a1d8878e062ccd7e1a6e">OTAsymmetricKey::GetPrivateKey</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strKey</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>bEscaped</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_asymmetric_key_8cpp_source.html#l02303">2303</a> of file <a class="el" href="_o_t_asymmetric_key_8cpp_source.html">OTAsymmetricKey.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> theArmor;
    
    <span class="keywordflow">if</span> (<a class="code" href="class_o_t_asymmetric_key.html#a872b0df2c5e7a1d8878e062ccd7e1a6e">GetPrivateKey</a>(theArmor))
    {
        <span class="keywordflow">if</span> (bEscaped)
        {
            strKey.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;- -----BEGIN ENCRYPTED PRIVATE KEY-----\n&quot;</span>
                               <span class="stringliteral">&quot;%s&quot;</span>
                               <span class="stringliteral">&quot;- -----END ENCRYPTED PRIVATE KEY-----\n&quot;</span>,
                               theArmor.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>()
                               );
        }
        <span class="keywordflow">else</span> 
        {
            strKey.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;-----BEGIN ENCRYPTED PRIVATE KEY-----\n&quot;</span>
                               <span class="stringliteral">&quot;%s&quot;</span>
                               <span class="stringliteral">&quot;-----END ENCRYPTED PRIVATE KEY-----\n&quot;</span>,
                               theArmor.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>()
                               );
        }
        <span class="keywordflow">return</span> <span class="keyword">true</span>;
    }
    <span class="keywordflow">else</span>
        <a class="code" href="class_o_t_log.html#a5acd90ac91c2618f395b0ff37ad4f8ee">OTLog::Error</a>(<span class="stringliteral">&quot;OTAsymmetricKey::GetPrivateKey: Error: GetPrivateKey(armored) returned false. (Returning false.)\n&quot;</span>);
    <span class="comment">// ------------</span>
    
    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aef904c0455862c1474f059b95aed2b37"></a><!-- doxytag: member="OTAsymmetricKey::GetPrivateKey" ref="aef904c0455862c1474f059b95aed2b37" args="(OTASCIIArmor &amp;strKey) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_asymmetric_key.html#a872b0df2c5e7a1d8878e062ccd7e1a6e">OTAsymmetricKey::GetPrivateKey</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> &amp;&#160;</td>
          <td class="paramname"><em>strKey</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_asymmetric_key_8cpp_source.html#l02336">2336</a> of file <a class="el" href="_o_t_asymmetric_key_8cpp_source.html">OTAsymmetricKey.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(<a class="code" href="class_o_t_asymmetric_key.html#a40da82b0005ea3c08531d8aaa3f41b28">IsPrivate</a>());
    <span class="comment">// -------------------------</span>
    ascKey.Release();
    
    <span class="keywordflow">if</span> (NULL == <a class="code" href="class_o_t_asymmetric_key.html#af204791997a2b6549190d14beea8f5b3">m_p_ascKey</a>)
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    
    ascKey.Set(*<a class="code" href="class_o_t_asymmetric_key.html#af204791997a2b6549190d14beea8f5b3">m_p_ascKey</a>);
    
    <span class="keywordflow">return</span> <span class="keyword">true</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab4eee84fb4faf0a374fa10f110853214"></a><!-- doxytag: member="OTAsymmetricKey::GetPublicKey" ref="ab4eee84fb4faf0a374fa10f110853214" args="(OTASCIIArmor &amp;strKey) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_asymmetric_key.html#ab4eee84fb4faf0a374fa10f110853214">OTAsymmetricKey::GetPublicKey</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> &amp;&#160;</td>
          <td class="paramname"><em>strKey</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_asymmetric_key_8cpp_source.html#l02238">2238</a> of file <a class="el" href="_o_t_asymmetric_key_8cpp_source.html">OTAsymmetricKey.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_o_t_assert_8hpp.html#a033b133f48e61f2b227c52ad2be0c882">OT_ASSERT_MSG</a>(<a class="code" href="class_o_t_asymmetric_key.html#a22a32d97edbacc280fcd45a76bd9cd60">IsPublic</a>(), <span class="stringliteral">&quot;OTAsymmetricKey::GetPublicKey: ASSERT: IsPublic()\n&quot;</span>);
    <span class="comment">// -----------------------</span>
    ascKey.Release();
    
    <span class="keywordflow">if</span> (NULL == <a class="code" href="class_o_t_asymmetric_key.html#af204791997a2b6549190d14beea8f5b3">m_p_ascKey</a>)
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    
    ascKey.Set(*<a class="code" href="class_o_t_asymmetric_key.html#af204791997a2b6549190d14beea8f5b3">m_p_ascKey</a>);
    
    <span class="keywordflow">return</span> <span class="keyword">true</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a314d1ca07019c1e3c0ea49e1770db6de"></a><!-- doxytag: member="OTAsymmetricKey::GetPublicKey" ref="a314d1ca07019c1e3c0ea49e1770db6de" args="(OTString &amp;strKey, bool bEscaped=true) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_asymmetric_key.html#ab4eee84fb4faf0a374fa10f110853214">OTAsymmetricKey::GetPublicKey</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strKey</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>bEscaped</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_asymmetric_key_8cpp_source.html#l02198">2198</a> of file <a class="el" href="_o_t_asymmetric_key_8cpp_source.html">OTAsymmetricKey.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> theArmor;
    
    <span class="comment">// TODO: optimization: When optimizing for CPU cycles, and willing to sacrifice a little RAM, we</span>
    <span class="comment">// can save this value the first time it&#39;s computed, and then as long as the armored version (without</span>
    <span class="comment">// bookends) doesn&#39;t change, we can save the computed version and pass it back here, instead of re-generating</span>
    <span class="comment">// it here each time this is called. This implies a need for the armored version to be able to be flagged</span>
    <span class="comment">// as &quot;dirty&quot; when it is changed.</span>
    
    <span class="keywordflow">if</span> (this-&gt;<a class="code" href="class_o_t_asymmetric_key.html#ab4eee84fb4faf0a374fa10f110853214">GetPublicKey</a>(theArmor))
    {
        <span class="keywordflow">if</span> (bEscaped)
        {
            strKey.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;- -----BEGIN PUBLIC KEY-----\n&quot;</span>    <span class="comment">// ESCAPED VERSION</span>
                               <span class="stringliteral">&quot;%s&quot;</span>
                               <span class="stringliteral">&quot;- -----END PUBLIC KEY-----\n&quot;</span>,
                               theArmor.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>()
                               );
        }
        <span class="keywordflow">else</span>
        {
            strKey.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;-----BEGIN PUBLIC KEY-----\n&quot;</span>      <span class="comment">// UN-ESCAPED VERSION</span>
                               <span class="stringliteral">&quot;%s&quot;</span>
                               <span class="stringliteral">&quot;-----END PUBLIC KEY-----\n&quot;</span>,
                               theArmor.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>()
                               );
        }
        <span class="keywordflow">return</span> <span class="keyword">true</span>;
    }
    <span class="keywordflow">else</span>
        <a class="code" href="class_o_t_log.html#a5acd90ac91c2618f395b0ff37ad4f8ee">OTLog::Error</a>(<span class="stringliteral">&quot;OTAsymmetricKey::GetPublicKey: Error: GetPublicKey(armored) returned false. (Returning false.)\n&quot;</span>);
    <span class="comment">// ------------</span>
    
    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="af46fb386cc409488a67df46bcd8b8571"></a><!-- doxytag: member="OTAsymmetricKey::IsEmpty" ref="af46fb386cc409488a67df46bcd8b8571" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_asymmetric_key.html#af46fb386cc409488a67df46bcd8b8571">OTAsymmetricKey::IsEmpty</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_asymmetric_key_8hpp_source.html#l00263">263</a> of file <a class="el" href="_o_t_asymmetric_key_8hpp_source.html">OTAsymmetricKey.hpp</a>.</p>
<div class="fragment"><pre class="fragment">{ <span class="keywordflow">return</span> (NULL == <a class="code" href="class_o_t_asymmetric_key.html#af204791997a2b6549190d14beea8f5b3">m_p_ascKey</a>); } <span class="comment">// m_p_ascKey is the most basic value. m_pKey is derived from it, for example.</span>
</pre></div>
</div>
</div>
<a class="anchor" id="a4815b347d60fb11927b981d7ce8d192b"></a><!-- doxytag: member="OTAsymmetricKey::IsPasswordCallbackSet" ref="a4815b347d60fb11927b981d7ce8d192b" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static bool <a class="el" href="class_o_t_asymmetric_key.html#a4815b347d60fb11927b981d7ce8d192b">OTAsymmetricKey::IsPasswordCallbackSet</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_asymmetric_key_8hpp_source.html#l00213">213</a> of file <a class="el" href="_o_t_asymmetric_key_8hpp_source.html">OTAsymmetricKey.hpp</a>.</p>
<div class="fragment"><pre class="fragment">{ <span class="keywordflow">return</span> (NULL == <a class="code" href="class_o_t_asymmetric_key.html#a17907805777c1a34ef4e7e50fc0c3101">s_pwCallback</a>) ? <span class="keyword">false</span> : <span class="keyword">true</span>; }
</pre></div>
</div>
</div>
<a class="anchor" id="a40da82b0005ea3c08531d8aaa3f41b28"></a><!-- doxytag: member="OTAsymmetricKey::IsPrivate" ref="a40da82b0005ea3c08531d8aaa3f41b28" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_asymmetric_key.html#a40da82b0005ea3c08531d8aaa3f41b28">OTAsymmetricKey::IsPrivate</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_asymmetric_key_8hpp_source.html#l00266">266</a> of file <a class="el" href="_o_t_asymmetric_key_8hpp_source.html">OTAsymmetricKey.hpp</a>.</p>
<div class="fragment"><pre class="fragment">{ <span class="keywordflow">return</span> <a class="code" href="class_o_t_asymmetric_key.html#a20f69009c311b6d071b40a1b977f31fb">m_bIsPrivateKey</a>; }
</pre></div>
</div>
</div>
<a class="anchor" id="a22a32d97edbacc280fcd45a76bd9cd60"></a><!-- doxytag: member="OTAsymmetricKey::IsPublic" ref="a22a32d97edbacc280fcd45a76bd9cd60" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_asymmetric_key.html#a22a32d97edbacc280fcd45a76bd9cd60">OTAsymmetricKey::IsPublic</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_asymmetric_key_8hpp_source.html#l00265">265</a> of file <a class="el" href="_o_t_asymmetric_key_8hpp_source.html">OTAsymmetricKey.hpp</a>.</p>
<div class="fragment"><pre class="fragment">{ <span class="keywordflow">return</span> <a class="code" href="class_o_t_asymmetric_key.html#aba2665c0a98034096001748118a3b265">m_bIsPublicKey</a>;  }
</pre></div>
</div>
</div>
<a class="anchor" id="a4437342fa5841152e2dfa6ee48a69094"></a><!-- doxytag: member="OTAsymmetricKey::KeyFactory" ref="a4437342fa5841152e2dfa6ee48a69094" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_asymmetric_key.html">OTAsymmetricKey</a> * <a class="el" href="class_o_t_asymmetric_key.html#a4437342fa5841152e2dfa6ee48a69094">OTAsymmetricKey::KeyFactory</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_asymmetric_key_8cpp_source.html#l00157">157</a> of file <a class="el" href="_o_t_asymmetric_key_8cpp_source.html">OTAsymmetricKey.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_o_t_asymmetric_key.html">OTAsymmetricKey</a> * pKey = NULL;
<span class="preprocessor">#if defined (OT_CRYPTO_USING_OPENSSL)</span>
<span class="preprocessor"></span>    pKey = <span class="keyword">new</span> OTAsymmetricKey_OpenSSL;    
<span class="preprocessor">#elif defined (OT_CRYPTO_USING_GPG)</span>
<span class="preprocessor"></span><span class="comment">//  pKey = new OTAsymmetricKey_GPG;</span>
    <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Open-Transactions doesn&#39;t support GPG (yet), &quot;</span>
                  <span class="stringliteral">&quot;so it&#39;s impossible to instantiate a key.\n&quot;</span>, __FUNCTION__);
<span class="preprocessor">#else</span>
<span class="preprocessor"></span>    <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Open-Transactions isn&#39;t built with any crypto engine, &quot;</span>
                  <span class="stringliteral">&quot;so it&#39;s impossible to instantiate a key.\n&quot;</span>, __FUNCTION__);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>    <span class="keywordflow">return</span> pKey;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a4c337637abe6e0ec1a1083b4e4712785"></a><!-- doxytag: member="OTAsymmetricKey::LoadPrivateKey" ref="a4c337637abe6e0ec1a1083b4e4712785" args="(const OTString &amp;strFoldername, const OTString &amp;strFilename, const OTString *pstrReason=NULL, OTPassword *pImportPassword=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_asymmetric_key.html#a4c337637abe6e0ec1a1083b4e4712785">OTAsymmetricKey::LoadPrivateKey</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strFoldername</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strFilename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> *&#160;</td>
          <td class="paramname"><em>pstrReason</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_password.html">OTPassword</a> *&#160;</td>
          <td class="paramname"><em>pImportPassword</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_asymmetric_key_8cpp_source.html#l02592">2592</a> of file <a class="el" href="_o_t_asymmetric_key_8cpp_source.html">OTAsymmetricKey.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{    
    <a class="code" href="class_o_t_asymmetric_key.html#ad10673a51a994dcc6d62f5ed51c2217e">Release</a>();

    <a class="code" href="class_o_t_asymmetric_key.html#aba2665c0a98034096001748118a3b265">m_bIsPublicKey</a>  = <span class="keyword">false</span>;
    <a class="code" href="class_o_t_asymmetric_key.html#a20f69009c311b6d071b40a1b977f31fb">m_bIsPrivateKey</a> = <span class="keyword">true</span>;
    
    <span class="keyword">const</span> <span class="keywordtype">char</span> * szFoldername = strFoldername.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();
    <span class="keyword">const</span> <span class="keywordtype">char</span> * szFilename = strFilename.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();
    
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(strFoldername.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>());
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(strFilename.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>());
    <span class="comment">// --------------------------------------------------------------------</span>
    <span class="keywordflow">if</span> (<span class="keyword">false</span> == <a class="code" href="namespace_o_t_d_b.html#a73e39a590dfb64f63065821c6bbcd4c6">OTDB::Exists</a>(szFoldername, szFilename))
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;OTAsymmetricKey::LoadPrivateKey: Unable to find private key file: %s%s%s\n&quot;</span>, 
                       szFoldername, <a class="code" href="class_o_t_log.html#a42d3c91ff84ecae0690e34efb4619a77">OTLog::PathSeparator</a>(), szFilename);
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// --------------------------------------------------------------------</span>
    <span class="comment">// The private key is stored in an encrypted form, which is how it stays until the</span>
    <span class="comment">// password callback is passed into some OpenSSL call that attempts to use it.</span>
    <span class="comment">//</span>
    std::string strFileContents(<a class="code" href="namespace_o_t_d_b.html#a921d6f538de00f4e4297c25cf679f00a">OTDB::QueryPlainString</a>(szFoldername, szFilename)); <span class="comment">// &lt;=== LOADING &quot;AS-IS&quot; FROM DATA STORE.</span>
    
    <span class="keywordflow">if</span> (strFileContents.length() &lt; 2)
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;OTAsymmetricKey::LoadPrivateKey: Error reading file: %s%s%s\n&quot;</span>, 
                      szFoldername, <a class="code" href="class_o_t_log.html#a42d3c91ff84ecae0690e34efb4619a77">OTLog::PathSeparator</a>(), szFilename);
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// --------------------------------------------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strCert(strFileContents), strReason(NULL == pstrReason ? <span class="stringliteral">&quot;OTAsymmetricKey::LoadPrivateKey&quot;</span> : *pstrReason);
    
    <span class="keywordflow">return</span> this-&gt;<a class="code" href="class_o_t_asymmetric_key.html#ad073c7e52b61e491a664a44defc2e9d8">LoadPrivateKeyFromCertString</a>(strCert, <span class="keyword">false</span>, &amp;strReason, pImportPassword);<span class="comment">// bEscaped=false;</span>
    <span class="comment">// &quot;escaped&quot; means pre-pended with &quot;- &quot; as in:   - -----BEGIN CER....</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad073c7e52b61e491a664a44defc2e9d8"></a><!-- doxytag: member="OTAsymmetricKey::LoadPrivateKeyFromCertString" ref="ad073c7e52b61e491a664a44defc2e9d8" args="(const OTString &amp;strCert, bool bEscaped=true, const OTString *pstrReason=NULL, OTPassword *pImportPassword=NULL)=0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual bool <a class="el" href="class_o_t_asymmetric_key.html#ad073c7e52b61e491a664a44defc2e9d8">OTAsymmetricKey::LoadPrivateKeyFromCertString</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strCert</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>bEscaped</em> = <code>true</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> *&#160;</td>
          <td class="paramname"><em>pstrReason</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_password.html">OTPassword</a> *&#160;</td>
          <td class="paramname"><em>pImportPassword</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a5ef7ec49f5bb33874cb3c432ec97796d"></a><!-- doxytag: member="OTAsymmetricKey::LoadPublicKey" ref="a5ef7ec49f5bb33874cb3c432ec97796d" args="(const OTString &amp;strFoldername, const OTString &amp;strFilename)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_asymmetric_key.html#a5ef7ec49f5bb33874cb3c432ec97796d">OTAsymmetricKey::LoadPublicKey</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strFoldername</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strFilename</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_asymmetric_key_8cpp_source.html#l02635">2635</a> of file <a class="el" href="_o_t_asymmetric_key_8cpp_source.html">OTAsymmetricKey.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// Already done in SetPublicKey()</span>
<span class="comment">//  m_bIsPublicKey  = true;</span>
<span class="comment">//  m_bIsPrivateKey = false;</span>

    <a class="code" href="class_o_t_asymmetric_key.html#ad10673a51a994dcc6d62f5ed51c2217e">Release</a>();
    
    <span class="comment">// This doesn&#39;t use assert on the arguments, but theArmor.LoadFromFile DOES.</span>
    <span class="comment">// -----------------------</span>
    <a class="code" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> theArmor;
    
    <span class="keywordflow">if</span> (theArmor.<a class="code" href="class_o_t_a_s_c_i_i_armor.html#aac07d252e1edd8ec73df756db751ea5a">LoadFromFile</a>(strFoldername, strFilename))
    {
        <span class="keywordflow">if</span> (this-&gt;<a class="code" href="class_o_t_asymmetric_key.html#abe1f83bcc64a9f56406c4e145cd65651">SetPublicKey</a>(theArmor))
        {
            <a class="code" href="class_o_t_log.html#a1f7549d776ee919dcb6517f611ded015">OTLog::Output</a>(4, <span class="stringliteral">&quot;Success setting public key from OTASCIIArmor in OTAsymmetricKey::LoadPublicKey.\n&quot;</span>); 
            <span class="keywordflow">return</span> <span class="keyword">true</span>;            
        }
        <span class="keywordflow">else</span>
        {
            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;Unable to convert from OTASCIIArmor to public key in &quot;</span>
                     <span class="stringliteral">&quot;OTAsymmetricKey::LoadPublicKey: %s\n&quot;</span>,
                     strFilename.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>()); 
            <span class="keywordflow">return</span> <span class="keyword">false</span>;           
        }
    }
    <span class="keywordflow">else</span> 
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;Unable to read pubkey file in OTAsymmetricKey::LoadPublicKey: %s\n&quot;</span>, strFilename.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>()); 
        <span class="keywordflow">return</span> <span class="keyword">false</span>; 
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a7edde863933c25a20233acfd7d7f0b03"></a><!-- doxytag: member="OTAsymmetricKey::LoadPublicKeyFromCertFile" ref="a7edde863933c25a20233acfd7d7f0b03" args="(const OTString &amp;strFoldername, const OTString &amp;strFilename, const OTString *pstrReason=NULL, OTPassword *pImportPassword=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_asymmetric_key.html#a7edde863933c25a20233acfd7d7f0b03">OTAsymmetricKey::LoadPublicKeyFromCertFile</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strFoldername</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strFilename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> *&#160;</td>
          <td class="paramname"><em>pstrReason</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_password.html">OTPassword</a> *&#160;</td>
          <td class="paramname"><em>pImportPassword</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_asymmetric_key_8cpp_source.html#l02671">2671</a> of file <a class="el" href="_o_t_asymmetric_key_8cpp_source.html">OTAsymmetricKey.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_o_t_asymmetric_key.html#ad10673a51a994dcc6d62f5ed51c2217e">Release</a>();
    
    <a class="code" href="class_o_t_asymmetric_key.html#aba2665c0a98034096001748118a3b265">m_bIsPublicKey</a>  = <span class="keyword">true</span>;
    <a class="code" href="class_o_t_asymmetric_key.html#a20f69009c311b6d071b40a1b977f31fb">m_bIsPrivateKey</a> = <span class="keyword">false</span>;
    <span class="comment">// ---------------</span>
    <span class="keyword">const</span> <span class="keywordtype">char</span> * szFoldername = strFoldername.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();
    <span class="keyword">const</span> <span class="keywordtype">char</span> * szFilename = strFilename.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();
    
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(strFoldername.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>());
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(strFilename.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>());
    <span class="comment">// --------------------------------------------------------------------</span>
    <span class="keywordflow">if</span> (<span class="keyword">false</span> == <a class="code" href="namespace_o_t_d_b.html#a73e39a590dfb64f63065821c6bbcd4c6">OTDB::Exists</a>(szFoldername, szFilename))
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: File does not exist: %s%s%s\n&quot;</span>, __FUNCTION__,
                      szFoldername, <a class="code" href="class_o_t_log.html#a42d3c91ff84ecae0690e34efb4619a77">OTLog::PathSeparator</a>(), szFilename);
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// --------------------------------------------------------------------</span>
    <span class="comment">//</span>
    std::string strFileContents(<a class="code" href="namespace_o_t_d_b.html#a921d6f538de00f4e4297c25cf679f00a">OTDB::QueryPlainString</a>(szFoldername, szFilename)); <span class="comment">// &lt;=== LOADING FROM DATA STORE.</span>
    
    <span class="keywordflow">if</span> (strFileContents.length() &lt; 2)
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error reading file: %s%s%s\n&quot;</span>, __FUNCTION__,
                      szFoldername, <a class="code" href="class_o_t_log.html#a42d3c91ff84ecae0690e34efb4619a77">OTLog::PathSeparator</a>(), szFilename);
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// --------------------------------------------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strCert(strFileContents);
    
    <span class="keywordflow">return</span> this-&gt;<a class="code" href="class_o_t_asymmetric_key.html#a2a38f9a40d7476120584fe69d9b60f0a">LoadPublicKeyFromCertString</a>(strCert, <span class="keyword">false</span>, pstrReason, pImportPassword); <span class="comment">// bEscaped=false; &quot;escaped&quot; means pre-pended with &quot;- &quot; as in:   - -----BEGIN CER....</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="a2a38f9a40d7476120584fe69d9b60f0a"></a><!-- doxytag: member="OTAsymmetricKey::LoadPublicKeyFromCertString" ref="a2a38f9a40d7476120584fe69d9b60f0a" args="(const OTString &amp;strCert, bool bEscaped=true, const OTString *pstrReason=NULL, OTPassword *pImportPassword=NULL)=0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual bool <a class="el" href="class_o_t_asymmetric_key.html#a2a38f9a40d7476120584fe69d9b60f0a">OTAsymmetricKey::LoadPublicKeyFromCertString</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strCert</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>bEscaped</em> = <code>true</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> *&#160;</td>
          <td class="paramname"><em>pstrReason</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_password.html">OTPassword</a> *&#160;</td>
          <td class="paramname"><em>pImportPassword</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="aef5421ede5b0a55b47ddeddafb22c7e5"></a><!-- doxytag: member="OTAsymmetricKey::LoadPublicKeyFromPGPKey" ref="aef5421ede5b0a55b47ddeddafb22c7e5" args="(const OTASCIIArmor &amp;strKey)=0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual bool <a class="el" href="class_o_t_asymmetric_key.html#aef5421ede5b0a55b47ddeddafb22c7e5">OTAsymmetricKey::LoadPublicKeyFromPGPKey</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> &amp;&#160;</td>
          <td class="paramname"><em>strKey</em></td><td>)</td>
          <td><code> [pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="abd4f82bc0e3d64b8d76b7b29ee7f81e3"></a><!-- doxytag: member="OTAsymmetricKey::operator=" ref="abd4f82bc0e3d64b8d76b7b29ee7f81e3" args="(const OTAsymmetricKey &amp;rhs)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_asymmetric_key.html">OTAsymmetricKey</a> &amp; OTAsymmetricKey::operator= </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_asymmetric_key.html">OTAsymmetricKey</a> &amp;&#160;</td>
          <td class="paramname"><em>rhs</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_asymmetric_key_8cpp_source.html#l02395">2395</a> of file <a class="el" href="_o_t_asymmetric_key_8cpp_source.html">OTAsymmetricKey.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// Already done in SetPublicKey()</span>
<span class="comment">//  m_bIsPublicKey  = true;</span>
<span class="comment">//  m_bIsPrivateKey = false;</span>

    <span class="keywordflow">if</span> ((&amp;rhs != <span class="keyword">this</span>) &amp;&amp; (<span class="keyword">false</span> == rhs.<a class="code" href="class_o_t_asymmetric_key.html#a40da82b0005ea3c08531d8aaa3f41b28">IsPrivate</a>()) &amp;&amp; (rhs.<a class="code" href="class_o_t_asymmetric_key.html#a22a32d97edbacc280fcd45a76bd9cd60">IsPublic</a>()))
    {
        <a class="code" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> ascTransfer;
        
        <span class="comment">// Get the Issuer&#39;s public key in ASCII-armored format</span>
        rhs.<a class="code" href="class_o_t_asymmetric_key.html#ab4eee84fb4faf0a374fa10f110853214">GetPublicKey</a>(ascTransfer);
        
        <span class="comment">// Decodes a public key from ASCII armor into m_keyPublic, which stores it as a EVP_PKEY pointer.</span>
        this-&gt;<a class="code" href="class_o_t_asymmetric_key.html#abe1f83bcc64a9f56406c4e145cd65651">SetPublicKey</a>(ascTransfer);
        
        <span class="comment">// Even if unused, both should always already be instantiated.</span>
        <span class="keywordflow">if</span> ((NULL != this-&gt;<a class="code" href="class_o_t_asymmetric_key.html#a071e09c59ab0b1460debd3c092da0034">m_pMetadata</a>) &amp;&amp; (NULL != rhs.<a class="code" href="class_o_t_asymmetric_key.html#a071e09c59ab0b1460debd3c092da0034">m_pMetadata</a>))
            *(this-&gt;<a class="code" href="class_o_t_asymmetric_key.html#a071e09c59ab0b1460debd3c092da0034">m_pMetadata</a>) = *(rhs.<a class="code" href="class_o_t_asymmetric_key.html#a071e09c59ab0b1460debd3c092da0034">m_pMetadata</a>);
    }
    
    <span class="keywordflow">return</span> *<span class="keyword">this</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a6f81f86ccb457f2e9a40a269d60fc39d"></a><!-- doxytag: member="OTAsymmetricKey::ReEncryptPrivateKey" ref="a6f81f86ccb457f2e9a40a269d60fc39d" args="(OTPassword &amp;theExportPassword, bool bImporting)=0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual bool <a class="el" href="class_o_t_asymmetric_key.html#a6f81f86ccb457f2e9a40a269d60fc39d">OTAsymmetricKey::ReEncryptPrivateKey</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_password.html">OTPassword</a> &amp;&#160;</td>
          <td class="paramname"><em>theExportPassword</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>bImporting</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ad10673a51a994dcc6d62f5ed51c2217e"></a><!-- doxytag: member="OTAsymmetricKey::Release" ref="ad10673a51a994dcc6d62f5ed51c2217e" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_asymmetric_key.html#ad10673a51a994dcc6d62f5ed51c2217e">OTAsymmetricKey::Release</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_asymmetric_key_8cpp_source.html#l02582">2582</a> of file <a class="el" href="_o_t_asymmetric_key_8cpp_source.html">OTAsymmetricKey.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_o_t_asymmetric_key.html#ae67026950c62348bfd51bddaa2c1d216">Release_AsymmetricKey</a>();  <span class="comment">// My own cleanup is done here.</span>
    
    <span class="comment">// Next give the base class a chance to do the same...</span>
<span class="comment">//  ot_super::Release(); // THERE IS NO base class in this case. But normally this would be here for most classes.</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae67026950c62348bfd51bddaa2c1d216"></a><!-- doxytag: member="OTAsymmetricKey::Release_AsymmetricKey" ref="ae67026950c62348bfd51bddaa2c1d216" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_asymmetric_key.html#ae67026950c62348bfd51bddaa2c1d216">OTAsymmetricKey::Release_AsymmetricKey</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_asymmetric_key_8cpp_source.html#l02510">2510</a> of file <a class="el" href="_o_t_asymmetric_key_8cpp_source.html">OTAsymmetricKey.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// -------------------------</span>
    <span class="comment">// Release the ascii-armored version of the key (safe to store in this form.)</span>
    <span class="comment">//</span>
    <span class="comment">// Moving this to the destructor. Shouldn&#39;t be going NULL here IMO.</span>
<span class="comment">//    if (NULL != m_p_ascKey)</span>
<span class="comment">//        delete m_p_ascKey;</span>
<span class="comment">//    m_p_ascKey = NULL;</span>
    <span class="comment">// -------------------------</span>
    <span class="comment">// Release the instantiated OpenSSL key (unsafe to store in this form.)</span>
    <span class="comment">//</span>
    <a class="code" href="class_o_t_asymmetric_key.html#a3e4194e3050b8b60c047b983b6ada849">ReleaseKeyLowLevel</a>();
    <span class="comment">// -------------------------</span>
<span class="comment">//  m_bIsPrivateKey = false;  // Every time this Releases, I don&#39;t want to lose what kind of key it was. (Once we know, we know.)</span>
    <span class="comment">// -------------------------    </span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="a27ea981228472cd93db81a4e96a76c43"></a><!-- doxytag: member="OTAsymmetricKey::ReleaseKey" ref="a27ea981228472cd93db81a4e96a76c43" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_asymmetric_key.html#a27ea981228472cd93db81a4e96a76c43">OTAsymmetricKey::ReleaseKey</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_asymmetric_key_8cpp_source.html#l02541">2541</a> of file <a class="el" href="_o_t_asymmetric_key_8cpp_source.html">OTAsymmetricKey.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// Todo: someday put a timer inside this class, so it doesn&#39;t REALLY release the</span>
    <span class="comment">// key until the Timer has expired. </span>
    <span class="comment">// NOTE: marking this as &quot;todo&quot; because I won&#39;t necessarily want it done this way. This</span>
    <span class="comment">// solution would keep the actual private key loaded in OpenSSL, meaning I&#39;d have to take</span>
    <span class="comment">// over the OpenSSL memory management to make it into a safe solution (though I probably</span>
    <span class="comment">// have to do that anyway.)</span>
    <span class="comment">// A better solution might be to have a random session key used for protecting a hashed</span>
    <span class="comment">// version of the passphrase, and then ALWAYS destroying the key as fast as possible, </span>
    <span class="comment">// instead using the hashed passphrase within the bounds of a timer, with the hashed passphrase</span>
    <span class="comment">// being decrypted JUST before use and then destroyed, just as the private key is destroyed.</span>
    <span class="comment">// I might also wish such a thing was stored not just in OT protected memory, but in a standard</span>
    <span class="comment">// *API* for protected memory, such as ssh-agent or the Mac Keychain. However, that can easily </span>
    <span class="comment">// be just an option to be added later, meaning I can go ahead and code my hashed password solution</span>
    <span class="comment">// in the meantime. But will that be coded here at the OTAsymmetricKey level? Or at the Nym level,</span>
    <span class="comment">// or at the static Nym level, or the app level? Hmm...</span>
    <span class="comment">//</span>
    <span class="comment">// Security:</span>
    <span class="comment">// UPDATE: Since the above solution is coming at some point anyway, I&#39;m going ahead and adding a </span>
    <span class="comment">// Timer version that works at this level (OTAsymmetricKey.)  The reason is because it will be quick</span>
    <span class="comment">// and easy, and will give me the functionality I need for now, until I code all the stuff above.</span>
    <span class="comment">// Just keep in mind: This is good enough for now, but it WILL result in the private key staying</span>
    <span class="comment">// loaded in memory until the timer runs out, meaning if an attacker has access to the RAM on the</span>
    <span class="comment">// local machine, if I haven&#39;t replaced the OpenSSL memory management, then that is a security issue.</span>
    <span class="comment">//</span>
    <span class="comment">// TODO (remove theTimer entirely. OTCachedKey replaces already.)</span>
    <span class="comment">// I set this timer because the above required a password. But now that master key is working,</span>
    <span class="comment">// the above would flow through even WITHOUT the user typing his passphrase (since master key still</span>
    <span class="comment">// not timed out.) Resulting in THIS timer being reset!  Todo: I already shortened this timer to 30</span>
    <span class="comment">// seconds, but need to phase it down to 0 and then remove it entirely! Master key takes over now!</span>
    <span class="comment">//</span>
    <span class="comment">// -------------------------    </span>
<span class="comment">//  if (m_timer.getElapsedTimeInSec() &gt; OT_KEY_TIMER)</span>
        <a class="code" href="class_o_t_asymmetric_key.html#a3e4194e3050b8b60c047b983b6ada849">ReleaseKeyLowLevel</a>();
    
    <span class="comment">// Programmatic user (developer) may call ReleaseKey, but then we don&#39;t actually release it until it&#39;s</span>
    <span class="comment">// been at least X minutes.</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="a3e4194e3050b8b60c047b983b6ada849"></a><!-- doxytag: member="OTAsymmetricKey::ReleaseKeyLowLevel" ref="a3e4194e3050b8b60c047b983b6ada849" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_asymmetric_key.html#a3e4194e3050b8b60c047b983b6ada849">OTAsymmetricKey::ReleaseKeyLowLevel</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_asymmetric_key_8cpp_source.html#l02529">2529</a> of file <a class="el" href="_o_t_asymmetric_key_8cpp_source.html">OTAsymmetricKey.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_o_t_asymmetric_key.html#afc7e52e8c350454feec26cbed072ba3e">ReleaseKeyLowLevel_Hook</a>();
    <span class="comment">// -------------------------</span>
    <a class="code" href="class_o_t_asymmetric_key.html#a182ca35576244f8506497dc781429631">m_timer</a>.<a class="code" href="class_timer.html#a6a69c5013bf0718850825e647619f62d">clear</a>();
    <span class="comment">// -------------------------</span>
<span class="comment">//  m_bIsPrivateKey = false;  // Every time this Releases, I don&#39;t want to lose what kind of key it was. (Once we know, we know.)</span>
    <span class="comment">// -------------------------</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="afc7e52e8c350454feec26cbed072ba3e"></a><!-- doxytag: member="OTAsymmetricKey::ReleaseKeyLowLevel_Hook" ref="afc7e52e8c350454feec26cbed072ba3e" args="()=0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void <a class="el" href="class_o_t_asymmetric_key.html#afc7e52e8c350454feec26cbed072ba3e">OTAsymmetricKey::ReleaseKeyLowLevel_Hook</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a7090b3da6224e9657809c033c1680b4b"></a><!-- doxytag: member="OTAsymmetricKey::SaveCertToString" ref="a7090b3da6224e9657809c033c1680b4b" args="(OTString &amp;strOutput, const OTString *pstrReason=NULL, OTPassword *pImportPassword=NULL)=0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual bool <a class="el" href="class_o_t_asymmetric_key.html#a7090b3da6224e9657809c033c1680b4b">OTAsymmetricKey::SaveCertToString</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strOutput</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> *&#160;</td>
          <td class="paramname"><em>pstrReason</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_password.html">OTPassword</a> *&#160;</td>
          <td class="paramname"><em>pImportPassword</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a0793ec27c04def4b0e8b2976a07aad1a"></a><!-- doxytag: member="OTAsymmetricKey::SavePrivateKeyToString" ref="a0793ec27c04def4b0e8b2976a07aad1a" args="(OTString &amp;strOutput, const OTString *pstrReason=NULL, OTPassword *pImportPassword=NULL)=0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual bool <a class="el" href="class_o_t_asymmetric_key.html#a0793ec27c04def4b0e8b2976a07aad1a">OTAsymmetricKey::SavePrivateKeyToString</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strOutput</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> *&#160;</td>
          <td class="paramname"><em>pstrReason</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_password.html">OTPassword</a> *&#160;</td>
          <td class="paramname"><em>pImportPassword</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a3c839a010c728ad5dc99dc6eb9176e99"></a><!-- doxytag: member="OTAsymmetricKey::SetAsPrivate" ref="a3c839a010c728ad5dc99dc6eb9176e99" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_asymmetric_key.html#a3c839a010c728ad5dc99dc6eb9176e99">OTAsymmetricKey::SetAsPrivate</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_asymmetric_key_8hpp_source.html#l00269">269</a> of file <a class="el" href="_o_t_asymmetric_key_8hpp_source.html">OTAsymmetricKey.hpp</a>.</p>
<div class="fragment"><pre class="fragment">{ <a class="code" href="class_o_t_asymmetric_key.html#aba2665c0a98034096001748118a3b265">m_bIsPublicKey</a> = <span class="keyword">false</span>; <a class="code" href="class_o_t_asymmetric_key.html#a20f69009c311b6d071b40a1b977f31fb">m_bIsPrivateKey</a> = <span class="keyword">true</span>;  } <span class="comment">// (Only if you really know what you are doing.)</span>
</pre></div>
</div>
</div>
<a class="anchor" id="a839879275f1b65d57be967deea663251"></a><!-- doxytag: member="OTAsymmetricKey::SetAsPublic" ref="a839879275f1b65d57be967deea663251" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_asymmetric_key.html#a839879275f1b65d57be967deea663251">OTAsymmetricKey::SetAsPublic</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_asymmetric_key_8hpp_source.html#l00268">268</a> of file <a class="el" href="_o_t_asymmetric_key_8hpp_source.html">OTAsymmetricKey.hpp</a>.</p>
<div class="fragment"><pre class="fragment">{ <a class="code" href="class_o_t_asymmetric_key.html#aba2665c0a98034096001748118a3b265">m_bIsPublicKey</a> = <span class="keyword">true</span>;  <a class="code" href="class_o_t_asymmetric_key.html#a20f69009c311b6d071b40a1b977f31fb">m_bIsPrivateKey</a> = <span class="keyword">false</span>; } <span class="comment">// Don&#39;t use this, normally it&#39;s not necessary.</span>
</pre></div>
</div>
</div>
<a class="anchor" id="a43086e379109294710864a8b8ef909a9"></a><!-- doxytag: member="OTAsymmetricKey::SetPasswordCallback" ref="a43086e379109294710864a8b8ef909a9" args="(OT_OPENSSL_CALLBACK *pCallback)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_asymmetric_key.html#a43086e379109294710864a8b8ef909a9">OTAsymmetricKey::SetPasswordCallback</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_o_t_low_level_key_data_8hpp.html#a8feb89a83902654f856b22a62538e8a1">OT_OPENSSL_CALLBACK</a> *&#160;</td>
          <td class="paramname"><em>pCallback</em></td><td>)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_asymmetric_key_8cpp_source.html#l01692">1692</a> of file <a class="el" href="_o_t_asymmetric_key_8cpp_source.html">OTAsymmetricKey.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keyword">const</span> <span class="keywordtype">char</span> * szFunc = <span class="stringliteral">&quot;OTAsymmetricKey::SetPasswordCallback&quot;</span>;
    
    <span class="keywordflow">if</span> (NULL != <a class="code" href="class_o_t_asymmetric_key.html#a17907805777c1a34ef4e7e50fc0c3101">s_pwCallback</a>)
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: WARNING: re-setting the password callback (one was already there)...\n&quot;</span>, szFunc);
    <span class="keywordflow">else</span>
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(1, <span class="stringliteral">&quot;%s: FYI, setting the password callback to a non-NULL pointer (which is what we want.)\n&quot;</span>,
                       szFunc);
    <span class="comment">// -----------------------------------</span>
    <span class="keywordflow">if</span> (NULL == pCallback)
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: WARNING, setting the password callback to NULL! (OpenSSL will thus &quot;</span>
                      <span class="stringliteral">&quot;be forced to ask for the passphase on the console, until this is called &quot;</span>
                      <span class="stringliteral">&quot;again and set properly.)\n&quot;</span>, szFunc);
    <span class="comment">// -----------------------------------</span>
    <a class="code" href="class_o_t_asymmetric_key.html#a17907805777c1a34ef4e7e50fc0c3101">s_pwCallback</a> = pCallback; <span class="comment">// no need to delete function pointer that came before this function pointer.</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="a2bb4ed26696a979c6eb8031ebe080043"></a><!-- doxytag: member="OTAsymmetricKey::SetPasswordCaller" ref="a2bb4ed26696a979c6eb8031ebe080043" args="(OTCaller &amp;theCaller)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_asymmetric_key.html#a2bb4ed26696a979c6eb8031ebe080043">OTAsymmetricKey::SetPasswordCaller</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_caller.html">OTCaller</a> &amp;&#160;</td>
          <td class="paramname"><em>theCaller</em></td><td>)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_asymmetric_key_8cpp_source.html#l01755">1755</a> of file <a class="el" href="_o_t_asymmetric_key_8cpp_source.html">OTAsymmetricKey.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keyword">const</span> <span class="keywordtype">char</span> * szFunc = <span class="stringliteral">&quot;OTAsymmetricKey::SetPasswordCaller&quot;</span>;
    
    <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(3, <span class="stringliteral">&quot;%s: Attempting to set the password caller... &quot;</span>
                  <span class="stringliteral">&quot;(the Java code has passed us its custom password dialog object for later use if/when the &quot;</span>
                  <span class="stringliteral">&quot;OT &#39;C&#39;-based password callback is triggered by openssl.)\n&quot;</span>, szFunc);
    
    <span class="keywordflow">if</span> (!theCaller.<a class="code" href="class_o_t_caller.html#ae34c07a407bc871505945585f1f9fbbe">isCallbackSet</a>())
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: ERROR: OTCaller::setCallback() &quot;</span>
                     <span class="stringliteral">&quot;MUST be called first, with an OTCallback-extended object passed to it,\n&quot;</span>
                     <span class="stringliteral">&quot;BEFORE calling this function with that OTCaller. (Returning false.)\n&quot;</span>, szFunc);
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    
    <span class="keywordflow">if</span> (NULL != <a class="code" href="class_o_t_asymmetric_key.html#a3c3b456ec4fe74255a1c7fe4571c71c7">s_pCaller</a>)
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: WARNING: Setting the password caller again, even though &quot;</span>
                     <span class="stringliteral">&quot;it was apparently ALREADY set... (Meaning Java has probably erroneously called this twice, &quot;</span>
                     <span class="stringliteral">&quot;possibly passing the same OTCaller both times.)\n&quot;</span>, szFunc);
<span class="comment">//      delete s_pCaller; // Let Java delete it.</span>
    }
    
    <a class="code" href="class_o_t_asymmetric_key.html#a3c3b456ec4fe74255a1c7fe4571c71c7">s_pCaller</a> = &amp;theCaller;
    <span class="comment">// ---------------------------</span>
    
    <a class="code" href="class_o_t_asymmetric_key.html#a43086e379109294710864a8b8ef909a9">OTAsymmetricKey::SetPasswordCallback</a>(&amp;<a class="code" href="_o_t_asymmetric_key_8hpp.html#a79d50d373e469219a3c6d17f9bee6bd1">souped_up_pass_cb</a>);
    
    <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(1, <span class="stringliteral">&quot;%s: FYI, Successfully set the password caller object from &quot;</span>
                  <span class="stringliteral">&quot;Java, and set the souped_up_pass_cb in C for OpenSSL (which triggers &quot;</span>
                   <span class="stringliteral">&quot;that Java object when the time is right.) Returning true.\n&quot;</span>, szFunc);

    <span class="keywordflow">return</span> <span class="keyword">true</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab22e31cf5871684effc6191a2827bdd7"></a><!-- doxytag: member="OTAsymmetricKey::SetPrivateKey" ref="ab22e31cf5871684effc6191a2827bdd7" args="(const OTString &amp;strKey, bool bEscaped=false)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_asymmetric_key.html#ab22e31cf5871684effc6191a2827bdd7">OTAsymmetricKey::SetPrivateKey</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strKey</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>bEscaped</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_asymmetric_key_8cpp_source.html#l02354">2354</a> of file <a class="el" href="_o_t_asymmetric_key_8cpp_source.html">OTAsymmetricKey.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_o_t_asymmetric_key.html#aba2665c0a98034096001748118a3b265">m_bIsPublicKey</a>  = <span class="keyword">false</span>;
    <a class="code" href="class_o_t_asymmetric_key.html#a20f69009c311b6d071b40a1b977f31fb">m_bIsPrivateKey</a> = <span class="keyword">true</span>;
        
    <span class="comment">// This reads the string into the Armor and removes the bookends. (----- BEGIN ...)</span>
    <span class="comment">//</span>
    <a class="code" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> theArmor;
    <span class="keyword">const</span> <span class="keywordtype">char</span> * szPrivateKeyStarts = <span class="stringliteral">&quot;-----BEGIN ENCRYPTED PRIVATE KEY-----&quot;</span>;  
    <span class="keywordflow">if</span> (theArmor.<a class="code" href="class_o_t_a_s_c_i_i_armor.html#a6b5c0069db88e2c884d213ea64d3bbe4">LoadFromString</a>(const_cast&lt;OTString &amp;&gt;(strKey), bEscaped,
                                szPrivateKeyStarts)) <span class="comment">// This last param causes OTASCIIArmor to only &quot;start loading&quot; when it reaches the private key.</span>
    {
        <span class="keywordflow">return</span> this-&gt;<a class="code" href="class_o_t_asymmetric_key.html#ab22e31cf5871684effc6191a2827bdd7">SetPrivateKey</a>(theArmor);
    }

    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a07ad066e8ecf70e0ae6116fbaf60a1e6"></a><!-- doxytag: member="OTAsymmetricKey::SetPrivateKey" ref="a07ad066e8ecf70e0ae6116fbaf60a1e6" args="(const OTASCIIArmor &amp;strKey)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_asymmetric_key.html#ab22e31cf5871684effc6191a2827bdd7">OTAsymmetricKey::SetPrivateKey</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> &amp;&#160;</td>
          <td class="paramname"><em>strKey</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_asymmetric_key_8cpp_source.html#l02375">2375</a> of file <a class="el" href="_o_t_asymmetric_key_8cpp_source.html">OTAsymmetricKey.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{   
    <a class="code" href="class_o_t_asymmetric_key.html#a3e4194e3050b8b60c047b983b6ada849">ReleaseKeyLowLevel</a>();
    <span class="comment">// ----------------------</span>
    <a class="code" href="class_o_t_asymmetric_key.html#aba2665c0a98034096001748118a3b265">m_bIsPublicKey</a>  = <span class="keyword">false</span>;
    <a class="code" href="class_o_t_asymmetric_key.html#a20f69009c311b6d071b40a1b977f31fb">m_bIsPrivateKey</a> = <span class="keyword">true</span>;     <span class="comment">// PRIVATE KEY</span>
    <span class="comment">// ----------------------    </span>
    <span class="keywordflow">if</span> (NULL == <a class="code" href="class_o_t_asymmetric_key.html#af204791997a2b6549190d14beea8f5b3">m_p_ascKey</a>)
    {
        <a class="code" href="class_o_t_asymmetric_key.html#af204791997a2b6549190d14beea8f5b3">m_p_ascKey</a> = <span class="keyword">new</span> <a class="code" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a>;
        <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != <a class="code" href="class_o_t_asymmetric_key.html#af204791997a2b6549190d14beea8f5b3">m_p_ascKey</a>);
    }
    <span class="comment">// ----------------------</span>
    <a class="code" href="class_o_t_asymmetric_key.html#af204791997a2b6549190d14beea8f5b3">m_p_ascKey</a>-&gt;<a class="code" href="class_o_t_string.html#aa5db620fe8e60c849585d741975db991">Set</a>(ascKey);
    <span class="comment">// ----------------------</span>
    <span class="keywordflow">return</span> <span class="keyword">true</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="abe1f83bcc64a9f56406c4e145cd65651"></a><!-- doxytag: member="OTAsymmetricKey::SetPublicKey" ref="abe1f83bcc64a9f56406c4e145cd65651" args="(const OTASCIIArmor &amp;strKey)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_asymmetric_key.html#abe1f83bcc64a9f56406c4e145cd65651">OTAsymmetricKey::SetPublicKey</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> &amp;&#160;</td>
          <td class="paramname"><em>strKey</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_asymmetric_key_8cpp_source.html#l02281">2281</a> of file <a class="el" href="_o_t_asymmetric_key_8cpp_source.html">OTAsymmetricKey.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{   
    <a class="code" href="class_o_t_asymmetric_key.html#a3e4194e3050b8b60c047b983b6ada849">ReleaseKeyLowLevel</a>(); <span class="comment">// In case the key is already loaded, we release it here. (Since it&#39;s being replaced, it&#39;s now the wrong key anyway.)</span>
    <span class="comment">// ----------------------</span>
    <a class="code" href="class_o_t_asymmetric_key.html#aba2665c0a98034096001748118a3b265">m_bIsPublicKey</a>  = <span class="keyword">true</span>;
    <a class="code" href="class_o_t_asymmetric_key.html#a20f69009c311b6d071b40a1b977f31fb">m_bIsPrivateKey</a> = <span class="keyword">false</span>;
    <span class="comment">// ----------------------    </span>
    <span class="keywordflow">if</span> (NULL == <a class="code" href="class_o_t_asymmetric_key.html#af204791997a2b6549190d14beea8f5b3">m_p_ascKey</a>)
    {
        <a class="code" href="class_o_t_asymmetric_key.html#af204791997a2b6549190d14beea8f5b3">m_p_ascKey</a> = <span class="keyword">new</span> <a class="code" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a>;
        <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != <a class="code" href="class_o_t_asymmetric_key.html#af204791997a2b6549190d14beea8f5b3">m_p_ascKey</a>);
    }
    <span class="comment">// ----------------------</span>
    <a class="code" href="class_o_t_asymmetric_key.html#af204791997a2b6549190d14beea8f5b3">m_p_ascKey</a>-&gt;<a class="code" href="class_o_t_string.html#aa5db620fe8e60c849585d741975db991">Set</a>(ascKey);
    <span class="comment">// ----------------------</span>
    <span class="keywordflow">return</span> <span class="keyword">true</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="af60481c34a7b82115c0a5a4a39d5bb1f"></a><!-- doxytag: member="OTAsymmetricKey::SetPublicKey" ref="af60481c34a7b82115c0a5a4a39d5bb1f" args="(const OTString &amp;strKey, bool bEscaped=false)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_asymmetric_key.html#abe1f83bcc64a9f56406c4e145cd65651">OTAsymmetricKey::SetPublicKey</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strKey</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>bEscaped</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_asymmetric_key_8cpp_source.html#l02258">2258</a> of file <a class="el" href="_o_t_asymmetric_key_8cpp_source.html">OTAsymmetricKey.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_o_t_asymmetric_key.html#aba2665c0a98034096001748118a3b265">m_bIsPublicKey</a>  = <span class="keyword">true</span>;
    <a class="code" href="class_o_t_asymmetric_key.html#a20f69009c311b6d071b40a1b977f31fb">m_bIsPrivateKey</a> = <span class="keyword">false</span>;

    <span class="comment">// This reads the string into the Armor and removes the bookends. (----- BEGIN ...)</span>
    <a class="code" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> theArmor;
    
    <span class="keywordflow">if</span> (theArmor.<a class="code" href="class_o_t_a_s_c_i_i_armor.html#a6b5c0069db88e2c884d213ea64d3bbe4">LoadFromString</a>(const_cast&lt;OTString &amp;&gt;(strKey), bEscaped))
    {
        <span class="keywordflow">return</span> this-&gt;<a class="code" href="class_o_t_asymmetric_key.html#abe1f83bcc64a9f56406c4e145cd65651">SetPublicKey</a>(theArmor);
    }
    <span class="keywordflow">else</span>
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;OTAsymmetricKey::SetPublicKey: Error: failed loading ascii-armored contents from bookended string:\n\n%s\n\n&quot;</span>,
                      strKey.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
    <span class="comment">// --------------------</span>
    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="a20f69009c311b6d071b40a1b977f31fb"></a><!-- doxytag: member="OTAsymmetricKey::m_bIsPrivateKey" ref="a20f69009c311b6d071b40a1b977f31fb" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_asymmetric_key.html#a20f69009c311b6d071b40a1b977f31fb">OTAsymmetricKey::m_bIsPrivateKey</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_asymmetric_key_8hpp_source.html#l00224">224</a> of file <a class="el" href="_o_t_asymmetric_key_8hpp_source.html">OTAsymmetricKey.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="aba2665c0a98034096001748118a3b265"></a><!-- doxytag: member="OTAsymmetricKey::m_bIsPublicKey" ref="aba2665c0a98034096001748118a3b265" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_asymmetric_key.html#aba2665c0a98034096001748118a3b265">OTAsymmetricKey::m_bIsPublicKey</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_asymmetric_key_8hpp_source.html#l00223">223</a> of file <a class="el" href="_o_t_asymmetric_key_8hpp_source.html">OTAsymmetricKey.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="af204791997a2b6549190d14beea8f5b3"></a><!-- doxytag: member="OTAsymmetricKey::m_p_ascKey" ref="af204791997a2b6549190d14beea8f5b3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a>* <a class="el" href="class_o_t_asymmetric_key.html#af204791997a2b6549190d14beea8f5b3">OTAsymmetricKey::m_p_ascKey</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_asymmetric_key_8hpp_source.html#l00221">221</a> of file <a class="el" href="_o_t_asymmetric_key_8hpp_source.html">OTAsymmetricKey.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a071e09c59ab0b1460debd3c092da0034"></a><!-- doxytag: member="OTAsymmetricKey::m_pMetadata" ref="a071e09c59ab0b1460debd3c092da0034" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_signature_metadata.html">OTSignatureMetadata</a>* <a class="el" href="class_o_t_asymmetric_key.html#a071e09c59ab0b1460debd3c092da0034">OTAsymmetricKey::m_pMetadata</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_asymmetric_key_8hpp_source.html#l00228">228</a> of file <a class="el" href="_o_t_asymmetric_key_8hpp_source.html">OTAsymmetricKey.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a182ca35576244f8506497dc781429631"></a><!-- doxytag: member="OTAsymmetricKey::m_timer" ref="a182ca35576244f8506497dc781429631" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_timer.html">Timer</a> <a class="el" href="class_o_t_asymmetric_key.html#a182ca35576244f8506497dc781429631">OTAsymmetricKey::m_timer</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_asymmetric_key_8hpp_source.html#l00226">226</a> of file <a class="el" href="_o_t_asymmetric_key_8hpp_source.html">OTAsymmetricKey.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a3c3b456ec4fe74255a1c7fe4571c71c7"></a><!-- doxytag: member="OTAsymmetricKey::s_pCaller" ref="a3c3b456ec4fe74255a1c7fe4571c71c7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_caller.html">OTCaller</a> * <a class="el" href="class_o_t_asymmetric_key.html#a3c3b456ec4fe74255a1c7fe4571c71c7">OTAsymmetricKey::s_pCaller</a> = NULL<code> [static, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_asymmetric_key_8hpp_source.html#l00218">218</a> of file <a class="el" href="_o_t_asymmetric_key_8hpp_source.html">OTAsymmetricKey.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a17907805777c1a34ef4e7e50fc0c3101"></a><!-- doxytag: member="OTAsymmetricKey::s_pwCallback" ref="a17907805777c1a34ef4e7e50fc0c3101" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_o_t_low_level_key_data_8hpp.html#a8feb89a83902654f856b22a62538e8a1">OT_OPENSSL_CALLBACK</a> * <a class="el" href="class_o_t_asymmetric_key.html#a17907805777c1a34ef4e7e50fc0c3101">OTAsymmetricKey::s_pwCallback</a> = NULL<code> [static, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_asymmetric_key_8hpp_source.html#l00217">217</a> of file <a class="el" href="_o_t_asymmetric_key_8hpp_source.html">OTAsymmetricKey.hpp</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>include/otlib/<a class="el" href="_o_t_asymmetric_key_8hpp_source.html">OTAsymmetricKey.hpp</a></li>
<li>src/otlib/<a class="el" href="_o_t_asymmetric_key_8cpp_source.html">OTAsymmetricKey.cpp</a></li>
</ul>
</div><!-- contents -->
</div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="class_o_t_asymmetric_key.html">OTAsymmetricKey</a>      </li>

    <li class="footer">Generated on Wed May 21 2014 11:26:11 for Open-Transactions by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.6.1 </li>
   </ul>
 </div>


</body>
</html>
