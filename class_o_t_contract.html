<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Open-Transactions: OTContract Class Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Open-Transactions
   &#160;<span id="projectnumber">master/1066fb4910a63ee3f7de8e0807fee3eb663b66c7</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('class_o_t_contract.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="#friends">Friends</a>  </div>
  <div class="headertitle">
<div class="title">OTContract Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<!-- doxytag: class="OTContract" -->
<p><code>#include &lt;<a class="el" href="_o_t_contract_8hpp_source.html">OTContract.hpp</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for OTContract:</div>
<div class="dyncontent">
 <div class="center">
  <img src="class_o_t_contract.png" usemap="#OTContract_map" alt=""/>
  <map id="OTContract_map" name="OTContract_map">
<area href="class_o_t_asset_contract.html" alt="OTAssetContract" shape="rect" coords="133,56,256,80"/>
<area href="class_o_t_basket.html" alt="OTBasket" shape="rect" coords="133,112,256,136"/>
<area href="class_o_t_cron.html" alt="OTCron" shape="rect" coords="133,168,256,192"/>
<area href="class_o_t_market.html" alt="OTMarket" shape="rect" coords="133,224,256,248"/>
<area href="class_o_t_message.html" alt="OTMessage" shape="rect" coords="133,280,256,304"/>
<area href="class_o_t_mint.html" alt="OTMint" shape="rect" coords="133,336,256,360"/>
<area href="class_o_t_payment.html" alt="OTPayment" shape="rect" coords="133,392,256,416"/>
<area href="class_o_t_purse.html" alt="OTPurse" shape="rect" coords="133,448,256,472"/>
<area href="class_o_t_scriptable.html" alt="OTScriptable" shape="rect" coords="133,504,256,528"/>
<area href="class_o_t_server_contract.html" alt="OTServerContract" shape="rect" coords="133,560,256,584"/>
<area href="class_o_t_signed_file.html" alt="OTSignedFile" shape="rect" coords="133,616,256,640"/>
<area href="class_o_t_subcredential.html" alt="OTSubcredential" shape="rect" coords="133,672,256,696"/>
<area href="class_o_t_transaction_type.html" alt="OTTransactionType" shape="rect" coords="133,728,256,752"/>
</map>
 </div></div>

<p><a href="class_o_t_contract-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_contract.html#ada17f9ebb2ffb868fa475b9cbbabae24">GetHashType</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_contract.html#a18b55003e207dff89912f7c895af45f6">SetIdentifier</a> (const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;theID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_contract.html#aafd1cfb541fe8f7ae09398e46c25ce52">OTContract</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_contract.html#a7c537ce56191b537d367224bc774ff6b">OTContract</a> (const <a class="el" href="class_o_t_string.html">OTString</a> &amp;name, const <a class="el" href="class_o_t_string.html">OTString</a> &amp;foldername, const <a class="el" href="class_o_t_string.html">OTString</a> &amp;filename, const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_contract.html#a2d73ac72ac4716a388d14996826dbfa7">OTContract</a> (const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_contract.html#a03c3e95f90dceaf443ab06f7e897d632">OTContract</a> (const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;theID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_contract.html#a0dbeed2ca8cded6350ba341d83104d27">Initialize</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_contract.html#ade32d377fd8de7ffad5c602dded0c507">~OTContract</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_contract.html#a15e423ca0d650858a23e54f8285feae1">Release</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_contract.html#a8946a25657b79aa496ee99580a490778">Release_Contract</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_contract.html#aae54340526fbd8eb8a18de27a4b97c83">ReleaseSignatures</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_contract.html#aefeed014e39aa6dc843d090e03769b5d">CreateContract</a> (<a class="el" href="class_o_t_string.html">OTString</a> &amp;strContract, <a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;theSigner)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_contract.html#a765d885635d69d3ea1fe994fbd200862">InsertNym</a> (const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strKeyName, const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strKeyValue)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_contract.html#a1afca402333b7c546104d5aa48c8efd9">GetName</a> (<a class="el" href="class_o_t_string.html">OTString</a> &amp;strName) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_contract.html#ae6ad4eed689a88335c8818d7762bbbcb">SetName</a> (const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strName)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_contract.html#aa707f03da51449ef0cd1a466cbc0f13c">VerifyContract</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_contract.html#acf77d2db6da3904aa8b03e7b87c02e4e">GetIdentifier</a> (<a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;theIdentifier)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_contract.html#ab8f081b7b796eb077e966fa9bfa64498">GetIdentifier</a> (<a class="el" href="class_o_t_string.html">OTString</a> &amp;theIdentifier)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_contract.html#ac43b764316bac9a4c5b983c0a5a73b43">GetFilename</a> (<a class="el" href="class_o_t_string.html">OTString</a> &amp;strFilename)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_contract.html#a223df6b13ddc3ba3323c0d7f910177a9">GetFoldername</a> (<a class="el" href="class_o_t_string.html">OTString</a> &amp;strFoldername)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_contract.html#a1432a5e924d021a9dc39320d3b8e7b90">LoadContract</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_contract.html#addf9cb2a1de6e7feb6c177e6c22b8976">LoadContract</a> (const char *szFoldername, const char *szFilename)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_contract.html#a36300e34dcd94ed7006d98b392d46815">LoadContractFromString</a> (const <a class="el" href="class_o_t_string.html">OTString</a> &amp;theStr)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_contract.html#a53e298b9d8d6363cb354a0cf360d1114">LoadContractRawFile</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_contract.html#a89edae048b064a50a255fbfe4f7dcef5">ParseRawFile</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_contract.html#a85e9cf12ccfb1bd307acc10ec6c2bd4f">SaveToContractFolder</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_contract.html#a5fd00cded794a6f96ba80d8d4081d591">SaveContractRaw</a> (<a class="el" href="class_o_t_string.html">OTString</a> &amp;strOutput) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_contract.html#a5725498be318ed6845ee72a0c921fda6">RewriteContract</a> (<a class="el" href="class_o_t_string.html">OTString</a> &amp;strOutput) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_contract.html#a363ae430d4fd9256ab8364dbafb95444">SaveContract</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_contract.html#a185ae3318508aa9c03e2398a9f1a86a7">SaveContract</a> (const char *szFoldername, const char *szFilename)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_contract.html#a78c28164555e2eb79d6b67698421638d">UpdateContents</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_contract.html#a9122572914af91ea44bdc5665d01a97f">CreateContents</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_contract.html#ad0f7ded743c344381dc6553badf7d23d">CreateInnerContents</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_contract.html#a1f63d4185ddc5c9c3ca78ec3f9c7947a">SaveContents</a> (std::ofstream &amp;ofs) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_contract.html#af16a41ce18a9e3408fc5c9ee18315a30">SaveContractWallet</a> (std::ofstream &amp;ofs)=0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_contract.html#a3a96fe4485355ac3c9a3863fc283f33e">SaveContractWallet</a> (<a class="el" href="class_o_t_string.html">OTString</a> &amp;strContents) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_contract.html#ae2082c4f9dea1ffa54023c31c37b00f7">DisplayStatistics</a> (<a class="el" href="class_o_t_string.html">OTString</a> &amp;strContents) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_contract.html#aadb1c868da0ab793751d4c26608a320f">SaveContents</a> (<a class="el" href="class_o_t_string.html">OTString</a> &amp;strContents) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_contract.html#abd60037fe655ee8cae9a3ece5d1e2ea6">SignContract</a> (const <a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;theNym, <a class="el" href="class_o_t_password_data.html">OTPasswordData</a> *pPWData=NULL)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_contract.html#aae9a0891b14ee2e864a27669c4083075">SignContractAuthent</a> (const <a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;theNym, <a class="el" href="class_o_t_password_data.html">OTPasswordData</a> *pPWData=NULL)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_contract.html#a6809f5b245c2ba7fdd757abd7a6e6133">SignWithKey</a> (const <a class="el" href="class_o_t_asymmetric_key.html">OTAsymmetricKey</a> &amp;theKey, <a class="el" href="class_o_t_password_data.html">OTPasswordData</a> *pPWData=NULL)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_contract.html#a756d93899816c752c69f66ee49d389a9">SignContract</a> (const <a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;theNym, <a class="el" href="class_o_t_signature.html">OTSignature</a> &amp;theSignature, <a class="el" href="class_o_t_password_data.html">OTPasswordData</a> *pPWData=NULL)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_contract.html#ace6d1ba6b5d9a651bae7e7f0b57f73a3">SignContractAuthent</a> (const <a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;theNym, <a class="el" href="class_o_t_signature.html">OTSignature</a> &amp;theSignature, <a class="el" href="class_o_t_password_data.html">OTPasswordData</a> *pPWData=NULL)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_contract.html#ac0aaf0524d63f5c0e66b9f72de717f0f">SignContract</a> (const <a class="el" href="class_o_t_asymmetric_key.html">OTAsymmetricKey</a> &amp;theKey, <a class="el" href="class_o_t_signature.html">OTSignature</a> &amp;theSignature, const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strHashType, <a class="el" href="class_o_t_password_data.html">OTPasswordData</a> *pPWData=NULL)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_contract.html#a34d1572bc7b0d54d37b58e40ed3dfa35">SignContract</a> (const char *szFoldername, const char *szFilename, <a class="el" href="class_o_t_signature.html">OTSignature</a> &amp;theSignature, <a class="el" href="class_o_t_password_data.html">OTPasswordData</a> *pPWData=NULL)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_contract.html#a8570f185efbb89e0c8fd8d0d0fb8fc3e">VerifyContractID</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_contract.html#a705597c0b741d3d120624b0388f73508">CalculateContractID</a> (<a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;newID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_contract.html#a38f51d593b6dfc8a75d1c5a535965392">VerifySignature</a> (const <a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;theNym, <a class="el" href="class_o_t_password_data.html">OTPasswordData</a> *pPWData=NULL)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_contract.html#a9201c0469d8d705b484c054d45780e34">VerifySigAuthent</a> (const <a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;theNym, <a class="el" href="class_o_t_password_data.html">OTPasswordData</a> *pPWData=NULL)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_contract.html#ab80fbfabc9dca35310f63bce3840387e">VerifyWithKey</a> (const <a class="el" href="class_o_t_asymmetric_key.html">OTAsymmetricKey</a> &amp;theKey, <a class="el" href="class_o_t_password_data.html">OTPasswordData</a> *pPWData=NULL)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_contract.html#a50e50fd96ab5de02726f41cd4144d57a">VerifySignature</a> (const <a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;theNym, const <a class="el" href="class_o_t_signature.html">OTSignature</a> &amp;theSignature, <a class="el" href="class_o_t_password_data.html">OTPasswordData</a> *pPWData=NULL) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_contract.html#a7957d626d83d2d97990d3a5479717d41">VerifySigAuthent</a> (const <a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;theNym, const <a class="el" href="class_o_t_signature.html">OTSignature</a> &amp;theSignature, <a class="el" href="class_o_t_password_data.html">OTPasswordData</a> *pPWData=NULL) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_contract.html#a3870ba03593b483f84dbc966566bdb01">VerifySignature</a> (const <a class="el" href="class_o_t_asymmetric_key.html">OTAsymmetricKey</a> &amp;theKey, const <a class="el" href="class_o_t_signature.html">OTSignature</a> &amp;theSignature, const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strHashType, <a class="el" href="class_o_t_password_data.html">OTPasswordData</a> *pPWData=NULL) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_contract.html#a7630b501f6180ce30c48d049e725eb9a">VerifySignature</a> (const char *szFoldername, const char *szFilename, const <a class="el" href="class_o_t_signature.html">OTSignature</a> &amp;theSignature, <a class="el" href="class_o_t_password_data.html">OTPasswordData</a> *pPWData=NULL) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const <a class="el" href="class_o_t_asymmetric_key.html">OTAsymmetricKey</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_contract.html#abd75a35cdfc8287a59281305175598e7">GetContractPublicKey</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT const <a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_contract.html#affb6a11ee52ad13fd6e1e1ef6e4bbdc1">GetContractPublicNym</a> ()</td></tr>
<tr><td colspan="2"><h2><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_contract.html#a00d55a1901fa72acbbe9271b7c984d37">DearmorAndTrim</a> (const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strInput, <a class="el" href="class_o_t_string.html">OTString</a> &amp;strOutput, <a class="el" href="class_o_t_string.html">OTString</a> &amp;strFirstLine)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_contract.html#a3e26797f2abea1407bc4779b4e2da03b">AddBookendsAroundContent</a> (<a class="el" href="class_o_t_string.html">OTString</a> &amp;strOutput, const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strContents, const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strContractType, const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strHashType, const <a class="el" href="_o_t_signature_8hpp.html#ad3ca272b3bd48f2d487b2d3668c4bae2">listOfSignatures</a> &amp;listSignatures)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_contract.html#a72ffe11fdcf2f6e3566afa9061241f30">LoadEncodedTextField</a> (<a class="el" href="namespaceirr_1_1io.html#a1628edbb9d5d53f18c82d2a92b0ad27e">irr::io::IrrXMLReader</a> *&amp;xml, <a class="el" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> &amp;ascOutput)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_contract.html#a590551829c5056e740a3e24bb2989bb8">LoadEncodedTextField</a> (<a class="el" href="namespaceirr_1_1io.html#a1628edbb9d5d53f18c82d2a92b0ad27e">irr::io::IrrXMLReader</a> *&amp;xml, <a class="el" href="class_o_t_string.html">OTString</a> &amp;strOutput)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_contract.html#ac374831c4a1fad9d016d39d640a285ac">LoadEncodedTextFieldByName</a> (<a class="el" href="namespaceirr_1_1io.html#a1628edbb9d5d53f18c82d2a92b0ad27e">irr::io::IrrXMLReader</a> *&amp;xml, <a class="el" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> &amp;ascOutput, const char *&amp;szName, <a class="el" href="_o_t_string_8hpp.html#a7ec7839682b097a5c5b5c5125046c82b">mapOfStrings</a> *pmapExtraVars=NULL)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_contract.html#ae5ec9fc643b92564a6c53b0f6cc76371">LoadEncodedTextFieldByName</a> (<a class="el" href="namespaceirr_1_1io.html#a1628edbb9d5d53f18c82d2a92b0ad27e">irr::io::IrrXMLReader</a> *&amp;xml, <a class="el" href="class_o_t_string.html">OTString</a> &amp;strOutput, const char *&amp;szName, <a class="el" href="_o_t_string_8hpp.html#a7ec7839682b097a5c5b5c5125046c82b">mapOfStrings</a> *pmapExtraVars=NULL)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_contract.html#a6d67d87a183391e60f4aca8a3856fdb2">SkipToElement</a> (<a class="el" href="namespaceirr_1_1io.html#a1628edbb9d5d53f18c82d2a92b0ad27e">irr::io::IrrXMLReader</a> *&amp;xml)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_contract.html#a219a1ee572cecb9b6510c9869d8c4a64">SkipToTextField</a> (<a class="el" href="namespaceirr_1_1io.html#a1628edbb9d5d53f18c82d2a92b0ad27e">irr::io::IrrXMLReader</a> *&amp;xml)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_contract.html#a77ea430a1b66e3eceed36b773a40cb5f">SkipAfterLoadingField</a> (<a class="el" href="namespaceirr_1_1io.html#a1628edbb9d5d53f18c82d2a92b0ad27e">irr::io::IrrXMLReader</a> *&amp;xml)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_contract.html#a00af7c67155cdb461866f6e705fde011">SignFlatText</a> (<a class="el" href="class_o_t_string.html">OTString</a> &amp;strFlatText, const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strContractType, <a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;theSigner, <a class="el" href="class_o_t_string.html">OTString</a> &amp;strOutput)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static EXPORT <a class="el" href="class_o_t_contract.html">OTContract</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_contract.html#a3a4b4d7e43a53027a5e170557b9e7e12">InstantiateContract</a> (<a class="el" href="class_o_t_string.html">OTString</a> strInput)</td></tr>
<tr><td colspan="2"><h2><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_contract.html#a1d4ec7ef97d0239f6816637aa555504c">LoadContractXML</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_contract.html#a48611c37c8e8e7d9125238bda2b77978">ProcessXMLNode</a> (<a class="el" href="namespaceirr_1_1io.html#a1628edbb9d5d53f18c82d2a92b0ad27e">irr::io::IrrXMLReader</a> *&amp;xml)</td></tr>
<tr><td colspan="2"><h2><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_o_t_string.html">OTString</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_contract.html#af86a3a124ae977b30bfd3f5cd14d1f9f">m_strName</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_o_t_string.html">OTString</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_contract.html#ab1e11693a38a1673037b1f29c9d84010">m_strFoldername</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_o_t_string.html">OTString</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_contract.html#ab7ab1f1fe7ff7e52f2c126404a8f4f92">m_strFilename</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_o_t_identifier.html">OTIdentifier</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_contract.html#ac975866d3511c41d935d2ec44c24c4cb">m_ID</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_o_t_string_x_m_l.html">OTStringXML</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_contract.html#a087fc09cfa4b2fd9076088360a5e5039">m_xmlUnsigned</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_o_t_string.html">OTString</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_contract.html#a90c53743214bc0f0025ad63c3ace7bf2">m_strRawFile</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_o_t_string.html">OTString</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_contract.html#adccde050f729b2d24e3c392592868c90">m_strSigHashType</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_o_t_string.html">OTString</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_contract.html#ac523dac7d72b72e54b1ebb5b3a3b21cc">m_strContractType</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="_o_t_agent_8hpp.html#ac89892658f6bc83e354078647b704e8f">mapOfNyms</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_contract.html#adaef99b0687646a298d599a3d324a356">m_mapNyms</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="_o_t_signature_8hpp.html#ad3ca272b3bd48f2d487b2d3668c4bae2">listOfSignatures</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_contract.html#ae2a61cbef0e8827af6795280e4682b85">m_listSignatures</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_o_t_string.html">OTString</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_contract.html#aa0d889e0e1670b56fedca245041a5ed3">m_strVersion</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_o_t_string.html">OTString</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_contract.html#a2daed7bf314bceeb5773493b5717c0dd">m_strEntityShortName</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_o_t_string.html">OTString</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_contract.html#a0c2d1fa6f921902b84babbb702fc3a12">m_strEntityLongName</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_o_t_string.html">OTString</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_contract.html#ab9c40bb65fb640c072fe4728ee6ad48d">m_strEntityEmail</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="_o_t_string_8hpp.html#a7ec7839682b097a5c5b5c5125046c82b">mapOfStrings</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_contract.html#aa482844cba05a92d69eb0739d5deb862">m_mapConditions</a></td></tr>
<tr><td colspan="2"><h2><a name="friends"></a>
Friends</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_contract.html#ae30ec9237eff8224f54468df8341bcc4">OTPayload</a></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock">
<p>Definition at line <a class="el" href="_o_t_contract_8hpp_source.html#l00149">149</a> of file <a class="el" href="_o_t_contract_8hpp_source.html">OTContract.hpp</a>.</p>
</div><hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="aafd1cfb541fe8f7ae09398e46c25ce52"></a><!-- doxytag: member="OTContract::OTContract" ref="aafd1cfb541fe8f7ae09398e46c25ce52" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_contract.html#aafd1cfb541fe8f7ae09398e46c25ce52">OTContract::OTContract</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_contract_8cpp_source.html#l00332">332</a> of file <a class="el" href="_o_t_contract_8cpp_source.html">OTContract.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_o_t_contract.html#a0dbeed2ca8cded6350ba341d83104d27">Initialize</a>();
}
</pre></div>
</div>
</div>
<a class="anchor" id="a7c537ce56191b537d367224bc774ff6b"></a><!-- doxytag: member="OTContract::OTContract" ref="a7c537ce56191b537d367224bc774ff6b" args="(const OTString &amp;name, const OTString &amp;foldername, const OTString &amp;filename, const OTString &amp;strID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_contract.html#aafd1cfb541fe8f7ae09398e46c25ce52">OTContract::OTContract</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>foldername</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strID</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_contract_8cpp_source.html#l00338">338</a> of file <a class="el" href="_o_t_contract_8cpp_source.html">OTContract.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_o_t_contract.html#a0dbeed2ca8cded6350ba341d83104d27">Initialize</a>();

    <a class="code" href="class_o_t_contract.html#af86a3a124ae977b30bfd3f5cd14d1f9f">m_strName</a>           = name;
    <a class="code" href="class_o_t_contract.html#ab1e11693a38a1673037b1f29c9d84010">m_strFoldername</a>     = foldername;
    <a class="code" href="class_o_t_contract.html#ab7ab1f1fe7ff7e52f2c126404a8f4f92">m_strFilename</a>       = filename;

    <a class="code" href="class_o_t_contract.html#ac975866d3511c41d935d2ec44c24c4cb">m_ID</a>.<a class="code" href="class_o_t_identifier.html#ae29aa1245d3831a207aabc9b8a493bfc">SetString</a>(strID);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a2d73ac72ac4716a388d14996826dbfa7"></a><!-- doxytag: member="OTContract::OTContract" ref="a2d73ac72ac4716a388d14996826dbfa7" args="(const OTString &amp;strID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_contract.html#aafd1cfb541fe8f7ae09398e46c25ce52">OTContract::OTContract</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strID</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_contract_8cpp_source.html#l00350">350</a> of file <a class="el" href="_o_t_contract_8cpp_source.html">OTContract.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_o_t_contract.html#a0dbeed2ca8cded6350ba341d83104d27">Initialize</a>();

    <a class="code" href="class_o_t_contract.html#ac975866d3511c41d935d2ec44c24c4cb">m_ID</a>.<a class="code" href="class_o_t_identifier.html#ae29aa1245d3831a207aabc9b8a493bfc">SetString</a>(strID);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a03c3e95f90dceaf443ab06f7e897d632"></a><!-- doxytag: member="OTContract::OTContract" ref="a03c3e95f90dceaf443ab06f7e897d632" args="(const OTIdentifier &amp;theID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_contract.html#aafd1cfb541fe8f7ae09398e46c25ce52">OTContract::OTContract</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;&#160;</td>
          <td class="paramname"><em>theID</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_contract_8cpp_source.html#l00358">358</a> of file <a class="el" href="_o_t_contract_8cpp_source.html">OTContract.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_o_t_contract.html#a0dbeed2ca8cded6350ba341d83104d27">Initialize</a>();

    <a class="code" href="class_o_t_contract.html#ac975866d3511c41d935d2ec44c24c4cb">m_ID</a> = theID;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ade32d377fd8de7ffad5c602dded0c507"></a><!-- doxytag: member="OTContract::~OTContract" ref="ade32d377fd8de7ffad5c602dded0c507" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_contract.html#ade32d377fd8de7ffad5c602dded0c507">OTContract::~OTContract</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_contract_8cpp_source.html#l00418">418</a> of file <a class="el" href="_o_t_contract_8cpp_source.html">OTContract.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{

    <a class="code" href="class_o_t_contract.html#a8946a25657b79aa496ee99580a490778">Release_Contract</a>();
}
</pre></div>
</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a3e26797f2abea1407bc4779b4e2da03b"></a><!-- doxytag: member="OTContract::AddBookendsAroundContent" ref="a3e26797f2abea1407bc4779b4e2da03b" args="(OTString &amp;strOutput, const OTString &amp;strContents, const OTString &amp;strContractType, const OTString &amp;strHashType, const listOfSignatures &amp;listSignatures)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_contract.html#a3e26797f2abea1407bc4779b4e2da03b">OTContract::AddBookendsAroundContent</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strOutput</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strContents</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strContractType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strHashType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="_o_t_signature_8hpp.html#ad3ca272b3bd48f2d487b2d3668c4bae2">listOfSignatures</a> &amp;&#160;</td>
          <td class="paramname"><em>listSignatures</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_contract_8cpp_source.html#l01264">1264</a> of file <a class="el" href="_o_t_contract_8cpp_source.html">OTContract.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_o_t_string.html">OTString</a> strTemp;
    <span class="comment">// ---------------------------------------------------------------</span>
    strTemp.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;-----BEGIN SIGNED %s-----\nHash: %s\n\n&quot;</span>,
                        strContractType.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(), strHashType.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
    <span class="comment">// ---------------------------------------------------------------</span>
    strTemp.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;%s&quot;</span>, strContents.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
    <span class="comment">// ---------------------------------------------------------------</span>
    <a class="code" href="_o_t_storage_8hpp.html#a804eb881e96b7e1846d130a55a94f716">FOR_EACH_CONST</a>(<a class="code" href="_o_t_signature_8hpp.html#ad3ca272b3bd48f2d487b2d3668c4bae2">listOfSignatures</a>, listSignatures)
    {
        <a class="code" href="class_o_t_signature.html">OTSignature</a> * pSig = *it;
        <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pSig);
        <span class="comment">// ---------------------------------------------</span>
        strTemp.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;-----BEGIN %s SIGNATURE-----\n&quot;</span>
                            <span class="stringliteral">&quot;Version: Open Transactions %s\n&quot;</span>
                            <span class="stringliteral">&quot;Comment: http://github.com/FellowTraveler/Open-Transactions/wiki\n&quot;</span>,
                            strContractType.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(), <a class="code" href="class_o_t_log.html#a3d4addadb76f6dec42a806cbc634ee0f">OTLog::Version</a>());
        <span class="comment">// ---------------------------------------------</span>
        <span class="keywordflow">if</span> (pSig-&gt;<a class="code" href="class_o_t_signature.html#ab82c216636edf6583efa7e5344b3c6e0">m_metadata</a>.<a class="code" href="class_o_t_signature_metadata.html#a026c60514737f48d1dd2a0643d1d431f">HasMetadata</a>())
            strTemp.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;Meta:    %c%c%c%c\n&quot;</span>,
                                pSig-&gt;<a class="code" href="class_o_t_signature.html#ab82c216636edf6583efa7e5344b3c6e0">m_metadata</a>.<a class="code" href="class_o_t_signature_metadata.html#a5192cdf8df6943cd27bb82cab59c0368">GetKeyType</a>(),
                                pSig-&gt;<a class="code" href="class_o_t_signature.html#ab82c216636edf6583efa7e5344b3c6e0">m_metadata</a>.<a class="code" href="class_o_t_signature_metadata.html#a70bb395c8ffbddcfd99cf9a6bac59ea8">FirstCharNymID</a>(),
                                pSig-&gt;<a class="code" href="class_o_t_signature.html#ab82c216636edf6583efa7e5344b3c6e0">m_metadata</a>.<a class="code" href="class_o_t_signature_metadata.html#af2f2f4b46b47f3c9ee7ec6b9a94f4117">FirstCharMasterCredID</a>(),
                                pSig-&gt;<a class="code" href="class_o_t_signature.html#ab82c216636edf6583efa7e5344b3c6e0">m_metadata</a>.<a class="code" href="class_o_t_signature_metadata.html#ad4f36081d12914ae8a462cee0e46b828">FirstCharSubCredID</a>());
        <span class="comment">// ---------------------------------------------</span>
        strTemp.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;\n%s&quot;</span>, pSig-&gt;<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>()); <span class="comment">// &lt;=== *** THE SIGNATURE ITSELF ***</span>
        strTemp.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;-----END %s SIGNATURE-----\n\n&quot;</span>, strContractType.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
    }
    <span class="comment">// ---------------------------------------------------------------</span>
    std::string str_Trim(strTemp.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
    std::string str_Trim2 = <a class="code" href="class_o_t_string.html#afe7626d0687eab81200a1af1539faed9">OTString::trim</a>(str_Trim);
    strOutput.<a class="code" href="class_o_t_string.html#aa5db620fe8e60c849585d741975db991">Set</a>(str_Trim2.c_str());
    <span class="comment">// ---------------------------------------------------------------</span>
    <span class="keywordflow">return</span> <span class="keyword">true</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a705597c0b741d3d120624b0388f73508"></a><!-- doxytag: member="OTContract::CalculateContractID" ref="a705597c0b741d3d120624b0388f73508" args="(OTIdentifier &amp;newID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_contract.html#a705597c0b741d3d120624b0388f73508">OTContract::CalculateContractID</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;&#160;</td>
          <td class="paramname"><em>newID</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reimplemented in <a class="el" href="class_o_t_scriptable.html#ac1c6d838f350141b461420004bb8834b">OTScriptable</a>, <a class="el" href="class_o_t_subcredential.html#ae7e05ab952f17d8ea98fee83475eb28c">OTSubcredential</a>, and <a class="el" href="class_o_t_basket.html#a5a3f5c035ad58df511c6829675186a1c">OTBasket</a>.</p>

<p>Definition at line <a class="el" href="_o_t_contract_8cpp_source.html#l00500">500</a> of file <a class="el" href="_o_t_contract_8cpp_source.html">OTContract.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// may be redundant...</span>
    std::string str_Trim(<a class="code" href="class_o_t_contract.html#a90c53743214bc0f0025ad63c3ace7bf2">m_strRawFile</a>.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
    std::string str_Trim2 = <a class="code" href="class_o_t_string.html#afe7626d0687eab81200a1af1539faed9">OTString::trim</a>(str_Trim);

    <a class="code" href="class_o_t_string.html">OTString</a> strTemp(str_Trim2.c_str());

    <span class="keywordflow">if</span> (!newID.<a class="code" href="class_o_t_identifier.html#ac50b356cf5d5d04c08eaf568d07bcc46">CalculateDigest</a>(strTemp))
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error calculating Contract digest.\n&quot;</span>, __FUNCTION__);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a9122572914af91ea44bdc5665d01a97f"></a><!-- doxytag: member="OTContract::CreateContents" ref="a9122572914af91ea44bdc5665d01a97f" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_contract.html#a9122572914af91ea44bdc5665d01a97f">OTContract::CreateContents</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reimplemented in <a class="el" href="class_o_t_asset_contract.html#a1ae12d4d4d97c8d73c7cc7708f30687f">OTAssetContract</a>, and <a class="el" href="class_o_t_server_contract.html#a89a622d971e92c6f6f569a19247c9d02">OTServerContract</a>.</p>

<p>Definition at line <a class="el" href="_o_t_contract_8cpp_source.html#l02425">2425</a> of file <a class="el" href="_o_t_contract_8cpp_source.html">OTContract.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_o_t_assert_8hpp.html#aa86aeed4e57eecded96d5955b5cc23c5">OT_FAIL_MSG</a>(<span class="stringliteral">&quot;ASSERT: OTContract::CreateContents should never be called, but should be overrided. (In this case, it wasn&#39;t.)&quot;</span>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="aefeed014e39aa6dc843d090e03769b5d"></a><!-- doxytag: member="OTContract::CreateContract" ref="aefeed014e39aa6dc843d090e03769b5d" args="(OTString &amp;strContract, OTPseudonym &amp;theSigner)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_contract.html#aefeed014e39aa6dc843d090e03769b5d">OTContract::CreateContract</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strContract</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;&#160;</td>
          <td class="paramname"><em>theSigner</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_contract_8cpp_source.html#l02135">2135</a> of file <a class="el" href="_o_t_contract_8cpp_source.html">OTContract.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_o_t_contract.html#a15e423ca0d650858a23e54f8285feae1">Release</a>();

    <span class="keywordtype">char</span> cNewline = 0; <span class="comment">// this is about to contain a byte read from the end of the contract.</span>
    <span class="keyword">const</span> uint32_t lLength = strContract.<a class="code" href="class_o_t_string.html#a640392dd17a786dab643dbfc7e5a8672">GetLength</a>();

    <span class="keywordflow">if</span> ((3 &gt; lLength) || !strContract.<a class="code" href="class_o_t_string.html#a0b183402da9a9ea6da94b3fcaa8740e8">At</a>(lLength - 1, cNewline))
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Invalid input: contract is less than 3 bytes &quot;</span>
                      <span class="stringliteral">&quot;int64_t, or unable to read a byte from the end where a newline is meant to be.\n&quot;</span>, __FUNCTION__);
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// ----------------------</span>
    <span class="comment">// ADD a newline, if necessary.</span>
    <span class="comment">// (The -----BEGIN part needs to start on its OWN LINE...)</span>
    <span class="comment">//</span>
    <span class="comment">// If length is 10, then string goes from 0..9.</span>
    <span class="comment">// Null terminator will be at 10.</span>
    <span class="comment">// Therefore the final newline should be at 9.</span>
    <span class="comment">// Therefore if char_at_index[lLength-1] != &#39;\n&#39;</span>
    <span class="comment">// Concatenate one!</span>

    <span class="keywordflow">if</span> (<span class="charliteral">&#39;\n&#39;</span> == cNewline) <span class="comment">// It already has a newline</span>
        <a class="code" href="class_o_t_contract.html#a087fc09cfa4b2fd9076088360a5e5039">m_xmlUnsigned</a> = strContract;
    <span class="keywordflow">else</span>
        <a class="code" href="class_o_t_contract.html#a087fc09cfa4b2fd9076088360a5e5039">m_xmlUnsigned</a>.<a class="code" href="class_o_t_string.html#af1c861f21033a1d583b3cb12f952422e">Format</a>(<span class="stringliteral">&quot;%s\n&quot;</span>, strContract.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());

    <span class="comment">// ----------------------</span>
    <span class="comment">// This function assumes that m_xmlUnsigned is ready to be processed.</span>
    <span class="comment">// This function only processes that portion of the contract.</span>
    <span class="comment">//</span>
    <span class="keywordtype">bool</span> bLoaded = this-&gt;<a class="code" href="class_o_t_contract.html#a1d4ec7ef97d0239f6816637aa555504c">LoadContractXML</a>();

    <span class="keywordflow">if</span> (bLoaded)
    {
        <span class="comment">// -----------------------------------</span>
        <span class="comment">// Add theSigner to the contract, if he&#39;s not already there.</span>
        <span class="comment">//</span>
        <span class="keywordflow">if</span> (NULL == this-&gt;<a class="code" href="class_o_t_contract.html#affb6a11ee52ad13fd6e1e1ef6e4bbdc1">GetContractPublicNym</a>())
        {
            <span class="keyword">const</span> <span class="keywordtype">bool</span> bHasCredentials = (theSigner.<a class="code" href="class_o_t_pseudonym.html#a6ae670b44bc6728da06141c885e6c7e9">GetMasterCredentialCount</a>() &gt; 0);
            <span class="comment">// -------------------------------------------------------------</span>
            <span class="keywordflow">if</span> (!bHasCredentials)
            {
                <a class="code" href="class_o_t_string.html">OTString</a> strPubkey;
                <span class="keywordflow">if</span> (theSigner.<a class="code" href="class_o_t_pseudonym.html#aa60e86ffafcfba7c68801530c12c9927">GetPublicSignKey</a>().<a class="code" href="class_o_t_asymmetric_key.html#ab4eee84fb4faf0a374fa10f110853214">GetPublicKey</a>(strPubkey) &amp;&amp; <span class="comment">//bEscaped=true by default.</span>
                    strPubkey.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>())
                {
                    this-&gt;<a class="code" href="class_o_t_contract.html#a765d885635d69d3ea1fe994fbd200862">InsertNym</a>(<span class="stringliteral">&quot;contract&quot;</span>, strPubkey);
                }
            }
            <span class="comment">// -------------------------------------------------------------</span>
            <span class="keywordflow">else</span> <span class="comment">// theSigner has Credentials, so we&#39;ll add him to the contract.</span>
            {
                <a class="code" href="class_o_t_string.html">OTString</a>     strCredList, strSignerNymID;
                <a class="code" href="_o_t_string_8hpp.html#a7ec7839682b097a5c5b5c5125046c82b">mapOfStrings</a> mapCredFiles;
                theSigner.<a class="code" href="class_o_t_pseudonym.html#a1775c7aedd0dd25b2faf3f78dcccabe7">GetIdentifier</a>(strSignerNymID);
                theSigner.<a class="code" href="class_o_t_pseudonym.html#a356d33b203d025ec66a43e23c63c55ed">GetPublicCredentials</a>(strCredList, &amp;mapCredFiles);
                <span class="comment">// ----------------------------------------</span>
                <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pNym = <span class="keyword">new</span> <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a>;
                <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pNym);
                <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTPseudonym&gt;</a> theNymAngel(pNym); <span class="comment">// pNym will be automatically cleaned up.</span>
                <span class="comment">// ----------------------------------------</span>
                pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#a4b5f98378bb2ff1c48c5410f7283aff6">SetIdentifier</a> (strSignerNymID);
                pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#acad61b197881c4ebffdf8ea01145c8d1">SetNymIDSource</a>(theSigner.<a class="code" href="class_o_t_pseudonym.html#ab76ac495443316ded275e7bb281388d2">GetNymIDSource</a>());
                pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#a4cf79a66d25d8ea88b852afcd5e95284">SetAltLocation</a>(theSigner.<a class="code" href="class_o_t_pseudonym.html#ab8bd7424e1b95220cfe66372295664ff">GetAltLocation</a>());
                <span class="comment">// ----------------------------------------</span>
                <span class="keywordflow">if</span> (<span class="keyword">false</span> == pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#a7992e8fbf785eeb2d5158cdf966c7a1b">LoadFromString</a>(strCredList, &amp;mapCredFiles))
                {
                    <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Failure loading nym %s &quot;</span>
                                  <span class="stringliteral">&quot;from credential string.\n&quot;</span>,
                                  __FUNCTION__, strSignerNymID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
                }
                <span class="comment">// Now that the Nym has been loaded up from the two strings,</span>
                <span class="comment">// including the list of credential IDs, and the map containing the</span>
                <span class="comment">// credentials themselves, let&#39;s try to Verify the pseudonym. If we</span>
                <span class="comment">// verify, then we&#39;re safe to add the Nym to the contract.</span>
                <span class="comment">//</span>
                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">false</span> == pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#aae8a707c7799efb6944d485be31a7c3e">VerifyPseudonym</a>())
                {
                    <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Loaded nym %s &quot;</span>
                                  <span class="stringliteral">&quot;from credentials, but then it failed verifying.\n&quot;</span>,
                                  __FUNCTION__, strSignerNymID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
                }
                <span class="keywordflow">else</span><span class="comment">// Okay, we loaded the Nym up from the credentials, AND</span>
                {   <span class="comment">// verified the Nym (including the credentials.)</span>
                    <span class="comment">// So let&#39;s add it to the contract...</span>
                    <span class="comment">//</span>
                    <span class="comment">// -------------------------------------------------------------</span>
                    theNymAngel.SetCleanupTargetPointer(NULL); <span class="comment">// so pNym won&#39;t be cleaned up.</span>
                    <a class="code" href="class_o_t_contract.html#adaef99b0687646a298d599a3d324a356">m_mapNyms</a>[<span class="stringliteral">&quot;signer&quot;</span>] = pNym; <span class="comment">// Add pNym to the contract&#39;s internal list of nyms.</span>
                }
            }
        }
        <span class="comment">// -------------------------------------------------------------</span>
        <span class="comment">// This re-writes the contract internally based on its data members,</span>
        <span class="comment">// similar to UpdateContents. (Except specifically intended for the</span>
        <span class="comment">// initial creation of the contract.)</span>
        <span class="comment">// Since theSigner was just added, he will be included here now as well,</span>
        <span class="comment">// just prior to the actual signing below.</span>
        <span class="comment">//</span>
        this-&gt;<a class="code" href="class_o_t_contract.html#a9122572914af91ea44bdc5665d01a97f">CreateContents</a>();
        <span class="comment">// -----------------------------------</span>
        <a class="code" href="class_o_t_password_data.html">OTPasswordData</a> thePWData(<span class="stringliteral">&quot;OTContract::CreateContract needs the private key to sign the contract...&quot;</span>);
        <span class="comment">// -----------------------------------</span>
        <span class="keywordflow">if</span> (<span class="keyword">false</span> == this-&gt;<a class="code" href="class_o_t_contract.html#abd60037fe655ee8cae9a3ece5d1e2ea6">SignContract</a>(theSigner, &amp;thePWData))
        {
            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: this-&gt;SignContract failed.\n&quot;</span>, __FUNCTION__);
            <span class="keywordflow">return</span> <span class="keyword">false</span>;
        }
        <span class="comment">// -----------------------------------</span>
        this-&gt;<a class="code" href="class_o_t_contract.html#a363ae430d4fd9256ab8364dbafb95444">SaveContract</a>();
        <span class="comment">// -----------------------------------</span>
        <a class="code" href="class_o_t_string.html">OTString</a> strTemp;
        this-&gt;<a class="code" href="class_o_t_contract.html#a5fd00cded794a6f96ba80d8d4081d591">SaveContractRaw</a>(strTemp);
        <span class="comment">// -----------------------------------</span>
        <a class="code" href="class_o_t_contract.html#a15e423ca0d650858a23e54f8285feae1">Release</a>();
        this-&gt;<a class="code" href="class_o_t_contract.html#a36300e34dcd94ed7006d98b392d46815">LoadContractFromString</a>(strTemp); <span class="comment">// The ultimate test is, once we&#39;ve created the serialized string for this contract, is to then load it up from that string.</span>
        <span class="comment">// -----------------------------------</span>
        <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> NEW_ID;
        this-&gt;<a class="code" href="class_o_t_contract.html#a705597c0b741d3d120624b0388f73508">CalculateContractID</a>(NEW_ID);
        <a class="code" href="class_o_t_contract.html#ac975866d3511c41d935d2ec44c24c4cb">m_ID</a> = NEW_ID;
        <span class="comment">// -----------------------------------</span>
        <span class="keywordflow">return</span> <span class="keyword">true</span>;
    }
    <span class="keywordflow">else</span>
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: this-&gt;LoadContractXML failed. strContract contents:\n\n%s\n\n&quot;</span>,
                      __FUNCTION__, strContract.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());

    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad0f7ded743c344381dc6553badf7d23d"></a><!-- doxytag: member="OTContract::CreateInnerContents" ref="ad0f7ded743c344381dc6553badf7d23d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_contract.html#ad0f7ded743c344381dc6553badf7d23d">OTContract::CreateInnerContents</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_contract_8cpp_source.html#l02271">2271</a> of file <a class="el" href="_o_t_contract_8cpp_source.html">OTContract.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// ---------------------------</span>
    <span class="comment">// CONDITIONS</span>
    <span class="comment">//</span>
    <span class="keywordflow">if</span> (<a class="code" href="class_o_t_contract.html#aa482844cba05a92d69eb0739d5deb862">m_mapConditions</a>.size() &gt; 0)
    {
        <a class="code" href="class_o_t_contract.html#a087fc09cfa4b2fd9076088360a5e5039">m_xmlUnsigned</a>.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;&lt;!-- CONDITIONS --&gt;\n\n&quot;</span>);

        <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_string_8hpp.html#a7ec7839682b097a5c5b5c5125046c82b">mapOfStrings</a>, <a class="code" href="class_o_t_contract.html#aa482844cba05a92d69eb0739d5deb862">m_mapConditions</a>)
        {
            std::string str_condition_name  = (*it).first;
            std::string str_condition_value = (*it).second;
            <span class="comment">// ----------------------------------------</span>
            <a class="code" href="class_o_t_contract.html#a087fc09cfa4b2fd9076088360a5e5039">m_xmlUnsigned</a>.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;&lt;condition name=\&quot;%s\&quot;&gt;%s&lt;/condition&gt;\n\n&quot;</span>,
                                      str_condition_name.c_str(), str_condition_value.c_str());
        }
    }
    <span class="comment">// ---------------------------</span>
    <span class="comment">// KEYS (old) / CREDENTIALS (new)</span>
    <span class="comment">//</span>
    <span class="keywordflow">if</span> (<a class="code" href="class_o_t_contract.html#adaef99b0687646a298d599a3d324a356">m_mapNyms</a>.size() &gt; 0)
    {
        <a class="code" href="class_o_t_string.html">OTString</a> strTemp;
        <span class="comment">// --------------------</span>
        <span class="comment">// KEYS  (Note: deprecated in favor of NymID source and credentials.)</span>
        <span class="comment">//</span>
        <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_agent_8hpp.html#ac89892658f6bc83e354078647b704e8f">mapOfNyms</a>, <a class="code" href="class_o_t_contract.html#adaef99b0687646a298d599a3d324a356">m_mapNyms</a>)
        {
            std::string   str_name = (*it).first;
            <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pNym     = (*it).second;
            <a class="code" href="_o_t_assert_8hpp.html#a033b133f48e61f2b227c52ad2be0c882">OT_ASSERT_MSG</a>(NULL != pNym, <span class="stringliteral">&quot;1: NULL pseudonym pointer in OTContract::CreateInnerContents.\n&quot;</span>);

            <span class="keywordflow">if</span> ((<span class="stringliteral">&quot;contract&quot;</span>            == str_name) ||
                (<span class="stringliteral">&quot;certification&quot;</span>       == str_name) ||
                (<span class="stringliteral">&quot;serverCertification&quot;</span> == str_name))
            {
                <a class="code" href="class_o_t_string.html">OTString</a> strPubkey;
                <span class="keywordflow">if</span> (pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#aa60e86ffafcfba7c68801530c12c9927">GetPublicSignKey</a>().<a class="code" href="class_o_t_asymmetric_key.html#ab4eee84fb4faf0a374fa10f110853214">GetPublicKey</a>(strPubkey) &amp;&amp; <span class="comment">// bEscaped=true by default.</span>
                    strPubkey.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>())
                {
                    strTemp.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;&lt;key name=\&quot;%s\&quot;&gt;\n%s&lt;/key&gt;\n\n&quot;</span>,
                                        str_name.c_str(), strPubkey.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
                }
            }
        } <span class="comment">// FOR_EACH</span>
        <span class="comment">// --------------------</span>
        <span class="keywordflow">if</span> (strTemp.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>())
        {
            <a class="code" href="class_o_t_contract.html#a087fc09cfa4b2fd9076088360a5e5039">m_xmlUnsigned</a>.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;&lt;!-- KEYS --&gt;\n\n%s&quot;</span>, strTemp.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
            strTemp.<a class="code" href="class_o_t_string.html#abef4b21b2170468705c58d64212d7257">Release</a>();
        }
        <span class="comment">// ----------------------------------------</span>
        <span class="comment">// NEW CREDENTIALS, based on NymID and Source, and credential IDs.</span>
        <span class="comment">//</span>
        <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_agent_8hpp.html#ac89892658f6bc83e354078647b704e8f">mapOfNyms</a>, <a class="code" href="class_o_t_contract.html#adaef99b0687646a298d599a3d324a356">m_mapNyms</a>)
        {
            std::string   str_name = (*it).first;
            <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pNym     = (*it).second;
            <a class="code" href="_o_t_assert_8hpp.html#a033b133f48e61f2b227c52ad2be0c882">OT_ASSERT_MSG</a>(NULL != pNym, <span class="stringliteral">&quot;2: NULL pseudonym pointer in OTContract::CreateInnerContents.\n&quot;</span>);

            <span class="keywordflow">if</span> (<span class="stringliteral">&quot;signer&quot;</span> == str_name)
            {
                <span class="keyword">const</span> <span class="keywordtype">bool</span> bHasCredentials = (pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#a6ae670b44bc6728da06141c885e6c7e9">GetMasterCredentialCount</a>() &gt; 0);
                <span class="comment">// ----------------------------</span>
                <a class="code" href="class_o_t_string.html">OTString</a> strNymID;
                pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#a1775c7aedd0dd25b2faf3f78dcccabe7">GetIdentifier</a>(strNymID);
                <span class="comment">// ----------------------------</span>
                <a class="code" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> ascAltLocation;
                <span class="keywordflow">if</span> (pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#ab8bd7424e1b95220cfe66372295664ff">GetAltLocation</a>().<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>())
                    ascAltLocation.<a class="code" href="class_o_t_a_s_c_i_i_armor.html#ad898bd63a4c37a97f64acfa7514409cc">SetString</a>(pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#ab8bd7424e1b95220cfe66372295664ff">GetAltLocation</a>(), <span class="keyword">false</span>); <span class="comment">//bLineBreaks=true by default. But here, no line breaks.</span>

                strTemp.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;&lt;%s hasCredentials=\&quot;%s\&quot;\n&quot;</span>
                                    <span class="stringliteral">&quot; nymID=\&quot;%s\&quot;\n&quot;</span>
                                    <span class="stringliteral">&quot; altLocation=\&quot;%s\&quot;&quot;</span>
                                    <span class="stringliteral">&quot;&gt;\n\n&quot;</span>,
                                    str_name.c_str(),<span class="comment">//&quot;signer&quot;</span>
                                    bHasCredentials ? <span class="stringliteral">&quot;true&quot;</span> : <span class="stringliteral">&quot;false&quot;</span>,
                                    strNymID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(),
                                    ascAltLocation.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
                <span class="comment">// ----------------------------------</span>
                <span class="keywordflow">if</span> (pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#ab76ac495443316ded275e7bb281388d2">GetNymIDSource</a>().<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>())
                {
                    <a class="code" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> ascNymIDSource(pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#ab76ac495443316ded275e7bb281388d2">GetNymIDSource</a>());
                    strTemp.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;&lt;nymIDSource&gt;\n%s&lt;/nymIDSource&gt;\n\n&quot;</span>, ascNymIDSource.Get());
                }
                <span class="comment">// ----------------------------------</span>
                <span class="comment">// credentialList</span>
                <span class="comment">// credentials</span>
                <span class="comment">//</span>
                <span class="keywordflow">if</span> (bHasCredentials)
                {
                    <span class="comment">// -----------------------------</span>
                    <span class="comment">// Create a new OTDB::StringMap object.</span>
                    <span class="comment">//</span>
                    <a class="code" href="class_o_t_d_b_1_1_storable.html">OTDB::Storable</a> * pStorable = NULL;
                    <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTDB::Storable&gt;</a> theAngel;
                    <a class="code" href="class_o_t_d_b_1_1_string_map.html">OTDB::StringMap</a> * pMap = NULL;
                    <span class="comment">// --------------------------------------------------------------</span>
                    pStorable = <a class="code" href="namespace_o_t_d_b.html#a67b35ca5812604fb3e1eae2b659f66ee">OTDB::CreateObject</a>(<a class="code" href="namespace_o_t_d_b.html#abce432e500285dde333e6f76f6fbde82acc03e85e0f615881a2abe9ca12628330">OTDB::STORED_OBJ_STRING_MAP</a>); <span class="comment">// this asserts already, on failure.</span>
                    theAngel.<a class="code" href="class_o_t_cleanup.html#aac0b26193b0a59dbbf491a4e417af833">SetCleanupTargetPointer</a>(pStorable); <span class="comment">// It will definitely be cleaned up.</span>
                    pMap = (NULL == pStorable) ? NULL : dynamic_cast&lt;OTDB::StringMap *&gt;(pStorable);
                    <span class="comment">// --------------------------------------------------------------</span>
                    <span class="keywordflow">if</span> (NULL == pMap)
                        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error: failed trying to load or create a STORED_OBJ_STRING_MAP.\n&quot;</span>,
                                      __FUNCTION__);
                    <span class="keywordflow">else</span> <span class="comment">// It instantiated.</span>
                    {    <span class="comment">// -----------------------------------------------</span>
                        <a class="code" href="class_o_t_string.html">OTString</a>       strCredList;
                        <a class="code" href="_o_t_string_8hpp.html#a7ec7839682b097a5c5b5c5125046c82b">mapOfStrings</a> &amp; theMap = pMap-&gt;<a class="code" href="class_o_t_d_b_1_1_string_map.html#a460f2e551430c65fef4130576985a0ce">the_map</a>;

                        pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#a356d33b203d025ec66a43e23c63c55ed">GetPublicCredentials</a>(strCredList, &amp;theMap);
                        <span class="comment">// -----------------------------------------------</span>
                        <span class="comment">// Serialize the StringMap to a string...</span>
                        <span class="comment">//</span>
                        <span class="keywordflow">if</span> (strCredList.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>() &amp;&amp; (theMap.size() &gt; 0)) <span class="comment">// Won&#39;t bother if there are zero credentials somehow.</span>
                        {
                            std::string str_Encoded     = <a class="code" href="namespace_o_t_d_b.html#a3c8a8d4af889b2aa3458aac4365aa784">OTDB::EncodeObject</a>(*pMap);
                            <span class="keyword">const</span> <span class="keywordtype">bool</span> bSuccessEncoding = (str_Encoded.size() &gt; 0);
                            <span class="keywordflow">if</span> (bSuccessEncoding)
                            {
                                <a class="code" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> armor1(strCredList),
                                             armor2; armor2.<a class="code" href="class_o_t_string.html#aa5db620fe8e60c849585d741975db991">Set</a>(str_Encoded.c_str());
                                <span class="keywordflow">if</span> (armor1.Exists())
                                    strTemp.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;&lt;credentialList&gt;\n%s&lt;/credentialList&gt;\n\n&quot;</span>, armor1.Get());
                                <span class="keywordflow">if</span> (armor2.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>())
                                    strTemp.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;&lt;credentials&gt;\n%s&lt;/credentials&gt;\n\n&quot;</span>, armor2.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
                            }
                        }
                    }
                }
                <span class="comment">// ----------------------------------</span>

                strTemp.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;&lt;/%s&gt;\n\n&quot;</span>, str_name.c_str());<span class="comment">//&quot;signer&quot;</span>

            } <span class="comment">// &quot;signer&quot;</span>
        } <span class="comment">// FOR_EACH</span>
        <span class="comment">// --------------------</span>
        <span class="keywordflow">if</span> (strTemp.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>())
        {
            <a class="code" href="class_o_t_contract.html#a087fc09cfa4b2fd9076088360a5e5039">m_xmlUnsigned</a>.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;&lt;!-- NYMS --&gt;\n\n%s&quot;</span>, strTemp.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
            strTemp.<a class="code" href="class_o_t_string.html#abef4b21b2170468705c58d64212d7257">Release</a>();
        }
        <span class="comment">// ----------------------------------------</span>
    } <span class="comment">// if (m_mapNyms.size() &gt; 0)</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="a00d55a1901fa72acbbe9271b7c984d37"></a><!-- doxytag: member="OTContract::DearmorAndTrim" ref="a00d55a1901fa72acbbe9271b7c984d37" args="(const OTString &amp;strInput, OTString &amp;strOutput, OTString &amp;strFirstLine)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_contract.html#a00d55a1901fa72acbbe9271b7c984d37">OTContract::DearmorAndTrim</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strInput</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strOutput</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strFirstLine</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_contract_8cpp_source.html#l00169">169</a> of file <a class="el" href="_o_t_contract_8cpp_source.html">OTContract.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// --------------------------</span>
    <span class="keywordflow">if</span> (<span class="keyword">false</span> == strInput.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>())
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Input string is empty.\n&quot;</span>, __FUNCTION__);
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// --------------------------------------------------------------------</span>
    strOutput.<a class="code" href="class_o_t_string.html#aa5db620fe8e60c849585d741975db991">Set</a>(strInput);

    <span class="keywordflow">if</span> (<span class="keyword">false</span> == strOutput.<a class="code" href="class_o_t_string.html#a0221820d7a19178ca0c539795b494f8d">DecodeIfArmored</a>(<span class="keyword">false</span>)) <span class="comment">// bEscapedIsAllowed=true by default.</span>
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Input string apparently was encoded and then failed decoding. Contents: \n%s\n&quot;</span>,
                      __FUNCTION__, strInput.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// ------------------------------------------</span>
    strOutput.<a class="code" href="class_o_t_string.html#a9dc2c1f7f583e495406dee7a14b919b4">reset</a>(); <span class="comment">// for sgets</span>

    <span class="comment">// At this point, strOutput contains the actual contents, whether they</span>
    <span class="comment">// were originally ascii-armored OR NOT. (And they are also now trimmed, either way.)</span>
    <span class="comment">// ------------------------------------------</span>
    <span class="keyword">static</span> <span class="keywordtype">char</span>     <a class="code" href="unionu__header.html#ac53aebe696286ddee96a16c2b8a50e26">buf</a>[75] = <span class="stringliteral">&quot;&quot;</span>;
    buf[0] = 0; <span class="comment">// probably unnecessary.</span>
    <span class="keywordtype">bool</span> bGotLine = strOutput.<a class="code" href="class_o_t_string.html#a53f546c500623fff646e3c2970b9f8af">sgets</a>(buf, 70);

    <span class="keywordflow">if</span> (!bGotLine)
        <span class="keywordflow">return</span> <span class="keyword">false</span>;

    strFirstLine.<a class="code" href="class_o_t_string.html#aa5db620fe8e60c849585d741975db991">Set</a>(buf);
    strOutput.<a class="code" href="class_o_t_string.html#a9dc2c1f7f583e495406dee7a14b919b4">reset</a>(); <span class="comment">// set the &quot;file&quot; pointer within this string back to index 0.</span>

    <span class="comment">// Now I feel pretty safe -- the string I&#39;m examining is within</span>
    <span class="comment">// the first 70 characters of the beginning of the contract, and</span>
    <span class="comment">// it will NOT contain the escape &quot;- &quot; sequence. From there, if</span>
    <span class="comment">// it contains the proper sequence, I will instantiate that type.</span>
    <span class="keywordflow">if</span> (!strFirstLine.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>() || strFirstLine.<a class="code" href="class_o_t_string.html#acb212b06102322aebb96090601794825">Contains</a>(<span class="stringliteral">&quot;- -&quot;</span>))
        <span class="keywordflow">return</span> <span class="keyword">false</span>;

    <span class="keywordflow">return</span> <span class="keyword">true</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae2082c4f9dea1ffa54023c31c37b00f7"></a><!-- doxytag: member="OTContract::DisplayStatistics" ref="ae2082c4f9dea1ffa54023c31c37b00f7" args="(OTString &amp;strContents) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_contract.html#ae2082c4f9dea1ffa54023c31c37b00f7">OTContract::DisplayStatistics</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strContents</em></td><td>)</td>
          <td> const<code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reimplemented in <a class="el" href="class_o_t_account.html#ac7811202ffe1bd326810bcab5d6120a5">OTAccount</a>, <a class="el" href="class_o_t_asset_contract.html#aeb0a127e435d1a63490691995070c810">OTAssetContract</a>, and <a class="el" href="class_o_t_server_contract.html#a0bc4490186d0b6d48a4647d7a5a6c5a6">OTServerContract</a>.</p>

<p>Definition at line <a class="el" href="_o_t_contract_8cpp_source.html#l01112">1112</a> of file <a class="el" href="_o_t_contract_8cpp_source.html">OTContract.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// Subclasses may override this.</span>
    strContents.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(const_cast&lt;char*&gt;(<span class="stringliteral">&quot;ERROR:  OTContract::DisplayStatistics was called instead of a subclass...\n&quot;</span>));

    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="abd75a35cdfc8287a59281305175598e7"></a><!-- doxytag: member="OTContract::GetContractPublicKey" ref="abd75a35cdfc8287a59281305175598e7" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="class_o_t_asymmetric_key.html">OTAsymmetricKey</a> * <a class="el" href="class_o_t_contract.html#abd75a35cdfc8287a59281305175598e7">OTContract::GetContractPublicKey</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_contract_8cpp_source.html#l00577">577</a> of file <a class="el" href="_o_t_contract_8cpp_source.html">OTContract.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_agent_8hpp.html#ac89892658f6bc83e354078647b704e8f">mapOfNyms</a>, <a class="code" href="class_o_t_contract.html#adaef99b0687646a298d599a3d324a356">m_mapNyms</a>)
    {
        <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pNym = (*it).second;
        <a class="code" href="_o_t_assert_8hpp.html#a033b133f48e61f2b227c52ad2be0c882">OT_ASSERT_MSG</a>(NULL != pNym, <span class="stringliteral">&quot;NULL pseudonym pointer in OTContract::GetContractPublicKey.\n&quot;</span>);

        <span class="comment">// We favor the new &quot;credential&quot; system over the old &quot;public key&quot; system.</span>
        <span class="comment">// No one will ever actually put BOTH in a single contract. But if they do,</span>
        <span class="comment">// we favor the new version over the old.</span>
        <span class="keywordflow">if</span> ((*it).first == <span class="stringliteral">&quot;signer&quot;</span>) <span class="comment">// TODO have a place for hardcoded values like this.</span>
        {                            <span class="comment">// We&#39;re saying here that every contract has a key tag called &quot;contract&quot;</span>
                                     <span class="comment">// where the official public key can be found for it and for any contract.</span>
            <a class="code" href="class_o_t_asymmetric_key.html">OTAsymmetricKey</a> * pKey = (<a class="code" href="class_o_t_asymmetric_key.html">OTAsymmetricKey</a> *) &amp;(pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#aa60e86ffafcfba7c68801530c12c9927">GetPublicSignKey</a>()); <span class="comment">//todo fix this cast.</span>
            <span class="keywordflow">return</span> <span class="keyword">const_cast&lt;</span><a class="code" href="class_o_t_asymmetric_key.html">OTAsymmetricKey</a> *<span class="keyword">&gt;</span>(pKey);
        }
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((*it).first == <span class="stringliteral">&quot;contract&quot;</span>)
        {
            <a class="code" href="class_o_t_asymmetric_key.html">OTAsymmetricKey</a> * pKey = (<a class="code" href="class_o_t_asymmetric_key.html">OTAsymmetricKey</a> *) &amp;(pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#aa60e86ffafcfba7c68801530c12c9927">GetPublicSignKey</a>()); <span class="comment">//todo fix this cast.</span>
            <span class="keywordflow">return</span> <span class="keyword">const_cast&lt;</span><a class="code" href="class_o_t_asymmetric_key.html">OTAsymmetricKey</a> *<span class="keyword">&gt;</span>(pKey);
        }
    }

    <span class="keywordflow">return</span> NULL;
}
</pre></div>
</div>
</div>
<a class="anchor" id="affb6a11ee52ad13fd6e1e1ef6e4bbdc1"></a><!-- doxytag: member="OTContract::GetContractPublicNym" ref="affb6a11ee52ad13fd6e1e1ef6e4bbdc1" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> * <a class="el" href="class_o_t_contract.html#affb6a11ee52ad13fd6e1e1ef6e4bbdc1">OTContract::GetContractPublicNym</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_contract_8cpp_source.html#l00550">550</a> of file <a class="el" href="_o_t_contract_8cpp_source.html">OTContract.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_agent_8hpp.html#ac89892658f6bc83e354078647b704e8f">mapOfNyms</a>, <a class="code" href="class_o_t_contract.html#adaef99b0687646a298d599a3d324a356">m_mapNyms</a>)
    {
        <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pNym = (*it).second;
        <a class="code" href="_o_t_assert_8hpp.html#a033b133f48e61f2b227c52ad2be0c882">OT_ASSERT_MSG</a>(NULL != pNym, <span class="stringliteral">&quot;NULL pseudonym pointer in OTContract::GetContractPublicNym.\n&quot;</span>);

        <span class="comment">// We favor the new &quot;credential&quot; system over the old &quot;public key&quot; system.</span>
        <span class="comment">// No one will ever actually put BOTH in a single contract. But if they do,</span>
        <span class="comment">// we favor the new version over the old.</span>
        <span class="keywordflow">if</span> ((*it).first == <span class="stringliteral">&quot;signer&quot;</span>)
        {
            <span class="keywordflow">return</span> pNym;
        }
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((*it).first == <span class="stringliteral">&quot;contract&quot;</span>) <span class="comment">// TODO have a place for hardcoded values like this.</span>
        {                              <span class="comment">// We&#39;re saying here that every contract has to have a key tag called &quot;contract&quot;</span>
                                       <span class="comment">// where the official public key can be found for it and for any contract.</span>
            <span class="keywordflow">return</span> pNym;
        }
    }

    <span class="keywordflow">return</span> NULL;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac43b764316bac9a4c5b983c0a5a73b43"></a><!-- doxytag: member="OTContract::GetFilename" ref="ac43b764316bac9a4c5b983c0a5a73b43" args="(OTString &amp;strFilename)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_contract.html#ac43b764316bac9a4c5b983c0a5a73b43">OTContract::GetFilename</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strFilename</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_contract_8cpp_source.html#l00442">442</a> of file <a class="el" href="_o_t_contract_8cpp_source.html">OTContract.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    strFilename = <a class="code" href="class_o_t_contract.html#ab7ab1f1fe7ff7e52f2c126404a8f4f92">m_strFilename</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a223df6b13ddc3ba3323c0d7f910177a9"></a><!-- doxytag: member="OTContract::GetFoldername" ref="a223df6b13ddc3ba3323c0d7f910177a9" args="(OTString &amp;strFoldername)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_contract.html#a223df6b13ddc3ba3323c0d7f910177a9">OTContract::GetFoldername</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strFoldername</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ada17f9ebb2ffb868fa475b9cbbabae24"></a><!-- doxytag: member="OTContract::GetHashType" ref="ada17f9ebb2ffb868fa475b9cbbabae24" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* <a class="el" href="class_o_t_contract.html#ada17f9ebb2ffb868fa475b9cbbabae24">OTContract::GetHashType</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_contract_8hpp_source.html#l00238">238</a> of file <a class="el" href="_o_t_contract_8hpp_source.html">OTContract.hpp</a>.</p>
<div class="fragment"><pre class="fragment">{ <span class="keywordflow">return</span> <a class="code" href="class_o_t_contract.html#adccde050f729b2d24e3c392592868c90">m_strSigHashType</a>.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(); }
</pre></div>
</div>
</div>
<a class="anchor" id="acf77d2db6da3904aa8b03e7b87c02e4e"></a><!-- doxytag: member="OTContract::GetIdentifier" ref="acf77d2db6da3904aa8b03e7b87c02e4e" args="(OTIdentifier &amp;theIdentifier)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_contract.html#acf77d2db6da3904aa8b03e7b87c02e4e">OTContract::GetIdentifier</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;&#160;</td>
          <td class="paramname"><em>theIdentifier</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reimplemented in <a class="el" href="class_o_t_offer.html#aa6d8a913ecec5c9021ae583e5a236c67">OTOffer</a>, and <a class="el" href="class_o_t_market.html#a49db3f80ecfae55769f94e19a5c157b5">OTMarket</a>.</p>

<p>Definition at line <a class="el" href="_o_t_contract_8cpp_source.html#l00448">448</a> of file <a class="el" href="_o_t_contract_8cpp_source.html">OTContract.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    theIdentifier = <a class="code" href="class_o_t_contract.html#ac975866d3511c41d935d2ec44c24c4cb">m_ID</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab8f081b7b796eb077e966fa9bfa64498"></a><!-- doxytag: member="OTContract::GetIdentifier" ref="ab8f081b7b796eb077e966fa9bfa64498" args="(OTString &amp;theIdentifier)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_contract.html#acf77d2db6da3904aa8b03e7b87c02e4e">OTContract::GetIdentifier</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>theIdentifier</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_contract_8cpp_source.html#l00454">454</a> of file <a class="el" href="_o_t_contract_8cpp_source.html">OTContract.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_o_t_contract.html#ac975866d3511c41d935d2ec44c24c4cb">m_ID</a>.<a class="code" href="class_o_t_identifier.html#a4bccb30446b4b515d9d6016b86b260bb">GetString</a>(theIdentifier);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a1afca402333b7c546104d5aa48c8efd9"></a><!-- doxytag: member="OTContract::GetName" ref="a1afca402333b7c546104d5aa48c8efd9" args="(OTString &amp;strName) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_contract.html#a1afca402333b7c546104d5aa48c8efd9">OTContract::GetName</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strName</em></td><td>)</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_contract_8hpp_source.html#l00303">303</a> of file <a class="el" href="_o_t_contract_8hpp_source.html">OTContract.hpp</a>.</p>
<div class="fragment"><pre class="fragment">{ strName = <a class="code" href="class_o_t_contract.html#af86a3a124ae977b30bfd3f5cd14d1f9f">m_strName</a>; }
</pre></div>
</div>
</div>
<a class="anchor" id="a0dbeed2ca8cded6350ba341d83104d27"></a><!-- doxytag: member="OTContract::Initialize" ref="a0dbeed2ca8cded6350ba341d83104d27" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_contract.html#a0dbeed2ca8cded6350ba341d83104d27">OTContract::Initialize</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_contract_8cpp_source.html#l00366">366</a> of file <a class="el" href="_o_t_contract_8cpp_source.html">OTContract.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_o_t_contract.html#ac523dac7d72b72e54b1ebb5b3a3b21cc">m_strContractType</a>   = <span class="stringliteral">&quot;CONTRACT&quot;</span>;   <span class="comment">// CONTRACT, MESSAGE, TRANSACTION, LEDGER, TRANSACTION ITEM</span>
    <span class="comment">// make sure subclasses set this in their own initialization routine.</span>

    <a class="code" href="class_o_t_contract.html#adccde050f729b2d24e3c392592868c90">m_strSigHashType</a>    = <a class="code" href="class_o_t_identifier.html#a1179b45355107bf4511249a823217c94">OTIdentifier::DefaultHashAlgorithm</a>;
    <a class="code" href="class_o_t_contract.html#aa0d889e0e1670b56fedca245041a5ed3">m_strVersion</a>        = <span class="stringliteral">&quot;2.0&quot;</span>; <span class="comment">// since new credentials system.</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="a765d885635d69d3ea1fe994fbd200862"></a><!-- doxytag: member="OTContract::InsertNym" ref="a765d885635d69d3ea1fe994fbd200862" args="(const OTString &amp;strKeyName, const OTString &amp;strKeyValue)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_contract.html#a765d885635d69d3ea1fe994fbd200862">OTContract::InsertNym</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strKeyName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strKeyValue</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_contract_8cpp_source.html#l02700">2700</a> of file <a class="el" href="_o_t_contract_8cpp_source.html">OTContract.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">bool</span> bResult        = <span class="keyword">false</span>;
    <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pNym  = <span class="keyword">new</span> <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a>;

    <a class="code" href="_o_t_assert_8hpp.html#a033b133f48e61f2b227c52ad2be0c882">OT_ASSERT_MSG</a>(NULL != pNym, <span class="stringliteral">&quot;Error allocating memory for new Nym in OTContract::InsertNym\n&quot;</span>);

    <span class="comment">// This is the version of SetCertificate that handles escaped bookends. ( - -----BEGIN CERTIFICATE-----)</span>
    <span class="keywordflow">if</span> (strKeyValue.<a class="code" href="class_o_t_string.html#acb212b06102322aebb96090601794825">Contains</a>(<span class="stringliteral">&quot;CERTIFICATE&quot;</span>) &amp;&amp; pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#a2e4a5a88ecffe86c45359fcb592bccd6">SetCertificate</a>(strKeyValue, <span class="keyword">true</span>)) <span class="comment">// it also defaults to true, FYI.</span>
    {
        <a class="code" href="class_o_t_contract.html#adaef99b0687646a298d599a3d324a356">m_mapNyms</a>[strKeyName.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>()] = pNym;
        pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#ac6c809c283846f8a7a3338a37998ba88">SetIdentifierByPubkey</a>();
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(1, <span class="stringliteral">&quot;---- Loaded certificate \&quot;%s\&quot;\n&quot;</span>, strKeyName.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
        bResult = <span class="keyword">true</span>;
    }
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strKeyValue.<a class="code" href="class_o_t_string.html#acb212b06102322aebb96090601794825">Contains</a>(<span class="stringliteral">&quot;PUBLIC KEY&quot;</span>) &amp;&amp; pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#acd9b375d6c16d11d7d0df1dcf1f543a7">SetPublicKey</a>(strKeyValue, <span class="keyword">true</span>)) <span class="comment">// it also defaults to true, FYI.</span>
    {
        <a class="code" href="class_o_t_contract.html#adaef99b0687646a298d599a3d324a356">m_mapNyms</a>[strKeyName.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>()] = pNym;
        pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#ac6c809c283846f8a7a3338a37998ba88">SetIdentifierByPubkey</a>();
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(1, <span class="stringliteral">&quot;---- Loaded public key \&quot;%s\&quot;\n&quot;</span>, strKeyName.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
        bResult = <span class="keyword">true</span>;
    }
    <span class="keywordflow">else</span>
    {
        <span class="keyword">delete</span> pNym;
        pNym = NULL;
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;\nLoaded key \&quot;%s\&quot; but FAILED adding the Nym to the Contract:\n---&gt;%s&lt;---\n&quot;</span>,
                strKeyName.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(), strKeyValue.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
    }

    <span class="keywordflow">return</span> bResult;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a3a4b4d7e43a53027a5e170557b9e7e12"></a><!-- doxytag: member="OTContract::InstantiateContract" ref="a3a4b4d7e43a53027a5e170557b9e7e12" args="(OTString strInput)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_contract.html">OTContract</a> * <a class="el" href="class_o_t_contract.html#a3a4b4d7e43a53027a5e170557b9e7e12">OTContract::InstantiateContract</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_string.html">OTString</a>&#160;</td>
          <td class="paramname"><em>strInput</em></td><td>)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_contract_8cpp_source.html#l00221">221</a> of file <a class="el" href="_o_t_contract_8cpp_source.html">OTContract.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// --------------------------------------------------------------------</span>
    <a class="code" href="class_o_t_string.html">OTString</a>   strContract, strFirstLine; <span class="comment">// output for the below function.</span>
    <span class="keyword">const</span> <span class="keywordtype">bool</span> bProcessed = <a class="code" href="class_o_t_contract.html#a00d55a1901fa72acbbe9271b7c984d37">OTContract::DearmorAndTrim</a>(strInput, strContract, strFirstLine);
    <span class="comment">// --------------------------------------------------------------------</span>
    <span class="keywordflow">if</span> (bProcessed)
    {
        <span class="comment">// -----------------------------------------------------------</span>
        <a class="code" href="class_o_t_contract.html">OTContract</a> * pContract = NULL;

<span class="comment">//      if (strFirstLine.Contains(&quot;-----BEGIN SIGNED AGREEMENT-----&quot;))  // this string is 32 chars long.</span>
<span class="comment">//      {   pContract = new OTAgreement();      OT_ASSERT(NULL != pContract); }</span>

        <span class="keywordflow">if</span> (strFirstLine.<a class="code" href="class_o_t_string.html#acb212b06102322aebb96090601794825">Contains</a>(<span class="stringliteral">&quot;-----BEGIN SIGNED SMARTCONTRACT-----&quot;</span>))  <span class="comment">// this string is 36 chars long.</span>
        {   pContract = <span class="keyword">new</span> <a class="code" href="class_o_t_smart_contract.html">OTSmartContract</a>();  <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pContract); }

        <span class="keywordflow">if</span> (strFirstLine.<a class="code" href="class_o_t_string.html#acb212b06102322aebb96090601794825">Contains</a>(<span class="stringliteral">&quot;-----BEGIN SIGNED PAYMENT PLAN-----&quot;</span>))  <span class="comment">// this string is 35 chars long.</span>
        {   pContract = <span class="keyword">new</span> <a class="code" href="class_o_t_payment_plan.html">OTPaymentPlan</a>();    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pContract); }

        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strFirstLine.<a class="code" href="class_o_t_string.html#acb212b06102322aebb96090601794825">Contains</a>(<span class="stringliteral">&quot;-----BEGIN SIGNED TRADE-----&quot;</span>))  <span class="comment">// this string is 28 chars long.</span>
        {   pContract = <span class="keyword">new</span> <a class="code" href="class_o_t_trade.html">OTTrade</a>();          <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pContract); }

        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strFirstLine.<a class="code" href="class_o_t_string.html#acb212b06102322aebb96090601794825">Contains</a>(<span class="stringliteral">&quot;-----BEGIN SIGNED OFFER-----&quot;</span>))
        {   pContract = <span class="keyword">new</span> <a class="code" href="class_o_t_offer.html">OTOffer</a>();          <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pContract); }

        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strFirstLine.<a class="code" href="class_o_t_string.html#acb212b06102322aebb96090601794825">Contains</a>(<span class="stringliteral">&quot;-----BEGIN SIGNED INVOICE-----&quot;</span>))
        {   pContract = <span class="keyword">new</span> <a class="code" href="class_o_t_cheque.html">OTCheque</a>();         <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pContract); }

        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strFirstLine.<a class="code" href="class_o_t_string.html#acb212b06102322aebb96090601794825">Contains</a>(<span class="stringliteral">&quot;-----BEGIN SIGNED VOUCHER-----&quot;</span>))
        {   pContract = <span class="keyword">new</span> <a class="code" href="class_o_t_cheque.html">OTCheque</a>();         <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pContract); }

        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strFirstLine.<a class="code" href="class_o_t_string.html#acb212b06102322aebb96090601794825">Contains</a>(<span class="stringliteral">&quot;-----BEGIN SIGNED CHEQUE-----&quot;</span>))
        {   pContract = <span class="keyword">new</span> <a class="code" href="class_o_t_cheque.html">OTCheque</a>();         <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pContract); }

        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strFirstLine.<a class="code" href="class_o_t_string.html#acb212b06102322aebb96090601794825">Contains</a>(<span class="stringliteral">&quot;-----BEGIN SIGNED MESSAGE-----&quot;</span>))
        {   pContract = <span class="keyword">new</span> <a class="code" href="class_o_t_message.html">OTMessage</a>();        <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pContract); }

        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strFirstLine.<a class="code" href="class_o_t_string.html#acb212b06102322aebb96090601794825">Contains</a>(<span class="stringliteral">&quot;-----BEGIN SIGNED MINT-----&quot;</span>))
        {   pContract = <a class="code" href="class_o_t_mint.html#a2a0ecb9351ac2ce303e1b20ae523aabb">OTMint::MintFactory</a>();  <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pContract); }

        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strFirstLine.<a class="code" href="class_o_t_string.html#acb212b06102322aebb96090601794825">Contains</a>(<span class="stringliteral">&quot;-----BEGIN SIGNED FILE-----&quot;</span>))
        {   pContract = <span class="keyword">new</span> <a class="code" href="class_o_t_signed_file.html">OTSignedFile</a>();     <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pContract); }

        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strFirstLine.<a class="code" href="class_o_t_string.html#acb212b06102322aebb96090601794825">Contains</a>(<span class="stringliteral">&quot;-----BEGIN SIGNED CASH-----&quot;</span>))
        {   pContract = <a class="code" href="class_o_t_token.html#a4743b9502c620181569445d58fbdf826">OTToken::LowLevelInstantiate</a>(strFirstLine); <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pContract); }

        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strFirstLine.<a class="code" href="class_o_t_string.html#acb212b06102322aebb96090601794825">Contains</a>(<span class="stringliteral">&quot;-----BEGIN SIGNED CASH TOKEN-----&quot;</span>))
        {   pContract = <a class="code" href="class_o_t_token.html#a4743b9502c620181569445d58fbdf826">OTToken::LowLevelInstantiate</a>(strFirstLine); <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pContract); }

        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strFirstLine.<a class="code" href="class_o_t_string.html#acb212b06102322aebb96090601794825">Contains</a>(<span class="stringliteral">&quot;-----BEGIN SIGNED LUCRE CASH TOKEN-----&quot;</span>))
        {   pContract = <a class="code" href="class_o_t_token.html#a4743b9502c620181569445d58fbdf826">OTToken::LowLevelInstantiate</a>(strFirstLine); <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pContract); }


        <span class="comment">// The Purse object requires the asset type ID in order to be instantiated.</span>
        <span class="comment">// I may remove this requirement (if possible) or not.</span>
<span class="comment">//</span>
<span class="comment">//      else if (strFirstLine.Contains(&quot;-----BEGIN SIGNED PURSE-----&quot;))</span>
<span class="comment">//      {   pContract = new OTPurse();          OT_ASSERT(NULL != pContract); }</span>


        <span class="comment">// THESE OBJECTS REQUIRE YOU TO KNOW THE SERVER ID, USER ID, AND ACCT ID,</span>
        <span class="comment">// IN ORDER TO GENERATE A NEW INSTANCE, OR TO LOAD AN EXISTING ONE.</span>
        <span class="comment">// THUS, I AM REMOVING THEM FROM HERE FOR NOW.</span>
        <span class="comment">// DONE: ADD A OTTransactionType class factory (like I did for CronItem)</span>
        <span class="comment">// and then create these in there instead.</span>
        <span class="comment">//</span>
<span class="comment">//      else if (strFirstLine.Contains(&quot;-----BEGIN SIGNED ACCOUNT-----&quot;))</span>
<span class="comment">//      {   pContract = new OTAccount();        OT_ASSERT(NULL != pContract); }</span>
<span class="comment">//      else if (strFirstLine.Contains(&quot;-----BEGIN SIGNED LEDGER-----&quot;))</span>
<span class="comment">//      {   pContract = new OTLedger();         OT_ASSERT(NULL != pContract); }</span>
<span class="comment">//</span>
<span class="comment">//      else if (strFirstLine.Contains(&quot;-----BEGIN SIGNED TRANSACTION-----&quot;))</span>
<span class="comment">//      {   pContract = new OTTransaction();    OT_ASSERT(NULL != pContract); }</span>
<span class="comment">//</span>
<span class="comment">//      else if (strFirstLine.Contains(&quot;-----BEGIN SIGNED TRANSACTION ITEM-----&quot;))</span>
<span class="comment">//      {   pContract = new OTItem();           OT_ASSERT(NULL != pContract); }</span>
<span class="comment">//</span>

        <span class="comment">// TODO: Might want to clarify in Asset and Server Contracts,</span>
        <span class="comment">// so I don&#39;t have to do this crap... The ones above are cleaner.</span>
        <span class="comment">//</span>
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strFirstLine.<a class="code" href="class_o_t_string.html#acb212b06102322aebb96090601794825">Contains</a>(<span class="stringliteral">&quot;-----BEGIN SIGNED CONTRACT-----&quot;</span>))
        {
            <span class="keywordflow">if</span> (strContract.<a class="code" href="class_o_t_string.html#acb212b06102322aebb96090601794825">Contains</a>(<span class="stringliteral">&quot;&lt;notaryProviderContract version=\&quot;1.0\&quot;&gt;&quot;</span>))
            {   pContract = <span class="keyword">new</span> <a class="code" href="class_o_t_server_contract.html">OTServerContract</a>();     <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pContract); }
            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strContract.<a class="code" href="class_o_t_string.html#acb212b06102322aebb96090601794825">Contains</a>(<span class="stringliteral">&quot;&lt;digitalAssetContract version=\&quot;1.0\&quot;&gt;&quot;</span>))
            {   pContract = <span class="keyword">new</span> <a class="code" href="class_o_t_asset_contract.html">OTAssetContract</a>();      <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pContract); }
        }

        <span class="comment">// ----------------------------------------------</span>
        <span class="comment">// The string didn&#39;t match any of the options in the factory.</span>
        <span class="comment">//</span>
        <span class="keywordflow">if</span> (NULL == pContract)
            <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Object type not yet supported by class factory: %s\n&quot;</span>,
                           __FUNCTION__, strFirstLine.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
        <span class="comment">// Does the contract successfully load from the string passed in?</span>
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">false</span> == pContract-&gt;<a class="code" href="class_o_t_contract.html#a36300e34dcd94ed7006d98b392d46815">LoadContractFromString</a>(strContract))
        {
            <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Failed loading contract from string (first line): %s\n&quot;</span>,
                           __FUNCTION__, strFirstLine.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
            <span class="keyword">delete</span> pContract;
            pContract = NULL;
        }
        <span class="keywordflow">else</span>
            <span class="keywordflow">return</span> pContract;
    }
    <span class="keywordflow">return</span> NULL;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a1432a5e924d021a9dc39320d3b8e7b90"></a><!-- doxytag: member="OTContract::LoadContract" ref="a1432a5e924d021a9dc39320d3b8e7b90" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_contract.html#a1432a5e924d021a9dc39320d3b8e7b90">OTContract::LoadContract</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reimplemented in <a class="el" href="class_o_t_purse.html#a3cb2ab98b3dd278d16f76eb6bf35e780">OTPurse</a>, <a class="el" href="class_o_t_account.html#a4b7e2c2774e3c70d1646f0121bc2ff3c">OTAccount</a>, and <a class="el" href="class_o_t_mint.html#a24d766b08e9a5f62399c8c9032bc4639">OTMint</a>.</p>

<p>Definition at line <a class="el" href="_o_t_contract_8cpp_source.html#l01371">1371</a> of file <a class="el" href="_o_t_contract_8cpp_source.html">OTContract.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_o_t_contract.html#a15e423ca0d650858a23e54f8285feae1">Release</a>();
    <a class="code" href="class_o_t_contract.html#a53e298b9d8d6363cb354a0cf360d1114">LoadContractRawFile</a>(); <span class="comment">// opens m_strFilename and reads into m_strRawFile</span>

    <span class="keywordflow">return</span> <a class="code" href="class_o_t_contract.html#a89edae048b064a50a255fbfe4f7dcef5">ParseRawFile</a>(); <span class="comment">// Parses m_strRawFile into the various member variables.</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="addf9cb2a1de6e7feb6c177e6c22b8976"></a><!-- doxytag: member="OTContract::LoadContract" ref="addf9cb2a1de6e7feb6c177e6c22b8976" args="(const char *szFoldername, const char *szFilename)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_contract.html#a1432a5e924d021a9dc39320d3b8e7b90">OTContract::LoadContract</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>szFoldername</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>szFilename</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_contract_8cpp_source.html#l01426">1426</a> of file <a class="el" href="_o_t_contract_8cpp_source.html">OTContract.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_o_t_contract.html#a15e423ca0d650858a23e54f8285feae1">Release</a>();

    <a class="code" href="class_o_t_contract.html#ab1e11693a38a1673037b1f29c9d84010">m_strFoldername</a>.<a class="code" href="class_o_t_string.html#aa5db620fe8e60c849585d741975db991">Set</a>(szFoldername);
    <a class="code" href="class_o_t_contract.html#ab7ab1f1fe7ff7e52f2c126404a8f4f92">m_strFilename</a>.<a class="code" href="class_o_t_string.html#aa5db620fe8e60c849585d741975db991">Set</a>(szFilename);
    <span class="comment">// --------------------------------------------</span>
    <span class="comment">// opens m_strFilename and reads into m_strRawFile</span>
    <span class="keywordflow">if</span> (<a class="code" href="class_o_t_contract.html#a53e298b9d8d6363cb354a0cf360d1114">LoadContractRawFile</a>())
        <span class="keywordflow">return</span> <a class="code" href="class_o_t_contract.html#a89edae048b064a50a255fbfe4f7dcef5">ParseRawFile</a>(); <span class="comment">// Parses m_strRawFile into the various member variables.</span>
    <span class="keywordflow">else</span>
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;Failed loading raw contract file: %s%s%s\n&quot;</span>,
                      <a class="code" href="class_o_t_contract.html#ab1e11693a38a1673037b1f29c9d84010">m_strFoldername</a>.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(), <a class="code" href="class_o_t_log.html#a42d3c91ff84ecae0690e34efb4619a77">OTLog::PathSeparator</a>(), <a class="code" href="class_o_t_contract.html#ab7ab1f1fe7ff7e52f2c126404a8f4f92">m_strFilename</a>.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
    }
    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a36300e34dcd94ed7006d98b392d46815"></a><!-- doxytag: member="OTContract::LoadContractFromString" ref="a36300e34dcd94ed7006d98b392d46815" args="(const OTString &amp;theStr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_contract.html#a36300e34dcd94ed7006d98b392d46815">OTContract::LoadContractFromString</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>theStr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_contract_8cpp_source.html#l01447">1447</a> of file <a class="el" href="_o_t_contract_8cpp_source.html">OTContract.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_o_t_contract.html#a15e423ca0d650858a23e54f8285feae1">Release</a>();
    <span class="comment">// ------------------------------------------------</span>
    <span class="keywordflow">if</span> (!theStr.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>())
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: ERROR: Empty string passed in...\n&quot;</span>, __FUNCTION__);
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// --------------------------------------------------------------------</span>
    <a class="code" href="class_o_t_string.html">OTString</a> strContract(theStr);

    <span class="keywordflow">if</span> (<span class="keyword">false</span> == strContract.DecodeIfArmored()) <span class="comment">// bEscapedIsAllowed=true by default.</span>
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: ERROR: Input string apparently was encoded and then failed decoding. &quot;</span>
                      <span class="stringliteral">&quot;Contents: \n%s\n&quot;</span>, __FUNCTION__, theStr.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// ------------------------------------------</span>
    <a class="code" href="class_o_t_contract.html#a90c53743214bc0f0025ad63c3ace7bf2">m_strRawFile</a>.<a class="code" href="class_o_t_string.html#aa5db620fe8e60c849585d741975db991">Set</a>(strContract);

    <span class="comment">// This populates m_xmlUnsigned with the contents of m_strRawFile (minus bookends, signatures, etc. JUST the XML.)</span>
    <span class="keywordtype">bool</span> bSuccess = <a class="code" href="class_o_t_contract.html#a89edae048b064a50a255fbfe4f7dcef5">ParseRawFile</a>(); <span class="comment">// It also parses into the various member variables.</span>

    <span class="comment">// Removed:</span>
    <span class="comment">// This was the bug where the version changed from 75 to 75c, and suddenly contract ID was wrong...</span>
    <span class="comment">//</span>
    <span class="comment">// If it was a success, save back to m_strRawFile again so</span>
    <span class="comment">// the format is consistent and hashes will calculate properly.</span>
<span class="comment">//  if (bSuccess)</span>
<span class="comment">//  {</span>
<span class="comment">//      // Basically we take the m_xmlUnsigned that we parsed out of the raw file before,</span>
<span class="comment">//      // then we use that to generate the raw file again, re-attaching the signatures.</span>
<span class="comment">//      // This function does that.</span>
<span class="comment">//      SaveContract();</span>
<span class="comment">//  }</span>

    <span class="keywordflow">return</span> bSuccess;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a53e298b9d8d6363cb354a0cf360d1114"></a><!-- doxytag: member="OTContract::LoadContractRawFile" ref="a53e298b9d8d6363cb354a0cf360d1114" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_contract.html#a53e298b9d8d6363cb354a0cf360d1114">OTContract::LoadContractRawFile</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_contract_8cpp_source.html#l01386">1386</a> of file <a class="el" href="_o_t_contract_8cpp_source.html">OTContract.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keyword">const</span> <span class="keywordtype">char</span> * szFoldername = <a class="code" href="class_o_t_contract.html#ab1e11693a38a1673037b1f29c9d84010">m_strFoldername</a>.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();
    <span class="keyword">const</span> <span class="keywordtype">char</span> * szFilename = <a class="code" href="class_o_t_contract.html#ab7ab1f1fe7ff7e52f2c126404a8f4f92">m_strFilename</a>.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();

    <span class="keywordflow">if</span> (!<a class="code" href="class_o_t_contract.html#ab1e11693a38a1673037b1f29c9d84010">m_strFoldername</a>.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>() || !<a class="code" href="class_o_t_contract.html#ab7ab1f1fe7ff7e52f2c126404a8f4f92">m_strFilename</a>.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>())
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    <span class="comment">// --------------------------------------------------------------------</span>
    <span class="keywordflow">if</span> (<span class="keyword">false</span> == <a class="code" href="namespace_o_t_d_b.html#a73e39a590dfb64f63065821c6bbcd4c6">OTDB::Exists</a>(szFoldername, szFilename))
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: File does not exist: %s%s%s\n&quot;</span>,
                      __FUNCTION__, szFoldername, <a class="code" href="class_o_t_log.html#a42d3c91ff84ecae0690e34efb4619a77">OTLog::PathSeparator</a>(), szFilename);
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// --------------------------------------------------------------------</span>
    <a class="code" href="class_o_t_string.html">OTString</a> strFileContents(<a class="code" href="namespace_o_t_d_b.html#a921d6f538de00f4e4297c25cf679f00a">OTDB::QueryPlainString</a>(szFoldername, szFilename)); <span class="comment">// &lt;=== LOADING FROM DATA STORE.</span>

    <span class="keywordflow">if</span> (<span class="keyword">false</span> == strFileContents.Exists())
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error reading file: %s%s%s\n&quot;</span>,
                      __FUNCTION__, szFoldername, <a class="code" href="class_o_t_log.html#a42d3c91ff84ecae0690e34efb4619a77">OTLog::PathSeparator</a>(), szFilename);
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// --------------------------------------------------------------------</span>
    <span class="keywordflow">if</span> (<span class="keyword">false</span> == strFileContents.DecodeIfArmored()) <span class="comment">// bEscapedIsAllowed=true by default.</span>
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Input string apparently was encoded and then failed decoding. Contents: \n%s\n&quot;</span>,
                      __FUNCTION__, strFileContents.Get());
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// ------------------------------------------</span>
    <span class="comment">// At this point, strFileContents contains the actual contents, whether they</span>
    <span class="comment">// were originally ascii-armored OR NOT. (And they are also now trimmed, either way.)</span>
    <span class="comment">//</span>
    <a class="code" href="class_o_t_contract.html#a90c53743214bc0f0025ad63c3ace7bf2">m_strRawFile</a>.<a class="code" href="class_o_t_string.html#aa5db620fe8e60c849585d741975db991">Set</a>(strFileContents);
    <span class="comment">// ------------------------------------------</span>
    <span class="keywordflow">return</span> <a class="code" href="class_o_t_contract.html#a90c53743214bc0f0025ad63c3ace7bf2">m_strRawFile</a>.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>();
}
</pre></div>
</div>
</div>
<a class="anchor" id="a1d4ec7ef97d0239f6816637aa555504c"></a><!-- doxytag: member="OTContract::LoadContractXML" ref="a1d4ec7ef97d0239f6816637aa555504c" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_contract.html#a1d4ec7ef97d0239f6816637aa555504c">OTContract::LoadContractXML</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_contract_8cpp_source.html#l01748">1748</a> of file <a class="el" href="_o_t_contract_8cpp_source.html">OTContract.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    int32_t retProcess = 0;

    <span class="keywordflow">if</span> (!<a class="code" href="class_o_t_contract.html#a087fc09cfa4b2fd9076088360a5e5039">m_xmlUnsigned</a>.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>())
    {
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }

    <a class="code" href="class_o_t_contract.html#a087fc09cfa4b2fd9076088360a5e5039">m_xmlUnsigned</a>.<a class="code" href="class_o_t_string.html#a9dc2c1f7f583e495406dee7a14b919b4">reset</a>();

    <a class="code" href="namespaceirr_1_1io.html#a1628edbb9d5d53f18c82d2a92b0ad27e">IrrXMLReader</a>* xml = irr::io::createIrrXMLReader(<a class="code" href="class_o_t_contract.html#a087fc09cfa4b2fd9076088360a5e5039">m_xmlUnsigned</a>);
    <a class="code" href="_o_t_assert_8hpp.html#a033b133f48e61f2b227c52ad2be0c882">OT_ASSERT_MSG</a>(NULL != xml, <span class="stringliteral">&quot;Memory allocation issue with xml reader in OTContract::LoadContractXML()\n&quot;</span>);
    <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;IrrXMLReader&gt;</a> xmlAngel(*xml);

    <span class="comment">// parse the file until end reached</span>
    <span class="keywordflow">while</span>(xml-&gt;read())
    {
        <a class="code" href="class_o_t_string.html">OTString</a> strNodeType;

        <span class="keywordflow">switch</span>(xml-&gt;getNodeType())
        {
            <span class="keywordflow">case</span> EXN_NONE:         strNodeType.<a class="code" href="class_o_t_string.html#aa5db620fe8e60c849585d741975db991">Set</a>(<span class="stringliteral">&quot;EXN_NONE&quot;</span>);        <span class="keywordflow">goto</span> switch_log;
            <span class="keywordflow">case</span> EXN_COMMENT:      strNodeType.<a class="code" href="class_o_t_string.html#aa5db620fe8e60c849585d741975db991">Set</a>(<span class="stringliteral">&quot;EXN_COMMENT&quot;</span>);     <span class="keywordflow">goto</span> switch_log;
            <span class="keywordflow">case</span> EXN_ELEMENT_END:  strNodeType.<a class="code" href="class_o_t_string.html#aa5db620fe8e60c849585d741975db991">Set</a>(<span class="stringliteral">&quot;EXN_ELEMENT_END&quot;</span>); <span class="keywordflow">goto</span> switch_log;
            <span class="keywordflow">case</span> EXN_CDATA:        strNodeType.<a class="code" href="class_o_t_string.html#aa5db620fe8e60c849585d741975db991">Set</a>(<span class="stringliteral">&quot;EXN_CDATA&quot;</span>);       <span class="keywordflow">goto</span> switch_log;

            switch_log:
<span class="comment">//                OTLog::vError(&quot;SKIPPING %s element in OTContract::LoadContractXML: &quot;</span>
<span class="comment">//                              &quot;type: %d, name: %s, value: %s\n&quot;,</span>
<span class="comment">//                              strNodeType.Get(), xml-&gt;getNodeType(), xml-&gt;getNodeName(), xml-&gt;getNodeData());</span>

                <span class="keywordflow">break</span>;

            <span class="keywordflow">case</span> EXN_TEXT:
            {
                <span class="comment">// unknown element type</span>
<span class="comment">//              OTLog::vError( &quot;SKIPPING unknown text element type in OTContract::LoadContractXML: %s, value: %s\n&quot;,</span>
<span class="comment">//                            xml-&gt;getNodeName(), xml-&gt;getNodeData());</span>
            }
                <span class="keywordflow">break</span>;
            <span class="keywordflow">case</span> EXN_ELEMENT:
                {
                    retProcess = <a class="code" href="class_o_t_contract.html#a48611c37c8e8e7d9125238bda2b77978">ProcessXMLNode</a>(xml);

                    <span class="comment">// an error was returned. file format or whatever.</span>
                    <span class="keywordflow">if</span> ((-1) == retProcess)
                    {
                        <a class="code" href="class_o_t_log.html#a5acd90ac91c2618f395b0ff37ad4f8ee">OTLog::Error</a>(<span class="stringliteral">&quot;OTContract::LoadContractXML: (Cancelling this contract load; an error occurred.)\n&quot;</span>);
                        <span class="keywordflow">return</span> <span class="keyword">false</span>;
                    }
                    <span class="comment">// No error, but also the node wasn&#39;t found...</span>
                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (0 == retProcess)
                    {
                        <span class="comment">// unknown element type</span>
                        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;UNKNOWN element type in OTContract::LoadContractXML: %s, value: %s\n&quot;</span>,
                                xml-&gt;getNodeName(), xml-&gt;getNodeData());
                    }
                    <span class="comment">// else if 1 was returned, that means the node was processed.</span>
                }
                <span class="keywordflow">break</span>;
            <span class="keywordflow">default</span>:
            {
<span class="comment">//                OTLog::vError(&quot;SKIPPING (default case) element in OTContract::LoadContractXML: %d, value: %s\n&quot;,</span>
<span class="comment">//                              xml-&gt;getNodeType(), xml-&gt;getNodeData());</span>
            }
                <span class="keywordflow">continue</span>;

        }
    }

    <span class="keywordflow">return</span> <span class="keyword">true</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a72ffe11fdcf2f6e3566afa9061241f30"></a><!-- doxytag: member="OTContract::LoadEncodedTextField" ref="a72ffe11fdcf2f6e3566afa9061241f30" args="(irr::io::IrrXMLReader *&amp;xml, OTASCIIArmor &amp;ascOutput)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_contract.html#a72ffe11fdcf2f6e3566afa9061241f30">OTContract::LoadEncodedTextField</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespaceirr_1_1io.html#a1628edbb9d5d53f18c82d2a92b0ad27e">irr::io::IrrXMLReader</a> *&amp;&#160;</td>
          <td class="paramname"><em>xml</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> &amp;&#160;</td>
          <td class="paramname"><em>ascOutput</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_contract_8cpp_source.html#l01946">1946</a> of file <a class="el" href="_o_t_contract_8cpp_source.html">OTContract.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_o_t_assert_8hpp.html#a033b133f48e61f2b227c52ad2be0c882">OT_ASSERT_MSG</a>(NULL != xml, <span class="stringliteral">&quot;OTContract::LoadEncodedTextField -- assert: NULL != xml&quot;</span>);
    <span class="comment">// ------------------</span>
    <span class="keyword">const</span> <span class="keywordtype">char</span> * szFunc = <span class="stringliteral">&quot;OTContract::LoadEncodedTextField&quot;</span>;
    <span class="comment">// ------------------</span>
    <span class="comment">// If we&#39;re not ALREADY on a text field, maybe there is some whitespace, so let&#39;s skip ahead...</span>
    <span class="comment">//</span>
    <span class="keywordflow">if</span> (EXN_TEXT != xml-&gt;getNodeType())
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(4, <span class="stringliteral">&quot;%s: Skipping non-text field... \n&quot;</span>, szFunc);

        <span class="comment">// move to the next node which SHOULD be the expected text field.</span>
        <span class="comment">//</span>
        <span class="keywordflow">if</span> (<span class="keyword">false</span> == <a class="code" href="class_o_t_contract.html#a219a1ee572cecb9b6510c9869d8c4a64">SkipToTextField</a>(xml))
        {
            <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Failure: Unable to find expected text field.\n&quot;</span>, szFunc);
            <span class="keywordflow">return</span> <span class="keyword">false</span>;
        }
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(4, <span class="stringliteral">&quot;%s: Finished skipping non-text field. (Successfully.)\n&quot;</span>, szFunc);
    }

    <span class="comment">// ------------------</span>
    <span class="comment">//</span>
    <span class="keywordflow">if</span> (EXN_TEXT == xml-&gt;getNodeType())  <span class="comment">// SHOULD always be true, in fact this could be an assert().</span>
    {
        <a class="code" href="class_o_t_string.html">OTString</a> strNodeData = xml-&gt;getNodeData();

        <span class="comment">// Sometimes the XML reads up the data with a prepended newline.</span>
        <span class="comment">// This screws up my own objects which expect a consistent in/out</span>
        <span class="comment">// So I&#39;m checking here for that prepended newline, and removing it.</span>
        <span class="comment">//</span>
        <span class="keywordtype">char</span> cNewline;
        <span class="keywordflow">if</span> (strNodeData.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>() &amp;&amp; strNodeData.<a class="code" href="class_o_t_string.html#a640392dd17a786dab643dbfc7e5a8672">GetLength</a>() &gt; 2 &amp;&amp; strNodeData.<a class="code" href="class_o_t_string.html#a0b183402da9a9ea6da94b3fcaa8740e8">At</a>(0, cNewline))
        {
            <span class="keywordflow">if</span> (<span class="charliteral">&#39;\n&#39;</span> == cNewline)
            {
                ascOutput.<a class="code" href="class_o_t_string.html#aa5db620fe8e60c849585d741975db991">Set</a>(strNodeData.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>() + 1);
            }
            <span class="keywordflow">else</span>
            {
                ascOutput.<a class="code" href="class_o_t_string.html#aa5db620fe8e60c849585d741975db991">Set</a>(strNodeData.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
            }
            <span class="comment">// ----------------------------------------</span>
            <span class="comment">// SkipAfterLoadingField() only skips ahead if it&#39;s not ALREADY</span>
            <span class="comment">// sitting on an element_end node.</span>
            <span class="comment">//</span>
            xml-&gt;read(); <span class="comment">// THIS PUTS us on the CLOSING TAG.  &lt;========================</span>

            <span class="comment">// The below call won&#39;t advance any further if it&#39;s ALREADY on the closing tag (e.g. from the above xml-&gt;read() call.)</span>
            <span class="keywordflow">if</span> (<span class="keyword">false</span> == <a class="code" href="class_o_t_contract.html#a77ea430a1b66e3eceed36b773a40cb5f">SkipAfterLoadingField</a>(xml))
            { <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;*** %s: Bad data? Expected EXN_ELEMENT_END here, but &quot;</span>
                            <span class="stringliteral">&quot;didn&#39;t get it. Returning false.\n&quot;</span>, szFunc); <span class="keywordflow">return</span> <span class="keyword">false</span>; }

            <span class="keywordflow">return</span> <span class="keyword">true</span>;
        }
    }
    <span class="keywordflow">else</span>
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Failure: Unable to find expected text field. 2\n&quot;</span>, szFunc);

    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a590551829c5056e740a3e24bb2989bb8"></a><!-- doxytag: member="OTContract::LoadEncodedTextField" ref="a590551829c5056e740a3e24bb2989bb8" args="(irr::io::IrrXMLReader *&amp;xml, OTString &amp;strOutput)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_contract.html#a72ffe11fdcf2f6e3566afa9061241f30">OTContract::LoadEncodedTextField</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespaceirr_1_1io.html#a1628edbb9d5d53f18c82d2a92b0ad27e">irr::io::IrrXMLReader</a> *&amp;&#160;</td>
          <td class="paramname"><em>xml</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strOutput</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_contract_8cpp_source.html#l01932">1932</a> of file <a class="el" href="_o_t_contract_8cpp_source.html">OTContract.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> ascOutput;

    <span class="keywordflow">if</span> (<a class="code" href="class_o_t_contract.html#a72ffe11fdcf2f6e3566afa9061241f30">OTContract::LoadEncodedTextField</a>(xml, ascOutput) &amp;&amp; ascOutput.<a class="code" href="class_o_t_string.html#a640392dd17a786dab643dbfc7e5a8672">GetLength</a>() &gt; 2)
    {
        <span class="keywordflow">return</span> ascOutput.<a class="code" href="class_o_t_a_s_c_i_i_armor.html#ab39b6cae69c14149716e5ce7a6f0bb0f">GetString</a>(strOutput, <span class="keyword">true</span>); <span class="comment">// linebreaks = true</span>
    }

    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac374831c4a1fad9d016d39d640a285ac"></a><!-- doxytag: member="OTContract::LoadEncodedTextFieldByName" ref="ac374831c4a1fad9d016d39d640a285ac" args="(irr::io::IrrXMLReader *&amp;xml, OTASCIIArmor &amp;ascOutput, const char *&amp;szName, mapOfStrings *pmapExtraVars=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_contract.html#ac374831c4a1fad9d016d39d640a285ac">OTContract::LoadEncodedTextFieldByName</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespaceirr_1_1io.html#a1628edbb9d5d53f18c82d2a92b0ad27e">irr::io::IrrXMLReader</a> *&amp;&#160;</td>
          <td class="paramname"><em>xml</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> &amp;&#160;</td>
          <td class="paramname"><em>ascOutput</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&amp;&#160;</td>
          <td class="paramname"><em>szName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="_o_t_string_8hpp.html#a7ec7839682b097a5c5b5c5125046c82b">mapOfStrings</a> *&#160;</td>
          <td class="paramname"><em>pmapExtraVars</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_contract_8cpp_source.html#l02030">2030</a> of file <a class="el" href="_o_t_contract_8cpp_source.html">OTContract.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != szName);
    <span class="comment">// ------------------</span>
    <span class="keyword">const</span> <span class="keywordtype">char</span> * pElementExpected = szName;
    <span class="comment">// ------------------</span>
    <span class="comment">// If we&#39;re not ALREADY on an element, maybe there is some whitespace, so let&#39;s skip ahead...</span>
    <span class="comment">//</span>
    <span class="keywordflow">if</span> ((EXN_ELEMENT != xml-&gt;getNodeType()) ||          <span class="comment">// If we&#39;re not already on a node, OR if the node&#39;s</span>
        !(strcmp(pElementExpected, xml-&gt;getNodeName()) == 0) )  <span class="comment">// name doesn&#39;t match the one expected.</span>
    {
        <span class="comment">// move to the next node which SHOULD be the expected name.</span>
        <span class="comment">//</span>
        <span class="keywordflow">if</span> (<span class="keyword">false</span> == <a class="code" href="class_o_t_contract.html#a6d67d87a183391e60f4aca8a3856fdb2">SkipToElement</a>(xml))
        {
            <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Failure: Unable to find expected element: %s. \n&quot;</span>,
                           __FUNCTION__, szName);
            <span class="keywordflow">return</span> <span class="keyword">false</span>;
        }
    }
    <span class="comment">// ------------------</span>
    <span class="keywordflow">if</span> (EXN_ELEMENT == xml-&gt;getNodeType())  <span class="comment">// SHOULD always be true...</span>
    {
        <span class="keywordflow">if</span> (!strcmp(pElementExpected, xml-&gt;getNodeName()))
        {
            <span class="comment">// ----------------------------------------</span>

            <span class="keywordflow">if</span> (NULL != pmapExtraVars) <span class="comment">// If the caller wants values for certain names expected to be on this node.</span>
            {
                <a class="code" href="_o_t_string_8hpp.html#a7ec7839682b097a5c5b5c5125046c82b">mapOfStrings</a> &amp; mapExtraVars = (*pmapExtraVars);

                <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_string_8hpp.html#a7ec7839682b097a5c5b5c5125046c82b">mapOfStrings</a>, mapExtraVars)
                {

                    std::string first   = ((*it).first);
<span class="comment">//                  std::string second  = ((*it).second);</span>

                    <a class="code" href="class_o_t_string.html">OTString</a> strTemp = xml-&gt;getAttributeValue(first.c_str());

                    <span class="keywordflow">if</span> (strTemp.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>())
                    {
                        mapExtraVars[first] = strTemp.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();

<span class="comment">//                      mapExtraVars.erase(first);</span>
<span class="comment">//                      mapExtraVars.insert(std::pair&lt;std::string, std::string&gt;(first, strTemp.Get()));</span>
                    }
                }
            } <span class="comment">// Any attribute names passed in, now have their corresponding values set on mapExtraVars (for caller.)</span>

            <span class="comment">// ----------------------------------------</span>

            <span class="keywordflow">if</span> (<span class="keyword">false</span> == <a class="code" href="class_o_t_contract.html#a72ffe11fdcf2f6e3566afa9061241f30">OTContract::LoadEncodedTextField</a>(xml, ascOutput)) <span class="comment">// &lt;====================================================</span>
            {
                <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error loading %s field.\n&quot;</span>, __FUNCTION__,
                              pElementExpected);
                <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">// error condition</span>
            }
            <span class="keywordflow">else</span>
            {
                <span class="comment">// ----------------------------------------</span>
                <span class="comment">// SkipAfterLoadingField() only skips ahead if it&#39;s not ALREADY</span>
                <span class="comment">// sitting on an element_end node.</span>
                <span class="comment">//</span>
                <span class="comment">// Update: Above, LoadEncodedTextField() already does this (below).</span>
                <span class="comment">//</span>
<span class="comment">//              if (false == SkipAfterLoadingField(xml))</span>
<span class="comment">//              { OTLog::Output(0, &quot;*** %s: Bad data? Expected EXN_ELEMENT_END here, but &quot;</span>
<span class="comment">//                              &quot;didn&#39;t get it. Returning false.\n&quot;, __FUNCTION__); return false; }</span>

                <span class="keywordflow">return</span> <span class="keyword">true</span>;  <span class="comment">// &lt;============ SUCCESS!!!!</span>
            }
        }
        <span class="keywordflow">else</span>
        {
            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error: missing %s element.\n&quot;</span>,
                          __FUNCTION__, pElementExpected);
            <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">// error condition</span>
        }
    }
    <span class="keywordflow">else</span>
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error: Expected %s element with text field.\n&quot;</span>,
                      __FUNCTION__, pElementExpected);
        <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">// error condition</span>
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae5ec9fc643b92564a6c53b0f6cc76371"></a><!-- doxytag: member="OTContract::LoadEncodedTextFieldByName" ref="ae5ec9fc643b92564a6c53b0f6cc76371" args="(irr::io::IrrXMLReader *&amp;xml, OTString &amp;strOutput, const char *&amp;szName, mapOfStrings *pmapExtraVars=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_contract.html#ac374831c4a1fad9d016d39d640a285ac">OTContract::LoadEncodedTextFieldByName</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespaceirr_1_1io.html#a1628edbb9d5d53f18c82d2a92b0ad27e">irr::io::IrrXMLReader</a> *&amp;&#160;</td>
          <td class="paramname"><em>xml</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strOutput</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&amp;&#160;</td>
          <td class="paramname"><em>szName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="_o_t_string_8hpp.html#a7ec7839682b097a5c5b5c5125046c82b">mapOfStrings</a> *&#160;</td>
          <td class="paramname"><em>pmapExtraVars</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_contract_8cpp_source.html#l02012">2012</a> of file <a class="el" href="_o_t_contract_8cpp_source.html">OTContract.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != szName);

    <a class="code" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> ascOutput;

    <span class="keywordflow">if</span> (<a class="code" href="class_o_t_contract.html#ac374831c4a1fad9d016d39d640a285ac">OTContract::LoadEncodedTextFieldByName</a>(xml, ascOutput, szName, pmapExtraVars) &amp;&amp; ascOutput.<a class="code" href="class_o_t_string.html#a640392dd17a786dab643dbfc7e5a8672">GetLength</a>() &gt; 2)
    {
        <span class="keywordflow">return</span> ascOutput.<a class="code" href="class_o_t_a_s_c_i_i_armor.html#ab39b6cae69c14149716e5ce7a6f0bb0f">GetString</a>(strOutput, <span class="keyword">true</span>); <span class="comment">// linebreaks = true</span>
    }

    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a89edae048b064a50a255fbfe4f7dcef5"></a><!-- doxytag: member="OTContract::ParseRawFile" ref="a89edae048b064a50a255fbfe4f7dcef5" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_contract.html#a89edae048b064a50a255fbfe4f7dcef5">OTContract::ParseRawFile</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_contract_8cpp_source.html#l01488">1488</a> of file <a class="el" href="_o_t_contract_8cpp_source.html">OTContract.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">char</span> buffer1[2100]; <span class="comment">// a bit bigger than 2048, just for safety reasons.</span>
    <a class="code" href="class_o_t_signature.html">OTSignature</a> * pSig = NULL;

    std::string line;

    <span class="keywordtype">bool</span> bSignatureMode = <span class="keyword">false</span>; <span class="comment">// &quot;currently in signature mode&quot;</span>
    <span class="keywordtype">bool</span> bContentMode = <span class="keyword">false</span>; <span class="comment">// &quot;currently in content mode&quot;</span>
    <span class="keywordtype">bool</span> bHaveEnteredContentMode = <span class="keyword">false</span>; <span class="comment">// &quot;have yet to enter content mode&quot;</span>

    <span class="keywordflow">if</span> (!<a class="code" href="class_o_t_contract.html#a90c53743214bc0f0025ad63c3ace7bf2">m_strRawFile</a>.<a class="code" href="class_o_t_string.html#a640392dd17a786dab643dbfc7e5a8672">GetLength</a>())
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;Empty m_strRawFile in OTContract::ParseRawFile. Filename: %s%s%s.\n&quot;</span>,
                      <a class="code" href="class_o_t_contract.html#ab1e11693a38a1673037b1f29c9d84010">m_strFoldername</a>.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(), <a class="code" href="class_o_t_log.html#a42d3c91ff84ecae0690e34efb4619a77">OTLog::PathSeparator</a>(), <a class="code" href="class_o_t_contract.html#ab7ab1f1fe7ff7e52f2c126404a8f4f92">m_strFilename</a>.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }

    <span class="comment">// This is redundant (I thought) but the problem hasn&#39;t cleared up yet.. so trying to really nail it now.</span>
    std::string str_Trim(<a class="code" href="class_o_t_contract.html#a90c53743214bc0f0025ad63c3ace7bf2">m_strRawFile</a>.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
    std::string str_Trim2 = <a class="code" href="class_o_t_string.html#afe7626d0687eab81200a1af1539faed9">OTString::trim</a>(str_Trim);
    <a class="code" href="class_o_t_contract.html#a90c53743214bc0f0025ad63c3ace7bf2">m_strRawFile</a>.<a class="code" href="class_o_t_string.html#aa5db620fe8e60c849585d741975db991">Set</a>(str_Trim2.c_str());
    <span class="comment">// ----------------------------------------</span>

    <span class="keywordtype">bool</span> bIsEOF = <span class="keyword">false</span>;
    <a class="code" href="class_o_t_contract.html#a90c53743214bc0f0025ad63c3ace7bf2">m_strRawFile</a>.<a class="code" href="class_o_t_string.html#a9dc2c1f7f583e495406dee7a14b919b4">reset</a>();

    <span class="keywordflow">do</span>
    {
        <span class="comment">// Just a fresh start at the top of the loop block... probably unnecessary.</span>
        memset(buffer1, 0, 2100); <span class="comment">// todo remove this in optimization. (might be removed already...)</span>

        <span class="comment">// the call returns true if there&#39;s more to read, and false if there isn&#39;t.</span>
        bIsEOF = !(<a class="code" href="class_o_t_contract.html#a90c53743214bc0f0025ad63c3ace7bf2">m_strRawFile</a>.<a class="code" href="class_o_t_string.html#a53f546c500623fff646e3c2970b9f8af">sgets</a>(buffer1, 2048));

        line = buffer1;
        <span class="keyword">const</span> <span class="keywordtype">char</span> * pConstBuf = line.c_str();
        <span class="keywordtype">char</span> * pBuf = (<span class="keywordtype">char</span> *)pConstBuf;


        <span class="keywordflow">if</span> (line.length() &lt; 2)
        {
            <span class="keywordflow">if</span> (bSignatureMode)
                <span class="keywordflow">continue</span>;
        }

        <span class="comment">// if we&#39;re on a dashed line...</span>
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (line.at(0) == <span class="charliteral">&#39;-&#39;</span>)
        {
            <span class="keywordflow">if</span> (bSignatureMode)
            {
                <span class="comment">// we just reached the end of a signature</span>
            <span class="comment">//  OTLog::vError(&quot;%s\n&quot;, pSig-&gt;Get());</span>
                pSig = NULL;
                bSignatureMode = <span class="keyword">false</span>;
                <span class="keywordflow">continue</span>;
            }

            <span class="comment">// if I&#39;m NOT in signature mode, and I just hit a dash, that means there</span>
            <span class="comment">// are only four options:</span>

            <span class="comment">// a. I have not yet even entered content mode, and just now entering it for the first time.</span>
            <span class="keywordflow">if</span> (!bHaveEnteredContentMode)
            {
                <span class="keywordflow">if</span> ((line.length() &gt; 3) &amp;&amp;
                    (line.find(<span class="stringliteral">&quot;BEGIN&quot;</span>)!=std::string::npos) &amp;&amp;
                    line.at(1) == <span class="charliteral">&#39;-&#39;</span> &amp;&amp;
                    line.at(2) == <span class="charliteral">&#39;-&#39;</span> &amp;&amp;
                    line.at(3) == <span class="charliteral">&#39;-&#39;</span>)
                {
<span class="comment">//                  OTLog::Error(&quot;\nProcessing contract... \n&quot;);</span>
                    bHaveEnteredContentMode = <span class="keyword">true</span>;
                    bContentMode = <span class="keyword">true</span>;
                    <span class="keywordflow">continue</span>;
                }
                <span class="keywordflow">else</span>
                {
                    <span class="keywordflow">continue</span>;
                }

            }

            <span class="comment">// b. I am now entering signature mode!</span>
            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (line.length() &gt; 3 &amp;&amp; line.find(<span class="stringliteral">&quot;SIGNATURE&quot;</span>)!=std::string::npos &amp;&amp; line.at(1) == <span class="charliteral">&#39;-&#39;</span> &amp;&amp; line.at(2) == <span class="charliteral">&#39;-&#39;</span> &amp;&amp; line.at(3) == <span class="charliteral">&#39;-&#39;</span>)
            {
                <span class="comment">//if (bContentMode)</span>
                <span class="comment">//  OTLog::Output(3, &quot;Finished reading contract.\n\nReading a signature at the bottom of the contract...\n&quot;);</span>
                <span class="comment">//else</span>
                <span class="comment">//  OTLog::Output(3, &quot;Reading another signature...\n&quot;);</span>

                bSignatureMode = <span class="keyword">true</span>;
                bContentMode   = <span class="keyword">false</span>;

                pSig = <span class="keyword">new</span> <a class="code" href="class_o_t_signature.html">OTSignature</a>();

                <a class="code" href="_o_t_assert_8hpp.html#a033b133f48e61f2b227c52ad2be0c882">OT_ASSERT_MSG</a>(NULL != pSig, <span class="stringliteral">&quot;Error allocating memory for Signature in OTContract::ParseRawFile\n&quot;</span>);

                <a class="code" href="class_o_t_contract.html#ae2a61cbef0e8827af6795280e4682b85">m_listSignatures</a>.push_back(pSig);

                <span class="keywordflow">continue</span>;
            }
            <span class="comment">// c. There is an error in the file!</span>
            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (line.length() &lt; 3 || line.at(1) != <span class="charliteral">&#39; &#39;</span> || line.at(2) != <span class="charliteral">&#39;-&#39;</span>)
            {
                <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;Error in contract %s: a dash at the beginning of the &quot;</span>
                        <span class="stringliteral">&quot;line should be followed by a space and another dash:\n%s\n&quot;</span>,
                               <a class="code" href="class_o_t_contract.html#ab7ab1f1fe7ff7e52f2c126404a8f4f92">m_strFilename</a>.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(), <a class="code" href="class_o_t_contract.html#a90c53743214bc0f0025ad63c3ace7bf2">m_strRawFile</a>.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
                <span class="keywordflow">return</span> <span class="keyword">false</span>;
            }
            <span class="comment">// d. It is an escaped dash, and therefore kosher, so I merely remove the escape and add it.</span>
            else
                ; <span class="comment">// I&#39;ve decided not to remove the dashes but to keep them as part of the signed content.</span>
            <span class="comment">// It&#39;s just much easier to deal with that way. The input code will insert the extra dashes.</span>
            <span class="comment">//pBuf += 2;</span>
        }

        <span class="comment">// Else we&#39;re on a normal line, not a dashed line.</span>
        <span class="keywordflow">else</span>
        {
            <span class="keywordflow">if</span> (bHaveEnteredContentMode)
            {
                <span class="keywordflow">if</span> (bSignatureMode)
                {
                    <span class="keywordflow">if</span> (line.length() &lt; 2)
                    {
                        <a class="code" href="class_o_t_log.html#a1f7549d776ee919dcb6517f611ded015">OTLog::Output</a>(3, <span class="stringliteral">&quot;Skipping short line...\n&quot;</span>);

                        <span class="keywordflow">if</span> (bIsEOF || !<a class="code" href="class_o_t_contract.html#a90c53743214bc0f0025ad63c3ace7bf2">m_strRawFile</a>.<a class="code" href="class_o_t_string.html#a53f546c500623fff646e3c2970b9f8af">sgets</a>(buffer1, 2048))
                        {
                            <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;Error in signature for contract %s: Unexpected EOF after short line.\n&quot;</span>,
                                           <a class="code" href="class_o_t_contract.html#ab7ab1f1fe7ff7e52f2c126404a8f4f92">m_strFilename</a>.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
                            <span class="keywordflow">return</span> <span class="keyword">false</span>;
                        }

                        <span class="keywordflow">continue</span>;
                    }
                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (line.compare(0,8,<span class="stringliteral">&quot;Version:&quot;</span>) == 0)
                    {
                        <a class="code" href="class_o_t_log.html#a1f7549d776ee919dcb6517f611ded015">OTLog::Output</a>(3, <span class="stringliteral">&quot;Skipping version section...\n&quot;</span>);

                        <span class="keywordflow">if</span> (bIsEOF || !<a class="code" href="class_o_t_contract.html#a90c53743214bc0f0025ad63c3ace7bf2">m_strRawFile</a>.<a class="code" href="class_o_t_string.html#a53f546c500623fff646e3c2970b9f8af">sgets</a>(buffer1, 2048))
                        {
                            <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;Error in signature for contract %s: Unexpected EOF after \&quot;Version:\&quot;\n&quot;</span>,
                                           <a class="code" href="class_o_t_contract.html#ab7ab1f1fe7ff7e52f2c126404a8f4f92">m_strFilename</a>.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
                            <span class="keywordflow">return</span> <span class="keyword">false</span>;
                        }

                        <span class="keywordflow">continue</span>;
                    }
                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (line.compare(0,8,<span class="stringliteral">&quot;Comment:&quot;</span>) == 0)
                    {
                        <a class="code" href="class_o_t_log.html#a1f7549d776ee919dcb6517f611ded015">OTLog::Output</a>(3, <span class="stringliteral">&quot;Skipping comment section...\n&quot;</span>);

                        <span class="keywordflow">if</span> (bIsEOF || !<a class="code" href="class_o_t_contract.html#a90c53743214bc0f0025ad63c3ace7bf2">m_strRawFile</a>.<a class="code" href="class_o_t_string.html#a53f546c500623fff646e3c2970b9f8af">sgets</a>(buffer1, 2048))
                        {
                            <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;Error in signature for contract %s: Unexpected EOF after \&quot;Comment:\&quot;\n&quot;</span>,
                                           <a class="code" href="class_o_t_contract.html#ab7ab1f1fe7ff7e52f2c126404a8f4f92">m_strFilename</a>.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
                            <span class="keywordflow">return</span> <span class="keyword">false</span>;
                        }

                        <span class="keywordflow">continue</span>;
                    }
                    <span class="keywordflow">if</span> (line.compare(0,5,<span class="stringliteral">&quot;Meta:&quot;</span>) == 0)
                    {
                        <a class="code" href="class_o_t_log.html#a1f7549d776ee919dcb6517f611ded015">OTLog::Output</a>(3, <span class="stringliteral">&quot;Collecting signature metadata...\n&quot;</span>);

                        <span class="keywordflow">if</span> (line.length() != 13) <span class="comment">// &quot;Meta:    knms&quot; (It will always be exactly 13 characters int64_t.) knms represents the first characters of the Key type, NymID, Master Cred ID, and Subcred ID. Key type is (A|E|S) and the others are base62.</span>
                        {
                            <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;Error in signature for contract %s: Unexpected length for \&quot;Meta:\&quot; comment.\n&quot;</span>,
                                           <a class="code" href="class_o_t_contract.html#ab7ab1f1fe7ff7e52f2c126404a8f4f92">m_strFilename</a>.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
                            <span class="keywordflow">return</span> <span class="keyword">false</span>;
                        }
                        <span class="comment">// -----------------------------------------------------------</span>
                        <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pSig);
                        <span class="keywordflow">if</span> (<span class="keyword">false</span> == pSig-&gt;<a class="code" href="class_o_t_signature.html#ab82c216636edf6583efa7e5344b3c6e0">m_metadata</a>.<a class="code" href="class_o_t_signature_metadata.html#a9caa45f5ebeddf144117609344f9ddd4">SetMetadata</a>(line.at(9), line.at(10), line.at(11), line.at(12))) <span class="comment">// &quot;knms&quot; from &quot;Meta:    knms&quot;</span>
                        {
                            <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;Error in signature for contract %s: Unexpected metadata in the \&quot;Meta:\&quot; comment.\nLine: %s\n&quot;</span>,
                                           <a class="code" href="class_o_t_contract.html#ab7ab1f1fe7ff7e52f2c126404a8f4f92">m_strFilename</a>.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(), line.c_str());
                            <span class="keywordflow">return</span> <span class="keyword">false</span>;
                        }
                        <span class="comment">// -----------------------------------------------------------</span>
                        <span class="keywordflow">if</span> (bIsEOF || !<a class="code" href="class_o_t_contract.html#a90c53743214bc0f0025ad63c3ace7bf2">m_strRawFile</a>.<a class="code" href="class_o_t_string.html#a53f546c500623fff646e3c2970b9f8af">sgets</a>(buffer1, 2048))
                        {
                            <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;Error in signature for contract %s: Unexpected EOF after \&quot;Meta:\&quot;\n&quot;</span>,
                                           <a class="code" href="class_o_t_contract.html#ab7ab1f1fe7ff7e52f2c126404a8f4f92">m_strFilename</a>.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
                            <span class="keywordflow">return</span> <span class="keyword">false</span>;
                        }

                        <span class="keywordflow">continue</span>;
                    }
                }
                <span class="keywordflow">if</span> (bContentMode)
                {
                    <span class="keywordflow">if</span> (line.compare(0,6,<span class="stringliteral">&quot;Hash: &quot;</span>) == 0)
                    {
                        <a class="code" href="class_o_t_log.html#a1f7549d776ee919dcb6517f611ded015">OTLog::Output</a>(3, <span class="stringliteral">&quot;Collecting message digest algorithm from contract header...\n&quot;</span>);

                        std::string strTemp = line.substr(6);
                        <a class="code" href="class_o_t_contract.html#adccde050f729b2d24e3c392592868c90">m_strSigHashType</a> = strTemp.c_str();
                        <a class="code" href="class_o_t_contract.html#adccde050f729b2d24e3c392592868c90">m_strSigHashType</a>.<a class="code" href="class_o_t_string.html#ad9285248a4a2010320bf13b0e7b306c4">ConvertToUpperCase</a>();

                        <span class="keywordflow">if</span> (bIsEOF || !<a class="code" href="class_o_t_contract.html#a90c53743214bc0f0025ad63c3ace7bf2">m_strRawFile</a>.<a class="code" href="class_o_t_string.html#a53f546c500623fff646e3c2970b9f8af">sgets</a>(buffer1, 2048))
                        {
                            <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;Error in contract %s: Unexpected EOF after \&quot;Hash:\&quot;\n&quot;</span>,
                                           <a class="code" href="class_o_t_contract.html#ab7ab1f1fe7ff7e52f2c126404a8f4f92">m_strFilename</a>.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
                            <span class="keywordflow">return</span> <span class="keyword">false</span>;
                        }
                        <span class="keywordflow">continue</span>;
                    }
                }
            }
        }
        <span class="comment">// ---------------------------</span>
        <span class="keywordflow">if</span> (bSignatureMode)
        {
            <a class="code" href="_o_t_assert_8hpp.html#a033b133f48e61f2b227c52ad2be0c882">OT_ASSERT_MSG</a>(NULL != pSig, <span class="stringliteral">&quot;Error: Null Signature pointer WHILE processing signature, in OTContract::ParseRawFile&quot;</span>);

            pSig-&gt;<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;%s\n&quot;</span>, pBuf);
        }
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (bContentMode)
            <a class="code" href="class_o_t_contract.html#a087fc09cfa4b2fd9076088360a5e5039">m_xmlUnsigned</a>.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;%s\n&quot;</span>, pBuf);
    }
    <span class="keywordflow">while</span>(!bIsEOF);
    <span class="comment">//  while(!bIsEOF &amp;&amp; (!bHaveEnteredContentMode || bContentMode || bSignatureMode));</span>

    <span class="keywordflow">if</span> (!bHaveEnteredContentMode)
    {
        <a class="code" href="class_o_t_log.html#a5acd90ac91c2618f395b0ff37ad4f8ee">OTLog::Error</a>(<span class="stringliteral">&quot;Error in OTContract::ParseRawFile: Found no BEGIN for signed content.\n&quot;</span>);
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (bContentMode)
    {
        <a class="code" href="class_o_t_log.html#a5acd90ac91c2618f395b0ff37ad4f8ee">OTLog::Error</a>(<span class="stringliteral">&quot;Error in OTContract::ParseRawFile: EOF while reading xml content.\n&quot;</span>);
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (bSignatureMode)
    {
        <a class="code" href="class_o_t_log.html#a5acd90ac91c2618f395b0ff37ad4f8ee">OTLog::Error</a>(<span class="stringliteral">&quot;Error in OTContract::ParseRawFile: EOF while reading signature.\n&quot;</span>);
        <a class="code" href="_o_t_assert_8hpp.html#aa86aeed4e57eecded96d5955b5cc23c5">OT_FAIL_MSG</a>(<span class="stringliteral">&quot;gimme a call stack!&quot;</span>);
    }
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="class_o_t_contract.html#a1d4ec7ef97d0239f6816637aa555504c">LoadContractXML</a>())
    {
        <a class="code" href="class_o_t_log.html#a5acd90ac91c2618f395b0ff37ad4f8ee">OTLog::Error</a>(<span class="stringliteral">&quot;Error in OTContract::ParseRawFile: unable to load XML portion of contract into memory.\n&quot;</span>);
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// Verification code and loading code are now called separately.</span>
<span class="comment">//  else if (!VerifyContractID())</span>
<span class="comment">//  {</span>
<span class="comment">//      OTLog::Error(&quot;Error in OTContract::ParseRawFile: Contract ID does not match hashed contract file.\n&quot;);</span>
<span class="comment">//      return false;</span>
<span class="comment">//  }</span>
    <span class="keywordflow">else</span>
    {
        <span class="keywordflow">return</span> <span class="keyword">true</span>;
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a48611c37c8e8e7d9125238bda2b77978"></a><!-- doxytag: member="OTContract::ProcessXMLNode" ref="a48611c37c8e8e7d9125238bda2b77978" args="(irr::io::IrrXMLReader *&amp;xml)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_contract.html#a48611c37c8e8e7d9125238bda2b77978">OTContract::ProcessXMLNode</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespaceirr_1_1io.html#a1628edbb9d5d53f18c82d2a92b0ad27e">irr::io::IrrXMLReader</a> *&amp;&#160;</td>
          <td class="paramname"><em>xml</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reimplemented in <a class="el" href="class_o_t_transaction.html#a18d4d5da09f16aac3ccb97984ec021b1">OTTransaction</a>, <a class="el" href="class_o_t_smart_contract.html#a8524c56a7469d39a895bed4b18671972">OTSmartContract</a>, <a class="el" href="class_o_t_agreement.html#aba122af21b536d24bfb178074f843ff5">OTAgreement</a>, <a class="el" href="class_o_t_payment_plan.html#af1c7a24817b3367f2c76c9867effd557">OTPaymentPlan</a>, <a class="el" href="class_o_t_payment.html#ad25b2fa9f167cd044c0cc612ec9468fe">OTPayment</a>, <a class="el" href="class_o_t_cron_item.html#a6b7eec23353a8ed49ee40a742c391aa3">OTCronItem</a>, <a class="el" href="class_o_t_item.html#a372f9045cf80e7b35b59a808d0bfa8ee">OTItem</a>, <a class="el" href="class_o_t_trade.html#ab62bbaf94b2df5b01c52d988e023ae8b">OTTrade</a>, <a class="el" href="class_o_t_subcredential.html#af4bfc9b0cc6f40608ae7317ff51da8cf">OTSubcredential</a>, <a class="el" href="class_o_t_cron.html#a004071b22676a0419f1b6de519f00b78">OTCron</a>, <a class="el" href="class_o_t_offer.html#aaa64f53ea2b3d1a54f2aa97fe9e09240">OTOffer</a>, <a class="el" href="class_o_t_market.html#a3085a94412fee20ffd116dbfdddf2ecc">OTMarket</a>, <a class="el" href="class_o_t_token.html#a1f672677602d84c0b435eeb960bd6107">OTToken</a>, <a class="el" href="class_o_t_masterkey.html#afe78c6aaad5f60d5ea30abfdabd7672d">OTMasterkey</a>, <a class="el" href="class_o_t_purse.html#acb88fe42551654113b9d142db4cb4a9a">OTPurse</a>, <a class="el" href="class_o_t_subkey.html#a1b3ed4c3d8c889dd22941016279120a2">OTSubkey</a>, <a class="el" href="class_o_t_scriptable.html#a2fe2dd55c1bb910e895c05a6924d08f4">OTScriptable</a>, <a class="el" href="class_o_t_trackable.html#ad980c2ad5e97ff6f536dc296a3572e8f">OTTrackable</a>, <a class="el" href="class_o_t_basket.html#a390336b228d5e75b331295a43ead2870">OTBasket</a>, <a class="el" href="class_o_t_asset_contract.html#a4e2ef185332f79a3976b4bdface9ac5a">OTAssetContract</a>, <a class="el" href="class_o_t_account.html#a63548a6300675ad32978649a7c98e50c">OTAccount</a>, <a class="el" href="class_o_t_ledger.html#aa46d52115b1ace7f7d6e752a99aaa186">OTLedger</a>, <a class="el" href="class_o_t_signed_file.html#a5d4666c31fc534007a1081dc0e99ac63">OTSignedFile</a>, <a class="el" href="class_o_t_instrument.html#a7c81b5fa331d2020d41b6da686a0033a">OTInstrument</a>, <a class="el" href="class_o_t_message.html#a8defa10c6068958c353ff5bc84f22ab8">OTMessage</a>, <a class="el" href="class_o_t_mint.html#ae9abf173af2018f8ef00ea7602da0756">OTMint</a>, <a class="el" href="class_o_t_server_contract.html#a099df16faced5b3fbbde2c1ae6195d81">OTServerContract</a>, and <a class="el" href="class_o_t_cheque.html#a8e1ff8823e7def4ed309c22519125b29">OTCheque</a>.</p>

<p>Definition at line <a class="el" href="_o_t_contract_8cpp_source.html#l02432">2432</a> of file <a class="el" href="_o_t_contract_8cpp_source.html">OTContract.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strNodeName(xml-&gt;getNodeName());

    <span class="keywordflow">if</span> (strNodeName.Compare(<span class="stringliteral">&quot;entity&quot;</span>))
    {
        <a class="code" href="class_o_t_contract.html#a2daed7bf314bceeb5773493b5717c0dd">m_strEntityShortName</a> = xml-&gt;getAttributeValue(<span class="stringliteral">&quot;shortname&quot;</span>);
        <span class="keywordflow">if</span> (!<a class="code" href="class_o_t_contract.html#af86a3a124ae977b30bfd3f5cd14d1f9f">m_strName</a>.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>()) <span class="comment">// only set it if it&#39;s not already set, since the wallet may have already had a user label set.</span>
            <a class="code" href="class_o_t_contract.html#af86a3a124ae977b30bfd3f5cd14d1f9f">m_strName</a>        = <a class="code" href="class_o_t_contract.html#a2daed7bf314bceeb5773493b5717c0dd">m_strEntityShortName</a>;    <span class="comment">// m_strName may later be changed again in OTAssetContract::ProcessXMLNode</span>
        <span class="comment">// ----------------------------------------</span>
        <a class="code" href="class_o_t_contract.html#a0c2d1fa6f921902b84babbb702fc3a12">m_strEntityLongName</a>  = xml-&gt;getAttributeValue(<span class="stringliteral">&quot;longname&quot;</span>);
        <a class="code" href="class_o_t_contract.html#ab9c40bb65fb640c072fe4728ee6ad48d">m_strEntityEmail</a>     = xml-&gt;getAttributeValue(<span class="stringliteral">&quot;email&quot;</span>);

        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(1, <span class="stringliteral">&quot;Loaded Entity, shortname: %s\nLongname: %s, email: %s\n----------\n&quot;</span>,
                <a class="code" href="class_o_t_contract.html#a2daed7bf314bceeb5773493b5717c0dd">m_strEntityShortName</a>.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(), <a class="code" href="class_o_t_contract.html#a0c2d1fa6f921902b84babbb702fc3a12">m_strEntityLongName</a>.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(), <a class="code" href="class_o_t_contract.html#ab9c40bb65fb640c072fe4728ee6ad48d">m_strEntityEmail</a>.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());

        <span class="keywordflow">return</span> 1;
    }
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strNodeName.Compare(<span class="stringliteral">&quot;condition&quot;</span>))
    {
        <span class="comment">// todo security: potentially start ascii-encoding these.</span>
        <span class="comment">// (Are they still &quot;human readable&quot; if you can easily decode them?)</span>
        <span class="comment">//</span>
        <a class="code" href="class_o_t_string.html">OTString</a> strConditionName;
        <a class="code" href="class_o_t_string.html">OTString</a> strConditionValue;

        strConditionName  = xml-&gt;getAttributeValue(<span class="stringliteral">&quot;name&quot;</span>);
        <span class="comment">// ------------------</span>
        <span class="keywordflow">if</span> (<span class="keyword">false</span> == <a class="code" href="class_o_t_contract.html#a219a1ee572cecb9b6510c9869d8c4a64">SkipToTextField</a>(xml))
        {
            <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;OTContract::ProcessXMLNode: Failure: Unable to find expected text field for xml node named: %s\n&quot;</span>,
                          xml-&gt;getNodeName());
            <span class="keywordflow">return</span> (-1); <span class="comment">// error condition</span>
        }
        <span class="comment">// ------------------</span>
        <span class="keywordflow">if</span> (EXN_TEXT == xml-&gt;getNodeType())
        {
            strConditionValue = xml-&gt;getNodeData();
        }
        <span class="keywordflow">else</span>
        {
            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;Error in OTContract::ProcessXMLNode: Condition without value: %s\n&quot;</span>,
                    strConditionName.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
            <span class="keywordflow">return</span> (-1); <span class="comment">// error condition</span>
        }
        <span class="comment">// ------------------</span>
        <span class="comment">// Add the conditions to a list in memory on this object.</span>
        <span class="comment">//</span>
        <a class="code" href="class_o_t_contract.html#aa482844cba05a92d69eb0739d5deb862">m_mapConditions</a>.insert(std::pair&lt;std::string, std::string&gt;(strConditionName.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(), strConditionValue.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>()));
        <span class="comment">// ------------------</span>
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(1, <span class="stringliteral">&quot;---- Loaded condition \&quot;%s\&quot;\n&quot;</span>, strConditionName.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
<span class="comment">//      OTLog::vOutput(1, &quot;Loading condition \&quot;%s\&quot;: %s----------(END DATA)----------\n&quot;, strConditionName.Get(),</span>
<span class="comment">//              strConditionValue.Get());</span>

        <span class="keywordflow">return</span> 1;
    }
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strNodeName.Compare(<span class="stringliteral">&quot;signer&quot;</span>))
    {
        <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a>     strSignerNymID    = xml-&gt;getAttributeValue(<span class="stringliteral">&quot;nymID&quot;</span>);
        <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a>     strHasCredentials = xml-&gt;getAttributeValue(<span class="stringliteral">&quot;hasCredentials&quot;</span>);
        <span class="keyword">const</span> <a class="code" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> ascAltLocation    = xml-&gt;getAttributeValue(<span class="stringliteral">&quot;altLocation&quot;</span>);
              <a class="code" href="class_o_t_string.html">OTString</a>     strAltLocation, strSignerSource;
        <span class="comment">// ----------------------------------</span>
        <span class="keywordflow">if</span> (ascAltLocation.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>())
            ascAltLocation.<a class="code" href="class_o_t_a_s_c_i_i_armor.html#ab39b6cae69c14149716e5ce7a6f0bb0f">GetString</a>(strAltLocation, <span class="keyword">false</span>); <span class="comment">//bLineBreaks=true by default.</span>
        <span class="comment">// ----------------------------------</span>
              <span class="keywordtype">bool</span>         bHasCredentials   = strHasCredentials.<a class="code" href="class_o_t_string.html#a03401b39fb66d63696342c4f61ea8bf5">Compare</a>(<span class="stringliteral">&quot;true&quot;</span>);
        <span class="keyword">const</span> <span class="keywordtype">bool</span>         bHasAltLocation   = strAltLocation.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>();
        <span class="comment">// -----------------------------------------------------</span>
        <span class="keywordflow">if</span> (<span class="keyword">false</span> == strSignerNymID.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>())
        {
            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;Error in %s: &quot;</span>
                          <span class="stringliteral">&quot;Expected nymID attribute on signer element.\n&quot;</span>,
                          __FUNCTION__);
            <span class="keywordflow">return</span> (-1); <span class="comment">// error condition</span>
        }
        <a class="code" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> ascArmor;   <span class="comment">// For credential list.</span>
        <a class="code" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> ascArmor2;  <span class="comment">// For credentials.</span>
        <span class="comment">// ----------------------------------</span>
        <span class="keyword">const</span> <span class="keywordtype">char</span> * pElementExpected = <span class="stringliteral">&quot;nymIDSource&quot;</span>;
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(1, <span class="stringliteral">&quot;%s: Loading %s...\n&quot;</span>, __FUNCTION__, pElementExpected);
        <span class="keywordflow">if</span> (<span class="keyword">false</span> == <a class="code" href="class_o_t_contract.html#ac374831c4a1fad9d016d39d640a285ac">OTContract::LoadEncodedTextFieldByName</a>(xml, strSignerSource, pElementExpected))
        {
            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;Error in %s line %d: failed loading expected %s field:\n\n%s\n\n\n&quot;</span>,
                          __FILE__, __LINE__, pElementExpected, <a class="code" href="class_o_t_contract.html#a087fc09cfa4b2fd9076088360a5e5039">m_xmlUnsigned</a>.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
            <span class="keywordflow">return</span> (-1); <span class="comment">// error condition</span>
        }
        <span class="comment">// TODO: hash the source right here and compare it to the NymID, just to be safe.</span>
        <span class="comment">// ----------------------------------</span>
        <span class="keywordflow">if</span> (<span class="keyword">false</span> == bHasCredentials)
        {
            <span class="comment">// If there are no credentials provided (which is proper) then we should</span>
            <span class="comment">// just download them from the source.</span>
            <span class="comment">// ...Unless it&#39;s one of those where you can&#39;t discover such things from the source,</span>
            <span class="comment">// in which case an alternate location must be provided.</span>
            <span class="comment">//</span>
            <span class="comment">// ----------------------------------</span>
            <span class="keywordflow">if</span> (bHasAltLocation)
            {
                <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: WARNING: No credentials provided. An alternate location is &quot;</span>
                              <span class="stringliteral">&quot;listed, but that&#39;s not yet supported in the code.\nLocation: %s\n&quot;</span>,
                              __FUNCTION__, strAltLocation.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());

                <span class="comment">// A signer ideally just has a NymID and source.</span>
                <span class="comment">// Then we can directly just download the credentials from the source.</span>
                <span class="comment">// But let&#39;s say the source doesn&#39;t include download info (like if it contains DN info.)</span>
                <span class="comment">// We can have this optional attribute &quot;altLocation&quot; for the alternate download location.</span>
                <span class="comment">// We can also optionally allow people to just directly put the credentials inside the</span>
                <span class="comment">// contract (credentialList, and credentials). That&#39;s why hasCredentials can be true or false.</span>
                <span class="comment">// Ideally, people will not do that. Instead, we can download them from the source, or from</span>
                <span class="comment">// the alternate location, if the source cannot supply. But worst case, they can directly embed</span>
                <span class="comment">// the credentials, though it&#39;s not best practice for a real contract, it can be useful for</span>
                <span class="comment">// testing.</span>
                <span class="comment">//</span>
                <span class="comment">// If we eventually add the download code here, put the credential list into ascArmor,</span>
                <span class="comment">// and the credentials into ascArmor2.</span>
            }
            <span class="comment">// ----------------------------------</span>
            <span class="keywordflow">else</span><span class="comment">// There&#39;s no alternate location, and no credentials provided,</span>
            {   <span class="comment">// Therefore we be must expected to download them based on the source</span>
                <span class="comment">// string, and if we can&#39;t, then we&#39;ve failed to load.</span>
                <span class="comment">//</span>
                <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: WARNING: Alternate location not listed, and no credentials provided, so we need to download them from the source--but that&#39;s not yet supported in the code.\nNymID Source String: %s\n&quot;</span>,
                              __FUNCTION__, strSignerSource.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
                <span class="comment">//</span>
                <span class="comment">// If we eventually add the download code here, put the credential list into ascArmor,</span>
                <span class="comment">// and the credentials into ascArmor2.</span>
            }
            <span class="keywordflow">return</span> (-1); <span class="comment">// for now, since this block is incomplete.</span>
        }
        <span class="comment">// ----------------------------------</span>
        <span class="keywordflow">else</span> <span class="comment">// (bHasCredentials)</span>
        {
            <span class="comment">// -----------------------------------------------------</span>
            pElementExpected = <span class="stringliteral">&quot;credentialList&quot;</span>;

            <span class="keywordflow">if</span> (<span class="keyword">false</span> == <a class="code" href="class_o_t_contract.html#ac374831c4a1fad9d016d39d640a285ac">OTContract::LoadEncodedTextFieldByName</a>(xml, ascArmor, pElementExpected))
            {
                <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;Error in %s: &quot;</span>
                              <span class="stringliteral">&quot;Expected %s element with text field.\n&quot;</span>,
                              __FUNCTION__, pElementExpected);
                <span class="keywordflow">return</span> (-1); <span class="comment">// error condition</span>
            }
            <span class="comment">// -----------------------------------------------------</span>
            pElementExpected = <span class="stringliteral">&quot;credentials&quot;</span>;

            <span class="keywordflow">if</span> (<span class="keyword">false</span> == <a class="code" href="class_o_t_contract.html#ac374831c4a1fad9d016d39d640a285ac">OTContract::LoadEncodedTextFieldByName</a>(xml, ascArmor2, pElementExpected))
            {
                <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;Error in %s: &quot;</span>
                              <span class="stringliteral">&quot;Expected %s element with text field.\n&quot;</span>,
                              __FUNCTION__, pElementExpected);
                <span class="keywordflow">return</span> (-1); <span class="comment">// error condition</span>
            }
        }
        <span class="comment">// -----------------------------------------------------</span>
        bHasCredentials = (ascArmor.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>() &amp;&amp; ascArmor2.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>());

        <span class="comment">// bHasCredentials might have gotten set to true in the block above the above block,</span>
        <span class="comment">// after downloading, checking alternate location, etc. Otherwise, in the above block,</span>
        <span class="comment">// it was loaded from the contract itself.</span>
        <span class="keywordflow">if</span> (bHasCredentials)
        {
            <span class="comment">// -------------------------------------------------</span>
            <span class="comment">// credentialList</span>
            <span class="comment">//</span>
            <a class="code" href="class_o_t_string.html">OTString</a> strCredentialList;
            ascArmor.<a class="code" href="class_o_t_a_s_c_i_i_armor.html#ab39b6cae69c14149716e5ce7a6f0bb0f">GetString</a>(strCredentialList);

            <span class="keywordflow">if</span> (strCredentialList.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>())
            {
                <a class="code" href="class_o_t_d_b_1_1_storable.html">OTDB::Storable</a>  * pStorable = <a class="code" href="namespace_o_t_d_b.html#a3c1cc3076ede1a1b6d78d1fea7de8cea">OTDB::DecodeObject</a>(<a class="code" href="namespace_o_t_d_b.html#abce432e500285dde333e6f76f6fbde82acc03e85e0f615881a2abe9ca12628330">OTDB::STORED_OBJ_STRING_MAP</a>, ascArmor2.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
                <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTDB::Storable&gt;</a> theStorableAngel(pStorable); <span class="comment">// It will definitely be cleaned up.</span>
                <a class="code" href="class_o_t_d_b_1_1_string_map.html">OTDB::StringMap</a> * pMap = (NULL == pStorable) ? NULL : dynamic_cast&lt;OTDB::StringMap *&gt;(pStorable);
                <span class="comment">// -------------------------------------------------</span>
                <span class="keywordflow">if</span> (NULL == pMap)
                    <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Failed decoding StringMap object.\n&quot;</span>, __FUNCTION__);
                <span class="keywordflow">else</span> <span class="comment">// IF the list saved, then we save the credentials themselves...</span>
                {
                    <a class="code" href="_o_t_string_8hpp.html#a7ec7839682b097a5c5b5c5125046c82b">mapOfStrings</a> &amp; theMap = pMap-&gt;<a class="code" href="class_o_t_d_b_1_1_string_map.html#a460f2e551430c65fef4130576985a0ce">the_map</a>;
                    <span class="comment">// ----------------------------------------</span>
                    <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pNym = <span class="keyword">new</span> <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a>;
                    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pNym);
                    <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTPseudonym&gt;</a> theNymAngel(pNym); <span class="comment">// pNym will be automatically cleaned up.</span>
                    pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#a4b5f98378bb2ff1c48c5410f7283aff6">SetIdentifier</a>(strSignerNymID);

                    <span class="keywordflow">if</span> (<span class="keyword">false</span> == pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#a7992e8fbf785eeb2d5158cdf966c7a1b">LoadFromString</a>(strCredentialList, &amp;theMap))
                    {
                        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Failure loading nym %s &quot;</span>
                                      <span class="stringliteral">&quot;from credential string.\n&quot;</span>,
                                      __FUNCTION__, strSignerNymID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
                    }
                    <span class="comment">// Now that the Nym has been loaded up from the two strings,</span>
                    <span class="comment">// including the list of credential IDs, and the map containing the</span>
                    <span class="comment">// credentials themselves, let&#39;s try to Verify the pseudonym. If we</span>
                    <span class="comment">// verify, then we&#39;re safe to add the Nym to the contract.</span>
                    <span class="comment">//</span>
                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">false</span> == pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#aae8a707c7799efb6944d485be31a7c3e">VerifyPseudonym</a>())
                    {
                        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Loaded nym %s &quot;</span>
                                      <span class="stringliteral">&quot;from credentials, but then it failed verifying.\n&quot;</span>,
                                      __FUNCTION__, strSignerNymID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
                    }
                    <span class="keywordflow">else</span><span class="comment">// Okay, we loaded the Nym up from the credentials in the contract, AND</span>
                    {   <span class="comment">// verified the Nym (including the credentials.)</span>
                        <span class="comment">// So let&#39;s add it to the contract...</span>
                        <span class="comment">//</span>
                        <span class="comment">// -------------------------------------------------------------</span>
                        theNymAngel.SetCleanupTargetPointer(NULL); <span class="comment">// so pNym won&#39;t be cleaned up.</span>
                        <a class="code" href="class_o_t_contract.html#adaef99b0687646a298d599a3d324a356">m_mapNyms</a>[strNodeName.Get() <span class="comment">/*&quot;signer&quot;*/</span>] = pNym; <span class="comment">// Add pNym to the contract&#39;s internal list of nyms.</span>

                        <span class="keywordflow">return</span> 1; <span class="comment">// &lt;==== Success!</span>
                    }
                }
            } <span class="comment">// credential list exists, after base64-decoding.</span>
            <span class="comment">// ---------------------------------------------------</span>
        } <span class="comment">// Has Credentials.</span>

        <span class="keywordflow">return</span> (-1);
    }
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strNodeName.Compare(<span class="stringliteral">&quot;key&quot;</span>))
    {
        <a class="code" href="class_o_t_string.html">OTString</a> strKeyName;
        <a class="code" href="class_o_t_string.html">OTString</a> strKeyValue;

        strKeyName  = xml-&gt;getAttributeValue(<span class="stringliteral">&quot;name&quot;</span>);
        <span class="comment">// ------------------</span>
        <span class="keywordflow">if</span> (<span class="keyword">false</span> == <a class="code" href="class_o_t_contract.html#a219a1ee572cecb9b6510c9869d8c4a64">SkipToTextField</a>(xml))
        {
            <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;OTContract::ProcessXMLNode: Failure: Unable to find expected text &quot;</span>
                           <span class="stringliteral">&quot;field for xml node named: %s\n&quot;</span>, xml-&gt;getNodeName());
            <span class="keywordflow">return</span> (-1); <span class="comment">// error condition</span>
        }
        <span class="comment">// ------------------</span>
        <span class="keywordflow">if</span> (EXN_TEXT == xml-&gt;getNodeType())
        {
            strKeyValue = xml-&gt;getNodeData();
        }
        <span class="keywordflow">else</span>
        {
            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;Error in OTContract::ProcessXMLNode: Key without value: %s\n&quot;</span>,
                    strKeyName.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
            <span class="keywordflow">return</span> (-1); <span class="comment">// error condition</span>
        }
        <span class="comment">// Create a new nym for this public key (or x509 cert, it works either way)</span>
        <span class="comment">// and add it to the contract&#39;s internal list of nyms.</span>
        <span class="comment">//</span>
        <span class="comment">// Later on, if someone needs to get the Public Key for this contract and</span>
        <span class="comment">// use it to verify the signature on the contract, or to verify a message</span>
        <span class="comment">// from the server, the contract can iterate the list of Nyms and get</span>
        <span class="comment">// the public contract key based on a standard name such as the &quot;contract&quot; key.</span>
        <span class="comment">// (Versus the &quot;server&quot; key or the &quot;certification&quot; key, etc.</span>

        <span class="keywordflow">if</span> (!<a class="code" href="class_o_t_contract.html#a765d885635d69d3ea1fe994fbd200862">InsertNym</a>(strKeyName, strKeyValue))
            <a class="code" href="class_o_t_log.html#a5acd90ac91c2618f395b0ff37ad4f8ee">OTLog::Error</a>(<span class="stringliteral">&quot;Error performing OTContract::InsertNym.\n&quot;</span>);

        <span class="keywordflow">return</span> 1;
    }

    <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a15e423ca0d650858a23e54f8285feae1"></a><!-- doxytag: member="OTContract::Release" ref="a15e423ca0d650858a23e54f8285feae1" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_contract.html#a15e423ca0d650858a23e54f8285feae1">OTContract::Release</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reimplemented in <a class="el" href="class_o_t_transaction.html#a4f9c8be70e01dfcd7bedbac7d6af887b">OTTransaction</a>, <a class="el" href="class_o_t_transaction_type.html#aeec55f5abb43646745a532bf10aece24">OTTransactionType</a>, <a class="el" href="class_o_t_smart_contract.html#a335f903820d3128716c7f7b93200b5ac">OTSmartContract</a>, <a class="el" href="class_o_t_agreement.html#aad6f21095f2ea95a1ced567ffc17d2eb">OTAgreement</a>, <a class="el" href="class_o_t_payment_plan.html#a231d9ec26ad3f267bf68cbc5f51c62ac">OTPaymentPlan</a>, <a class="el" href="class_o_t_item.html#a5d9f9493c21479cad6bba7641f03f489">OTItem</a>, <a class="el" href="class_o_t_scriptable.html#a92785192590f2e039f46d16bcd1934d3">OTScriptable</a>, <a class="el" href="class_o_t_payment.html#a7cf95857505d6e4f10c84a84b33255a8">OTPayment</a>, <a class="el" href="class_o_t_cron_item.html#a11e9851acefc9162bb5f107a1952ffb7">OTCronItem</a>, <a class="el" href="class_o_t_ledger.html#a7bc5480937407cd3fe47d643b015e464">OTLedger</a>, <a class="el" href="class_o_t_trade.html#a677d2b33af8117fb681b52e20a4baaff">OTTrade</a>, <a class="el" href="class_o_t_subcredential.html#abe4ea0bc4cc80f06c12db078e17d6394">OTSubcredential</a>, <a class="el" href="class_o_t_purse.html#afb52ebfc9c608146d5e4aefa25e4e163">OTPurse</a>, <a class="el" href="class_o_t_cron.html#a7ec2571d52ceaab093afe06f7746c08b">OTCron</a>, <a class="el" href="class_o_t_token.html#a973344e50b0b1e8cab012a3a1dc54a0d">OTToken</a>, <a class="el" href="class_o_t_key_credential.html#ae032b6a4ef28d42cb268b904d866585d">OTKeyCredential</a>, <a class="el" href="class_o_t_offer.html#aaaed3d93e2a4117f36e344a602f3c909">OTOffer</a>, <a class="el" href="class_o_t_market.html#a052638ef7aebad8f0eaaa148d7e1546f">OTMarket</a>, <a class="el" href="class_o_t_basket.html#ae297e219deae37bf47f72ccab8cff7b7">OTBasket</a>, <a class="el" href="class_o_t_mint.html#aa1f4dad6d7a917b23aea3fe66e4ecdb9">OTMint</a>, <a class="el" href="class_o_t_cheque.html#ae903c10cd8712d1478970fb955301996">OTCheque</a>, <a class="el" href="class_o_t_account.html#a42075c7af766cee85070a02e0521dd2e">OTAccount</a>, <a class="el" href="class_o_t_trackable.html#a71dcca204d36941c6e2f3f73af4a6c2b">OTTrackable</a>, <a class="el" href="class_o_t_signed_file.html#a88e574d11be6a56019cd6192c396a853">OTSignedFile</a>, and <a class="el" href="class_o_t_instrument.html#a4fdc0a70ec257ea7f8f58e7774932d60">OTInstrument</a>.</p>

<p>Definition at line <a class="el" href="_o_t_contract_8cpp_source.html#l00409">409</a> of file <a class="el" href="_o_t_contract_8cpp_source.html">OTContract.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_o_t_contract.html#a8946a25657b79aa496ee99580a490778">Release_Contract</a>();

    <span class="comment">// No call to ot_super::Release() here, since OTContract</span>
    <span class="comment">// is the base class.</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="a8946a25657b79aa496ee99580a490778"></a><!-- doxytag: member="OTContract::Release_Contract" ref="a8946a25657b79aa496ee99580a490778" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_contract.html#a8946a25657b79aa496ee99580a490778">OTContract::Release_Contract</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_contract_8cpp_source.html#l00381">381</a> of file <a class="el" href="_o_t_contract_8cpp_source.html">OTContract.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// !! Notice I don&#39;t release the m_strFilename here!!</span>
    <span class="comment">// Because in LoadContract, we want to release all the members, and then load up from the file.</span>
    <span class="comment">// So if I release the filename, now I can&#39;t load up from the file cause I just blanked it. DUh.</span>
    <span class="comment">//</span>
    <span class="comment">// m_strFilename.Release();</span>

    <a class="code" href="class_o_t_contract.html#adccde050f729b2d24e3c392592868c90">m_strSigHashType</a> = <a class="code" href="class_o_t_identifier.html#a1179b45355107bf4511249a823217c94">OTIdentifier::DefaultHashAlgorithm</a>;
    <a class="code" href="class_o_t_contract.html#a087fc09cfa4b2fd9076088360a5e5039">m_xmlUnsigned</a>.<a class="code" href="class_o_t_string.html#abef4b21b2170468705c58d64212d7257">Release</a>();
    <a class="code" href="class_o_t_contract.html#a90c53743214bc0f0025ad63c3ace7bf2">m_strRawFile</a>.<a class="code" href="class_o_t_string.html#abef4b21b2170468705c58d64212d7257">Release</a>();
    <span class="comment">// ------------------</span>
    <a class="code" href="class_o_t_contract.html#aae54340526fbd8eb8a18de27a4b97c83">ReleaseSignatures</a>();
    <span class="comment">// ------------------</span>
    <a class="code" href="class_o_t_contract.html#aa482844cba05a92d69eb0739d5deb862">m_mapConditions</a>.clear();
    <span class="comment">// ------------------</span>
    <span class="comment">// Go through the existing list of nyms at this point, and delete them all.</span>
    <span class="keywordflow">while</span> (!<a class="code" href="class_o_t_contract.html#adaef99b0687646a298d599a3d324a356">m_mapNyms</a>.empty())
    {
        <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pNym = <a class="code" href="class_o_t_contract.html#adaef99b0687646a298d599a3d324a356">m_mapNyms</a>.begin()-&gt;second;
        <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pNym);
        <span class="keyword">delete</span> pNym;
        pNym = NULL;
        <a class="code" href="class_o_t_contract.html#adaef99b0687646a298d599a3d324a356">m_mapNyms</a>.erase(<a class="code" href="class_o_t_contract.html#adaef99b0687646a298d599a3d324a356">m_mapNyms</a>.begin());
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="aae54340526fbd8eb8a18de27a4b97c83"></a><!-- doxytag: member="OTContract::ReleaseSignatures" ref="aae54340526fbd8eb8a18de27a4b97c83" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_contract.html#aae54340526fbd8eb8a18de27a4b97c83">OTContract::ReleaseSignatures</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_contract_8cpp_source.html#l01099">1099</a> of file <a class="el" href="_o_t_contract_8cpp_source.html">OTContract.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_o_t_signature.html">OTSignature</a> * pSig = NULL;

    <span class="keywordflow">while</span> (!<a class="code" href="class_o_t_contract.html#ae2a61cbef0e8827af6795280e4682b85">m_listSignatures</a>.empty())
    {
        pSig = <a class="code" href="class_o_t_contract.html#ae2a61cbef0e8827af6795280e4682b85">m_listSignatures</a>.front();
        <a class="code" href="class_o_t_contract.html#ae2a61cbef0e8827af6795280e4682b85">m_listSignatures</a>.pop_front();
        <span class="keyword">delete</span> pSig; pSig=NULL;
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a5725498be318ed6845ee72a0c921fda6"></a><!-- doxytag: member="OTContract::RewriteContract" ref="a5725498be318ed6845ee72a0c921fda6" args="(OTString &amp;strOutput) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_contract.html#a5725498be318ed6845ee72a0c921fda6">OTContract::RewriteContract</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strOutput</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_contract_8cpp_source.html#l01311">1311</a> of file <a class="el" href="_o_t_contract_8cpp_source.html">OTContract.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_o_t_string.html">OTString</a> strContents;
    this-&gt;<a class="code" href="class_o_t_contract.html#a1f63d4185ddc5c9c3ca78ec3f9c7947a">SaveContents</a>(strContents);
    <span class="comment">// ---------------------------------------------------------------</span>
    <span class="keywordflow">return</span> <a class="code" href="class_o_t_contract.html#a3e26797f2abea1407bc4779b4e2da03b">OTContract::AddBookendsAroundContent</a>(strOutput, strContents,
                                                <a class="code" href="class_o_t_contract.html#ac523dac7d72b72e54b1ebb5b3a3b21cc">m_strContractType</a>,
                                                <a class="code" href="class_o_t_contract.html#adccde050f729b2d24e3c392592868c90">m_strSigHashType</a>,
                                                <a class="code" href="class_o_t_contract.html#ae2a61cbef0e8827af6795280e4682b85">m_listSignatures</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a1f63d4185ddc5c9c3ca78ec3f9c7947a"></a><!-- doxytag: member="OTContract::SaveContents" ref="a1f63d4185ddc5c9c3ca78ec3f9c7947a" args="(std::ofstream &amp;ofs) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_contract.html#a1f63d4185ddc5c9c3ca78ec3f9c7947a">OTContract::SaveContents</a> </td>
          <td>(</td>
          <td class="paramtype">std::ofstream &amp;&#160;</td>
          <td class="paramname"><em>ofs</em></td><td>)</td>
          <td> const<code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_contract_8cpp_source.html#l01129">1129</a> of file <a class="el" href="_o_t_contract_8cpp_source.html">OTContract.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    ofs &lt;&lt; <a class="code" href="class_o_t_contract.html#a087fc09cfa4b2fd9076088360a5e5039">m_xmlUnsigned</a>.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();

    <span class="keywordflow">return</span> <span class="keyword">true</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aadb1c868da0ab793751d4c26608a320f"></a><!-- doxytag: member="OTContract::SaveContents" ref="aadb1c868da0ab793751d4c26608a320f" args="(OTString &amp;strContents) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_contract.html#a1f63d4185ddc5c9c3ca78ec3f9c7947a">OTContract::SaveContents</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strContents</em></td><td>)</td>
          <td> const<code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_contract_8cpp_source.html#l01138">1138</a> of file <a class="el" href="_o_t_contract_8cpp_source.html">OTContract.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    strContents.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<a class="code" href="class_o_t_contract.html#a087fc09cfa4b2fd9076088360a5e5039">m_xmlUnsigned</a>.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());

    <span class="keywordflow">return</span> <span class="keyword">true</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a363ae430d4fd9256ab8364dbafb95444"></a><!-- doxytag: member="OTContract::SaveContract" ref="a363ae430d4fd9256ab8364dbafb95444" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_contract.html#a363ae430d4fd9256ab8364dbafb95444">OTContract::SaveContract</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_contract_8cpp_source.html#l01148">1148</a> of file <a class="el" href="_o_t_contract_8cpp_source.html">OTContract.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_o_t_string.html">OTString</a> strTemp;
    <span class="keywordtype">bool</span> bSuccess = <a class="code" href="class_o_t_contract.html#a5725498be318ed6845ee72a0c921fda6">RewriteContract</a>(strTemp);

    <span class="keywordflow">if</span> (bSuccess)
    {
        <a class="code" href="class_o_t_contract.html#a90c53743214bc0f0025ad63c3ace7bf2">m_strRawFile</a>.<a class="code" href="class_o_t_string.html#aa5db620fe8e60c849585d741975db991">Set</a>(strTemp);

        <span class="comment">// RewriteContract() already does this.</span>
        <span class="comment">//</span>
<span class="comment">//      std::string str_Trim(strTemp.Get());</span>
<span class="comment">//      std::string str_Trim2 = OTString::trim(str_Trim);</span>
<span class="comment">//      m_strRawFile.Set(str_Trim2.c_str());</span>
    }

    <span class="keywordflow">return</span> bSuccess;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a185ae3318508aa9c03e2398a9f1a86a7"></a><!-- doxytag: member="OTContract::SaveContract" ref="a185ae3318508aa9c03e2398a9f1a86a7" args="(const char *szFoldername, const char *szFilename)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_contract.html#a363ae430d4fd9256ab8364dbafb95444">OTContract::SaveContract</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>szFoldername</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>szFilename</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_contract_8cpp_source.html#l01323">1323</a> of file <a class="el" href="_o_t_contract_8cpp_source.html">OTContract.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_o_t_assert_8hpp.html#a033b133f48e61f2b227c52ad2be0c882">OT_ASSERT_MSG</a>(NULL != szFilename, <span class="stringliteral">&quot;Null filename sent to OTContract::SaveContract\n&quot;</span>);
    <a class="code" href="_o_t_assert_8hpp.html#a033b133f48e61f2b227c52ad2be0c882">OT_ASSERT_MSG</a>(NULL != szFoldername, <span class="stringliteral">&quot;Null foldername sent to OTContract::SaveContract\n&quot;</span>);

    <a class="code" href="class_o_t_contract.html#ab1e11693a38a1673037b1f29c9d84010">m_strFoldername</a>.<a class="code" href="class_o_t_string.html#aa5db620fe8e60c849585d741975db991">Set</a>(szFoldername);
    <a class="code" href="class_o_t_contract.html#ab7ab1f1fe7ff7e52f2c126404a8f4f92">m_strFilename</a>.<a class="code" href="class_o_t_string.html#aa5db620fe8e60c849585d741975db991">Set</a>(szFilename);

    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(<a class="code" href="class_o_t_contract.html#ab1e11693a38a1673037b1f29c9d84010">m_strFoldername</a>.<a class="code" href="class_o_t_string.html#a640392dd17a786dab643dbfc7e5a8672">GetLength</a>() &gt; 2);
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(<a class="code" href="class_o_t_contract.html#ab7ab1f1fe7ff7e52f2c126404a8f4f92">m_strFilename</a>.<a class="code" href="class_o_t_string.html#a640392dd17a786dab643dbfc7e5a8672">GetLength</a>() &gt; 2);

    <span class="comment">// --------------------------------------------------------------------</span>

    <span class="keywordflow">if</span> (!<a class="code" href="class_o_t_contract.html#a90c53743214bc0f0025ad63c3ace7bf2">m_strRawFile</a>.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>())
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;OTContract::SaveContract: Error saving file (contract contents are empty): %s%s%s\n&quot;</span>,
                      szFoldername, <a class="code" href="class_o_t_log.html#a42d3c91ff84ecae0690e34efb4619a77">OTLog::PathSeparator</a>(), szFilename);
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// --------------------------------------------------------------------</span>

    <a class="code" href="class_o_t_string.html">OTString</a> strFinal;

    <a class="code" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> ascTemp(<a class="code" href="class_o_t_contract.html#a90c53743214bc0f0025ad63c3ace7bf2">m_strRawFile</a>);

    <span class="keywordflow">if</span> (<span class="keyword">false</span> == ascTemp.WriteArmoredString(strFinal, <a class="code" href="class_o_t_contract.html#ac523dac7d72b72e54b1ebb5b3a3b21cc">m_strContractType</a>.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>()))
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;OTContract::SaveContract: Error saving file (failed writing armored string): %s%s%s\n&quot;</span>,
                      szFoldername, <a class="code" href="class_o_t_log.html#a42d3c91ff84ecae0690e34efb4619a77">OTLog::PathSeparator</a>(), szFilename);
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// --------------------------------------------------------------------</span>
    <span class="keywordtype">bool</span> bSaved = <a class="code" href="namespace_o_t_d_b.html#a7ec0a905bba2c1c8ba5b1e873e12eab4">OTDB::StorePlainString</a>(strFinal.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(), szFoldername, szFilename);

    <span class="keywordflow">if</span> (!bSaved)
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;OTContract::SaveContract: Error saving file: %s%s%s\n&quot;</span>,
                      szFoldername, <a class="code" href="class_o_t_log.html#a42d3c91ff84ecae0690e34efb4619a77">OTLog::PathSeparator</a>(), szFilename);
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// --------------------------------------------------------------------</span>
    <span class="keywordflow">return</span> <span class="keyword">true</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a5fd00cded794a6f96ba80d8d4081d591"></a><!-- doxytag: member="OTContract::SaveContractRaw" ref="a5fd00cded794a6f96ba80d8d4081d591" args="(OTString &amp;strOutput) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_contract.html#a5fd00cded794a6f96ba80d8d4081d591">OTContract::SaveContractRaw</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strOutput</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_contract_8cpp_source.html#l01255">1255</a> of file <a class="el" href="_o_t_contract_8cpp_source.html">OTContract.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    strOutput.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;%s&quot;</span>, <a class="code" href="class_o_t_contract.html#a90c53743214bc0f0025ad63c3ace7bf2">m_strRawFile</a>.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());

    <span class="keywordflow">return</span> <span class="keyword">true</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="af16a41ce18a9e3408fc5c9ee18315a30"></a><!-- doxytag: member="OTContract::SaveContractWallet" ref="af16a41ce18a9e3408fc5c9ee18315a30" args="(std::ofstream &amp;ofs)=0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual bool <a class="el" href="class_o_t_contract.html#af16a41ce18a9e3408fc5c9ee18315a30">OTContract::SaveContractWallet</a> </td>
          <td>(</td>
          <td class="paramtype">std::ofstream &amp;&#160;</td>
          <td class="paramname"><em>ofs</em></td><td>)</td>
          <td><code> [pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Implemented in <a class="el" href="class_o_t_transaction.html#a23e270a9dfc3b85d48d64582814232e5">OTTransaction</a>, <a class="el" href="class_o_t_transaction_type.html#abd60f993ccc74387236943cd4209f72e">OTTransactionType</a>, <a class="el" href="class_o_t_smart_contract.html#aa39d672a40e0778c205ed308b86c6927">OTSmartContract</a>, <a class="el" href="class_o_t_agreement.html#a463dad42bf5d7cc342dd42c5989f6492">OTAgreement</a>, <a class="el" href="class_o_t_item.html#a5e7c7ddcd8add2a1d2bb90b8576346ba">OTItem</a>, <a class="el" href="class_o_t_payment_plan.html#ac05bb3d3f77b90edfa3259c182c57f2b">OTPaymentPlan</a>, <a class="el" href="class_o_t_token.html#a9774f03f56290413acff03b8ea428052">OTToken</a>, <a class="el" href="class_o_t_scriptable.html#af1433fd747d848bbab0029c06c07668a">OTScriptable</a>, <a class="el" href="class_o_t_payment.html#ab87d89965b8e68cd091c112fd7b2c3a5">OTPayment</a>, <a class="el" href="class_o_t_ledger.html#a5c595ed0f34346f50f5fa821005ec376">OTLedger</a>, <a class="el" href="class_o_t_trade.html#a635d7f83beaa3885856900727a457835">OTTrade</a>, <a class="el" href="class_o_t_subcredential.html#a8d54721ae197dbbf85275e7713dbe94f">OTSubcredential</a>, <a class="el" href="class_o_t_cron.html#aa40e13f9fa75869b77e57de7b88c21b9">OTCron</a>, <a class="el" href="class_o_t_purse.html#a12ff05c33385bec01a70fb8bacc1833f">OTPurse</a>, <a class="el" href="class_o_t_offer.html#ad165d20dd33ab3d827f61233ceb5f077">OTOffer</a>, <a class="el" href="class_o_t_market.html#adf9018b289268d0439d92f4176094392">OTMarket</a>, <a class="el" href="class_o_t_mint.html#a4921229ae34a353e83394c57705bf82e">OTMint</a>, <a class="el" href="class_o_t_account.html#a5dbacb0d5aedf326fedbbef405662dc3">OTAccount</a>, <a class="el" href="class_o_t_asset_contract.html#aa49fadfd22d7686fe398c78f62f6c285">OTAssetContract</a>, <a class="el" href="class_o_t_cheque.html#aeecffca22860a763c0843b7a051a1182">OTCheque</a>, <a class="el" href="class_o_t_basket.html#a846a2a117ef04930f08b03aec4cb87d7">OTBasket</a>, <a class="el" href="class_o_t_trackable.html#a85b7622124dd3d103cb50498cddac2b2">OTTrackable</a>, <a class="el" href="class_o_t_signed_file.html#a314655f7fe65968f99c62d2abf07902d">OTSignedFile</a>, <a class="el" href="class_o_t_instrument.html#a4d5f08d86edc07a603c300fd46ebfca5">OTInstrument</a>, <a class="el" href="class_o_t_server_contract.html#a970d5d158f764ece83c4a6cdcc4c182e">OTServerContract</a>, and <a class="el" href="class_o_t_message.html#ae8a6c75fdfb18a5d9d7114351403ee7c">OTMessage</a>.</p>

</div>
</div>
<a class="anchor" id="a3a96fe4485355ac3c9a3863fc283f33e"></a><!-- doxytag: member="OTContract::SaveContractWallet" ref="a3a96fe4485355ac3c9a3863fc283f33e" args="(OTString &amp;strContents) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_contract.html#af16a41ce18a9e3408fc5c9ee18315a30">OTContract::SaveContractWallet</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strContents</em></td><td>)</td>
          <td> const<code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reimplemented in <a class="el" href="class_o_t_account.html#ad8a025d531477078382405e568966687">OTAccount</a>, <a class="el" href="class_o_t_asset_contract.html#afb2be6f335cdd368a0925c9fa042e729">OTAssetContract</a>, and <a class="el" href="class_o_t_server_contract.html#a2a17f1aa4a89820fa7e95bcf8cdaaa4d">OTServerContract</a>.</p>

<p>Definition at line <a class="el" href="_o_t_contract_8cpp_source.html#l01121">1121</a> of file <a class="el" href="_o_t_contract_8cpp_source.html">OTContract.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// Subclasses may use this.</span>

    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a85e9cf12ccfb1bd307acc10ec6c2bd4f"></a><!-- doxytag: member="OTContract::SaveToContractFolder" ref="a85e9cf12ccfb1bd307acc10ec6c2bd4f" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_contract.html#a85e9cf12ccfb1bd307acc10ec6c2bd4f">OTContract::SaveToContractFolder</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_contract_8cpp_source.html#l00425">425</a> of file <a class="el" href="_o_t_contract_8cpp_source.html">OTContract.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_o_t_string.html">OTString</a> strFoldername(<a class="code" href="class_o_t_folders.html#ac8ac28307d688d0defee0fd7734be027">OTFolders::Contract</a>().Get()), strFilename;

    <a class="code" href="class_o_t_contract.html#acf77d2db6da3904aa8b03e7b87c02e4e">GetIdentifier</a>(strFilename);

    <span class="comment">// -------------------------------------</span>
    <span class="comment">// These are already set in SaveContract(), called below.</span>
<span class="comment">//  m_strFoldername = strFoldername;</span>
<span class="comment">//  m_strFilename   = strFilename;</span>

    <a class="code" href="class_o_t_log.html#a1f7549d776ee919dcb6517f611ded015">OTLog::Output</a>(2, <span class="stringliteral">&quot;OTContract::SaveToContractFolder: Saving asset contract to disk...\n&quot;</span>);

    <span class="keywordflow">return</span> <a class="code" href="class_o_t_contract.html#a363ae430d4fd9256ab8364dbafb95444">SaveContract</a>(strFoldername.Get(), strFilename.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
}
</pre></div>
</div>
</div>
<a class="anchor" id="a18b55003e207dff89912f7c895af45f6"></a><!-- doxytag: member="OTContract::SetIdentifier" ref="a18b55003e207dff89912f7c895af45f6" args="(const OTIdentifier &amp;theID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_contract.html#a18b55003e207dff89912f7c895af45f6">OTContract::SetIdentifier</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;&#160;</td>
          <td class="paramname"><em>theID</em></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_contract_8hpp_source.html#l00240">240</a> of file <a class="el" href="_o_t_contract_8hpp_source.html">OTContract.hpp</a>.</p>
<div class="fragment"><pre class="fragment">{ <a class="code" href="class_o_t_contract.html#ac975866d3511c41d935d2ec44c24c4cb">m_ID</a> = theID; }
</pre></div>
</div>
</div>
<a class="anchor" id="ae6ad4eed689a88335c8818d7762bbbcb"></a><!-- doxytag: member="OTContract::SetName" ref="ae6ad4eed689a88335c8818d7762bbbcb" args="(const OTString &amp;strName)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_contract.html#ae6ad4eed689a88335c8818d7762bbbcb">OTContract::SetName</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strName</em></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_contract_8hpp_source.html#l00304">304</a> of file <a class="el" href="_o_t_contract_8hpp_source.html">OTContract.hpp</a>.</p>
<div class="fragment"><pre class="fragment">{ <a class="code" href="class_o_t_contract.html#af86a3a124ae977b30bfd3f5cd14d1f9f">m_strName</a> = strName; }
</pre></div>
</div>
</div>
<a class="anchor" id="abd60037fe655ee8cae9a3ece5d1e2ea6"></a><!-- doxytag: member="OTContract::SignContract" ref="abd60037fe655ee8cae9a3ece5d1e2ea6" args="(const OTPseudonym &amp;theNym, OTPasswordData *pPWData=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_contract.html#abd60037fe655ee8cae9a3ece5d1e2ea6">OTContract::SignContract</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;&#160;</td>
          <td class="paramname"><em>theNym</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_password_data.html">OTPasswordData</a> *&#160;</td>
          <td class="paramname"><em>pPWData</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reimplemented in <a class="el" href="class_o_t_message.html#a0ed3dfe3a61124318b477ff5c4e5e041">OTMessage</a>.</p>

<p>Definition at line <a class="el" href="_o_t_contract_8cpp_source.html#l00609">609</a> of file <a class="el" href="_o_t_contract_8cpp_source.html">OTContract.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_o_t_signature.html">OTSignature</a> * pSig = <span class="keyword">new</span> <a class="code" href="class_o_t_signature.html">OTSignature</a>();
    <a class="code" href="_o_t_assert_8hpp.html#a033b133f48e61f2b227c52ad2be0c882">OT_ASSERT_MSG</a>(NULL != pSig, <span class="stringliteral">&quot;OTContract::SignContract: Error allocating memory for Signature.\n&quot;</span>);
    <span class="comment">// --------------------------------</span>
    <span class="keywordtype">bool</span> bSigned = this-&gt;<a class="code" href="class_o_t_contract.html#abd60037fe655ee8cae9a3ece5d1e2ea6">SignContract</a>(theNym, *pSig, pPWData);

    <span class="keywordflow">if</span> (bSigned)
        <a class="code" href="class_o_t_contract.html#ae2a61cbef0e8827af6795280e4682b85">m_listSignatures</a>.push_back(pSig);
    <span class="keywordflow">else</span>
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Failure while calling this-&gt;SignContract(theNym, *pSig, pPWData)\n&quot;</span>,
                      __FUNCTION__);
        <span class="keyword">delete</span> pSig; pSig = NULL;
    }
    <span class="comment">// --------------------------------</span>
    <span class="keywordflow">return</span> bSigned;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a756d93899816c752c69f66ee49d389a9"></a><!-- doxytag: member="OTContract::SignContract" ref="a756d93899816c752c69f66ee49d389a9" args="(const OTPseudonym &amp;theNym, OTSignature &amp;theSignature, OTPasswordData *pPWData=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_contract.html#abd60037fe655ee8cae9a3ece5d1e2ea6">OTContract::SignContract</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;&#160;</td>
          <td class="paramname"><em>theNym</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_signature.html">OTSignature</a> &amp;&#160;</td>
          <td class="paramname"><em>theSignature</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_password_data.html">OTPasswordData</a> *&#160;</td>
          <td class="paramname"><em>pPWData</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_contract_8cpp_source.html#l00655">655</a> of file <a class="el" href="_o_t_contract_8cpp_source.html">OTContract.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> this-&gt;<a class="code" href="class_o_t_contract.html#abd60037fe655ee8cae9a3ece5d1e2ea6">SignContract</a>(theNym.<a class="code" href="class_o_t_pseudonym.html#aca7ec90ca6e4511526dc49485f9f9a61">GetPrivateSignKey</a>(), theSignature, <a class="code" href="class_o_t_contract.html#adccde050f729b2d24e3c392592868c90">m_strSigHashType</a>, pPWData);
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac0aaf0524d63f5c0e66b9f72de717f0f"></a><!-- doxytag: member="OTContract::SignContract" ref="ac0aaf0524d63f5c0e66b9f72de717f0f" args="(const OTAsymmetricKey &amp;theKey, OTSignature &amp;theSignature, const OTString &amp;strHashType, OTPasswordData *pPWData=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_contract.html#abd60037fe655ee8cae9a3ece5d1e2ea6">OTContract::SignContract</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_asymmetric_key.html">OTAsymmetricKey</a> &amp;&#160;</td>
          <td class="paramname"><em>theKey</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_signature.html">OTSignature</a> &amp;&#160;</td>
          <td class="paramname"><em>theSignature</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strHashType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_password_data.html">OTPasswordData</a> *&#160;</td>
          <td class="paramname"><em>pPWData</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_contract_8cpp_source.html#l00738">738</a> of file <a class="el" href="_o_t_contract_8cpp_source.html">OTContract.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keyword">const</span> <span class="keywordtype">char</span> * szFunc = <span class="stringliteral">&quot;OTContract::SignContract&quot;</span>;
    <span class="comment">// -------------------------------------------------</span>
    <span class="comment">// We assume if there&#39;s any important metadata, it will already</span>
    <span class="comment">// be on the key, so we just copy it over to the signature.</span>
    <span class="comment">//</span>
    <span class="keywordflow">if</span> (NULL != theKey.<a class="code" href="class_o_t_asymmetric_key.html#a071e09c59ab0b1460debd3c092da0034">m_pMetadata</a>)
    {
        theSignature.<a class="code" href="class_o_t_signature.html#ab82c216636edf6583efa7e5344b3c6e0">m_metadata</a> = *(theKey.<a class="code" href="class_o_t_asymmetric_key.html#a071e09c59ab0b1460debd3c092da0034">m_pMetadata</a>);
    }
    <span class="comment">// -------------------------------------------------</span>
    <span class="comment">// Update the contents, (not always necessary, many contracts are read-only)</span>
    <span class="comment">// This is where we provide an overridable function for the child classes that</span>
    <span class="comment">// need to update their contents at this point.</span>
    <span class="comment">// But the OTContract version of this function is actually empty, since the</span>
    <span class="comment">// default behavior is that contract contents don&#39;t change.</span>
    <span class="comment">// (Accounts and Messages being two big exceptions.)</span>
    <span class="comment">//</span>
    <a class="code" href="class_o_t_contract.html#a78c28164555e2eb79d6b67698421638d">UpdateContents</a>();
    <span class="comment">// --------------------------------------------------------------------</span>
    <span class="keywordflow">if</span> (<span class="keyword">false</span> == <a class="code" href="class_o_t_crypto.html#af10d51149df4803f79b4b2fed829430b">OTCrypto::It</a>()-&gt;<a class="code" href="class_o_t_contract.html#abd60037fe655ee8cae9a3ece5d1e2ea6">SignContract</a>(<a class="code" href="class_o_t_contract.html#a087fc09cfa4b2fd9076088360a5e5039">m_xmlUnsigned</a>,
                                              theKey,
                                              theSignature,
                                              strHashType,
                                              pPWData))
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: OTCrypto::It()-&gt;SignContract returned false.\n&quot;</span>,
                      szFunc);
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// --------------------------------------------------------------------</span>
    <span class="keywordflow">return</span> <span class="keyword">true</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a34d1572bc7b0d54d37b58e40ed3dfa35"></a><!-- doxytag: member="OTContract::SignContract" ref="a34d1572bc7b0d54d37b58e40ed3dfa35" args="(const char *szFoldername, const char *szFilename, OTSignature &amp;theSignature, OTPasswordData *pPWData=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_contract.html#abd60037fe655ee8cae9a3ece5d1e2ea6">OTContract::SignContract</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>szFoldername</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>szFilename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_signature.html">OTSignature</a> &amp;&#160;</td>
          <td class="paramname"><em>theSignature</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_password_data.html">OTPasswordData</a> *&#160;</td>
          <td class="paramname"><em>pPWData</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_contract_8cpp_source.html#l00783">783</a> of file <a class="el" href="_o_t_contract_8cpp_source.html">OTContract.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != szFoldername);
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != szFilename);
    <span class="comment">// --------------------------------------------------------------------</span>
    <span class="keyword">const</span> <span class="keywordtype">char</span> * szFunc = <span class="stringliteral">&quot;OTContract::SignContract&quot;</span>;
    <span class="comment">// --------------------------------------------------------------------</span>
    <span class="keywordflow">if</span> (<span class="keyword">false</span> == <a class="code" href="namespace_o_t_d_b.html#a73e39a590dfb64f63065821c6bbcd4c6">OTDB::Exists</a>(szFoldername, szFilename))
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: File does not exist: %s%s%s\n&quot;</span>, szFunc,
                      szFoldername, <a class="code" href="class_o_t_log.html#a42d3c91ff84ecae0690e34efb4619a77">OTLog::PathSeparator</a>(), szFilename);
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// --------------------------------------------------------------------</span>
    <span class="keyword">const</span> std::string strCertFileContents(<a class="code" href="namespace_o_t_d_b.html#a921d6f538de00f4e4297c25cf679f00a">OTDB::QueryPlainString</a>(szFoldername, szFilename)); <span class="comment">// &lt;=== LOADING FROM DATA STORE.</span>

    <span class="keywordflow">if</span> (strCertFileContents.length() &lt; 2)
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error reading file: %s%s%s\n&quot;</span>, szFunc,
                      szFoldername, <a class="code" href="class_o_t_log.html#a42d3c91ff84ecae0690e34efb4619a77">OTLog::PathSeparator</a>(), szFilename);
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// --------------------------------------------------------------------</span>
    <a class="code" href="class_o_t_password_data.html">OTPasswordData</a> thePWData(<span class="stringliteral">&quot;(OTContract::SignContract is trying to read the private key...)&quot;</span>);
    <span class="keywordflow">if</span> (NULL == pPWData)
        pPWData = &amp;thePWData;
    <span class="comment">// --------------------------------------------------------------------</span>
    <span class="comment">// Update the contents, (not always necessary, many contracts are read-only)</span>
    <span class="comment">// This is where we provide an overridable function for the child classes that</span>
    <span class="comment">// need to update their contents at this point.</span>
    <span class="comment">// But the OTContract version of this function is actually empty, since the</span>
    <span class="comment">// default behavior is that contract contents don&#39;t change.</span>
    <span class="comment">// (Accounts and Messages being two big exceptions.)</span>
    <span class="comment">//</span>
    <a class="code" href="class_o_t_contract.html#a78c28164555e2eb79d6b67698421638d">UpdateContents</a>();
    <span class="comment">// --------------------------------------------------------------------</span>
    <span class="keywordflow">if</span> (<span class="keyword">false</span> == <a class="code" href="class_o_t_crypto.html#af10d51149df4803f79b4b2fed829430b">OTCrypto::It</a>()-&gt;<a class="code" href="class_o_t_contract.html#abd60037fe655ee8cae9a3ece5d1e2ea6">SignContract</a>(<a class="code" href="class_o_t_contract.html#a087fc09cfa4b2fd9076088360a5e5039">m_xmlUnsigned</a>,
                                              <a class="code" href="class_o_t_contract.html#adccde050f729b2d24e3c392592868c90">m_strSigHashType</a>,
                                              strCertFileContents,
                                              theSignature,
                                              pPWData))
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: OTCrypto::It()-&gt;SignContract returned false, using Cert file: %s%s%s\n&quot;</span>,
                      szFunc, szFoldername, <a class="code" href="class_o_t_log.html#a42d3c91ff84ecae0690e34efb4619a77">OTLog::PathSeparator</a>(), szFilename);
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// --------------------------------------------------------------------</span>
    <span class="keywordflow">return</span> <span class="keyword">true</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aae9a0891b14ee2e864a27669c4083075"></a><!-- doxytag: member="OTContract::SignContractAuthent" ref="aae9a0891b14ee2e864a27669c4083075" args="(const OTPseudonym &amp;theNym, OTPasswordData *pPWData=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_contract.html#aae9a0891b14ee2e864a27669c4083075">OTContract::SignContractAuthent</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;&#160;</td>
          <td class="paramname"><em>theNym</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_password_data.html">OTPasswordData</a> *&#160;</td>
          <td class="paramname"><em>pPWData</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_contract_8cpp_source.html#l00632">632</a> of file <a class="el" href="_o_t_contract_8cpp_source.html">OTContract.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_o_t_signature.html">OTSignature</a> * pSig = <span class="keyword">new</span> <a class="code" href="class_o_t_signature.html">OTSignature</a>();
    <a class="code" href="_o_t_assert_8hpp.html#a033b133f48e61f2b227c52ad2be0c882">OT_ASSERT_MSG</a>(NULL != pSig, <span class="stringliteral">&quot;OTContract::SignContractAuthent: Error allocating memory for Signature.\n&quot;</span>);
    <span class="comment">// --------------------------------</span>
    <span class="keywordtype">bool</span> bSigned = this-&gt;<a class="code" href="class_o_t_contract.html#aae9a0891b14ee2e864a27669c4083075">SignContractAuthent</a>(theNym, *pSig, pPWData);

    <span class="keywordflow">if</span> (bSigned)
        <a class="code" href="class_o_t_contract.html#ae2a61cbef0e8827af6795280e4682b85">m_listSignatures</a>.push_back(pSig);
    <span class="keywordflow">else</span>
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Failure while calling this-&gt;SignContractAuthent(theNym, *pSig, pPWData)\n&quot;</span>,
                      __FUNCTION__);
        <span class="keyword">delete</span> pSig; pSig = NULL;
    }
    <span class="comment">// --------------------------------</span>
    <span class="keywordflow">return</span> bSigned;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ace6d1ba6b5d9a651bae7e7f0b57f73a3"></a><!-- doxytag: member="OTContract::SignContractAuthent" ref="ace6d1ba6b5d9a651bae7e7f0b57f73a3" args="(const OTPseudonym &amp;theNym, OTSignature &amp;theSignature, OTPasswordData *pPWData=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_contract.html#aae9a0891b14ee2e864a27669c4083075">OTContract::SignContractAuthent</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;&#160;</td>
          <td class="paramname"><em>theNym</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_signature.html">OTSignature</a> &amp;&#160;</td>
          <td class="paramname"><em>theSignature</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_password_data.html">OTPasswordData</a> *&#160;</td>
          <td class="paramname"><em>pPWData</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_contract_8cpp_source.html#l00664">664</a> of file <a class="el" href="_o_t_contract_8cpp_source.html">OTContract.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> this-&gt;<a class="code" href="class_o_t_contract.html#abd60037fe655ee8cae9a3ece5d1e2ea6">SignContract</a>(theNym.<a class="code" href="class_o_t_pseudonym.html#a9c8f3ffd5794421fad974137e2067dd4">GetPrivateAuthKey</a>(), theSignature, <a class="code" href="class_o_t_contract.html#adccde050f729b2d24e3c392592868c90">m_strSigHashType</a>, pPWData);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a00af7c67155cdb461866f6e705fde011"></a><!-- doxytag: member="OTContract::SignFlatText" ref="a00af7c67155cdb461866f6e705fde011" args="(OTString &amp;strFlatText, const OTString &amp;strContractType, OTPseudonym &amp;theSigner, OTString &amp;strOutput)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_contract.html#a00af7c67155cdb461866f6e705fde011">OTContract::SignFlatText</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strFlatText</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strContractType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;&#160;</td>
          <td class="paramname"><em>theSigner</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strOutput</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_contract_8cpp_source.html#l01191">1191</a> of file <a class="el" href="_o_t_contract_8cpp_source.html">OTContract.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keyword">const</span> <span class="keywordtype">char</span> * szFunc = <span class="stringliteral">&quot;OTContract::SignFlatText&quot;</span>;
    <span class="comment">// ----------------------</span>
    <span class="comment">// Trim the input to remove any extraneous whitespace</span>
    <span class="comment">//</span>
    std::string str_Trim(strFlatText.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
    std::string str_Trim2 = <a class="code" href="class_o_t_string.html#afe7626d0687eab81200a1af1539faed9">OTString::trim</a>(str_Trim);

    strFlatText.<a class="code" href="class_o_t_string.html#aa5db620fe8e60c849585d741975db991">Set</a>(str_Trim2.c_str());
    <span class="comment">// ---------------------------------------------------------</span>
    <span class="keywordtype">char</span> cNewline = 0;
    <span class="keyword">const</span> uint32_t lLength = strFlatText.<a class="code" href="class_o_t_string.html#a640392dd17a786dab643dbfc7e5a8672">GetLength</a>();

    <span class="keywordflow">if</span> ((3 &gt; lLength) || !strFlatText.<a class="code" href="class_o_t_string.html#a0b183402da9a9ea6da94b3fcaa8740e8">At</a>(lLength - 1, cNewline))
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Invalid input: text is less than 3 bytes &quot;</span>
                      <span class="stringliteral">&quot;int64_t, or unable to read a byte from the end where &quot;</span>
                      <span class="stringliteral">&quot;a newline is meant to be.\n&quot;</span>, szFunc);
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// ----------------------</span>
    <span class="comment">// ADD a newline, if necessary.</span>
    <span class="comment">// (The -----BEGIN part needs to start on its OWN LINE...)</span>
    <span class="comment">//</span>
    <span class="comment">// If length is 10, then string goes from 0..9.</span>
    <span class="comment">// Null terminator will be at 10.</span>
    <span class="comment">// Therefore the final newline should be at 9.</span>
    <span class="comment">// Therefore if char_at_index[lLength-1] != &#39;\n&#39;</span>
    <span class="comment">// Concatenate one!</span>

    <a class="code" href="class_o_t_string.html">OTString</a> strInput;
    <span class="keywordflow">if</span> (<span class="charliteral">&#39;\n&#39;</span> == cNewline) <span class="comment">// It already has a newline</span>
        strInput = strFlatText;
    <span class="keywordflow">else</span>
        strInput.<a class="code" href="class_o_t_string.html#af1c861f21033a1d583b3cb12f952422e">Format</a>(<span class="stringliteral">&quot;%s\n&quot;</span>, strFlatText.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
    <span class="comment">// ----------------------</span>
    <a class="code" href="class_o_t_signature.html">OTSignature</a>      theSignature;
    <a class="code" href="class_o_t_password_data.html">OTPasswordData</a>   thePWData(<span class="stringliteral">&quot;Signing flat text (need private key)&quot;</span>);

    <span class="keywordflow">if</span> (<span class="keyword">false</span> == <a class="code" href="class_o_t_crypto.html#af10d51149df4803f79b4b2fed829430b">OTCrypto::It</a>()-&gt;<a class="code" href="class_o_t_contract.html#abd60037fe655ee8cae9a3ece5d1e2ea6">SignContract</a>(strInput,
                                              theSigner.<a class="code" href="class_o_t_pseudonym.html#aca7ec90ca6e4511526dc49485f9f9a61">GetPrivateSignKey</a>(),
                                              theSignature, <span class="comment">// the output</span>
                                              <a class="code" href="class_o_t_identifier.html#a1179b45355107bf4511249a823217c94">OTIdentifier::DefaultHashAlgorithm</a>,
                                              &amp;thePWData))
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: SignContract failed. Contents:\n\n%s\n\n\n&quot;</span>,
                      szFunc, strInput.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// -----------------------------------</span>
    <a class="code" href="_o_t_signature_8hpp.html#ad3ca272b3bd48f2d487b2d3668c4bae2">listOfSignatures</a> listSignatures;
    listSignatures.push_back(&amp;theSignature);
    <span class="comment">// ---------------------------------------------------------</span>
    <span class="keyword">const</span> <span class="keywordtype">bool</span> bBookends = <a class="code" href="class_o_t_contract.html#a3e26797f2abea1407bc4779b4e2da03b">OTContract::AddBookendsAroundContent</a>(strOutput, <span class="comment">// the output (other params are input.)</span>
                                                                strInput, strContractType,
                                                                OTIdentifier::DefaultHashAlgorithm,
                                                                listSignatures);
    <span class="comment">// ---------------------------------------------------------</span>
    <span class="keywordflow">return</span> bBookends;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a6809f5b245c2ba7fdd757abd7a6e6133"></a><!-- doxytag: member="OTContract::SignWithKey" ref="a6809f5b245c2ba7fdd757abd7a6e6133" args="(const OTAsymmetricKey &amp;theKey, OTPasswordData *pPWData=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_contract.html#a6809f5b245c2ba7fdd757abd7a6e6133">OTContract::SignWithKey</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_asymmetric_key.html">OTAsymmetricKey</a> &amp;&#160;</td>
          <td class="paramname"><em>theKey</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_password_data.html">OTPasswordData</a> *&#160;</td>
          <td class="paramname"><em>pPWData</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_contract_8cpp_source.html#l00680">680</a> of file <a class="el" href="_o_t_contract_8cpp_source.html">OTContract.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_o_t_signature.html">OTSignature</a> * pSig = <span class="keyword">new</span> <a class="code" href="class_o_t_signature.html">OTSignature</a>();
    <a class="code" href="_o_t_assert_8hpp.html#a033b133f48e61f2b227c52ad2be0c882">OT_ASSERT_MSG</a>(NULL != pSig, <span class="stringliteral">&quot;OTContract::SignWithKey: Error allocating memory for Signature.\n&quot;</span>);
    <span class="comment">// --------------------------------</span>
    <span class="keywordtype">bool</span> bSigned = this-&gt;<a class="code" href="class_o_t_contract.html#abd60037fe655ee8cae9a3ece5d1e2ea6">SignContract</a>(theKey, *pSig, <a class="code" href="class_o_t_contract.html#adccde050f729b2d24e3c392592868c90">m_strSigHashType</a>, pPWData);

    <span class="keywordflow">if</span> (bSigned)
        <a class="code" href="class_o_t_contract.html#ae2a61cbef0e8827af6795280e4682b85">m_listSignatures</a>.push_back(pSig);
    <span class="keywordflow">else</span>
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Failure while calling this-&gt;SignContract(theNym, *pSig).\n&quot;</span>,
                      __FUNCTION__);
        <span class="keyword">delete</span> pSig; pSig = NULL;
    }
    <span class="comment">// --------------------------------</span>
    <span class="keywordflow">return</span> bSigned;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a77ea430a1b66e3eceed36b773a40cb5f"></a><!-- doxytag: member="OTContract::SkipAfterLoadingField" ref="a77ea430a1b66e3eceed36b773a40cb5f" args="(irr::io::IrrXMLReader *&amp;xml)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_contract.html#a77ea430a1b66e3eceed36b773a40cb5f">OTContract::SkipAfterLoadingField</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespaceirr_1_1io.html#a1628edbb9d5d53f18c82d2a92b0ad27e">irr::io::IrrXMLReader</a> *&amp;&#160;</td>
          <td class="paramname"><em>xml</em></td><td>)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_contract_8cpp_source.html#l01892">1892</a> of file <a class="el" href="_o_t_contract_8cpp_source.html">OTContract.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_o_t_assert_8hpp.html#a033b133f48e61f2b227c52ad2be0c882">OT_ASSERT_MSG</a>(NULL != xml, <span class="stringliteral">&quot;OTContract::SkipAfterLoadingField -- assert: NULL != xml&quot;</span>);

    <span class="keyword">const</span> <span class="keywordtype">char</span> * szFunc = <span class="stringliteral">&quot;OTContract::SkipAfterLoadingField&quot;</span>;

    <span class="keywordflow">if</span> (EXN_ELEMENT_END != xml-&gt;getNodeType())  <span class="comment">// If we&#39;re not ALREADY on the ending element, then go there.</span>
    {
        <span class="comment">// move to the next node which SHOULD be the expected element_end.</span>
        <span class="comment">//</span>
        <span class="keywordflow">while</span>(xml-&gt;read())
        {
            <span class="keywordflow">if</span> (xml-&gt;getNodeType() == EXN_NONE)
            { <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;*** %s: EXN_NONE  (skipping)\n&quot;</span>, szFunc); <span class="keywordflow">continue</span>; }      <span class="comment">// SKIP</span>
            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (xml-&gt;getNodeType() == EXN_COMMENT)
            { <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;*** %s: EXN_COMMENT  (skipping)\n&quot;</span>, szFunc); <span class="keywordflow">continue</span>; }   <span class="comment">// SKIP</span>
            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (xml-&gt;getNodeType() == EXN_ELEMENT_END)
            { <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(5, <span class="stringliteral">&quot;*** %s: EXN_ELEMENT_END  (success)\n&quot;</span>, szFunc);  <span class="keywordflow">break</span>; }  <span class="comment">// Success...</span>
            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (xml-&gt;getNodeType() == EXN_CDATA)
            { <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;*** %s: EXN_CDATA  (Unexpected!)\n&quot;</span>, szFunc); <span class="keywordflow">return</span> <span class="keyword">false</span>; } <span class="comment">// Failure / Error</span>
            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (xml-&gt;getNodeType() == EXN_ELEMENT)
            { <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;*** %s: EXN_ELEMENT  (Unexpected!)\n&quot;</span>, szFunc); <span class="keywordflow">return</span> <span class="keyword">false</span>; }        <span class="comment">// Failure / Error</span>
            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (xml-&gt;getNodeType() == EXN_TEXT)
            { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;*** %s: EXN_TEXT  (Unexpected!)\n&quot;</span>, szFunc); <span class="keywordflow">return</span> <span class="keyword">false</span>; }       <span class="comment">// Failure / Error</span>
            <span class="keywordflow">else</span>
            { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;*** %s: SHOULD NEVER HAPPEN  (Unknown element type!)\n&quot;</span>, szFunc); <span class="keywordflow">return</span> <span class="keyword">false</span>; }  <span class="comment">// Failure / Error</span>
        }
    }
    <span class="comment">// ------------------</span>
    <span class="comment">// else ... (already on the ending element.)</span>
    <span class="comment">//</span>
    <span class="comment">// ------------------</span>

    <span class="keywordflow">return</span> <span class="keyword">true</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a6d67d87a183391e60f4aca8a3856fdb2"></a><!-- doxytag: member="OTContract::SkipToElement" ref="a6d67d87a183391e60f4aca8a3856fdb2" args="(irr::io::IrrXMLReader *&amp;xml)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_contract.html#a6d67d87a183391e60f4aca8a3856fdb2">OTContract::SkipToElement</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespaceirr_1_1io.html#a1628edbb9d5d53f18c82d2a92b0ad27e">irr::io::IrrXMLReader</a> *&amp;&#160;</td>
          <td class="paramname"><em>xml</em></td><td>)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_contract_8cpp_source.html#l01824">1824</a> of file <a class="el" href="_o_t_contract_8cpp_source.html">OTContract.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_o_t_assert_8hpp.html#a033b133f48e61f2b227c52ad2be0c882">OT_ASSERT_MSG</a>(NULL != xml, <span class="stringliteral">&quot;OTContract::SkipToElement -- assert: NULL != xml&quot;</span>);

    <span class="keyword">const</span> <span class="keywordtype">char</span> * szFunc = <span class="stringliteral">&quot;OTContract::SkipToElement&quot;</span>;
    <span class="comment">// ------------------</span>
    <span class="keywordflow">while</span>(xml-&gt;read() &amp;&amp; (xml-&gt;getNodeType() != EXN_ELEMENT))
    {
<span class="comment">//      OTLog::vOutput(0, &quot;%s: Looping to skip non-elements: currently on: %s \n&quot;, szFunc, xml-&gt;getNodeName());</span>

        <span class="keywordflow">if</span> (xml-&gt;getNodeType() == EXN_NONE)
        { <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;*** %s: EXN_NONE  (skipping)\n&quot;</span>, szFunc); <span class="keywordflow">continue</span>; }          <span class="comment">// SKIP</span>
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (xml-&gt;getNodeType() == EXN_COMMENT)
        { <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;*** %s: EXN_COMMENT  (skipping)\n&quot;</span>, szFunc); <span class="keywordflow">continue</span>; }           <span class="comment">// SKIP</span>
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (xml-&gt;getNodeType() == EXN_ELEMENT_END)
<span class="comment">//      { OTLog::Output(0, &quot;*** OTContract::SkipToElement: EXN_ELEMENT_END  (ERROR)\n&quot;);  return false; }</span>
        { <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(1, <span class="stringliteral">&quot;*** %s: EXN_ELEMENT_END  (skipping %s)\n&quot;</span>, szFunc, xml-&gt;getNodeName());  <span class="keywordflow">continue</span>; }
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (xml-&gt;getNodeType() == EXN_CDATA)
        { <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;*** %s: EXN_CDATA (ERROR -- unexpected CData)\n&quot;</span>, szFunc); <span class="keywordflow">return</span> <span class="keyword">false</span>; }
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (xml-&gt;getNodeType() == EXN_TEXT)
        { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;*** %s: EXN_TEXT\n&quot;</span>, szFunc); <span class="keywordflow">return</span> <span class="keyword">false</span>; }
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (xml-&gt;getNodeType() == EXN_ELEMENT)
        { <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;*** %s: EXN_ELEMENT\n&quot;</span>, szFunc); <span class="keywordflow">break</span>; }  <span class="comment">// (Should never happen due to while() second condition.) Still returns true.</span>
        <span class="keywordflow">else</span>
        { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;*** %s: SHOULD NEVER HAPPEN  (Unknown element type!)\n&quot;</span>, szFunc); <span class="keywordflow">return</span> <span class="keyword">false</span>; }  <span class="comment">// Failure / Error</span>
    }
    <span class="comment">// ------------------</span>

    <span class="keywordflow">return</span> <span class="keyword">true</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a219a1ee572cecb9b6510c9869d8c4a64"></a><!-- doxytag: member="OTContract::SkipToTextField" ref="a219a1ee572cecb9b6510c9869d8c4a64" args="(irr::io::IrrXMLReader *&amp;xml)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_contract.html#a219a1ee572cecb9b6510c9869d8c4a64">OTContract::SkipToTextField</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespaceirr_1_1io.html#a1628edbb9d5d53f18c82d2a92b0ad27e">irr::io::IrrXMLReader</a> *&amp;&#160;</td>
          <td class="paramname"><em>xml</em></td><td>)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_contract_8cpp_source.html#l01857">1857</a> of file <a class="el" href="_o_t_contract_8cpp_source.html">OTContract.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_o_t_assert_8hpp.html#a033b133f48e61f2b227c52ad2be0c882">OT_ASSERT_MSG</a>(NULL != xml, <span class="stringliteral">&quot;OTContract::SkipToTextField -- assert: NULL != xml&quot;</span>);
    <span class="comment">// ------------------</span>
    <span class="keyword">const</span> <span class="keywordtype">char</span> * szFunc = <span class="stringliteral">&quot;OTContract::SkipToTextField&quot;</span>;
    <span class="comment">// ------------------</span>
    <span class="keywordflow">while</span>(xml-&gt;read() &amp;&amp; (xml-&gt;getNodeType() != EXN_TEXT))
    {
        <span class="keywordflow">if</span> (xml-&gt;getNodeType() == EXN_NONE)
        { <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;*** %s: EXN_NONE  (skipping)\n&quot;</span>, szFunc); <span class="keywordflow">continue</span>; }          <span class="comment">// SKIP</span>
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (xml-&gt;getNodeType() == EXN_COMMENT)
        { <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;*** %s: EXN_COMMENT  (skipping)\n&quot;</span>, szFunc); <span class="keywordflow">continue</span>; }       <span class="comment">// SKIP</span>
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (xml-&gt;getNodeType() == EXN_ELEMENT_END)
<span class="comment">//      { OTLog::Output(0, &quot;*** OTContract::SkipToTextField: EXN_ELEMENT_END  (skipping)\n&quot;);  continue; }     // SKIP (debugging...)</span>
        { <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;*** %s: EXN_ELEMENT_END  (ERROR)\n&quot;</span>, szFunc);  <span class="keywordflow">return</span> <span class="keyword">false</span>; }
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (xml-&gt;getNodeType() == EXN_CDATA)
        { <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;*** %s: EXN_CDATA (ERROR -- unexpected CData)\n&quot;</span>, szFunc); <span class="keywordflow">return</span> <span class="keyword">false</span>; }
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (xml-&gt;getNodeType() == EXN_ELEMENT)
        { <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;*** %s: EXN_ELEMENT\n&quot;</span>, szFunc); <span class="keywordflow">return</span> <span class="keyword">false</span>; }
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (xml-&gt;getNodeType() == EXN_TEXT)
        { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;*** %s: EXN_TEXT\n&quot;</span>, szFunc); <span class="keywordflow">break</span>; } <span class="comment">// (Should never happen due to while() second condition.) Still returns true.</span>
        <span class="keywordflow">else</span>
        { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;*** %s: SHOULD NEVER HAPPEN  (Unknown element type!)\n&quot;</span>, szFunc); <span class="keywordflow">return</span> <span class="keyword">false</span>; }  <span class="comment">// Failure / Error</span>
    }
    <span class="comment">// ------------------</span>

    <span class="keywordflow">return</span> <span class="keyword">true</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a78c28164555e2eb79d6b67698421638d"></a><!-- doxytag: member="OTContract::UpdateContents" ref="a78c28164555e2eb79d6b67698421638d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_contract.html#a78c28164555e2eb79d6b67698421638d">OTContract::UpdateContents</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reimplemented in <a class="el" href="class_o_t_transaction.html#a903a5b5d56e7f2856a51e2cdee6d511d">OTTransaction</a>, <a class="el" href="class_o_t_smart_contract.html#a4804dc10ab81b2bde13fce0a3afb0765">OTSmartContract</a>, <a class="el" href="class_o_t_agreement.html#a6b6a960a3cf2ea5dace23b9107b829cf">OTAgreement</a>, <a class="el" href="class_o_t_payment_plan.html#a3b3c234f381f92f16d8ef1feaebb8a57">OTPaymentPlan</a>, <a class="el" href="class_o_t_scriptable.html#accb9d578e3b10cee62e6aba7c178cf62">OTScriptable</a>, <a class="el" href="class_o_t_item.html#ae12909b9f97f5b71b4ddeda5debdfa70">OTItem</a>, <a class="el" href="class_o_t_trade.html#ab72fd44769391a80946e0cd51c9bd194">OTTrade</a>, <a class="el" href="class_o_t_subcredential.html#a521cb73f76e31f50b496ba8963ef0ae2">OTSubcredential</a>, <a class="el" href="class_o_t_cron.html#a0eee508b9330b0dc0776c4a8cb9e2b9b">OTCron</a>, <a class="el" href="class_o_t_offer.html#aebbb817e2106827fac130da7b00e90dc">OTOffer</a>, <a class="el" href="class_o_t_market.html#a51c01eeeb4dfd00d941efae50af53384">OTMarket</a>, <a class="el" href="class_o_t_token.html#a2863bbe79da29265b1274ddabd187f44">OTToken</a>, <a class="el" href="class_o_t_mint.html#a9176df025fbd7ddfe5e2c76a7e9d2985">OTMint</a>, <a class="el" href="class_o_t_cheque.html#acd515195f24d57c4b6b145c5bf1d4650">OTCheque</a>, <a class="el" href="class_o_t_masterkey.html#aaf66878ba670fdcf7b4ac83103769e5e">OTMasterkey</a>, <a class="el" href="class_o_t_payment.html#a17c8cdcdc40ec8a56c7ccc268ea656a0">OTPayment</a>, <a class="el" href="class_o_t_basket.html#ab17b2f9d148d2aaef9fafc53b1dc8cd7">OTBasket</a>, <a class="el" href="class_o_t_subkey.html#a13dd1b4db4d947ae6b92eeebf3711626">OTSubkey</a>, <a class="el" href="class_o_t_trackable.html#ae708d31ab5dca7a4dff24b0534fec889">OTTrackable</a>, <a class="el" href="class_o_t_signed_file.html#acd0504151acc6631ca851c86a8da1011">OTSignedFile</a>, <a class="el" href="class_o_t_account.html#ae0e529a1640f9448e4b86e16582f139a">OTAccount</a>, <a class="el" href="class_o_t_ledger.html#a693eb8428f49e984f7705adb12a56fc6">OTLedger</a>, <a class="el" href="class_o_t_purse.html#ac68123e506c676e50fd07c93d6cc1b2d">OTPurse</a>, and <a class="el" href="class_o_t_message.html#ae8415b7db5b092c74b85686783b616c2">OTMessage</a>.</p>

<p>Definition at line <a class="el" href="_o_t_contract_8cpp_source.html#l01168">1168</a> of file <a class="el" href="_o_t_contract_8cpp_source.html">OTContract.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// Deliberately left blank.</span>
    <span class="comment">//</span>
    <span class="comment">// Some child classes may need to perform work here</span>
    <span class="comment">// (OTAccount and OTMessage, for example.)</span>
    <span class="comment">//</span>
    <span class="comment">// This function is called just prior to the signing of a contract.</span>

    <span class="comment">// Update: MOST child classes actually use this.</span>
    <span class="comment">// The server and asset contracts are not meant to ever change after</span>
    <span class="comment">// they are signed. However, many other contracts are meant to change</span>
    <span class="comment">// and be re-signed. (You cannot change something without signing it.)</span>
    <span class="comment">// (So most child classes override this method.)</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa707f03da51449ef0cd1a466cbc0f13c"></a><!-- doxytag: member="OTContract::VerifyContract" ref="aa707f03da51449ef0cd1a466cbc0f13c" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_contract.html#aa707f03da51449ef0cd1a466cbc0f13c">OTContract::VerifyContract</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reimplemented in <a class="el" href="class_o_t_subcredential.html#ab62e933c731796fd827cf63a8c718c65">OTSubcredential</a>.</p>

<p>Definition at line <a class="el" href="_o_t_contract_8cpp_source.html#l00463">463</a> of file <a class="el" href="_o_t_contract_8cpp_source.html">OTContract.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// Make sure that the supposed Contract ID that was set is actually</span>
    <span class="comment">// a hash of the contract file, signatures and all.</span>
    <span class="keywordflow">if</span> (<span class="keyword">false</span> == this-&gt;<a class="code" href="class_o_t_contract.html#a8570f185efbb89e0c8fd8d0d0fb8fc3e">VerifyContractID</a>())
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(1, <span class="stringliteral">&quot;%s: Failed verifying contract ID.\n&quot;</span>, __FUNCTION__);
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }

    <span class="comment">// Make sure we are able to read the official &quot;contract&quot; public key out of this contract.</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pNym = this-&gt;<a class="code" href="class_o_t_contract.html#affb6a11ee52ad13fd6e1e1ef6e4bbdc1">GetContractPublicNym</a>();

    <span class="keywordflow">if</span> (NULL == pNym)
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Failed retrieving public nym from contract.\n&quot;</span>, __FUNCTION__);
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }

    <span class="keywordflow">if</span> (<span class="keyword">false</span> == this-&gt;<a class="code" href="class_o_t_contract.html#a38f51d593b6dfc8a75d1c5a535965392">VerifySignature</a>(*pNym))
    {
        <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theNymID(*pNym);
        <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a>     strNymID(theNymID);
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Failed verifying the contract&#39;s signature &quot;</span>
                      <span class="stringliteral">&quot;against the public key that was retrieved from the contract, with key ID: %s\n&quot;</span>,
                      __FUNCTION__, strNymID.Get());
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }


    <a class="code" href="class_o_t_log.html#a1f7549d776ee919dcb6517f611ded015">OTLog::Output</a>(1, <span class="stringliteral">&quot;\nVerified -- The Contract ID from the wallet matches the newly-calculated hash of the contract file.\n&quot;</span>
            <span class="stringliteral">&quot;Verified -- A standard \&quot;contract\&quot; Public Key or x509 Cert WAS found inside the contract.\n&quot;</span>
            <span class="stringliteral">&quot;Verified -- And the **SIGNATURE VERIFIED** with THAT key.\n\n&quot;</span>);
    <span class="keywordflow">return</span> <span class="keyword">true</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a8570f185efbb89e0c8fd8d0d0fb8fc3e"></a><!-- doxytag: member="OTContract::VerifyContractID" ref="a8570f185efbb89e0c8fd8d0d0fb8fc3e" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_contract.html#a8570f185efbb89e0c8fd8d0d0fb8fc3e">OTContract::VerifyContractID</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reimplemented in <a class="el" href="class_o_t_transaction_type.html#a7799050eb71875ffd069024250854392">OTTransactionType</a>, <a class="el" href="class_o_t_mint.html#aa611809b851eb1045cd9f753326eca4d">OTMint</a>, and <a class="el" href="class_o_t_message.html#a21b8dcd4f964fc49e1eeeb5a02cfe5f4">OTMessage</a>.</p>

<p>Definition at line <a class="el" href="_o_t_contract_8cpp_source.html#l00513">513</a> of file <a class="el" href="_o_t_contract_8cpp_source.html">OTContract.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> newID;
    this-&gt;<a class="code" href="class_o_t_contract.html#a705597c0b741d3d120624b0388f73508">CalculateContractID</a>(newID);

    <span class="comment">// newID now contains the Hash aka Message Digest aka Fingerprint</span>
    <span class="comment">// aka thumbprint aka &quot;IDENTIFIER&quot; of the Contract.</span>
    <span class="comment">//</span>
    <span class="comment">// Now let&#39;s compare that identifier to the one already loaded by the wallet</span>
    <span class="comment">// for this contract and make sure they MATCH.</span>

    <span class="comment">// I use the == operator here because there is no != operator at this time.</span>
    <span class="comment">// That&#39;s why you see the ! outside the parenthesis.</span>
    <span class="comment">//</span>
    <span class="keywordflow">if</span> (!(<a class="code" href="class_o_t_contract.html#ac975866d3511c41d935d2ec44c24c4cb">m_ID</a> == newID))
    {
        <a class="code" href="class_o_t_string.html">OTString</a> str1(<a class="code" href="class_o_t_contract.html#ac975866d3511c41d935d2ec44c24c4cb">m_ID</a>), str2(newID);

        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;\nHashes do NOT match in OTContract::VerifyContractID.\n Expected: %s\n   Actual: %s\n&quot;</span>
<span class="comment">//              &quot;\nRAW FILE:\n---&gt;%s&lt;---&quot;</span>
                <span class="stringliteral">&quot;\n&quot;</span>,
                str1.Get(), str2.Get()
<span class="comment">//              m_strRawFile.Get()</span>
                );
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="keywordflow">else</span>
    {
        <a class="code" href="class_o_t_string.html">OTString</a> str1;
        newID.<a class="code" href="class_o_t_identifier.html#a4bccb30446b4b515d9d6016b86b260bb">GetString</a>(str1);
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(1, <span class="stringliteral">&quot;\nContract ID *SUCCESSFUL* match to %s hash of contract file: %s\n\n&quot;</span>,
                <a class="code" href="class_o_t_identifier.html#a1179b45355107bf4511249a823217c94">OTIdentifier::DefaultHashAlgorithm</a>.Get(), str1.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
        <span class="keywordflow">return</span> <span class="keyword">true</span>;
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a9201c0469d8d705b484c054d45780e34"></a><!-- doxytag: member="OTContract::VerifySigAuthent" ref="a9201c0469d8d705b484c054d45780e34" args="(const OTPseudonym &amp;theNym, OTPasswordData *pPWData=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_contract.html#a9201c0469d8d705b484c054d45780e34">OTContract::VerifySigAuthent</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;&#160;</td>
          <td class="paramname"><em>theNym</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_password_data.html">OTPasswordData</a> *&#160;</td>
          <td class="paramname"><em>pPWData</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_contract_8cpp_source.html#l00888">888</a> of file <a class="el" href="_o_t_contract_8cpp_source.html">OTContract.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_o_t_string.html">OTString</a> strNymID;
    theNym.<a class="code" href="class_o_t_pseudonym.html#a1775c7aedd0dd25b2faf3f78dcccabe7">GetIdentifier</a>(strNymID);
    <span class="keywordtype">char</span> cNymID = <span class="charliteral">&#39;0&#39;</span>;
    uint32_t nIndex = 0;
    <span class="keyword">const</span> <span class="keywordtype">bool</span> bNymID = strNymID.<a class="code" href="class_o_t_string.html#a0b183402da9a9ea6da94b3fcaa8740e8">At</a>(nIndex, cNymID);
    <span class="comment">// -----------------------------------------</span>
    <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_signature_8hpp.html#ad3ca272b3bd48f2d487b2d3668c4bae2">listOfSignatures</a>, <a class="code" href="class_o_t_contract.html#ae2a61cbef0e8827af6795280e4682b85">m_listSignatures</a>)
    {
        <a class="code" href="class_o_t_signature.html">OTSignature</a> * pSig = *it;
        <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pSig);
        <span class="comment">// ----------------------</span>
        <span class="keywordflow">if</span> (bNymID &amp;&amp; pSig-&gt;<a class="code" href="class_o_t_signature.html#ab82c216636edf6583efa7e5344b3c6e0">m_metadata</a>.<a class="code" href="class_o_t_signature_metadata.html#a026c60514737f48d1dd2a0643d1d431f">HasMetadata</a>())
        {
            <span class="comment">// If the signature has metadata, then it knows the first character</span>
            <span class="comment">// of the NymID that signed it. We know the first character of the NymID</span>
            <span class="comment">// who&#39;s trying to verify it. Thus, if they don&#39;t match, we can skip this</span>
            <span class="comment">// signature without having to try to verify it at all.</span>
            <span class="comment">//</span>
            <span class="keywordflow">if</span> (pSig-&gt;<a class="code" href="class_o_t_signature.html#ab82c216636edf6583efa7e5344b3c6e0">m_metadata</a>.<a class="code" href="class_o_t_signature_metadata.html#a70bb395c8ffbddcfd99cf9a6bac59ea8">FirstCharNymID</a>() != cNymID)
                <span class="keywordflow">continue</span>;
        }
        <span class="comment">// ----------------------</span>
        <span class="keywordflow">if</span> (this-&gt;<a class="code" href="class_o_t_contract.html#a9201c0469d8d705b484c054d45780e34">VerifySigAuthent</a>(theNym, *pSig, pPWData))
            <span class="keywordflow">return</span> <span class="keyword">true</span>;
    }
    <span class="comment">// -----------------------------------------</span>
    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a7957d626d83d2d97990d3a5479717d41"></a><!-- doxytag: member="OTContract::VerifySigAuthent" ref="a7957d626d83d2d97990d3a5479717d41" args="(const OTPseudonym &amp;theNym, const OTSignature &amp;theSignature, OTPasswordData *pPWData=NULL) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_contract.html#a9201c0469d8d705b484c054d45780e34">OTContract::VerifySigAuthent</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;&#160;</td>
          <td class="paramname"><em>theNym</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_signature.html">OTSignature</a> &amp;&#160;</td>
          <td class="paramname"><em>theSignature</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_password_data.html">OTPasswordData</a> *&#160;</td>
          <td class="paramname"><em>pPWData</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_contract_8cpp_source.html#l00988">988</a> of file <a class="el" href="_o_t_contract_8cpp_source.html">OTContract.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{

    <a class="code" href="class_o_t_password_data.html">OTPasswordData</a>       thePWData(<span class="stringliteral">&quot;OTContract::VerifySigAuthent 1&quot;</span>);
    <a class="code" href="_o_t_asymmetric_key_8hpp.html#ada6127549a4970b60a8939215dd89ddb">listOfAsymmetricKeys</a> listOutput;

    <span class="keyword">const</span> int32_t nCount = theNym.<a class="code" href="class_o_t_pseudonym.html#ad506d78d8dd7d2a9620485e8c3688a6f">GetPublicKeysBySignature</a>(listOutput, theSignature, <span class="charliteral">&#39;A&#39;</span>); <span class="comment">// &#39;A&#39; for authentication key.</span>

    <span class="keywordflow">if</span> (nCount &gt; 0) <span class="comment">// Found some (potentially) matching keys...</span>
    {
        <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_asymmetric_key_8hpp.html#ada6127549a4970b60a8939215dd89ddb">listOfAsymmetricKeys</a>, listOutput)
        {
            <a class="code" href="class_o_t_asymmetric_key.html">OTAsymmetricKey</a> * pKey = *it;
            <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pKey);
            <span class="comment">// -----------------------</span>
            <span class="keywordflow">if</span> (this-&gt;<a class="code" href="class_o_t_contract.html#a38f51d593b6dfc8a75d1c5a535965392">VerifySignature</a>(*pKey, theSignature, <a class="code" href="class_o_t_contract.html#adccde050f729b2d24e3c392592868c90">m_strSigHashType</a>,
                                      (NULL != pPWData) ? pPWData : &amp;thePWData))
                <span class="keywordflow">return</span> <span class="keyword">true</span>;
        }
    }
    <span class="keywordflow">else</span>
    {
        <a class="code" href="class_o_t_string.html">OTString</a> strNymID;
        theNym.<a class="code" href="class_o_t_pseudonym.html#a1775c7aedd0dd25b2faf3f78dcccabe7">GetIdentifier</a>(strNymID);
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(1, <span class="stringliteral">&quot;%s: Tried to grab a list of keys from this Nym (%s) which might match this signature, &quot;</span>
                      <span class="stringliteral">&quot;but recovered none. Therefore, will attempt to verify using the Nym&#39;s default public &quot;</span>
                       <span class="stringliteral">&quot;AUTHENTICATION key.\n&quot;</span>, __FUNCTION__, strNymID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
    }
    <span class="comment">// else found no keys.</span>
    <span class="comment">// ---------------------------------------------------------</span>
    <span class="keywordflow">return</span> this-&gt;<a class="code" href="class_o_t_contract.html#a38f51d593b6dfc8a75d1c5a535965392">VerifySignature</a>(theNym.<a class="code" href="class_o_t_pseudonym.html#add05942697a8f16ee9259d8cccc271c8">GetPublicAuthKey</a>(), theSignature, <a class="code" href="class_o_t_contract.html#adccde050f729b2d24e3c392592868c90">m_strSigHashType</a>,
                                 (NULL != pPWData) ? pPWData : &amp;thePWData);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a38f51d593b6dfc8a75d1c5a535965392"></a><!-- doxytag: member="OTContract::VerifySignature" ref="a38f51d593b6dfc8a75d1c5a535965392" args="(const OTPseudonym &amp;theNym, OTPasswordData *pPWData=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_contract.html#a38f51d593b6dfc8a75d1c5a535965392">OTContract::VerifySignature</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;&#160;</td>
          <td class="paramname"><em>theNym</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_password_data.html">OTPasswordData</a> *&#160;</td>
          <td class="paramname"><em>pPWData</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reimplemented in <a class="el" href="class_o_t_message.html#aa61f745665166abf8bed98f47c6252d0">OTMessage</a>.</p>

<p>Definition at line <a class="el" href="_o_t_contract_8cpp_source.html#l00921">921</a> of file <a class="el" href="_o_t_contract_8cpp_source.html">OTContract.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_o_t_string.html">OTString</a> strNymID;
    theNym.<a class="code" href="class_o_t_pseudonym.html#a1775c7aedd0dd25b2faf3f78dcccabe7">GetIdentifier</a>(strNymID);
    <span class="keywordtype">char</span> cNymID = <span class="charliteral">&#39;0&#39;</span>;
    uint32_t nIndex = 0;
    <span class="keyword">const</span> <span class="keywordtype">bool</span> bNymID = strNymID.<a class="code" href="class_o_t_string.html#a0b183402da9a9ea6da94b3fcaa8740e8">At</a>(nIndex, cNymID);
    <span class="comment">// -----------------------------------------</span>
    <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_signature_8hpp.html#ad3ca272b3bd48f2d487b2d3668c4bae2">listOfSignatures</a>, <a class="code" href="class_o_t_contract.html#ae2a61cbef0e8827af6795280e4682b85">m_listSignatures</a>)
    {
        <a class="code" href="class_o_t_signature.html">OTSignature</a> * pSig = *it;
        <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pSig);
        <span class="comment">// ----------------------</span>
        <span class="keywordflow">if</span> (bNymID &amp;&amp; pSig-&gt;<a class="code" href="class_o_t_signature.html#ab82c216636edf6583efa7e5344b3c6e0">m_metadata</a>.<a class="code" href="class_o_t_signature_metadata.html#a026c60514737f48d1dd2a0643d1d431f">HasMetadata</a>())
        {
            <span class="comment">// If the signature has metadata, then it knows the first character</span>
            <span class="comment">// of the NymID that signed it. We know the first character of the NymID</span>
            <span class="comment">// who&#39;s trying to verify it. Thus, if they don&#39;t match, we can skip this</span>
            <span class="comment">// signature without having to try to verify it at all.</span>
            <span class="comment">//</span>
            <span class="keywordflow">if</span> (pSig-&gt;<a class="code" href="class_o_t_signature.html#ab82c216636edf6583efa7e5344b3c6e0">m_metadata</a>.<a class="code" href="class_o_t_signature_metadata.html#a70bb395c8ffbddcfd99cf9a6bac59ea8">FirstCharNymID</a>() != cNymID)
                <span class="keywordflow">continue</span>;
        }
        <span class="comment">// ----------------------</span>
        <span class="keywordflow">if</span> (this-&gt;<a class="code" href="class_o_t_contract.html#a38f51d593b6dfc8a75d1c5a535965392">VerifySignature</a>(theNym, *pSig, pPWData))
            <span class="keywordflow">return</span> <span class="keyword">true</span>;
    }
    <span class="comment">// -----------------------------------------</span>
    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a50e50fd96ab5de02726f41cd4144d57a"></a><!-- doxytag: member="OTContract::VerifySignature" ref="a50e50fd96ab5de02726f41cd4144d57a" args="(const OTPseudonym &amp;theNym, const OTSignature &amp;theSignature, OTPasswordData *pPWData=NULL) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_contract.html#a38f51d593b6dfc8a75d1c5a535965392">OTContract::VerifySignature</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;&#160;</td>
          <td class="paramname"><em>theNym</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_signature.html">OTSignature</a> &amp;&#160;</td>
          <td class="paramname"><em>theSignature</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_password_data.html">OTPasswordData</a> *&#160;</td>
          <td class="paramname"><em>pPWData</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_contract_8cpp_source.html#l01029">1029</a> of file <a class="el" href="_o_t_contract_8cpp_source.html">OTContract.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{

    <a class="code" href="class_o_t_password_data.html">OTPasswordData</a>       thePWData(<span class="stringliteral">&quot;OTContract::VerifySignature 1&quot;</span>);
    <a class="code" href="_o_t_asymmetric_key_8hpp.html#ada6127549a4970b60a8939215dd89ddb">listOfAsymmetricKeys</a> listOutput;

    <span class="keyword">const</span> int32_t nCount = theNym.<a class="code" href="class_o_t_pseudonym.html#ad506d78d8dd7d2a9620485e8c3688a6f">GetPublicKeysBySignature</a>(listOutput, theSignature, <span class="charliteral">&#39;S&#39;</span>); <span class="comment">// &#39;S&#39; for signing key.</span>

    <span class="keywordflow">if</span> (nCount &gt; 0) <span class="comment">// Found some (potentially) matching keys...</span>
    {
        <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_asymmetric_key_8hpp.html#ada6127549a4970b60a8939215dd89ddb">listOfAsymmetricKeys</a>, listOutput)
        {
            <a class="code" href="class_o_t_asymmetric_key.html">OTAsymmetricKey</a> * pKey = *it;
            <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pKey);
            <span class="comment">// -----------------------</span>
            <span class="keywordflow">if</span> (this-&gt;<a class="code" href="class_o_t_contract.html#a38f51d593b6dfc8a75d1c5a535965392">VerifySignature</a>(*pKey, theSignature, <a class="code" href="class_o_t_contract.html#adccde050f729b2d24e3c392592868c90">m_strSigHashType</a>,
                                      (NULL != pPWData) ? pPWData : &amp;thePWData))
                <span class="keywordflow">return</span> <span class="keyword">true</span>;
        }
    }
    <span class="keywordflow">else</span>
    {
        <a class="code" href="class_o_t_string.html">OTString</a> strNymID;
        theNym.<a class="code" href="class_o_t_pseudonym.html#a1775c7aedd0dd25b2faf3f78dcccabe7">GetIdentifier</a>(strNymID);
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(1, <span class="stringliteral">&quot;%s: Tried to grab a list of keys from this Nym (%s) which might match this signature, &quot;</span>
                      <span class="stringliteral">&quot;but recovered none. Therefore, will attempt to verify using the Nym&#39;s default public &quot;</span>
                       <span class="stringliteral">&quot;SIGNING key.\n&quot;</span>, __FUNCTION__, strNymID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
    }
    <span class="comment">// else found no keys.</span>
    <span class="comment">// ---------------------------------------------------------</span>
    <span class="keywordflow">return</span> this-&gt;<a class="code" href="class_o_t_contract.html#a38f51d593b6dfc8a75d1c5a535965392">VerifySignature</a>(theNym.<a class="code" href="class_o_t_pseudonym.html#aa60e86ffafcfba7c68801530c12c9927">GetPublicSignKey</a>(), theSignature, <a class="code" href="class_o_t_contract.html#adccde050f729b2d24e3c392592868c90">m_strSigHashType</a>,
                                 (NULL != pPWData) ? pPWData : &amp;thePWData);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a3870ba03593b483f84dbc966566bdb01"></a><!-- doxytag: member="OTContract::VerifySignature" ref="a3870ba03593b483f84dbc966566bdb01" args="(const OTAsymmetricKey &amp;theKey, const OTSignature &amp;theSignature, const OTString &amp;strHashType, OTPasswordData *pPWData=NULL) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_contract.html#a38f51d593b6dfc8a75d1c5a535965392">OTContract::VerifySignature</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_asymmetric_key.html">OTAsymmetricKey</a> &amp;&#160;</td>
          <td class="paramname"><em>theKey</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_signature.html">OTSignature</a> &amp;&#160;</td>
          <td class="paramname"><em>theSignature</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strHashType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_password_data.html">OTPasswordData</a> *&#160;</td>
          <td class="paramname"><em>pPWData</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_contract_8cpp_source.html#l01066">1066</a> of file <a class="el" href="_o_t_contract_8cpp_source.html">OTContract.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// See if this key could possibly have even signed this signature.</span>
    <span class="comment">// (The metadata may eliminate it as a possibility.)</span>
    <span class="comment">//</span>
    <span class="keywordflow">if</span> ((NULL != theKey.<a class="code" href="class_o_t_asymmetric_key.html#a071e09c59ab0b1460debd3c092da0034">m_pMetadata</a>)      &amp;&amp;
        theKey.<a class="code" href="class_o_t_asymmetric_key.html#a071e09c59ab0b1460debd3c092da0034">m_pMetadata</a>-&gt;<a class="code" href="class_o_t_signature_metadata.html#a026c60514737f48d1dd2a0643d1d431f">HasMetadata</a>() &amp;&amp;
        theSignature.<a class="code" href="class_o_t_signature.html#ab82c216636edf6583efa7e5344b3c6e0">m_metadata</a>.<a class="code" href="class_o_t_signature_metadata.html#a026c60514737f48d1dd2a0643d1d431f">HasMetadata</a>())
    {
        <span class="keywordflow">if</span> (theSignature.<a class="code" href="class_o_t_signature.html#ab82c216636edf6583efa7e5344b3c6e0">m_metadata</a> != *(theKey.<a class="code" href="class_o_t_asymmetric_key.html#a071e09c59ab0b1460debd3c092da0034">m_pMetadata</a>))
            <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// -------------------------------------------------</span>
    <a class="code" href="class_o_t_password_data.html">OTPasswordData</a> thePWData(<span class="stringliteral">&quot;OTContract::VerifySignature 2&quot;</span>);
    <span class="comment">// -------------------------------------------------</span>
    <span class="keywordflow">if</span> (<span class="keyword">false</span> == <a class="code" href="class_o_t_crypto.html#af10d51149df4803f79b4b2fed829430b">OTCrypto::It</a>()-&gt;<a class="code" href="class_o_t_contract.html#a38f51d593b6dfc8a75d1c5a535965392">VerifySignature</a>(<a class="code" href="class_o_t_contract.html#a087fc09cfa4b2fd9076088360a5e5039">m_xmlUnsigned</a>,
                                                 theKey,
                                                 theSignature,
                                                 strHashType,
                                                 (NULL != pPWData) ? pPWData : &amp;thePWData))
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(4, <span class="stringliteral">&quot;%s: OTCrypto::It()-&gt;VerifySignature returned false.\n&quot;</span>,
                      __FUNCTION__);
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// --------------------------------------------------------------------</span>
    <span class="keywordflow">return</span> <span class="keyword">true</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a7630b501f6180ce30c48d049e725eb9a"></a><!-- doxytag: member="OTContract::VerifySignature" ref="a7630b501f6180ce30c48d049e725eb9a" args="(const char *szFoldername, const char *szFilename, const OTSignature &amp;theSignature, OTPasswordData *pPWData=NULL) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_contract.html#a38f51d593b6dfc8a75d1c5a535965392">OTContract::VerifySignature</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>szFoldername</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>szFilename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_signature.html">OTSignature</a> &amp;&#160;</td>
          <td class="paramname"><em>theSignature</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_password_data.html">OTPasswordData</a> *&#160;</td>
          <td class="paramname"><em>pPWData</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_contract_8cpp_source.html#l00840">840</a> of file <a class="el" href="_o_t_contract_8cpp_source.html">OTContract.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_o_t_assert_8hpp.html#a033b133f48e61f2b227c52ad2be0c882">OT_ASSERT_MSG</a>(NULL != szFoldername, <span class="stringliteral">&quot;Null foldername pointer passed to OTContract::VerifySignature&quot;</span>);
    <a class="code" href="_o_t_assert_8hpp.html#a033b133f48e61f2b227c52ad2be0c882">OT_ASSERT_MSG</a>(NULL != szFilename,   <span class="stringliteral">&quot;Null filename pointer passed to OTContract::VerifySignature&quot;</span>);
    <span class="comment">// --------------------------------------------------------------------</span>
    <span class="keyword">const</span> <span class="keywordtype">char</span> * szFunc = __FUNCTION__;
    <span class="comment">// --------------------------------------------------------------------</span>
    <span class="comment">// Read public key</span>
    <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(2, <span class="stringliteral">&quot;%s: Reading public key from certfile in order to verify signature...\n&quot;</span>, szFunc);
    <span class="comment">// --------------------------------------------------------------------</span>
    <span class="keywordflow">if</span> (<span class="keyword">false</span> == <a class="code" href="namespace_o_t_d_b.html#a73e39a590dfb64f63065821c6bbcd4c6">OTDB::Exists</a>(szFoldername, szFilename))
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: File does not exist: %s%s%s\n&quot;</span>, szFunc,
                      szFoldername, <a class="code" href="class_o_t_log.html#a42d3c91ff84ecae0690e34efb4619a77">OTLog::PathSeparator</a>(), szFilename);
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// --------------------------------------------------------------------</span>
    <span class="keyword">const</span> std::string strCertFileContents(<a class="code" href="namespace_o_t_d_b.html#a921d6f538de00f4e4297c25cf679f00a">OTDB::QueryPlainString</a>(szFoldername, szFilename)); <span class="comment">// &lt;=== LOADING FROM DATA STORE.</span>

    <span class="keywordflow">if</span> (strCertFileContents.length() &lt; 2)
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error reading file: %s%s%s\n&quot;</span>, szFunc,
                      szFoldername, <a class="code" href="class_o_t_log.html#a42d3c91ff84ecae0690e34efb4619a77">OTLog::PathSeparator</a>(), szFilename);
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// --------------------------------------------------------------------</span>
    <a class="code" href="class_o_t_password_data.html">OTPasswordData</a> thePWData(<span class="stringliteral">&quot;Reading the public key...&quot;</span>);
    <span class="keywordflow">if</span> (NULL == pPWData)
        pPWData = &amp;thePWData;
    <span class="comment">// --------------------------------------------------------------------</span>
    <span class="keywordflow">if</span> (<span class="keyword">false</span> == <a class="code" href="class_o_t_crypto.html#af10d51149df4803f79b4b2fed829430b">OTCrypto::It</a>()-&gt;<a class="code" href="class_o_t_contract.html#a38f51d593b6dfc8a75d1c5a535965392">VerifySignature</a>(<a class="code" href="class_o_t_contract.html#a087fc09cfa4b2fd9076088360a5e5039">m_xmlUnsigned</a>,
                                                 <a class="code" href="class_o_t_contract.html#adccde050f729b2d24e3c392592868c90">m_strSigHashType</a>,
                                                 strCertFileContents,
                                                 theSignature,
                                                 pPWData))
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(4, <span class="stringliteral">&quot;%s: OTCrypto::It()-&gt;VerifySignature returned false, using Cert file: %s%s%s\n&quot;</span>,
                      szFunc, szFoldername, <a class="code" href="class_o_t_log.html#a42d3c91ff84ecae0690e34efb4619a77">OTLog::PathSeparator</a>(), szFilename);
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// --------------------------------------------------------------------</span>
    <span class="keywordflow">return</span> <span class="keyword">true</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab80fbfabc9dca35310f63bce3840387e"></a><!-- doxytag: member="OTContract::VerifyWithKey" ref="ab80fbfabc9dca35310f63bce3840387e" args="(const OTAsymmetricKey &amp;theKey, OTPasswordData *pPWData=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_contract.html#ab80fbfabc9dca35310f63bce3840387e">OTContract::VerifyWithKey</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_asymmetric_key.html">OTAsymmetricKey</a> &amp;&#160;</td>
          <td class="paramname"><em>theKey</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_password_data.html">OTPasswordData</a> *&#160;</td>
          <td class="paramname"><em>pPWData</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_contract_8cpp_source.html#l00954">954</a> of file <a class="el" href="_o_t_contract_8cpp_source.html">OTContract.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// -----------------------------------------</span>
    <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_signature_8hpp.html#ad3ca272b3bd48f2d487b2d3668c4bae2">listOfSignatures</a>, <a class="code" href="class_o_t_contract.html#ae2a61cbef0e8827af6795280e4682b85">m_listSignatures</a>)
    {
        <a class="code" href="class_o_t_signature.html">OTSignature</a> * pSig = *it;
        <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pSig);
        <span class="comment">// ----------------------</span>
        <span class="keywordflow">if</span> ((NULL != theKey.<a class="code" href="class_o_t_asymmetric_key.html#a071e09c59ab0b1460debd3c092da0034">m_pMetadata</a>)      &amp;&amp;  <span class="comment">// This should never actually be NULL.</span>
            theKey.<a class="code" href="class_o_t_asymmetric_key.html#a071e09c59ab0b1460debd3c092da0034">m_pMetadata</a>-&gt;<a class="code" href="class_o_t_signature_metadata.html#a026c60514737f48d1dd2a0643d1d431f">HasMetadata</a>() &amp;&amp;  <span class="comment">// If this key actually has its metadata set.</span>
            pSig-&gt; m_metadata.  HasMetadata())    <span class="comment">// And if the signature ALSO has its metadata set...</span>
        {
            <span class="comment">// Since key and signature both have metadata, we can use it</span>
            <span class="comment">// to skip signatures which don&#39;t match this key.</span>
            <span class="comment">//</span>
            <span class="keywordflow">if</span> (pSig-&gt;<a class="code" href="class_o_t_signature.html#ab82c216636edf6583efa7e5344b3c6e0">m_metadata</a> != *(theKey.<a class="code" href="class_o_t_asymmetric_key.html#a071e09c59ab0b1460debd3c092da0034">m_pMetadata</a>))
                <span class="keywordflow">continue</span>;
        }
        <span class="comment">// ----------------------</span>
        <a class="code" href="class_o_t_password_data.html">OTPasswordData</a> thePWData(<span class="stringliteral">&quot;OTContract::VerifyWithKey&quot;</span>);
        <span class="keywordflow">if</span> (this-&gt;<a class="code" href="class_o_t_contract.html#a38f51d593b6dfc8a75d1c5a535965392">VerifySignature</a>(theKey, *pSig, <a class="code" href="class_o_t_contract.html#adccde050f729b2d24e3c392592868c90">m_strSigHashType</a>,
                                  (NULL != pPWData) ? pPWData : &amp;thePWData))
            <span class="keywordflow">return</span> <span class="keyword">true</span>;
    }
    <span class="comment">// -----------------------------------------</span>
    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<hr/><h2>Friends And Related Function Documentation</h2>
<a class="anchor" id="ae30ec9237eff8224f54468df8341bcc4"></a><!-- doxytag: member="OTContract::OTPayload" ref="ae30ec9237eff8224f54468df8341bcc4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">friend class <a class="el" href="class_o_t_payload.html">OTPayload</a><code> [friend]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_contract_8hpp_source.html#l00151">151</a> of file <a class="el" href="_o_t_contract_8hpp_source.html">OTContract.hpp</a>.</p>

</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="ac975866d3511c41d935d2ec44c24c4cb"></a><!-- doxytag: member="OTContract::m_ID" ref="ac975866d3511c41d935d2ec44c24c4cb" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_identifier.html">OTIdentifier</a> <a class="el" href="class_o_t_contract.html#ac975866d3511c41d935d2ec44c24c4cb">OTContract::m_ID</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_contract_8hpp_source.html#l00157">157</a> of file <a class="el" href="_o_t_contract_8hpp_source.html">OTContract.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="ae2a61cbef0e8827af6795280e4682b85"></a><!-- doxytag: member="OTContract::m_listSignatures" ref="ae2a61cbef0e8827af6795280e4682b85" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_o_t_signature_8hpp.html#ad3ca272b3bd48f2d487b2d3668c4bae2">listOfSignatures</a> <a class="el" href="class_o_t_contract.html#ae2a61cbef0e8827af6795280e4682b85">OTContract::m_listSignatures</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_contract_8hpp_source.html#l00176">176</a> of file <a class="el" href="_o_t_contract_8hpp_source.html">OTContract.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="aa482844cba05a92d69eb0739d5deb862"></a><!-- doxytag: member="OTContract::m_mapConditions" ref="aa482844cba05a92d69eb0739d5deb862" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_o_t_string_8hpp.html#a7ec7839682b097a5c5b5c5125046c82b">mapOfStrings</a> <a class="el" href="class_o_t_contract.html#aa482844cba05a92d69eb0739d5deb862">OTContract::m_mapConditions</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_contract_8hpp_source.html#l00186">186</a> of file <a class="el" href="_o_t_contract_8hpp_source.html">OTContract.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="adaef99b0687646a298d599a3d324a356"></a><!-- doxytag: member="OTContract::m_mapNyms" ref="adaef99b0687646a298d599a3d324a356" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_o_t_agent_8hpp.html#ac89892658f6bc83e354078647b704e8f">mapOfNyms</a> <a class="el" href="class_o_t_contract.html#adaef99b0687646a298d599a3d324a356">OTContract::m_mapNyms</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_contract_8hpp_source.html#l00163">163</a> of file <a class="el" href="_o_t_contract_8hpp_source.html">OTContract.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="ac523dac7d72b72e54b1ebb5b3a3b21cc"></a><!-- doxytag: member="OTContract::m_strContractType" ref="ac523dac7d72b72e54b1ebb5b3a3b21cc" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_string.html">OTString</a> <a class="el" href="class_o_t_contract.html#ac523dac7d72b72e54b1ebb5b3a3b21cc">OTContract::m_strContractType</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_contract_8hpp_source.html#l00161">161</a> of file <a class="el" href="_o_t_contract_8hpp_source.html">OTContract.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="ab9c40bb65fb640c072fe4728ee6ad48d"></a><!-- doxytag: member="OTContract::m_strEntityEmail" ref="ab9c40bb65fb640c072fe4728ee6ad48d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_string.html">OTString</a> <a class="el" href="class_o_t_contract.html#ab9c40bb65fb640c072fe4728ee6ad48d">OTContract::m_strEntityEmail</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_contract_8hpp_source.html#l00184">184</a> of file <a class="el" href="_o_t_contract_8hpp_source.html">OTContract.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a0c2d1fa6f921902b84babbb702fc3a12"></a><!-- doxytag: member="OTContract::m_strEntityLongName" ref="a0c2d1fa6f921902b84babbb702fc3a12" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_string.html">OTString</a> <a class="el" href="class_o_t_contract.html#a0c2d1fa6f921902b84babbb702fc3a12">OTContract::m_strEntityLongName</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_contract_8hpp_source.html#l00183">183</a> of file <a class="el" href="_o_t_contract_8hpp_source.html">OTContract.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a2daed7bf314bceeb5773493b5717c0dd"></a><!-- doxytag: member="OTContract::m_strEntityShortName" ref="a2daed7bf314bceeb5773493b5717c0dd" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_string.html">OTString</a> <a class="el" href="class_o_t_contract.html#a2daed7bf314bceeb5773493b5717c0dd">OTContract::m_strEntityShortName</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_contract_8hpp_source.html#l00182">182</a> of file <a class="el" href="_o_t_contract_8hpp_source.html">OTContract.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="ab7ab1f1fe7ff7e52f2c126404a8f4f92"></a><!-- doxytag: member="OTContract::m_strFilename" ref="ab7ab1f1fe7ff7e52f2c126404a8f4f92" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_string.html">OTString</a> <a class="el" href="class_o_t_contract.html#ab7ab1f1fe7ff7e52f2c126404a8f4f92">OTContract::m_strFilename</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_contract_8hpp_source.html#l00156">156</a> of file <a class="el" href="_o_t_contract_8hpp_source.html">OTContract.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="ab1e11693a38a1673037b1f29c9d84010"></a><!-- doxytag: member="OTContract::m_strFoldername" ref="ab1e11693a38a1673037b1f29c9d84010" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_string.html">OTString</a> <a class="el" href="class_o_t_contract.html#ab1e11693a38a1673037b1f29c9d84010">OTContract::m_strFoldername</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_contract_8hpp_source.html#l00155">155</a> of file <a class="el" href="_o_t_contract_8hpp_source.html">OTContract.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="af86a3a124ae977b30bfd3f5cd14d1f9f"></a><!-- doxytag: member="OTContract::m_strName" ref="af86a3a124ae977b30bfd3f5cd14d1f9f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_string.html">OTString</a> <a class="el" href="class_o_t_contract.html#af86a3a124ae977b30bfd3f5cd14d1f9f">OTContract::m_strName</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_contract_8hpp_source.html#l00154">154</a> of file <a class="el" href="_o_t_contract_8hpp_source.html">OTContract.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a90c53743214bc0f0025ad63c3ace7bf2"></a><!-- doxytag: member="OTContract::m_strRawFile" ref="a90c53743214bc0f0025ad63c3ace7bf2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_string.html">OTString</a> <a class="el" href="class_o_t_contract.html#a90c53743214bc0f0025ad63c3ace7bf2">OTContract::m_strRawFile</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_contract_8hpp_source.html#l00159">159</a> of file <a class="el" href="_o_t_contract_8hpp_source.html">OTContract.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="adccde050f729b2d24e3c392592868c90"></a><!-- doxytag: member="OTContract::m_strSigHashType" ref="adccde050f729b2d24e3c392592868c90" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_string.html">OTString</a> <a class="el" href="class_o_t_contract.html#adccde050f729b2d24e3c392592868c90">OTContract::m_strSigHashType</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_contract_8hpp_source.html#l00160">160</a> of file <a class="el" href="_o_t_contract_8hpp_source.html">OTContract.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="aa0d889e0e1670b56fedca245041a5ed3"></a><!-- doxytag: member="OTContract::m_strVersion" ref="aa0d889e0e1670b56fedca245041a5ed3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_string.html">OTString</a> <a class="el" href="class_o_t_contract.html#aa0d889e0e1670b56fedca245041a5ed3">OTContract::m_strVersion</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_contract_8hpp_source.html#l00177">177</a> of file <a class="el" href="_o_t_contract_8hpp_source.html">OTContract.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a087fc09cfa4b2fd9076088360a5e5039"></a><!-- doxytag: member="OTContract::m_xmlUnsigned" ref="a087fc09cfa4b2fd9076088360a5e5039" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_string_x_m_l.html">OTStringXML</a> <a class="el" href="class_o_t_contract.html#a087fc09cfa4b2fd9076088360a5e5039">OTContract::m_xmlUnsigned</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_contract_8hpp_source.html#l00158">158</a> of file <a class="el" href="_o_t_contract_8hpp_source.html">OTContract.hpp</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>include/otlib/<a class="el" href="_o_t_contract_8hpp_source.html">OTContract.hpp</a></li>
<li>src/otlib/<a class="el" href="_o_t_contract_8cpp_source.html">OTContract.cpp</a></li>
</ul>
</div><!-- contents -->
</div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="class_o_t_contract.html">OTContract</a>      </li>

    <li class="footer">Generated on Wed May 21 2014 11:26:12 for Open-Transactions by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.6.1 </li>
   </ul>
 </div>


</body>
</html>
