<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Open-Transactions: OTPseudonym Class Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Open-Transactions
   &#160;<span id="projectnumber">master/1066fb4910a63ee3f7de8e0807fee3eb663b66c7</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('class_o_t_pseudonym.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">OTPseudonym Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<!-- doxytag: class="OTPseudonym" -->
<p><code>#include &lt;<a class="el" href="_o_t_pseudonym_8hpp_source.html">OTPseudonym.hpp</a>&gt;</code></p>

<p><a href="class_o_t_pseudonym-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a508533f6ccb558e21bc205d3463a1aa5">GetPrivateCredentials</a> (<a class="el" href="class_o_t_string.html">OTString</a> &amp;strCredList, <a class="el" href="_o_t_string_8hpp.html#a7ec7839682b097a5c5b5c5125046c82b">mapOfStrings</a> *pmapCredFiles=NULL)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a356d33b203d025ec66a43e23c63c55ed">GetPublicCredentials</a> (<a class="el" href="class_o_t_string.html">OTString</a> &amp;strCredList, <a class="el" href="_o_t_string_8hpp.html#a7ec7839682b097a5c5b5c5125046c82b">mapOfStrings</a> *pmapCredFiles=NULL)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#aca99509bdb4ceb7ff4fdb793998aa794">AddNewMasterCredential</a> (<a class="el" href="class_o_t_string.html">OTString</a> &amp;strOutputMasterCredID, const <a class="el" href="class_o_t_string.html">OTString</a> *pstrSourceForNymID=NULL, const int32_t nBits=1024, const <a class="el" href="_o_t_string_8hpp.html#a7ec7839682b097a5c5b5c5125046c82b">mapOfStrings</a> *pmapPrivate=NULL, const <a class="el" href="_o_t_string_8hpp.html#a7ec7839682b097a5c5b5c5125046c82b">mapOfStrings</a> *pmapPublic=NULL, <a class="el" href="class_o_t_password_data.html">OTPasswordData</a> *pPWData=NULL, bool bChangeNymID=false)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a85bd691ffa8d5f066ba04886dccd0d4d">AddNewSubkey</a> (const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;idMasterCredential, const int32_t nBits=1024, const <a class="el" href="_o_t_string_8hpp.html#a7ec7839682b097a5c5b5c5125046c82b">mapOfStrings</a> *pmapPrivate=NULL, <a class="el" href="class_o_t_password_data.html">OTPasswordData</a> *pPWData=NULL, <a class="el" href="class_o_t_string.html">OTString</a> *pstrNewID=NULL)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#aa44de5f4bbaa6fdb344e3cfa5aa95a53">AddNewSubcredential</a> (const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;idMasterCredential, const <a class="el" href="_o_t_string_8hpp.html#a7ec7839682b097a5c5b5c5125046c82b">mapOfStrings</a> *pmapPrivate=NULL, const <a class="el" href="_o_t_string_8hpp.html#a7ec7839682b097a5c5b5c5125046c82b">mapOfStrings</a> *pmapPublic=NULL, <a class="el" href="class_o_t_password_data.html">OTPasswordData</a> *pPWData=NULL)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a6ae670b44bc6728da06141c885e6c7e9">GetMasterCredentialCount</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a66d28c9b0919dac455167326af405371">GetRevokedCredentialCount</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT <a class="el" href="class_o_t_credential.html">OTCredential</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a94f8a8812ceae9a1f003aa79bfda73a5">GetMasterCredential</a> (const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT <a class="el" href="class_o_t_credential.html">OTCredential</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a34722ae73d2b67e12c92ac770f7dd6f1">GetRevokedCredential</a> (const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT const <a class="el" href="class_o_t_credential.html">OTCredential</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#ae32a4525f158913b21f010a796f5fc29">GetMasterCredentialByIndex</a> (int32_t nIndex) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT const <a class="el" href="class_o_t_credential.html">OTCredential</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a8b367e9ec526a0621be52bd5569f3b13">GetRevokedCredentialByIndex</a> (int32_t nIndex) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT const <a class="el" href="class_o_t_subcredential.html">OTSubcredential</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#aca22e54cef6a6e908cfff4c8394ef533">GetSubcredential</a> (const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strMasterID, const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strSubCredID) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT const <a class="el" href="class_o_t_subcredential.html">OTSubcredential</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a05038a67c0376fc45d78438eb9e2a276">GetRevokedSubcred</a> (const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strRevokedID, const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strSubCredID) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#ac9c61ecf8fe65ec5b862021bd063422a">GetNymboxHashServerSide</a> (const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;theServerID, <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;theOutput)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#ab3b725b4837a88a8d273d5ca1ad636a0">SetNymboxHashServerSide</a> (const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;theInput)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a461ac5959e5f91add57549be10d82e36">GetNymboxHash</a> (const std::string &amp;server_id, <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;theOutput) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#ad4e740d990aa8aca410c0923dcde1737">SetNymboxHash</a> (const std::string &amp;server_id, const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;theInput)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a9222447403d249269bcbc3a4cab5de02">GetRecentHash</a> (const std::string &amp;server_id, <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;theOutput) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a9c8005d30622ea76cf81c6a9bbfd4d91">SetRecentHash</a> (const std::string &amp;server_id, const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;theInput)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a89fb6af0b242e8b4468d34b0057e95f5">GetInboxHash</a> (const std::string &amp;acct_id, <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;theOutput) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#adddd63c949620e826177926f8ecae533">SetInboxHash</a> (const std::string &amp;acct_id, const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;theInput)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#aae9b25973d9bce353fb124bcebbb4fc6">GetOutboxHash</a> (const std::string &amp;acct_id, <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;theOutput) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#ac5af6ed289cfcd77c388ab750da28ccc">SetOutboxHash</a> (const std::string &amp;acct_id, const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;theInput)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT const int64_t &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a4469f9108d8239b72e6ebc6bc5b2b4a9">GetUsageCredits</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#afdd9f22128599dc00dbec2d5fb4ad43d">SetUsageCredits</a> (const int64_t &amp;lUsage)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a3b96d3b8d3d2836b8a83132eb133895c">MarkForDeletion</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#acae3c2ac801dbb0e33be9b3d493bbf4f">IsMarkedForDeletion</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#af9711e021a13ee987eb71bd598d5287a">MarkAsUndeleted</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::set&lt; int64_t &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a92abc7a6b6253681f3379f135597f5a9">GetSetOpenCronItems</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::set&lt; std::string &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#ad3dbc1ca45e891918fb363bdf24a57e3">GetSetAssetAccounts</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a42e63697c3c3b1bdb526ee7990a9c0e7">GetNymName</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#acf835189df80fda4eedc88d4cccdc5f1">SetNymName</a> (const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strName)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a0da04833e553c34be87a89fb22dd8a1c">OTPseudonym</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a80b32f09dee440a3bc5df74bef81bbe4">OTPseudonym</a> (const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;nymID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a9b7fb54d3705ac69e46296d2269092dd">OTPseudonym</a> (const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strNymID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#acdc0db8f34b7da5f1c0acb4be1b98954">OTPseudonym</a> (const <a class="el" href="class_o_t_string.html">OTString</a> &amp;name, const <a class="el" href="class_o_t_string.html">OTString</a> &amp;filename, const <a class="el" href="class_o_t_string.html">OTString</a> &amp;nymID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual EXPORT&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a7f5f6e2522981c7d45510ab38f28b1c7">~OTPseudonym</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a26af2636e74e0be1430b7934962f2932">Initialize</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a0f5609a64dd47cf9b7f3113127e51f6b">ReleaseTransactionNumbers</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#aae8a707c7799efb6944d485be31a7c3e">VerifyPseudonym</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a7a215c63b72b47034e3f92e4334f44f6">GenerateNym</a> (int32_t nBits=1024, bool bCreateFile=true, const std::string str_id_source=&quot;&quot;, const std::string str_alt_location=&quot;&quot;)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT <a class="el" href="class_o_t_item.html">OTItem</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#ab592ef450504c5af83b84d8a15ef02ea">GenerateTransactionStatement</a> (const <a class="el" href="class_o_t_transaction.html">OTTransaction</a> &amp;theOwner)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#acd9b375d6c16d11d7d0df1dcf1f543a7">SetPublicKey</a> (const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strKey, bool bEscaped=true)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a2e4a5a88ecffe86c45359fcb592bccd6">SetCertificate</a> (const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strCert, bool bEscaped=true)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a59cf02bed12b70fe47a43f546fd37507">SetPublicKey</a> (const <a class="el" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> &amp;strKey)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#af5a482ddef657b788ca4eba7b3df811a">SetPrivateKey</a> (const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strKey, bool bEscaped=true)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#aa2b88cb0d702eac8819d085857d49b79">SetPrivateKey</a> (const <a class="el" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> &amp;strKey)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a5d685c100f1947ed7aa467434298b40d">HasPublicKey</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a27b67139a33989a0db8ca027f03b3257">HasPrivateKey</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT const <a class="el" href="class_o_t_asymmetric_key.html">OTAsymmetricKey</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#add05942697a8f16ee9259d8cccc271c8">GetPublicAuthKey</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const <a class="el" href="class_o_t_asymmetric_key.html">OTAsymmetricKey</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a9c8f3ffd5794421fad974137e2067dd4">GetPrivateAuthKey</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT const <a class="el" href="class_o_t_asymmetric_key.html">OTAsymmetricKey</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a7a7b836bb9e8e0df7b3601f44e1b7220">GetPublicEncrKey</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const <a class="el" href="class_o_t_asymmetric_key.html">OTAsymmetricKey</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a89830be018a88bd1201b296065602f61">GetPrivateEncrKey</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT const <a class="el" href="class_o_t_asymmetric_key.html">OTAsymmetricKey</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#aa60e86ffafcfba7c68801530c12c9927">GetPublicSignKey</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const <a class="el" href="class_o_t_asymmetric_key.html">OTAsymmetricKey</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#aca7ec90ca6e4511526dc49485f9f9a61">GetPrivateSignKey</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#ad506d78d8dd7d2a9620485e8c3688a6f">GetPublicKeysBySignature</a> (<a class="el" href="_o_t_asymmetric_key_8hpp.html#ada6127549a4970b60a8939215dd89ddb">listOfAsymmetricKeys</a> &amp;listOutput, const <a class="el" href="class_o_t_signature.html">OTSignature</a> &amp;theSignature, char cKeyType='0') const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#af3709c1b5203330b607ca0f0acff9c53">SaveCredentialList</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#ab43e09e7c6d2f7763360b5471f8e7cf3">SaveCredentialListToString</a> (<a class="el" href="class_o_t_string.html">OTString</a> &amp;strOutput)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a827f18578f6ef959984ccadcf5f432f6">SaveCredentialsToString</a> (<a class="el" href="class_o_t_string.html">OTString</a> &amp;strOutput, <a class="el" href="_o_t_string_8hpp.html#a7ec7839682b097a5c5b5c5125046c82b">mapOfStrings</a> *pmapPubInfo=NULL, <a class="el" href="_o_t_string_8hpp.html#a7ec7839682b097a5c5b5c5125046c82b">mapOfStrings</a> *pmapPriInfo=NULL)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#af864daa3291f61d81c1b61ad90efe52d">LoadCredentials</a> (bool bLoadPrivate=false, <a class="el" href="class_o_t_password_data.html">OTPasswordData</a> *pPWData=NULL, <a class="el" href="class_o_t_password.html">OTPassword</a> *pImportPassword=NULL)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#adf52e65c9002374a7298f17d97be5b57">ReEncryptPrivateCredentials</a> (bool bImporting, <a class="el" href="class_o_t_password_data.html">OTPasswordData</a> *pPWData=NULL, <a class="el" href="class_o_t_password.html">OTPassword</a> *pImportPassword=NULL)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#ad24db39caa89399f659f414b19903f90">LoadSignedNymfile</a> (<a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;SIGNER_NYM)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a5d08ef86097db038c2c4fd30034f5dc8">SaveSignedNymfile</a> (<a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;SIGNER_NYM)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a7f46f0911db1623fe966706a430cf0b7">LoadNymfile</a> (const char *szFilename=NULL)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a7992e8fbf785eeb2d5158cdf966c7a1b">LoadFromString</a> (const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strNym, <a class="el" href="_o_t_string_8hpp.html#a7ec7839682b097a5c5b5c5125046c82b">mapOfStrings</a> *pMapCredentials=NULL, <a class="el" href="class_o_t_string.html">OTString</a> *pstrReason=NULL, <a class="el" href="class_o_t_password.html">OTPassword</a> *pImportPassword=NULL)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a7e10c2692a4bd722ba1f3183e5923b51">Server_PubKeyExists</a> (<a class="el" href="class_o_t_string.html">OTString</a> *pstrID=NULL)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#aeb1c675ec72d6450e5c151d1f3eb95bf">LoadPublicKey</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a97211e2ab27668d1c23d59ac11b87b82">CertfileExists</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#aa5a79982c08a8db1c961d05fd449b585">Loadx509CertAndPrivateKey</a> (const bool bChecking=false, <a class="el" href="class_o_t_password_data.html">OTPasswordData</a> *pPWData=NULL, <a class="el" href="class_o_t_password.html">OTPassword</a> *pImportPassword=NULL)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#aa7e06445fd850c8a13cabf2283ca4f01">Loadx509CertAndPrivateKeyFromString</a> (const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strInput, <a class="el" href="class_o_t_password_data.html">OTPasswordData</a> *pPWData=NULL, <a class="el" href="class_o_t_password.html">OTPassword</a> *pImportPassword=NULL)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a395ce52dec4e07f04fb66521897c9cf2">Savex509CertAndPrivateKey</a> (bool bCreateFile=true, const <a class="el" href="class_o_t_string.html">OTString</a> *pstrReason=NULL)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#ab3b184a556bd73224556c7048fc78c68">Savex509CertAndPrivateKeyToString</a> (<a class="el" href="class_o_t_string.html">OTString</a> &amp;strOutput, const <a class="el" href="class_o_t_string.html">OTString</a> *pstrReason=NULL)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a6e04fda4d0beec8fb21f7d2749bf3f6b">SavePseudonymWallet</a> (<a class="el" href="class_o_t_string.html">OTString</a> &amp;strOutput) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a7ef7ca8c2748070b1738c2826138f723">SavePseudonymWallet</a> (std::ofstream &amp;ofs) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a7f665ecc7e3f70d32e8e7ffbca5b3ce2">SavePublicKey</a> (const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strPath) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a703d0ce5ab0e67fb3a6c5594928a881d">SavePublicKey</a> (std::ofstream &amp;ofs) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#ac4914854cf1643e776b182055f40e97a">SavePseudonym</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#ad47ff45f8d58367160aaa312f49d9371">SavePseudonym</a> (const char *szFoldername, const char *szFilename)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a5098bb37f76e316a21321771977e1fed">SavePseudonym</a> (<a class="el" href="class_o_t_string.html">OTString</a> &amp;strNym)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a72513ba4307b996d8e0417b178cb70db">SavePseudonym</a> (std::ofstream &amp;ofs)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#ac6c809c283846f8a7a3338a37998ba88">SetIdentifierByPubkey</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a5ec9340b8d1d0fcd32f754ea63f9915a">CompareID</a> (const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;theIdentifier) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#aa65f29a60de6ec3c737bc3f362dff850">CompareID</a> (const <a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;RHS) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#ab76ac495443316ded275e7bb281388d2">GetNymIDSource</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#ab8bd7424e1b95220cfe66372295664ff">GetAltLocation</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#acad61b197881c4ebffdf8ea01145c8d1">SetNymIDSource</a> (const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strSource)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a4cf79a66d25d8ea88b852afcd5e95284">SetAltLocation</a> (const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strLocation)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a9a6189232f8cde0df210920ce3839199">SerializeNymIDSource</a> (<a class="el" href="class_o_t_string.html">OTString</a> &amp;strOutput)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a8167f1e2d532ab18227c5c170922c611">GetConstID</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a1775c7aedd0dd25b2faf3f78dcccabe7">GetIdentifier</a> (<a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;theIdentifier) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a4b5f98378bb2ff1c48c5410f7283aff6">SetIdentifier</a> (const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;theIdentifier)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#aab41ab04c084ed675e766be743873f5d">GetIdentifier</a> (<a class="el" href="class_o_t_string.html">OTString</a> &amp;theIdentifier) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#addd8d693a15da8fe2fe1187caee03f11">SetIdentifier</a> (const <a class="el" href="class_o_t_string.html">OTString</a> &amp;theIdentifier)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#ac140c0c6ab67bb633b0826ad7914761f">HarvestTransactionNumbers</a> (const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;theServerID, <a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;SIGNER_NYM, <a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;theOtherNym, bool bSave=true)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#aa120e0e319f6c4f26fe68628701008fc">HarvestIssuedNumbers</a> (const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;theServerID, <a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;SIGNER_NYM, <a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;theOtherNym, bool bSave=false)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a29c787987f96abc9de8f3b268596a79e">ClawbackTransactionNumber</a> (const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;theServerID, const int64_t &amp;lTransClawback, bool bSave=false, <a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> *pSIGNER_NYM=NULL)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a0e2031a4404c589c3a492bd48eb63932">IncrementRequestNum</a> (<a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;SIGNER_NYM, const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strServerID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a853bfd2bc9909356bda7698423053076">OnUpdateRequestNum</a> (<a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;SIGNER_NYM, const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strServerID, int64_t lNewRequestNumber)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a3866622c214e0c9b9ede3b00df3cdcba">GetCurrentRequestNum</a> (const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strServerID, int64_t &amp;lReqNum)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a519cdd66f0b7eccb54e77ced3b827cb8">GetHighestNum</a> (const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strServerID, int64_t &amp;lHighestNum)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a3601074fdaebd0cbb752a5584781511d">UpdateHighestNum</a> (<a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;SIGNER_NYM, const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strServerID, std::set&lt; int64_t &gt; &amp;setNumbers, std::set&lt; int64_t &gt; &amp;setOutputGood, std::set&lt; int64_t &gt; &amp;setOutputBad, bool bSave=false)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="_o_t_pseudonym_8hpp.html#ac99ad82dc6c392a0a8c851c6041b62f1">mapOfTransNums</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#ad76c36d904dc79a4ce3115fefda3c197">GetMapTransNum</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="_o_t_pseudonym_8hpp.html#ac99ad82dc6c392a0a8c851c6041b62f1">mapOfTransNums</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a74e834007bee7a45651a98257152da72">GetMapIssuedNum</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="_o_t_pseudonym_8hpp.html#ac99ad82dc6c392a0a8c851c6041b62f1">mapOfTransNums</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a4e2a3cfc5b7b7f02fa95ad1b47ead694">GetMapTentativeNum</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="_o_t_pseudonym_8hpp.html#ac99ad82dc6c392a0a8c851c6041b62f1">mapOfTransNums</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a85032e117d04c1682eb6dd405694b5b2">GetMapAcknowledgedNum</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a482952f1676f239415215a1835b45f60">RemoveAllNumbers</a> (const <a class="el" href="class_o_t_string.html">OTString</a> *pstrServerID=NULL, const bool bRemoveHighestNum=true)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a1bce78db719b7733ba2a3fb19f963b24">RemoveReqNumbers</a> (const <a class="el" href="class_o_t_string.html">OTString</a> *pstrServerID=NULL)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#aec22b071d4218d5b49ce88236cd8cfb5">UnRegisterAtServer</a> (const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strServerID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#af5e9078ab475e6cd9c53e4ad2fae0417">IsRegisteredAtServer</a> (const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strServerID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a4524f90e444b02c8c2c9e4a2cb61f103">ResyncWithServer</a> (<a class="el" href="class_o_t_ledger.html">OTLedger</a> &amp;theNymbox, <a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;theMessageNym)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a2771ea8cf77d2ac05d942e149c2bc3e6">AddTransactionNum</a> (<a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;SIGNER_NYM, const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strServerID, int64_t lTransNum, bool bSave)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a82c5ec5457947738c807bffd581181ac">GetNextTransactionNum</a> (<a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;SIGNER_NYM, const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strServerID, int64_t &amp;lTransNum, bool bSave=true)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a17f25f5eb52440cc3ffc139dcbff75fe">RemoveIssuedNum</a> (<a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;SIGNER_NYM, const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strServerID, const int64_t &amp;lTransNum, bool bSave)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#af39adadda751a07bcd5388cd3528674f">RemoveTentativeNum</a> (<a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;SIGNER_NYM, const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strServerID, const int64_t &amp;lTransNum, bool bSave)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a0d8fd416811828f1eb8c07eb141790c2">RemoveAcknowledgedNum</a> (<a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;SIGNER_NYM, const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strServerID, const int64_t &amp;lRequestNum, bool bSave)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a66cf3b97f1769f9d422bad8787a6c1a0">VerifyIssuedNum</a> (const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strServerID, const int64_t &amp;lTransNum)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a13bbb470e627968c184ef4728ef85d7a">VerifyTransactionNum</a> (const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strServerID, const int64_t &amp;lTransNum)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#ac05ddbd6036b5304b7215251d1b7c9b0">VerifyTentativeNum</a> (const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strServerID, const int64_t &amp;lTransNum)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a11fd56ffbcef5fcebbd259bdb1bd7c8e">VerifyAcknowledgedNum</a> (const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strServerID, const int64_t &amp;lRequestNum)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a813cb5746e0f8461beca3c77f9f7457c">VerifyIssuedNumbersOnNym</a> (<a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;THE_NYM)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">See if two nyms have identical lists of issued transaction numbers (#s currently signed for.)  <a href="#a813cb5746e0f8461beca3c77f9f7457c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a52932b9c7bbb25ca21e1bf83d067e138">VerifyTransactionStatementNumbersOnNym</a> (<a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;THE_NYM)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#ac4fec9b0b744c9fbe3bae82c25661d19">GetIssuedNumCount</a> (const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;theServerID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#ada98078d45460303c6a746c53381f5aa">GetIssuedNum</a> (const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;theServerID, int32_t nIndex)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a331a9c5ec8692d0b88a76d882586fbc1">AddIssuedNum</a> (const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strServerID, const int64_t &amp;lTransNum)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a114a106a302eb3c72ce193ba5473225c">RemoveIssuedNum</a> (<a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;SIGNER_NYM, const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strServerID, const int64_t &amp;lTransNum)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a02a399f50d58eb199f83670e622135a0">RemoveIssuedNum</a> (const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strServerID, const int64_t &amp;lTransNum)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#adee7eef0a51e8e94522c43ac898c2308">GetTransactionNumCount</a> (const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;theServerID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#aaeccb4cd9e65abe19f382faee5ad8fd1">GetTransactionNum</a> (const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;theServerID, int32_t nIndex)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#abfa5e82ef1cb9aa18d112b33e04ece15">AddTransactionNum</a> (const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strServerID, const int64_t lTransNum)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a3fb93588f8e68c7f56cee00930f07d34">RemoveTransactionNum</a> (<a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;SIGNER_NYM, const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strServerID, const int64_t &amp;lTransNum)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a32daf8c09fc04dae849f8914c1c2ab17">RemoveTransactionNum</a> (const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strServerID, const int64_t &amp;lTransNum)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a1ed6d82fc103f5481730e90c17968c2d">GetTentativeNumCount</a> (const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;theServerID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a20a2ad12d8f802282ba15c2980d08a0c">GetTentativeNum</a> (const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;theServerID, int32_t nIndex)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a154a958a9f3cfdb07167858579f74037">AddTentativeNum</a> (const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strServerID, const int64_t &amp;lTransNum)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#ae05def6ec59bd22aa27de644ddec0c79">RemoveTentativeNum</a> (<a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;SIGNER_NYM, const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strServerID, const int64_t &amp;lTransNum)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a7d21ff2d2a7fac91a46b48ad903602f8">RemoveTentativeNum</a> (const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strServerID, const int64_t &amp;lTransNum)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a7f5e5ae674b53d13ab71a343c8924c8a">GetAcknowledgedNumCount</a> (const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;theServerID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a734cf5ea45bdcabf9a479acf1b5e6f7a">GetAcknowledgedNum</a> (const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;theServerID, int32_t nIndex)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#ae6b11aa38ba2894e1d8386d6e5589e2f">AddAcknowledgedNum</a> (const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strServerID, const int64_t &amp;lRequestNum)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#abbca64e1aa7d4582fcd562c5703f6372">RemoveAcknowledgedNum</a> (<a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;SIGNER_NYM, const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strServerID, const int64_t &amp;lRequestNum)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#ac831fdbb013c4e52f76d4b345dea95e1">RemoveAcknowledgedNum</a> (const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strServerID, const int64_t &amp;lRequestNum)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a5cecc3e38ed59ea6239cf0059d535d69">VerifyGenericNum</a> (<a class="el" href="_o_t_pseudonym_8hpp.html#ac99ad82dc6c392a0a8c851c6041b62f1">mapOfTransNums</a> &amp;THE_MAP, const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strServerID, const int64_t &amp;lTransNum)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a92916b7dfb3a99edbb41d3872dd262ef">RemoveGenericNum</a> (<a class="el" href="_o_t_pseudonym_8hpp.html#ac99ad82dc6c392a0a8c851c6041b62f1">mapOfTransNums</a> &amp;THE_MAP, <a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;SIGNER_NYM, const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strServerID, const int64_t &amp;lTransNum)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#ab8bb1e92eeccc922f83e07fbe16649e3">RemoveGenericNum</a> (<a class="el" href="_o_t_pseudonym_8hpp.html#ac99ad82dc6c392a0a8c851c6041b62f1">mapOfTransNums</a> &amp;THE_MAP, const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strServerID, const int64_t &amp;lTransNum)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#adb2f698760342cc933846915a737c823">AddGenericNum</a> (<a class="el" href="_o_t_pseudonym_8hpp.html#ac99ad82dc6c392a0a8c851c6041b62f1">mapOfTransNums</a> &amp;THE_MAP, const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strServerID, const int64_t lTransNum)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a9fa197753dda1dfb88b286bdeb615c83">GetGenericNumCount</a> (<a class="el" href="_o_t_pseudonym_8hpp.html#ac99ad82dc6c392a0a8c851c6041b62f1">mapOfTransNums</a> &amp;THE_MAP, const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;theServerID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a811557a9ca1e0b98665d0530df901950">GetGenericNum</a> (<a class="el" href="_o_t_pseudonym_8hpp.html#ac99ad82dc6c392a0a8c851c6041b62f1">mapOfTransNums</a> &amp;THE_MAP, const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;theServerID, int32_t nIndex)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#abda249e911a4ddc8db3c97e58b3423fb">AddMail</a> (<a class="el" href="class_o_t_message.html">OTMessage</a> &amp;theMessage)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a6a449ad7415513ce538c4a2e71efde87">GetMailCount</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">return the number of mail items available for this Nym.  <a href="#a6a449ad7415513ce538c4a2e71efde87"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT <a class="el" href="class_o_t_message.html">OTMessage</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a41d4a62c9e863fa982c7b4899bfcd3cb">GetMailByIndex</a> (const int32_t nIndex)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a7f32350b2827a62bbfa5ef09a392f129">RemoveMailByIndex</a> (const int32_t nIndex)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#aa7b723e13e5e9ccfee6cc18e1a31d16d">ClearMail</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a908900d7fa217571e2dd3a6c06789a9b">AddOutmail</a> (<a class="el" href="class_o_t_message.html">OTMessage</a> &amp;theMessage)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a746ab3941be5529f11a772a004e17b69">GetOutmailCount</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">return the number of mail items available for this Nym.  <a href="#a746ab3941be5529f11a772a004e17b69"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT <a class="el" href="class_o_t_message.html">OTMessage</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a126bbb8a3d356a0fd2118c95dfe6cbea">GetOutmailByIndex</a> (const int32_t nIndex)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#ae2510d04ffb6c0e01aeda1b75a59d1ef">RemoveOutmailByIndex</a> (const int32_t nIndex)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a23228dd99eaad6132f556ad1e3088f86">ClearOutmail</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a0e6b0025655ea295902be7ea71ec444c">AddOutpayments</a> (<a class="el" href="class_o_t_message.html">OTMessage</a> &amp;theMessage)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a66289f0575ef0b91cb5fefa4483f0d3e">GetOutpaymentsCount</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">return the number of payments items available for this Nym.  <a href="#a66289f0575ef0b91cb5fefa4483f0d3e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT <a class="el" href="class_o_t_message.html">OTMessage</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#acb808e89943f1f2d0009825a3fbcb34f">GetOutpaymentsByIndex</a> (const int32_t nIndex)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a2d66a8a46d8e147ca0dbc0fb45bc364d">RemoveOutpaymentsByIndex</a> (const int32_t nIndex, bool bDeleteIt=true)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a1ab1d3f7effd153652301063f3ed467b">ClearOutpayments</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a0fb41be70cd60e4febffce961bf39823">GetOutpaymentsIndexByTransNum</a> (const int64_t lTransNum)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a66fe7d0cf3d0e190f7c103fb2dc16d57">ClearCredentials</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#aac1c0719b846cc3d98286ff29ba63684">ClearAll</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#aaded4e78ed9fa9960ee67a391c793b9e">DisplayStatistics</a> (<a class="el" href="class_o_t_string.html">OTString</a> &amp;strOutput)</td></tr>
<tr><td colspan="2"><h2><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static EXPORT <a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#aef446a600137c016e2db08d89304ff93">LoadPublicNym</a> (const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;NYM_ID, <a class="el" href="class_o_t_string.html">OTString</a> *pstrName=NULL, const char *szFuncName=NULL)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static EXPORT <a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#ac1e2478e3a8604944d2d826df8afedd6">LoadPrivateNym</a> (const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;NYM_ID, const bool bChecking=false, <a class="el" href="class_o_t_string.html">OTString</a> *pstrName=NULL, const char *szFuncName=NULL, <a class="el" href="class_o_t_password_data.html">OTPasswordData</a> *pPWData=NULL, <a class="el" href="class_o_t_password.html">OTPassword</a> *pImportPassword=NULL)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_pseudonym.html#a9dd185e1a1c2e263e4a2978aefed21c2">DoesCertfileExist</a> (const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strNymID)</td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock">
<p>Definition at line <a class="el" href="_o_t_pseudonym_8hpp_source.html#l00164">164</a> of file <a class="el" href="_o_t_pseudonym_8hpp_source.html">OTPseudonym.hpp</a>.</p>
</div><hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a0da04833e553c34be87a89fb22dd8a1c"></a><!-- doxytag: member="OTPseudonym::OTPseudonym" ref="a0da04833e553c34be87a89fb22dd8a1c" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_pseudonym.html#a0da04833e553c34be87a89fb22dd8a1c">OTPseudonym::OTPseudonym</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l06049">6049</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                         : m_bMarkForDeletion(<span class="keyword">false</span>), m_pkeypair(<span class="keyword">new</span> <a class="code" href="class_o_t_keypair.html">OTKeypair</a>), m_lUsageCredits(0)
{
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != m_pkeypair);

    <a class="code" href="class_o_t_pseudonym.html#a26af2636e74e0be1430b7934962f2932">Initialize</a>();
}
</pre></div>
</div>
</div>
<a class="anchor" id="a80b32f09dee440a3bc5df74bef81bbe4"></a><!-- doxytag: member="OTPseudonym::OTPseudonym" ref="a80b32f09dee440a3bc5df74bef81bbe4" args="(const OTIdentifier &amp;nymID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_pseudonym.html#a0da04833e553c34be87a89fb22dd8a1c">OTPseudonym::OTPseudonym</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;&#160;</td>
          <td class="paramname"><em>nymID</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l06077">6077</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                   : m_bMarkForDeletion(<span class="keyword">false</span>), m_pkeypair(<span class="keyword">new</span> <a class="code" href="class_o_t_keypair.html">OTKeypair</a>), m_lUsageCredits(0)
{
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != m_pkeypair);

    <a class="code" href="class_o_t_pseudonym.html#a26af2636e74e0be1430b7934962f2932">Initialize</a>();

    m_nymID = nymID;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a9b7fb54d3705ac69e46296d2269092dd"></a><!-- doxytag: member="OTPseudonym::OTPseudonym" ref="a9b7fb54d3705ac69e46296d2269092dd" args="(const OTString &amp;strNymID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_pseudonym.html#a0da04833e553c34be87a89fb22dd8a1c">OTPseudonym::OTPseudonym</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strNymID</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l06087">6087</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                  : m_bMarkForDeletion(<span class="keyword">false</span>), m_pkeypair(<span class="keyword">new</span> <a class="code" href="class_o_t_keypair.html">OTKeypair</a>), m_lUsageCredits(0)
{
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != m_pkeypair);

    <a class="code" href="class_o_t_pseudonym.html#a26af2636e74e0be1430b7934962f2932">Initialize</a>();

    m_nymID.<a class="code" href="class_o_t_identifier.html#ae29aa1245d3831a207aabc9b8a493bfc">SetString</a>(strNymID);
}
</pre></div>
</div>
</div>
<a class="anchor" id="acdc0db8f34b7da5f1c0acb4be1b98954"></a><!-- doxytag: member="OTPseudonym::OTPseudonym" ref="acdc0db8f34b7da5f1c0acb4be1b98954" args="(const OTString &amp;name, const OTString &amp;filename, const OTString &amp;nymID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_pseudonym.html#a0da04833e553c34be87a89fb22dd8a1c">OTPseudonym::OTPseudonym</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>nymID</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l06063">6063</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment"> : m_bMarkForDeletion(<span class="keyword">false</span>), m_pkeypair(<span class="keyword">new</span> <a class="code" href="class_o_t_keypair.html">OTKeypair</a>), m_lUsageCredits(0)
{
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != m_pkeypair);

    <a class="code" href="class_o_t_pseudonym.html#a26af2636e74e0be1430b7934962f2932">Initialize</a>();

    m_strName       = name;
    m_strNymfile    = filename;

    m_nymID.<a class="code" href="class_o_t_identifier.html#ae29aa1245d3831a207aabc9b8a493bfc">SetString</a>(nymID);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a7f5f6e2522981c7d45510ab38f28b1c7"></a><!-- doxytag: member="OTPseudonym::~OTPseudonym" ref="a7f5f6e2522981c7d45510ab38f28b1c7" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_pseudonym.html#a7f5f6e2522981c7d45510ab38f28b1c7">OTPseudonym::~OTPseudonym</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l06152">6152</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// -----------------------------</span>
    <a class="code" href="class_o_t_pseudonym.html#aac1c0719b846cc3d98286ff29ba63684">ClearAll</a>();
    <a class="code" href="class_o_t_pseudonym.html#a66fe7d0cf3d0e190f7c103fb2dc16d57">ClearCredentials</a>();
    <span class="comment">// -----------------------------</span>
    <span class="keywordflow">if</span> (NULL != m_pkeypair)
        <span class="keyword">delete</span> m_pkeypair; <span class="comment">// todo: else error</span>
    <span class="comment">// -----------------------------</span>
    m_pkeypair  = NULL;
    <span class="comment">// -----------------------------</span>
}
</pre></div>
</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="ae6b11aa38ba2894e1d8386d6e5589e2f"></a><!-- doxytag: member="OTPseudonym::AddAcknowledgedNum" ref="ae6b11aa38ba2894e1d8386d6e5589e2f" args="(const OTString &amp;strServerID, const int64_t &amp;lRequestNum)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_pseudonym.html#ae6b11aa38ba2894e1d8386d6e5589e2f">OTPseudonym::AddAcknowledgedNum</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strServerID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int64_t &amp;&#160;</td>
          <td class="paramname"><em>lRequestNum</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l02358">2358</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// We&#39;re going to call AddGenericNum, but first, let&#39;s enforce a cap on the total</span>
    <span class="comment">// number of ackNums allowed...</span>
    <span class="comment">//</span>
    std::string strID = strServerID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();

    <span class="comment">// The Pseudonym has a deque of transaction numbers for each server.</span>
    <span class="comment">// These deques are mapped by Server ID.</span>
    <span class="comment">//</span>
    <span class="comment">// So let&#39;s loop through all the deques I have, and if the server ID on the map</span>
    <span class="comment">// matches the Server ID that was passed in, then we&#39;ll pop the size of the deque</span>
    <span class="comment">// down to our max size (off the back) before then calling AddGenericNum which will</span>
    <span class="comment">// push the new request number onto the front.</span>
    <span class="comment">//</span>
    <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_pseudonym_8hpp.html#ac99ad82dc6c392a0a8c851c6041b62f1">mapOfTransNums</a>, m_mapAcknowledgedNum)
    {
        <span class="comment">// if the ServerID passed in matches the serverID for the current deque</span>
        <span class="keywordflow">if</span> ( strID == it-&gt;first )
        {
            <a class="code" href="_o_t_pseudonym_8hpp.html#a94632bfde6cf91c8294122f77527bcf1">dequeOfTransNums</a> * pDeque = (it-&gt;second);
            <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pDeque);

            <span class="keywordflow">while</span> (pDeque-&gt;size() &gt; <a class="code" href="_o_t_pseudonym_8cpp.html#a0e884757b617718ac367065ce8eb3c77">OT_MAX_ACK_NUMS</a>)
            {
                pDeque-&gt;pop_back(); <span class="comment">// This fixes knotwork&#39;s issue where he had thousands of ack nums somehow never getting cleared out. Now we have a MAX and always keep it clean otherwise.</span>
            }
            <span class="keywordflow">break</span>;
        }
    }
    <span class="comment">// ---------------------------------</span>
    <span class="keywordflow">return</span> <a class="code" href="class_o_t_pseudonym.html#adb2f698760342cc933846915a737c823">AddGenericNum</a>(m_mapAcknowledgedNum, strServerID, lRequestNum); <span class="comment">// &lt;=== Here we finally add the new request number, the actual purpose of this function.</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="adb2f698760342cc933846915a737c823"></a><!-- doxytag: member="OTPseudonym::AddGenericNum" ref="adb2f698760342cc933846915a737c823" args="(mapOfTransNums &amp;THE_MAP, const OTString &amp;strServerID, const int64_t lTransNum)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_pseudonym.html#adb2f698760342cc933846915a737c823">OTPseudonym::AddGenericNum</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_o_t_pseudonym_8hpp.html#ac99ad82dc6c392a0a8c851c6041b62f1">mapOfTransNums</a> &amp;&#160;</td>
          <td class="paramname"><em>THE_MAP</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strServerID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int64_t&#160;</td>
          <td class="paramname"><em>lTransNum</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l02032">2032</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">bool</span> bSuccessFindingServerID = <span class="keyword">false</span>, bSuccess = <span class="keyword">false</span>;
    std::string strID   = strServerID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();

    <span class="comment">// The Pseudonym has a deque of transaction numbers for each server.</span>
    <span class="comment">// These deques are mapped by Server ID.</span>
    <span class="comment">//</span>
    <span class="comment">// So let&#39;s loop through all the deques I have, and if the server ID on the map</span>
    <span class="comment">// matches the Server ID that was passed in, then add the transaction number.</span>
    <span class="comment">//</span>
    <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_pseudonym_8hpp.html#ac99ad82dc6c392a0a8c851c6041b62f1">mapOfTransNums</a>, THE_MAP)
    {
        <span class="comment">// if the ServerID passed in matches the serverID for the current deque</span>
        <span class="keywordflow">if</span> ( strID == it-&gt;first )
        {
            <a class="code" href="_o_t_pseudonym_8hpp.html#a94632bfde6cf91c8294122f77527bcf1">dequeOfTransNums</a> * pDeque = (it-&gt;second);
            <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pDeque);

            dequeOfTransNums::iterator iiii = std::find(pDeque-&gt;begin(), pDeque-&gt;end(), lTransNum);

            <span class="keywordflow">if</span> (iiii == pDeque-&gt;end()) <span class="comment">// Only add it if it&#39;s not already there. No duplicates!</span>
                pDeque-&gt;push_front(lTransNum);

            bSuccess                = <span class="keyword">true</span>;
            bSuccessFindingServerID = <span class="keyword">true</span>;

            <span class="keywordflow">break</span>;
        }
    }

    <span class="comment">// Apparently there is not yet a deque stored for this specific serverID.</span>
    <span class="comment">// Fine. Let&#39;s create it then, and then add the transaction num to that new deque.</span>
    <span class="keywordflow">if</span> (!bSuccessFindingServerID)
    {
        <a class="code" href="_o_t_pseudonym_8hpp.html#a94632bfde6cf91c8294122f77527bcf1">dequeOfTransNums</a> * pDeque = <span class="keyword">new</span> <a class="code" href="_o_t_pseudonym_8hpp.html#a94632bfde6cf91c8294122f77527bcf1">dequeOfTransNums</a>;

        <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pDeque);

        THE_MAP[strID] = pDeque;
        pDeque-&gt;push_front(lTransNum);
        bSuccess = <span class="keyword">true</span>;
    }

    <span class="keywordflow">return</span> bSuccess;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a331a9c5ec8692d0b88a76d882586fbc1"></a><!-- doxytag: member="OTPseudonym::AddIssuedNum" ref="a331a9c5ec8692d0b88a76d882586fbc1" args="(const OTString &amp;strServerID, const int64_t &amp;lTransNum)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_pseudonym.html#a331a9c5ec8692d0b88a76d882586fbc1">OTPseudonym::AddIssuedNum</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strServerID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int64_t &amp;&#160;</td>
          <td class="paramname"><em>lTransNum</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l02265">2265</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> <a class="code" href="class_o_t_pseudonym.html#adb2f698760342cc933846915a737c823">AddGenericNum</a>(m_mapIssuedNum, strServerID, lTransNum);
}
</pre></div>
</div>
</div>
<a class="anchor" id="abda249e911a4ddc8db3c97e58b3423fb"></a><!-- doxytag: member="OTPseudonym::AddMail" ref="abda249e911a4ddc8db3c97e58b3423fb" args="(OTMessage &amp;theMessage)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_pseudonym.html#abda249e911a4ddc8db3c97e58b3423fb">OTPseudonym::AddMail</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_message.html">OTMessage</a> &amp;&#160;</td>
          <td class="paramname"><em>theMessage</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Though the parameter is a reference (forcing you to pass a real object), the Nym DOES take ownership of the object. Therefore it MUST be allocated on the heap, NOT the stack, or you will corrupt memory with this call. </p>

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l00879">879</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    m_dequeMail.push_front(&amp;theMessage);
}
</pre></div>
</div>
</div>
<a class="anchor" id="aca99509bdb4ceb7ff4fdb793998aa794"></a><!-- doxytag: member="OTPseudonym::AddNewMasterCredential" ref="aca99509bdb4ceb7ff4fdb793998aa794" args="(OTString &amp;strOutputMasterCredID, const OTString *pstrSourceForNymID=NULL, const int32_t nBits=1024, const mapOfStrings *pmapPrivate=NULL, const mapOfStrings *pmapPublic=NULL, OTPasswordData *pPWData=NULL, bool bChangeNymID=false)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_pseudonym.html#aca99509bdb4ceb7ff4fdb793998aa794">OTPseudonym::AddNewMasterCredential</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strOutputMasterCredID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> *&#160;</td>
          <td class="paramname"><em>pstrSourceForNymID</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int32_t&#160;</td>
          <td class="paramname"><em>nBits</em> = <code>1024</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="_o_t_string_8hpp.html#a7ec7839682b097a5c5b5c5125046c82b">mapOfStrings</a> *&#160;</td>
          <td class="paramname"><em>pmapPrivate</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="_o_t_string_8hpp.html#a7ec7839682b097a5c5b5c5125046c82b">mapOfStrings</a> *&#160;</td>
          <td class="paramname"><em>pmapPublic</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_password_data.html">OTPasswordData</a> *&#160;</td>
          <td class="paramname"><em>pPWData</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>bChangeNymID</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l00330">330</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keyword">const</span>
    <a class="code" href="class_o_t_string.html">OTString</a> * pstrSourceToUse  = NULL;
    <a class="code" href="class_o_t_string.html">OTString</a>   strTempSource; <span class="comment">// Used sometimes.</span>
    <span class="keywordtype">bool</span>       bCreatedKeypair = <span class="keyword">false</span>;
    <span class="comment">// -----------------------------------------------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="_o_t_string_8hpp.html#a7ec7839682b097a5c5b5c5125046c82b">mapOfStrings</a> * pmapActualPrivate = NULL;
    <span class="keyword">const</span> <a class="code" href="_o_t_string_8hpp.html#a7ec7839682b097a5c5b5c5125046c82b">mapOfStrings</a> * pmapActualPublic  = NULL;
    <span class="comment">// -----------------------------------------------------------------------</span>
    <a class="code" href="_o_t_string_8hpp.html#a7ec7839682b097a5c5b5c5125046c82b">mapOfStrings</a>   mapPrivate, mapPublic; <span class="comment">// Used sometimes.</span>
    <span class="comment">// -----------------------------------------------------------------------</span>
    <span class="comment">// If keys are passed in, then those are the keys we&#39;re meant to use for the credential.</span>
    <span class="comment">//</span>
    <span class="comment">// Note: if the Nym is self-signed, then his &quot;source&quot; is his public key, which can thus</span>
    <span class="comment">// never change (because it would change his ID.) We only allow this in the case where a</span>
    <span class="comment">// Nym is first being created.</span>
    <span class="comment">//</span>
    <span class="comment">// But if the Nym has a real source (such as a URL, or Namecoin address, etc) then he should</span>
    <span class="comment">// be able to create new credentials, and should BOTH be able to generate keys on the spot,</span>
    <span class="comment">// OR pass in keys to use that were generated before this function was called.</span>
    <span class="comment">//</span>
    <span class="comment">// Therefore here, we choose to use the keys passed in--if they were passed--and otherwise</span>
    <span class="comment">// we generate the keys.</span>
    <span class="comment">//</span>
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != m_pkeypair);
    <span class="comment">// ----------------------------------------------</span>
    <span class="keywordflow">if</span> (NULL == pmapPrivate) <span class="comment">// If no keys were passed in...</span>
    {
        <span class="comment">// That means to use (or generate) my existing keypair as the signing key,</span>
        <span class="comment">// and generate the other two keypairs also.</span>
        <span class="comment">// ----------------------------------------------</span>
        <span class="keyword">const</span> <span class="keywordtype">size_t</span> sizeMapPublic  = mapPublic .size();
        <span class="keyword">const</span> <span class="keywordtype">size_t</span> sizeMapPrivate = mapPrivate.size();
        <span class="comment">// ----------------------------------------------</span>
        <a class="code" href="class_o_t_string.html">OTString</a> strReason, strPublicError, strPrivateError;
        <span class="comment">// ----------------------------------------------</span>
        <span class="comment">// Nym already has a keypair. (Use it as the signing key.)</span>
        <span class="comment">//</span>
        <span class="comment">// NOTE: We only want to do this if the Nym doesn&#39;t already have any credentials.</span>
        <span class="comment">// Presumably if there are already credentials, then we want any NEW credentials to</span>
        <span class="comment">// have their own keys. Only when there are none (meaning, we are currently creating</span>
        <span class="comment">// the FIRST one) do we want to use the existing keypair. Otherwise we want to generate</span>
        <span class="comment">// a new signing key.</span>
        <span class="comment">//</span>
        <span class="comment">// Exception: &quot;Presumably if there are already credentials, then we want any NEW credentials</span>
        <span class="comment">// to have their own keys&quot; ==&gt; If it&#39;s a self-signed Nym, then EVEN if there are existing</span>
        <span class="comment">// credentials, we want to use the existing signing key, since in that case, all credentials</span>
        <span class="comment">// would have the same signing key, which is also the Nym ID source (we cannot ever change it,</span>
        <span class="comment">// since that would also change the Nym&#39;s ID. That is the drawback of self-signed Nyms.)</span>
        <span class="comment">//</span>
        <span class="comment">// Therefore we need to check here to see if the Nym is self-signed:</span>
        <span class="comment">//</span>
        <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theSelfSignedNymID;
        m_pkeypair-&gt;<a class="code" href="class_o_t_keypair.html#abaedcf0bc34c23c733be8a84371ef27f">CalculateID</a>(theSelfSignedNymID);
        <span class="comment">// ----------------------------------------------</span>
        <span class="keywordflow">if</span> ((!(m_mapCredentials.size() &gt; 0)      ||
            this-&gt;<a class="code" href="class_o_t_pseudonym.html#a5ec9340b8d1d0fcd32f754ea63f9915a">CompareID</a>(theSelfSignedNymID)) &amp;&amp;  <span class="comment">// If there AREN&#39;T any credentials yet, or if the Nym is self-signed,</span>
            (this-&gt;<a class="code" href="class_o_t_pseudonym.html#a5d685c100f1947ed7aa467434298b40d">HasPublicKey</a> () ||                <span class="comment">// and if we have a keypair already, use it</span>
             this-&gt;<a class="code" href="class_o_t_pseudonym.html#aeb1c675ec72d6450e5c151d1f3eb95bf">LoadPublicKey</a>() ))                <span class="comment">// to create the first credential.</span>
        {
            strReason      .<a class="code" href="class_o_t_string.html#aa5db620fe8e60c849585d741975db991">Set</a>(<span class="stringliteral">&quot;Using existing signing key for new master credential (preserving existing Nym keypair.)&quot;</span>);
            strPublicError .<a class="code" href="class_o_t_string.html#aa5db620fe8e60c849585d741975db991">Set</a>(<span class="stringliteral">&quot;In %s, line %d: Failed using existing public key as public signing key in OTPseudonym::%s.\n&quot;</span>);
            strPrivateError.<a class="code" href="class_o_t_string.html#aa5db620fe8e60c849585d741975db991">Set</a>(<span class="stringliteral">&quot;In %s, line %d: Failed using existing private key as private signing key in OTPseudonym::%s.\n&quot;</span>);
        }
        <span class="comment">// ----------------------------------------------</span>
        <span class="keywordflow">else</span> <span class="comment">// GENERATE A NEW KEYPAIR.</span>
        {
            <span class="keyword">const</span> <span class="keywordtype">bool</span> bCreateKeySigning = m_pkeypair-&gt;<a class="code" href="class_o_t_keypair.html#aade0cd755f82672f25d1971dd59db688">MakeNewKeypair</a>(nBits);
            <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a> (bCreateKeySigning);
            <span class="comment">// ----------------------------------------------</span>
            m_pkeypair-&gt;<a class="code" href="class_o_t_keypair.html#af431803f4f3e6635d4ecf71c211b2873">SaveAndReloadBothKeysFromTempFile</a>();  <span class="comment">// Keys won&#39;t be right until this happens. (Necessary evil until better fix.) Todo: eliminate need to do this.</span>
            bCreatedKeypair = <span class="keyword">true</span>;
            <span class="comment">// ----------------------------------------------</span>
            strReason      .<a class="code" href="class_o_t_string.html#aa5db620fe8e60c849585d741975db991">Set</a>(<span class="stringliteral">&quot;Generating signing key for new master credential.&quot;</span>);
            strPublicError .<a class="code" href="class_o_t_string.html#aa5db620fe8e60c849585d741975db991">Set</a>(<span class="stringliteral">&quot;In %s, line %d: Failed creating public signing key in OTPseudonym::%s.\n&quot;</span>);
            strPrivateError.<a class="code" href="class_o_t_string.html#aa5db620fe8e60c849585d741975db991">Set</a>(<span class="stringliteral">&quot;In %s, line %d: Failed creating private signing key in OTPseudonym::%s.\n&quot;</span>);
        }
        <span class="comment">// ------------------------------------------</span>
        <span class="comment">// SIGNING KEY</span>
        <span class="comment">//</span>
        <a class="code" href="class_o_t_string.html">OTString</a> strPublicKey, strPrivateCert;
        <span class="comment">// ------------------------------------------</span>
        <span class="keyword">const</span> <span class="keywordtype">bool</span> b1 = m_pkeypair-&gt;<a class="code" href="class_o_t_keypair.html#a67aebd0a39826bbc429bb2676fde9fcd">GetPublicKey</a>(strPublicKey, <span class="keyword">false</span>); <span class="comment">// bEscaped=true by default.</span>
        <span class="keyword">const</span> <span class="keywordtype">bool</span> b2 = m_pkeypair-&gt;<a class="code" href="class_o_t_keypair.html#a856051cd5e93e30a8f166dd8132ed844">SaveCertAndPrivateKeyToString</a>(strPrivateCert, &amp;strReason);
        <span class="comment">// ----------------------------------------------</span>
        <span class="keywordflow">if</span> (b1 &amp;&amp; b2)
        {
            mapPublic. insert(std::pair&lt;std::string, std::string&gt;(<span class="stringliteral">&quot;S&quot;</span>, strPublicKey.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>()));
            mapPrivate.insert(std::pair&lt;std::string, std::string&gt;(<span class="stringliteral">&quot;S&quot;</span>, strPrivateCert.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>()));
        }
        <span class="comment">// ------------------------------------------</span>
        <span class="keywordflow">if</span> (!b1 || !(mapPublic.size() &gt; sizeMapPublic))
        {
            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(strPublicError.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(),
                          __FILE__, __LINE__, __FUNCTION__);
            <span class="keywordflow">return</span> <span class="keyword">false</span>;
        }
        <span class="comment">// ------------------------------------------</span>
        <span class="keywordflow">if</span> (!b2 || !(mapPrivate.size() &gt; sizeMapPrivate))
        {
            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(strPrivateError.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(),
                          __FILE__, __LINE__, __FUNCTION__);
            <span class="keywordflow">return</span> <span class="keyword">false</span>;
        }
        <span class="comment">// *************************************************************************************8</span>
        <span class="comment">// Whether the Nym already had a keypair, and we used it as the signing key,</span>
        <span class="comment">// or whether we generated the signing key on the spot, either way we still</span>
        <span class="comment">// need to generate the other two keys.</span>
        <span class="comment">//</span>
        <span class="comment">// Create 2 keypairs here (for authentication and for encryption.)</span>
        <span class="comment">//</span>
        <span class="comment">// Use the public/private data for all 3 keypairs onto mapPublic and</span>
        <span class="comment">// mapPrivate.</span>
        <span class="comment">//</span>
        <span class="comment">// ----------------------------------------------</span>
        <a class="code" href="class_o_t_keypair.html">OTKeypair</a> keyAuth, keyEncr;  <span class="comment">// (The signing keypair already exists by this point. These are the other two we need.)</span>
        <span class="comment">// ----------------------------------------------</span>
        <span class="keyword">const</span> <span class="keywordtype">bool</span> bCreateKeyAuth = keyAuth.<a class="code" href="class_o_t_keypair.html#aade0cd755f82672f25d1971dd59db688">MakeNewKeypair</a>();
        <span class="keyword">const</span> <span class="keywordtype">bool</span> bCreateKeyEncr = keyEncr.<a class="code" href="class_o_t_keypair.html#aade0cd755f82672f25d1971dd59db688">MakeNewKeypair</a>();
        <span class="comment">// ----------------------------------------------</span>
        <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(bCreateKeyAuth &amp;&amp; bCreateKeyEncr);
        <span class="comment">// ----------------------------------------------</span>
        keyAuth.<a class="code" href="class_o_t_keypair.html#af431803f4f3e6635d4ecf71c211b2873">SaveAndReloadBothKeysFromTempFile</a>();  <span class="comment">// Keys won&#39;t be right until this happens.</span>
        keyEncr.<a class="code" href="class_o_t_keypair.html#af431803f4f3e6635d4ecf71c211b2873">SaveAndReloadBothKeysFromTempFile</a>();  <span class="comment">// (Necessary evil until better fix.) Todo: eliminate need to do this.</span>
        <span class="comment">// ---------------------------------------------------------------------------------</span>
        strPublicKey.  Release();
        strPrivateCert.<a class="code" href="class_o_t_string.html#abef4b21b2170468705c58d64212d7257">Release</a>();
        <span class="comment">// ----------------------------------------------</span>
        <span class="keyword">const</span> <span class="keywordtype">bool</span> b3 = keyAuth.<a class="code" href="class_o_t_keypair.html#a67aebd0a39826bbc429bb2676fde9fcd">GetPublicKey</a>(strPublicKey, <span class="keyword">false</span>); <span class="comment">// bEscaped=true by default.</span>
        <span class="keyword">const</span> <span class="keywordtype">bool</span> b4 = keyAuth.<a class="code" href="class_o_t_keypair.html#a856051cd5e93e30a8f166dd8132ed844">SaveCertAndPrivateKeyToString</a>(strPrivateCert, &amp;strReason);
        <span class="comment">// ------------------------------------------</span>
        <span class="keywordflow">if</span> (b3 &amp;&amp; b4)
        {
            mapPublic. insert(std::pair&lt;std::string, std::string&gt;(<span class="stringliteral">&quot;A&quot;</span>, strPublicKey.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>()));
            mapPrivate.insert(std::pair&lt;std::string, std::string&gt;(<span class="stringliteral">&quot;A&quot;</span>, strPrivateCert.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>()));
        }
        <span class="comment">// ---------------------------------------------------------------------------------</span>
        strPublicKey.  Release();
        strPrivateCert.<a class="code" href="class_o_t_string.html#abef4b21b2170468705c58d64212d7257">Release</a>();
        <span class="comment">// ----------------------------------------------</span>
        <span class="keyword">const</span> <span class="keywordtype">bool</span> b5 = keyEncr.<a class="code" href="class_o_t_keypair.html#a67aebd0a39826bbc429bb2676fde9fcd">GetPublicKey</a>(strPublicKey, <span class="keyword">false</span>); <span class="comment">// bEscaped=true by default.</span>
        <span class="keyword">const</span> <span class="keywordtype">bool</span> b6 = keyEncr.<a class="code" href="class_o_t_keypair.html#a856051cd5e93e30a8f166dd8132ed844">SaveCertAndPrivateKeyToString</a>(strPrivateCert, &amp;strReason);
        <span class="comment">// ------------------------------------------</span>
        <span class="keywordflow">if</span> (b5 &amp;&amp; b6)
        {
            mapPublic. insert(std::pair&lt;std::string, std::string&gt;(<span class="stringliteral">&quot;E&quot;</span>, strPublicKey.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>()));
            mapPrivate.insert(std::pair&lt;std::string, std::string&gt;(<span class="stringliteral">&quot;E&quot;</span>, strPrivateCert.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>()));
        }
        <span class="comment">// ------------------------------------------</span>
        <span class="keywordflow">if</span> (!(mapPublic.size() &gt;= (sizeMapPublic + 3)))
        {
            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;In %s, line %d: Failed adding (auth or encr) public keys in OTPseudonym::%s.\n&quot;</span>,
                          __FILE__, __LINE__, __FUNCTION__);
            <span class="keywordflow">return</span> <span class="keyword">false</span>;
        }
        <span class="comment">// --------------------------------</span>
        <span class="keywordflow">if</span> (!(mapPrivate.size() &gt;= (sizeMapPrivate + 3)))
        {
            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;In %s, line %d: Failed adding (auth or encr) private keys in OTPseudonym::%s.\n&quot;</span>,
                          __FILE__, __LINE__, __FUNCTION__);
            <span class="keywordflow">return</span> <span class="keyword">false</span>;
        }
        <span class="comment">// --------------------------------</span>
        pmapActualPrivate = &amp;mapPrivate;
        pmapActualPublic  = &amp;mapPublic;
        <span class="comment">// --------------------------------</span>
    } <span class="comment">// A private key wasn&#39;t passed in.</span>
    <span class="comment">// ----------------------------------------------</span>
    <span class="comment">// A keypair WAS passed in...</span>
    <span class="comment">//</span>
    <span class="keywordflow">else</span>
    {
        <span class="comment">// If keys were passed in, then we&#39;re going to use those to create the new credential.</span>
        <span class="comment">//</span>
        pmapActualPrivate = pmapPrivate;
        pmapActualPublic  = pmapPublic;

        <span class="comment">// Therefore in that case, the Nym had better not be self-signed, since if he was,</span>
        <span class="comment">// he couldn&#39;t change the key (since his NymID is a hash of the public key.)</span>
        <span class="comment">//</span>
        <span class="comment">// Thus the Nym should have some other source besides his own key, or at least he</span>
        <span class="comment">// should be a new Nym being created.</span>
    }
    <span class="comment">// ************************************************************************************</span>
    <span class="comment">//</span>
    <span class="comment">// SOURCE</span>
    <span class="comment">//</span>
    <span class="comment">// A source was passed in. We know it&#39;s not a public key, since its hash will not match the existing</span>
    <span class="comment">// Nym ID. (Only the existing public key will match that when hashed, and you can use that by passing NULL</span>
    <span class="comment">// already, which is the following block.) Therefore it must be one of the other choices: a Freenet/I2P/Tor URL,</span>
    <span class="comment">// or indeed any URL at all, a Bitcoin address, a Namecoin address (which is actually a form of URL also.)</span>
    <span class="comment">// Or of course, the Issuer/Subject DN info from a traditionally-issued cert. In which case we are low-level</span>
    <span class="comment">// enough that we will potentially change the NymID here based on that option. But we won&#39;t do that for a public</span>
    <span class="comment">// key, unless you pass NULL.</span>
    <span class="comment">//</span>
    <span class="keywordflow">if</span> ((NULL != pstrSourceForNymID) &amp;&amp; pstrSourceForNymID-&gt;<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>()) <span class="comment">// A source was passed in.</span>
    {
        <span class="comment">// -- Perhaps he already has a source, in which case he one he already has should match the</span>
        <span class="comment">//    one that was passed in. (If one was.)</span>
        <span class="comment">// -- Or perhaps he doesn&#39;t have a source, in which case one SHOULD have been passed in.</span>
        <span class="comment">// -- Assuming that&#39;s the case, that&#39;s what we&#39;ll use.</span>
        <span class="comment">// -- But if he doesn&#39;t have one, AND one wasn&#39;t passed in, then we will just created a self-signed Nym.</span>
        <span class="comment">//</span>
        pstrSourceToUse = pstrSourceForNymID;

        <span class="keywordflow">if</span> (!bChangeNymID &amp;&amp; this-&gt;m_strSourceForNymID.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>() &amp;&amp; !pstrSourceForNymID-&gt;<a class="code" href="class_o_t_string.html#a03401b39fb66d63696342c4f61ea8bf5">Compare</a>(this-&gt;m_strSourceForNymID))
        {
            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;In %s, line %d, OTPseudonym::%s: The Nym already has a source, but a different &quot;</span>
                          <span class="stringliteral">&quot;source was passed in (they should be identical, since you can&#39;t change a Nym&#39;s &quot;</span>
                          <span class="stringliteral">&quot;source without changing his ID.)\n&quot;</span>,
                          __FILE__, __LINE__, __FUNCTION__);
            <span class="keywordflow">return</span> <span class="keyword">false</span>;
        }
    }
    <span class="comment">// ----------------------------</span>
    <span class="keywordflow">else</span> <span class="comment">// No source was passed in. That means use the existing one if it exists,</span>
    {    <span class="comment">// or otherwise create it based on the key (self-signed Nym.)</span>
         <span class="comment">//</span>
        <span class="keywordflow">if</span> (this-&gt;m_strSourceForNymID.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>()) <span class="comment">// Use existing source.</span>
            strTempSource = this-&gt;m_strSourceForNymID;
        <span class="comment">// No source exists (nor was one passed in.) Thus create it based on the signing key (self-signed Nym.)</span>
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((this-&gt;<a class="code" href="class_o_t_pseudonym.html#a5d685c100f1947ed7aa467434298b40d">HasPublicKey</a> () ||
                  this-&gt;<a class="code" href="class_o_t_pseudonym.html#aeb1c675ec72d6450e5c151d1f3eb95bf">LoadPublicKey</a>() ))
            m_pkeypair-&gt;<a class="code" href="class_o_t_keypair.html#a67aebd0a39826bbc429bb2676fde9fcd">GetPublicKey</a>(strTempSource); <span class="comment">// bEscaped=true by default. Todo: someday change this to false. (It will invalidate existing NymIDs.)</span>
        <span class="keywordflow">else</span>
        {
            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;In %s, line %d, OTPseudonym::%s: Error: The Nym had no ID source, nor were we able &quot;</span>
                          <span class="stringliteral">&quot;to derive one from his (non-existent) public key.\n&quot;</span>, __FILE__, __LINE__, __FUNCTION__);
            <span class="keywordflow">return</span> <span class="keyword">false</span>;
        }
        <span class="comment">// ----------------------------------------------</span>
        pstrSourceToUse = &amp;strTempSource;
        <span class="comment">// ----------------------------------------------</span>
        <span class="comment">// Hash the purported source, and see if it matches the existing NymID.</span>
        <span class="comment">//</span>
        <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theTempID;
        theTempID.<a class="code" href="class_o_t_identifier.html#ac50b356cf5d5d04c08eaf568d07bcc46">CalculateDigest</a>(*pstrSourceToUse);
<span class="comment">//      m_pkeypair-&gt;CalculateID(theTempID);</span>

        <span class="keywordflow">if</span> (!bChangeNymID &amp;&amp; !this-&gt;<a class="code" href="class_o_t_pseudonym.html#a5ec9340b8d1d0fcd32f754ea63f9915a">CompareID</a>(theTempID))
        {
            <a class="code" href="class_o_t_string.html">OTString</a> strNymID;
            this-&gt;<a class="code" href="class_o_t_pseudonym.html#a1775c7aedd0dd25b2faf3f78dcccabe7">GetIdentifier</a>(strNymID);

            <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theKeypairNymID;
            m_pkeypair-&gt;<a class="code" href="class_o_t_keypair.html#abaedcf0bc34c23c733be8a84371ef27f">CalculateID</a>(theKeypairNymID);

            <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strKeypairNymID(theKeypairNymID), strCalculatedNymID(theTempID);

            <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: No NymID Source was passed in, so I tried to use the existing source (or if that was missing, the existing public key) for &quot;</span>
                           <span class="stringliteral">&quot;the Nym, but hashing that failed to produce the Nym&#39;s ID. Meaning the Nym must have &quot;</span>
                           <span class="stringliteral">&quot;some other source already, which needs to be passed into this function, for it to work on this Nym.\n&quot;</span>
                           <span class="stringliteral">&quot;NOTE: Pass &#39;bChangeNymID&#39; into this function as true, if you want to override this behavior.\n&quot;</span>
                           <span class="stringliteral">&quot;NYM ID: %s \n KEY PAIR CALCULATED ID: %s \n CONTENTS CALCULATED ID: %s \n NYM ID SOURCE: %s\n&quot;</span>,
                           __FUNCTION__, strNymID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(), strKeypairNymID.Get(), strCalculatedNymID.Get(), pstrSourceToUse-&gt;<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
            <span class="keywordflow">return</span> <span class="keyword">false</span>;
        }
    }
    <span class="comment">// ----------------------------------------------------------------------------------------------</span>
    <span class="comment">// By this point, pstrSourceToUse is good to go, and calculates to the correct ID for this Nym.</span>
    <span class="comment">// Also by this point, the Nym&#39;s source and ID are both definitely set and correct (before this function is even called.)</span>
    <span class="comment">// Also by this point, pmapActualPrivate and pmapActualPublic are each set with their 3 keys.</span>
    <span class="comment">// **************************************************************************************************</span>
    <span class="comment">//</span>
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pstrSourceToUse);
    <span class="comment">// -------------------------------------------------</span>
    <span class="comment">// See if there are any other master credentials already. If there are, make</span>
    <span class="comment">// sure they have the same source string calculated above.</span>
    <span class="comment">//</span>
    <span class="keywordflow">if</span> (m_mapCredentials.size() &gt; 0)
    {
        <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_pseudonym_8hpp.html#a0617d6d6c189c161a3fcf3c4710f5dba">mapOfCredentials</a>, m_mapCredentials)
        {
            <a class="code" href="class_o_t_credential.html">OTCredential</a> * pCredential = (*it).second;
            <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pCredential);
            <span class="comment">// -----------------------------</span>
            <span class="keywordflow">if</span> (<span class="keyword">false</span> == pstrSourceToUse-&gt;<a class="code" href="class_o_t_string.html#a03401b39fb66d63696342c4f61ea8bf5">Compare</a>(pCredential-&gt;<a class="code" href="class_o_t_credential.html#a0f66ddcdf4587eaaa7ab1429126f6395">GetSourceForNymID</a>()))
            {
                <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Attempt to add new master credential failed to &quot;</span>
                               <span class="stringliteral">&quot;match the NymID Source on an existing master credential.\n&quot;</span>, __FUNCTION__);
                <span class="keywordflow">return</span> <span class="keyword">false</span>;
            }
        } <span class="comment">// FOR_EACH</span>
        <span class="comment">// --------------------------------------------------</span>
        <span class="comment">// bChangeNymID only works if we are adding the FIRST credential. You can&#39;t be changing</span>
        <span class="comment">// a Nym&#39;s ID if he already has credentials, since we only made that possible in the first</span>
        <span class="comment">// place to make it possible to add the first credential.</span>
        <span class="comment">//</span>
        <span class="keywordflow">if</span> (bChangeNymID)
        {
            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Failure: cannot change NymID for Nym who &quot;</span>
                          <span class="stringliteral">&quot;already has credentials.\n&quot;</span>, __FUNCTION__);
            <span class="keywordflow">return</span> <span class="keyword">false</span>;
        }
    }
    <span class="comment">// --------------------------------------------------</span>
    <span class="comment">// Can&#39;t change the NymID if it&#39;s already registered at a server somewhere.</span>
    <span class="comment">//</span>
    <span class="keywordflow">if</span> (bChangeNymID &amp;&amp; (m_mapRequestNum.size() &gt; 0))
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Failure: cannot change NymID for Nym who already is registered at &quot;</span>
                      <span class="stringliteral">&quot;transaction servers.\n&quot;</span>, __FUNCTION__);
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// --------------------------------------------------</span>
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pmapActualPrivate);
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pmapActualPublic);
    <span class="comment">// --------------------------------------------------</span>
    <span class="comment">// Create a new master credential, and set its source string (which also sets</span>
    <span class="comment">// the NymID).</span>
    <span class="comment">//</span>
    <a class="code" href="class_o_t_credential.html">OTCredential</a> * pMaster = <a class="code" href="class_o_t_credential.html#a88ecf1e2caef5a269041ddaebb1c44b3">OTCredential::CreateMaster</a>(*pstrSourceToUse, nBits, pmapActualPrivate, pmapActualPublic, pPWData);

    <span class="keywordflow">if</span> (NULL == pMaster) <span class="comment">// Below this block, pMaster must be cleaned up.</span>
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Failed trying to create a new master credential, while calling &quot;</span>
                      <span class="stringliteral">&quot;OTCredential::CreateMaster.\n&quot;</span>, __FUNCTION__);
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// --------------------------------------------------</span>
    <span class="comment">// NOTE: The only way to verify a Master Credential is to go to its source (for its NymID)</span>
    <span class="comment">// and see if the Master Credential ID is posted at that source. And since the Master Credential</span>
    <span class="comment">// ID cannot possibly be known before the Master Credential is created and hashed, there is no</span>
    <span class="comment">// way that Credential&#39;s ID could have already been posted at that source. Therefore it&#39;s</span>
    <span class="comment">// impossible for the Credential to verify against the source at this time. (Although it must</span>
    <span class="comment">// verify by the time the credential is registered at any OT server.)</span>
    <span class="comment">// ----------------------------------------------------</span>
    <span class="comment">// We can still verify the credential internally, however. (Everything but the source.)</span>
    <span class="comment">//</span>
    <a class="code" href="class_o_t_string.html">OTString</a> strNymID;
    this-&gt;<a class="code" href="class_o_t_pseudonym.html#a1775c7aedd0dd25b2faf3f78dcccabe7">GetIdentifier</a>(strNymID);

    <span class="keywordflow">if</span> (<span class="keyword">false</span> == pMaster-&gt;<a class="code" href="class_o_t_credential.html#ac84a55bc3e33ba5088ddc1e60eb1bca8">VerifyInternally</a>())
    {
        <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theTempID;
        theTempID.<a class="code" href="class_o_t_identifier.html#ac50b356cf5d5d04c08eaf568d07bcc46">CalculateDigest</a>(*pstrSourceToUse);
        <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strTempID(theTempID);
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Failed trying to verify the new master credential.\n&quot;</span>
                      <span class="stringliteral">&quot;Nym ID: %s\nHash of Source: %s\n Source: %s\n&quot;</span>, __FUNCTION__,
                      strNymID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(), strTempID.Get(), pstrSourceToUse-&gt;<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
        <span class="keyword">delete</span> pMaster;
        pMaster = NULL;
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// ----------------------------------------------------</span>
    <span class="comment">// OTFolders::Credential() is for private credentials (I&#39;ve created.)</span>
    <span class="comment">// OTFolders::Pubcred() is for public credentials (I&#39;ve downloaded.)</span>
    <span class="comment">// ...(FYI.)</span>
    <span class="comment">//</span>
    <span class="keywordflow">if</span> (<a class="code" href="namespace_o_t_d_b.html#a73e39a590dfb64f63065821c6bbcd4c6">OTDB::Exists</a>(<a class="code" href="class_o_t_folders.html#a4e94eac1e796da34baf00556042202f0">OTFolders::Credential</a>().Get(), strNymID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(), pMaster-&gt;<a class="code" href="class_o_t_credential.html#a1e99eeeb4d701f2ea9b56a1201a57680">GetMasterCredID</a>().<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>()))
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Failure: Apparently there is already a credential stored &quot;</span>
                      <span class="stringliteral">&quot;for this ID (even though this is a new master credential, just generated.)\n&quot;</span>,
                      __FUNCTION__);
        <span class="keyword">delete</span> pMaster;
        pMaster = NULL;
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// ----------------------------------------------------</span>
    <span class="comment">// It&#39;s already signed (inside CreateMaster) but it&#39;s still not added to the Nym,</span>
    <span class="comment">// or saved to local storage. So let&#39;s do that next...</span>
    <span class="comment">//</span>
    <a class="code" href="class_o_t_string.html">OTString</a> strFoldername, strFilename;
    strFoldername.<a class="code" href="class_o_t_string.html#af1c861f21033a1d583b3cb12f952422e">Format</a>(<span class="stringliteral">&quot;%s%s%s&quot;</span>, <a class="code" href="class_o_t_folders.html#a4e94eac1e796da34baf00556042202f0">OTFolders::Credential</a>().Get(), <a class="code" href="class_o_t_log.html#a42d3c91ff84ecae0690e34efb4619a77">OTLog::PathSeparator</a>(), strNymID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
    strFilename.  Format(<span class="stringliteral">&quot;%s&quot;</span>,     pMaster-&gt;<a class="code" href="class_o_t_credential.html#a1e99eeeb4d701f2ea9b56a1201a57680">GetMasterCredID</a>().<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
    <span class="keyword">const</span> <span class="keywordtype">bool</span> bSaved = <span class="keyword">const_cast&lt;</span><a class="code" href="class_o_t_masterkey.html">OTMasterkey</a>&amp;<span class="keyword">&gt;</span>(pMaster-&gt;<a class="code" href="class_o_t_credential.html#af120a4e22eed08c5f2f4c00365ff7e67">GetMasterkey</a>()).SaveContract(strFoldername.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(), strFilename.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());

    <span class="keywordflow">if</span> (!bSaved)
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Failed trying to save new master credential to local storage.\n&quot;</span>, __FUNCTION__);
        <span class="keyword">delete</span> pMaster;
        pMaster = NULL;
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// --------------------------------------------------</span>
    m_mapCredentials.insert(std::pair&lt;std::string, OTCredential *&gt;(pMaster-&gt;<a class="code" href="class_o_t_credential.html#a1e99eeeb4d701f2ea9b56a1201a57680">GetMasterCredID</a>().<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(), pMaster));
    strOutputMasterCredID = pMaster-&gt;<a class="code" href="class_o_t_credential.html#a1e99eeeb4d701f2ea9b56a1201a57680">GetMasterCredID</a>();
    <span class="comment">// --------------------------------------------------</span>
    this-&gt;m_strSourceForNymID = *pstrSourceToUse; <span class="comment">// This may be superfluous. (Or may just go inside the below block.)</span>

    <span class="keywordflow">if</span> (bChangeNymID)
    {
        m_nymID.<a class="code" href="class_o_t_identifier.html#ac50b356cf5d5d04c08eaf568d07bcc46">CalculateDigest</a>(this-&gt;m_strSourceForNymID);
    }
    <span class="comment">//</span>
    <span class="comment">// Todo: someday we&#39;ll add &quot;source&quot; and &quot;altLocation&quot; to CreateNym</span>
    <span class="comment">// (currently the public key is just assumed to be the source.)</span>
    <span class="comment">// When that time comes, we&#39;ll need to set the altLocation here as</span>
    <span class="comment">// well, since it will be optional whenever there is a source involved.</span>
    <span class="comment">// --------------------------------------------------</span>
    this-&gt;<a class="code" href="class_o_t_pseudonym.html#af3709c1b5203330b607ca0f0acff9c53">SaveCredentialList</a>();
    <span class="comment">// --------------------------------------------------</span>
    <span class="keywordflow">return</span> <span class="keyword">true</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa44de5f4bbaa6fdb344e3cfa5aa95a53"></a><!-- doxytag: member="OTPseudonym::AddNewSubcredential" ref="aa44de5f4bbaa6fdb344e3cfa5aa95a53" args="(const OTIdentifier &amp;idMasterCredential, const mapOfStrings *pmapPrivate=NULL, const mapOfStrings *pmapPublic=NULL, OTPasswordData *pPWData=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_pseudonym.html#aa44de5f4bbaa6fdb344e3cfa5aa95a53">OTPseudonym::AddNewSubcredential</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;&#160;</td>
          <td class="paramname"><em>idMasterCredential</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="_o_t_string_8hpp.html#a7ec7839682b097a5c5b5c5125046c82b">mapOfStrings</a> *&#160;</td>
          <td class="paramname"><em>pmapPrivate</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="_o_t_string_8hpp.html#a7ec7839682b097a5c5b5c5125046c82b">mapOfStrings</a> *&#160;</td>
          <td class="paramname"><em>pmapPublic</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_password_data.html">OTPasswordData</a> *&#160;</td>
          <td class="paramname"><em>pPWData</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l00809">809</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strMasterCredID(idMasterCredential);
    <span class="comment">// --------------------------------------------------</span>
    mapOfCredentials::iterator it = m_mapCredentials.find(strMasterCredID.Get());

    <span class="keywordflow">if</span> (it == m_mapCredentials.end()) <span class="comment">// Didn&#39;t find it.</span>
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Failed trying to add subcredential to nonexistent master credential.\n&quot;</span>, __FUNCTION__);
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// --------------------------------------------------</span>
    <a class="code" href="class_o_t_credential.html">OTCredential</a> * pMaster = (*it).second;
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pMaster);
    <span class="comment">// --------------------------------------------------</span>
    <a class="code" href="class_o_t_subcredential.html">OTSubcredential</a> * pSubcredential = NULL;
    <span class="keyword">const</span> <span class="keywordtype">bool</span> bAdded = pMaster-&gt;<a class="code" href="class_o_t_credential.html#a7960b622a6ef62566ef355491d4c95dd">AddNewSubcredential</a>(*pmapPrivate, *pmapPublic, pPWData, &amp;pSubcredential);
    <span class="comment">// ------------------------------</span>
    <span class="keywordflow">if</span> (<span class="keyword">false</span> == bAdded)
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Failed trying to add subcredential to master credential.\n&quot;</span>, __FUNCTION__);
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pSubcredential);
    <span class="comment">// ----------------------------------------------------</span>
    <span class="keywordflow">if</span> (<span class="keyword">false</span> == pSubcredential-&gt;<a class="code" href="class_o_t_subcredential.html#a6bf9159bd8c57933ffc3124e33116803">VerifyInternally</a>())
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Failed trying to verify the new subcredential.\n&quot;</span>, __FUNCTION__);
        <span class="comment">// todo: remove it again, since it failed to verify.</span>
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// ----------------------------------------------------</span>
    <span class="comment">// It&#39;s already signed (inside AddNewSubcredential) but it&#39;s still not added to the Nym,</span>
    <span class="comment">// or saved to local storage. So let&#39;s do that next...</span>
    <span class="comment">//</span>
    <a class="code" href="class_o_t_string.html">OTString</a> strNymID, strSubcredentialID;
    this-&gt;<a class="code" href="class_o_t_pseudonym.html#a1775c7aedd0dd25b2faf3f78dcccabe7">GetIdentifier</a>(strNymID);
    pSubcredential-&gt;<a class="code" href="class_o_t_contract.html#acf77d2db6da3904aa8b03e7b87c02e4e">GetIdentifier</a>(strSubcredentialID);

    <span class="keywordflow">if</span> (<a class="code" href="namespace_o_t_d_b.html#a73e39a590dfb64f63065821c6bbcd4c6">OTDB::Exists</a>(<a class="code" href="class_o_t_folders.html#a4e94eac1e796da34baf00556042202f0">OTFolders::Credential</a>().Get(), strNymID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(), strSubcredentialID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>()))
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Failure: Apparently there is already a credential stored &quot;</span>
                      <span class="stringliteral">&quot;for this ID (even though this is a new credential, just generated.)\n&quot;</span>,
                      __FUNCTION__);
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// ----------------------------------------------------</span>
    <a class="code" href="class_o_t_string.html">OTString</a> strFoldername, strFilename;
    strFoldername.<a class="code" href="class_o_t_string.html#af1c861f21033a1d583b3cb12f952422e">Format</a>(<span class="stringliteral">&quot;%s%s%s&quot;</span>, <a class="code" href="class_o_t_folders.html#a4e94eac1e796da34baf00556042202f0">OTFolders::Credential</a>().Get(), <a class="code" href="class_o_t_log.html#a42d3c91ff84ecae0690e34efb4619a77">OTLog::PathSeparator</a>(), strNymID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
    strFilename.  Format(<span class="stringliteral">&quot;%s&quot;</span>,     strSubcredentialID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
    <span class="keyword">const</span> <span class="keywordtype">bool</span> bSaved = pSubcredential-&gt;<a class="code" href="class_o_t_contract.html#a363ae430d4fd9256ab8364dbafb95444">SaveContract</a>(strFoldername.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(), strFilename.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
    <span class="keywordflow">if</span> (!bSaved)
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Failed trying to save new subcredential to local storage.\n&quot;</span>, __FUNCTION__);
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// --------------------------------------------------</span>
    this-&gt;<a class="code" href="class_o_t_pseudonym.html#af3709c1b5203330b607ca0f0acff9c53">SaveCredentialList</a>();
    <span class="comment">// --------------------------------------------------</span>
    <span class="keywordflow">return</span> <span class="keyword">true</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a85bd691ffa8d5f066ba04886dccd0d4d"></a><!-- doxytag: member="OTPseudonym::AddNewSubkey" ref="a85bd691ffa8d5f066ba04886dccd0d4d" args="(const OTIdentifier &amp;idMasterCredential, const int32_t nBits=1024, const mapOfStrings *pmapPrivate=NULL, OTPasswordData *pPWData=NULL, OTString *pstrNewID=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_pseudonym.html#a85bd691ffa8d5f066ba04886dccd0d4d">OTPseudonym::AddNewSubkey</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;&#160;</td>
          <td class="paramname"><em>idMasterCredential</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int32_t&#160;</td>
          <td class="paramname"><em>nBits</em> = <code>1024</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="_o_t_string_8hpp.html#a7ec7839682b097a5c5b5c5125046c82b">mapOfStrings</a> *&#160;</td>
          <td class="paramname"><em>pmapPrivate</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_password_data.html">OTPasswordData</a> *&#160;</td>
          <td class="paramname"><em>pPWData</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_string.html">OTString</a> *&#160;</td>
          <td class="paramname"><em>pstrNewID</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l00733">733</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strMasterCredID(idMasterCredential);
    <span class="comment">// --------------------------------------------------</span>
    mapOfCredentials::iterator it = m_mapCredentials.find(strMasterCredID.Get());

    <span class="keywordflow">if</span> (it == m_mapCredentials.end()) <span class="comment">// Didn&#39;t find it.</span>
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Failed trying to add key credential to nonexistent master credential.\n&quot;</span>, __FUNCTION__);
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// --------------------------------------------------</span>
    <a class="code" href="class_o_t_credential.html">OTCredential</a> * pMaster = (*it).second;
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pMaster);
    <span class="comment">// --------------------------------------------------</span>
    <a class="code" href="class_o_t_subkey.html">OTSubkey</a> * pSubkey = NULL;
    <span class="keyword">const</span> <span class="keywordtype">bool</span> bAdded = pMaster-&gt;<a class="code" href="class_o_t_credential.html#a15d88cd9c2d96625f7d4f296b08247b7">AddNewSubkey</a>(nBits, pmapPrivate, pPWData, &amp;pSubkey);
    <span class="comment">// ------------------------------</span>
    <span class="keywordflow">if</span> (<span class="keyword">false</span> == bAdded)
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Failed trying to add key credential to master credential.\n&quot;</span>, __FUNCTION__);
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pSubkey);
    <span class="comment">// ----------------------------------------------------</span>
    <span class="keywordflow">if</span> (<span class="keyword">false</span> == pSubkey-&gt;<a class="code" href="class_o_t_key_credential.html#a2fe63b1ac17a3ddbc10ebdd33c05e812">VerifyInternally</a>())
    {

        <a class="code" href="class_o_t_log.html#a5acd90ac91c2618f395b0ff37ad4f8ee">OTLog::Error</a>(<span class="stringliteral">&quot;NYM::ADD_NEW_SUBKEY:   2.5 \n&quot;</span>);

        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Failed trying to verify the new key credential.\n&quot;</span>, __FUNCTION__);
        <span class="comment">// todo: remove it again, since it failed to verify.</span>
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// ----------------------------------------------------</span>
    <span class="comment">// It&#39;s already signed (inside AddNewSubkey) but it&#39;s still not added to the Nym,</span>
    <span class="comment">// or saved to local storage. So let&#39;s do that next...</span>
    <span class="comment">//</span>
    <a class="code" href="class_o_t_string.html">OTString</a> strNymID, strSubkeyID;
    this-&gt;<a class="code" href="class_o_t_pseudonym.html#a1775c7aedd0dd25b2faf3f78dcccabe7">GetIdentifier</a>(strNymID);
    pSubkey-&gt;<a class="code" href="class_o_t_contract.html#acf77d2db6da3904aa8b03e7b87c02e4e">GetIdentifier</a>(strSubkeyID);

    <span class="comment">// OTFolders::Credential() is for private credentials (I&#39;ve created.)</span>
    <span class="comment">// OTFolders::Pubcred() is for public credentials (I&#39;ve downloaded.)</span>
    <span class="comment">//</span>
    <span class="keywordflow">if</span> (<a class="code" href="namespace_o_t_d_b.html#a73e39a590dfb64f63065821c6bbcd4c6">OTDB::Exists</a>(<a class="code" href="class_o_t_folders.html#a4e94eac1e796da34baf00556042202f0">OTFolders::Credential</a>().Get(), strNymID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(), strSubkeyID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>()))
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Failure: Apparently there is already a credential stored &quot;</span>
                      <span class="stringliteral">&quot;for this ID (even though this is a new credential, just generated.)\n&quot;</span>,
                      __FUNCTION__);
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// ----------------------------------------------------</span>
    <a class="code" href="class_o_t_string.html">OTString</a> strFoldername, strFilename;
    strFoldername.<a class="code" href="class_o_t_string.html#af1c861f21033a1d583b3cb12f952422e">Format</a>(<span class="stringliteral">&quot;%s%s%s&quot;</span>, <a class="code" href="class_o_t_folders.html#a4e94eac1e796da34baf00556042202f0">OTFolders::Credential</a>().Get(), <a class="code" href="class_o_t_log.html#a42d3c91ff84ecae0690e34efb4619a77">OTLog::PathSeparator</a>(), strNymID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
    strFilename.  Format(<span class="stringliteral">&quot;%s&quot;</span>,     strSubkeyID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
    <span class="keyword">const</span> <span class="keywordtype">bool</span> bSaved = pSubkey-&gt;<a class="code" href="class_o_t_contract.html#a363ae430d4fd9256ab8364dbafb95444">SaveContract</a>(strFoldername.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(), strFilename.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
    <span class="keywordflow">if</span> (!bSaved)
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Failed trying to save new key credential to local storage.\n&quot;</span>, __FUNCTION__);
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// --------------------------------------------------</span>
    this-&gt;<a class="code" href="class_o_t_pseudonym.html#af3709c1b5203330b607ca0f0acff9c53">SaveCredentialList</a>();
    <span class="comment">// --------------------------------------------------</span>
    <span class="keywordflow">if</span> (NULL != pstrNewID)
        *pstrNewID = strSubkeyID;

    <span class="keywordflow">return</span> <span class="keyword">true</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a908900d7fa217571e2dd3a6c06789a9b"></a><!-- doxytag: member="OTPseudonym::AddOutmail" ref="a908900d7fa217571e2dd3a6c06789a9b" args="(OTMessage &amp;theMessage)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_pseudonym.html#a908900d7fa217571e2dd3a6c06789a9b">OTPseudonym::AddOutmail</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_message.html">OTMessage</a> &amp;&#160;</td>
          <td class="paramname"><em>theMessage</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Though the parameter is a reference (forcing you to pass a real object), the Nym DOES take ownership of the object. Therefore it MUST be allocated on the heap, NOT the stack, or you will corrupt memory with this call. </p>

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l00941">941</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    m_dequeOutmail.push_front(&amp;theMessage);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a0e6b0025655ea295902be7ea71ec444c"></a><!-- doxytag: member="OTPseudonym::AddOutpayments" ref="a0e6b0025655ea295902be7ea71ec444c" args="(OTMessage &amp;theMessage)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_pseudonym.html#a0e6b0025655ea295902be7ea71ec444c">OTPseudonym::AddOutpayments</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_message.html">OTMessage</a> &amp;&#160;</td>
          <td class="paramname"><em>theMessage</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Though the parameter is a reference (forcing you to pass a real object), the Nym DOES take ownership of the object. Therefore it MUST be allocated on the heap, NOT the stack, or you will corrupt memory with this call. </p>

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l01003">1003</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    m_dequeOutpayments.push_front(&amp;theMessage);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a154a958a9f3cfdb07167858579f74037"></a><!-- doxytag: member="OTPseudonym::AddTentativeNum" ref="a154a958a9f3cfdb07167858579f74037" args="(const OTString &amp;strServerID, const int64_t &amp;lTransNum)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_pseudonym.html#a154a958a9f3cfdb07167858579f74037">OTPseudonym::AddTentativeNum</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strServerID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int64_t &amp;&#160;</td>
          <td class="paramname"><em>lTransNum</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l02305">2305</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> <a class="code" href="class_o_t_pseudonym.html#adb2f698760342cc933846915a737c823">AddGenericNum</a>(m_mapTentativeNum, strServerID, lTransNum);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a2771ea8cf77d2ac05d942e149c2bc3e6"></a><!-- doxytag: member="OTPseudonym::AddTransactionNum" ref="a2771ea8cf77d2ac05d942e149c2bc3e6" args="(OTPseudonym &amp;SIGNER_NYM, const OTString &amp;strServerID, int64_t lTransNum, bool bSave)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_pseudonym.html#a2771ea8cf77d2ac05d942e149c2bc3e6">OTPseudonym::AddTransactionNum</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;&#160;</td>
          <td class="paramname"><em>SIGNER_NYM</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strServerID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>lTransNum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>bSave</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l02398">2398</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">bool</span> bSuccess1 = <a class="code" href="class_o_t_pseudonym.html#a2771ea8cf77d2ac05d942e149c2bc3e6">AddTransactionNum</a>(strServerID, lTransNum); <span class="comment">// Add to list of available-to-use, outstanding numbers.</span>
    <span class="keywordtype">bool</span> bSuccess2 = <a class="code" href="class_o_t_pseudonym.html#a331a9c5ec8692d0b88a76d882586fbc1">AddIssuedNum</a>(strServerID, lTransNum);      <span class="comment">// Add to list of numbers that haven&#39;t been closed yet.</span>
    <span class="comment">// -----------------------------------</span>
    <span class="keywordflow">if</span> (bSuccess1 &amp;&amp; !bSuccess2)
        <a class="code" href="class_o_t_pseudonym.html#a92916b7dfb3a99edbb41d3872dd262ef">RemoveGenericNum</a>(m_mapTransNum, strServerID, lTransNum);
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (bSuccess2 &amp;&amp; !bSuccess1)
        <a class="code" href="class_o_t_pseudonym.html#a92916b7dfb3a99edbb41d3872dd262ef">RemoveGenericNum</a>(m_mapIssuedNum, strServerID, lTransNum);
    <span class="comment">// -----------------------------------</span>
    <span class="keywordflow">if</span> (bSuccess1 &amp;&amp; bSuccess2 &amp;&amp; bSave)
        bSave = <a class="code" href="class_o_t_pseudonym.html#a5d08ef86097db038c2c4fd30034f5dc8">SaveSignedNymfile</a>(SIGNER_NYM);
    <span class="keywordflow">else</span>
        bSave = <span class="keyword">true</span>; <span class="comment">// so the return at the bottom calculates correctly.</span>

    <span class="keywordflow">return</span> (bSuccess1 &amp;&amp; bSuccess2 &amp;&amp; bSave);
}
</pre></div>
</div>
</div>
<a class="anchor" id="abfa5e82ef1cb9aa18d112b33e04ece15"></a><!-- doxytag: member="OTPseudonym::AddTransactionNum" ref="abfa5e82ef1cb9aa18d112b33e04ece15" args="(const OTString &amp;strServerID, const int64_t lTransNum)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_pseudonym.html#a2771ea8cf77d2ac05d942e149c2bc3e6">OTPseudonym::AddTransactionNum</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strServerID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int64_t&#160;</td>
          <td class="paramname"><em>lTransNum</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l02225">2225</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> <a class="code" href="class_o_t_pseudonym.html#adb2f698760342cc933846915a737c823">AddGenericNum</a>(m_mapTransNum, strServerID, lTransNum);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a97211e2ab27668d1c23d59ac11b87b82"></a><!-- doxytag: member="OTPseudonym::CertfileExists" ref="a97211e2ab27668d1c23d59ac11b87b82" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_pseudonym.html#a97211e2ab27668d1c23d59ac11b87b82">OTPseudonym::CertfileExists</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l05699">5699</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strID(m_nymID);
    <span class="keywordflow">return</span> <a class="code" href="class_o_t_pseudonym.html#a9dd185e1a1c2e263e4a2978aefed21c2">OTPseudonym::DoesCertfileExist</a>(strID);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a29c787987f96abc9de8f3b268596a79e"></a><!-- doxytag: member="OTPseudonym::ClawbackTransactionNumber" ref="a29c787987f96abc9de8f3b268596a79e" args="(const OTIdentifier &amp;theServerID, const int64_t &amp;lTransClawback, bool bSave=false, OTPseudonym *pSIGNER_NYM=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_pseudonym.html#a29c787987f96abc9de8f3b268596a79e">OTPseudonym::ClawbackTransactionNumber</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;&#160;</td>
          <td class="paramname"><em>theServerID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int64_t &amp;&#160;</td>
          <td class="paramname"><em>lTransClawback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>bSave</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> *&#160;</td>
          <td class="paramname"><em>pSIGNER_NYM</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>When a number IS already on my issued list, but NOT on my available list (because I already used it on some transaction) then this function will verify that and then add it BACK to my available list. (Like if the transaction failed and I just want to get my numbers back so I can use them on a different transaction.) </p>

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l02636">2636</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (NULL == pSIGNER_NYM)
        pSIGNER_NYM = <span class="keyword">this</span>;
    <span class="comment">// Below this point, pSIGNER_NYM is definitely a good pointer.</span>
    <span class="comment">// -------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strServerID(theServerID);

    <span class="comment">// Only re-add the transaction number if it&#39;s already on my issued list.</span>
    <span class="comment">// (Otherwise, why am I &quot;adding it back again&quot; if I never had it in the</span>
    <span class="comment">// first place? Doesn&#39;t sound like a real clawback situation in that case.)</span>
    <span class="comment">//</span>
    <span class="keywordflow">if</span> (<span class="keyword">true</span> == <a class="code" href="class_o_t_pseudonym.html#a66cf3b97f1769f9d422bad8787a6c1a0">VerifyIssuedNum</a>(strServerID, lTransClawback))
    {
        <a class="code" href="class_o_t_pseudonym.html#a2771ea8cf77d2ac05d942e149c2bc3e6">AddTransactionNum</a>(*pSIGNER_NYM, strServerID, lTransClawback, bSave);
        <span class="keywordflow">return</span> <span class="keyword">true</span>;
    }
    <span class="comment">// -------------------------------</span>
    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aac1c0719b846cc3d98286ff29ba63684"></a><!-- doxytag: member="OTPseudonym::ClearAll" ref="aac1c0719b846cc3d98286ff29ba63684" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_pseudonym.html#aac1c0719b846cc3d98286ff29ba63684">OTPseudonym::ClearAll</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l06119">6119</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    m_mapRequestNum.clear();
    m_mapHighTransNo.clear();
    <span class="comment">// ---------------------------</span>
    <a class="code" href="class_o_t_pseudonym.html#a0f5609a64dd47cf9b7f3113127e51f6b">ReleaseTransactionNumbers</a>();
<span class="comment">//  m_mapTransNum.clear();</span>
<span class="comment">//  m_mapIssuedNum.clear();</span>
<span class="comment">//  m_mapTentativeNum.clear();</span>
<span class="comment">//  m_mapAcknowledgedNum.clear();</span>
    <span class="comment">// ---------------------------</span>
    m_mapNymboxHash.clear();
    m_mapRecentHash.clear();
    m_mapInboxHash.clear();
    m_mapOutboxHash.clear();
    <span class="comment">// ---------------------------</span>
    m_setAccounts.clear();
    m_setOpenCronItems.clear();
    <span class="comment">// -----------------------------</span>
    <a class="code" href="class_o_t_pseudonym.html#aa7b723e13e5e9ccfee6cc18e1a31d16d">ClearMail</a>();
    <a class="code" href="class_o_t_pseudonym.html#a23228dd99eaad6132f556ad1e3088f86">ClearOutmail</a>();
    <a class="code" href="class_o_t_pseudonym.html#a1ab1d3f7effd153652301063f3ed467b">ClearOutpayments</a>();
    <span class="comment">// -----------------------------</span>
    <span class="comment">// We load the Nym twice... once just to load the credentials up from the .cred file, and a second</span>
    <span class="comment">// time to load the rest of the Nym up from the Nymfile. LoadFromString calls ClearAll before loading,</span>
    <span class="comment">// so there&#39;s no possibility of duplicated data on the Nym. And when that happens, we don&#39;t want the</span>
    <span class="comment">// credentials to get cleared, since we want them to still be there after the rest of the Nym is</span>
    <span class="comment">// loaded. So this is commented out.</span>
<span class="comment">//  ClearCredentials();</span>
    <span class="comment">// -----------------------------</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="a66fe7d0cf3d0e190f7c103fb2dc16d57"></a><!-- doxytag: member="OTPseudonym::ClearCredentials" ref="a66fe7d0cf3d0e190f7c103fb2dc16d57" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_pseudonym.html#a66fe7d0cf3d0e190f7c103fb2dc16d57">OTPseudonym::ClearCredentials</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l06097">6097</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    m_listRevokedIDs.clear();
    <span class="comment">// -----------------------------</span>
    <span class="keywordflow">while</span> (!m_mapCredentials.empty())
    {
        <a class="code" href="class_o_t_credential.html">OTCredential</a> * pCredential = m_mapCredentials.begin()-&gt;second;
        m_mapCredentials.erase(m_mapCredentials.begin());
        <span class="keyword">delete</span> pCredential;
        pCredential = NULL;
    }
    <span class="comment">// -----------------------------</span>
    <span class="keywordflow">while</span> (!m_mapRevoked.empty())
    {
        <a class="code" href="class_o_t_credential.html">OTCredential</a> * pCredential = m_mapRevoked.begin()-&gt;second;
        m_mapRevoked.erase(m_mapRevoked.begin());
        <span class="keyword">delete</span> pCredential;
        pCredential = NULL;
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa7b723e13e5e9ccfee6cc18e1a31d16d"></a><!-- doxytag: member="OTPseudonym::ClearMail" ref="aa7b723e13e5e9ccfee6cc18e1a31d16d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_pseudonym.html#aa7b723e13e5e9ccfee6cc18e1a31d16d">OTPseudonym::ClearMail</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l00930">930</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">while</span> (<a class="code" href="class_o_t_pseudonym.html#a6a449ad7415513ce538c4a2e71efde87" title="return the number of mail items available for this Nym.">GetMailCount</a>() &gt; 0)
        <a class="code" href="class_o_t_pseudonym.html#a7f32350b2827a62bbfa5ef09a392f129">RemoveMailByIndex</a>(0);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a23228dd99eaad6132f556ad1e3088f86"></a><!-- doxytag: member="OTPseudonym::ClearOutmail" ref="a23228dd99eaad6132f556ad1e3088f86" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_pseudonym.html#a23228dd99eaad6132f556ad1e3088f86">OTPseudonym::ClearOutmail</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l00992">992</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">while</span> (<a class="code" href="class_o_t_pseudonym.html#a746ab3941be5529f11a772a004e17b69" title="return the number of mail items available for this Nym.">GetOutmailCount</a>() &gt; 0)
        <a class="code" href="class_o_t_pseudonym.html#ae2510d04ffb6c0e01aeda1b75a59d1ef">RemoveOutmailByIndex</a>(0);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a1ab1d3f7effd153652301063f3ed467b"></a><!-- doxytag: member="OTPseudonym::ClearOutpayments" ref="a1ab1d3f7effd153652301063f3ed467b" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_pseudonym.html#a1ab1d3f7effd153652301063f3ed467b">OTPseudonym::ClearOutpayments</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l01095">1095</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">while</span> (<a class="code" href="class_o_t_pseudonym.html#a66289f0575ef0b91cb5fefa4483f0d3e" title="return the number of payments items available for this Nym.">GetOutpaymentsCount</a>() &gt; 0)
        <a class="code" href="class_o_t_pseudonym.html#a2d66a8a46d8e147ca0dbc0fb45bc364d">RemoveOutpaymentsByIndex</a>(0);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a5ec9340b8d1d0fcd32f754ea63f9915a"></a><!-- doxytag: member="OTPseudonym::CompareID" ref="a5ec9340b8d1d0fcd32f754ea63f9915a" args="(const OTIdentifier &amp;theIdentifier) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EXPORT bool <a class="el" href="class_o_t_pseudonym.html#a5ec9340b8d1d0fcd32f754ea63f9915a">OTPseudonym::CompareID</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;&#160;</td>
          <td class="paramname"><em>theIdentifier</em></td><td>)</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8hpp_source.html#l00489">489</a> of file <a class="el" href="_o_t_pseudonym_8hpp_source.html">OTPseudonym.hpp</a>.</p>
<div class="fragment"><pre class="fragment">        { <span class="keywordflow">return</span> (theIdentifier == m_nymID); }
</pre></div>
</div>
</div>
<a class="anchor" id="aa65f29a60de6ec3c737bc3f362dff850"></a><!-- doxytag: member="OTPseudonym::CompareID" ref="aa65f29a60de6ec3c737bc3f362dff850" args="(const OTPseudonym &amp;RHS) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_pseudonym.html#a5ec9340b8d1d0fcd32f754ea63f9915a">OTPseudonym::CompareID</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;&#160;</td>
          <td class="paramname"><em>RHS</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l03275">3275</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> RHS.<a class="code" href="class_o_t_pseudonym.html#a5ec9340b8d1d0fcd32f754ea63f9915a">CompareID</a>(m_nymID);
}
</pre></div>
</div>
</div>
<a class="anchor" id="aaded4e78ed9fa9960ee67a391c793b9e"></a><!-- doxytag: member="OTPseudonym::DisplayStatistics" ref="aaded4e78ed9fa9960ee67a391c793b9e" args="(OTString &amp;strOutput)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_pseudonym.html#aaded4e78ed9fa9960ee67a391c793b9e">OTPseudonym::DisplayStatistics</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strOutput</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l03497">3497</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_pseudonym_8hpp.html#a973d5530da5375de1f5e0f75c7780869">mapOfRequestNums</a>, m_mapRequestNum)
    {
        std::string strServerID = it-&gt;first;
        int64_t lRequestNumber      = it-&gt;second;

        <span class="comment">// Now we can log BOTH, before and after...</span>
        strOutput.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;Req# is %lld for server ID: %s\n&quot;</span>,
                              lRequestNumber, strServerID.c_str());
    }
    <span class="comment">// -------------------------------------</span>
    <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_pseudonym_8hpp.html#a0ed9ca5cfdfd9902dd8bd342d344a275">mapOfHighestNums</a>, m_mapHighTransNo)
    {
        std::string strServerID = (*it).first;
        <span class="keyword">const</span> int64_t lHighestNum  = (*it).second;

        strOutput.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;Highest trans# was %lld for server: %s\n&quot;</span>,
                              lHighestNum, strServerID.c_str());
    }

    <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_pseudonym_8hpp.html#ac99ad82dc6c392a0a8c851c6041b62f1">mapOfTransNums</a>, m_mapIssuedNum)
    {
        std::string strServerID     = (*it).first;
        <a class="code" href="_o_t_pseudonym_8hpp.html#a94632bfde6cf91c8294122f77527bcf1">dequeOfTransNums</a> * pDeque   = (it-&gt;second);

        <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pDeque);

        <span class="keywordflow">if</span> (!(pDeque-&gt;empty()))
        {
            strOutput.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;---- Transaction numbers still signed out from server: %s\n&quot;</span>, strServerID.c_str());

            <span class="keywordflow">for</span> (uint32_t i = 0; i &lt; pDeque-&gt;size(); i++)
            {
                int64_t lTransactionNumber = pDeque-&gt;at(i);

                strOutput.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(0 == i ? <span class="stringliteral">&quot;%lld&quot;</span> : <span class="stringliteral">&quot;, %lld&quot;</span>, lTransactionNumber);
            }
            strOutput.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;\n&quot;</span>);
        }
    } <span class="comment">// for</span>

    <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_pseudonym_8hpp.html#ac99ad82dc6c392a0a8c851c6041b62f1">mapOfTransNums</a>, m_mapTransNum)
    {
        std::string strServerID     = (*it).first;
        <a class="code" href="_o_t_pseudonym_8hpp.html#a94632bfde6cf91c8294122f77527bcf1">dequeOfTransNums</a> * pDeque   = (it-&gt;second);

        <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pDeque);

        <span class="keywordflow">if</span> (!(pDeque-&gt;empty()))
        {
            strOutput.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;---- Transaction numbers still usable on server: %s\n&quot;</span>, strServerID.c_str());

            <span class="keywordflow">for</span> (uint32_t i = 0; i &lt; pDeque-&gt;size(); i++)
            {
                int64_t lTransactionNumber = pDeque-&gt;at(i);
                strOutput.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(0 == i ? <span class="stringliteral">&quot;%lld&quot;</span> : <span class="stringliteral">&quot;, %lld&quot;</span>, lTransactionNumber);
            }
            strOutput.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;\n&quot;</span>);
        }
    } <span class="comment">// for</span>

    <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_pseudonym_8hpp.html#ac99ad82dc6c392a0a8c851c6041b62f1">mapOfTransNums</a>, m_mapAcknowledgedNum)
    {
        std::string strServerID     = (*it).first;
        <a class="code" href="_o_t_pseudonym_8hpp.html#a94632bfde6cf91c8294122f77527bcf1">dequeOfTransNums</a> * pDeque   = (it-&gt;second);

        <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pDeque);

        <span class="keywordflow">if</span> (!(pDeque-&gt;empty()))
        {
            strOutput.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;---- Request numbers for which Nym has already received a reply from server: %s\n&quot;</span>,
                                  strServerID.c_str());

            <span class="keywordflow">for</span> (uint32_t i = 0; i &lt; pDeque-&gt;size(); i++)
            {
                int64_t lRequestNumber = pDeque-&gt;at(i);
                strOutput.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(0 == i ? <span class="stringliteral">&quot;%lld&quot;</span> : <span class="stringliteral">&quot;, %lld&quot;</span>, lRequestNumber);

            }
            strOutput.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;\n&quot;</span>);
        }
    } <span class="comment">// for</span>


    strOutput.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;Source for ID:\n%s\n&quot;</span>, m_strSourceForNymID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
    strOutput.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;Alt. location: %s\n\n&quot;</span>, m_strAltLocation.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());

    <span class="keyword">const</span> <span class="keywordtype">size_t</span> nMasterCredCount = this-&gt;<a class="code" href="class_o_t_pseudonym.html#a6ae670b44bc6728da06141c885e6c7e9">GetMasterCredentialCount</a>();
    <span class="keywordflow">if</span> (nMasterCredCount &gt; 0)
    {
        <span class="keywordflow">for</span> (int32_t iii = 0; iii &lt; static_cast&lt;int64_t&gt;(nMasterCredCount); ++iii)
        {
            <span class="keyword">const</span> <a class="code" href="class_o_t_credential.html">OTCredential</a> * pCredential = this-&gt;<a class="code" href="class_o_t_pseudonym.html#ae32a4525f158913b21f010a796f5fc29">GetMasterCredentialByIndex</a>(iii);
            <span class="keywordflow">if</span> (NULL != pCredential)
            {
                strOutput.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;Credential ID: %s \n&quot;</span>,
                                      pCredential-&gt;<a class="code" href="class_o_t_credential.html#a1e99eeeb4d701f2ea9b56a1201a57680">GetMasterCredID</a>().<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
                <span class="keyword">const</span> <span class="keywordtype">size_t</span> nSubcredentialCount = pCredential-&gt;<a class="code" href="class_o_t_credential.html#a03f9d76360128e0985ce9ab8fc3e9fc4">GetSubcredentialCount</a>();

                <span class="keywordflow">if</span> (nSubcredentialCount &gt; 0)
                {
                    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> vvv = 0; vvv &lt; nSubcredentialCount; ++vvv)
                    {
                        <span class="keyword">const</span> std::string str_subcred_id(pCredential-&gt;<a class="code" href="class_o_t_credential.html#a9767fa303af5c9a9e9a742d9f72ef834">GetSubcredentialIDByIndex</a>(vvv));

                        strOutput.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;   Subcredential: %s  \n&quot;</span>,
                                              str_subcred_id.c_str());
                    }
                }

            }
        }
        strOutput.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;%s&quot;</span>, <span class="stringliteral">&quot;\n&quot;</span>);
    }
    <span class="comment">// -----------------------------------------------------------------------</span>
    strOutput.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;==&gt;      Name: %s   %s\n&quot;</span>, m_strName.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(),
                          m_bMarkForDeletion ? <span class="stringliteral">&quot;(MARKED FOR DELETION)&quot;</span> : <span class="stringliteral">&quot;&quot;</span>);
    strOutput.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;      Version: %s\n&quot;</span>, m_strVersion.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());

    <span class="comment">// This is used on server-side only. (Client side sees this value</span>
    <span class="comment">// by querying the server.)</span>
    <span class="comment">// Therefore since m_lUsageCredits is unused on client side, why display</span>
    <span class="comment">// it in the client API? Makes no sense.</span>
<span class="comment">//  strOutput.Concatenate(&quot;Usage Credits: %lld\n&quot;, m_lUsageCredits);</span>

    strOutput.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;       Mail count: %d\n&quot;</span>, m_dequeMail.size());
    strOutput.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;    Outmail count: %d\n&quot;</span>, m_dequeOutmail.size());
    strOutput.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;Outpayments count: %d\n&quot;</span>, m_dequeOutpayments.size());

    <a class="code" href="class_o_t_string.html">OTString</a> theStringID;
    <a class="code" href="class_o_t_pseudonym.html#a1775c7aedd0dd25b2faf3f78dcccabe7">GetIdentifier</a>(theStringID);
    strOutput.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;Nym ID: %s\n&quot;</span>, theStringID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
}
</pre></div>
</div>
</div>
<a class="anchor" id="a9dd185e1a1c2e263e4a2978aefed21c2"></a><!-- doxytag: member="OTPseudonym::DoesCertfileExist" ref="a9dd185e1a1c2e263e4a2978aefed21c2" args="(const OTString &amp;strNymID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_pseudonym.html#a9dd185e1a1c2e263e4a2978aefed21c2">OTPseudonym::DoesCertfileExist</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strNymID</em></td><td>)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l05687">5687</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_o_t_string.html">OTString</a> strCredListFile;
    strCredListFile.<a class="code" href="class_o_t_string.html#af1c861f21033a1d583b3cb12f952422e">Format</a>(<span class="stringliteral">&quot;%s.cred&quot;</span>, strNymID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
    <span class="comment">// --------------------------------------------------------------------</span>
    <span class="keywordflow">return</span> <a class="code" href="namespace_o_t_d_b.html#a73e39a590dfb64f63065821c6bbcd4c6">OTDB::Exists</a>(<a class="code" href="class_o_t_folders.html#a340bfd0a9302aa1f6436ebc365a391d7">OTFolders::Cert</a>()      .Get(), strNymID       .Get()) || <span class="comment">// Old-school.</span>
           <a class="code" href="namespace_o_t_d_b.html#a73e39a590dfb64f63065821c6bbcd4c6">OTDB::Exists</a>(<a class="code" href="class_o_t_folders.html#a4e94eac1e796da34baf00556042202f0">OTFolders::Credential</a>().Get(), strCredListFile.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());   <span class="comment">// New-school.</span>
    <span class="comment">// --------------------------------------------------------------------</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="a7a215c63b72b47034e3f92e4334f44f6"></a><!-- doxytag: member="OTPseudonym::GenerateNym" ref="a7a215c63b72b47034e3f92e4334f44f6" args="(int32_t nBits=1024, bool bCreateFile=true, const std::string str_id_source=&quot;&quot;, const std::string str_alt_location=&quot;&quot;)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_pseudonym.html#a7a215c63b72b47034e3f92e4334f44f6">OTPseudonym::GenerateNym</a> </td>
          <td>(</td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>nBits</em> = <code>1024</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>bCreateFile</em> = <code>true</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string&#160;</td>
          <td class="paramname"><em>str_id_source</em> = <code>&quot;&quot;</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string&#160;</td>
          <td class="paramname"><em>str_alt_location</em> = <code>&quot;&quot;</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l01239">1239</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// ---------------------------------------------------------------</span>
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != m_pkeypair);
    <span class="comment">// ---------------------------------------------------------------</span>
    <span class="keywordflow">if</span> (m_pkeypair-&gt;<a class="code" href="class_o_t_keypair.html#aade0cd755f82672f25d1971dd59db688">MakeNewKeypair</a>(nBits))
    {
        <a class="code" href="class_o_t_string.html">OTString</a> strSource     (str_id_source),
                 strAltLocation(str_alt_location);
        <span class="comment">// ---------------------------------------------------------------</span>
        this-&gt;<a class="code" href="class_o_t_pseudonym.html#acad61b197881c4ebffdf8ea01145c8d1">SetNymIDSource</a>(strSource);
        this-&gt;<a class="code" href="class_o_t_pseudonym.html#a4cf79a66d25d8ea88b852afcd5e95284">SetAltLocation</a>(strAltLocation);
        <span class="comment">// ---------------------------------------------------------------</span>
        <a class="code" href="class_o_t_string.html">OTString</a> strReason(<span class="stringliteral">&quot;Creating new Nym.&quot;</span>); <span class="comment">// NOTE: Savex509CertAndPrivateKey sets the ID and sometimes if necessary, the source.</span>
        <span class="keywordtype">bool</span> bSaved = this-&gt;<a class="code" href="class_o_t_pseudonym.html#a395ce52dec4e07f04fb66521897c9cf2">Savex509CertAndPrivateKey</a>(bCreateFile, &amp;strReason);  <span class="comment">// Todo: remove this. Credentials code will supercede.</span>
        <span class="comment">// ---------------------------------------------------------------</span>
        <span class="keywordflow">if</span> (bSaved &amp;&amp; bCreateFile)
        {
            bSaved = this-&gt;<a class="code" href="class_o_t_pseudonym.html#a5d08ef86097db038c2c4fd30034f5dc8">SaveSignedNymfile</a>(*<span class="keyword">this</span>); <span class="comment">// Now we&#39;ll generate the NymFile as well! (bCreateFile will be false for temp Nyms..)</span>
        }
        <span class="comment">// ---------------------------------------------------------------</span>
        <span class="keywordflow">if</span> (bCreateFile &amp;&amp; !bSaved)
            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Failed trying to save new Nym&#39;s cert or nymfile.\n&quot;</span>, __FUNCTION__);
        <span class="keywordflow">else</span>
        {
            <span class="comment">// NEW CREDENTIALS CODE!</span>
            <span class="comment">// We&#39;ve added a parameter to this function so you can pass in the SOURCE for</span>
            <span class="comment">// the Nym (which is what is hashed to produce the NymID.) The source could be a Bitcoin</span>
            <span class="comment">// address, a URL, the Subject/Issuer DN info from a traditionally-issued certificate authority,</span>
            <span class="comment">// or a public key. (OT originally was written to hash a public key to form the NymID -- so we</span>
            <span class="comment">// will just continue to support that as an option.)</span>
            <span class="comment">//</span>
            <span class="comment">// If the SOURCE parameter is not passed, we will assume by default that the Nym has an existing one,</span>
            <span class="comment">// or uses its own public key as its source. This will become the first master credential, which can</span>
            <span class="comment">// then be used to issue keyCredentials and other types of subCredentials.</span>
            <span class="comment">//</span>
            <span class="comment">// UPDATE: Huh? I STILL need to be able to pass in a source, and STILL have it generate the key,</span>
            <span class="comment">// so I can&#39;t have it ONLY pass in the source when there&#39;s no key -- because sometimes I want to</span>
            <span class="comment">// pass the source and ALSO use the key that was generated. (Just, in that case, we want it to</span>
            <span class="comment">// use the hash of that source as the NymID, instead of the hash of the public key.)</span>
            <span class="comment">// (I will update AddNewMasterCredential so it allows that.)</span>
            <span class="comment">//</span>
            <a class="code" href="class_o_t_string.html">OTString</a> strMasterCredID;

            <span class="keyword">const</span> <span class="keywordtype">bool</span> bAddedMaster = this-&gt;<a class="code" href="class_o_t_pseudonym.html#aca99509bdb4ceb7ff4fdb793998aa794">AddNewMasterCredential</a>(strMasterCredID,
                                                                   (str_id_source.size() &gt; 0) ? &amp;strSource : NULL,
                                                                   nBits);

            <span class="keywordflow">if</span> (bAddedMaster &amp;&amp; strMasterCredID.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>() &amp;&amp; (this-&gt;<a class="code" href="class_o_t_pseudonym.html#a6ae670b44bc6728da06141c885e6c7e9">GetMasterCredentialCount</a>() &gt; 0))
            {
                <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theMasterCredID(strMasterCredID);
                <span class="keyword">const</span> <span class="keywordtype">bool</span> bAddedSubkey = this-&gt;<a class="code" href="class_o_t_pseudonym.html#a85bd691ffa8d5f066ba04886dccd0d4d">AddNewSubkey</a>(theMasterCredID);

                <span class="keywordflow">if</span> (bAddedSubkey)
                {
                    bSaved = this-&gt;<a class="code" href="class_o_t_pseudonym.html#af3709c1b5203330b607ca0f0acff9c53">SaveCredentialList</a>();
                }
                <span class="keywordflow">else</span>
                {
                    bSaved = <span class="keyword">false</span>;
                    <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Failed trying to add new keyCredential to new Master credential.\n&quot;</span>,
                                  __FUNCTION__);
                }
            }
            <span class="keywordflow">else</span>
            {
                bSaved = <span class="keyword">false</span>;
                <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Failed trying to add new master credential to new Nym.\n&quot;</span>,
                              __FUNCTION__);
            }
        }

        <span class="keywordflow">return</span> bSaved;
    }
    <span class="comment">// ---------------------------------------------------------------</span>
    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab592ef450504c5af83b84d8a15ef02ea"></a><!-- doxytag: member="OTPseudonym::GenerateTransactionStatement" ref="ab592ef450504c5af83b84d8a15ef02ea" args="(const OTTransaction &amp;theOwner)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_item.html">OTItem</a> * <a class="el" href="class_o_t_pseudonym.html#ab592ef450504c5af83b84d8a15ef02ea">OTPseudonym::GenerateTransactionStatement</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_transaction.html">OTTransaction</a> &amp;&#160;</td>
          <td class="paramname"><em>theOwner</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l01114">1114</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> ( (theOwner.<a class="code" href="class_o_t_transaction_type.html#a845d76c16f6f5f3f4bc9ac04393ca3c0">GetUserID</a>() != m_nymID) )
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;OTPseudonym::%s: Transaction has wrong owner (expected to match nym).\n&quot;</span>,
                      __FUNCTION__);
        <span class="keywordflow">return</span> NULL;
    }
    <span class="comment">// ---------------------------------------------------------</span>
    <span class="comment">// theOwner is the depositPaymentPlan, activateSmartContract, or marketOffer that triggered the need for this transaction statement.</span>
    <span class="comment">// since it uses up a transaction number, I will be sure to remove that one from my list before signing the list.</span>
    <a class="code" href="class_o_t_item.html">OTItem</a> * pBalanceItem = <a class="code" href="class_o_t_item.html#a2376ee56b6c536a63a59e2bfebada0b3">OTItem::CreateItemFromTransaction</a>(theOwner, <a class="code" href="class_o_t_item.html#a03db091faaab100aadc455f4ebe2c5d1a670c28ed39e72f752c91165aa937c51b">OTItem::transactionStatement</a>); <span class="comment">// &lt;=== transactionStatement type, with user ID, server ID, transaction ID.</span>

    <span class="comment">// The above has an ASSERT, so this this will never actually happen.</span>
    <span class="keywordflow">if</span> (NULL == pBalanceItem)
        <span class="keywordflow">return</span> NULL;

    <span class="comment">// --------------------------------------------------------</span>
    <span class="comment">// COPY THE ISSUED TRANSACTION NUMBERS FROM THE NYM</span>

    <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> theMessageNym;

    theMessageNym.<a class="code" href="class_o_t_pseudonym.html#aa120e0e319f6c4f26fe68628701008fc">HarvestIssuedNumbers</a>(theOwner.<a class="code" href="class_o_t_transaction_type.html#a59fc08d52ef5bc0ea546da7a56e86fa5">GetPurportedServerID</a>(),
                                       *<span class="keyword">this</span> <span class="comment">/*unused in this case, not saving to disk*/</span>, *<span class="keyword">this</span>, <span class="keyword">false</span>); <span class="comment">// bSave = false;</span>
    <span class="comment">// ---------------------------------------------------------</span>
    <span class="keywordflow">switch</span> (theOwner.<a class="code" href="class_o_t_transaction.html#ac964dfd1e704c02358a6641f030ead38">GetType</a>())
    {
        <span class="keywordflow">case</span> <a class="code" href="class_o_t_transaction.html#af6b54636f1000e09f19d1c7a7886e1f8a30587bf83cb273ffd6a72008d2545ca5">OTTransaction::cancelCronItem</a>:
            <span class="keywordflow">if</span> (theOwner.<a class="code" href="class_o_t_transaction_type.html#aa204b21b7f498389f746742c1d2007fa">GetTransactionNum</a>() &gt; 0)
            {
                theMessageNym.<a class="code" href="class_o_t_pseudonym.html#a17f25f5eb52440cc3ffc139dcbff75fe">RemoveIssuedNum</a>(theOwner.<a class="code" href="class_o_t_transaction_type.html#a6a6c7517c09f0abacc72c1ec84d937ed">GetRealServerID</a>(), theOwner.<a class="code" href="class_o_t_transaction_type.html#aa204b21b7f498389f746742c1d2007fa">GetTransactionNum</a>());  <span class="comment">// a transaction number is being used, and REMOVED from my list of responsibility,</span>
                theMessageNym.<a class="code" href="class_o_t_pseudonym.html#a3fb93588f8e68c7f56cee00930f07d34">RemoveTransactionNum</a>(theOwner.<a class="code" href="class_o_t_transaction_type.html#a6a6c7517c09f0abacc72c1ec84d937ed">GetRealServerID</a>(), theOwner.<a class="code" href="class_o_t_transaction_type.html#aa204b21b7f498389f746742c1d2007fa">GetTransactionNum</a>()); <span class="comment">// so I want the new signed list to reflect that number has been REMOVED.</span>
            }
            <span class="keywordflow">break</span>;

            <span class="comment">// Transaction Statements usually only have a transaction number in the case of market offers and</span>
            <span class="comment">// payment plans, in which case the number should NOT be removed, and remains in play until</span>
            <span class="comment">// final closure from Cron.</span>
        <span class="keywordflow">case</span> <a class="code" href="class_o_t_transaction.html#af6b54636f1000e09f19d1c7a7886e1f8acdd69363d8b62cadbfc6a8369a669bc0">OTTransaction::marketOffer</a>:
        <span class="keywordflow">case</span> <a class="code" href="class_o_t_transaction.html#af6b54636f1000e09f19d1c7a7886e1f8a7b7b233a1f4438ee26116ba1bda92cb0">OTTransaction::paymentPlan</a>:
        <span class="keywordflow">case</span> <a class="code" href="class_o_t_transaction.html#af6b54636f1000e09f19d1c7a7886e1f8a42b743fb9d9a40ac2a77499f9d87bde0">OTTransaction::smartContract</a>:
        <span class="keywordflow">default</span>:
            <span class="keywordflow">break</span>;
    }
    <span class="comment">// ---------------------------------------------------------</span>
    <span class="comment">// What about cases where no number is being used? (Such as processNymbox)</span>
    <span class="comment">// Perhaps then if this function is even called, it&#39;s with a 0-number transaction, in which</span>
    <span class="comment">// case the above Removes probably won&#39;t hurt anything.  Todo.</span>

    <a class="code" href="class_o_t_string.html">OTString</a>    strMessageNym(theMessageNym); <span class="comment">// Okay now we have the transaction numbers in this MessageNym string.</span>

    pBalanceItem-&gt;<a class="code" href="class_o_t_item.html#a6e5e9b0c04cb1eca8acaec5b0be1d641">SetAttachment</a>(strMessageNym); <span class="comment">// &lt;======== This is where the server will read the transaction numbers from (A nym in item.m_ascAttachment)</span>
    <span class="comment">// ---------------------------------------------------------</span>
    pBalanceItem-&gt;<a class="code" href="class_o_t_contract.html#abd60037fe655ee8cae9a3ece5d1e2ea6">SignContract</a>(*<span class="keyword">this</span>); <span class="comment">// &lt;=== Sign, save, and return. OTTransactionType needs to weasel in a &quot;date signed&quot; variable.</span>
    pBalanceItem-&gt;<a class="code" href="class_o_t_contract.html#a363ae430d4fd9256ab8364dbafb95444">SaveContract</a>();

    <span class="keywordflow">return</span> pBalanceItem;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a734cf5ea45bdcabf9a479acf1b5e6f7a"></a><!-- doxytag: member="OTPseudonym::GetAcknowledgedNum" ref="a734cf5ea45bdcabf9a479acf1b5e6f7a" args="(const OTIdentifier &amp;theServerID, int32_t nIndex)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64_t <a class="el" href="class_o_t_pseudonym.html#a734cf5ea45bdcabf9a479acf1b5e6f7a">OTPseudonym::GetAcknowledgedNum</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;&#160;</td>
          <td class="paramname"><em>theServerID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>nIndex</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l02185">2185</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> <a class="code" href="class_o_t_pseudonym.html#a811557a9ca1e0b98665d0530df901950">GetGenericNum</a>(m_mapAcknowledgedNum, theServerID, nIndex);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a7f5e5ae674b53d13ab71a343c8924c8a"></a><!-- doxytag: member="OTPseudonym::GetAcknowledgedNumCount" ref="a7f5e5ae674b53d13ab71a343c8924c8a" args="(const OTIdentifier &amp;theServerID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_pseudonym.html#a7f5e5ae674b53d13ab71a343c8924c8a">OTPseudonym::GetAcknowledgedNumCount</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;&#160;</td>
          <td class="paramname"><em>theServerID</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l02345">2345</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> <a class="code" href="class_o_t_pseudonym.html#a9fa197753dda1dfb88b286bdeb615c83">GetGenericNumCount</a>(m_mapAcknowledgedNum, theServerID);
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab8bd7424e1b95220cfe66372295664ff"></a><!-- doxytag: member="OTPseudonym::GetAltLocation" ref="ab8bd7424e1b95220cfe66372295664ff" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EXPORT const <a class="el" href="class_o_t_string.html">OTString</a>&amp; <a class="el" href="class_o_t_pseudonym.html#ab8bd7424e1b95220cfe66372295664ff">OTPseudonym::GetAltLocation</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8hpp_source.html#l00495">495</a> of file <a class="el" href="_o_t_pseudonym_8hpp_source.html">OTPseudonym.hpp</a>.</p>
<div class="fragment"><pre class="fragment">{ <span class="keywordflow">return</span> m_strAltLocation;    } <span class="comment">// Alternate download location for Nym&#39;s credential IDs. (Primary location being the source itself, but sometimes that&#39;s not feasible.)</span>
</pre></div>
</div>
</div>
<a class="anchor" id="a8167f1e2d532ab18227c5c170922c611"></a><!-- doxytag: member="OTPseudonym::GetConstID" ref="a8167f1e2d532ab18227c5c170922c611" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EXPORT const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a>&amp; <a class="el" href="class_o_t_pseudonym.html#a8167f1e2d532ab18227c5c170922c611">OTPseudonym::GetConstID</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8hpp_source.html#l00502">502</a> of file <a class="el" href="_o_t_pseudonym_8hpp_source.html">OTPseudonym.hpp</a>.</p>
<div class="fragment"><pre class="fragment">{ <span class="keywordflow">return</span> m_nymID; } <span class="comment">// CONST VERSION</span>
</pre></div>
</div>
</div>
<a class="anchor" id="a3866622c214e0c9b9ede3b00df3cdcba"></a><!-- doxytag: member="OTPseudonym::GetCurrentRequestNum" ref="a3866622c214e0c9b9ede3b00df3cdcba" args="(const OTString &amp;strServerID, int64_t &amp;lReqNum)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_pseudonym.html#a3866622c214e0c9b9ede3b00df3cdcba">OTPseudonym::GetCurrentRequestNum</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strServerID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t &amp;&#160;</td>
          <td class="paramname"><em>lReqNum</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l02945">2945</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">bool</span> bRetVal        = <span class="keyword">false</span>;
    std::string strID   = strServerID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();

    <span class="comment">// The Pseudonym has a map of the request numbers for different servers.</span>
    <span class="comment">// For Server Bob, with this Pseudonym, I might be on number 34.</span>
    <span class="comment">// For but Server Alice, I might be on number 59.</span>
    <span class="comment">//</span>
    <span class="comment">// So let&#39;s loop through all the numbers I have, and if the server ID on the map</span>
    <span class="comment">// matches the Server ID that was passed in, then send out the request number.</span>
    <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_pseudonym_8hpp.html#a973d5530da5375de1f5e0f75c7780869">mapOfRequestNums</a>, m_mapRequestNum)
    {
        <span class="keywordflow">if</span> ( strID == it-&gt;first )
        {
            <span class="comment">// Setup return value.</span>
            lReqNum = (it-&gt;second);

            <span class="comment">// The call has succeeded</span>
            bRetVal = <span class="keyword">true</span>;

            <span class="keywordflow">break</span>;
        }
    }

    <span class="keywordflow">return</span> bRetVal;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a811557a9ca1e0b98665d0530df901950"></a><!-- doxytag: member="OTPseudonym::GetGenericNum" ref="a811557a9ca1e0b98665d0530df901950" args="(mapOfTransNums &amp;THE_MAP, const OTIdentifier &amp;theServerID, int32_t nIndex)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64_t <a class="el" href="class_o_t_pseudonym.html#a811557a9ca1e0b98665d0530df901950">OTPseudonym::GetGenericNum</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_o_t_pseudonym_8hpp.html#ac99ad82dc6c392a0a8c851c6041b62f1">mapOfTransNums</a> &amp;&#160;</td>
          <td class="paramname"><em>THE_MAP</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;&#160;</td>
          <td class="paramname"><em>theServerID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>nIndex</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l02120">2120</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    int64_t lRetVal = 0;

    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strServerID(theServerID);
    std::string strID   = strServerID.Get();

    <span class="comment">// The Pseudonym has a deque of numbers for each server.</span>
    <span class="comment">// These deques are mapped by Server ID.</span>
    <span class="comment">//</span>
    <span class="comment">// So let&#39;s loop through all the deques I have, and if the server ID on the</span>
    <span class="comment">// maps matches the Server ID that was passed in, then find the number on</span>
    <span class="comment">// that list, and then return it.</span>
    <span class="comment">//</span>
    <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_pseudonym_8hpp.html#ac99ad82dc6c392a0a8c851c6041b62f1">mapOfTransNums</a>, THE_MAP)
    {
        <span class="comment">// if the ServerID passed in matches the serverID for the current deque</span>
        <span class="keywordflow">if</span> ( strID == it-&gt;first )
        {
            <a class="code" href="_o_t_pseudonym_8hpp.html#a94632bfde6cf91c8294122f77527bcf1">dequeOfTransNums</a> * pDeque = (it-&gt;second);
            <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pDeque);

            <span class="keywordflow">if</span> (!(pDeque-&gt;empty())) <span class="comment">// there are some numbers for that server ID</span>
            {
                <span class="comment">// Let&#39;s loop through them and see if the culprit is there</span>
                <span class="keywordflow">for</span> (uint32_t i = 0; i &lt; pDeque-&gt;size(); i++)
                {
                    <span class="comment">// Found it!</span>
                    <span class="keywordflow">if</span> ((uint32_t)nIndex == i)
                    {
                        lRetVal = pDeque-&gt;at(i); <span class="comment">// &lt;==== Got the number here.</span>
                        <span class="keywordflow">break</span>;
                    }
                }
            }
            <span class="keywordflow">break</span>;
        }
    }

    <span class="keywordflow">return</span> lRetVal;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a9fa197753dda1dfb88b286bdeb615c83"></a><!-- doxytag: member="OTPseudonym::GetGenericNumCount" ref="a9fa197753dda1dfb88b286bdeb615c83" args="(mapOfTransNums &amp;THE_MAP, const OTIdentifier &amp;theServerID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_pseudonym.html#a9fa197753dda1dfb88b286bdeb615c83">OTPseudonym::GetGenericNumCount</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_o_t_pseudonym_8hpp.html#ac99ad82dc6c392a0a8c851c6041b62f1">mapOfTransNums</a> &amp;&#160;</td>
          <td class="paramname"><em>THE_MAP</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;&#160;</td>
          <td class="paramname"><em>theServerID</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l02082">2082</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    int32_t nReturnValue = 0;

    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strServerID(theServerID);
    std::string strID   = strServerID.Get();

    <a class="code" href="_o_t_pseudonym_8hpp.html#a94632bfde6cf91c8294122f77527bcf1">dequeOfTransNums</a> * pDeque = NULL;

    <span class="comment">// The Pseudonym has a deque of transaction numbers for each server.</span>
    <span class="comment">// These deques are mapped by Server ID.</span>
    <span class="comment">//</span>
    <span class="comment">// So let&#39;s loop through all the deques I have, and if the server ID on the map</span>
    <span class="comment">// matches the Server ID that was passed in, then we found the right server.</span>
    <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_pseudonym_8hpp.html#ac99ad82dc6c392a0a8c851c6041b62f1">mapOfTransNums</a>, THE_MAP)
    {
        <span class="comment">// if the ServerID passed in matches the serverID for the current deque</span>
        <span class="keywordflow">if</span> ( strID == it-&gt;first )
        {
            pDeque = (it-&gt;second);
            <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pDeque);

            <span class="keywordflow">break</span>;
        }
    }

    <span class="comment">// We found the right server, so let&#39;s count the transaction numbers</span>
    <span class="comment">// that this nym has already stored for it.</span>
    <span class="keywordflow">if</span> (NULL != pDeque)
    {
        nReturnValue = <span class="keyword">static_cast&lt;</span>int32_t<span class="keyword">&gt;</span> (pDeque-&gt;size());
    }

    <span class="keywordflow">return</span> nReturnValue;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a519cdd66f0b7eccb54e77ced3b827cb8"></a><!-- doxytag: member="OTPseudonym::GetHighestNum" ref="a519cdd66f0b7eccb54e77ced3b827cb8" args="(const OTString &amp;strServerID, int64_t &amp;lHighestNum)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_pseudonym.html#a519cdd66f0b7eccb54e77ced3b827cb8">OTPseudonym::GetHighestNum</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strServerID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t &amp;&#160;</td>
          <td class="paramname"><em>lHighestNum</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l02712">2712</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">bool</span> bRetVal        = <span class="keyword">false</span>;
    std::string strID   = strServerID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();

    <span class="comment">// The Pseudonym has a map of the highest transaction # it&#39;s received from different servers.</span>
    <span class="comment">// For Server Bob, with this Pseudonym, I might be on number 34.</span>
    <span class="comment">// For but Server Alice, I might be on number 59.</span>
    <span class="comment">//</span>
    <span class="comment">// So let&#39;s loop through all the numbers I have, and if the server ID on the map</span>
    <span class="comment">// matches the Server ID that was passed in, then send out the highest number.</span>
    <span class="comment">//</span>
    <span class="comment">// Since the transaction number only ever gets bigger, this is a way of preventing</span>
    <span class="comment">// the server from EVER tricking us by trying to give us a number that we&#39;ve</span>
    <span class="comment">// already seen before.</span>
    <span class="comment">//</span>
    <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_pseudonym_8hpp.html#a0ed9ca5cfdfd9902dd8bd342d344a275">mapOfHighestNums</a>, m_mapHighTransNo)
    {
        <span class="keywordflow">if</span> ( strID == it-&gt;first )
        {
            <span class="comment">// Setup return value.</span>
            lHighestNum = (it-&gt;second);

            <span class="comment">// The call has succeeded</span>
            bRetVal = <span class="keyword">true</span>;

            <span class="keywordflow">break</span>;
        }
    }

    <span class="keywordflow">return</span> bRetVal;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a1775c7aedd0dd25b2faf3f78dcccabe7"></a><!-- doxytag: member="OTPseudonym::GetIdentifier" ref="a1775c7aedd0dd25b2faf3f78dcccabe7" args="(OTIdentifier &amp;theIdentifier) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_pseudonym.html#a1775c7aedd0dd25b2faf3f78dcccabe7">OTPseudonym::GetIdentifier</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;&#160;</td>
          <td class="paramname"><em>theIdentifier</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l06029">6029</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    theIdentifier = m_nymID;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aab41ab04c084ed675e766be743873f5d"></a><!-- doxytag: member="OTPseudonym::GetIdentifier" ref="aab41ab04c084ed675e766be743873f5d" args="(OTString &amp;theIdentifier) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_pseudonym.html#a1775c7aedd0dd25b2faf3f78dcccabe7">OTPseudonym::GetIdentifier</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>theIdentifier</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l06043">6043</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    m_nymID.<a class="code" href="class_o_t_identifier.html#a4bccb30446b4b515d9d6016b86b260bb">GetString</a>(theIdentifier);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a89fb6af0b242e8b4468d34b0057e95f5"></a><!-- doxytag: member="OTPseudonym::GetInboxHash" ref="a89fb6af0b242e8b4468d34b0057e95f5" args="(const std::string &amp;acct_id, OTIdentifier &amp;theOutput) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_pseudonym.html#a89fb6af0b242e8b4468d34b0057e95f5">OTPseudonym::GetInboxHash</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>acct_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;&#160;</td>
          <td class="paramname"><em>theOutput</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l01505">1505</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> this-&gt;GetHash(m_mapInboxHash, acct_id, theOutput);
}
</pre></div>
</div>
</div>
<a class="anchor" id="ada98078d45460303c6a746c53381f5aa"></a><!-- doxytag: member="OTPseudonym::GetIssuedNum" ref="ada98078d45460303c6a746c53381f5aa" args="(const OTIdentifier &amp;theServerID, int32_t nIndex)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64_t <a class="el" href="class_o_t_pseudonym.html#ada98078d45460303c6a746c53381f5aa">OTPseudonym::GetIssuedNum</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;&#160;</td>
          <td class="paramname"><em>theServerID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>nIndex</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l02171">2171</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> <a class="code" href="class_o_t_pseudonym.html#a811557a9ca1e0b98665d0530df901950">GetGenericNum</a>(m_mapIssuedNum, theServerID, nIndex);
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac4fec9b0b744c9fbe3bae82c25661d19"></a><!-- doxytag: member="OTPseudonym::GetIssuedNumCount" ref="ac4fec9b0b744c9fbe3bae82c25661d19" args="(const OTIdentifier &amp;theServerID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_pseudonym.html#ac4fec9b0b744c9fbe3bae82c25661d19">OTPseudonym::GetIssuedNumCount</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;&#160;</td>
          <td class="paramname"><em>theServerID</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l02257">2257</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> <a class="code" href="class_o_t_pseudonym.html#a9fa197753dda1dfb88b286bdeb615c83">GetGenericNumCount</a>(m_mapIssuedNum, theServerID);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a41d4a62c9e863fa982c7b4899bfcd3cb"></a><!-- doxytag: member="OTPseudonym::GetMailByIndex" ref="a41d4a62c9e863fa982c7b4899bfcd3cb" args="(const int32_t nIndex)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_message.html">OTMessage</a> * <a class="el" href="class_o_t_pseudonym.html#a41d4a62c9e863fa982c7b4899bfcd3cb">OTPseudonym::GetMailByIndex</a> </td>
          <td>(</td>
          <td class="paramtype">const int32_t&#160;</td>
          <td class="paramname"><em>nIndex</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l00894">894</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keyword">const</span> uint32_t uIndex = nIndex;

    <span class="comment">// Out of bounds.</span>
    <span class="keywordflow">if</span> (m_dequeMail.empty() ||
        (nIndex &lt; 0)        || (uIndex &gt;= m_dequeMail.size()))
        <span class="keywordflow">return</span> NULL;

    <span class="keywordflow">return</span> m_dequeMail.at(nIndex);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a6a449ad7415513ce538c4a2e71efde87"></a><!-- doxytag: member="OTPseudonym::GetMailCount" ref="a6a449ad7415513ce538c4a2e71efde87" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_pseudonym.html#a6a449ad7415513ce538c4a2e71efde87">OTPseudonym::GetMailCount</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>return the number of mail items available for this Nym. </p>

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l00886">886</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span>int32_t<span class="keyword">&gt;</span> (m_dequeMail.size());
}
</pre></div>
</div>
</div>
<a class="anchor" id="a85032e117d04c1682eb6dd405694b5b2"></a><!-- doxytag: member="OTPseudonym::GetMapAcknowledgedNum" ref="a85032e117d04c1682eb6dd405694b5b2" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_o_t_pseudonym_8hpp.html#ac99ad82dc6c392a0a8c851c6041b62f1">mapOfTransNums</a>&amp; <a class="el" href="class_o_t_pseudonym.html#a85032e117d04c1682eb6dd405694b5b2">OTPseudonym::GetMapAcknowledgedNum</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8hpp_source.html#l00538">538</a> of file <a class="el" href="_o_t_pseudonym_8hpp_source.html">OTPseudonym.hpp</a>.</p>
<div class="fragment"><pre class="fragment">{ <span class="keywordflow">return</span> m_mapAcknowledgedNum;  } <span class="comment">// This one actually stores request numbers.</span>
</pre></div>
</div>
</div>
<a class="anchor" id="a74e834007bee7a45651a98257152da72"></a><!-- doxytag: member="OTPseudonym::GetMapIssuedNum" ref="a74e834007bee7a45651a98257152da72" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_o_t_pseudonym_8hpp.html#ac99ad82dc6c392a0a8c851c6041b62f1">mapOfTransNums</a>&amp; <a class="el" href="class_o_t_pseudonym.html#a74e834007bee7a45651a98257152da72">OTPseudonym::GetMapIssuedNum</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8hpp_source.html#l00536">536</a> of file <a class="el" href="_o_t_pseudonym_8hpp_source.html">OTPseudonym.hpp</a>.</p>
<div class="fragment"><pre class="fragment">{ <span class="keywordflow">return</span> m_mapIssuedNum;        }
</pre></div>
</div>
</div>
<a class="anchor" id="a4e2a3cfc5b7b7f02fa95ad1b47ead694"></a><!-- doxytag: member="OTPseudonym::GetMapTentativeNum" ref="a4e2a3cfc5b7b7f02fa95ad1b47ead694" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_o_t_pseudonym_8hpp.html#ac99ad82dc6c392a0a8c851c6041b62f1">mapOfTransNums</a>&amp; <a class="el" href="class_o_t_pseudonym.html#a4e2a3cfc5b7b7f02fa95ad1b47ead694">OTPseudonym::GetMapTentativeNum</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8hpp_source.html#l00537">537</a> of file <a class="el" href="_o_t_pseudonym_8hpp_source.html">OTPseudonym.hpp</a>.</p>
<div class="fragment"><pre class="fragment">{ <span class="keywordflow">return</span> m_mapTentativeNum;     }
</pre></div>
</div>
</div>
<a class="anchor" id="ad76c36d904dc79a4ce3115fefda3c197"></a><!-- doxytag: member="OTPseudonym::GetMapTransNum" ref="ad76c36d904dc79a4ce3115fefda3c197" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_o_t_pseudonym_8hpp.html#ac99ad82dc6c392a0a8c851c6041b62f1">mapOfTransNums</a>&amp; <a class="el" href="class_o_t_pseudonym.html#ad76c36d904dc79a4ce3115fefda3c197">OTPseudonym::GetMapTransNum</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8hpp_source.html#l00535">535</a> of file <a class="el" href="_o_t_pseudonym_8hpp_source.html">OTPseudonym.hpp</a>.</p>
<div class="fragment"><pre class="fragment">{ <span class="keywordflow">return</span> m_mapTransNum;         }
</pre></div>
</div>
</div>
<a class="anchor" id="a94f8a8812ceae9a1f003aa79bfda73a5"></a><!-- doxytag: member="OTPseudonym::GetMasterCredential" ref="a94f8a8812ceae9a1f003aa79bfda73a5" args="(const OTString &amp;strID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_credential.html">OTCredential</a> * <a class="el" href="class_o_t_pseudonym.html#a94f8a8812ceae9a1f003aa79bfda73a5">OTPseudonym::GetMasterCredential</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strID</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l04438">4438</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    mapOfCredentials::iterator iter = m_mapCredentials.find(strID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
    <a class="code" href="class_o_t_credential.html">OTCredential</a> * pCredential = NULL;

    <span class="keywordflow">if</span> (iter != m_mapCredentials.end()) <span class="comment">// found it</span>
        pCredential = (*iter).second;

    <span class="keywordflow">return</span> pCredential;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae32a4525f158913b21f010a796f5fc29"></a><!-- doxytag: member="OTPseudonym::GetMasterCredentialByIndex" ref="ae32a4525f158913b21f010a796f5fc29" args="(int32_t nIndex) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="class_o_t_credential.html">OTCredential</a> * <a class="el" href="class_o_t_pseudonym.html#ae32a4525f158913b21f010a796f5fc29">OTPseudonym::GetMasterCredentialByIndex</a> </td>
          <td>(</td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>nIndex</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l04462">4462</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> ((nIndex &lt; 0) || (nIndex &gt;= static_cast&lt;int64_t&gt;(m_mapCredentials.size())))
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Index out of bounds: %d\n&quot;</span>, __FUNCTION__, nIndex);
    }
    <span class="comment">// --------------------</span>
    <span class="keywordflow">else</span>
    {
        int32_t nLoopIndex = -1;

        <a class="code" href="_o_t_storage_8hpp.html#a804eb881e96b7e1846d130a55a94f716">FOR_EACH_CONST</a>(<a class="code" href="_o_t_pseudonym_8hpp.html#a0617d6d6c189c161a3fcf3c4710f5dba">mapOfCredentials</a>, m_mapCredentials)
        {
            <span class="keyword">const</span> <a class="code" href="class_o_t_credential.html">OTCredential</a> * pCredential = (*it).second;
            <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pCredential);
            <span class="comment">// ---------------------------------</span>
            ++nLoopIndex; <span class="comment">// 0 on first iteration.</span>
            <span class="comment">// ---------------------------------</span>
            <span class="keywordflow">if</span> (nLoopIndex == nIndex)
                <span class="keywordflow">return</span> pCredential;
            <span class="comment">// ---------------------------------</span>
        }
    }
    <span class="keywordflow">return</span> NULL;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a6ae670b44bc6728da06141c885e6c7e9"></a><!-- doxytag: member="OTPseudonym::GetMasterCredentialCount" ref="a6ae670b44bc6728da06141c885e6c7e9" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t <a class="el" href="class_o_t_pseudonym.html#a6ae670b44bc6728da06141c885e6c7e9">OTPseudonym::GetMasterCredentialCount</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l03101">3101</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> m_mapCredentials.size();
}
</pre></div>
</div>
</div>
<a class="anchor" id="a82c5ec5457947738c807bffd581181ac"></a><!-- doxytag: member="OTPseudonym::GetNextTransactionNum" ref="a82c5ec5457947738c807bffd581181ac" args="(OTPseudonym &amp;SIGNER_NYM, const OTString &amp;strServerID, int64_t &amp;lTransNum, bool bSave=true)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_pseudonym.html#a82c5ec5457947738c807bffd581181ac">OTPseudonym::GetNextTransactionNum</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;&#160;</td>
          <td class="paramname"><em>SIGNER_NYM</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strServerID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t &amp;&#160;</td>
          <td class="paramname"><em>lTransNum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>bSave</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Client side. Get the next available transaction number for the serverID The lTransNum parameter is for the return value. SAVES if successful. </p>

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l02665">2665</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">bool</span> bRetVal        = <span class="keyword">false</span>;
    std::string strID   = strServerID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();

    <span class="comment">// The Pseudonym has a deque of transaction numbers for each server.</span>
    <span class="comment">// These deques are mapped by Server ID.</span>
    <span class="comment">//</span>
    <span class="comment">// So let&#39;s loop through all the deques I have, and if the server ID on the map</span>
    <span class="comment">// matches the Server ID that was passed in, then send out the transaction  number.</span>
    <span class="comment">//</span>
    <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_pseudonym_8hpp.html#ac99ad82dc6c392a0a8c851c6041b62f1">mapOfTransNums</a>, m_mapTransNum)
    {
        <span class="comment">// if the ServerID passed in matches the serverID for the current deque</span>
        <span class="keywordflow">if</span> ( strID == it-&gt;first )
        {
            <a class="code" href="_o_t_pseudonym_8hpp.html#a94632bfde6cf91c8294122f77527bcf1">dequeOfTransNums</a> * pDeque = (it-&gt;second);
            <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pDeque);

            <span class="keywordflow">if</span> (!(pDeque-&gt;empty()))
            {
                lTransNum = pDeque-&gt;front();

                pDeque-&gt;pop_front();

                <span class="comment">// The call has succeeded</span>
                bRetVal = <span class="keyword">true</span>;
            }
            <span class="keywordflow">break</span>;
        }
    }

    <span class="keywordflow">if</span> (bRetVal &amp;&amp; bSave)
    {
        <span class="keywordflow">if</span> (<span class="keyword">false</span> == <a class="code" href="class_o_t_pseudonym.html#a5d08ef86097db038c2c4fd30034f5dc8">SaveSignedNymfile</a>(SIGNER_NYM))
            <a class="code" href="class_o_t_log.html#a5acd90ac91c2618f395b0ff37ad4f8ee">OTLog::Error</a>(<span class="stringliteral">&quot;Error saving signed NymFile in OTPseudonym::GetNextTransactionNum\n&quot;</span>);
    }

    <span class="keywordflow">return</span> bRetVal;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a461ac5959e5f91add57549be10d82e36"></a><!-- doxytag: member="OTPseudonym::GetNymboxHash" ref="a461ac5959e5f91add57549be10d82e36" args="(const std::string &amp;server_id, OTIdentifier &amp;theOutput) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_pseudonym.html#a461ac5959e5f91add57549be10d82e36">OTPseudonym::GetNymboxHash</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>server_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;&#160;</td>
          <td class="paramname"><em>theOutput</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l01481">1481</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> this-&gt;GetHash(m_mapNymboxHash, server_id, theOutput);
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac9c61ecf8fe65ec5b862021bd063422a"></a><!-- doxytag: member="OTPseudonym::GetNymboxHashServerSide" ref="ac9c61ecf8fe65ec5b862021bd063422a" args="(const OTIdentifier &amp;theServerID, OTIdentifier &amp;theOutput)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_pseudonym.html#ac9c61ecf8fe65ec5b862021bd063422a">OTPseudonym::GetNymboxHashServerSide</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;&#160;</td>
          <td class="paramname"><em>theServerID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;&#160;</td>
          <td class="paramname"><em>theOutput</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l01461">1461</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (m_NymboxHash.<a class="code" href="class_o_t_data.html#a947528765516223eb03bee7745eb8c07">IsEmpty</a>())
    {
        <a class="code" href="class_o_t_ledger.html">OTLedger</a> theNymbox(m_nymID, m_nymID, theServerID);

        <span class="keywordflow">if</span> (theNymbox.LoadNymbox() &amp;&amp; theNymbox.CalculateNymboxHash(theOutput))
            <span class="keywordflow">return</span> <span class="keyword">true</span>;
    }

    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab76ac495443316ded275e7bb281388d2"></a><!-- doxytag: member="OTPseudonym::GetNymIDSource" ref="ab76ac495443316ded275e7bb281388d2" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EXPORT const <a class="el" href="class_o_t_string.html">OTString</a>&amp; <a class="el" href="class_o_t_pseudonym.html#ab76ac495443316ded275e7bb281388d2">OTPseudonym::GetNymIDSource</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8hpp_source.html#l00494">494</a> of file <a class="el" href="_o_t_pseudonym_8hpp_source.html">OTPseudonym.hpp</a>.</p>
<div class="fragment"><pre class="fragment">{ <span class="keywordflow">return</span> m_strSourceForNymID; } <span class="comment">// Source for NymID for this credential. (Hash it to get ID.)</span>
</pre></div>
</div>
</div>
<a class="anchor" id="a42e63697c3c3b1bdb526ee7990a9c0e7"></a><!-- doxytag: member="OTPseudonym::GetNymName" ref="a42e63697c3c3b1bdb526ee7990a9c0e7" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_string.html">OTString</a>&amp; <a class="el" href="class_o_t_pseudonym.html#a42e63697c3c3b1bdb526ee7990a9c0e7">OTPseudonym::GetNymName</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8hpp_source.html#l00339">339</a> of file <a class="el" href="_o_t_pseudonym_8hpp_source.html">OTPseudonym.hpp</a>.</p>
<div class="fragment"><pre class="fragment">{ <span class="keywordflow">return</span> m_strName; }
</pre></div>
</div>
</div>
<a class="anchor" id="aae9b25973d9bce353fb124bcebbb4fc6"></a><!-- doxytag: member="OTPseudonym::GetOutboxHash" ref="aae9b25973d9bce353fb124bcebbb4fc6" args="(const std::string &amp;acct_id, OTIdentifier &amp;theOutput) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_pseudonym.html#aae9b25973d9bce353fb124bcebbb4fc6">OTPseudonym::GetOutboxHash</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>acct_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;&#160;</td>
          <td class="paramname"><em>theOutput</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l01517">1517</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> this-&gt;GetHash(m_mapOutboxHash, acct_id, theOutput);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a126bbb8a3d356a0fd2118c95dfe6cbea"></a><!-- doxytag: member="OTPseudonym::GetOutmailByIndex" ref="a126bbb8a3d356a0fd2118c95dfe6cbea" args="(const int32_t nIndex)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_message.html">OTMessage</a> * <a class="el" href="class_o_t_pseudonym.html#a126bbb8a3d356a0fd2118c95dfe6cbea">OTPseudonym::GetOutmailByIndex</a> </td>
          <td>(</td>
          <td class="paramtype">const int32_t&#160;</td>
          <td class="paramname"><em>nIndex</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l00956">956</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keyword">const</span> uint32_t uIndex = nIndex;

    <span class="comment">// Out of bounds.</span>
    <span class="keywordflow">if</span> (m_dequeOutmail.empty()  ||
        (nIndex &lt; 0)        || (uIndex &gt;= m_dequeOutmail.size()))
        <span class="keywordflow">return</span> NULL;

    <span class="keywordflow">return</span> m_dequeOutmail.at(nIndex);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a746ab3941be5529f11a772a004e17b69"></a><!-- doxytag: member="OTPseudonym::GetOutmailCount" ref="a746ab3941be5529f11a772a004e17b69" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_pseudonym.html#a746ab3941be5529f11a772a004e17b69">OTPseudonym::GetOutmailCount</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>return the number of mail items available for this Nym. </p>

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l00948">948</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span>int32_t<span class="keyword">&gt;</span> (m_dequeOutmail.size());
}
</pre></div>
</div>
</div>
<a class="anchor" id="acb808e89943f1f2d0009825a3fbcb34f"></a><!-- doxytag: member="OTPseudonym::GetOutpaymentsByIndex" ref="acb808e89943f1f2d0009825a3fbcb34f" args="(const int32_t nIndex)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_message.html">OTMessage</a> * <a class="el" href="class_o_t_pseudonym.html#acb808e89943f1f2d0009825a3fbcb34f">OTPseudonym::GetOutpaymentsByIndex</a> </td>
          <td>(</td>
          <td class="paramtype">const int32_t&#160;</td>
          <td class="paramname"><em>nIndex</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l01018">1018</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keyword">const</span> uint32_t uIndex = nIndex;

    <span class="comment">// Out of bounds.</span>
    <span class="keywordflow">if</span> (m_dequeOutpayments.empty()  ||
        (nIndex &lt; 0)        || (uIndex &gt;= m_dequeOutpayments.size()))
        <span class="keywordflow">return</span> NULL;

    <span class="keywordflow">return</span> m_dequeOutpayments.at(nIndex);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a66289f0575ef0b91cb5fefa4483f0d3e"></a><!-- doxytag: member="OTPseudonym::GetOutpaymentsCount" ref="a66289f0575ef0b91cb5fefa4483f0d3e" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_pseudonym.html#a66289f0575ef0b91cb5fefa4483f0d3e">OTPseudonym::GetOutpaymentsCount</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>return the number of payments items available for this Nym. </p>

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l01010">1010</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span>int32_t<span class="keyword">&gt;</span> (m_dequeOutpayments.size());
}
</pre></div>
</div>
</div>
<a class="anchor" id="a0fb41be70cd60e4febffce961bf39823"></a><!-- doxytag: member="OTPseudonym::GetOutpaymentsIndexByTransNum" ref="a0fb41be70cd60e4febffce961bf39823" args="(const int64_t lTransNum)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_pseudonym.html#a0fb41be70cd60e4febffce961bf39823">OTPseudonym::GetOutpaymentsIndexByTransNum</a> </td>
          <td>(</td>
          <td class="paramtype">const int64_t&#160;</td>
          <td class="paramname"><em>lTransNum</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l01031">1031</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    int32_t lOutpaymentsCount = this-&gt;<a class="code" href="class_o_t_pseudonym.html#a66289f0575ef0b91cb5fefa4483f0d3e" title="return the number of payments items available for this Nym.">GetOutpaymentsCount</a>();

    <span class="keywordflow">for</span> (int32_t lOutpaymentsIndex = 0; lOutpaymentsIndex &lt; lOutpaymentsCount; ++lOutpaymentsIndex)
    {
        <a class="code" href="class_o_t_message.html">OTMessage</a> * pOutpaymentMsg = this-&gt;<a class="code" href="class_o_t_pseudonym.html#acb808e89943f1f2d0009825a3fbcb34f">GetOutpaymentsByIndex</a>(lOutpaymentsIndex);
        <span class="keywordflow">if</span> (NULL != pOutpaymentMsg)
        {
            <a class="code" href="class_o_t_string.html">OTString</a> strPayment;

            <span class="comment">// There isn&#39;t any encrypted envelope this time, since it&#39;s my outPayments box.</span>
            <span class="comment">//</span>
            <span class="keywordflow">if</span> (pOutpaymentMsg-&gt;<a class="code" href="class_o_t_message.html#aa6729578b97f61804e91035a7709800a">m_ascPayload</a>.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>() &amp;&amp;
                pOutpaymentMsg-&gt;<a class="code" href="class_o_t_message.html#aa6729578b97f61804e91035a7709800a">m_ascPayload</a>.<a class="code" href="class_o_t_a_s_c_i_i_armor.html#ab39b6cae69c14149716e5ce7a6f0bb0f">GetString</a>(strPayment) &amp;&amp;
                strPayment.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>())
            {
                <a class="code" href="class_o_t_payment.html">OTPayment</a> thePayment(strPayment);
                <span class="comment">// ---------------------------------------------</span>
                <span class="comment">// Let&#39;s see if it&#39;s the cheque we&#39;re looking for...</span>
                <span class="comment">//</span>
                <span class="keywordflow">if</span> (thePayment.IsValid())
                {
                    <span class="keywordflow">if</span> (thePayment.SetTempValues())
                    {
                        <span class="keywordflow">if</span> (thePayment.HasTransactionNum(lTransNum))
                        {
                            <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span>int32_t<span class="keyword">&gt;</span>(lOutpaymentsIndex);
                        }
                    }
                }
            }
        }
    } <span class="comment">// for</span>
    <span class="comment">// --------------------------------------------------------</span>
    <span class="keywordflow">return</span> (-1);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a9c8f3ffd5794421fad974137e2067dd4"></a><!-- doxytag: member="OTPseudonym::GetPrivateAuthKey" ref="a9c8f3ffd5794421fad974137e2067dd4" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="class_o_t_asymmetric_key.html">OTAsymmetricKey</a> &amp; <a class="el" href="class_o_t_pseudonym.html#a9c8f3ffd5794421fad974137e2067dd4">OTPseudonym::GetPrivateAuthKey</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l05772">5772</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (m_mapCredentials.size() &gt; 0)
    {
        <span class="keyword">const</span> <a class="code" href="class_o_t_credential.html">OTCredential</a> * pCredential = NULL;

        <a class="code" href="_o_t_storage_8hpp.html#a804eb881e96b7e1846d130a55a94f716">FOR_EACH_CONST</a>(<a class="code" href="_o_t_pseudonym_8hpp.html#a0617d6d6c189c161a3fcf3c4710f5dba">mapOfCredentials</a>, m_mapCredentials)
        {
            <span class="comment">// ------------------</span>
            <span class="comment">// Todo: If we have some criteria, such as which master or subcredential</span>
            <span class="comment">// is currently being employed by the user, we&#39;ll use that here to skip</span>
            <span class="comment">// through this loop until we find the right one. Until then, I&#39;m just</span>
            <span class="comment">// going to return the first one that&#39;s valid (not null).</span>
            <span class="comment">// ------------------</span>
            pCredential = (*it).second;
            <span class="keywordflow">if</span>(NULL != pCredential) <span class="keywordflow">break</span>;
        }
        <span class="keywordflow">if</span> (NULL == pCredential) <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>;

        <span class="keywordflow">return</span> pCredential-&gt;<a class="code" href="class_o_t_credential.html#a9e945359c5f333cf0a4915c2c3258453">GetPrivateAuthKey</a>(&amp;m_listRevokedIDs); <span class="comment">// success</span>
    }
    <span class="keywordflow">else</span>
    {
        <a class="code" href="class_o_t_string.html">OTString</a> strNymID;
        this-&gt;<a class="code" href="class_o_t_pseudonym.html#a1775c7aedd0dd25b2faf3f78dcccabe7">GetIdentifier</a>(strNymID);
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(1, <span class="stringliteral">&quot;%s: This nym (%s) has no credentials from where I can pluck a private AUTHENTICATION key, apparently. Instead, using the private key on the Nym&#39;s keypair (a system which is being deprecated in favor of credentials, so it&#39;s not good that I&#39;m having to do this here. Why are there no credentials on this Nym?)\n&quot;</span>, __FUNCTION__, strNymID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
    }

<span class="comment">//  else // Deprecated.</span>
    {
        <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != m_pkeypair);
        <span class="comment">// -------</span>
        <span class="keywordflow">return</span> m_pkeypair-&gt;<a class="code" href="class_o_t_keypair.html#af81de69986e6aa2404fce47311871902">GetPrivateKey</a>();
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a508533f6ccb558e21bc205d3463a1aa5"></a><!-- doxytag: member="OTPseudonym::GetPrivateCredentials" ref="a508533f6ccb558e21bc205d3463a1aa5" args="(OTString &amp;strCredList, mapOfStrings *pmapCredFiles=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_pseudonym.html#a508533f6ccb558e21bc205d3463a1aa5">OTPseudonym::GetPrivateCredentials</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strCredList</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="_o_t_string_8hpp.html#a7ec7839682b097a5c5b5c5125046c82b">mapOfStrings</a> *&#160;</td>
          <td class="paramname"><em>pmapCredFiles</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l03765">3765</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_o_t_string.html">OTString</a> strNymID;
    this-&gt;<a class="code" href="class_o_t_pseudonym.html#a1775c7aedd0dd25b2faf3f78dcccabe7">GetIdentifier</a>(strNymID);

    strCredList.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;&lt;?xml version=\&quot;%s\&quot;?&gt;\n&quot;</span>, <span class="stringliteral">&quot;2.0&quot;</span>); <span class="comment">// todo hardcoding.</span>

    strCredList.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;&lt;OTuser version=\&quot;%s\&quot;\n&quot;</span>
                            <span class="stringliteral">&quot; nymID=\&quot;%s\&quot;&quot;</span>
                            <span class="stringliteral">&quot;&gt;\n\n&quot;</span>,
                            m_strVersion.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(),
                            strNymID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>()
                            );
    <span class="comment">// ----------------------------------------------------</span>
    this-&gt;<a class="code" href="class_o_t_pseudonym.html#a9a6189232f8cde0df210920ce3839199">SerializeNymIDSource</a>(strCredList);
    <span class="comment">// ----------------------------------------------------</span>
    this-&gt;<a class="code" href="class_o_t_pseudonym.html#a827f18578f6ef959984ccadcf5f432f6">SaveCredentialsToString</a>(strCredList, NULL, pmapCredFiles);
    <span class="comment">// ----------------------------------------------------</span>
    strCredList.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;&lt;/OTuser&gt;\n&quot;</span>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a89830be018a88bd1201b296065602f61"></a><!-- doxytag: member="OTPseudonym::GetPrivateEncrKey" ref="a89830be018a88bd1201b296065602f61" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="class_o_t_asymmetric_key.html">OTAsymmetricKey</a> &amp; <a class="el" href="class_o_t_pseudonym.html#a89830be018a88bd1201b296065602f61">OTPseudonym::GetPrivateEncrKey</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l05809">5809</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (m_mapCredentials.size() &gt; 0)
    {
        <span class="keyword">const</span> <a class="code" href="class_o_t_credential.html">OTCredential</a> * pCredential = NULL;

        <a class="code" href="_o_t_storage_8hpp.html#a804eb881e96b7e1846d130a55a94f716">FOR_EACH_CONST</a>(<a class="code" href="_o_t_pseudonym_8hpp.html#a0617d6d6c189c161a3fcf3c4710f5dba">mapOfCredentials</a>, m_mapCredentials)
        {
            <span class="comment">// ------------------</span>
            <span class="comment">// Todo: If we have some criteria, such as which master or subcredential</span>
            <span class="comment">// is currently being employed by the user, we&#39;ll use that here to skip</span>
            <span class="comment">// through this loop until we find the right one. Until then, I&#39;m just</span>
            <span class="comment">// going to return the first one that&#39;s valid (not null).</span>
            <span class="comment">// ------------------</span>
            pCredential = (*it).second;
            <span class="keywordflow">if</span>(NULL != pCredential) <span class="keywordflow">break</span>;
        }
        <span class="keywordflow">if</span> (NULL == pCredential) <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>;

        <span class="keywordflow">return</span> pCredential-&gt;<a class="code" href="class_o_t_credential.html#af9740dc82f94561f391eecd8d9029e93">GetPrivateEncrKey</a>(&amp;m_listRevokedIDs);; <span class="comment">// success</span>
    }
    <span class="keywordflow">else</span>
    {
        <a class="code" href="class_o_t_string.html">OTString</a> strNymID;
        this-&gt;<a class="code" href="class_o_t_pseudonym.html#a1775c7aedd0dd25b2faf3f78dcccabe7">GetIdentifier</a>(strNymID);
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(1, <span class="stringliteral">&quot;%s: This nym (%s) has no credentials from where I can pluck a private ENCRYPTION key, apparently. Instead, using the private key on the Nym&#39;s keypair (a system which is being deprecated in favor of credentials, so it&#39;s not good that I&#39;m having to do this here. Why are there no credentials on this Nym?)\n&quot;</span>, __FUNCTION__, strNymID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
    }

<span class="comment">//  else // Deprecated.</span>
    {
        <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != m_pkeypair);
        <span class="comment">// -------</span>
        <span class="keywordflow">return</span> m_pkeypair-&gt;<a class="code" href="class_o_t_keypair.html#af81de69986e6aa2404fce47311871902">GetPrivateKey</a>();
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="aca7ec90ca6e4511526dc49485f9f9a61"></a><!-- doxytag: member="OTPseudonym::GetPrivateSignKey" ref="aca7ec90ca6e4511526dc49485f9f9a61" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="class_o_t_asymmetric_key.html">OTAsymmetricKey</a> &amp; <a class="el" href="class_o_t_pseudonym.html#aca7ec90ca6e4511526dc49485f9f9a61">OTPseudonym::GetPrivateSignKey</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l05846">5846</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (m_mapCredentials.size() &gt; 0)
    {
        <span class="keyword">const</span> <a class="code" href="class_o_t_credential.html">OTCredential</a> * pCredential = NULL;

        <a class="code" href="_o_t_storage_8hpp.html#a804eb881e96b7e1846d130a55a94f716">FOR_EACH_CONST</a>(<a class="code" href="_o_t_pseudonym_8hpp.html#a0617d6d6c189c161a3fcf3c4710f5dba">mapOfCredentials</a>, m_mapCredentials)
        {
            <span class="comment">// ------------------</span>
            <span class="comment">// Todo: If we have some criteria, such as which master or subcredential</span>
            <span class="comment">// is currently being employed by the user, we&#39;ll use that here to skip</span>
            <span class="comment">// through this loop until we find the right one. Until then, I&#39;m just</span>
            <span class="comment">// going to return the first one that&#39;s valid (not null).</span>
            <span class="comment">// ------------------</span>
            pCredential = (*it).second;
            <span class="keywordflow">if</span>(NULL != pCredential) <span class="keywordflow">break</span>;
        }
        <span class="keywordflow">if</span> (NULL == pCredential) <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>;

        <span class="keywordflow">return</span> pCredential-&gt;<a class="code" href="class_o_t_credential.html#a87cd1e7f63d71ed30567755816dd7fe9">GetPrivateSignKey</a>(&amp;m_listRevokedIDs); <span class="comment">// success</span>
    }
    <span class="keywordflow">else</span>
    {
        <a class="code" href="class_o_t_string.html">OTString</a> strNymID;
        this-&gt;<a class="code" href="class_o_t_pseudonym.html#a1775c7aedd0dd25b2faf3f78dcccabe7">GetIdentifier</a>(strNymID);
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(1, <span class="stringliteral">&quot;%s: This nym (%s) has no credentials from where I can pluck a private SIGNING key, apparently. Instead, using the private key on the Nym&#39;s keypair (a system which is being deprecated in favor of credentials, so it&#39;s not good that I&#39;m having to do this here. Why are there no credentials on this Nym?)\n&quot;</span>, __FUNCTION__, strNymID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
    }

<span class="comment">//  else // Deprecated.</span>
    {
        <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != m_pkeypair);
        <span class="comment">// -------</span>
        <span class="keywordflow">return</span> m_pkeypair-&gt;<a class="code" href="class_o_t_keypair.html#af81de69986e6aa2404fce47311871902">GetPrivateKey</a>();
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="add05942697a8f16ee9259d8cccc271c8"></a><!-- doxytag: member="OTPseudonym::GetPublicAuthKey" ref="add05942697a8f16ee9259d8cccc271c8" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="class_o_t_asymmetric_key.html">OTAsymmetricKey</a> &amp; <a class="el" href="class_o_t_pseudonym.html#add05942697a8f16ee9259d8cccc271c8">OTPseudonym::GetPublicAuthKey</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l05883">5883</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (m_mapCredentials.size() &gt; 0)
    {
        <span class="keyword">const</span> <a class="code" href="class_o_t_credential.html">OTCredential</a> * pCredential = NULL;

        <a class="code" href="_o_t_storage_8hpp.html#a804eb881e96b7e1846d130a55a94f716">FOR_EACH_CONST</a>(<a class="code" href="_o_t_pseudonym_8hpp.html#a0617d6d6c189c161a3fcf3c4710f5dba">mapOfCredentials</a>, m_mapCredentials)
        {
            <span class="comment">// ------------------</span>
            <span class="comment">// Todo: If we have some criteria, such as which master or subcredential</span>
            <span class="comment">// is currently being employed by the user, we&#39;ll use that here to skip</span>
            <span class="comment">// through this loop until we find the right one. Until then, I&#39;m just</span>
            <span class="comment">// going to return the first one that&#39;s valid (not null).</span>
            <span class="comment">// ------------------</span>
            pCredential = (*it).second;
            <span class="keywordflow">if</span>(NULL != pCredential) <span class="keywordflow">break</span>;
        }
        <span class="keywordflow">if</span> (NULL == pCredential) <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>;

        <span class="keywordflow">return</span> pCredential-&gt;<a class="code" href="class_o_t_credential.html#aaf58f8fa8471ec0d45330c7bdd1ee732">GetPublicAuthKey</a>(&amp;m_listRevokedIDs); <span class="comment">// success</span>
    }
    <span class="keywordflow">else</span>
    {
        <a class="code" href="class_o_t_string.html">OTString</a> strNymID;
        this-&gt;<a class="code" href="class_o_t_pseudonym.html#a1775c7aedd0dd25b2faf3f78dcccabe7">GetIdentifier</a>(strNymID);
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(1, <span class="stringliteral">&quot;%s: This nym (%s) has no credentials from which I can pluck a public AUTHENTICATION key, unfortunately. Instead, using the public key on the Nym&#39;s keypair (a system which is being deprecated in favor of credentials, so it&#39;s not good that I&#39;m having to do this here. Why are there no credentials on this Nym?)\n&quot;</span>, __FUNCTION__, strNymID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
    }

<span class="comment">//  else // Deprecated.</span>
    {
        <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != m_pkeypair);
        <span class="comment">// -------</span>
        <span class="keywordflow">return</span> m_pkeypair-&gt;<a class="code" href="class_o_t_keypair.html#a67aebd0a39826bbc429bb2676fde9fcd">GetPublicKey</a>();
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a356d33b203d025ec66a43e23c63c55ed"></a><!-- doxytag: member="OTPseudonym::GetPublicCredentials" ref="a356d33b203d025ec66a43e23c63c55ed" args="(OTString &amp;strCredList, mapOfStrings *pmapCredFiles=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_pseudonym.html#a356d33b203d025ec66a43e23c63c55ed">OTPseudonym::GetPublicCredentials</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strCredList</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="_o_t_string_8hpp.html#a7ec7839682b097a5c5b5c5125046c82b">mapOfStrings</a> *&#160;</td>
          <td class="paramname"><em>pmapCredFiles</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l03737">3737</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_o_t_string.html">OTString</a> strNymID;
    this-&gt;<a class="code" href="class_o_t_pseudonym.html#a1775c7aedd0dd25b2faf3f78dcccabe7">GetIdentifier</a>(strNymID);

    strCredList.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;&lt;?xml version=\&quot;%s\&quot;?&gt;\n&quot;</span>, <span class="stringliteral">&quot;2.0&quot;</span>); <span class="comment">// todo hardcoding.</span>

    strCredList.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;&lt;OTuser version=\&quot;%s\&quot;\n&quot;</span>
                            <span class="stringliteral">&quot; nymID=\&quot;%s\&quot;&quot;</span>
                            <span class="stringliteral">&quot;&gt;\n\n&quot;</span>,
                            m_strVersion.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(),
                            strNymID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>()
                            );
    <span class="comment">// ----------------------------------------------------</span>
    this-&gt;<a class="code" href="class_o_t_pseudonym.html#a9a6189232f8cde0df210920ce3839199">SerializeNymIDSource</a>(strCredList);
    <span class="comment">// ----------------------------------------------------</span>
    <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_pseudonym_8hpp.html#a0617d6d6c189c161a3fcf3c4710f5dba">mapOfCredentials</a>, m_mapCredentials)
    {
        <a class="code" href="class_o_t_credential.html">OTCredential</a> * pCredential = (*it).second;
        <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pCredential);
        <span class="comment">// -----------------------------</span>
        pCredential-&gt;<a class="code" href="class_o_t_credential.html#aee02a93fec9ee67aaef7af32709bbcd0">SerializeIDs</a>(strCredList, m_listRevokedIDs, pmapCredFiles); <span class="comment">// bShowRevoked=false by default, bValid=true by default. (True since we&#39;re looping m_mapCredentials only, and not m_mapRevoked.)</span>
    }
    <span class="comment">// ----------------------------------------------------</span>
    strCredList.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;&lt;/OTuser&gt;\n&quot;</span>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a7a7b836bb9e8e0df7b3601f44e1b7220"></a><!-- doxytag: member="OTPseudonym::GetPublicEncrKey" ref="a7a7b836bb9e8e0df7b3601f44e1b7220" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="class_o_t_asymmetric_key.html">OTAsymmetricKey</a> &amp; <a class="el" href="class_o_t_pseudonym.html#a7a7b836bb9e8e0df7b3601f44e1b7220">OTPseudonym::GetPublicEncrKey</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l05920">5920</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (m_mapCredentials.size() &gt; 0)
    {
        <span class="keyword">const</span> <a class="code" href="class_o_t_credential.html">OTCredential</a> * pCredential = NULL;
        <a class="code" href="_o_t_storage_8hpp.html#a804eb881e96b7e1846d130a55a94f716">FOR_EACH_CONST</a>(<a class="code" href="_o_t_pseudonym_8hpp.html#a0617d6d6c189c161a3fcf3c4710f5dba">mapOfCredentials</a>, m_mapCredentials)
        {
            <span class="comment">// ------------------</span>
            <span class="comment">// Todo: If we have some criteria, such as which master or subcredential</span>
            <span class="comment">// is currently being employed by the user, we&#39;ll use that here to skip</span>
            <span class="comment">// through this loop until we find the right one. Until then, I&#39;m just</span>
            <span class="comment">// going to return the first one that&#39;s valid (not null).</span>
            <span class="comment">// ------------------</span>
            pCredential = (*it).second;
            <span class="keywordflow">if</span>(NULL != pCredential) <span class="keywordflow">break</span>;
        }
        <span class="keywordflow">if</span> (NULL == pCredential) <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>;

        <span class="keywordflow">return</span> pCredential-&gt;<a class="code" href="class_o_t_credential.html#a52ae29ffb6801d439fe0aec5497f7f13">GetPublicEncrKey</a>(&amp;m_listRevokedIDs); <span class="comment">// success</span>
    }
    <span class="keywordflow">else</span>
    {
        <a class="code" href="class_o_t_string.html">OTString</a> strNymID;
        this-&gt;<a class="code" href="class_o_t_pseudonym.html#a1775c7aedd0dd25b2faf3f78dcccabe7">GetIdentifier</a>(strNymID);
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(1, <span class="stringliteral">&quot;%s: This nym (%s) has no credentials from which I can pluck a public ENCRYPTION key, unfortunately. Instead, using the public key on the Nym&#39;s keypair (a system which is being deprecated in favor of credentials, so it&#39;s not good that I&#39;m having to do this here. Why are there no credentials on this Nym?)\n&quot;</span>, __FUNCTION__, strNymID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
    }

<span class="comment">//  else // Deprecated.</span>
    {
        <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != m_pkeypair);
        <span class="comment">// -------</span>
        <span class="keywordflow">return</span> m_pkeypair-&gt;<a class="code" href="class_o_t_keypair.html#a67aebd0a39826bbc429bb2676fde9fcd">GetPublicKey</a>();
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad506d78d8dd7d2a9620485e8c3688a6f"></a><!-- doxytag: member="OTPseudonym::GetPublicKeysBySignature" ref="ad506d78d8dd7d2a9620485e8c3688a6f" args="(listOfAsymmetricKeys &amp;listOutput, const OTSignature &amp;theSignature, char cKeyType='0') const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_pseudonym.html#ad506d78d8dd7d2a9620485e8c3688a6f">OTPseudonym::GetPublicKeysBySignature</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_o_t_asymmetric_key_8hpp.html#ada6127549a4970b60a8939215dd89ddb">listOfAsymmetricKeys</a> &amp;&#160;</td>
          <td class="paramname"><em>listOutput</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_signature.html">OTSignature</a> &amp;&#160;</td>
          <td class="paramname"><em>theSignature</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>cKeyType</em> = <code>'0'</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l06001">6001</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != m_pkeypair);
    <span class="comment">// -----------------------------------------------</span>
    <span class="comment">// Unfortunately, theSignature can only narrow the search down (there may be multiple results.)</span>
    int32_t nCount = 0;
    <span class="comment">// -----------------------------------------------</span>
    <a class="code" href="_o_t_storage_8hpp.html#a804eb881e96b7e1846d130a55a94f716">FOR_EACH_CONST</a>(<a class="code" href="_o_t_pseudonym_8hpp.html#a0617d6d6c189c161a3fcf3c4710f5dba">mapOfCredentials</a>, m_mapCredentials)
    {
        <span class="keyword">const</span> <a class="code" href="class_o_t_credential.html">OTCredential</a> * pCredential = (*it).second;
        <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pCredential);
        <span class="comment">// -----------------------------</span>
        <span class="keyword">const</span> int32_t nTempCount = pCredential-&gt;<a class="code" href="class_o_t_credential.html#ade34be3c485c120489e923d31af8bc63">GetPublicKeysBySignature</a>(listOutput, theSignature, cKeyType);
        nCount += nTempCount;
    }
    <span class="comment">// -----------------------------------------------</span>
    <span class="keywordflow">return</span> nCount;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa60e86ffafcfba7c68801530c12c9927"></a><!-- doxytag: member="OTPseudonym::GetPublicSignKey" ref="aa60e86ffafcfba7c68801530c12c9927" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="class_o_t_asymmetric_key.html">OTAsymmetricKey</a> &amp; <a class="el" href="class_o_t_pseudonym.html#aa60e86ffafcfba7c68801530c12c9927">OTPseudonym::GetPublicSignKey</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l05956">5956</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (m_mapCredentials.size() &gt; 0)
    {
        <span class="keyword">const</span> <a class="code" href="class_o_t_credential.html">OTCredential</a> * pCredential = NULL;

        <a class="code" href="_o_t_storage_8hpp.html#a804eb881e96b7e1846d130a55a94f716">FOR_EACH_CONST</a>(<a class="code" href="_o_t_pseudonym_8hpp.html#a0617d6d6c189c161a3fcf3c4710f5dba">mapOfCredentials</a>, m_mapCredentials)
        {
            <span class="comment">// ------------------</span>
            <span class="comment">// Todo: If we have some criteria, such as which master or subcredential</span>
            <span class="comment">// is currently being employed by the user, we&#39;ll use that here to skip</span>
            <span class="comment">// through this loop until we find the right one. Until then, I&#39;m just</span>
            <span class="comment">// going to return the first one that&#39;s valid (not null).</span>
            <span class="comment">// ------------------</span>
            pCredential = (*it).second;
            <span class="keywordflow">if</span>(NULL != pCredential) <span class="keywordflow">break</span>;
        }
        <span class="keywordflow">if</span> (NULL == pCredential) <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>;

        <span class="keywordflow">return</span> pCredential-&gt;<a class="code" href="class_o_t_credential.html#ab48f10080c9aebc115d545692b97e6ae">GetPublicSignKey</a>(&amp;m_listRevokedIDs); <span class="comment">// success</span>
    }
    <span class="keywordflow">else</span>
    {
        <a class="code" href="class_o_t_string.html">OTString</a> strNymID;
        this-&gt;<a class="code" href="class_o_t_pseudonym.html#a1775c7aedd0dd25b2faf3f78dcccabe7">GetIdentifier</a>(strNymID);
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(1, <span class="stringliteral">&quot;%s: This nym (%s) has no credentials from which I can pluck a public SIGNING key, unfortunately. Instead, using the public key on the Nym&#39;s keypair (a system which is being deprecated in favor of credentials, so it&#39;s not good that I&#39;m having to do this here. Why are there no credentials on this Nym?)\n&quot;</span>, __FUNCTION__, strNymID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
    }

<span class="comment">//  else // Deprecated.</span>
    {
        <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != m_pkeypair);
        <span class="comment">// -------</span>
        <span class="keywordflow">return</span> m_pkeypair-&gt;<a class="code" href="class_o_t_keypair.html#a67aebd0a39826bbc429bb2676fde9fcd">GetPublicKey</a>();
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a9222447403d249269bcbc3a4cab5de02"></a><!-- doxytag: member="OTPseudonym::GetRecentHash" ref="a9222447403d249269bcbc3a4cab5de02" args="(const std::string &amp;server_id, OTIdentifier &amp;theOutput) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_pseudonym.html#a9222447403d249269bcbc3a4cab5de02">OTPseudonym::GetRecentHash</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>server_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;&#160;</td>
          <td class="paramname"><em>theOutput</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l01493">1493</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> this-&gt;GetHash(m_mapRecentHash, server_id, theOutput);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a34722ae73d2b67e12c92ac770f7dd6f1"></a><!-- doxytag: member="OTPseudonym::GetRevokedCredential" ref="a34722ae73d2b67e12c92ac770f7dd6f1" args="(const OTString &amp;strID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_credential.html">OTCredential</a> * <a class="el" href="class_o_t_pseudonym.html#a34722ae73d2b67e12c92ac770f7dd6f1">OTPseudonym::GetRevokedCredential</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strID</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l04450">4450</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    mapOfCredentials::iterator iter = m_mapRevoked.find(strID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
    <a class="code" href="class_o_t_credential.html">OTCredential</a> * pCredential = NULL;

    <span class="keywordflow">if</span> (iter != m_mapRevoked.end()) <span class="comment">// found it</span>
        pCredential = (*iter).second;

    <span class="keywordflow">return</span> pCredential;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a8b367e9ec526a0621be52bd5569f3b13"></a><!-- doxytag: member="OTPseudonym::GetRevokedCredentialByIndex" ref="a8b367e9ec526a0621be52bd5569f3b13" args="(int32_t nIndex) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="class_o_t_credential.html">OTCredential</a> * <a class="el" href="class_o_t_pseudonym.html#a8b367e9ec526a0621be52bd5569f3b13">OTPseudonym::GetRevokedCredentialByIndex</a> </td>
          <td>(</td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>nIndex</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l04489">4489</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> ((nIndex &lt; 0) || (nIndex &gt;= static_cast&lt;int64_t&gt;(m_mapRevoked.size())))
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Index out of bounds: %d\n&quot;</span>, __FUNCTION__, nIndex);
    }
    <span class="comment">// --------------------</span>
    <span class="keywordflow">else</span>
    {
        int32_t nLoopIndex = -1;

        <a class="code" href="_o_t_storage_8hpp.html#a804eb881e96b7e1846d130a55a94f716">FOR_EACH_CONST</a>(<a class="code" href="_o_t_pseudonym_8hpp.html#a0617d6d6c189c161a3fcf3c4710f5dba">mapOfCredentials</a>, m_mapRevoked)
        {
            <span class="keyword">const</span> <a class="code" href="class_o_t_credential.html">OTCredential</a> * pCredential = (*it).second;
            <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pCredential);
            <span class="comment">// ---------------------------------</span>
            ++nLoopIndex; <span class="comment">// 0 on first iteration.</span>
            <span class="comment">// ---------------------------------</span>
            <span class="keywordflow">if</span> (nLoopIndex == nIndex)
                <span class="keywordflow">return</span> pCredential;
            <span class="comment">// ---------------------------------</span>
        }
    }
    <span class="keywordflow">return</span> NULL;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a66d28c9b0919dac455167326af405371"></a><!-- doxytag: member="OTPseudonym::GetRevokedCredentialCount" ref="a66d28c9b0919dac455167326af405371" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t <a class="el" href="class_o_t_pseudonym.html#a66d28c9b0919dac455167326af405371">OTPseudonym::GetRevokedCredentialCount</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l03107">3107</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> m_mapRevoked.size();
}
</pre></div>
</div>
</div>
<a class="anchor" id="a05038a67c0376fc45d78438eb9e2a276"></a><!-- doxytag: member="OTPseudonym::GetRevokedSubcred" ref="a05038a67c0376fc45d78438eb9e2a276" args="(const OTString &amp;strRevokedID, const OTString &amp;strSubCredID) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="class_o_t_subcredential.html">OTSubcredential</a> * <a class="el" href="class_o_t_pseudonym.html#a05038a67c0376fc45d78438eb9e2a276">OTPseudonym::GetRevokedSubcred</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strRevokedID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strSubCredID</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l04539">4539</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    mapOfCredentials::const_iterator iter = m_mapRevoked.find(strRevokedID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
    <span class="keyword">const</span> <a class="code" href="class_o_t_credential.html">OTCredential</a> * pMaster = NULL;

    <span class="keywordflow">if</span> (iter != m_mapRevoked.end()) <span class="comment">// found it</span>
        pMaster = (*iter).second;

    if (NULL != pMaster)
    {
        <span class="keyword">const</span> <a class="code" href="class_o_t_subcredential.html">OTSubcredential</a> * pSub = pMaster-&gt;<a class="code" href="class_o_t_credential.html#a194a0401b7e78a94f298897138004e3e">GetSubcredential</a>(strSubCredID);

        <span class="keywordflow">if</span> (NULL != pSub)
            <span class="keywordflow">return</span> pSub;
    }

    <span class="keywordflow">return</span> NULL;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad3dbc1ca45e891918fb363bdf24a57e3"></a><!-- doxytag: member="OTPseudonym::GetSetAssetAccounts" ref="ad3dbc1ca45e891918fb363bdf24a57e3" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::set&lt;std::string&gt;&amp; <a class="el" href="class_o_t_pseudonym.html#ad3dbc1ca45e891918fb363bdf24a57e3">OTPseudonym::GetSetAssetAccounts</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8hpp_source.html#l00337">337</a> of file <a class="el" href="_o_t_pseudonym_8hpp_source.html">OTPseudonym.hpp</a>.</p>
<div class="fragment"><pre class="fragment">{ <span class="keywordflow">return</span> m_setAccounts; } <span class="comment">// stores acct IDs as std::string</span>
</pre></div>
</div>
</div>
<a class="anchor" id="a92abc7a6b6253681f3379f135597f5a9"></a><!-- doxytag: member="OTPseudonym::GetSetOpenCronItems" ref="a92abc7a6b6253681f3379f135597f5a9" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::set&lt;int64_t&gt;&amp; <a class="el" href="class_o_t_pseudonym.html#a92abc7a6b6253681f3379f135597f5a9">OTPseudonym::GetSetOpenCronItems</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8hpp_source.html#l00336">336</a> of file <a class="el" href="_o_t_pseudonym_8hpp_source.html">OTPseudonym.hpp</a>.</p>
<div class="fragment"><pre class="fragment">{ <span class="keywordflow">return</span> m_setOpenCronItems; }
</pre></div>
</div>
</div>
<a class="anchor" id="aca22e54cef6a6e908cfff4c8394ef533"></a><!-- doxytag: member="OTPseudonym::GetSubcredential" ref="aca22e54cef6a6e908cfff4c8394ef533" args="(const OTString &amp;strMasterID, const OTString &amp;strSubCredID) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="class_o_t_subcredential.html">OTSubcredential</a> * <a class="el" href="class_o_t_pseudonym.html#aca22e54cef6a6e908cfff4c8394ef533">OTPseudonym::GetSubcredential</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strMasterID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strSubCredID</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l04516">4516</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    mapOfCredentials::const_iterator iter = m_mapCredentials.find(strMasterID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
    <span class="keyword">const</span> <a class="code" href="class_o_t_credential.html">OTCredential</a> * pMaster = NULL;

    <span class="keywordflow">if</span> (iter != m_mapCredentials.end()) <span class="comment">// found it</span>
        pMaster = (*iter).second;

    if (NULL != pMaster)
    {
        <span class="keyword">const</span> <a class="code" href="class_o_t_subcredential.html">OTSubcredential</a> * pSub = pMaster-&gt;<a class="code" href="class_o_t_credential.html#a194a0401b7e78a94f298897138004e3e">GetSubcredential</a>(strSubCredID, &amp;m_listRevokedIDs);

        <span class="keywordflow">if</span> (NULL != pSub)
            <span class="keywordflow">return</span> pSub;
    }

    <span class="keywordflow">return</span> NULL;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a20a2ad12d8f802282ba15c2980d08a0c"></a><!-- doxytag: member="OTPseudonym::GetTentativeNum" ref="a20a2ad12d8f802282ba15c2980d08a0c" args="(const OTIdentifier &amp;theServerID, int32_t nIndex)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64_t <a class="el" href="class_o_t_pseudonym.html#a20a2ad12d8f802282ba15c2980d08a0c">OTPseudonym::GetTentativeNum</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;&#160;</td>
          <td class="paramname"><em>theServerID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>nIndex</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l02164">2164</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> <a class="code" href="class_o_t_pseudonym.html#a811557a9ca1e0b98665d0530df901950">GetGenericNum</a>(m_mapTentativeNum, theServerID, nIndex);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a1ed6d82fc103f5481730e90c17968c2d"></a><!-- doxytag: member="OTPseudonym::GetTentativeNumCount" ref="a1ed6d82fc103f5481730e90c17968c2d" args="(const OTIdentifier &amp;theServerID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_pseudonym.html#a1ed6d82fc103f5481730e90c17968c2d">OTPseudonym::GetTentativeNumCount</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;&#160;</td>
          <td class="paramname"><em>theServerID</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l02297">2297</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> <a class="code" href="class_o_t_pseudonym.html#a9fa197753dda1dfb88b286bdeb615c83">GetGenericNumCount</a>(m_mapTentativeNum, theServerID);
}
</pre></div>
</div>
</div>
<a class="anchor" id="aaeccb4cd9e65abe19f382faee5ad8fd1"></a><!-- doxytag: member="OTPseudonym::GetTransactionNum" ref="aaeccb4cd9e65abe19f382faee5ad8fd1" args="(const OTIdentifier &amp;theServerID, int32_t nIndex)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64_t <a class="el" href="class_o_t_pseudonym.html#aaeccb4cd9e65abe19f382faee5ad8fd1">OTPseudonym::GetTransactionNum</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;&#160;</td>
          <td class="paramname"><em>theServerID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>nIndex</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l02178">2178</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> <a class="code" href="class_o_t_pseudonym.html#a811557a9ca1e0b98665d0530df901950">GetGenericNum</a>(m_mapTransNum, theServerID, nIndex);
}
</pre></div>
</div>
</div>
<a class="anchor" id="adee7eef0a51e8e94522c43ac898c2308"></a><!-- doxytag: member="OTPseudonym::GetTransactionNumCount" ref="adee7eef0a51e8e94522c43ac898c2308" args="(const OTIdentifier &amp;theServerID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_pseudonym.html#adee7eef0a51e8e94522c43ac898c2308">OTPseudonym::GetTransactionNumCount</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;&#160;</td>
          <td class="paramname"><em>theServerID</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l02217">2217</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> <a class="code" href="class_o_t_pseudonym.html#a9fa197753dda1dfb88b286bdeb615c83">GetGenericNumCount</a>(m_mapTransNum, theServerID);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a4469f9108d8239b72e6ebc6bc5b2b4a9"></a><!-- doxytag: member="OTPseudonym::GetUsageCredits" ref="a4469f9108d8239b72e6ebc6bc5b2b4a9" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EXPORT const int64_t&amp; <a class="el" href="class_o_t_pseudonym.html#a4469f9108d8239b72e6ebc6bc5b2b4a9">OTPseudonym::GetUsageCredits</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8hpp_source.html#l00328">328</a> of file <a class="el" href="_o_t_pseudonym_8hpp_source.html">OTPseudonym.hpp</a>.</p>
<div class="fragment"><pre class="fragment">{ <span class="keywordflow">return</span> m_lUsageCredits; }
</pre></div>
</div>
</div>
<a class="anchor" id="aa120e0e319f6c4f26fe68628701008fc"></a><!-- doxytag: member="OTPseudonym::HarvestIssuedNumbers" ref="aa120e0e319f6c4f26fe68628701008fc" args="(const OTIdentifier &amp;theServerID, OTPseudonym &amp;SIGNER_NYM, OTPseudonym &amp;theOtherNym, bool bSave=false)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_pseudonym.html#aa120e0e319f6c4f26fe68628701008fc">OTPseudonym::HarvestIssuedNumbers</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;&#160;</td>
          <td class="paramname"><em>theServerID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;&#160;</td>
          <td class="paramname"><em>SIGNER_NYM</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;&#160;</td>
          <td class="paramname"><em>theOtherNym</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>bSave</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l02585">2585</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">bool</span> bChangedTheNym = <span class="keyword">false</span>;
    int64_t lTransactionNumber = 0;

    <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_pseudonym_8hpp.html#ac99ad82dc6c392a0a8c851c6041b62f1">mapOfTransNums</a>, theOtherNym.<a class="code" href="class_o_t_pseudonym.html#a74e834007bee7a45651a98257152da72">GetMapIssuedNum</a>())
    {
        std::string strServerID     = (*it).first;
        <a class="code" href="_o_t_pseudonym_8hpp.html#a94632bfde6cf91c8294122f77527bcf1">dequeOfTransNums</a> * pDeque   = (it-&gt;second);

        <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pDeque);

        <a class="code" href="class_o_t_string.html">OTString</a> OTstrServerID = ((strServerID.size()) &gt; 0 ? strServerID.c_str() : <span class="stringliteral">&quot;&quot;</span>);
        <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theTempID(OTstrServerID);

        <span class="keywordflow">if</span> (!(pDeque-&gt;empty()) &amp;&amp; (theServerID == theTempID) )
        {
            <span class="keywordflow">for</span> (uint32_t i = 0; i &lt; pDeque-&gt;size(); i++)
            {
                lTransactionNumber = pDeque-&gt;at(i);

                <span class="comment">// If number wasn&#39;t already on issued list, then add to BOTH lists.</span>
                <span class="comment">// Otherwise do nothing (it&#39;s already on the issued list, and no longer</span>
                <span class="comment">// valid on the available list--thus shouldn&#39;t be re-added there anyway.)</span>
                <span class="comment">//</span>
                <span class="keywordflow">if</span> (<span class="keyword">false</span> == <a class="code" href="class_o_t_pseudonym.html#a66cf3b97f1769f9d422bad8787a6c1a0">VerifyIssuedNum</a>(OTstrServerID, lTransactionNumber))
                {
                    <a class="code" href="class_o_t_pseudonym.html#a2771ea8cf77d2ac05d942e149c2bc3e6">AddTransactionNum</a>(SIGNER_NYM, OTstrServerID, lTransactionNumber, <span class="keyword">false</span>); <span class="comment">// bSave = false (but saved below...)</span>
                    bChangedTheNym = <span class="keyword">true</span>;
                }
            }
            <span class="keywordflow">break</span>;  <span class="comment">// We found it! Might as well break out.</span>
        }
    } <span class="comment">// for</span>

    <span class="keywordflow">if</span> (bChangedTheNym &amp;&amp; bSave)
    {
        <a class="code" href="class_o_t_pseudonym.html#a5d08ef86097db038c2c4fd30034f5dc8">SaveSignedNymfile</a>(SIGNER_NYM);
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac140c0c6ab67bb633b0826ad7914761f"></a><!-- doxytag: member="OTPseudonym::HarvestTransactionNumbers" ref="ac140c0c6ab67bb633b0826ad7914761f" args="(const OTIdentifier &amp;theServerID, OTPseudonym &amp;SIGNER_NYM, OTPseudonym &amp;theOtherNym, bool bSave=true)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_pseudonym.html#ac140c0c6ab67bb633b0826ad7914761f">OTPseudonym::HarvestTransactionNumbers</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;&#160;</td>
          <td class="paramname"><em>theServerID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;&#160;</td>
          <td class="paramname"><em>SIGNER_NYM</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;&#160;</td>
          <td class="paramname"><em>theOtherNym</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>bSave</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>OtherNym is used as container for server to send us new transaction numbers Currently unused. (old) NEW USE: Okay then, new use: This will be the function that does what the below function does (<a class="el" href="class_o_t_pseudonym.html#aa120e0e319f6c4f26fe68628701008fc">OTPseudonym::HarvestIssuedNumbers</a>), EXCEPT it only adds numbers that aren't on the TENTATIVE list. Also, it will set the new "highest" trans num for the appropriate server, based on the new numbers being harvested. </p>

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l02480">2480</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keyword">const</span> <span class="keywordtype">char</span> * szFunc = <span class="stringliteral">&quot;OTPseudonym::HarvestTransactionNumbers&quot;</span>;
    <span class="comment">// --------------------</span>
    int64_t lTransactionNumber = 0;

    std::set&lt;int64_t&gt; setInput, setOutputGood, setOutputBad;

    <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_pseudonym_8hpp.html#ac99ad82dc6c392a0a8c851c6041b62f1">mapOfTransNums</a>, theOtherNym.<a class="code" href="class_o_t_pseudonym.html#a74e834007bee7a45651a98257152da72">GetMapIssuedNum</a>())
    {
        std::string strServerID     = (*it).first;
        <a class="code" href="_o_t_pseudonym_8hpp.html#a94632bfde6cf91c8294122f77527bcf1">dequeOfTransNums</a> * pDeque   = (it-&gt;second);

        <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pDeque);

        <a class="code" href="class_o_t_string.html">OTString</a> OTstrServerID = strServerID.c_str();
        <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theTempID(OTstrServerID);

        <span class="keywordflow">if</span> (!(pDeque-&gt;empty()) &amp;&amp; (theServerID == theTempID) ) <span class="comment">// only for the matching serverID.</span>
        {
            <span class="keywordflow">for</span> (uint32_t i = 0; i &lt; pDeque-&gt;size(); i++)
            {
                lTransactionNumber = pDeque-&gt;at(i);

                <span class="comment">// If number wasn&#39;t already on issued list, then add to BOTH lists.</span>
                <span class="comment">// Otherwise do nothing (it&#39;s already on the issued list, and no longer</span>
                <span class="comment">// valid on the available list--thus shouldn&#39;t be re-added there anyway.)</span>
                <span class="comment">//</span>
                <span class="keywordflow">if</span> ((<span class="keyword">true</span>   == <a class="code" href="class_o_t_pseudonym.html#ac05ddbd6036b5304b7215251d1b7c9b0">VerifyTentativeNum</a>(OTstrServerID, lTransactionNumber)) &amp;&amp;    <span class="comment">// If I&#39;ve actually requested this number and waiting on it...</span>
                    (<span class="keyword">false</span>  == <a class="code" href="class_o_t_pseudonym.html#a66cf3b97f1769f9d422bad8787a6c1a0">VerifyIssuedNum</a>(OTstrServerID, lTransactionNumber))          <span class="comment">// and if it&#39;s not already on my issued list...</span>
                    )
                    setInput.insert(lTransactionNumber);
            }
            <span class="keywordflow">break</span>;  <span class="comment">// We found it! Might as well break out.</span>
        }
    } <span class="comment">// for</span>

    <span class="comment">// ----------------------------------</span>
    <span class="comment">// Looks like we found some numbers to harvest</span>
    <span class="comment">// (tentative numbers we had already been waiting for,</span>
    <span class="comment">// yet hadn&#39;t processed onto our issued list yet...)</span>
    <span class="comment">//</span>
    <span class="keywordflow">if</span> (setInput.size() &gt; 0)
    {
        <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strServerID(theServerID), strNymID(m_nymID);

        int64_t lViolator = this-&gt;<a class="code" href="class_o_t_pseudonym.html#a3601074fdaebd0cbb752a5584781511d">UpdateHighestNum</a>(SIGNER_NYM, strServerID, setInput,
                                                setOutputGood, setOutputBad); <span class="comment">// bSave=false (saved below already, if necessary)</span>

        <span class="comment">// NOTE: Due to the possibility that a server reply could be processed twice (due to redundancy</span>
        <span class="comment">// for the purposes of preventing syncing issues) then we expect we might get numbers in here</span>
        <span class="comment">// that are below our &quot;last highest num&quot; (due to processing the same numbers twice.) Therefore</span>
        <span class="comment">// we don&#39;t need to assume an error in this case. UpdateHighestNum() is already smart enough to</span>
        <span class="comment">// only update based on the good numbers, while ignoring the bad (i.e. already-processed) ones.</span>
        <span class="comment">// Thus we really only have a problem if we receive a (-1), which would mean an error occurred.</span>
        <span class="comment">// Also, the above call will log an FYI that it is skipping any numbers below the line, so no need</span>
        <span class="comment">// to log more in the case of lViolater being &gt;0 but less than the &#39;last highest number.&#39;</span>
        <span class="comment">//</span>
        <span class="keywordflow">if</span> ((-1) == lViolator)
            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: ERROR: UpdateHighestNum() returned (-1), which is an error condition. &quot;</span>
                          <span class="stringliteral">&quot;(Should never happen.)\nNym ID: %s \n&quot;</span>, szFunc, strNymID.Get());
        <span class="keywordflow">else</span>
        {
            <span class="comment">// We only remove-tentative-num/add-transaction-num for the numbers that were above our &#39;last highest number&#39;.</span>
            <span class="comment">// The contents of setOutputBad are thus ignored for these purposes.</span>
            <span class="comment">//</span>
            <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(std::set&lt;int64_t&gt;, setOutputGood)
            {
                <span class="keyword">const</span> int64_t lNoticeNum = (*it);
                <span class="comment">// --------------------------------------</span>
                <span class="comment">// We already know it&#39;s on the TentativeNum list, since we checked that in the above for loop.</span>
                <span class="comment">// We also already know that it&#39;s not on the issued list, since we checked that as well.</span>
                <span class="comment">// That&#39;s why the below calls just ASSUME those things already.</span>
                <span class="comment">//</span>
                <a class="code" href="class_o_t_pseudonym.html#af39adadda751a07bcd5388cd3528674f">RemoveTentativeNum</a>(strServerID, lNoticeNum); <span class="comment">// doesn&#39;t save (but saved below)</span>
                <a class="code" href="class_o_t_pseudonym.html#a2771ea8cf77d2ac05d942e149c2bc3e6">AddTransactionNum</a>(SIGNER_NYM, strServerID, lNoticeNum, <span class="keyword">false</span>); <span class="comment">// bSave = false (but saved below...)</span>
            }

            <span class="comment">// We save regardless of whether any removals or additions are made, because data was</span>
            <span class="comment">// updated in UpdateHighestNum regardless.</span>
            <span class="comment">//</span>
            <span class="keywordflow">if</span> (bSave)
                <a class="code" href="class_o_t_pseudonym.html#a5d08ef86097db038c2c4fd30034f5dc8">SaveSignedNymfile</a>(SIGNER_NYM);
        }
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a27b67139a33989a0db8ca027f03b3257"></a><!-- doxytag: member="OTPseudonym::HasPrivateKey" ref="a27b67139a33989a0db8ca027f03b3257" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_pseudonym.html#a27b67139a33989a0db8ca027f03b3257">OTPseudonym::HasPrivateKey</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l05714">5714</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != m_pkeypair);
    <span class="comment">// --------------------</span>
    <span class="keywordflow">return</span> m_pkeypair-&gt;<a class="code" href="class_o_t_keypair.html#a47869a3947c52895cd1a60d528e34440">HasPrivateKey</a>();
}
</pre></div>
</div>
</div>
<a class="anchor" id="a5d685c100f1947ed7aa467434298b40d"></a><!-- doxytag: member="OTPseudonym::HasPublicKey" ref="a5d685c100f1947ed7aa467434298b40d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_pseudonym.html#a5d685c100f1947ed7aa467434298b40d">OTPseudonym::HasPublicKey</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l05706">5706</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != m_pkeypair);
    <span class="comment">// --------------------</span>
    <span class="keywordflow">return</span> m_pkeypair-&gt;<a class="code" href="class_o_t_keypair.html#a9dbda6c4a4863b5768f8167bf41749f9">HasPublicKey</a>();
}
</pre></div>
</div>
</div>
<a class="anchor" id="a0e2031a4404c589c3a492bd48eb63932"></a><!-- doxytag: member="OTPseudonym::IncrementRequestNum" ref="a0e2031a4404c589c3a492bd48eb63932" args="(OTPseudonym &amp;SIGNER_NYM, const OTString &amp;strServerID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_pseudonym.html#a0e2031a4404c589c3a492bd48eb63932">OTPseudonym::IncrementRequestNum</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;&#160;</td>
          <td class="paramname"><em>SIGNER_NYM</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strServerID</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l02983">2983</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">bool</span> bSuccess = <span class="keyword">false</span>;

    <span class="comment">// The Pseudonym has a map of the request numbers for different servers.</span>
    <span class="comment">// For Server Bob, with this Pseudonym, I might be on number 34.</span>
    <span class="comment">// For but Server Alice, I might be on number 59.</span>
    <span class="comment">//</span>
    <span class="comment">// So let&#39;s loop through all the numbers I have, and if the server ID on the map</span>
    <span class="comment">// matches the Server ID that was passed in, then send out the request number and</span>
    <span class="comment">// increment it so it will be ready for the next request.</span>
    <span class="comment">//</span>
    <span class="comment">// Make sure to save the Pseudonym so the new request number is saved.</span>
    std::string strID   = strServerID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();

    <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_pseudonym_8hpp.html#a973d5530da5375de1f5e0f75c7780869">mapOfRequestNums</a>, m_mapRequestNum)
    {
        <span class="keywordflow">if</span> ( strID == it-&gt;first )
        {
            <span class="comment">// We found it!</span>
            <span class="comment">// Presumably we ONLY found it because this Nym has been properly loaded first.</span>
            <span class="comment">// Good job! Otherwise, the list would have been empty even though the request number</span>
            <span class="comment">// was sitting in the file.</span>


            <span class="comment">// Grab a copy of the old request number</span>
            int64_t lOldRequestNumber = m_mapRequestNum[it-&gt;first];

            <span class="comment">// Set the new request number to the old one plus one.</span>
            m_mapRequestNum[it-&gt;first] = lOldRequestNumber + 1;

            <span class="comment">// Now we can log BOTH, before and after... // debug here</span>
            <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(4, <span class="stringliteral">&quot;Incremented Request Number from %lld to %lld. Saving...\n&quot;</span>,
                    lOldRequestNumber, m_mapRequestNum[it-&gt;first]);

            <span class="comment">// The call has succeeded</span>
            bSuccess = <span class="keyword">true</span>;
            <span class="keywordflow">break</span>;
        }
    }

    <span class="comment">// If I didn&#39;t find it in the list above (whether the list is empty or not....)</span>
    <span class="comment">// that means it does not exist. So create it.</span>

    <span class="keywordflow">if</span> (!bSuccess)
    {
        <a class="code" href="class_o_t_log.html#a1f7549d776ee919dcb6517f611ded015">OTLog::Output</a>(0, <span class="stringliteral">&quot;Creating Request Number entry as &#39;100&#39;. Saving...\n&quot;</span>);
        m_mapRequestNum[strServerID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>()] = 100;
        bSuccess = <span class="keyword">true</span>;
    }


    <span class="keywordflow">if</span> (bSuccess)
    {
        <a class="code" href="class_o_t_pseudonym.html#a5d08ef86097db038c2c4fd30034f5dc8">SaveSignedNymfile</a>(SIGNER_NYM);
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a26af2636e74e0be1430b7934962f2932"></a><!-- doxytag: member="OTPseudonym::Initialize" ref="a26af2636e74e0be1430b7934962f2932" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_pseudonym.html#a26af2636e74e0be1430b7934962f2932">OTPseudonym::Initialize</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l06057">6057</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    m_strVersion = <span class="stringliteral">&quot;1.0&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="acae3c2ac801dbb0e33be9b3d493bbf4f"></a><!-- doxytag: member="OTPseudonym::IsMarkedForDeletion" ref="acae3c2ac801dbb0e33be9b3d493bbf4f" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_pseudonym.html#acae3c2ac801dbb0e33be9b3d493bbf4f">OTPseudonym::IsMarkedForDeletion</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8hpp_source.html#l00332">332</a> of file <a class="el" href="_o_t_pseudonym_8hpp_source.html">OTPseudonym.hpp</a>.</p>
<div class="fragment"><pre class="fragment">{ <span class="keywordflow">return</span> m_bMarkForDeletion; }
</pre></div>
</div>
</div>
<a class="anchor" id="af5e9078ab475e6cd9c53e4ad2fae0417"></a><!-- doxytag: member="OTPseudonym::IsRegisteredAtServer" ref="af5e9078ab475e6cd9c53e4ad2fae0417" args="(const OTString &amp;strServerID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_pseudonym.html#af5e9078ab475e6cd9c53e4ad2fae0417">OTPseudonym::IsRegisteredAtServer</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strServerID</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l01607">1607</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">bool</span> bRetVal        = <span class="keyword">false</span>; <span class="comment">// default is return false: &quot;No, I&#39;m NOT registered at that Server.&quot;</span>
    std::string strID   = strServerID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();

    <span class="comment">// The Pseudonym has a map of the request numbers for different servers.</span>
    <span class="comment">// For Server Bob, with this Pseudonym, I might be on number 34.</span>
    <span class="comment">// For but Server Alice, I might be on number 59.</span>
    <span class="comment">//</span>
    <span class="comment">// So let&#39;s loop through all the numbers I have, and if the server ID on the map</span>
    <span class="comment">// matches the Server ID that was passed in, then return TRUE.</span>
    <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_pseudonym_8hpp.html#a973d5530da5375de1f5e0f75c7780869">mapOfRequestNums</a>, m_mapRequestNum)
    {
        <span class="keywordflow">if</span> ( strID == it-&gt;first )
        {
            <span class="comment">// The call has succeeded</span>
            bRetVal = <span class="keyword">true</span>;

            <span class="keywordflow">break</span>;
        }
    }

    <span class="keywordflow">return</span> bRetVal;
}
</pre></div>
</div>
</div>
<a class="anchor" id="af864daa3291f61d81c1b61ad90efe52d"></a><!-- doxytag: member="OTPseudonym::LoadCredentials" ref="af864daa3291f61d81c1b61ad90efe52d" args="(bool bLoadPrivate=false, OTPasswordData *pPWData=NULL, OTPassword *pImportPassword=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_pseudonym.html#af864daa3291f61d81c1b61ad90efe52d">OTPseudonym::LoadCredentials</a> </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>bLoadPrivate</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_password_data.html">OTPasswordData</a> *&#160;</td>
          <td class="paramname"><em>pPWData</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_password.html">OTPassword</a> *&#160;</td>
          <td class="paramname"><em>pImportPassword</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l03870">3870</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_o_t_string.html">OTString</a> strReason(NULL == pPWData ? <a class="code" href="_o_t_callback_8hpp.html#aec99f1909896090ab9b64ce848f50c6a">OT_PW_DISPLAY</a> : pPWData-&gt;<a class="code" href="class_o_t_password_data.html#afe04404b46712a5918790c3b4af7dda2">GetDisplayString</a>());
    <span class="comment">// --------------------------------------------------------------------</span>
    this-&gt;<a class="code" href="class_o_t_pseudonym.html#a66fe7d0cf3d0e190f7c103fb2dc16d57">ClearCredentials</a>();
    <span class="comment">// --------------------------------------------------------------------</span>
    <a class="code" href="class_o_t_string.html">OTString</a> strNymID;
    this-&gt;<a class="code" href="class_o_t_pseudonym.html#a1775c7aedd0dd25b2faf3f78dcccabe7">GetIdentifier</a>(strNymID);
    <span class="comment">// --------------------------------------------------------------------</span>
    <a class="code" href="class_o_t_string.html">OTString</a> strFilename;
    strFilename.<a class="code" href="class_o_t_string.html#af1c861f21033a1d583b3cb12f952422e">Format</a>(<span class="stringliteral">&quot;%s.cred&quot;</span>, strNymID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
    <span class="comment">// --------------------------------------------------------------------</span>
    <span class="keyword">const</span> <span class="keywordtype">char</span> * szFoldername = bLoadPrivate ? <a class="code" href="class_o_t_folders.html#a4e94eac1e796da34baf00556042202f0">OTFolders::Credential</a>().<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>() : <a class="code" href="class_o_t_folders.html#a00c7ea89471a90172d166a8c0eb321a6">OTFolders::Pubcred</a>().<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();
    <span class="keyword">const</span> <span class="keywordtype">char</span> * szFilename   = strFilename.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();
    <span class="comment">// --------------------------------------------------------------------</span>
    <span class="keywordflow">if</span> (<a class="code" href="namespace_o_t_d_b.html#a73e39a590dfb64f63065821c6bbcd4c6">OTDB::Exists</a>(szFoldername, szFilename))
    {
        <a class="code" href="class_o_t_string.html">OTString</a> strFileContents(<a class="code" href="namespace_o_t_d_b.html#a921d6f538de00f4e4297c25cf679f00a">OTDB::QueryPlainString</a>(szFoldername, szFilename));

        <span class="comment">// The credential list file is like the nymfile except with ONLY credential IDs inside.</span>
        <span class="comment">// Therefore, we LOAD it like we&#39;re loading a Nymfile from string. There&#39;s no need for</span>
        <span class="comment">// the list itself to be signed, since we verify it fully before using it to verify the</span>
        <span class="comment">// signature on the actual nymfile.</span>
        <span class="comment">// How is the list safe not to be signed? Because the Nym ID&#39;s source string must hash</span>
        <span class="comment">// to form the NymID, and any credential IDs on the list must be found on a lookup to</span>
        <span class="comment">// that source. An attacker cannot add a credential without putting it inside the source,</span>
        <span class="comment">// which the user controls, and the attacker cannot change the source without changing</span>
        <span class="comment">// the NymID. Therefore the credential list file itself doesn&#39;t need to be signed, for</span>
        <span class="comment">// the same reason that the public key didn&#39;t need to be signed: because you can prove</span>
        <span class="comment">// its validity by hashing (the source string that validates the credentials in that list,</span>
        <span class="comment">// or by hashing/ the public key for that Nym, if doing things the old way.)</span>
        <span class="comment">//</span>
        <span class="keywordflow">if</span> (strFileContents.Exists() &amp;&amp; strFileContents.DecodeIfArmored())
        {
            <span class="keyword">const</span> <span class="keywordtype">bool</span> bLoaded = this-&gt;<a class="code" href="class_o_t_pseudonym.html#a7992e8fbf785eeb2d5158cdf966c7a1b">LoadFromString</a>(strFileContents,
                                                      NULL, <span class="comment">// map of credentials--if NULL, it loads them from local storage.</span>
                                                      &amp;strReason,
                                                      pImportPassword); <span class="comment">// optional to provide a passphrase (otherwise one is prompted for.)</span>

            <span class="comment">// Potentially set m_pkeypair here, though it&#39;s currently set in</span>
            <span class="comment">// LoadPublicKey and Loadx509CertAndPrivateKey.</span>
            <span class="comment">// (And thus set in static calls OTPseudonym::LoadPublicNym and LoadPrivateNym.)</span>

            <span class="keywordflow">return</span> bLoaded;
        }
        <span class="keywordflow">else</span>
        {
            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Failed trying to load credential list from file: %s%s%s\n&quot;</span>,
                           __FUNCTION__, szFoldername, <a class="code" href="class_o_t_log.html#a42d3c91ff84ecae0690e34efb4619a77">OTLog::PathSeparator</a>(), szFilename);
        }
    }
    <span class="comment">// ---------------------------------------</span>
    <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">// No log on failure, since often this may be used to SEE if credentials exist.</span>
                  <span class="comment">// (No need for error message every time they don&#39;t exist.)</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="a7992e8fbf785eeb2d5158cdf966c7a1b"></a><!-- doxytag: member="OTPseudonym::LoadFromString" ref="a7992e8fbf785eeb2d5158cdf966c7a1b" args="(const OTString &amp;strNym, mapOfStrings *pMapCredentials=NULL, OTString *pstrReason=NULL, OTPassword *pImportPassword=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_pseudonym.html#a7992e8fbf785eeb2d5158cdf966c7a1b">OTPseudonym::LoadFromString</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strNym</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="_o_t_string_8hpp.html#a7ec7839682b097a5c5b5c5125046c82b">mapOfStrings</a> *&#160;</td>
          <td class="paramname"><em>pMapCredentials</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_string.html">OTString</a> *&#160;</td>
          <td class="paramname"><em>pstrReason</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_password.html">OTPassword</a> *&#160;</td>
          <td class="paramname"><em>pImportPassword</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l04581">4581</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">bool</span> bSuccess = <span class="keyword">false</span>;
    <span class="comment">// ------------------------------------</span>
    <a class="code" href="class_o_t_pseudonym.html#aac1c0719b846cc3d98286ff29ba63684">ClearAll</a>();  <span class="comment">// Since we are loading everything up... (credentials are NOT cleared here. See note in OTPseudonym::ClearAll.)</span>
    <span class="comment">// ------------------------------------</span>
    <a class="code" href="class_o_t_string_x_m_l.html">OTStringXML</a> strNymXML(strNym); <span class="comment">// todo optimize</span>
    <a class="code" href="namespaceirr_1_1io.html#a1628edbb9d5d53f18c82d2a92b0ad27e">irr::io::IrrXMLReader</a>* xml = irr::io::createIrrXMLReader(strNymXML);
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != xml);
    <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;irr::io::IrrXMLReader&gt;</a> theCleanup(*xml);

    <span class="comment">// parse the file until end reached</span>
    <span class="keywordflow">while</span>(xml &amp;&amp; xml-&gt;read())
    {

<span class="comment">//        switch(xml-&gt;getNodeType())</span>
<span class="comment">//        {</span>
<span class="comment">//            case(EXN_NONE):</span>
<span class="comment">//                OTLog::Error(&quot;ACK NUMS: EXN_NONE --  No xml node. This is usually the node if you did not read anything yet.\n&quot;);</span>
<span class="comment">//                break;</span>
<span class="comment">//            case(EXN_ELEMENT):</span>
<span class="comment">//                OTLog::Error(&quot;ACK NUMS: EXN_ELEMENT -- An xml element such as &lt;foo&gt;.\n&quot;);</span>
<span class="comment">//                break;</span>
<span class="comment">//            case(EXN_ELEMENT_END):</span>
<span class="comment">//                OTLog::Error(&quot;ACK NUMS: EXN_ELEMENT_END -- End of an xml element such as &lt;/foo&gt;.\n&quot;);</span>
<span class="comment">//                break;</span>
<span class="comment">//            case(EXN_TEXT):</span>
<span class="comment">//                OTLog::Error(&quot;ACK NUMS: EXN_TEXT -- Text within an xml element: &lt;foo&gt; this is the text. &lt;foo&gt;.\n&quot;);</span>
<span class="comment">//                break;</span>
<span class="comment">//            case(EXN_COMMENT):</span>
<span class="comment">//                OTLog::Error(&quot;ACK NUMS: EXN_COMMENT -- An xml comment like &lt;!-- I am a comment --&gt; or a DTD definition.\n&quot;);</span>
<span class="comment">//                break;</span>
<span class="comment">//            case(EXN_CDATA):</span>
<span class="comment">//                OTLog::Error(&quot;ACK NUMS: EXN_CDATA -- An xml cdata section like &lt;![CDATA[ this is some CDATA ]]&gt;.\n&quot;);</span>
<span class="comment">//                break;</span>
<span class="comment">//            case(EXN_UNKNOWN):</span>
<span class="comment">//                OTLog::Error(&quot;ACK NUMS: EXN_UNKNOWN -- Unknown element.\n&quot;);</span>
<span class="comment">//                break;</span>
<span class="comment">//            default:</span>
<span class="comment">//                OTLog::Error(&quot;ACK NUMS: default!! -- SHOULD NEVER HAPPEN...\n&quot;);</span>
<span class="comment">//                break;</span>
<span class="comment">//        }</span>
<span class="comment">//        OTLog::vError(&quot;OTPseudonym::LoadFromString: NODE DATA: %s\n&quot;, xml-&gt;getNodeData());</span>


        <span class="comment">// strings for storing the data that we want to read out of the file</span>
        <span class="comment">//</span>
        <span class="keywordflow">switch</span>(xml-&gt;getNodeType())
        {
        <span class="keywordflow">case</span> irr::io::EXN_NONE:
        <span class="keywordflow">case</span> irr::io::EXN_TEXT:
        <span class="keywordflow">case</span> irr::io::EXN_COMMENT:
        <span class="keywordflow">case</span> irr::io::EXN_ELEMENT_END:
        <span class="keywordflow">case</span> irr::io::EXN_CDATA:
                <span class="comment">// in this xml file, the only text which occurs is the messageText</span>
                <span class="comment">//messageText = xml-&gt;getNodeData();</span>

<span class="comment">//            switch(xml-&gt;getNodeType())</span>
<span class="comment">//            {</span>
<span class="comment">//                case(EXN_NONE):</span>
<span class="comment">//                    OTLog::Error(&quot;SKIPPING: EXN_NONE --  No xml node. This is usually the node if you did not read anything yet.\n&quot;);</span>
<span class="comment">//                    break;</span>
<span class="comment">//                case(EXN_TEXT):</span>
<span class="comment">//                    OTLog::Error(&quot;SKIPPING: EXN_TEXT -- Text within an xml element: &lt;foo&gt; this is the text. &lt;foo&gt;.\n&quot;);</span>
<span class="comment">//                    break;</span>
<span class="comment">//                case(EXN_COMMENT):</span>
<span class="comment">//                    OTLog::Error(&quot;SKIPPING: EXN_COMMENT -- An xml comment like &lt;!-- I am a comment --&gt; or a DTD definition.\n&quot;);</span>
<span class="comment">//                    break;</span>
<span class="comment">//                case(EXN_ELEMENT_END):</span>
<span class="comment">//                    OTLog::Error(&quot;SKIPPING: EXN_ELEMENT_END -- End of an xml element such as &lt;/foo&gt;.\n&quot;);</span>
<span class="comment">//                    break;</span>
<span class="comment">//                case(EXN_CDATA):</span>
<span class="comment">//                    OTLog::Error(&quot;SKIPPING: EXN_CDATA -- An xml cdata section like &lt;![CDATA[ this is some CDATA ]]&gt;.\n&quot;);</span>
<span class="comment">//                    break;</span>
<span class="comment">//                default:</span>
<span class="comment">//                    OTLog::Error(&quot;SKIPPING: default!! -- SHOULD NEVER HAPPEN...\n&quot;);</span>
<span class="comment">//                    break;</span>
<span class="comment">//            }</span>

                <span class="keywordflow">break</span>;
        <span class="keywordflow">case</span> irr::io::EXN_ELEMENT:
            {
                <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strNodeName = xml-&gt;getNodeName();
<span class="comment">//              OTLog::vError(&quot;PROCESSING EXN_ELEMENT: NODE NAME: %s\n&quot;, strNodeName.Get());</span>

                <span class="keywordflow">if</span> (strNodeName.<a class="code" href="class_o_t_string.html#a03401b39fb66d63696342c4f61ea8bf5">Compare</a>(<span class="stringliteral">&quot;OTuser&quot;</span>))
                {
                                   m_strVersion     = xml-&gt;getAttributeValue(<span class="stringliteral">&quot;version&quot;</span>);
                    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> UserNymID        = xml-&gt;getAttributeValue(<span class="stringliteral">&quot;nymID&quot;</span>);

                    <span class="comment">// Server-side only...</span>
                    <a class="code" href="class_o_t_string.html">OTString</a> strCredits = xml-&gt;getAttributeValue(<span class="stringliteral">&quot;usageCredits&quot;</span>);

                    <span class="keywordflow">if</span> (strCredits.<a class="code" href="class_o_t_string.html#a640392dd17a786dab643dbfc7e5a8672">GetLength</a>() &gt; 0)
                        m_lUsageCredits = atol(strCredits.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
                    <span class="keywordflow">else</span>
                        m_lUsageCredits = 0; <span class="comment">// This is the default anyway, but just being safe...</span>

                    <span class="comment">//TODO: no need to set the ID again here. We already know the ID</span>
                    <span class="comment">// at this point. Better to check and compare they are the same here.</span>
                    <span class="comment">//m_nymID.SetString(UserNymID);</span>

                    <span class="keywordflow">if</span> (UserNymID.<a class="code" href="class_o_t_string.html#a640392dd17a786dab643dbfc7e5a8672">GetLength</a>())
                        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(3, <span class="stringliteral">&quot;\nLoading user, version: %s NymID:\n%s\n&quot;</span>, m_strVersion.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(), UserNymID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
                    bSuccess = <span class="keyword">true</span>;
                }
                <span class="comment">// ----------------------------------</span>
                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strNodeName.<a class="code" href="class_o_t_string.html#a03401b39fb66d63696342c4f61ea8bf5">Compare</a>(<span class="stringliteral">&quot;nymIDSource&quot;</span>))
                {
<span class="comment">//                  OTLog::Output(3, &quot;Loading nymIDSource...\n&quot;);</span>
                    <a class="code" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> ascAltLocation = xml-&gt;getAttributeValue(<span class="stringliteral">&quot;altLocation&quot;</span>); <span class="comment">// optional.</span>
                    <span class="keywordflow">if</span> (ascAltLocation.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>())
                        ascAltLocation.<a class="code" href="class_o_t_a_s_c_i_i_armor.html#ab39b6cae69c14149716e5ce7a6f0bb0f">GetString</a>(m_strAltLocation, <span class="keyword">false</span>); <span class="comment">//bLineBreaks=true by default.</span>

                    <span class="keywordflow">if</span> (<span class="keyword">false</span> == <a class="code" href="class_o_t_contract.html#a72ffe11fdcf2f6e3566afa9061241f30">OTContract::LoadEncodedTextField</a>(xml, m_strSourceForNymID))
                    {
                        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;Error in %s line %d: failed loading expected nymIDSource field.\n&quot;</span>,
                                      __FILE__, __LINE__);
                        <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">// error condition</span>
                    }
                }
                <span class="comment">// ----------------------------------</span>
                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strNodeName.<a class="code" href="class_o_t_string.html#a03401b39fb66d63696342c4f61ea8bf5">Compare</a>(<span class="stringliteral">&quot;revokedCredential&quot;</span>))
                {
                    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strRevokedID = xml-&gt;getAttributeValue(<span class="stringliteral">&quot;ID&quot;</span>);
                    <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(3, <span class="stringliteral">&quot;revokedCredential ID: %s\n&quot;</span>, strRevokedID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
                    listOfStrings::iterator iter = std::find(m_listRevokedIDs.begin(), m_listRevokedIDs.end(), strRevokedID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
                    <span class="keywordflow">if</span> (iter == m_listRevokedIDs.end()) <span class="comment">// It&#39;s not already there, so it&#39;s safe to add it.</span>
                        m_listRevokedIDs.push_back(strRevokedID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>()); <span class="comment">// todo optimize.</span>
                }
                <span class="comment">// ----------------------------------</span>
                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strNodeName.<a class="code" href="class_o_t_string.html#a03401b39fb66d63696342c4f61ea8bf5">Compare</a>(<span class="stringliteral">&quot;masterCredential&quot;</span>))
                {
                    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strID    = xml-&gt;getAttributeValue(<span class="stringliteral">&quot;ID&quot;</span>);
                    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strValid = xml-&gt;getAttributeValue(<span class="stringliteral">&quot;valid&quot;</span>);
                    <span class="keyword">const</span> <span class="keywordtype">bool</span> bValid = strValid.<a class="code" href="class_o_t_string.html#a03401b39fb66d63696342c4f61ea8bf5">Compare</a>(<span class="stringliteral">&quot;true&quot;</span>);
                    <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(3, <span class="stringliteral">&quot;Loading %s masterCredential ID: %s\n&quot;</span>,
                                   bValid ? <span class="stringliteral">&quot;valid&quot;</span> : <span class="stringliteral">&quot;invalid&quot;</span>, strID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
                    <a class="code" href="class_o_t_string.html">OTString</a> strNymID;
                    this-&gt;<a class="code" href="class_o_t_pseudonym.html#a1775c7aedd0dd25b2faf3f78dcccabe7">GetIdentifier</a>(strNymID);
                    <a class="code" href="class_o_t_credential.html">OTCredential</a> * pCredential = NULL;
                    <span class="comment">// -------------------------</span>
                    <span class="keywordflow">if</span> (NULL == pMapCredentials) <span class="comment">// pMapCredentials is an option that allows you to read credentials from the map instead of from local storage. (While loading the Nym...) In this case, the option isn&#39;t being employed...</span>
                        pCredential = <a class="code" href="class_o_t_credential.html#aa715e4d86931c981c05dc23a6e99b51c">OTCredential::LoadMaster</a>(strNymID, strID);
                    <span class="keywordflow">else</span> <span class="comment">// In this case, it potentially is on the map...</span>
                    {
                        mapOfStrings::iterator it_cred = pMapCredentials-&gt;find(strID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());

                        <span class="keywordflow">if</span> (it_cred == pMapCredentials-&gt;end()) <span class="comment">// Nope, didn&#39;t find it on the map. But if a Map was passed, then it SHOULD have contained all the listed credentials (including the one we&#39;re trying to load now.)</span>
                            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Expected master credential (%s) on map of credentials, but couldn&#39;t find it. (Failure.)\n&quot;</span>,
                                          __FUNCTION__, strID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
                        <span class="keywordflow">else</span> <span class="comment">// Found it on the map passed in (so no need to load from storage, we&#39;ll load from string instead.)</span>
                        {
                            <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strMasterCredential((*it_cred).second.c_str());
                            <span class="keywordflow">if</span> (strMasterCredential.Exists())
                            {
                                <a class="code" href="class_o_t_password_data.html">OTPasswordData</a> thePWData(NULL == pstrReason ? <span class="stringliteral">&quot;OTPseudonym::LoadFromString&quot;</span> : pstrReason-&gt;<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
                                pCredential = <a class="code" href="class_o_t_credential.html#ade0b88fa2ad1963a0619838266a1e18d">OTCredential::LoadMasterFromString</a>(strMasterCredential, strNymID, strID, &amp;thePWData,
                                                                                 pImportPassword);
                            }
                        }
                    }
                    <span class="comment">// -------------------------</span>
                    <span class="keywordflow">if</span> (NULL == pCredential)
                    {
                        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Failed trying to load Master Credential ID: %s\n&quot;</span>,
                                      __FUNCTION__, strID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
                        <span class="keywordflow">return</span> <span class="keyword">false</span>;
                    }
                    <span class="keywordflow">else</span> <span class="comment">// pCredential must be cleaned up or stored somewhere.</span>
                    {
                        <a class="code" href="_o_t_pseudonym_8hpp.html#a0617d6d6c189c161a3fcf3c4710f5dba">mapOfCredentials</a> * pMap = bValid ? &amp;m_mapCredentials : &amp;m_mapRevoked;
                        mapOfCredentials::iterator iter = pMap-&gt;find(strID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());  <span class="comment">// todo optimize.</span>
                        <span class="keywordflow">if</span> (iter == pMap-&gt;end()) <span class="comment">// It&#39;s not already there, so it&#39;s safe to add it.</span>
                            pMap-&gt;insert(std::pair&lt;std::string, OTCredential *&gt;(strID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(), pCredential)); <span class="comment">// &lt;=====</span>
                        <span class="keywordflow">else</span>
                        {
                            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: While loading credential (%s), discovered it was already there &quot;</span>
                                          <span class="stringliteral">&quot;on my list, or one with the exact same ID! Therefore, failed &quot;</span>
                                          <span class="stringliteral">&quot;adding this newer one.\n&quot;</span>, __FUNCTION__, strID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
                            <span class="keyword">delete</span> pCredential; pCredential = NULL;
                            <span class="keywordflow">return</span> <span class="keyword">false</span>;
                        }
                    }
                }
                <span class="comment">// ----------------------------------</span>
                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strNodeName.<a class="code" href="class_o_t_string.html#a03401b39fb66d63696342c4f61ea8bf5">Compare</a>(<span class="stringliteral">&quot;keyCredential&quot;</span>))
                {
                    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strID           = xml-&gt;getAttributeValue(<span class="stringliteral">&quot;ID&quot;</span>);
                    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strValid        = xml-&gt;getAttributeValue(<span class="stringliteral">&quot;valid&quot;</span>); <span class="comment">// If this is false, the ID is already on revokedCredentials list. (FYI.)</span>
                    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strMasterCredID = xml-&gt;getAttributeValue(<span class="stringliteral">&quot;masterID&quot;</span>);
                    <span class="keyword">const</span> <span class="keywordtype">bool</span> bValid = strValid.<a class="code" href="class_o_t_string.html#a03401b39fb66d63696342c4f61ea8bf5">Compare</a>(<span class="stringliteral">&quot;true&quot;</span>);
                    <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(3, <span class="stringliteral">&quot;Loading %s keyCredential ID: %s\n ...For master credential: %s\n&quot;</span>,
                                   bValid ? <span class="stringliteral">&quot;valid&quot;</span> : <span class="stringliteral">&quot;invalid&quot;</span>, strID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(), strMasterCredID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
                    <a class="code" href="class_o_t_credential.html">OTCredential</a> * pCredential = this-&gt;<a class="code" href="class_o_t_pseudonym.html#a94f8a8812ceae9a1f003aa79bfda73a5">GetMasterCredential</a>(strMasterCredID); <span class="comment">// no need to cleanup.</span>
                    <span class="keywordflow">if</span> (NULL == pCredential)
                        pCredential = this-&gt;<a class="code" href="class_o_t_pseudonym.html#a34722ae73d2b67e12c92ac770f7dd6f1">GetRevokedCredential</a>(strMasterCredID);
                    <span class="keywordflow">if</span> (NULL == pCredential)
                    {
                        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: While loading keyCredential, failed trying to find expected Master Credential ID: %s\n&quot;</span>,
                                      __FUNCTION__, strMasterCredID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
                        <span class="keywordflow">return</span> <span class="keyword">false</span>;
                    }
                    <span class="keywordflow">else</span> <span class="comment">// We found the master credential that this keyCredential belongs to.</span>
                    {
                        <span class="keywordtype">bool</span> bLoaded = <span class="keyword">false</span>;
                        <span class="comment">// -------------------------</span>
                        <span class="keywordflow">if</span> (NULL == pMapCredentials) <span class="comment">// pMapCredentials is an option that allows you to read credentials from the map instead of from local storage. (While loading the Nym...) In this case, the option isn&#39;t being employed...</span>
                            bLoaded = pCredential-&gt;LoadSubkey(strID);
                        <span class="keywordflow">else</span> <span class="comment">// In this case, it potentially is on the map...</span>
                        {
                            mapOfStrings::iterator it_cred = pMapCredentials-&gt;find(strID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());

                            <span class="keywordflow">if</span> (it_cred == pMapCredentials-&gt;end()) <span class="comment">// Nope, didn&#39;t find it on the map. But if a Map was passed, then it SHOULD have contained all the listed credentials (including the one we&#39;re trying to load now.)</span>
                                <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Expected keyCredential (%s) on map of credentials, but couldn&#39;t find it. (Failure.)\n&quot;</span>,
                                              __FUNCTION__, strID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
                            <span class="keywordflow">else</span> <span class="comment">// Found it on the map passed in (so no need to load from storage, we&#39;ll load from string instead.)</span>
                            {
                                <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strSubCredential((*it_cred).second.c_str());
                                <span class="keywordflow">if</span> (strSubCredential.Exists())
                                    bLoaded = pCredential-&gt;LoadSubkeyFromString(strSubCredential, strID, pImportPassword);
                            }
                        }
                        <span class="comment">// -------------------------</span>
                        <span class="keywordflow">if</span> (!bLoaded)
                        {
                            <a class="code" href="class_o_t_string.html">OTString</a> strNymID;
                            this-&gt;<a class="code" href="class_o_t_pseudonym.html#a1775c7aedd0dd25b2faf3f78dcccabe7">GetIdentifier</a>(strNymID);
                            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Failed loading keyCredential %s for master credential %s for Nym %s.\n&quot;</span>,
                                          __FUNCTION__, strID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(), strMasterCredID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(), strNymID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
                            <span class="keywordflow">return</span> <span class="keyword">false</span>;
                        }
                    }
                }
                <span class="comment">// ----------------------------------</span>
                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strNodeName.<a class="code" href="class_o_t_string.html#a03401b39fb66d63696342c4f61ea8bf5">Compare</a>(<span class="stringliteral">&quot;subCredential&quot;</span>))
                {
                    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strID           = xml-&gt;getAttributeValue(<span class="stringliteral">&quot;ID&quot;</span>);
                    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strValid        = xml-&gt;getAttributeValue(<span class="stringliteral">&quot;valid&quot;</span>); <span class="comment">// If this is false, the ID is already on revokedCredentials list. (FYI.)</span>
                    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strMasterCredID = xml-&gt;getAttributeValue(<span class="stringliteral">&quot;masterID&quot;</span>);
                    <span class="keyword">const</span> <span class="keywordtype">bool</span> bValid = strValid.<a class="code" href="class_o_t_string.html#a03401b39fb66d63696342c4f61ea8bf5">Compare</a>(<span class="stringliteral">&quot;true&quot;</span>);
                    <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(3, <span class="stringliteral">&quot;Loading %s subCredential ID: %s\n ...For master credential: %s\n&quot;</span>,
                                   bValid ? <span class="stringliteral">&quot;valid&quot;</span> : <span class="stringliteral">&quot;invalid&quot;</span>, strID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(), strMasterCredID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
                    <a class="code" href="class_o_t_credential.html">OTCredential</a> * pCredential = this-&gt;<a class="code" href="class_o_t_pseudonym.html#a94f8a8812ceae9a1f003aa79bfda73a5">GetMasterCredential</a>(strMasterCredID); <span class="comment">// no need to cleanup.</span>
                    <span class="keywordflow">if</span> (NULL == pCredential)
                        pCredential = this-&gt;<a class="code" href="class_o_t_pseudonym.html#a34722ae73d2b67e12c92ac770f7dd6f1">GetRevokedCredential</a>(strMasterCredID);
                    <span class="keywordflow">if</span> (NULL == pCredential)
                    {
                        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: While loading subCredential, failed trying to find expected Master Credential ID: %s\n&quot;</span>,
                                      __FUNCTION__, strMasterCredID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
                        <span class="keywordflow">return</span> <span class="keyword">false</span>;
                    }
                    <span class="keywordflow">else</span> <span class="comment">// We found the master credential that this subCredential belongs to.</span>
                    {
                        <span class="keywordtype">bool</span> bLoaded = <span class="keyword">false</span>;
                        <span class="comment">// -------------------------</span>
                        <span class="keywordflow">if</span> (NULL == pMapCredentials) <span class="comment">// pMapCredentials is an option that allows you to read credentials from the map instead of from local storage. (While loading the Nym...) In this case, the option isn&#39;t being employed...</span>
                            bLoaded = pCredential-&gt;LoadSubcredential(strID);
                        <span class="keywordflow">else</span> <span class="comment">// In this case, it potentially is on the map...</span>
                        {
                            mapOfStrings::iterator it_cred = pMapCredentials-&gt;find(strID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());

                            <span class="keywordflow">if</span> (it_cred == pMapCredentials-&gt;end())<span class="comment">// Nope, didn&#39;t find it on the map. But if a Map was passed, then it SHOULD have contained all the listed credentials (including the one we&#39;re trying to load now.)</span>
                                <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Expected subCredential (%s) on map of credentials, but couldn&#39;t find it. (Failure.)\n&quot;</span>,
                                              __FUNCTION__, strID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
                            <span class="keywordflow">else</span> <span class="comment">// Found it on the map passed in (so no need to load from storage, we&#39;ll load from string instead.)</span>
                            {
                                <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strSubCredential((*it_cred).second.c_str());
                                <span class="keywordflow">if</span> (strSubCredential.Exists())
                                    bLoaded = pCredential-&gt;LoadSubcredentialFromString(strSubCredential, strID, pImportPassword);
                            }
                        }
                        <span class="comment">// -------------------------</span>
                        <span class="keywordflow">if</span> (!bLoaded)
                        {
                            <a class="code" href="class_o_t_string.html">OTString</a> strNymID;
                            this-&gt;<a class="code" href="class_o_t_pseudonym.html#a1775c7aedd0dd25b2faf3f78dcccabe7">GetIdentifier</a>(strNymID);
                            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Failed loading subCredential %s for master credential %s for Nym %s.\n&quot;</span>,
                                          __FUNCTION__, strID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(), strMasterCredID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(), strNymID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
                            <span class="keywordflow">return</span> <span class="keyword">false</span>;
                        }
                    }
                }
                <span class="comment">// ----------------------------------</span>
                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strNodeName.<a class="code" href="class_o_t_string.html#a03401b39fb66d63696342c4f61ea8bf5">Compare</a>(<span class="stringliteral">&quot;requestNum&quot;</span>))
                {
                    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> ReqNumServerID = xml-&gt;getAttributeValue(<span class="stringliteral">&quot;serverID&quot;</span>);
                    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> ReqNumCurrent  = xml-&gt;getAttributeValue(<span class="stringliteral">&quot;currentRequestNum&quot;</span>);

                    <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(3, <span class="stringliteral">&quot;\nCurrent Request Number is %s for ServerID: %s\n&quot;</span>,
                                   ReqNumCurrent.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(), ReqNumServerID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());

                    <span class="comment">// Make sure now that I&#39;ve loaded this request number, to add it to my</span>
                    <span class="comment">// internal map so that it is available for future lookups.</span>
                    m_mapRequestNum[ReqNumServerID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>()] = atol(ReqNumCurrent.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
                }
                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strNodeName.<a class="code" href="class_o_t_string.html#a03401b39fb66d63696342c4f61ea8bf5">Compare</a>(<span class="stringliteral">&quot;nymboxHash&quot;</span>))
                {
                    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strValue = xml-&gt;getAttributeValue(<span class="stringliteral">&quot;value&quot;</span>);

                    <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(3, <span class="stringliteral">&quot;\nNymboxHash is: %s\n&quot;</span>, strValue.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());

                    <span class="keywordflow">if</span> (strValue.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>())
                        m_NymboxHash.<a class="code" href="class_o_t_identifier.html#ae29aa1245d3831a207aabc9b8a493bfc">SetString</a>(strValue);
                }
                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strNodeName.<a class="code" href="class_o_t_string.html#a03401b39fb66d63696342c4f61ea8bf5">Compare</a>(<span class="stringliteral">&quot;nymboxHashItem&quot;</span>))
                {
                    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strServerID      = xml-&gt;getAttributeValue(<span class="stringliteral">&quot;serverID&quot;</span>);
                    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strNymboxHash    = xml-&gt;getAttributeValue(<span class="stringliteral">&quot;nymboxHash&quot;</span>);

                    <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(3, <span class="stringliteral">&quot;\nNymboxHash is %s for ServerID: %s\n&quot;</span>,
                                   strNymboxHash.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(), strServerID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());

                    <span class="comment">// Make sure now that I&#39;ve loaded this nymboxHash, to add it to my</span>
                    <span class="comment">// internal map so that it is available for future lookups.</span>
                    <span class="keywordflow">if</span> (strServerID.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>() &amp;&amp; strNymboxHash.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>())
                    {
                        <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theID(strNymboxHash);
                        m_mapNymboxHash[strServerID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>()] = theID;
                    }
                }
                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strNodeName.<a class="code" href="class_o_t_string.html#a03401b39fb66d63696342c4f61ea8bf5">Compare</a>(<span class="stringliteral">&quot;recentHashItem&quot;</span>))
                {
                    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strServerID      = xml-&gt;getAttributeValue(<span class="stringliteral">&quot;serverID&quot;</span>);
                    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strRecentHash    = xml-&gt;getAttributeValue(<span class="stringliteral">&quot;recentHash&quot;</span>);

                    <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(3, <span class="stringliteral">&quot;\nRecentHash is %s for ServerID: %s\n&quot;</span>,
                                   strRecentHash.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(), strServerID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());

                    <span class="comment">// Make sure now that I&#39;ve loaded this RecentHash, to add it to my</span>
                    <span class="comment">// internal map so that it is available for future lookups.</span>
                    <span class="keywordflow">if</span> (strServerID.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>() &amp;&amp; strRecentHash.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>())
                    {
                        <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theID(strRecentHash);
                        m_mapRecentHash[strServerID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>()] = theID;
                    }
                }
                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strNodeName.<a class="code" href="class_o_t_string.html#a03401b39fb66d63696342c4f61ea8bf5">Compare</a>(<span class="stringliteral">&quot;inboxHashItem&quot;</span>))
                {
                    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strAccountID    = xml-&gt;getAttributeValue(<span class="stringliteral">&quot;accountID&quot;</span>);
                    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strHashValue    = xml-&gt;getAttributeValue(<span class="stringliteral">&quot;hashValue&quot;</span>);

                    <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(3, <span class="stringliteral">&quot;\nInboxHash is %s for Account ID: %s\n&quot;</span>,
                                   strHashValue.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(), strAccountID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());

                    <span class="comment">// Make sure now that I&#39;ve loaded this InboxHash, to add it to my</span>
                    <span class="comment">// internal map so that it is available for future lookups.</span>
                    <span class="comment">//</span>
                    <span class="keywordflow">if</span> (strAccountID.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>() &amp;&amp; strHashValue.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>())
                    {
                        <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theID(strHashValue);
                        m_mapInboxHash[strAccountID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>()] = theID;
                    }
                }
                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strNodeName.<a class="code" href="class_o_t_string.html#a03401b39fb66d63696342c4f61ea8bf5">Compare</a>(<span class="stringliteral">&quot;outboxHashItem&quot;</span>))
                {
                    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strAccountID    = xml-&gt;getAttributeValue(<span class="stringliteral">&quot;accountID&quot;</span>);
                    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strHashValue    = xml-&gt;getAttributeValue(<span class="stringliteral">&quot;hashValue&quot;</span>);

                    <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(3, <span class="stringliteral">&quot;\nOutboxHash is %s for Account ID: %s\n&quot;</span>,
                                   strHashValue.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(), strAccountID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());

                    <span class="comment">// Make sure now that I&#39;ve loaded this OutboxHash, to add it to my</span>
                    <span class="comment">// internal map so that it is available for future lookups.</span>
                    <span class="comment">//</span>
                    <span class="keywordflow">if</span> (strAccountID.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>() &amp;&amp; strHashValue.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>())
                    {
                        <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theID(strHashValue);
                        m_mapOutboxHash[strAccountID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>()] = theID;
                    }
                }
                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strNodeName.<a class="code" href="class_o_t_string.html#a03401b39fb66d63696342c4f61ea8bf5">Compare</a>(<span class="stringliteral">&quot;highestTransNum&quot;</span>))
                {
                    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> HighNumServerID = xml-&gt;getAttributeValue(<span class="stringliteral">&quot;serverID&quot;</span>);
                    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> HighNumRecent = xml-&gt;getAttributeValue(<span class="stringliteral">&quot;mostRecent&quot;</span>);

                    <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(3, <span class="stringliteral">&quot;\nHighest Transaction Number ever received is %s for ServerID: %s\n&quot;</span>,
                                   HighNumRecent.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(), HighNumServerID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());

                    <span class="comment">// Make sure now that I&#39;ve loaded this highest number, to add it to my</span>
                    <span class="comment">// internal map so that it is available for future lookups.</span>
                    m_mapHighTransNo[HighNumServerID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>()] = atol(HighNumRecent.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
                }
                <span class="comment">// ----------------------------------------------</span>

                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strNodeName.<a class="code" href="class_o_t_string.html#a03401b39fb66d63696342c4f61ea8bf5">Compare</a>(<span class="stringliteral">&quot;transactionNums&quot;</span>))
                {
                    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> tempServerID = xml-&gt;getAttributeValue(<span class="stringliteral">&quot;serverID&quot;</span>);
                    <a class="code" href="class_o_t_string.html">OTString</a> strTemp;
                    <span class="keywordflow">if</span> (!tempServerID.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>() || !<a class="code" href="class_o_t_contract.html#a72ffe11fdcf2f6e3566afa9061241f30">OTContract::LoadEncodedTextField</a>(xml, strTemp))
                    {
                        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error: transactionNums field without value.\n&quot;</span>, __FUNCTION__);
                        <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">// error condition</span>
                    }
                    <a class="code" href="class_o_t_num_list.html">OTNumList</a> theNumList;

                    <span class="keywordflow">if</span> (strTemp.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>())
                        theNumList.Add(strTemp);

                    int64_t lTemp=0;
                    <span class="keywordflow">while</span>(theNumList.<a class="code" href="class_o_t_num_list.html#afbd8f3863c5c8330c851d30220cea8b9">Peek</a>(lTemp))
                    {
                        theNumList.<a class="code" href="class_o_t_num_list.html#a86c3f5ed864c1a6996f05d6430512c3c">Pop</a>();
                        <span class="comment">// ------------</span>
                        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(3, <span class="stringliteral">&quot;Transaction Number %lld ready-to-use for ServerID: %s\n&quot;</span>,
                                       lTemp, tempServerID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
                        <a class="code" href="class_o_t_pseudonym.html#a2771ea8cf77d2ac05d942e149c2bc3e6">AddTransactionNum</a>(tempServerID, lTemp); <span class="comment">// This version doesn&#39;t save to disk. (Why save to disk AS WE&#39;RE LOADING?)</span>
                    }
                }

                <span class="comment">// ----------------------------------------------</span>

                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strNodeName.<a class="code" href="class_o_t_string.html#a03401b39fb66d63696342c4f61ea8bf5">Compare</a>(<span class="stringliteral">&quot;issuedNums&quot;</span>))
                {
                    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> tempServerID = xml-&gt;getAttributeValue(<span class="stringliteral">&quot;serverID&quot;</span>);
                    <a class="code" href="class_o_t_string.html">OTString</a> strTemp;
                    <span class="keywordflow">if</span> (!tempServerID.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>() || !<a class="code" href="class_o_t_contract.html#a72ffe11fdcf2f6e3566afa9061241f30">OTContract::LoadEncodedTextField</a>(xml, strTemp))
                    {
                        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error: issuedNums field without value.\n&quot;</span>, __FUNCTION__);
                        <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">// error condition</span>
                    }
                    <a class="code" href="class_o_t_num_list.html">OTNumList</a> theNumList;

                    <span class="keywordflow">if</span> (strTemp.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>())
                        theNumList.Add(strTemp);

                    int64_t lTemp=0;
                    <span class="keywordflow">while</span>(theNumList.<a class="code" href="class_o_t_num_list.html#afbd8f3863c5c8330c851d30220cea8b9">Peek</a>(lTemp))
                    {
                        theNumList.<a class="code" href="class_o_t_num_list.html#a86c3f5ed864c1a6996f05d6430512c3c">Pop</a>();
                        <span class="comment">// ------------</span>
                        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(3, <span class="stringliteral">&quot;Currently liable for issued trans# %lld at ServerID: %s\n&quot;</span>,
                                       lTemp, tempServerID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
                        <a class="code" href="class_o_t_pseudonym.html#a331a9c5ec8692d0b88a76d882586fbc1">AddIssuedNum</a>(tempServerID, lTemp); <span class="comment">// This version doesn&#39;t save to disk. (Why save to disk AS WE&#39;RE LOADING?)</span>
                    }
                }

                <span class="comment">// ----------------------------------------------</span>

                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strNodeName.<a class="code" href="class_o_t_string.html#a03401b39fb66d63696342c4f61ea8bf5">Compare</a>(<span class="stringliteral">&quot;tentativeNums&quot;</span>))
                {
                    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> tempServerID = xml-&gt;getAttributeValue(<span class="stringliteral">&quot;serverID&quot;</span>);
                    <a class="code" href="class_o_t_string.html">OTString</a> strTemp;
                    <span class="keywordflow">if</span> (!tempServerID.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>() || !<a class="code" href="class_o_t_contract.html#a72ffe11fdcf2f6e3566afa9061241f30">OTContract::LoadEncodedTextField</a>(xml, strTemp))
                    {
                        <a class="code" href="class_o_t_log.html#a5acd90ac91c2618f395b0ff37ad4f8ee">OTLog::Error</a>(<span class="stringliteral">&quot;OTPseudonym::LoadFromString: Error: tentativeNums field without value.\n&quot;</span>);
                        <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">// error condition</span>
                    }
                    <a class="code" href="class_o_t_num_list.html">OTNumList</a> theNumList;

                    <span class="keywordflow">if</span> (strTemp.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>())
                        theNumList.Add(strTemp);

                    int64_t lTemp=0;
                    <span class="keywordflow">while</span>(theNumList.<a class="code" href="class_o_t_num_list.html#afbd8f3863c5c8330c851d30220cea8b9">Peek</a>(lTemp))
                    {
                        theNumList.<a class="code" href="class_o_t_num_list.html#a86c3f5ed864c1a6996f05d6430512c3c">Pop</a>();
                        <span class="comment">// ------------</span>
                        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(3, <span class="stringliteral">&quot;Tentative: Currently awaiting success notice, &quot;</span>
                                       <span class="stringliteral">&quot;for accepting trans# %lld for ServerID: %s\n&quot;</span>,
                                       lTemp, tempServerID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
                        <a class="code" href="class_o_t_pseudonym.html#a154a958a9f3cfdb07167858579f74037">AddTentativeNum</a>(tempServerID, lTemp); <span class="comment">// This version doesn&#39;t save to disk. (Why save to disk AS WE&#39;RE LOADING?)</span>
                    }
                }

                <span class="comment">// ----------------------------------------------</span>

                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strNodeName.<a class="code" href="class_o_t_string.html#a03401b39fb66d63696342c4f61ea8bf5">Compare</a>(<span class="stringliteral">&quot;ackNums&quot;</span>))
                {
                    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> tempServerID = xml-&gt;getAttributeValue(<span class="stringliteral">&quot;serverID&quot;</span>);
                    <a class="code" href="class_o_t_string.html">OTString</a> strTemp;
                    <span class="keywordflow">if</span> (!tempServerID.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>())
                    {
                        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error: While loading ackNums &quot;</span>
                                      <span class="stringliteral">&quot;field: Missing serverID. Nym contents:\n\n%s\n\n&quot;</span>,
                                      __FUNCTION__, strNym.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
                        <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">// error condition</span>
                    }
                    <span class="comment">// ----------------------</span>

<span class="comment">//                  xml-&gt;read(); // there should be a text field next, with the data for the list of acknowledged numbers.</span>
                    <span class="comment">// Note: I think I was forced to add this when the numlist was empty, one time, so this may come back</span>
                    <span class="comment">// to haunt me, but I want to fix it right, not kludge it.</span>
                    <span class="comment">//</span>
                    <span class="comment">// ----------------------</span>
                    <span class="keywordflow">if</span> (!<a class="code" href="class_o_t_contract.html#a72ffe11fdcf2f6e3566afa9061241f30">OTContract::LoadEncodedTextField</a>(xml, strTemp))
                    {
                        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error: ackNums field without value &quot;</span>
                                      <span class="stringliteral">&quot;(at least, unable to LoadEncodedTextField on that value.)\n&quot;</span>, __FUNCTION__);
                        <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">// error condition</span>
                    }
                    <a class="code" href="class_o_t_num_list.html">OTNumList</a> theNumList;

                    <span class="keywordflow">if</span> (strTemp.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>())
                        theNumList.Add(strTemp);

                    int64_t lTemp=0;
                    <span class="keywordflow">while</span>(theNumList.<a class="code" href="class_o_t_num_list.html#afbd8f3863c5c8330c851d30220cea8b9">Peek</a>(lTemp))
                    {
                        theNumList.<a class="code" href="class_o_t_num_list.html#a86c3f5ed864c1a6996f05d6430512c3c">Pop</a>();
                        <span class="comment">// ------------</span>
                        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(2, <span class="stringliteral">&quot;Acknowledgment record exists for server reply, for Request Number %lld for ServerID: %s\n&quot;</span>,
                                       lTemp, tempServerID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
                        <a class="code" href="class_o_t_pseudonym.html#ae6b11aa38ba2894e1d8386d6e5589e2f">AddAcknowledgedNum</a>(tempServerID, lTemp); <span class="comment">// This version doesn&#39;t save to disk. (Why save to disk AS WE&#39;RE LOADING?)</span>
                    }
                }

                <span class="comment">// ----------------------------------------------</span>

                <span class="comment">// THE BELOW FOUR ARE DEPRECATED, AND ARE REPLACED BY THE ABOVE FOUR.</span>

                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strNodeName.<a class="code" href="class_o_t_string.html#a03401b39fb66d63696342c4f61ea8bf5">Compare</a>(<span class="stringliteral">&quot;transactionNum&quot;</span>))
                {
                    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> TransNumServerID  = xml-&gt;getAttributeValue(<span class="stringliteral">&quot;serverID&quot;</span>);
                    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> TransNumAvailable = xml-&gt;getAttributeValue(<span class="stringliteral">&quot;transactionNum&quot;</span>);

                    <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(3, <span class="stringliteral">&quot;Transaction Number %s available for ServerID: %s\n&quot;</span>,
                                   TransNumAvailable.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(), TransNumServerID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());

                    <a class="code" href="class_o_t_pseudonym.html#a2771ea8cf77d2ac05d942e149c2bc3e6">AddTransactionNum</a>(TransNumServerID, atol(TransNumAvailable.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>())); <span class="comment">// This version doesn&#39;t save to disk. (Why save to disk AS WE&#39;RE LOADING?)</span>
                }
                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strNodeName.<a class="code" href="class_o_t_string.html#a03401b39fb66d63696342c4f61ea8bf5">Compare</a>(<span class="stringliteral">&quot;issuedNum&quot;</span>))
                {
                    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> TransNumServerID  = xml-&gt;getAttributeValue(<span class="stringliteral">&quot;serverID&quot;</span>);
                    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> TransNumAvailable = xml-&gt;getAttributeValue(<span class="stringliteral">&quot;transactionNum&quot;</span>);

                    <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(3, <span class="stringliteral">&quot;Currently liable for Transaction Number %s, for ServerID: %s\n&quot;</span>,
                                   TransNumAvailable.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(), TransNumServerID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());

                    <a class="code" href="class_o_t_pseudonym.html#a331a9c5ec8692d0b88a76d882586fbc1">AddIssuedNum</a>(TransNumServerID, atol(TransNumAvailable.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>())); <span class="comment">// This version doesn&#39;t save to disk. (Why save to disk AS WE&#39;RE LOADING?)</span>
                }
                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strNodeName.<a class="code" href="class_o_t_string.html#a03401b39fb66d63696342c4f61ea8bf5">Compare</a>(<span class="stringliteral">&quot;tentativeNum&quot;</span>))
                {
                    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> TransNumServerID  = xml-&gt;getAttributeValue(<span class="stringliteral">&quot;serverID&quot;</span>);
                    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> TransNumAvailable = xml-&gt;getAttributeValue(<span class="stringliteral">&quot;transactionNum&quot;</span>);

                    <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(3, <span class="stringliteral">&quot;Currently waiting on server success notice, accepting Transaction Number %s, for ServerID: %s\n&quot;</span>,
                                   TransNumAvailable.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(), TransNumServerID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());

                    <a class="code" href="class_o_t_pseudonym.html#a154a958a9f3cfdb07167858579f74037">AddTentativeNum</a>(TransNumServerID, atol(TransNumAvailable.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>())); <span class="comment">// This version doesn&#39;t save to disk. (Why save to disk AS WE&#39;RE LOADING?)</span>
                }
                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strNodeName.<a class="code" href="class_o_t_string.html#a03401b39fb66d63696342c4f61ea8bf5">Compare</a>(<span class="stringliteral">&quot;acknowledgedNum&quot;</span>))
                {
                    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> AckNumServerID = xml-&gt;getAttributeValue(<span class="stringliteral">&quot;serverID&quot;</span>);
                    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> AckNumValue    = xml-&gt;getAttributeValue(<span class="stringliteral">&quot;requestNum&quot;</span>);

                    <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(3, <span class="stringliteral">&quot;Acknowledgment record exists for server reply, for Request Number %s, for ServerID: %s\n&quot;</span>,
                                   AckNumValue.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(), AckNumServerID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());

                    <a class="code" href="class_o_t_pseudonym.html#ae6b11aa38ba2894e1d8386d6e5589e2f">AddAcknowledgedNum</a>(AckNumServerID, atol(AckNumValue.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>())); <span class="comment">// This version doesn&#39;t save to disk. (Why save to disk AS WE&#39;RE LOADING?)</span>
                }
                <span class="comment">// -------------------------------------</span>
                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strNodeName.<a class="code" href="class_o_t_string.html#a03401b39fb66d63696342c4f61ea8bf5">Compare</a>(<span class="stringliteral">&quot;MARKED_FOR_DELETION&quot;</span>))
                {
                    m_bMarkForDeletion = <span class="keyword">true</span>;
                    <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(3, <span class="stringliteral">&quot;This nym has been MARKED_FOR_DELETION (at some point prior.)\n&quot;</span>);
                }
                <span class="comment">// -------------------------------------</span>
                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strNodeName.<a class="code" href="class_o_t_string.html#a03401b39fb66d63696342c4f61ea8bf5">Compare</a>(<span class="stringliteral">&quot;hasOpenCronItem&quot;</span>))
                {
                    <a class="code" href="class_o_t_string.html">OTString</a> strID = xml-&gt;getAttributeValue(<span class="stringliteral">&quot;ID&quot;</span>);

                    <span class="keywordflow">if</span> (strID.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>())
                    {
                        <span class="keyword">const</span> int64_t lNewID = atol(strID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
                        m_setOpenCronItems.insert(lNewID);
                        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(3, <span class="stringliteral">&quot;This nym has an open cron item with ID: %s\n&quot;</span>,
                                       strID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
                    }
                    <span class="keywordflow">else</span>
                        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(3, <span class="stringliteral">&quot;This nym MISSING ID when loading open cron item record.\n&quot;</span>);
                }
                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strNodeName.<a class="code" href="class_o_t_string.html#a03401b39fb66d63696342c4f61ea8bf5">Compare</a>(<span class="stringliteral">&quot;ownsAssetAcct&quot;</span>))
                {
                    <a class="code" href="class_o_t_string.html">OTString</a> strID = xml-&gt;getAttributeValue(<span class="stringliteral">&quot;ID&quot;</span>);

                    <span class="keywordflow">if</span> (strID.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>())
                    {
                        m_setAccounts.insert(strID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
                        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(3, <span class="stringliteral">&quot;This nym has an asset account with the ID: %s\n&quot;</span>,
                                       strID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
                    }
                    <span class="keywordflow">else</span>
                        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(3, <span class="stringliteral">&quot;This nym MISSING asset account ID when loading nym record.\n&quot;</span>);
                }
                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strNodeName.<a class="code" href="class_o_t_string.html#a03401b39fb66d63696342c4f61ea8bf5">Compare</a>(<span class="stringliteral">&quot;mailMessage&quot;</span>))
                {
                    <a class="code" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> armorMail;
                    <a class="code" href="class_o_t_string.html">OTString</a>     strMessage;

                    xml-&gt;read();

                    <span class="keywordflow">if</span> (irr::io::EXN_TEXT == xml-&gt;getNodeType())
                    {
                        <a class="code" href="class_o_t_string.html">OTString</a> strNodeData = xml-&gt;getNodeData();

                        <span class="comment">// Sometimes the XML reads up the data with a prepended newline.</span>
                        <span class="comment">// This screws up my own objects which expect a consistent in/out</span>
                        <span class="comment">// So I&#39;m checking here for that prepended newline, and removing it.</span>
                        <span class="keywordtype">char</span> cNewline;
                        <span class="keywordflow">if</span> (strNodeData.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>() &amp;&amp; strNodeData.<a class="code" href="class_o_t_string.html#a640392dd17a786dab643dbfc7e5a8672">GetLength</a>() &gt; 2 &amp;&amp; strNodeData.<a class="code" href="class_o_t_string.html#a0b183402da9a9ea6da94b3fcaa8740e8">At</a>(0, cNewline))
                        {
                            <span class="keywordflow">if</span> (<span class="charliteral">&#39;\n&#39;</span> == cNewline)
                                armorMail.<a class="code" href="class_o_t_string.html#aa5db620fe8e60c849585d741975db991">Set</a>(strNodeData.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>() + 1); <span class="comment">// I know all this shit is ugly. I refactored this in OTContract.</span>
                            <span class="keywordflow">else</span>                                        <span class="comment">// unfortunately OTNym is like a &quot;basic type&quot; and isn&#39;t derived from OTContract.</span>
                                armorMail.<a class="code" href="class_o_t_string.html#aa5db620fe8e60c849585d741975db991">Set</a>(strNodeData.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());       <span class="comment">// TODO: OTContract now has STATIC methods for this. (Start using them here...)</span>

                            <span class="keywordflow">if</span> (armorMail.<a class="code" href="class_o_t_string.html#a640392dd17a786dab643dbfc7e5a8672">GetLength</a>() &gt; 2)
                            {
                                armorMail.<a class="code" href="class_o_t_a_s_c_i_i_armor.html#ab39b6cae69c14149716e5ce7a6f0bb0f">GetString</a>(strMessage, <span class="keyword">true</span>); <span class="comment">// linebreaks == true.</span>

                                <span class="keywordflow">if</span> (strMessage.<a class="code" href="class_o_t_string.html#a640392dd17a786dab643dbfc7e5a8672">GetLength</a>() &gt; 2)
                                {
                                    <a class="code" href="class_o_t_message.html">OTMessage</a> * pMessage = <span class="keyword">new</span> <a class="code" href="class_o_t_message.html">OTMessage</a>;

                                    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pMessage);

                                    <span class="keywordflow">if</span> (pMessage-&gt;<a class="code" href="class_o_t_contract.html#a36300e34dcd94ed7006d98b392d46815">LoadContractFromString</a>(strMessage))
                                        m_dequeMail.push_back(pMessage); <span class="comment">// takes ownership</span>
                                    <span class="keywordflow">else</span>
                                        <span class="keyword">delete</span> pMessage;
                                }
                            } <span class="comment">// armorMail</span>
                        } <span class="comment">// strNodeData</span>
                    } <span class="comment">// EXN_TEXT</span>
                }
                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strNodeName.<a class="code" href="class_o_t_string.html#a03401b39fb66d63696342c4f61ea8bf5">Compare</a>(<span class="stringliteral">&quot;outmailMessage&quot;</span>))
                {
                    <a class="code" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> armorMail;
                    <a class="code" href="class_o_t_string.html">OTString</a>     strMessage;

                    xml-&gt;read();

                    <span class="keywordflow">if</span> (irr::io::EXN_TEXT == xml-&gt;getNodeType())
                    {
                        <a class="code" href="class_o_t_string.html">OTString</a> strNodeData = xml-&gt;getNodeData();

                        <span class="comment">// Sometimes the XML reads up the data with a prepended newline.</span>
                        <span class="comment">// This screws up my own objects which expect a consistent in/out</span>
                        <span class="comment">// So I&#39;m checking here for that prepended newline, and removing it.</span>
                        <span class="keywordtype">char</span> cNewline;
                        <span class="keywordflow">if</span> (strNodeData.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>() &amp;&amp; strNodeData.<a class="code" href="class_o_t_string.html#a640392dd17a786dab643dbfc7e5a8672">GetLength</a>() &gt; 2 &amp;&amp; strNodeData.<a class="code" href="class_o_t_string.html#a0b183402da9a9ea6da94b3fcaa8740e8">At</a>(0, cNewline))
                        {
                            <span class="keywordflow">if</span> (<span class="charliteral">&#39;\n&#39;</span> == cNewline)
                                armorMail.<a class="code" href="class_o_t_string.html#aa5db620fe8e60c849585d741975db991">Set</a>(strNodeData.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>() + 1);
                            <span class="keywordflow">else</span>
                                armorMail.<a class="code" href="class_o_t_string.html#aa5db620fe8e60c849585d741975db991">Set</a>(strNodeData.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());

                            <span class="keywordflow">if</span> (armorMail.<a class="code" href="class_o_t_string.html#a640392dd17a786dab643dbfc7e5a8672">GetLength</a>() &gt; 2)
                            {
                                armorMail.<a class="code" href="class_o_t_a_s_c_i_i_armor.html#ab39b6cae69c14149716e5ce7a6f0bb0f">GetString</a>(strMessage, <span class="keyword">true</span>); <span class="comment">// linebreaks == true.</span>

                                <span class="keywordflow">if</span> (strMessage.<a class="code" href="class_o_t_string.html#a640392dd17a786dab643dbfc7e5a8672">GetLength</a>() &gt; 2)
                                {
                                    <a class="code" href="class_o_t_message.html">OTMessage</a> * pMessage = <span class="keyword">new</span> <a class="code" href="class_o_t_message.html">OTMessage</a>;
                                    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pMessage);

                                    <span class="keywordflow">if</span> (pMessage-&gt;<a class="code" href="class_o_t_contract.html#a36300e34dcd94ed7006d98b392d46815">LoadContractFromString</a>(strMessage))
                                        m_dequeOutmail.push_back(pMessage); <span class="comment">// takes ownership</span>
                                    <span class="keywordflow">else</span>
                                        <span class="keyword">delete</span> pMessage;
                                }
                            } <span class="comment">// armorMail</span>
                        } <span class="comment">// strNodeData</span>
                    } <span class="comment">// EXN_TEXT</span>
                } <span class="comment">// outpayments message</span>
                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strNodeName.<a class="code" href="class_o_t_string.html#a03401b39fb66d63696342c4f61ea8bf5">Compare</a>(<span class="stringliteral">&quot;outpaymentsMessage&quot;</span>))
                {
                    <a class="code" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> armorMail;
                    <a class="code" href="class_o_t_string.html">OTString</a>     strMessage;

                    xml-&gt;read();

                    <span class="keywordflow">if</span> (irr::io::EXN_TEXT == xml-&gt;getNodeType())
                    {
                        <a class="code" href="class_o_t_string.html">OTString</a> strNodeData = xml-&gt;getNodeData();

                        <span class="comment">// Sometimes the XML reads up the data with a prepended newline.</span>
                        <span class="comment">// This screws up my own objects which expect a consistent in/out</span>
                        <span class="comment">// So I&#39;m checking here for that prepended newline, and removing it.</span>
                        <span class="keywordtype">char</span> cNewline;
                        <span class="keywordflow">if</span> (strNodeData.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>() &amp;&amp; strNodeData.<a class="code" href="class_o_t_string.html#a640392dd17a786dab643dbfc7e5a8672">GetLength</a>() &gt; 2 &amp;&amp; strNodeData.<a class="code" href="class_o_t_string.html#a0b183402da9a9ea6da94b3fcaa8740e8">At</a>(0, cNewline))
                        {
                            <span class="keywordflow">if</span> (<span class="charliteral">&#39;\n&#39;</span> == cNewline)
                                armorMail.<a class="code" href="class_o_t_string.html#aa5db620fe8e60c849585d741975db991">Set</a>(strNodeData.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>() + 1);
                            <span class="keywordflow">else</span>
                                armorMail.<a class="code" href="class_o_t_string.html#aa5db620fe8e60c849585d741975db991">Set</a>(strNodeData.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());

                            <span class="keywordflow">if</span> (armorMail.<a class="code" href="class_o_t_string.html#a640392dd17a786dab643dbfc7e5a8672">GetLength</a>() &gt; 2)
                            {
                                armorMail.<a class="code" href="class_o_t_a_s_c_i_i_armor.html#ab39b6cae69c14149716e5ce7a6f0bb0f">GetString</a>(strMessage, <span class="keyword">true</span>); <span class="comment">// linebreaks == true.</span>

                                <span class="keywordflow">if</span> (strMessage.<a class="code" href="class_o_t_string.html#a640392dd17a786dab643dbfc7e5a8672">GetLength</a>() &gt; 2)
                                {
                                    <a class="code" href="class_o_t_message.html">OTMessage</a> * pMessage = <span class="keyword">new</span> <a class="code" href="class_o_t_message.html">OTMessage</a>;
                                    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pMessage);

                                    <span class="keywordflow">if</span> (pMessage-&gt;<a class="code" href="class_o_t_contract.html#a36300e34dcd94ed7006d98b392d46815">LoadContractFromString</a>(strMessage))
                                        m_dequeOutpayments.push_back(pMessage); <span class="comment">// takes ownership</span>
                                    <span class="keywordflow">else</span>
                                        <span class="keyword">delete</span> pMessage;
                                }
                            }
                        } <span class="comment">// strNodeData</span>
                    } <span class="comment">// EXN_TEXT</span>
                } <span class="comment">// outpayments message</span>
                <span class="keywordflow">else</span>
                {
                    <span class="comment">// unknown element type</span>
                    <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;Unknown element type in %s: %s\n&quot;</span>, __FUNCTION__, xml-&gt;getNodeName());
                    bSuccess = <span class="keyword">false</span>;
                }
                <span class="keywordflow">break</span>;
            }
            <span class="keywordflow">default</span>:
            {
                <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(5, <span class="stringliteral">&quot;Unknown XML type in %s: %s\n&quot;</span>, __FUNCTION__, xml-&gt;getNodeName());
                <span class="keywordflow">break</span>;
            }
        } <span class="comment">// switch</span>
    } <span class="comment">// while</span>

    <span class="keywordflow">return</span> bSuccess;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a7f46f0911db1623fe966706a430cf0b7"></a><!-- doxytag: member="OTPseudonym::LoadNymfile" ref="a7f46f0911db1623fe966706a430cf0b7" args="(const char *szFilename=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_pseudonym.html#a7f46f0911db1623fe966706a430cf0b7">OTPseudonym::LoadNymfile</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>szFilename</em> = <code>NULL</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l05546">5546</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_o_t_string.html">OTString</a> strID;
    <a class="code" href="class_o_t_pseudonym.html#a1775c7aedd0dd25b2faf3f78dcccabe7">GetIdentifier</a>(strID);

    <span class="keyword">const</span> <span class="keywordtype">char</span> * szFoldername = <a class="code" href="class_o_t_folders.html#a3bcdf222bf351ad8b5cfb37e9b8e5143">OTFolders::Nym</a>().<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();
    <span class="keyword">const</span> <span class="keywordtype">char</span> * szTheFilename = strID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();

    <span class="comment">// If no filename was passed in (user might have designated one) then we create</span>
    <span class="comment">// the filename by appending the Nym&#39;s ID to the path.</span>
    <span class="keywordflow">if</span> (NULL == szFilename)
    {
        m_strNymfile = szTheFilename;
    }
    <span class="keywordflow">else</span>
    {
        m_strNymfile = szFilename;
    }
    <span class="comment">// --------------------------------------------------------------------</span>
    <span class="keywordflow">if</span> (<span class="keyword">false</span> == <a class="code" href="namespace_o_t_d_b.html#a73e39a590dfb64f63065821c6bbcd4c6">OTDB::Exists</a>(szFoldername, m_strNymfile.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>()))
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: File does not exist: %s%s%s\n&quot;</span>, __FUNCTION__,
                      szFoldername, <a class="code" href="class_o_t_log.html#a42d3c91ff84ecae0690e34efb4619a77">OTLog::PathSeparator</a>(), m_strNymfile.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// --------------------------------------------------------------------</span>
    <span class="comment">//</span>
    std::string strFileContents(<a class="code" href="namespace_o_t_d_b.html#a921d6f538de00f4e4297c25cf679f00a">OTDB::QueryPlainString</a>(szFoldername, m_strNymfile.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>())); <span class="comment">// &lt;=== LOADING FROM DATA STORE.</span>

    <span class="keywordflow">if</span> (strFileContents.length() &lt; 2)
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error reading file: %s%s%s\n&quot;</span>, __FUNCTION__,
                      szFoldername, <a class="code" href="class_o_t_log.html#a42d3c91ff84ecae0690e34efb4619a77">OTLog::PathSeparator</a>(), m_strNymfile.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// --------------------------------------------------------------------</span>
    <a class="code" href="class_o_t_string.html">OTString</a> strRawFile = strFileContents.c_str();

    <span class="keywordflow">if</span> (strRawFile.<a class="code" href="class_o_t_string.html#a640392dd17a786dab643dbfc7e5a8672">GetLength</a>())
        <span class="keywordflow">return</span> <a class="code" href="class_o_t_pseudonym.html#a7992e8fbf785eeb2d5158cdf966c7a1b">LoadFromString</a>(strRawFile);

    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac1e2478e3a8604944d2d826df8afedd6"></a><!-- doxytag: member="OTPseudonym::LoadPrivateNym" ref="ac1e2478e3a8604944d2d826df8afedd6" args="(const OTIdentifier &amp;NYM_ID, const bool bChecking=false, OTString *pstrName=NULL, const char *szFuncName=NULL, OTPasswordData *pPWData=NULL, OTPassword *pImportPassword=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> * <a class="el" href="class_o_t_pseudonym.html#ac1e2478e3a8604944d2d826df8afedd6">OTPseudonym::LoadPrivateNym</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;&#160;</td>
          <td class="paramname"><em>NYM_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const bool&#160;</td>
          <td class="paramname"><em>bChecking</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_string.html">OTString</a> *&#160;</td>
          <td class="paramname"><em>pstrName</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>szFuncName</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_password_data.html">OTPasswordData</a> *&#160;</td>
          <td class="paramname"><em>pPWData</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_password.html">OTPassword</a> *&#160;</td>
          <td class="paramname"><em>pImportPassword</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l00246">246</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keyword">const</span> <span class="keywordtype">char</span> * szFunc = (NULL != szFuncName) ? szFuncName : <span class="stringliteral">&quot;OTPseudonym::LoadPrivateNym&quot;</span>;

    <span class="keywordflow">if</span> (NYM_ID.<a class="code" href="class_o_t_data.html#a947528765516223eb03bee7745eb8c07">IsEmpty</a>()) <span class="keywordflow">return</span> NULL;
    <span class="comment">// ------------------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a>  strNymID(NYM_ID);
    <span class="comment">// ------------------------------------------</span>
    <span class="comment">// If name is empty, construct one way,</span>
    <span class="comment">// else construct a different way.</span>
    <span class="comment">//</span>
    <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pNym = ((NULL == pstrName) || !pstrName-&gt;<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>()) ?
        (<span class="keyword">new</span> <a class="code" href="class_o_t_pseudonym.html#a0da04833e553c34be87a89fb22dd8a1c">OTPseudonym</a>(NYM_ID)):
        (<span class="keyword">new</span> <a class="code" href="class_o_t_pseudonym.html#a0da04833e553c34be87a89fb22dd8a1c">OTPseudonym</a>(*pstrName, strNymID, strNymID));
    <a class="code" href="_o_t_assert_8hpp.html#a033b133f48e61f2b227c52ad2be0c882">OT_ASSERT_MSG</a>(NULL != pNym, <span class="stringliteral">&quot;OTPseudonym::LoadPrivateNym: Error allocating memory.\n&quot;</span>);
    <span class="comment">// ---------------------------------</span>
    <a class="code" href="class_o_t_password_data.html">OTPasswordData</a> thePWData(<a class="code" href="_o_t_callback_8hpp.html#aec99f1909896090ab9b64ce848f50c6a">OT_PW_DISPLAY</a>);
    <span class="keywordflow">if</span> (NULL == pPWData)
        pPWData = &amp;thePWData;
    <span class="comment">// ----------------------------------</span>
    <span class="keywordtype">bool</span> bLoadedKey = pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#aa5a79982c08a8db1c961d05fd449b585">Loadx509CertAndPrivateKey</a>(bChecking, pPWData, pImportPassword); <span class="comment">// old style. (Deprecated.) Eventually remove this.</span>
    <span class="comment">//***  Right now Loadx509CertAndPrivateKey calls LoadCredentials at its top, which is what we should be calling here. But that function handles old-style Nyms too, so we keep it around until we lose those.  // &lt;====================</span>
    <span class="comment">// ---------------------------------</span>
    <span class="comment">// Error loading x509CertAndPrivateKey.</span>
    <span class="keywordflow">if</span> (<span class="keyword">false</span> == bLoadedKey)
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(bChecking ? 1 : 0,<span class="stringliteral">&quot;%s: %s: (%s: is %s).  Unable to load credentials, &quot;</span>
                       <span class="stringliteral">&quot;cert and private key for: %s (maybe this nym doesn&#39;t exist?)\n&quot;</span>,
                       __FUNCTION__, szFunc, <span class="stringliteral">&quot;bChecking&quot;</span>, bChecking ? <span class="stringliteral">&quot;true&quot;</span> : <span class="stringliteral">&quot;false&quot;</span>, strNymID.Get());
    <span class="comment">// success loading x509CertAndPrivateKey,</span>
    <span class="comment">// failure verifying pseudonym public key.</span>
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">false</span> == pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#aae8a707c7799efb6944d485be31a7c3e">VerifyPseudonym</a>())                              <span class="comment">// &lt;====================</span>
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s %s: Failure verifying Nym public key: %s\n&quot;</span>,
                      __FUNCTION__, szFunc, strNymID.Get());
    <span class="comment">// success verifying pseudonym public key.</span>
    <span class="comment">// failure loading signed nymfile.</span>
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">false</span> == pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#ad24db39caa89399f659f414b19903f90">LoadSignedNymfile</a>(*pNym)) <span class="comment">// Unlike with public key, with private key we DO expect nymfile to be here.</span>
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s %s: Failure calling LoadSignedNymfile: %s\n&quot;</span>,
                      __FUNCTION__, szFunc, strNymID.Get());
    <span class="keywordflow">else</span> <span class="comment">// ultimate success.</span>
        <span class="keywordflow">return</span> pNym;
    <span class="comment">// ---------------------------------</span>
    <span class="keyword">delete</span> pNym;
    pNym = NULL;
    <span class="comment">// ----------</span>
    <span class="keywordflow">return</span> NULL;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aeb1c675ec72d6450e5c151d1f3eb95bf"></a><!-- doxytag: member="OTPseudonym::LoadPublicKey" ref="aeb1c675ec72d6450e5c151d1f3eb95bf" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_pseudonym.html#aeb1c675ec72d6450e5c151d1f3eb95bf">OTPseudonym::LoadPublicKey</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l03397">3397</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != m_pkeypair);
    <span class="comment">// ----------------------------</span>
    <span class="comment">// Here we try to load credentials first (the new system) and if it&#39;s successful, we</span>
    <span class="comment">// use that to set the public key from the credential, and then return. Otherwise,</span>
    <span class="comment">// we run the old code.</span>
    <span class="comment">//</span>
    <span class="keywordflow">if</span> (this-&gt;<a class="code" href="class_o_t_pseudonym.html#af864daa3291f61d81c1b61ad90efe52d">LoadCredentials</a>() &amp;&amp; (this-&gt;<a class="code" href="class_o_t_pseudonym.html#a6ae670b44bc6728da06141c885e6c7e9">GetMasterCredentialCount</a>() &gt; 0)) <span class="comment">// New style!</span>
    {
<span class="comment">//        mapOfCredentials::iterator it = m_mapCredentials.begin();</span>
<span class="comment">//        OT_ASSERT(m_mapCredentials.end() != it);</span>
<span class="comment">//        OTCredential * pCredential = (*it).second;</span>
<span class="comment">//        OT_ASSERT(NULL != pCredential);</span>
<span class="comment">//        // -----------------------------</span>
<span class="comment">//        OTString strSigningKey;</span>
<span class="comment">//</span>
<span class="comment">//        if (const_cast&lt;OTKeypair &amp;&gt;(pCredential-&gt;GetSignKeypair(&amp;m_listRevokedIDs)).GetPublicKey(strSigningKey, false)) //bEscaped</span>
<span class="comment">//            return m_pkeypair-&gt;SetPublicKey(strSigningKey, false); // bEscaped</span>
<span class="comment">//        else</span>
<span class="comment">//            OTLog::vError(&quot;%s: Failed in call to pCredential-&gt;GetPublicSignKey().GetPublicKey()\n&quot;, __FUNCTION__);</span>
        <span class="comment">// -----------------------------</span>
        <span class="keywordflow">return</span> <span class="keyword">true</span>;

        <span class="comment">// NOTE: LoadPublicKey (this function) calls LoadCredentials (above.) On the server side, these are</span>
        <span class="comment">// public credentials which do not contain keys, per se. Instead, it contains a single variable which in</span>
        <span class="comment">// turn contains the master-signed version of itself which then contains the public keys.</span>
        <span class="comment">//</span>
        <span class="comment">// That means when the credentials are first loaded, there are no public keys loaded! Each subcredential</span>
        <span class="comment">// is signed by itself, and contains a master-signed version of itself that&#39;s signed by the master. It&#39;s</span>
        <span class="comment">// only AFTER loading, in verification (OTSubcredential::VerifyInternally) when we verify the master signature</span>
        <span class="comment">// on the master-signed version, and if it all checks out, THEN we copy the public keys from the master-signed</span>
        <span class="comment">// version up into the actual subcredential. UNTIL WE DO THAT, the actual subcredential HAS NO PUBLIC KEYS IN IT.</span>
        <span class="comment">//</span>
        <span class="comment">// That&#39;s why the above code was having problems -- we are trying to &quot;GetPublicKey&quot; when there can be no</span>
        <span class="comment">// possibility that the public key will be there.</span>
        <span class="comment">// For now I&#39;m going to NOT set m_pkeypair, since the public key isn&#39;t available to set onto it yet.</span>
        <span class="comment">// We want to phase out m_pkeypair anyway, but I just hope this doesn&#39;t cause problems where it was expected</span>
        <span class="comment">// in the future, where I still need to somehow make sure it&#39;s set. (AFTER verification, apparently.)</span>
        <span class="comment">//</span>
        <span class="comment">// Notice however, that this only happens in cases where the credentials were actually available, so maybe it</span>
        <span class="comment">// will just work, since the below block is where we handle cases where the credentials WEREN&#39;T available, so</span>
        <span class="comment">// we load the old key the old way. (Meaning we definitely know that those &quot;old cases&quot; will continue to work.)</span>
        <span class="comment">// Any potential problems will have to be in cases where credentials ARE available, but the code was nonetheless</span>
        <span class="comment">// still expecting things to work the old way -- and these are precisely the sorts of cases I probably want to</span>
        <span class="comment">// uncover, so I can convert things over...</span>
    }
    <span class="comment">// ----------------------------</span>
    <span class="comment">// OLD STYLE (below.) Deprecated!</span>


    <a class="code" href="class_o_t_string.html">OTString</a> strID;

    <span class="keywordflow">if</span> (<span class="keyword">false</span> == this-&gt;<a class="code" href="class_o_t_pseudonym.html#a7e10c2692a4bd722ba1f3183e5923b51">Server_PubKeyExists</a>(&amp;strID)) <span class="comment">// strID will contain *this nymID after this call.</span>
    {
        <span class="comment">// Code will call this in order to see if there is a PublicKey to be loaded.</span>
        <span class="comment">// Therefore I don&#39;t want to log a big error here since we expect that sometimes</span>
        <span class="comment">// the key won&#39;t be there.</span>
        <span class="comment">// Therefore I log at level 4, the same level as I log the successful outcome.</span>
        <span class="comment">//</span>
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(4, <span class="stringliteral">&quot;%s: Failed load: &quot;</span>
                      <span class="stringliteral">&quot;Apparently this Nym doesn&#39;t exist. (Returning.)\n&quot;</span>, __FUNCTION__);
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// --------------------------------------------------------------------</span>
    <span class="keyword">const</span> <span class="keywordtype">char</span> * szFoldername   = <a class="code" href="class_o_t_folders.html#a691fb355263301e19f8239915cddf3f2">OTFolders::Pubkey</a>().<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();
    <span class="keyword">const</span> <span class="keywordtype">char</span> * szFilename     = strID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();
    <span class="comment">// --------------------------------------------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strFoldername(szFoldername), strFilename(szFilename);

    <span class="comment">// This loads up the ascii-armored Public Key.</span>
    <span class="comment">// On the client side, the entire x509 is stored in the cert folder.</span>
    <span class="comment">// (With other Nym&#39;s pubkeys stored in pubkey folder.)</span>
    <span class="comment">// On the server side, it&#39;s just the public key and stored here in pubkey folder.</span>
    <span class="comment">//</span>
    <span class="keyword">const</span> <span class="keywordtype">bool</span> bCanLoadKeyFile = <a class="code" href="namespace_o_t_d_b.html#a73e39a590dfb64f63065821c6bbcd4c6">OTDB::Exists</a>(szFoldername, szFilename);

    <span class="keywordflow">if</span> (bCanLoadKeyFile)
    {
        <span class="keywordflow">if</span> (!m_pkeypair-&gt;<a class="code" href="class_o_t_keypair.html#ad60512b79c736b2b84a40a87b5828e56">LoadPublicKey</a>(strFoldername, strFilename))
        {
            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Although the ascii-armored file (%s%s%s) was read, LoadPublicKey &quot;</span>
                          <span class="stringliteral">&quot;returned false.\n&quot;</span>, __FUNCTION__, szFoldername, <a class="code" href="class_o_t_log.html#a42d3c91ff84ecae0690e34efb4619a77">OTLog::PathSeparator</a>(), szFilename);
            <span class="keywordflow">return</span> <span class="keyword">false</span>;
        }
        <span class="keywordflow">else</span>
        {
            <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(4, <span class="stringliteral">&quot;%s: Successfully loaded public key from file: %s%s%s\n&quot;</span>,
                           __FUNCTION__, szFoldername, <a class="code" href="class_o_t_log.html#a42d3c91ff84ecae0690e34efb4619a77">OTLog::PathSeparator</a>(), szFilename);
        }
        <span class="keywordflow">return</span> <span class="keyword">true</span>;
    }

    <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(2, <span class="stringliteral">&quot;%s: Failure.\n&quot;</span>, __FUNCTION__);
    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aef446a600137c016e2db08d89304ff93"></a><!-- doxytag: member="OTPseudonym::LoadPublicNym" ref="aef446a600137c016e2db08d89304ff93" args="(const OTIdentifier &amp;NYM_ID, OTString *pstrName=NULL, const char *szFuncName=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> * <a class="el" href="class_o_t_pseudonym.html#aef446a600137c016e2db08d89304ff93">OTPseudonym::LoadPublicNym</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;&#160;</td>
          <td class="paramname"><em>NYM_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_string.html">OTString</a> *&#160;</td>
          <td class="paramname"><em>pstrName</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>szFuncName</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l00155">155</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keyword">const</span> <span class="keywordtype">char</span> * szFunc = (NULL != szFuncName) ? szFuncName : <span class="stringliteral">&quot;OTPseudonym::LoadPublicNym&quot;</span>;
    <span class="comment">// ------------------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a>  strNymID(NYM_ID);
    <span class="comment">// ------------------------------------------</span>
    <span class="comment">// If name is empty, construct one way,</span>
    <span class="comment">// else construct a different way.</span>
    <span class="comment">//</span>
    <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pNym = ((NULL == pstrName) || !pstrName-&gt;<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>()) ?
        (<span class="keyword">new</span> <a class="code" href="class_o_t_pseudonym.html#a0da04833e553c34be87a89fb22dd8a1c">OTPseudonym</a>(NYM_ID)):
        (<span class="keyword">new</span> <a class="code" href="class_o_t_pseudonym.html#a0da04833e553c34be87a89fb22dd8a1c">OTPseudonym</a>(*pstrName, strNymID, strNymID));
    <a class="code" href="_o_t_assert_8hpp.html#a033b133f48e61f2b227c52ad2be0c882">OT_ASSERT_MSG</a>(NULL != pNym, <span class="stringliteral">&quot;OTPseudonym::LoadPublicNym: Error allocating memory.\n&quot;</span>);
    <span class="comment">// ---------------------------</span>
    <span class="keywordtype">bool</span> bLoadedKey = pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#aeb1c675ec72d6450e5c151d1f3eb95bf">LoadPublicKey</a>(); <span class="comment">// Deprecated. Only used for old-style Nyms. Eventually, remove this. Currently LoadPublicKey calls LoadCredentials, which is what we should be calling, once the nym&#39;s own keypair is eliminated.</span>
    <span class="comment">// ---------------------------</span>
    <span class="comment">// First load the public key</span>
    <span class="keywordflow">if</span> (<span class="keyword">false</span> == bLoadedKey)
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(1, <span class="stringliteral">&quot;%s: %s: Unable to find nym: %s\n&quot;</span>, __FUNCTION__, szFunc, strNymID.Get());
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">false</span> == pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#aae8a707c7799efb6944d485be31a7c3e">VerifyPseudonym</a>())
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: %s: Security: Failure verifying Nym: %s\n&quot;</span>, __FUNCTION__, szFunc, strNymID.Get());
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">false</span> == pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#ad24db39caa89399f659f414b19903f90">LoadSignedNymfile</a>(*pNym))
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(4, <span class="stringliteral">&quot;OTPseudonym::LoadPublicNym %s: Usually normal: There&#39;s no Nymfile (%s), though there IS a public &quot;</span>
                       <span class="stringliteral">&quot;key, which checks out. It&#39;s probably just someone else&#39;s Nym. (So I&#39;m still returning this Nym to &quot;</span>
                       <span class="stringliteral">&quot;the caller so he can still use the public key.)\n&quot;</span>, szFunc, strNymID.Get());
        <span class="keywordflow">return</span> pNym;
    }
    <span class="keywordflow">else</span> <span class="comment">// success</span>
        <span class="keywordflow">return</span> pNym;
    <span class="comment">// -------------------</span>
    <span class="keyword">delete</span> pNym; pNym = NULL;
    <span class="comment">// -------------------</span>
    <span class="keywordflow">return</span> NULL;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad24db39caa89399f659f414b19903f90"></a><!-- doxytag: member="OTPseudonym::LoadSignedNymfile" ref="ad24db39caa89399f659f414b19903f90" args="(OTPseudonym &amp;SIGNER_NYM)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_pseudonym.html#ad24db39caa89399f659f414b19903f90">OTPseudonym::LoadSignedNymfile</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;&#160;</td>
          <td class="paramname"><em>SIGNER_NYM</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l05310">5310</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// Get the Nym&#39;s ID in string form</span>
    <a class="code" href="class_o_t_string.html">OTString</a> nymID;
    this-&gt;<a class="code" href="class_o_t_pseudonym.html#a1775c7aedd0dd25b2faf3f78dcccabe7">GetIdentifier</a>(nymID);

    <span class="comment">// Create an OTSignedFile object, giving it the filename (the ID) and the local directory (&quot;nyms&quot;)</span>
    <a class="code" href="class_o_t_signed_file.html">OTSignedFile</a> theNymfile(<a class="code" href="class_o_t_folders.html#a3bcdf222bf351ad8b5cfb37e9b8e5143">OTFolders::Nym</a>(), nymID);

    <span class="keywordflow">if</span> (<span class="keyword">false</span> == theNymfile.LoadFile())
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(1, <span class="stringliteral">&quot;%s: Failed loading a signed nymfile: %s\n\n&quot;</span>,
                       __FUNCTION__, nymID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
    }
    <span class="comment">// We verify:</span>
    <span class="comment">//</span>
    <span class="comment">// 1. That the file even exists and loads.</span>
    <span class="comment">// 2. That the local subdir and filename match the versions inside the file.</span>
    <span class="comment">// 3. That the signature matches for the signer nym who was passed in.</span>
    <span class="comment">//</span>
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">false</span> == theNymfile.VerifyFile())
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Failed verifying nymfile: %s\n\n&quot;</span>,
                      __FUNCTION__, nymID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
    }
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">false</span> == theNymfile.VerifySignature(SIGNER_NYM))
    {
        <a class="code" href="class_o_t_string.html">OTString</a> strSignerNymID;
        SIGNER_NYM.<a class="code" href="class_o_t_pseudonym.html#a1775c7aedd0dd25b2faf3f78dcccabe7">GetIdentifier</a>(strSignerNymID);
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Failed verifying signature on nymfile: %s\n Signer Nym ID: %s\n&quot;</span>,
                      __FUNCTION__, nymID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(), strSignerNymID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
    }
    <span class="comment">// NOTE: Comment out the above two blocks if you want to load a Nym without having</span>
    <span class="comment">// to verify his information. (For development reasons. Never do that normally.)</span>
    <span class="comment">// -----------------------------------</span>
    <span class="keywordflow">else</span>
    {
        <a class="code" href="class_o_t_log.html#a1f7549d776ee919dcb6517f611ded015">OTLog::Output</a>(2, <span class="stringliteral">&quot;Loaded and verified signed nymfile. Reading from string...\n&quot;</span>);

        <span class="keywordflow">if</span> (theNymfile.GetFilePayload().GetLength() &gt; 0)
            <span class="keywordflow">return</span> this-&gt;<a class="code" href="class_o_t_pseudonym.html#a7992e8fbf785eeb2d5158cdf966c7a1b">LoadFromString</a>(theNymfile.GetFilePayload()); <span class="comment">// &lt;====== Success...</span>
        <span class="keywordflow">else</span>
        {
            <span class="keyword">const</span> int64_t lLength = <span class="keyword">static_cast&lt;</span>int64_t<span class="keyword">&gt;</span> (theNymfile.GetFilePayload().GetLength());

            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Bad length (%lld) while loading nymfile: %s\n&quot;</span>,
                          __FUNCTION__, lLength, nymID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
        }
    }
    <span class="comment">// -----------------------------------</span>
    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa5a79982c08a8db1c961d05fd449b585"></a><!-- doxytag: member="OTPseudonym::Loadx509CertAndPrivateKey" ref="aa5a79982c08a8db1c961d05fd449b585" args="(const bool bChecking=false, OTPasswordData *pPWData=NULL, OTPassword *pImportPassword=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_pseudonym.html#aa5a79982c08a8db1c961d05fd449b585">OTPseudonym::Loadx509CertAndPrivateKey</a> </td>
          <td>(</td>
          <td class="paramtype">const bool&#160;</td>
          <td class="paramname"><em>bChecking</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_password_data.html">OTPasswordData</a> *&#160;</td>
          <td class="paramname"><em>pPWData</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_password.html">OTPassword</a> *&#160;</td>
          <td class="paramname"><em>pImportPassword</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l05613">5613</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != m_pkeypair);
    <span class="comment">// ----------------------------</span>
    <a class="code" href="class_o_t_password_data.html">OTPasswordData</a> thePWData( <a class="code" href="_o_t_callback_8hpp.html#aec99f1909896090ab9b64ce848f50c6a">OT_PW_DISPLAY</a> );
    <span class="keywordflow">if</span> (NULL == pPWData)
        pPWData = &amp;thePWData;
    <a class="code" href="class_o_t_string.html">OTString</a> strReason(pPWData-&gt;<a class="code" href="class_o_t_password_data.html#afe04404b46712a5918790c3b4af7dda2">GetDisplayString</a>());

    <span class="comment">// Here we try to load credentials first (the new system) and if it&#39;s successful, we</span>
    <span class="comment">// use that to set the private/public keypair from the credential, and then return.</span>
    <span class="comment">// Otherwise, we run the old code.</span>
    <span class="comment">//</span>
    <span class="keywordflow">if</span> ( this-&gt;<a class="code" href="class_o_t_pseudonym.html#af864daa3291f61d81c1b61ad90efe52d">LoadCredentials</a>(<span class="keyword">true</span>, pPWData, pImportPassword) &amp;&amp;
        (this-&gt;<a class="code" href="class_o_t_pseudonym.html#a6ae670b44bc6728da06141c885e6c7e9">GetMasterCredentialCount</a>() &gt; 0)) <span class="comment">// New style!</span>
    {
<span class="comment">//      return true;</span>
        mapOfCredentials::iterator it = m_mapCredentials.begin();
        <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(m_mapCredentials.end() != it);
        <a class="code" href="class_o_t_credential.html">OTCredential</a> * pCredential = (*it).second;
        <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pCredential);
        <span class="comment">// -----------------------------</span>
        <a class="code" href="class_o_t_string.html">OTString</a> strPubAndPrivCert;

        <span class="keywordflow">if</span> (const_cast&lt;OTKeypair &amp;&gt;(pCredential-&gt;GetSignKeypair(&amp;m_listRevokedIDs)).SaveCertAndPrivateKeyToString(strPubAndPrivCert,
                                                                                                                  &amp;strReason,
                                                                                                                  pImportPassword))
        {
            <span class="keyword">const</span> <span class="keywordtype">bool</span> bReturnValue = m_pkeypair-&gt;<a class="code" href="class_o_t_keypair.html#a0b684d7b641792b07e5b75c3c482ca09">LoadCertAndPrivateKeyFromString</a>(strPubAndPrivCert, &amp;strReason, pImportPassword);

            <span class="keywordflow">if</span> (!bReturnValue)
                <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Failed in call to m_pkeypair-&gt;SetPrivateKey.\n&quot;</span>, __FUNCTION__);

            <span class="keywordflow">return</span> bReturnValue;
        }
        <span class="comment">// -----------------------------</span>
    }
    <span class="comment">// ---------------------------------</span>
    <span class="comment">// OLD STYLE (below) Deprecated.</span>


    <a class="code" href="class_o_t_string.html">OTString</a>     strID(m_nymID);
    <span class="comment">// --------------------------------------------------------------------</span>
    std::string  strFoldername  = <a class="code" href="class_o_t_folders.html#a340bfd0a9302aa1f6436ebc365a391d7">OTFolders::Cert</a>().<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();
    std::string  strFilename    = strID.Get();
    <span class="comment">// --------------------------------------------------------------------</span>
    <span class="keywordflow">if</span> (strFoldername.empty()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error: strFoldername is empty!&quot;</span>,__FUNCTION__); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="keywordflow">if</span> (strFilename.empty())   { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error: strFilename is empty!&quot;</span>,  __FUNCTION__); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    <span class="comment">// --------------------------------------------------------------------</span>
    <span class="keyword">const</span> <span class="keywordtype">bool</span> bExists = <a class="code" href="namespace_o_t_d_b.html#a73e39a590dfb64f63065821c6bbcd4c6">OTDB::Exists</a>(strFoldername, strFilename);

    <span class="keywordflow">if</span> (!bExists)
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(bChecking ? 1 : 0,<span class="stringliteral">&quot;%s: (%s: is %s).  File does not exist: %s in: %s\n&quot;</span>,
            __FUNCTION__, <span class="stringliteral">&quot;bChecking&quot;</span>, bChecking ? <span class="stringliteral">&quot;true&quot;</span> : <span class="stringliteral">&quot;false&quot;</span>, strFoldername.c_str(), strFilename.c_str());

        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// --------------------------------------------------------------------</span>
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (m_pkeypair-&gt;<a class="code" href="class_o_t_keypair.html#a05bdbf56aa6c0c58331cb79a7dd59ca4">LoadBothKeysFromCertFile</a>(<a class="code" href="class_o_t_folders.html#a340bfd0a9302aa1f6436ebc365a391d7">OTFolders::Cert</a>(), <span class="comment">// foldername</span>
                                                  strID,             <span class="comment">// filename</span>
                                                  &amp;strReason,
                                                  pImportPassword))
        <span class="keywordflow">return</span> <span class="keyword">true</span>; <span class="comment">// LoadBothKeysFromCertFile has plenty of logs, no need for more at this time here.</span>
    <span class="comment">// ---------------------------------</span>
    <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Failure, filename: %s%s%s\n&quot;</span>, __FUNCTION__,
                  strFoldername.c_str(), <a class="code" href="class_o_t_log.html#a42d3c91ff84ecae0690e34efb4619a77">OTLog::PathSeparator</a>(), strFilename.c_str());
    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa7e06445fd850c8a13cabf2283ca4f01"></a><!-- doxytag: member="OTPseudonym::Loadx509CertAndPrivateKeyFromString" ref="aa7e06445fd850c8a13cabf2283ca4f01" args="(const OTString &amp;strInput, OTPasswordData *pPWData=NULL, OTPassword *pImportPassword=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_pseudonym.html#aa7e06445fd850c8a13cabf2283ca4f01">OTPseudonym::Loadx509CertAndPrivateKeyFromString</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strInput</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_password_data.html">OTPasswordData</a> *&#160;</td>
          <td class="paramname"><em>pPWData</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_password.html">OTPassword</a> *&#160;</td>
          <td class="paramname"><em>pImportPassword</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l05591">5591</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != m_pkeypair);
    <span class="comment">// --------------------------------------------------------------------</span>
    <span class="keywordflow">if</span> (!strInput.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>())
    {
        <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strID(m_nymID);
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: strInput does not exist. (Returning false.) ID currently set to: %s\n&quot;</span>,
                      __FUNCTION__, strID.Get());
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// --------------------------------------------------------------------</span>
    <a class="code" href="class_o_t_string.html">OTString</a> strReason(NULL == pPWData ? <a class="code" href="_o_t_callback_8hpp.html#aec99f1909896090ab9b64ce848f50c6a">OT_PW_DISPLAY</a> : pPWData-&gt;<a class="code" href="class_o_t_password_data.html#afe04404b46712a5918790c3b4af7dda2">GetDisplayString</a>());

    <span class="keywordflow">return</span> m_pkeypair-&gt;<a class="code" href="class_o_t_keypair.html#a0b684d7b641792b07e5b75c3c482ca09">LoadCertAndPrivateKeyFromString</a>(strInput, &amp;strReason, pImportPassword);
}
</pre></div>
</div>
</div>
<a class="anchor" id="af9711e021a13ee987eb71bd598d5287a"></a><!-- doxytag: member="OTPseudonym::MarkAsUndeleted" ref="af9711e021a13ee987eb71bd598d5287a" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_pseudonym.html#af9711e021a13ee987eb71bd598d5287a">OTPseudonym::MarkAsUndeleted</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8hpp_source.html#l00333">333</a> of file <a class="el" href="_o_t_pseudonym_8hpp_source.html">OTPseudonym.hpp</a>.</p>
<div class="fragment"><pre class="fragment">{ m_bMarkForDeletion = <span class="keyword">false</span>; }
</pre></div>
</div>
</div>
<a class="anchor" id="a3b96d3b8d3d2836b8a83132eb133895c"></a><!-- doxytag: member="OTPseudonym::MarkForDeletion" ref="a3b96d3b8d3d2836b8a83132eb133895c" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_pseudonym.html#a3b96d3b8d3d2836b8a83132eb133895c">OTPseudonym::MarkForDeletion</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8hpp_source.html#l00331">331</a> of file <a class="el" href="_o_t_pseudonym_8hpp_source.html">OTPseudonym.hpp</a>.</p>
<div class="fragment"><pre class="fragment">{ m_bMarkForDeletion = <span class="keyword">true</span>; }
</pre></div>
</div>
</div>
<a class="anchor" id="a853bfd2bc9909356bda7698423053076"></a><!-- doxytag: member="OTPseudonym::OnUpdateRequestNum" ref="a853bfd2bc9909356bda7698423053076" args="(OTPseudonym &amp;SIGNER_NYM, const OTString &amp;strServerID, int64_t lNewRequestNumber)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_pseudonym.html#a853bfd2bc9909356bda7698423053076">OTPseudonym::OnUpdateRequestNum</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;&#160;</td>
          <td class="paramname"><em>SIGNER_NYM</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strServerID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>lNewRequestNumber</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l03043">3043</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">bool</span> bSuccess = <span class="keyword">false</span>;

    <span class="comment">// The Pseudonym has a map of the request numbers for different servers.</span>
    <span class="comment">// For Server Bob, with this Pseudonym, I might be on number 34.</span>
    <span class="comment">// For but Server Alice, I might be on number 59.</span>
    <span class="comment">//</span>
    <span class="comment">// So let&#39;s loop through all the numbers I have, and if the server ID on the map</span>
    <span class="comment">// matches the Server ID that was passed in, then send out the request number and</span>
    <span class="comment">// increment it so it will be ready for the next request.</span>
    <span class="comment">//</span>
    <span class="comment">// Make sure to save the Pseudonym so the new request number is saved.</span>
    std::string strID   = strServerID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();

    <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_pseudonym_8hpp.html#a973d5530da5375de1f5e0f75c7780869">mapOfRequestNums</a>, m_mapRequestNum)
    {
        <span class="keywordflow">if</span> ( strID == it-&gt;first )
        {
            <span class="comment">// We found it!</span>
            <span class="comment">// Presumably we ONLY found it because this Nym has been properly loaded first.</span>
            <span class="comment">// Good job! Otherwise, the list would have been empty even though the request number</span>
            <span class="comment">// was sitting in the file.</span>

            <span class="comment">// The call has succeeded</span>
            bSuccess = <span class="keyword">true</span>;

            <span class="comment">// Grab a copy of the old request number</span>
            int64_t lOldRequestNumber = m_mapRequestNum[it-&gt;first];

            <span class="comment">// Set the new request number to the old one plus one.</span>
            m_mapRequestNum[it-&gt;first] = lNewRequestNumber;

            <span class="comment">// Now we can log BOTH, before and after...</span>
            <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(4, <span class="stringliteral">&quot;Updated Request Number from %lld to %lld. Saving...\n&quot;</span>,
                    lOldRequestNumber, m_mapRequestNum[it-&gt;first]);
            <span class="keywordflow">break</span>;
        }
    }

    <span class="comment">// If I didn&#39;t find it in the list above (whether the list is empty or not....)</span>
    <span class="comment">// that means it does not exist. So create it.</span>

    <span class="keywordflow">if</span> (!bSuccess)
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;Creating Request Number entry as &#39;%lld&#39;. Saving...\n&quot;</span>, lNewRequestNumber);
        m_mapRequestNum[strServerID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>()] = lNewRequestNumber;
        bSuccess = <span class="keyword">true</span>;
    }
    <span class="comment">// -----------------</span>
    <span class="keywordflow">if</span> (bSuccess)
    {
        <a class="code" href="class_o_t_pseudonym.html#a5d08ef86097db038c2c4fd30034f5dc8">SaveSignedNymfile</a>(SIGNER_NYM);
    }

}
</pre></div>
</div>
</div>
<a class="anchor" id="adf52e65c9002374a7298f17d97be5b57"></a><!-- doxytag: member="OTPseudonym::ReEncryptPrivateCredentials" ref="adf52e65c9002374a7298f17d97be5b57" args="(bool bImporting, OTPasswordData *pPWData=NULL, OTPassword *pImportPassword=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_pseudonym.html#adf52e65c9002374a7298f17d97be5b57">OTPseudonym::ReEncryptPrivateCredentials</a> </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>bImporting</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_password_data.html">OTPasswordData</a> *&#160;</td>
          <td class="paramname"><em>pPWData</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_password.html">OTPassword</a> *&#160;</td>
          <td class="paramname"><em>pImportPassword</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l03679">3679</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_o_t_password.html">OTPassword</a> * pExportPassphrase = NULL;
    <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTPassword&gt;</a> thePasswordAngel;

    <span class="keywordflow">if</span> (NULL == pImportPassword)
    {
        <span class="comment">// ----------------------------------------------------</span>
        <span class="comment">// whether import/export, this display string is for the OUTSIDE OF WALLET</span>
        <span class="comment">// portion of that process.</span>
        <span class="comment">//</span>
        <a class="code" href="class_o_t_string.html">OTString</a> strDisplay(NULL != pPWData ? pPWData-&gt;<a class="code" href="class_o_t_password_data.html#afe04404b46712a5918790c3b4af7dda2">GetDisplayString</a>() :
                            (bImporting ?
                             <span class="stringliteral">&quot;Enter passphrase for the Nym being imported.&quot;</span> :
                             <span class="stringliteral">&quot;Enter passphrase for exported Nym.&quot;</span>));
        <span class="comment">// Circumvents the cached key.</span>
        pExportPassphrase = <a class="code" href="class_o_t_symmetric_key.html#ae44e319c2200c279a14720cff7c4ae4c">OTSymmetricKey::GetPassphraseFromUser</a>(&amp;strDisplay, !bImporting); <span class="comment">//bAskTwice is true when exporting (since the export passphrase is being created at that time.)</span>
        thePasswordAngel.<a class="code" href="class_o_t_cleanup.html#aac0b26193b0a59dbbf491a4e417af833">SetCleanupTargetPointer</a>(pExportPassphrase);

        <span class="keywordflow">if</span> (NULL == pExportPassphrase)
        {
            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Failed in GetPassphraseFromUser.\n&quot;</span>, __FUNCTION__);
            <span class="keywordflow">return</span> <span class="keyword">false</span>;
        }
        <span class="comment">// ----------------------------------------</span>
<span class="comment">//      OTLog::vOutput(0, &quot;%s: DEBUGGING pExportPassphrase, size %d, contains: %s \n&quot;,</span>
<span class="comment">//                     __FUNCTION__, pExportPassphrase-&gt;getPasswordSize(), pExportPassphrase-&gt;getPassword());</span>
    }
    <span class="keywordflow">else</span>
    {
        pExportPassphrase = pImportPassword;

<span class="comment">//      OTLog::vOutput(0, &quot;%s: DEBUGGING pImportPassword, size %d, contains: %s \n&quot;,</span>
<span class="comment">//                     __FUNCTION__, pImportPassword-&gt;getPasswordSize(), pImportPassword-&gt;getPassword());</span>
    }
    <span class="comment">// ****************************************************</span>

    <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_pseudonym_8hpp.html#a0617d6d6c189c161a3fcf3c4710f5dba">mapOfCredentials</a>, m_mapCredentials)
    {
        <a class="code" href="class_o_t_credential.html">OTCredential</a> * pCredential = (*it).second;
        <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pCredential);
        <span class="comment">// -----------------------------</span>
        <span class="keywordflow">if</span> (<span class="keyword">false</span> == pCredential-&gt;<a class="code" href="class_o_t_credential.html#a4aa93a303e599713598c06219ad11469">ReEncryptPrivateCredentials</a>(*pExportPassphrase, bImporting))
            <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// ----------------------------------------------------</span>
    <span class="keywordflow">return</span> <span class="keyword">true</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a0f5609a64dd47cf9b7f3113127e51f6b"></a><!-- doxytag: member="OTPseudonym::ReleaseTransactionNumbers" ref="a0f5609a64dd47cf9b7f3113127e51f6b" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_pseudonym.html#a0f5609a64dd47cf9b7f3113127e51f6b">OTPseudonym::ReleaseTransactionNumbers</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l01676">1676</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_o_t_pseudonym_8cpp.html#a8518385c303bccc1cd1342169cb62a07">WIPE_MAP_AND_DEQUE</a>(m_mapTransNum)
    <a class="code" href="_o_t_pseudonym_8cpp.html#a8518385c303bccc1cd1342169cb62a07">WIPE_MAP_AND_DEQUE</a>(m_mapIssuedNum)
    <a class="code" href="_o_t_pseudonym_8cpp.html#a8518385c303bccc1cd1342169cb62a07">WIPE_MAP_AND_DEQUE</a>(m_mapTentativeNum)
    <a class="code" href="_o_t_pseudonym_8cpp.html#a8518385c303bccc1cd1342169cb62a07">WIPE_MAP_AND_DEQUE</a>(m_mapAcknowledgedNum)
}
</pre></div>
</div>
</div>
<a class="anchor" id="a0d8fd416811828f1eb8c07eb141790c2"></a><!-- doxytag: member="OTPseudonym::RemoveAcknowledgedNum" ref="a0d8fd416811828f1eb8c07eb141790c2" args="(OTPseudonym &amp;SIGNER_NYM, const OTString &amp;strServerID, const int64_t &amp;lRequestNum, bool bSave)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_pseudonym.html#a0d8fd416811828f1eb8c07eb141790c2">OTPseudonym::RemoveAcknowledgedNum</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;&#160;</td>
          <td class="paramname"><em>SIGNER_NYM</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strServerID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int64_t &amp;&#160;</td>
          <td class="paramname"><em>lRequestNum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>bSave</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l02461">2461</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">bool</span> bSuccess = <a class="code" href="class_o_t_pseudonym.html#a0d8fd416811828f1eb8c07eb141790c2">RemoveAcknowledgedNum</a>(strServerID, lRequestNum);        <span class="comment">// Remove from list of acknowledged request numbers.</span>
    <span class="comment">// -----------------------------------</span>
    <span class="keywordflow">if</span> (bSuccess &amp;&amp; bSave)
        bSave = <a class="code" href="class_o_t_pseudonym.html#a5d08ef86097db038c2c4fd30034f5dc8">SaveSignedNymfile</a>(SIGNER_NYM);
    <span class="keywordflow">else</span>
        bSave = <span class="keyword">true</span>; <span class="comment">// so the return at the bottom calculates correctly.</span>
    <span class="comment">// -----------------------------------</span>
    <span class="keywordflow">return</span> (bSuccess &amp;&amp; bSave);
}
</pre></div>
</div>
</div>
<a class="anchor" id="abbca64e1aa7d4582fcd562c5703f6372"></a><!-- doxytag: member="OTPseudonym::RemoveAcknowledgedNum" ref="abbca64e1aa7d4582fcd562c5703f6372" args="(OTPseudonym &amp;SIGNER_NYM, const OTString &amp;strServerID, const int64_t &amp;lRequestNum)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_pseudonym.html#a0d8fd416811828f1eb8c07eb141790c2">OTPseudonym::RemoveAcknowledgedNum</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;&#160;</td>
          <td class="paramname"><em>SIGNER_NYM</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strServerID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int64_t &amp;&#160;</td>
          <td class="paramname"><em>lRequestNum</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l02329">2329</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> <a class="code" href="class_o_t_pseudonym.html#a92916b7dfb3a99edbb41d3872dd262ef">RemoveGenericNum</a>(m_mapAcknowledgedNum, SIGNER_NYM, strServerID, lRequestNum);
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac831fdbb013c4e52f76d4b345dea95e1"></a><!-- doxytag: member="OTPseudonym::RemoveAcknowledgedNum" ref="ac831fdbb013c4e52f76d4b345dea95e1" args="(const OTString &amp;strServerID, const int64_t &amp;lRequestNum)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_pseudonym.html#a0d8fd416811828f1eb8c07eb141790c2">OTPseudonym::RemoveAcknowledgedNum</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strServerID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int64_t &amp;&#160;</td>
          <td class="paramname"><em>lRequestNum</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l02335">2335</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> <a class="code" href="class_o_t_pseudonym.html#a92916b7dfb3a99edbb41d3872dd262ef">RemoveGenericNum</a>(m_mapAcknowledgedNum, strServerID, lRequestNum);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a482952f1676f239415215a1835b45f60"></a><!-- doxytag: member="OTPseudonym::RemoveAllNumbers" ref="a482952f1676f239415215a1835b45f60" args="(const OTString *pstrServerID=NULL, const bool bRemoveHighestNum=true)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_pseudonym.html#a482952f1676f239415215a1835b45f60">OTPseudonym::RemoveAllNumbers</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> *&#160;</td>
          <td class="paramname"><em>pstrServerID</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const bool&#160;</td>
          <td class="paramname"><em>bRemoveHighestNum</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l01358">1358</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keyword">const</span> std::string str_ServerID((NULL != pstrServerID) ? pstrServerID-&gt;<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>() : <span class="stringliteral">&quot;&quot;</span>);

    <span class="comment">// --------------------------</span>
    <span class="comment">// These use str_ServerID (above)</span>
    <span class="comment">//</span>
    <a class="code" href="_o_t_pseudonym_8cpp.html#a92a5b26afc827a5d28425da232fa3476">CLEAR_MAP_AND_DEQUE</a>(m_mapIssuedNum)
    <a class="code" href="_o_t_pseudonym_8cpp.html#a92a5b26afc827a5d28425da232fa3476">CLEAR_MAP_AND_DEQUE</a>(m_mapTransNum)
    <a class="code" href="_o_t_pseudonym_8cpp.html#a92a5b26afc827a5d28425da232fa3476">CLEAR_MAP_AND_DEQUE</a>(m_mapTentativeNum)
    <a class="code" href="_o_t_pseudonym_8cpp.html#a92a5b26afc827a5d28425da232fa3476">CLEAR_MAP_AND_DEQUE</a>(m_mapAcknowledgedNum)

    <span class="comment">// ----------------------------</span>

    std::list&lt;<a class="code" href="_o_t_pseudonym_8hpp.html#a0ed9ca5cfdfd9902dd8bd342d344a275">mapOfHighestNums</a>::iterator&gt; listOfHighestNums;
    std::list&lt;<a class="code" href="_o_t_pseudonym_8hpp.html#ad982f28c8f82a1e667f43ebf775bbdb8">mapOfIdentifiers</a>::iterator&gt; listOfNymboxHash;
    std::list&lt;<a class="code" href="_o_t_pseudonym_8hpp.html#ad982f28c8f82a1e667f43ebf775bbdb8">mapOfIdentifiers</a>::iterator&gt; listOfInboxHash;
    std::list&lt;<a class="code" href="_o_t_pseudonym_8hpp.html#ad982f28c8f82a1e667f43ebf775bbdb8">mapOfIdentifiers</a>::iterator&gt; listOfOutboxHash;
    std::list&lt;<a class="code" href="_o_t_pseudonym_8hpp.html#ad982f28c8f82a1e667f43ebf775bbdb8">mapOfIdentifiers</a>::iterator&gt; listOfRecentHash;

    if (bRemoveHighestNum)
    {
        <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_pseudonym_8hpp.html#a0ed9ca5cfdfd9902dd8bd342d344a275">mapOfHighestNums</a>, m_mapHighTransNo)
        {
            <span class="keywordflow">if</span> ((NULL != pstrServerID) &amp;&amp; (str_ServerID != it-&gt;first)) <span class="comment">// If passed in, and current it doesn&#39;t match, then skip it (continue).</span>
                <span class="keywordflow">continue</span>;

            listOfHighestNums.push_back(it);
<span class="comment">//          m_mapHighTransNo.erase(it);</span>
        }
    }
    <span class="comment">// ----------------------------</span>

    <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_pseudonym_8hpp.html#ad982f28c8f82a1e667f43ebf775bbdb8">mapOfIdentifiers</a>, m_mapNymboxHash)
    {
        <span class="keywordflow">if</span> ((NULL != pstrServerID) &amp;&amp; (str_ServerID != it-&gt;first)) <span class="comment">// If passed in, and current it doesn&#39;t match, then skip it (continue).</span>
            <span class="keywordflow">continue</span>;

        listOfNymboxHash.push_back(it);
<span class="comment">//      m_mapNymboxHash.erase(it);</span>
    }
    <span class="comment">// ----------------------------</span>
    <span class="comment">// This is mapped to acct_id, not server_id.</span>
    <span class="comment">// (So we just wipe them all.)</span>
    <span class="comment">//</span>
    <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_pseudonym_8hpp.html#ad982f28c8f82a1e667f43ebf775bbdb8">mapOfIdentifiers</a>, m_mapInboxHash)
    {
        listOfInboxHash.push_back(it);
<span class="comment">//      m_mapInboxHash.erase(it);</span>
    }
    <span class="comment">// ----------------------------</span>
    <span class="comment">// This is mapped to acct_id, not server_id.</span>
    <span class="comment">// (So we just wipe them all.)</span>
    <span class="comment">//</span>
    <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_pseudonym_8hpp.html#ad982f28c8f82a1e667f43ebf775bbdb8">mapOfIdentifiers</a>, m_mapOutboxHash)
    {
        listOfOutboxHash.push_back(it);
<span class="comment">//      m_mapOutboxHash.erase(it);</span>
    }
    <span class="comment">// ----------------------------</span>

    <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_pseudonym_8hpp.html#ad982f28c8f82a1e667f43ebf775bbdb8">mapOfIdentifiers</a>, m_mapRecentHash)
    {
        <span class="keywordflow">if</span> ((NULL != pstrServerID) &amp;&amp; (str_ServerID != it-&gt;first)) <span class="comment">// If passed in, and current it doesn&#39;t match, then skip it (continue).</span>
            <span class="keywordflow">continue</span>;

        listOfRecentHash.push_back(it);
<span class="comment">//      m_mapRecentHash.erase(it);</span>
    }

    <span class="comment">// ----------------------------------------------------------------</span>

    <span class="keywordflow">while</span> (listOfHighestNums.size() &gt; 0)
    {
        m_mapHighTransNo.erase(listOfHighestNums.back());
        listOfHighestNums.pop_back();
    }
    <span class="keywordflow">while</span> (listOfNymboxHash.size() &gt; 0)
    {
        m_mapNymboxHash.erase(listOfNymboxHash.back());
        listOfNymboxHash.pop_back();
    }
    <span class="keywordflow">while</span> (listOfInboxHash.size() &gt; 0)
    {
        m_mapInboxHash.erase(listOfInboxHash.back());
        listOfInboxHash.pop_back();
    }
    <span class="keywordflow">while</span> (listOfOutboxHash.size() &gt; 0)
    {
        m_mapOutboxHash.erase(listOfOutboxHash.back());
        listOfOutboxHash.pop_back();
    }
    <span class="keywordflow">while</span> (listOfRecentHash.size() &gt; 0)
    {
        m_mapRecentHash.erase(listOfRecentHash.back());
        listOfRecentHash.pop_back();
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a92916b7dfb3a99edbb41d3872dd262ef"></a><!-- doxytag: member="OTPseudonym::RemoveGenericNum" ref="a92916b7dfb3a99edbb41d3872dd262ef" args="(mapOfTransNums &amp;THE_MAP, OTPseudonym &amp;SIGNER_NYM, const OTString &amp;strServerID, const int64_t &amp;lTransNum)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_pseudonym.html#a92916b7dfb3a99edbb41d3872dd262ef">OTPseudonym::RemoveGenericNum</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_o_t_pseudonym_8hpp.html#ac99ad82dc6c392a0a8c851c6041b62f1">mapOfTransNums</a> &amp;&#160;</td>
          <td class="paramname"><em>THE_MAP</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;&#160;</td>
          <td class="paramname"><em>SIGNER_NYM</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strServerID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int64_t &amp;&#160;</td>
          <td class="paramname"><em>lTransNum</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l01971">1971</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">bool</span> bRetVal = <a class="code" href="class_o_t_pseudonym.html#a92916b7dfb3a99edbb41d3872dd262ef">RemoveGenericNum</a>(THE_MAP, strServerID, lTransNum);

    <span class="keywordflow">if</span> (bRetVal)
    {
        <a class="code" href="class_o_t_pseudonym.html#a5d08ef86097db038c2c4fd30034f5dc8">SaveSignedNymfile</a>(SIGNER_NYM);
    }

    <span class="keywordflow">return</span> bRetVal;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab8bb1e92eeccc922f83e07fbe16649e3"></a><!-- doxytag: member="OTPseudonym::RemoveGenericNum" ref="ab8bb1e92eeccc922f83e07fbe16649e3" args="(mapOfTransNums &amp;THE_MAP, const OTString &amp;strServerID, const int64_t &amp;lTransNum)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_pseudonym.html#a92916b7dfb3a99edbb41d3872dd262ef">OTPseudonym::RemoveGenericNum</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_o_t_pseudonym_8hpp.html#ac99ad82dc6c392a0a8c851c6041b62f1">mapOfTransNums</a> &amp;&#160;</td>
          <td class="paramname"><em>THE_MAP</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strServerID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int64_t &amp;&#160;</td>
          <td class="paramname"><em>lTransNum</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l01987">1987</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">bool</span> bRetVal = <span class="keyword">false</span>;
    std::string strID   = strServerID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();

    <span class="comment">// The Pseudonym has a deque of transaction numbers for each servers.</span>
    <span class="comment">// These deques are mapped by Server ID.</span>
    <span class="comment">//</span>
    <span class="comment">// So let&#39;s loop through all the deques I have, and if the server ID on the map</span>
    <span class="comment">// matches the Server ID that was passed in, then find the transaction number on</span>
    <span class="comment">// that list, and then remove it, and return true. Else return false.</span>
    <span class="comment">//</span>
    <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_pseudonym_8hpp.html#ac99ad82dc6c392a0a8c851c6041b62f1">mapOfTransNums</a>, THE_MAP)
    {
        <span class="comment">// if the ServerID passed in matches the serverID for the current deque</span>
        <span class="keywordflow">if</span> ( strID == it-&gt;first )
        {
            <a class="code" href="_o_t_pseudonym_8hpp.html#a94632bfde6cf91c8294122f77527bcf1">dequeOfTransNums</a> * pDeque = (it-&gt;second);

            <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pDeque);

            <span class="keywordflow">if</span> (!(pDeque-&gt;empty())) <span class="comment">// there are some numbers for that server ID</span>
            {
                <span class="comment">// Let&#39;s loop through them and see if the culprit is there</span>
                <span class="keywordflow">for</span> (uint32_t i = 0; i &lt; pDeque-&gt;size(); i++)
                {
                    <span class="comment">// Found it!</span>
                    <span class="keywordflow">if</span> (lTransNum == pDeque-&gt;at(i))
                    {
                        pDeque-&gt;erase(pDeque-&gt;begin() + i);
                        bRetVal = <span class="keyword">true</span>;
                        <span class="keywordflow">break</span>;
                    }
                }
            }
            <span class="keywordflow">break</span>;
        }
    }

    <span class="keywordflow">return</span> bRetVal;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a17f25f5eb52440cc3ffc139dcbff75fe"></a><!-- doxytag: member="OTPseudonym::RemoveIssuedNum" ref="a17f25f5eb52440cc3ffc139dcbff75fe" args="(OTPseudonym &amp;SIGNER_NYM, const OTString &amp;strServerID, const int64_t &amp;lTransNum, bool bSave)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_pseudonym.html#a17f25f5eb52440cc3ffc139dcbff75fe">OTPseudonym::RemoveIssuedNum</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;&#160;</td>
          <td class="paramname"><em>SIGNER_NYM</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strServerID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int64_t &amp;&#160;</td>
          <td class="paramname"><em>lTransNum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>bSave</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l02439">2439</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">bool</span> bSuccess = <a class="code" href="class_o_t_pseudonym.html#a17f25f5eb52440cc3ffc139dcbff75fe">RemoveIssuedNum</a>(strServerID, lTransNum); <span class="comment">// Remove from list of numbers that are still signed out.</span>
    <span class="comment">// -----------------------------------</span>
    <span class="keywordflow">if</span> (bSuccess &amp;&amp; bSave)
        bSave = <a class="code" href="class_o_t_pseudonym.html#a5d08ef86097db038c2c4fd30034f5dc8">SaveSignedNymfile</a>(SIGNER_NYM);
    <span class="keywordflow">else</span>
        bSave = <span class="keyword">true</span>; <span class="comment">// so the return at the bottom calculates correctly.</span>
    <span class="comment">// -----------------------------------</span>
    <span class="keywordflow">return</span> (bSuccess &amp;&amp; bSave);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a114a106a302eb3c72ce193ba5473225c"></a><!-- doxytag: member="OTPseudonym::RemoveIssuedNum" ref="a114a106a302eb3c72ce193ba5473225c" args="(OTPseudonym &amp;SIGNER_NYM, const OTString &amp;strServerID, const int64_t &amp;lTransNum)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_pseudonym.html#a17f25f5eb52440cc3ffc139dcbff75fe">OTPseudonym::RemoveIssuedNum</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;&#160;</td>
          <td class="paramname"><em>SIGNER_NYM</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strServerID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int64_t &amp;&#160;</td>
          <td class="paramname"><em>lTransNum</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l02243">2243</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> <a class="code" href="class_o_t_pseudonym.html#a92916b7dfb3a99edbb41d3872dd262ef">RemoveGenericNum</a>(m_mapIssuedNum, SIGNER_NYM, strServerID, lTransNum);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a02a399f50d58eb199f83670e622135a0"></a><!-- doxytag: member="OTPseudonym::RemoveIssuedNum" ref="a02a399f50d58eb199f83670e622135a0" args="(const OTString &amp;strServerID, const int64_t &amp;lTransNum)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_pseudonym.html#a17f25f5eb52440cc3ffc139dcbff75fe">OTPseudonym::RemoveIssuedNum</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strServerID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int64_t &amp;&#160;</td>
          <td class="paramname"><em>lTransNum</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l02249">2249</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> <a class="code" href="class_o_t_pseudonym.html#a92916b7dfb3a99edbb41d3872dd262ef">RemoveGenericNum</a>(m_mapIssuedNum, strServerID, lTransNum);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a7f32350b2827a62bbfa5ef09a392f129"></a><!-- doxytag: member="OTPseudonym::RemoveMailByIndex" ref="a7f32350b2827a62bbfa5ef09a392f129" args="(const int32_t nIndex)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_pseudonym.html#a7f32350b2827a62bbfa5ef09a392f129">OTPseudonym::RemoveMailByIndex</a> </td>
          <td>(</td>
          <td class="paramtype">const int32_t&#160;</td>
          <td class="paramname"><em>nIndex</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l00907">907</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keyword">const</span> uint32_t uIndex = nIndex;

    <span class="comment">// Out of bounds.</span>
    <span class="keywordflow">if</span> (m_dequeMail.empty() ||
        (nIndex &lt; 0)        || (uIndex &gt;= m_dequeMail.size()))
        <span class="keywordflow">return</span> <span class="keyword">false</span>;

    <span class="comment">// -----------------------</span>

    <a class="code" href="class_o_t_message.html">OTMessage</a> * pMessage = m_dequeMail.at(nIndex);

    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pMessage);

    m_dequeMail.erase(m_dequeMail.begin() + nIndex);

    <span class="keyword">delete</span> pMessage;

    <span class="keywordflow">return</span> <span class="keyword">true</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae2510d04ffb6c0e01aeda1b75a59d1ef"></a><!-- doxytag: member="OTPseudonym::RemoveOutmailByIndex" ref="ae2510d04ffb6c0e01aeda1b75a59d1ef" args="(const int32_t nIndex)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_pseudonym.html#ae2510d04ffb6c0e01aeda1b75a59d1ef">OTPseudonym::RemoveOutmailByIndex</a> </td>
          <td>(</td>
          <td class="paramtype">const int32_t&#160;</td>
          <td class="paramname"><em>nIndex</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l00969">969</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keyword">const</span> uint32_t uIndex = nIndex;

    <span class="comment">// Out of bounds.</span>
    <span class="keywordflow">if</span> (m_dequeOutmail.empty()  ||
        (nIndex &lt; 0)        || (uIndex &gt;= m_dequeOutmail.size()))
        <span class="keywordflow">return</span> <span class="keyword">false</span>;

    <span class="comment">// -----------------------</span>

    <a class="code" href="class_o_t_message.html">OTMessage</a> * pMessage = m_dequeOutmail.at(nIndex);

    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pMessage);

    m_dequeOutmail.erase(m_dequeOutmail.begin() + nIndex);

    <span class="keyword">delete</span> pMessage;

    <span class="keywordflow">return</span> <span class="keyword">true</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a2d66a8a46d8e147ca0dbc0fb45bc364d"></a><!-- doxytag: member="OTPseudonym::RemoveOutpaymentsByIndex" ref="a2d66a8a46d8e147ca0dbc0fb45bc364d" args="(const int32_t nIndex, bool bDeleteIt=true)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_pseudonym.html#a2d66a8a46d8e147ca0dbc0fb45bc364d">OTPseudonym::RemoveOutpaymentsByIndex</a> </td>
          <td>(</td>
          <td class="paramtype">const int32_t&#160;</td>
          <td class="paramname"><em>nIndex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>bDeleteIt</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l01071">1071</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keyword">const</span> uint32_t uIndex = nIndex;

    <span class="comment">// Out of bounds.</span>
    <span class="keywordflow">if</span> (m_dequeOutpayments.empty() || (nIndex &lt; 0) || (uIndex &gt;= m_dequeOutpayments.size()))
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error: Index out of bounds: signed: %d unsigned: %u (size is %d).\n&quot;</span>,
                      __FUNCTION__, nIndex, uIndex, m_dequeOutpayments.size());
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// -----------------------</span>
    <a class="code" href="class_o_t_message.html">OTMessage</a> * pMessage = m_dequeOutpayments.at(nIndex);
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pMessage);

    m_dequeOutpayments.erase(m_dequeOutpayments.begin() + uIndex);

    <span class="keywordflow">if</span> (bDeleteIt)
        <span class="keyword">delete</span> pMessage;

    <span class="keywordflow">return</span> <span class="keyword">true</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a1bce78db719b7733ba2a3fb19f963b24"></a><!-- doxytag: member="OTPseudonym::RemoveReqNumbers" ref="a1bce78db719b7733ba2a3fb19f963b24" args="(const OTString *pstrServerID=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_pseudonym.html#a1bce78db719b7733ba2a3fb19f963b24">OTPseudonym::RemoveReqNumbers</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> *&#160;</td>
          <td class="paramname"><em>pstrServerID</em> = <code>NULL</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l01588">1588</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keyword">const</span> std::string str_ServerID((NULL != pstrServerID) ? pstrServerID-&gt;<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>() : <span class="stringliteral">&quot;&quot;</span>);

    <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_pseudonym_8hpp.html#a973d5530da5375de1f5e0f75c7780869">mapOfRequestNums</a>, m_mapRequestNum)
    {
        <span class="keywordflow">if</span> ((NULL != pstrServerID) &amp;&amp; (str_ServerID != it-&gt;first)) <span class="comment">// If passed in, and current it doesn&#39;t match, then skip it (continue).</span>
            <span class="keywordflow">continue</span>;

        m_mapRequestNum.erase(it);
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="af39adadda751a07bcd5388cd3528674f"></a><!-- doxytag: member="OTPseudonym::RemoveTentativeNum" ref="af39adadda751a07bcd5388cd3528674f" args="(OTPseudonym &amp;SIGNER_NYM, const OTString &amp;strServerID, const int64_t &amp;lTransNum, bool bSave)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_pseudonym.html#af39adadda751a07bcd5388cd3528674f">OTPseudonym::RemoveTentativeNum</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;&#160;</td>
          <td class="paramname"><em>SIGNER_NYM</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strServerID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int64_t &amp;&#160;</td>
          <td class="paramname"><em>lTransNum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>bSave</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l02422">2422</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">bool</span> bSuccess = <a class="code" href="class_o_t_pseudonym.html#af39adadda751a07bcd5388cd3528674f">RemoveTentativeNum</a>(strServerID, lTransNum);     <span class="comment">// Remove from list of numbers that haven&#39;t been made available for use yet, though they&#39;re &quot;tentative&quot;...</span>
    <span class="comment">// -----------------------------------</span>
    <span class="keywordflow">if</span> (bSuccess &amp;&amp; bSave)
        bSave = <a class="code" href="class_o_t_pseudonym.html#a5d08ef86097db038c2c4fd30034f5dc8">SaveSignedNymfile</a>(SIGNER_NYM);
    <span class="keywordflow">else</span>
        bSave = <span class="keyword">true</span>; <span class="comment">// so the return at the bottom calculates correctly.</span>
    <span class="comment">// -----------------------------------</span>
    <span class="keywordflow">return</span> (bSuccess &amp;&amp; bSave);
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae05def6ec59bd22aa27de644ddec0c79"></a><!-- doxytag: member="OTPseudonym::RemoveTentativeNum" ref="ae05def6ec59bd22aa27de644ddec0c79" args="(OTPseudonym &amp;SIGNER_NYM, const OTString &amp;strServerID, const int64_t &amp;lTransNum)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_pseudonym.html#af39adadda751a07bcd5388cd3528674f">OTPseudonym::RemoveTentativeNum</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;&#160;</td>
          <td class="paramname"><em>SIGNER_NYM</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strServerID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int64_t &amp;&#160;</td>
          <td class="paramname"><em>lTransNum</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l02283">2283</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> <a class="code" href="class_o_t_pseudonym.html#a92916b7dfb3a99edbb41d3872dd262ef">RemoveGenericNum</a>(m_mapTentativeNum, SIGNER_NYM, strServerID, lTransNum);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a7d21ff2d2a7fac91a46b48ad903602f8"></a><!-- doxytag: member="OTPseudonym::RemoveTentativeNum" ref="a7d21ff2d2a7fac91a46b48ad903602f8" args="(const OTString &amp;strServerID, const int64_t &amp;lTransNum)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_pseudonym.html#af39adadda751a07bcd5388cd3528674f">OTPseudonym::RemoveTentativeNum</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strServerID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int64_t &amp;&#160;</td>
          <td class="paramname"><em>lTransNum</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l02289">2289</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> <a class="code" href="class_o_t_pseudonym.html#a92916b7dfb3a99edbb41d3872dd262ef">RemoveGenericNum</a>(m_mapTentativeNum, strServerID, lTransNum);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a3fb93588f8e68c7f56cee00930f07d34"></a><!-- doxytag: member="OTPseudonym::RemoveTransactionNum" ref="a3fb93588f8e68c7f56cee00930f07d34" args="(OTPseudonym &amp;SIGNER_NYM, const OTString &amp;strServerID, const int64_t &amp;lTransNum)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_pseudonym.html#a3fb93588f8e68c7f56cee00930f07d34">OTPseudonym::RemoveTransactionNum</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;&#160;</td>
          <td class="paramname"><em>SIGNER_NYM</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strServerID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int64_t &amp;&#160;</td>
          <td class="paramname"><em>lTransNum</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l02203">2203</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> <a class="code" href="class_o_t_pseudonym.html#a92916b7dfb3a99edbb41d3872dd262ef">RemoveGenericNum</a>(m_mapTransNum, SIGNER_NYM, strServerID, lTransNum);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a32daf8c09fc04dae849f8914c1c2ab17"></a><!-- doxytag: member="OTPseudonym::RemoveTransactionNum" ref="a32daf8c09fc04dae849f8914c1c2ab17" args="(const OTString &amp;strServerID, const int64_t &amp;lTransNum)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_pseudonym.html#a3fb93588f8e68c7f56cee00930f07d34">OTPseudonym::RemoveTransactionNum</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strServerID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int64_t &amp;&#160;</td>
          <td class="paramname"><em>lTransNum</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l02209">2209</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> <a class="code" href="class_o_t_pseudonym.html#a92916b7dfb3a99edbb41d3872dd262ef">RemoveGenericNum</a>(m_mapTransNum, strServerID, lTransNum);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a4524f90e444b02c8c2c9e4a2cb61f103"></a><!-- doxytag: member="OTPseudonym::ResyncWithServer" ref="a4524f90e444b02c8c2c9e4a2cb61f103" args="(OTLedger &amp;theNymbox, OTPseudonym &amp;theMessageNym)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_pseudonym.html#a4524f90e444b02c8c2c9e4a2cb61f103">OTPseudonym::ResyncWithServer</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_ledger.html">OTLedger</a> &amp;&#160;</td>
          <td class="paramname"><em>theNymbox</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;&#160;</td>
          <td class="paramname"><em>theMessageNym</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l01780">1780</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">bool</span> bSuccess = <span class="keyword">true</span>;

    <span class="comment">// --------------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> &amp;    theServerID = theNymbox.<a class="code" href="class_o_t_transaction_type.html#a6a6c7517c09f0abacc72c1ec84d937ed">GetRealServerID</a>();
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a>          strServerID(theServerID);
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a>          strNymID(m_nymID);

    <span class="keyword">const</span> int32_t nIssuedNumCount   = theMessageNym.<a class="code" href="class_o_t_pseudonym.html#ac4fec9b0b744c9fbe3bae82c25661d19">GetIssuedNumCount</a>(theServerID);
    <span class="keyword">const</span> int32_t nTransNumCount    = theMessageNym.<a class="code" href="class_o_t_pseudonym.html#adee7eef0a51e8e94522c43ac898c2308">GetTransactionNumCount</a>(theServerID);

    <span class="comment">// --------------------------------------</span>
    <span class="comment">// Remove all issued, transaction, and tentative numbers for a specific server ID,</span>
    <span class="comment">// as well as all acknowledgedNums, and the highest transaction number for that serverID,</span>
    <span class="comment">// from *this nym. Leave our record of the highest trans num received from that server,</span>
    <span class="comment">// since we will want to just keep it when re-syncing. (Server doesn&#39;t store that anyway.)</span>
    <span class="comment">//</span>
    this-&gt;<a class="code" href="class_o_t_pseudonym.html#a482952f1676f239415215a1835b45f60">RemoveAllNumbers</a>(&amp;strServerID, <span class="keyword">false</span>); <span class="comment">// bRemoveHighestNum=true by default. But in this case, I keep it.</span>

    <span class="comment">// --------------------------------------</span>
    <span class="comment">// Any issued or trans numbers we add to *this from theMessageNym, are also added here so</span>
    <span class="comment">// they can be used to update the &quot;highest number&quot; record (at the bottom of this function.)</span>
    <span class="comment">//</span>
    std::set&lt;int64_t&gt; setTransNumbers;

    <span class="comment">// ***************************************************************************</span>
    <span class="comment">// Now that *this has no issued or transaction numbers for theServerID, we add</span>
    <span class="comment">// them back again from theMessageNym. (So they will match, and be &#39;N SYNC!!!)</span>
    <span class="comment">//</span>
    <span class="comment">// Copy the issued and transaction numbers from theMessageNym onto *this.</span>
    <span class="comment">//</span>
    <span class="keywordflow">for</span>(int32_t n1 = 0; n1 &lt; nIssuedNumCount; ++n1)
    {
        <span class="keyword">const</span> int64_t lNum = theMessageNym.<a class="code" href="class_o_t_pseudonym.html#ada98078d45460303c6a746c53381f5aa">GetIssuedNum</a>(theServerID, n1);

        <span class="keywordflow">if</span> (<span class="keyword">false</span> == this-&gt;<a class="code" href="class_o_t_pseudonym.html#a331a9c5ec8692d0b88a76d882586fbc1">AddIssuedNum</a>(strServerID, lNum))     <span class="comment">// Add to list of numbers that haven&#39;t been closed yet.</span>
        {
            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;OTPseudonym::ResyncWithServer: Failed trying to add IssuedNum (%lld) onto *this nym: %s, for server: %s\n&quot;</span>,
                          lNum, strNymID.Get(), strServerID.Get());
            bSuccess = <span class="keyword">false</span>;
        }
        <span class="keywordflow">else</span>
        {
            setTransNumbers.insert(lNum);
            <span class="comment">// ---------------------------</span>
            <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(1, <span class="stringliteral">&quot;OTPseudonym::ResyncWithServer: Added IssuedNum (%lld) onto *this nym: %s, for server: %s \n&quot;</span>,
                           lNum, strNymID.Get(), strServerID.Get());
        }
    }
    <span class="comment">// --------------------------------------</span>
    <span class="keywordflow">for</span>(int32_t n2 = 0; n2 &lt; nTransNumCount; ++n2)
    {
        <span class="keyword">const</span> int64_t lNum = theMessageNym.<a class="code" href="class_o_t_pseudonym.html#aaeccb4cd9e65abe19f382faee5ad8fd1">GetTransactionNum</a>(theServerID, n2);

        <span class="keywordflow">if</span> (<span class="keyword">false</span> == this-&gt;<a class="code" href="class_o_t_pseudonym.html#a2771ea8cf77d2ac05d942e149c2bc3e6">AddTransactionNum</a>(strServerID, lNum))        <span class="comment">// Add to list of available-to-use numbers.</span>
        {
            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;OTPseudonym::ResyncWithServer: Failed trying to add TransactionNum (%lld) onto *this nym: %s, for server: %s\n&quot;</span>,
                          lNum, strNymID.Get(), strServerID.Get());
            bSuccess = <span class="keyword">false</span>;
        }
        <span class="keywordflow">else</span>
        {
            setTransNumbers.insert(lNum);
            <span class="comment">// ---------------------------</span>
            <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(1, <span class="stringliteral">&quot;OTPseudonym::ResyncWithServer: Added TransactionNum (%lld) onto *this nym: %s, for server: %s \n&quot;</span>,
                           lNum, strNymID.Get(), strServerID.Get());
        }
    }
    <span class="comment">// ***************************************************************************</span>
    <span class="comment">// We already cleared all tentative numbers from *this (above in</span>
    <span class="comment">// RemoveAllNumbers). Next, loop through theNymbox and add Tentative numbers</span>
    <span class="comment">// to *this based on each successNotice in the Nymbox. This way, when the notices</span>
    <span class="comment">// are processed, they will succeed because the Nym will believe he was expecting them.</span>
    <span class="comment">//</span>
    <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_ledger_8hpp.html#a1823ddf57c0de6495aa8ec5da7f1b8f7">mapOfTransactions</a>, theNymbox.<a class="code" href="class_o_t_ledger.html#aa71b6540e2948a36e3c7d3e7d14547a5">GetTransactionMap</a>())
    {
        <a class="code" href="class_o_t_transaction.html">OTTransaction</a> * pTransaction = (*it).second;
        <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pTransaction);
<span class="comment">//      OTString strTransaction(*pTransaction);</span>
<span class="comment">//      OTLog::vError(&quot;TRANSACTION CONTENTS:\n%s\n&quot;, strTransaction.Get());</span>

        <span class="comment">// (a new; ALREADY just added transaction number.)</span>
        <span class="keywordflow">if</span> ((<a class="code" href="class_o_t_transaction.html#af6b54636f1000e09f19d1c7a7886e1f8a52282952428acc861ea6c25a3839fcc9">OTTransaction::successNotice</a> != pTransaction-&gt;<a class="code" href="class_o_t_transaction.html#ac964dfd1e704c02358a6641f030ead38">GetType</a>())) <span class="comment">// if !successNotice</span>
            <span class="keywordflow">continue</span>;
        <span class="comment">// -------------</span>
        <span class="keyword">const</span> int64_t lNum = pTransaction-&gt;<a class="code" href="class_o_t_transaction_type.html#a08578043dac9d53f7a5a879b02785d46">GetReferenceToNum</a>(); <span class="comment">// successNotice is inRefTo the new transaction # that should be on my tentative list.</span>

        <span class="keywordflow">if</span> (<span class="keyword">false</span> == this-&gt;<a class="code" href="class_o_t_pseudonym.html#a154a958a9f3cfdb07167858579f74037">AddTentativeNum</a>(strServerID, lNum)) <span class="comment">// Add to list of tentatively-being-added numbers.</span>
        {
            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;OTPseudonym::ResyncWithServer: Failed trying to add TentativeNum (%lld) onto *this nym: %s, for server: %s\n&quot;</span>,
                          lNum, strNymID.Get(), strServerID.Get());
            bSuccess = <span class="keyword">false</span>;
        }
        <span class="keywordflow">else</span>
            <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(1, <span class="stringliteral">&quot;OTPseudonym::ResyncWithServer: Added TentativeNum (%lld) onto *this nym: %s, for server: %s \n&quot;</span>,
                           lNum, strNymID.Get(), strServerID.Get());
        <span class="comment">// There&#39;s no &quot;else insert to setTransNumbers&quot; here, like the other two blocks above.</span>
        <span class="comment">// Why not? Because setTransNumbers is for updating the Highest Trans Num record on this Nym,</span>
        <span class="comment">// and the Tentative Numbers aren&#39;t figured into that record until AFTER they are accepted</span>
        <span class="comment">// from the Nymbox. So I leave them out, since this function is basically setting us up to</span>
        <span class="comment">// successfully process the Nymbox, which will then naturally update the highest num record</span>
        <span class="comment">// based on the tentatives, as it&#39;s removing them from the tentative list and adding them to</span>
        <span class="comment">// the &quot;available&quot; transaction list (and issued.)</span>

    } <span class="comment">// FOR_EACH (Nymbox)</span>
    <span class="comment">// ***************************************************************************</span>

    <span class="keyword">const</span> std::string strID = strServerID.Get();

    <a class="code" href="_o_t_storage_8hpp.html#a4a94c3435a932ed34e5755f3f472547c">FOR_EACH_IT</a>(<a class="code" href="_o_t_pseudonym_8hpp.html#a0ed9ca5cfdfd9902dd8bd342d344a275">mapOfHighestNums</a>, this-&gt;m_mapHighTransNo, it_high_num)
    {
        <span class="keywordflow">if</span> ( strID == it_high_num-&gt;first )  <span class="comment">// We found it!</span>
        {
            <span class="comment">// -------------------------</span>
            <span class="comment">// See if any numbers on the set are higher, and if so, update the record to match.</span>
            <span class="comment">//</span>
            <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(std::set&lt;int64_t&gt;, setTransNumbers)
            {
                <span class="keyword">const</span> int64_t lTransNum = (*it);
                <span class="comment">// --------------------------------</span>
                <span class="comment">// Grab a copy of the old highest trans number</span>
                <span class="keyword">const</span> int64_t lOldHighestNumber = it_high_num-&gt;second;
                <span class="comment">// --------------------------------</span>
                <span class="keywordflow">if</span> (lTransNum &gt; lOldHighestNumber) <span class="comment">// Did we find a bigger one?</span>
                {
                    <span class="comment">// Then update the Nym&#39;s record!</span>
                    this-&gt;m_mapHighTransNo[it_high_num-&gt;first] = lTransNum;
                    <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(1, <span class="stringliteral">&quot;OTPseudonym::ResyncWithServer: Updated HighestNum (%lld) record on *this nym: %s, for server: %s \n&quot;</span>,
                                   lTransNum, strNymID.Get(), strServerID.Get());
                }
            }
            <span class="comment">// -------------------------</span>
            <span class="comment">// We only needed to do this for the one server, so we can break now.</span>
            <span class="keywordflow">break</span>;
        }
    }
    <span class="comment">// ***************************************************************************</span>

    <span class="keywordflow">return</span> (this-&gt;<a class="code" href="class_o_t_pseudonym.html#a5d08ef86097db038c2c4fd30034f5dc8">SaveSignedNymfile</a>(*<span class="keyword">this</span>) &amp;&amp; bSuccess);
}
</pre></div>
</div>
</div>
<a class="anchor" id="af3709c1b5203330b607ca0f0acff9c53"></a><!-- doxytag: member="OTPseudonym::SaveCredentialList" ref="af3709c1b5203330b607ca0f0acff9c53" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_pseudonym.html#af3709c1b5203330b607ca0f0acff9c53">OTPseudonym::SaveCredentialList</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l03832">3832</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_o_t_string.html">OTString</a> strNymID, strOutput;
    this-&gt;<a class="code" href="class_o_t_pseudonym.html#a1775c7aedd0dd25b2faf3f78dcccabe7">GetIdentifier</a>(strNymID);
    <span class="comment">// ----------------------------------------------------</span>
    this-&gt;<a class="code" href="class_o_t_pseudonym.html#ab43e09e7c6d2f7763360b5471f8e7cf3">SaveCredentialListToString</a>(strOutput);

    <span class="keywordflow">if</span> (strOutput.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>())
    {
        <a class="code" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> ascOutput(strOutput);
        strOutput.<a class="code" href="class_o_t_string.html#abef4b21b2170468705c58d64212d7257">Release</a>();
        <span class="keywordflow">if</span> (ascOutput.WriteArmoredString(strOutput, <span class="stringliteral">&quot;CREDENTIAL LIST&quot;</span>) &amp;&amp; <span class="comment">// bEscaped=false by default.</span>
            strOutput.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>())
        {
            <span class="comment">// ----------------------------------------------------</span>
            <span class="comment">// Save it to local storage.</span>
            <a class="code" href="class_o_t_string.html">OTString</a> strFilename;
            strFilename.<a class="code" href="class_o_t_string.html#af1c861f21033a1d583b3cb12f952422e">Format</a>(<span class="stringliteral">&quot;%s.cred&quot;</span>, strNymID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());

            std::string str_Folder = this-&gt;<a class="code" href="class_o_t_pseudonym.html#a27b67139a33989a0db8ca027f03b3257">HasPrivateKey</a>() ? <a class="code" href="class_o_t_folders.html#a4e94eac1e796da34baf00556042202f0">OTFolders::Credential</a>().<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>() : <a class="code" href="class_o_t_folders.html#a00c7ea89471a90172d166a8c0eb321a6">OTFolders::Pubcred</a>().<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();

            <span class="keywordflow">if</span> (<span class="keyword">false</span> == <a class="code" href="namespace_o_t_d_b.html#a7ec0a905bba2c1c8ba5b1e873e12eab4">OTDB::StorePlainString</a>(strOutput.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(), str_Folder, strFilename.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>()))
            {
                <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Failure trying to store %s credential list for Nym: %s\n&quot;</span>,
                              __FUNCTION__, this-&gt;<a class="code" href="class_o_t_pseudonym.html#a27b67139a33989a0db8ca027f03b3257">HasPrivateKey</a>() ? <span class="stringliteral">&quot;private&quot;</span> : <span class="stringliteral">&quot;public&quot;</span>, strNymID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
                <span class="keywordflow">return</span> <span class="keyword">false</span>;
            }
            <span class="comment">// ----------------------------------------------------</span>
            <span class="keywordflow">return</span> <span class="keyword">true</span>;
        }
    }
    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab43e09e7c6d2f7763360b5471f8e7cf3"></a><!-- doxytag: member="OTPseudonym::SaveCredentialListToString" ref="ab43e09e7c6d2f7763360b5471f8e7cf3" args="(OTString &amp;strOutput)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_pseudonym.html#ab43e09e7c6d2f7763360b5471f8e7cf3">OTPseudonym::SaveCredentialListToString</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strOutput</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l03810">3810</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_o_t_string.html">OTString</a> strNymID;
    this-&gt;<a class="code" href="class_o_t_pseudonym.html#a1775c7aedd0dd25b2faf3f78dcccabe7">GetIdentifier</a>(strNymID);

    strOutput.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;&lt;?xml version=\&quot;%s\&quot;?&gt;\n&quot;</span>, <span class="stringliteral">&quot;2.0&quot;</span>); <span class="comment">// todo hardcoding.</span>

    strOutput.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;&lt;OTuser version=\&quot;%s\&quot;\n&quot;</span>
                          <span class="stringliteral">&quot; nymID=\&quot;%s\&quot;&quot;</span>
                          <span class="stringliteral">&quot;&gt;\n\n&quot;</span>,
                          m_strVersion.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(),
                          strNymID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>()
                          );
    <span class="comment">// ----------------------------------------------------</span>
    this-&gt;<a class="code" href="class_o_t_pseudonym.html#a9a6189232f8cde0df210920ce3839199">SerializeNymIDSource</a>(strOutput);
    <span class="comment">// ----------------------------------------------------</span>
    this-&gt;<a class="code" href="class_o_t_pseudonym.html#a827f18578f6ef959984ccadcf5f432f6">SaveCredentialsToString</a>(strOutput);
    <span class="comment">// ----------------------------------------------------</span>
    strOutput.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;&lt;/OTuser&gt;\n&quot;</span>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a827f18578f6ef959984ccadcf5f432f6"></a><!-- doxytag: member="OTPseudonym::SaveCredentialsToString" ref="a827f18578f6ef959984ccadcf5f432f6" args="(OTString &amp;strOutput, mapOfStrings *pmapPubInfo=NULL, mapOfStrings *pmapPriInfo=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_pseudonym.html#a827f18578f6ef959984ccadcf5f432f6">OTPseudonym::SaveCredentialsToString</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strOutput</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="_o_t_string_8hpp.html#a7ec7839682b097a5c5b5c5125046c82b">mapOfStrings</a> *&#160;</td>
          <td class="paramname"><em>pmapPubInfo</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="_o_t_string_8hpp.html#a7ec7839682b097a5c5b5c5125046c82b">mapOfStrings</a> *&#160;</td>
          <td class="paramname"><em>pmapPriInfo</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l03929">3929</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{

    <span class="comment">// IDs for revoked subcredentials are saved here.</span>
    <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_string_8hpp.html#a82b49c0dbe4e0c6fa6fb33eef957c89d">listOfStrings</a>, m_listRevokedIDs)
    {
        std::string str_revoked_id = *it;
        strOutput.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;&lt;revokedCredential\n&quot;</span>
                           <span class="stringliteral">&quot; ID=\&quot;%s\&quot;&quot;</span>
                           <span class="stringliteral">&quot;/&gt;\n\n&quot;</span>,
                           str_revoked_id.c_str());
    }
    <span class="comment">// -------------------------------------</span>
    <span class="comment">// Serialize master and sub-credentials here.</span>
    <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_pseudonym_8hpp.html#a0617d6d6c189c161a3fcf3c4710f5dba">mapOfCredentials</a>, m_mapCredentials)
    {
        <a class="code" href="class_o_t_credential.html">OTCredential</a> * pCredential = (*it).second;
        <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pCredential);
        <span class="comment">// -----------------------------</span>
        pCredential-&gt;<a class="code" href="class_o_t_credential.html#aee02a93fec9ee67aaef7af32709bbcd0">SerializeIDs</a>(strOutput, m_listRevokedIDs, pmapPubInfo, pmapPriInfo, <span class="keyword">true</span>); <span class="comment">// bShowRevoked=false by default (true here), bValid=true</span>
    }
    <span class="comment">// -------------------------------------</span>
    <span class="comment">// Serialize Revoked master credentials here, including their subkeys.</span>
    <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_pseudonym_8hpp.html#a0617d6d6c189c161a3fcf3c4710f5dba">mapOfCredentials</a>, m_mapRevoked)
    {
        <a class="code" href="class_o_t_credential.html">OTCredential</a> * pCredential = (*it).second;
        <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pCredential);
        <span class="comment">// -----------------------------</span>
        pCredential-&gt;<a class="code" href="class_o_t_credential.html#aee02a93fec9ee67aaef7af32709bbcd0">SerializeIDs</a>(strOutput, m_listRevokedIDs, pmapPubInfo, pmapPriInfo, <span class="keyword">true</span>, <span class="keyword">false</span>); <span class="comment">// bShowRevoked=false by default. (Here it&#39;s true.) bValid=true by default. Here is for revoked, so false.</span>
    }
    <span class="comment">// *************************************************************************</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac4914854cf1643e776b182055f40e97a"></a><!-- doxytag: member="OTPseudonym::SavePseudonym" ref="ac4914854cf1643e776b182055f40e97a" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_pseudonym.html#ac4914854cf1643e776b182055f40e97a">OTPseudonym::SavePseudonym</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l03633">3633</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (!m_strNymfile.<a class="code" href="class_o_t_string.html#a640392dd17a786dab643dbfc7e5a8672">GetLength</a>())
    {
        <a class="code" href="class_o_t_string.html">OTString</a> nymID;
        <a class="code" href="class_o_t_pseudonym.html#a1775c7aedd0dd25b2faf3f78dcccabe7">GetIdentifier</a>(nymID);
        m_strNymfile.<a class="code" href="class_o_t_string.html#af1c861f21033a1d583b3cb12f952422e">Format</a>(<span class="stringliteral">&quot;%s&quot;</span>, nymID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
    }

    <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(2, <span class="stringliteral">&quot;Saving nym to: %s%s%s\n&quot;</span>,
                   <a class="code" href="class_o_t_folders.html#a3bcdf222bf351ad8b5cfb37e9b8e5143">OTFolders::Nym</a>().Get(), <a class="code" href="class_o_t_log.html#a42d3c91ff84ecae0690e34efb4619a77">OTLog::PathSeparator</a>(), m_strNymfile.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());

    <span class="keywordflow">return</span> this-&gt;<a class="code" href="class_o_t_pseudonym.html#ac4914854cf1643e776b182055f40e97a">SavePseudonym</a>(<a class="code" href="class_o_t_folders.html#a3bcdf222bf351ad8b5cfb37e9b8e5143">OTFolders::Nym</a>().Get(), m_strNymfile.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad47ff45f8d58367160aaa312f49d9371"></a><!-- doxytag: member="OTPseudonym::SavePseudonym" ref="ad47ff45f8d58367160aaa312f49d9371" args="(const char *szFoldername, const char *szFilename)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_pseudonym.html#ac4914854cf1643e776b182055f40e97a">OTPseudonym::SavePseudonym</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>szFoldername</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>szFilename</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l03649">3649</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != szFoldername);
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != szFilename);

    <a class="code" href="class_o_t_string.html">OTString</a> strNym;
    this-&gt;<a class="code" href="class_o_t_pseudonym.html#ac4914854cf1643e776b182055f40e97a">SavePseudonym</a>(strNym);
    <span class="comment">// -------------------------------------</span>
    <span class="keywordtype">bool</span> bSaved = <a class="code" href="namespace_o_t_d_b.html#a7ec0a905bba2c1c8ba5b1e873e12eab4">OTDB::StorePlainString</a>(strNym.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(), szFoldername, szFilename);
    <span class="keywordflow">if</span> (!bSaved)
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error saving file: %s%s%s\n&quot;</span>, __FUNCTION__,
                      szFoldername, <a class="code" href="class_o_t_log.html#a42d3c91ff84ecae0690e34efb4619a77">OTLog::PathSeparator</a>(), szFilename);
    <span class="comment">// --------------------------------------------------------------------</span>
    <span class="keywordflow">return</span> bSaved;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a5098bb37f76e316a21321771977e1fed"></a><!-- doxytag: member="OTPseudonym::SavePseudonym" ref="a5098bb37f76e316a21321771977e1fed" args="(OTString &amp;strNym)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_pseudonym.html#ac4914854cf1643e776b182055f40e97a">OTPseudonym::SavePseudonym</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strNym</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l03966">3966</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_o_t_string.html">OTString</a> nymID;
    this-&gt;<a class="code" href="class_o_t_pseudonym.html#a1775c7aedd0dd25b2faf3f78dcccabe7">GetIdentifier</a>(nymID);

    strNym.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;&lt;?xml version=\&quot;%s\&quot;?&gt;\n&quot;</span>, <span class="stringliteral">&quot;2.0&quot;</span>);

    <span class="keywordflow">if</span> (m_lUsageCredits == 0)
        strNym.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;&lt;OTuser version=\&quot;%s\&quot;\n&quot;</span>
                           <span class="stringliteral">&quot; nymID=\&quot;%s\&quot;&quot;</span>
                           <span class="stringliteral">&quot;&gt;\n\n&quot;</span>,
                           m_strVersion.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(),
                           nymID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>()
                           );
    <span class="keywordflow">else</span>
        strNym.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;&lt;OTuser version=\&quot;%s\&quot;\n&quot;</span>
                           <span class="stringliteral">&quot; nymID=\&quot;%s\&quot;\n&quot;</span>
                           <span class="stringliteral">&quot; usageCredits=\&quot;%lld\&quot;&quot;</span>
                           <span class="stringliteral">&quot;&gt;\n\n&quot;</span>,
                           m_strVersion.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(),
                           nymID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(),
                           m_lUsageCredits
                           );
    <span class="comment">// *************************************************************************</span>

    <span class="comment">// ----------------------------------------------------</span>
    this-&gt;<a class="code" href="class_o_t_pseudonym.html#a9a6189232f8cde0df210920ce3839199">SerializeNymIDSource</a>(strNym);
    <span class="comment">// ----------------------------------------------------</span>

    <span class="comment">// For now I&#39;m saving the credential list to a separate file. (And then of course,</span>
    <span class="comment">// each credential also gets its own file.) We load the credential list file,</span>
    <span class="comment">// and any associated credentials, before loading the Nymfile proper.</span>
    <span class="comment">// Then we use the keys from those credentials possibly to verify the signature on</span>
    <span class="comment">// the Nymfile (or not, in the case of the server which uses its own key.)</span>

<span class="comment">//  this-&gt;SaveCredentialsToString(strNym);</span>

    <span class="comment">// *************************************************************************</span>
    int64_t lRequestNum;

    <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_pseudonym_8hpp.html#a973d5530da5375de1f5e0f75c7780869">mapOfRequestNums</a>, m_mapRequestNum)
    {
        std::string strServerID = (*it).first;
        lRequestNum = (*it).second;

        strNym.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;&lt;requestNum\n&quot;</span>
                           <span class="stringliteral">&quot; serverID=\&quot;%s\&quot;\n&quot;</span>
                           <span class="stringliteral">&quot; currentRequestNum=\&quot;%lld\&quot;&quot;</span>
                           <span class="stringliteral">&quot;/&gt;\n\n&quot;</span>,
                           strServerID.c_str(),
                           lRequestNum
                           );
    }
    <span class="comment">// -------------------------------------</span>
    int64_t lHighestNum;

    <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_pseudonym_8hpp.html#a0ed9ca5cfdfd9902dd8bd342d344a275">mapOfHighestNums</a>, m_mapHighTransNo)
    {
        std::string strServerID = (*it).first;
        lHighestNum = (*it).second;

        strNym.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;&lt;highestTransNum\n&quot;</span>
                           <span class="stringliteral">&quot; serverID=\&quot;%s\&quot;\n&quot;</span>
                           <span class="stringliteral">&quot; mostRecent=\&quot;%lld\&quot;&quot;</span>
                           <span class="stringliteral">&quot;/&gt;\n\n&quot;</span>,
                           strServerID.c_str(),
                           lHighestNum
                           );
    }
    <span class="comment">// -------------------------------------</span>
    <span class="comment">// When you delete a Nym, it just marks it.</span>
    <span class="comment">// Actual deletion occurs during maintenance sweep (targeting marked nyms...)</span>
    <span class="comment">//</span>
    <span class="keywordflow">if</span> (m_bMarkForDeletion)
        strNym.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;&lt;MARKED_FOR_DELETION&gt;\n&quot;</span>
                           <span class="stringliteral">&quot;%s&lt;/MARKED_FOR_DELETION&gt;\n\n&quot;</span>,
                           <span class="stringliteral">&quot;THIS NYM HAS BEEN MARKED FOR DELETION AT ITS OWN REQUEST&quot;</span>);
    <span class="comment">// -------------------------------------</span>
    int64_t lTransactionNumber = 0;

    <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_pseudonym_8hpp.html#ac99ad82dc6c392a0a8c851c6041b62f1">mapOfTransNums</a>, m_mapTransNum)
    {
        std::string strServerID     = (*it).first;
        <a class="code" href="_o_t_pseudonym_8hpp.html#a94632bfde6cf91c8294122f77527bcf1">dequeOfTransNums</a> * pDeque   = (it-&gt;second);

        <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pDeque);

<span class="comment">//      if (!(pDeque-&gt;empty()) &amp;&amp; (strServerID.size() &gt; 0) )</span>
<span class="comment">//      {</span>
<span class="comment">//          for (uint32_t i = 0; i &lt; pDeque-&gt;size(); i++)</span>
<span class="comment">//          {</span>
<span class="comment">//              lTransactionNumber = pDeque-&gt;at(i);</span>
<span class="comment">//</span>
<span class="comment">//              strNym.Concatenate(&quot;&lt;transactionNum\n&quot;</span>
<span class="comment">//                                 &quot; serverID=\&quot;%s\&quot;\n&quot;</span>
<span class="comment">//                                 &quot; transactionNum=\&quot;%lld\&quot;&quot;</span>
<span class="comment">//                                 &quot;/&gt;\n\n&quot;,</span>
<span class="comment">//                                 strServerID.c_str(),</span>
<span class="comment">//                                 lTransactionNumber</span>
<span class="comment">//                                 );</span>
<span class="comment">//          }</span>
<span class="comment">//      }</span>

        <span class="keywordflow">if</span> (!(pDeque-&gt;empty()) &amp;&amp; (strServerID.size() &gt; 0) )
        {
            <a class="code" href="class_o_t_num_list.html">OTNumList</a> theList;

            <span class="keywordflow">for</span> (uint32_t i = 0; i &lt; pDeque-&gt;size(); i++)
            {
                lTransactionNumber = pDeque-&gt;at(i);
                theList.Add(lTransactionNumber);
            }
            <a class="code" href="class_o_t_string.html">OTString</a> strTemp;
            <span class="keywordflow">if</span> ((theList.<a class="code" href="class_o_t_num_list.html#a5772668ef4da7be4d83eb7c7c90838de">Count</a>() &gt; 0) &amp;&amp; theList.<a class="code" href="class_o_t_num_list.html#a3ebc9e933a8c248d0fdd0b11a3c49fe4">Output</a>(strTemp) &amp;&amp; strTemp.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>())
            {
                <span class="keyword">const</span> <a class="code" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> ascTemp(strTemp);

                <span class="keywordflow">if</span> (ascTemp.Exists())
                    strNym.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;&lt;transactionNums serverID=\&quot;%s\&quot;&gt;\n%s&lt;/transactionNums&gt;\n\n&quot;</span>,
                                       strServerID.c_str(), ascTemp.Get());
            }
        }
    } <span class="comment">// for</span>

    <span class="comment">// -------------------------------------</span>

    lTransactionNumber = 0;

    <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_pseudonym_8hpp.html#ac99ad82dc6c392a0a8c851c6041b62f1">mapOfTransNums</a>, m_mapIssuedNum)
    {
        std::string strServerID     = (*it).first;
        <a class="code" href="_o_t_pseudonym_8hpp.html#a94632bfde6cf91c8294122f77527bcf1">dequeOfTransNums</a> * pDeque   = (it-&gt;second);

        <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pDeque);

<span class="comment">//      if (!(pDeque-&gt;empty()) &amp;&amp; (strServerID.size() &gt; 0) )</span>
<span class="comment">//      {</span>
<span class="comment">//          for (uint32_t i = 0; i &lt; pDeque-&gt;size(); i++)</span>
<span class="comment">//          {</span>
<span class="comment">//              lTransactionNumber = pDeque-&gt;at(i);</span>
<span class="comment">//</span>
<span class="comment">//              strNym.Concatenate(&quot;&lt;issuedNum\n&quot;</span>
<span class="comment">//                                 &quot; serverID=\&quot;%s\&quot;\n&quot;</span>
<span class="comment">//                                 &quot; transactionNum=\&quot;%lld\&quot;&quot;</span>
<span class="comment">//                                 &quot;/&gt;\n\n&quot;,</span>
<span class="comment">//                                 strServerID.c_str(),</span>
<span class="comment">//                                 lTransactionNumber</span>
<span class="comment">//                                 );</span>
<span class="comment">//          }</span>
<span class="comment">//      }</span>

        <span class="keywordflow">if</span> (!(pDeque-&gt;empty()) &amp;&amp; (strServerID.size() &gt; 0) )
        {
            <a class="code" href="class_o_t_num_list.html">OTNumList</a> theList;

            <span class="keywordflow">for</span> (uint32_t i = 0; i &lt; pDeque-&gt;size(); i++)
            {
                lTransactionNumber = pDeque-&gt;at(i);
                theList.Add(lTransactionNumber);
            }
            <a class="code" href="class_o_t_string.html">OTString</a> strTemp;
            <span class="keywordflow">if</span> ((theList.<a class="code" href="class_o_t_num_list.html#a5772668ef4da7be4d83eb7c7c90838de">Count</a>() &gt; 0) &amp;&amp; theList.<a class="code" href="class_o_t_num_list.html#a3ebc9e933a8c248d0fdd0b11a3c49fe4">Output</a>(strTemp) &amp;&amp; strTemp.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>())
            {
                <span class="keyword">const</span> <a class="code" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> ascTemp(strTemp);

                <span class="keywordflow">if</span> (ascTemp.Exists())
                    strNym.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;&lt;issuedNums serverID=\&quot;%s\&quot;&gt;\n%s&lt;/issuedNums&gt;\n\n&quot;</span>,
                                       strServerID.c_str(), ascTemp.Get());
            }
        }
    } <span class="comment">// for</span>

    <span class="comment">// -------------------------------------</span>

    lTransactionNumber = 0;

    <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_pseudonym_8hpp.html#ac99ad82dc6c392a0a8c851c6041b62f1">mapOfTransNums</a>, m_mapTentativeNum)
    {
        std::string strServerID     = (*it).first;
        <a class="code" href="_o_t_pseudonym_8hpp.html#a94632bfde6cf91c8294122f77527bcf1">dequeOfTransNums</a> * pDeque   = (it-&gt;second);

        <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pDeque);

<span class="comment">//      if (!(pDeque-&gt;empty()) &amp;&amp; (strServerID.size() &gt; 0) )</span>
<span class="comment">//      {</span>
<span class="comment">//          for (uint32_t i = 0; i &lt; pDeque-&gt;size(); i++)</span>
<span class="comment">//          {</span>
<span class="comment">//              lTransactionNumber = pDeque-&gt;at(i);</span>
<span class="comment">//</span>
<span class="comment">//              strNym.Concatenate(&quot;&lt;tentativeNum\n&quot;</span>
<span class="comment">//                                 &quot; serverID=\&quot;%s\&quot;\n&quot;</span>
<span class="comment">//                                 &quot; transactionNum=\&quot;%lld\&quot;&quot;</span>
<span class="comment">//                                 &quot;/&gt;\n\n&quot;,</span>
<span class="comment">//                                 strServerID.c_str(),</span>
<span class="comment">//                                 lTransactionNumber</span>
<span class="comment">//                                 );</span>
<span class="comment">//          }</span>
<span class="comment">//      }</span>

        <span class="keywordflow">if</span> (!(pDeque-&gt;empty()) &amp;&amp; (strServerID.size() &gt; 0) )
        {
            <a class="code" href="class_o_t_num_list.html">OTNumList</a> theList;

            <span class="keywordflow">for</span> (uint32_t i = 0; i &lt; pDeque-&gt;size(); i++)
            {
                lTransactionNumber = pDeque-&gt;at(i);
                theList.Add(lTransactionNumber);
            }
            <a class="code" href="class_o_t_string.html">OTString</a> strTemp;
            <span class="keywordflow">if</span> ((theList.<a class="code" href="class_o_t_num_list.html#a5772668ef4da7be4d83eb7c7c90838de">Count</a>() &gt; 0) &amp;&amp; theList.<a class="code" href="class_o_t_num_list.html#a3ebc9e933a8c248d0fdd0b11a3c49fe4">Output</a>(strTemp) &amp;&amp; strTemp.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>())
            {
                <span class="keyword">const</span> <a class="code" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> ascTemp(strTemp);

                <span class="keywordflow">if</span> (ascTemp.Exists())
                    strNym.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;&lt;tentativeNums serverID=\&quot;%s\&quot;&gt;\n%s&lt;/tentativeNums&gt;\n\n&quot;</span>,
                                       strServerID.c_str(), ascTemp.Get());
            }
        }

    } <span class="comment">// for</span>

    <span class="comment">// -------------------------------------</span>

    <span class="comment">// although mapOfTransNums is used, in this case,</span>
    <span class="comment">// request numbers are what is actually being stored.</span>
    <span class="comment">// The data structure just happened to be appropriate</span>
    <span class="comment">// in this case, with generic manipulation functions</span>
    <span class="comment">// already written, so I used that pre-existing system.</span>
    <span class="comment">//</span>
    <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_pseudonym_8hpp.html#ac99ad82dc6c392a0a8c851c6041b62f1">mapOfTransNums</a>, m_mapAcknowledgedNum)
    {
        std::string strServerID     = (*it).first;
        <a class="code" href="_o_t_pseudonym_8hpp.html#a94632bfde6cf91c8294122f77527bcf1">dequeOfTransNums</a> * pDeque   = (it-&gt;second);

        <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pDeque);

<span class="comment">//      if (!(pDeque-&gt;empty()) &amp;&amp; (strServerID.size() &gt; 0) )</span>
<span class="comment">//      {</span>
<span class="comment">//          for (uint32_t i = 0; i &lt; pDeque-&gt;size(); i++)</span>
<span class="comment">//          {</span>
<span class="comment">//              const int64_t lRequestNumber = pDeque-&gt;at(i);</span>
<span class="comment">//</span>
<span class="comment">//              strNym.Concatenate(&quot;&lt;acknowledgedNum\n&quot;</span>
<span class="comment">//                                 &quot; serverID=\&quot;%s\&quot;\n&quot;</span>
<span class="comment">//                                 &quot; requestNum=\&quot;%lld\&quot;&quot;</span>
<span class="comment">//                                 &quot;/&gt;\n\n&quot;,</span>
<span class="comment">//                                 strServerID.c_str(),</span>
<span class="comment">//                                 lRequestNumber</span>
<span class="comment">//                                 );</span>
<span class="comment">//          }</span>
<span class="comment">//      }</span>

        <span class="keywordflow">if</span> (!(pDeque-&gt;empty()) &amp;&amp; (strServerID.size() &gt; 0) )
        {
            <a class="code" href="class_o_t_num_list.html">OTNumList</a> theList;

            <span class="keywordflow">for</span> (uint32_t i = 0; i &lt; pDeque-&gt;size(); i++)
            {
                <span class="keyword">const</span> int64_t lRequestNumber = pDeque-&gt;at(i);
                theList.Add(lRequestNumber);
            }
            <a class="code" href="class_o_t_string.html">OTString</a> strTemp;
            <span class="keywordflow">if</span> ((theList.<a class="code" href="class_o_t_num_list.html#a5772668ef4da7be4d83eb7c7c90838de">Count</a>() &gt; 0) &amp;&amp; theList.<a class="code" href="class_o_t_num_list.html#a3ebc9e933a8c248d0fdd0b11a3c49fe4">Output</a>(strTemp) &amp;&amp; strTemp.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>())
            {
                <span class="keyword">const</span> <a class="code" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> ascTemp(strTemp);

                <span class="keywordflow">if</span> (ascTemp.Exists())
                    strNym.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;&lt;ackNums serverID=\&quot;%s\&quot;&gt;\n%s&lt;/ackNums&gt;\n\n&quot;</span>,
                                       strServerID.c_str(), ascTemp.Get());
            }
        }

    } <span class="comment">// for</span>

    <span class="comment">// -------------------------------------</span>

    <span class="keywordflow">if</span> (!(m_dequeMail.empty()))
    {
        <span class="keywordflow">for</span> (uint32_t i = 0; i &lt; m_dequeMail.size(); i++)
        {
            <a class="code" href="class_o_t_message.html">OTMessage</a> * pMessage = m_dequeMail.at(i);
            <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pMessage);

            <a class="code" href="class_o_t_string.html">OTString</a> strMail(*pMessage);

            <a class="code" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> ascMail;

            <span class="keywordflow">if</span> (strMail.Exists())
                ascMail.<a class="code" href="class_o_t_a_s_c_i_i_armor.html#ad898bd63a4c37a97f64acfa7514409cc">SetString</a>(strMail);

            <span class="keywordflow">if</span> (ascMail.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>())
                strNym.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;&lt;mailMessage&gt;\n&quot;</span>
                                   <span class="stringliteral">&quot;%s&lt;/mailMessage&gt;\n\n&quot;</span>,
                                   ascMail.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
        }
    }

    <span class="comment">// -------------------------------------</span>


    <span class="keywordflow">if</span> (!(m_dequeOutmail.empty()))
    {
        <span class="keywordflow">for</span> (uint32_t i = 0; i &lt; m_dequeOutmail.size(); i++)
        {
            <a class="code" href="class_o_t_message.html">OTMessage</a> * pMessage = m_dequeOutmail.at(i);
            <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pMessage);

            <a class="code" href="class_o_t_string.html">OTString</a> strOutmail(*pMessage);

            <a class="code" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> ascOutmail;

            <span class="keywordflow">if</span> (strOutmail.Exists())
                ascOutmail.<a class="code" href="class_o_t_a_s_c_i_i_armor.html#ad898bd63a4c37a97f64acfa7514409cc">SetString</a>(strOutmail);

            <span class="keywordflow">if</span> (ascOutmail.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>())
                strNym.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;&lt;outmailMessage&gt;\n&quot;</span>
                                   <span class="stringliteral">&quot;%s&lt;/outmailMessage&gt;\n\n&quot;</span>,
                                   ascOutmail.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
        }
    }

    <span class="comment">// -------------------------------------</span>

    <span class="keywordflow">if</span> (!(m_dequeOutpayments.empty()))
    {
        <span class="keywordflow">for</span> (uint32_t i = 0; i &lt; m_dequeOutpayments.size(); i++)
        {
            <a class="code" href="class_o_t_message.html">OTMessage</a> * pMessage = m_dequeOutpayments.at(i);
            <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pMessage);

            <a class="code" href="class_o_t_string.html">OTString</a> strOutpayments(*pMessage);

            <a class="code" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> ascOutpayments;

            <span class="keywordflow">if</span> (strOutpayments.Exists())
                ascOutpayments.<a class="code" href="class_o_t_a_s_c_i_i_armor.html#ad898bd63a4c37a97f64acfa7514409cc">SetString</a>(strOutpayments);

            <span class="keywordflow">if</span> (ascOutpayments.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>())
                strNym.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;&lt;outpaymentsMessage&gt;\n&quot;</span>
                                   <span class="stringliteral">&quot;%s&lt;/outpaymentsMessage&gt;\n\n&quot;</span>,
                                   ascOutpayments.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
        }
    }

    <span class="comment">// -------------------------------------</span>
    <span class="comment">// These are used on the server side.</span>
    <span class="comment">// (That&#39;s why you don&#39;t see the server ID saved here.)</span>
    <span class="comment">//</span>
    <span class="keywordflow">if</span> (!(m_setOpenCronItems.empty()))
    {
        <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(std::set&lt;int64_t&gt;, m_setOpenCronItems)
        {
            int64_t lCronItemTransNum = *it;

            strNym.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;&lt;hasOpenCronItem ID=\&quot;%lld\&quot; /&gt;\n\n&quot;</span>,
                               lCronItemTransNum);
        }
    }

    <span class="comment">// -------------------------------------</span>
    <span class="comment">// These are used on the server side.</span>
    <span class="comment">// (That&#39;s why you don&#39;t see the server ID saved here.)</span>
    <span class="comment">//</span>
    <span class="keywordflow">if</span> (!(m_setAccounts.empty()))
    {
        <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(std::set&lt;std::string&gt;, m_setAccounts)
        {
            std::string strAcctID = *it;

            strNym.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;&lt;ownsAssetAcct ID=\&quot;%s\&quot; /&gt;\n\n&quot;</span>,
                               strAcctID.c_str());
        }
    }

    <span class="comment">// -------------------------------------</span>
    <span class="comment">// client-side</span>
    <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_pseudonym_8hpp.html#ad982f28c8f82a1e667f43ebf775bbdb8">mapOfIdentifiers</a>, m_mapNymboxHash)
    {
        std::string strServerID     = (*it).first;
        <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> &amp; theID        = (*it).second;

        <span class="keywordflow">if</span> ( (strServerID.size() &gt; 0) &amp;&amp; !theID.<a class="code" href="class_o_t_data.html#a947528765516223eb03bee7745eb8c07">IsEmpty</a>())
        {
            <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strNymboxHash(theID);
            strNym.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;&lt;nymboxHashItem\n&quot;</span>
                               <span class="stringliteral">&quot; serverID=\&quot;%s\&quot;\n&quot;</span>
                               <span class="stringliteral">&quot; nymboxHash=\&quot;%s\&quot;&quot;</span>
                               <span class="stringliteral">&quot;/&gt;\n\n&quot;</span>,
                               strServerID.c_str(),
                               strNymboxHash.Get());
        }
    } <span class="comment">// for</span>

    <span class="comment">// -------------------------------------</span>
    <span class="comment">// client-side</span>
    <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_pseudonym_8hpp.html#ad982f28c8f82a1e667f43ebf775bbdb8">mapOfIdentifiers</a>, m_mapRecentHash)
    {
        std::string strServerID     = (*it).first;
        <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> &amp; theID        = (*it).second;

        <span class="keywordflow">if</span> ( (strServerID.size() &gt; 0) &amp;&amp; !theID.<a class="code" href="class_o_t_data.html#a947528765516223eb03bee7745eb8c07">IsEmpty</a>())
        {
            <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strRecentHash(theID);
            strNym.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;&lt;recentHashItem\n&quot;</span>
                               <span class="stringliteral">&quot; serverID=\&quot;%s\&quot;\n&quot;</span>
                               <span class="stringliteral">&quot; recentHash=\&quot;%s\&quot;&quot;</span>
                               <span class="stringliteral">&quot;/&gt;\n\n&quot;</span>,
                               strServerID.c_str(),
                               strRecentHash.Get());
        }
    } <span class="comment">// for</span>

    <span class="comment">// -------------------------------------</span>
    <span class="comment">// server-side</span>
    <span class="keywordflow">if</span> (!m_NymboxHash.<a class="code" href="class_o_t_data.html#a947528765516223eb03bee7745eb8c07">IsEmpty</a>())
    {
        <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strNymboxHash(m_NymboxHash);
        strNym.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;&lt;nymboxHash\n&quot;</span>
                           <span class="stringliteral">&quot; value=\&quot;%s\&quot;&quot;</span>
                           <span class="stringliteral">&quot;/&gt;\n\n&quot;</span>,
                           strNymboxHash.Get());
    }

    <span class="comment">// -------------------------------------</span>

    <span class="comment">// -------------------------------------</span>
    <span class="comment">// client-side</span>
    <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_pseudonym_8hpp.html#ad982f28c8f82a1e667f43ebf775bbdb8">mapOfIdentifiers</a>, m_mapInboxHash)
    {
        std::string strAcctID       = (*it).first;
        <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> &amp; theID        = (*it).second;

        <span class="keywordflow">if</span> ( (strAcctID.size() &gt; 0) &amp;&amp; !theID.<a class="code" href="class_o_t_data.html#a947528765516223eb03bee7745eb8c07">IsEmpty</a>())
        {
            <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strHash(theID);
            strNym.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;&lt;inboxHashItem\n&quot;</span>
                               <span class="stringliteral">&quot; accountID=\&quot;%s\&quot;\n&quot;</span>
                               <span class="stringliteral">&quot; hashValue=\&quot;%s\&quot;&quot;</span>
                               <span class="stringliteral">&quot;/&gt;\n\n&quot;</span>,
                               strAcctID.c_str(),
                               strHash.Get());
        }
    } <span class="comment">// for</span>

    <span class="comment">// -------------------------------------</span>
    <span class="comment">// client-side</span>
    <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_pseudonym_8hpp.html#ad982f28c8f82a1e667f43ebf775bbdb8">mapOfIdentifiers</a>, m_mapOutboxHash)
    {
        std::string strAcctID       = (*it).first;
        <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> &amp; theID        = (*it).second;

        <span class="keywordflow">if</span> ( (strAcctID.size() &gt; 0) &amp;&amp; !theID.<a class="code" href="class_o_t_data.html#a947528765516223eb03bee7745eb8c07">IsEmpty</a>())
        {
            <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strHash(theID);
            strNym.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;&lt;outboxHashItem\n&quot;</span>
                               <span class="stringliteral">&quot; accountID=\&quot;%s\&quot;\n&quot;</span>
                               <span class="stringliteral">&quot; hashValue=\&quot;%s\&quot;&quot;</span>
                               <span class="stringliteral">&quot;/&gt;\n\n&quot;</span>,
                               strAcctID.c_str(),
                               strHash.Get());
        }
    } <span class="comment">// for</span>

    <span class="comment">// -------------------------------------</span>

    strNym.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;&lt;/OTuser&gt;\n&quot;</span>);

    <span class="keywordflow">return</span> <span class="keyword">true</span>;

}
</pre></div>
</div>
</div>
<a class="anchor" id="a72513ba4307b996d8e0417b178cb70db"></a><!-- doxytag: member="OTPseudonym::SavePseudonym" ref="a72513ba4307b996d8e0417b178cb70db" args="(std::ofstream &amp;ofs)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_pseudonym.html#ac4914854cf1643e776b182055f40e97a">OTPseudonym::SavePseudonym</a> </td>
          <td>(</td>
          <td class="paramtype">std::ofstream &amp;&#160;</td>
          <td class="paramname"><em>ofs</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l03666">3666</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_o_t_string.html">OTString</a> strNym;
    this-&gt;<a class="code" href="class_o_t_pseudonym.html#ac4914854cf1643e776b182055f40e97a">SavePseudonym</a>(strNym);

    ofs &lt;&lt; strNym.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();

    <span class="keywordflow">return</span> <span class="keyword">true</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a6e04fda4d0beec8fb21f7d2749bf3f6b"></a><!-- doxytag: member="OTPseudonym::SavePseudonymWallet" ref="a6e04fda4d0beec8fb21f7d2749bf3f6b" args="(OTString &amp;strOutput) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_pseudonym.html#a6e04fda4d0beec8fb21f7d2749bf3f6b">OTPseudonym::SavePseudonymWallet</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strOutput</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l03281">3281</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_o_t_string.html">OTString</a> nymID;
    <a class="code" href="class_o_t_pseudonym.html#a1775c7aedd0dd25b2faf3f78dcccabe7">GetIdentifier</a>(nymID);

    <a class="code" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> ascName;

    <span class="keywordflow">if</span> (m_strName.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>()) <span class="comment">// name is in the clear in memory, and base64 in storage.</span>
    {
        ascName.<a class="code" href="class_o_t_a_s_c_i_i_armor.html#ad898bd63a4c37a97f64acfa7514409cc">SetString</a>(m_strName, <span class="keyword">false</span>); <span class="comment">// linebreaks == false</span>
    }

    strOutput.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;&lt;pseudonym name=\&quot;%s\&quot;\n&quot;</span>
            <span class="stringliteral">&quot; nymID=\&quot;%s\&quot; /&gt;\n\n&quot;</span>,
            ascName.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(),
            nymID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());

    <span class="keywordflow">return</span> <span class="keyword">true</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a7ef7ca8c2748070b1738c2826138f723"></a><!-- doxytag: member="OTPseudonym::SavePseudonymWallet" ref="a7ef7ca8c2748070b1738c2826138f723" args="(std::ofstream &amp;ofs) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_pseudonym.html#a6e04fda4d0beec8fb21f7d2749bf3f6b">OTPseudonym::SavePseudonymWallet</a> </td>
          <td>(</td>
          <td class="paramtype">std::ofstream &amp;&#160;</td>
          <td class="paramname"><em>ofs</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l03302">3302</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_o_t_string.html">OTString</a> strOutput;

    <span class="keywordflow">if</span> (<a class="code" href="class_o_t_pseudonym.html#a6e04fda4d0beec8fb21f7d2749bf3f6b">SavePseudonymWallet</a>(strOutput))
        ofs &lt;&lt; strOutput.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();
    <span class="keywordflow">else</span>
        <span class="keywordflow">return</span> <span class="keyword">false</span>;

    <span class="keywordflow">return</span> <span class="keyword">true</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a7f665ecc7e3f70d32e8e7ffbca5b3ce2"></a><!-- doxytag: member="OTPseudonym::SavePublicKey" ref="a7f665ecc7e3f70d32e8e7ffbca5b3ce2" args="(const OTString &amp;strPath) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_pseudonym.html#a7f665ecc7e3f70d32e8e7ffbca5b3ce2">OTPseudonym::SavePublicKey</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strPath</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l03317">3317</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keyword">const</span> <span class="keywordtype">char</span> * szFoldername   = <a class="code" href="class_o_t_folders.html#a691fb355263301e19f8239915cddf3f2">OTFolders::Pubkey</a>().<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();
    <span class="keyword">const</span> <span class="keywordtype">char</span> * szFilename = strPath.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();

    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != szFoldername);
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != szFilename);

    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != m_pkeypair);

    <span class="comment">// By passing in an OTString instead of OTASCIIArmor, it knows to add the bookends</span>
    <span class="comment">// ----- BEGIN PUBLIC KEY  etc.  These bookends are necessary for OTASCIIArmor to later</span>
    <span class="comment">// read the thing back up into memory again.</span>
    <a class="code" href="class_o_t_string.html">OTString</a> strKey;

    <span class="keywordflow">if</span> (m_pkeypair-&gt;<a class="code" href="class_o_t_keypair.html#a67aebd0a39826bbc429bb2676fde9fcd">GetPublicKey</a>(strKey, <span class="keyword">false</span>)) <span class="comment">// false means &quot;do not ESCAPE the bookends&quot;</span>
        <span class="comment">// Ie we&#39;ll get ----------- instead of - ---------</span>
    {
        <span class="keywordtype">bool</span> bStored = <a class="code" href="namespace_o_t_d_b.html#a7ec0a905bba2c1c8ba5b1e873e12eab4">OTDB::StorePlainString</a>(strKey.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(), szFoldername, szFilename);

        <span class="keywordflow">if</span> (!bStored)
        {
            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;Failure in OTPseudonym::SavePublicKey while saving to storage: %s%s%s\n&quot;</span>,
                          szFoldername, <a class="code" href="class_o_t_log.html#a42d3c91ff84ecae0690e34efb4619a77">OTLog::PathSeparator</a>(), szFilename);
            <span class="keywordflow">return</span> <span class="keyword">false</span>;
        }
    }
    <span class="keywordflow">else</span>
    {
        <a class="code" href="class_o_t_log.html#a5acd90ac91c2618f395b0ff37ad4f8ee">OTLog::Error</a>(<span class="stringliteral">&quot;Error in OTPseudonym::SavePublicKey: unable to GetPublicKey from Nym\n&quot;</span>);
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }

    <span class="keywordflow">return</span> <span class="keyword">true</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a703d0ce5ab0e67fb3a6c5594928a881d"></a><!-- doxytag: member="OTPseudonym::SavePublicKey" ref="a703d0ce5ab0e67fb3a6c5594928a881d" args="(std::ofstream &amp;ofs) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_pseudonym.html#a7f665ecc7e3f70d32e8e7ffbca5b3ce2">OTPseudonym::SavePublicKey</a> </td>
          <td>(</td>
          <td class="paramtype">std::ofstream &amp;&#160;</td>
          <td class="paramname"><em>ofs</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l03354">3354</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != m_pkeypair);

    <span class="comment">// By passing in an OTString instead of OTASCIIArmor, it knows to add the bookends</span>
    <span class="comment">// ----- BEGIN PUBLIC KEY  etc.  These bookends are necessary for OTASCIIArmor to later</span>
    <span class="comment">// read the thing back up into memory again.</span>
    <a class="code" href="class_o_t_string.html">OTString</a> strKey;

    <span class="keywordflow">if</span> (m_pkeypair-&gt;<a class="code" href="class_o_t_keypair.html#a67aebd0a39826bbc429bb2676fde9fcd">GetPublicKey</a>(strKey, <span class="keyword">false</span>)) <span class="comment">// false means &quot;do not ESCAPE the bookends&quot;</span>
        <span class="comment">// Ie we&#39;ll get ----------- instead of - ---------</span>
    {
        strKey.<a class="code" href="class_o_t_string.html#a15db86e9fd24f1750fa669643a1d8257">WriteToFile</a>(ofs);
    }
    <span class="keywordflow">else</span>
    {
        <a class="code" href="class_o_t_log.html#a5acd90ac91c2618f395b0ff37ad4f8ee">OTLog::Error</a>(<span class="stringliteral">&quot;Error in OTPseudonym::SavePublicKey: unable to GetPublicKey from Nym\n&quot;</span>);
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }

    <span class="keywordflow">return</span> <span class="keyword">true</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a5d08ef86097db038c2c4fd30034f5dc8"></a><!-- doxytag: member="OTPseudonym::SaveSignedNymfile" ref="a5d08ef86097db038c2c4fd30034f5dc8" args="(OTPseudonym &amp;SIGNER_NYM)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_pseudonym.html#a5d08ef86097db038c2c4fd30034f5dc8">OTPseudonym::SaveSignedNymfile</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;&#160;</td>
          <td class="paramname"><em>SIGNER_NYM</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l05364">5364</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// Get the Nym&#39;s ID in string form</span>
    <a class="code" href="class_o_t_string.html">OTString</a> strNymID;
    this-&gt;<a class="code" href="class_o_t_pseudonym.html#a1775c7aedd0dd25b2faf3f78dcccabe7">GetIdentifier</a>(strNymID);

    <span class="comment">// Create an OTSignedFile object, giving it the filename (the ID) and the local directory (&quot;nyms&quot;)</span>
    <a class="code" href="class_o_t_signed_file.html">OTSignedFile</a>    theNymfile(<a class="code" href="class_o_t_folders.html#a3bcdf222bf351ad8b5cfb37e9b8e5143">OTFolders::Nym</a>().Get(), strNymID);
    theNymfile.GetFilename(m_strNymfile);

    <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(2, <span class="stringliteral">&quot;Saving nym to: %s\n&quot;</span>, m_strNymfile.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());

    <span class="comment">// First we save this nym to a string...</span>
    <span class="comment">// Specifically, the file payload string on the OTSignedFile object.</span>
    this-&gt;<a class="code" href="class_o_t_pseudonym.html#ac4914854cf1643e776b182055f40e97a">SavePseudonym</a>(theNymfile.GetFilePayload());

    <span class="comment">// Now the OTSignedFile contains the path, the filename, AND the</span>
    <span class="comment">// contents of the Nym itself, saved to a string inside the OTSignedFile object.</span>

    <span class="keywordflow">if</span> (theNymfile.SignContract(SIGNER_NYM) &amp;&amp;
        theNymfile.SaveContract())
    {
        <span class="keyword">const</span> <span class="keywordtype">bool</span> bSaved = theNymfile.SaveFile();

        <span class="keywordflow">if</span> (!bSaved)
        {
            <a class="code" href="class_o_t_string.html">OTString</a> strSignerNymID;
            SIGNER_NYM.<a class="code" href="class_o_t_pseudonym.html#a1775c7aedd0dd25b2faf3f78dcccabe7">GetIdentifier</a>(strSignerNymID);
            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Failed while calling theNymfile.SaveFile() for Nym %s using Signer Nym %s\n&quot;</span>,
                          __FUNCTION__, strNymID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(), strSignerNymID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
        }

        <span class="keywordflow">return</span> bSaved;
    }
    <span class="keywordflow">else</span>
    {
        <a class="code" href="class_o_t_string.html">OTString</a> strSignerNymID;
        SIGNER_NYM.<a class="code" href="class_o_t_pseudonym.html#a1775c7aedd0dd25b2faf3f78dcccabe7">GetIdentifier</a>(strSignerNymID);
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Failed trying to sign and save Nymfile for Nym %s using Signer Nym %s\n&quot;</span>,
                      __FUNCTION__, strNymID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(), strSignerNymID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
    }

    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a395ce52dec4e07f04fb66521897c9cf2"></a><!-- doxytag: member="OTPseudonym::Savex509CertAndPrivateKey" ref="a395ce52dec4e07f04fb66521897c9cf2" args="(bool bCreateFile=true, const OTString *pstrReason=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_pseudonym.html#a395ce52dec4e07f04fb66521897c9cf2">OTPseudonym::Savex509CertAndPrivateKey</a> </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>bCreateFile</em> = <code>true</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> *&#160;</td>
          <td class="paramname"><em>pstrReason</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l01180">1180</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// ---------------------------------------</span>
    <a class="code" href="class_o_t_string.html">OTString</a>    strOutput;
    <span class="keyword">const</span> <span class="keywordtype">bool</span>  bSuccess = m_pkeypair-&gt;<a class="code" href="class_o_t_keypair.html#af431803f4f3e6635d4ecf71c211b2873">SaveAndReloadBothKeysFromTempFile</a>(&amp;strOutput, pstrReason);
    <span class="comment">// ---------------------------------------</span>
    <span class="comment">//</span>
    <span class="comment">// At this point, the Nym&#39;s private key is set, and its public key is also set.</span>
    <span class="comment">// So the object in memory is good to go.</span>
    <span class="comment">// Now we just need to create some files, especially where the keys are stored,</span>
    <span class="comment">// since the Nym normally never writes to those files (just reads.)</span>
    <span class="comment">//</span>
    <span class="keywordflow">if</span> (bSuccess)
    {
        <span class="comment">// ------------------------------------------</span>
        <span class="comment">// NYM ID based on SOURCE</span>
        <span class="comment">//</span>
        <span class="keywordflow">if</span> (this-&gt;m_strSourceForNymID.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>())
            m_nymID.<a class="code" href="class_o_t_identifier.html#ac50b356cf5d5d04c08eaf568d07bcc46">CalculateDigest</a>(this-&gt;m_strSourceForNymID);
        <span class="comment">// ------------------------------------------</span>
        <span class="comment">// (or) NYM ID based on PUBLIC SIGNING KEY</span>
        <span class="comment">//</span>
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">false</span> == this-&gt;<a class="code" href="class_o_t_pseudonym.html#ac6c809c283846f8a7a3338a37998ba88">SetIdentifierByPubkey</a>())
        {
            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error calculating Nym ID (as a digest of Nym&#39;s public (signing) key.)\n&quot;</span>,
                          __FUNCTION__);
            <span class="keywordflow">return</span> <span class="keyword">false</span>;
        }
        <span class="comment">// ------------------------------------------</span>
        <span class="comment">// If we set the ID based on the public key (above block),</span>
        <span class="comment">// then we should set the source to contain that public key.</span>
        <span class="keywordflow">else</span>
        {
            <a class="code" href="class_o_t_string.html">OTString</a> strTempSource;
            m_pkeypair-&gt;<a class="code" href="class_o_t_keypair.html#a67aebd0a39826bbc429bb2676fde9fcd">GetPublicKey</a>(strTempSource); <span class="comment">// bEscaped=true by default</span>

            this-&gt;<a class="code" href="class_o_t_pseudonym.html#acad61b197881c4ebffdf8ea01145c8d1">SetNymIDSource</a>(strTempSource);
        }
        <span class="comment">// ---------------------------------------</span>
        <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strFilenameByID(m_nymID); <span class="comment">// FILENAME based on NYM ID</span>
        <span class="comment">// ---------------------------------------</span>
        <span class="keywordflow">if</span> (bCreateFile &amp;&amp;
            (<span class="keyword">false</span> == <a class="code" href="namespace_o_t_d_b.html#a7ec0a905bba2c1c8ba5b1e873e12eab4">OTDB::StorePlainString</a>(strOutput.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(),
                                             <a class="code" href="class_o_t_folders.html#a340bfd0a9302aa1f6436ebc365a391d7">OTFolders::Cert</a>().<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(),
                                             strFilenameByID.Get()))) <span class="comment">// Store as actual Nym ID this time instead of temp.nym</span>
        {
            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Failure storing cert for new nym: %s\n&quot;</span>,
                          __FUNCTION__, strFilenameByID.Get());
            <span class="keywordflow">return</span> <span class="keyword">false</span>;
        }
    }

    <span class="keywordflow">return</span> bSuccess;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab3b184a556bd73224556c7048fc78c68"></a><!-- doxytag: member="OTPseudonym::Savex509CertAndPrivateKeyToString" ref="ab3b184a556bd73224556c7048fc78c68" args="(OTString &amp;strOutput, const OTString *pstrReason=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_pseudonym.html#ab3b184a556bd73224556c7048fc78c68">OTPseudonym::Savex509CertAndPrivateKeyToString</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strOutput</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> *&#160;</td>
          <td class="paramname"><em>pstrReason</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l01174">1174</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> m_pkeypair-&gt;<a class="code" href="class_o_t_keypair.html#a856051cd5e93e30a8f166dd8132ed844">SaveCertAndPrivateKeyToString</a>(strOutput, pstrReason);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a9a6189232f8cde0df210920ce3839199"></a><!-- doxytag: member="OTPseudonym::SerializeNymIDSource" ref="a9a6189232f8cde0df210920ce3839199" args="(OTString &amp;strOutput)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_pseudonym.html#a9a6189232f8cde0df210920ce3839199">OTPseudonym::SerializeNymIDSource</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strOutput</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l03787">3787</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// ----------------------------------</span>
    <span class="comment">// We encode these before storing.</span>
    <span class="keywordflow">if</span> (m_strSourceForNymID.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>())
    {
        <span class="keyword">const</span> <a class="code" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> ascSourceForNymID(m_strSourceForNymID);

        <span class="keywordflow">if</span> (m_strAltLocation.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>())
        {
            <a class="code" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> ascAltLocation;
            ascAltLocation.<a class="code" href="class_o_t_a_s_c_i_i_armor.html#ad898bd63a4c37a97f64acfa7514409cc">SetString</a>(m_strAltLocation, <span class="keyword">false</span>); <span class="comment">//bLineBreaks=true by default.</span>

            strOutput.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;&lt;nymIDSource altLocation=\&quot;%s\&quot;&gt;\n%s&lt;/nymIDSource&gt;\n\n&quot;</span>,
                                  ascAltLocation.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(), ascSourceForNymID.Get());
        }
        <span class="keywordflow">else</span>
            strOutput.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;&lt;nymIDSource&gt;\n%s&lt;/nymIDSource&gt;\n\n&quot;</span>,
                                  ascSourceForNymID.Get());
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a7e10c2692a4bd722ba1f3183e5923b51"></a><!-- doxytag: member="OTPseudonym::Server_PubKeyExists" ref="a7e10c2692a4bd722ba1f3183e5923b51" args="(OTString *pstrID=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_pseudonym.html#a7e10c2692a4bd722ba1f3183e5923b51">OTPseudonym::Server_PubKeyExists</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_string.html">OTString</a> *&#160;</td>
          <td class="paramname"><em>pstrID</em> = <code>NULL</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l03379">3379</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// ------------------------------------</span>
    <a class="code" href="class_o_t_string.html">OTString</a> strID;
    <span class="keywordflow">if</span> (NULL == pstrID)
    {
        pstrID = &amp;strID;
    }
    this-&gt;<a class="code" href="class_o_t_pseudonym.html#a1775c7aedd0dd25b2faf3f78dcccabe7">GetIdentifier</a>(*pstrID);
    <span class="comment">// ------------------------------------</span>
    <span class="comment">// Below this point, pstrID is a GOOD pointer, no matter what. (And no need to delete it.)</span>

    <span class="keywordflow">return</span> <a class="code" href="namespace_o_t_d_b.html#a73e39a590dfb64f63065821c6bbcd4c6">OTDB::Exists</a>(<a class="code" href="class_o_t_folders.html#a691fb355263301e19f8239915cddf3f2">OTFolders::Pubkey</a>().Get(), pstrID-&gt;<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
}
</pre></div>
</div>
</div>
<a class="anchor" id="a4cf79a66d25d8ea88b852afcd5e95284"></a><!-- doxytag: member="OTPseudonym::SetAltLocation" ref="a4cf79a66d25d8ea88b852afcd5e95284" args="(const OTString &amp;strLocation)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EXPORT void <a class="el" href="class_o_t_pseudonym.html#a4cf79a66d25d8ea88b852afcd5e95284">OTPseudonym::SetAltLocation</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strLocation</em></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8hpp_source.html#l00498">498</a> of file <a class="el" href="_o_t_pseudonym_8hpp_source.html">OTPseudonym.hpp</a>.</p>
<div class="fragment"><pre class="fragment">{ m_strAltLocation    = strLocation; }
</pre></div>
</div>
</div>
<a class="anchor" id="a2e4a5a88ecffe86c45359fcb592bccd6"></a><!-- doxytag: member="OTPseudonym::SetCertificate" ref="a2e4a5a88ecffe86c45359fcb592bccd6" args="(const OTString &amp;strCert, bool bEscaped=true)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_pseudonym.html#a2e4a5a88ecffe86c45359fcb592bccd6">OTPseudonym::SetCertificate</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strCert</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>bEscaped</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l05724">5724</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != m_pkeypair);
    <span class="comment">// --------------------</span>
    <span class="keywordflow">return</span> m_pkeypair-&gt;<a class="code" href="class_o_t_keypair.html#af013da535649676fbb039b19cdf5ac01">LoadPublicKeyFromCertString</a>(strCert, bEscaped);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a4b5f98378bb2ff1c48c5410f7283aff6"></a><!-- doxytag: member="OTPseudonym::SetIdentifier" ref="a4b5f98378bb2ff1c48c5410f7283aff6" args="(const OTIdentifier &amp;theIdentifier)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_pseudonym.html#a4b5f98378bb2ff1c48c5410f7283aff6">OTPseudonym::SetIdentifier</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;&#160;</td>
          <td class="paramname"><em>theIdentifier</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l06022">6022</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    m_nymID = theIdentifier;
}
</pre></div>
</div>
</div>
<a class="anchor" id="addd8d693a15da8fe2fe1187caee03f11"></a><!-- doxytag: member="OTPseudonym::SetIdentifier" ref="addd8d693a15da8fe2fe1187caee03f11" args="(const OTString &amp;theIdentifier)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_pseudonym.html#a4b5f98378bb2ff1c48c5410f7283aff6">OTPseudonym::SetIdentifier</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>theIdentifier</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l06036">6036</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    m_nymID.<a class="code" href="class_o_t_identifier.html#ae29aa1245d3831a207aabc9b8a493bfc">SetString</a>(theIdentifier);
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac6c809c283846f8a7a3338a37998ba88"></a><!-- doxytag: member="OTPseudonym::SetIdentifierByPubkey" ref="ac6c809c283846f8a7a3338a37998ba88" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_pseudonym.html#ac6c809c283846f8a7a3338a37998ba88">OTPseudonym::SetIdentifierByPubkey</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l01321">1321</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != m_pkeypair);
    <span class="comment">// ---------------------------------------------------------------</span>
    <span class="keyword">const</span> <span class="keywordtype">bool</span> bCalculated = m_pkeypair-&gt;<a class="code" href="class_o_t_keypair.html#abaedcf0bc34c23c733be8a84371ef27f">CalculateID</a>(m_nymID); <span class="comment">// OTAsymmetricKey::CalculateID only works with public keys.</span>

    <span class="keywordflow">if</span> (!bCalculated)
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error calculating Nym ID in OTAsymmetricKey::CalculateID().\n&quot;</span>, __FUNCTION__);
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }

    <span class="keywordflow">return</span> <span class="keyword">true</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="adddd63c949620e826177926f8ecae533"></a><!-- doxytag: member="OTPseudonym::SetInboxHash" ref="adddd63c949620e826177926f8ecae533" args="(const std::string &amp;acct_id, const OTIdentifier &amp;theInput)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_pseudonym.html#adddd63c949620e826177926f8ecae533">OTPseudonym::SetInboxHash</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>acct_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;&#160;</td>
          <td class="paramname"><em>theInput</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l01511">1511</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> this-&gt;SetHash(m_mapInboxHash, acct_id, theInput);
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad4e740d990aa8aca410c0923dcde1737"></a><!-- doxytag: member="OTPseudonym::SetNymboxHash" ref="ad4e740d990aa8aca410c0923dcde1737" args="(const std::string &amp;server_id, const OTIdentifier &amp;theInput)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_pseudonym.html#ad4e740d990aa8aca410c0923dcde1737">OTPseudonym::SetNymboxHash</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>server_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;&#160;</td>
          <td class="paramname"><em>theInput</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l01487">1487</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> this-&gt;SetHash(m_mapNymboxHash, server_id, theInput);
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab3b725b4837a88a8d273d5ca1ad636a0"></a><!-- doxytag: member="OTPseudonym::SetNymboxHashServerSide" ref="ab3b725b4837a88a8d273d5ca1ad636a0" args="(const OTIdentifier &amp;theInput)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_pseudonym.html#ab3b725b4837a88a8d273d5ca1ad636a0">OTPseudonym::SetNymboxHashServerSide</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;&#160;</td>
          <td class="paramname"><em>theInput</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l01475">1475</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    m_NymboxHash = theInput;
}
</pre></div>
</div>
</div>
<a class="anchor" id="acad61b197881c4ebffdf8ea01145c8d1"></a><!-- doxytag: member="OTPseudonym::SetNymIDSource" ref="acad61b197881c4ebffdf8ea01145c8d1" args="(const OTString &amp;strSource)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EXPORT void <a class="el" href="class_o_t_pseudonym.html#acad61b197881c4ebffdf8ea01145c8d1">OTPseudonym::SetNymIDSource</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strSource</em></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8hpp_source.html#l00497">497</a> of file <a class="el" href="_o_t_pseudonym_8hpp_source.html">OTPseudonym.hpp</a>.</p>
<div class="fragment"><pre class="fragment">{ m_strSourceForNymID = strSource;   }
</pre></div>
</div>
</div>
<a class="anchor" id="acf835189df80fda4eedc88d4cccdc5f1"></a><!-- doxytag: member="OTPseudonym::SetNymName" ref="acf835189df80fda4eedc88d4cccdc5f1" args="(const OTString &amp;strName)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_pseudonym.html#acf835189df80fda4eedc88d4cccdc5f1">OTPseudonym::SetNymName</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strName</em></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8hpp_source.html#l00340">340</a> of file <a class="el" href="_o_t_pseudonym_8hpp_source.html">OTPseudonym.hpp</a>.</p>
<div class="fragment"><pre class="fragment">{ m_strName = strName; }
</pre></div>
</div>
</div>
<a class="anchor" id="ac5af6ed289cfcd77c388ab750da28ccc"></a><!-- doxytag: member="OTPseudonym::SetOutboxHash" ref="ac5af6ed289cfcd77c388ab750da28ccc" args="(const std::string &amp;acct_id, const OTIdentifier &amp;theInput)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_pseudonym.html#ac5af6ed289cfcd77c388ab750da28ccc">OTPseudonym::SetOutboxHash</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>acct_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;&#160;</td>
          <td class="paramname"><em>theInput</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l01523">1523</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> this-&gt;SetHash(m_mapOutboxHash, acct_id, theInput);
}
</pre></div>
</div>
</div>
<a class="anchor" id="af5a482ddef657b788ca4eba7b3df811a"></a><!-- doxytag: member="OTPseudonym::SetPrivateKey" ref="af5a482ddef657b788ca4eba7b3df811a" args="(const OTString &amp;strKey, bool bEscaped=true)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_pseudonym.html#af5a482ddef657b788ca4eba7b3df811a">OTPseudonym::SetPrivateKey</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strKey</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>bEscaped</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l05754">5754</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != m_pkeypair);
    <span class="comment">// --------------------</span>
    <span class="keywordflow">return</span> m_pkeypair-&gt;<a class="code" href="class_o_t_keypair.html#a3b1ee76bc280c8f19f2f8f3a882263ff">SetPrivateKey</a>(strKey, bEscaped);
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa2b88cb0d702eac8819d085857d49b79"></a><!-- doxytag: member="OTPseudonym::SetPrivateKey" ref="aa2b88cb0d702eac8819d085857d49b79" args="(const OTASCIIArmor &amp;strKey)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_pseudonym.html#af5a482ddef657b788ca4eba7b3df811a">OTPseudonym::SetPrivateKey</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> &amp;&#160;</td>
          <td class="paramname"><em>strKey</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l05764">5764</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != m_pkeypair);
    <span class="comment">// --------------------</span>
    <span class="keywordflow">return</span> m_pkeypair-&gt;<a class="code" href="class_o_t_keypair.html#a3b1ee76bc280c8f19f2f8f3a882263ff">SetPrivateKey</a>(strKey);
}
</pre></div>
</div>
</div>
<a class="anchor" id="acd9b375d6c16d11d7d0df1dcf1f543a7"></a><!-- doxytag: member="OTPseudonym::SetPublicKey" ref="acd9b375d6c16d11d7d0df1dcf1f543a7" args="(const OTString &amp;strKey, bool bEscaped=true)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_pseudonym.html#acd9b375d6c16d11d7d0df1dcf1f543a7">OTPseudonym::SetPublicKey</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strKey</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>bEscaped</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l05734">5734</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != m_pkeypair);
    <span class="comment">// --------------------</span>
    <span class="keywordflow">return</span> m_pkeypair-&gt;<a class="code" href="class_o_t_keypair.html#ad6f380447668e4d9b5180e88fe257045">SetPublicKey</a>(strKey, bEscaped);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a59cf02bed12b70fe47a43f546fd37507"></a><!-- doxytag: member="OTPseudonym::SetPublicKey" ref="a59cf02bed12b70fe47a43f546fd37507" args="(const OTASCIIArmor &amp;strKey)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_pseudonym.html#acd9b375d6c16d11d7d0df1dcf1f543a7">OTPseudonym::SetPublicKey</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> &amp;&#160;</td>
          <td class="paramname"><em>strKey</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l05743">5743</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != m_pkeypair);
    <span class="comment">// --------------------</span>
    <span class="keywordflow">return</span> m_pkeypair-&gt;<a class="code" href="class_o_t_keypair.html#ad6f380447668e4d9b5180e88fe257045">SetPublicKey</a>(strKey);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a9c8005d30622ea76cf81c6a9bbfd4d91"></a><!-- doxytag: member="OTPseudonym::SetRecentHash" ref="a9c8005d30622ea76cf81c6a9bbfd4d91" args="(const std::string &amp;server_id, const OTIdentifier &amp;theInput)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_pseudonym.html#a9c8005d30622ea76cf81c6a9bbfd4d91">OTPseudonym::SetRecentHash</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>server_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;&#160;</td>
          <td class="paramname"><em>theInput</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l01499">1499</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> this-&gt;SetHash(m_mapRecentHash, server_id, theInput);
}
</pre></div>
</div>
</div>
<a class="anchor" id="afdd9f22128599dc00dbec2d5fb4ad43d"></a><!-- doxytag: member="OTPseudonym::SetUsageCredits" ref="afdd9f22128599dc00dbec2d5fb4ad43d" args="(const int64_t &amp;lUsage)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EXPORT void <a class="el" href="class_o_t_pseudonym.html#afdd9f22128599dc00dbec2d5fb4ad43d">OTPseudonym::SetUsageCredits</a> </td>
          <td>(</td>
          <td class="paramtype">const int64_t &amp;&#160;</td>
          <td class="paramname"><em>lUsage</em></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8hpp_source.html#l00329">329</a> of file <a class="el" href="_o_t_pseudonym_8hpp_source.html">OTPseudonym.hpp</a>.</p>
<div class="fragment"><pre class="fragment">{ m_lUsageCredits = lUsage; }
</pre></div>
</div>
</div>
<a class="anchor" id="aec22b071d4218d5b49ce88236cd8cfb5"></a><!-- doxytag: member="OTPseudonym::UnRegisterAtServer" ref="aec22b071d4218d5b49ce88236cd8cfb5" args="(const OTString &amp;strServerID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_pseudonym.html#aec22b071d4218d5b49ce88236cd8cfb5">OTPseudonym::UnRegisterAtServer</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strServerID</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l01637">1637</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">bool</span> bRetVal        = <span class="keyword">false</span>; <span class="comment">// default is return false: &quot;No, I&#39;m NOT registered at that Server.&quot;</span>
    std::string strID   = strServerID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();

    <span class="comment">// The Pseudonym has a map of the request numbers for different servers.</span>
    <span class="comment">// For Server Bob, with this Pseudonym, I might be on number 34.</span>
    <span class="comment">// For but Server Alice, I might be on number 59.</span>
    <span class="comment">//</span>
    <span class="comment">// So let&#39;s loop through all the numbers I have, and if the server ID on the map</span>
    <span class="comment">// matches the Server ID that was passed in, then delete that one.</span>
    <span class="comment">//</span>
    <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_pseudonym_8hpp.html#a973d5530da5375de1f5e0f75c7780869">mapOfRequestNums</a>, m_mapRequestNum)
    {
        <span class="keywordflow">if</span> ( strID == it-&gt;first )
        {
            <span class="comment">// The call has succeeded</span>
            bRetVal = <span class="keyword">true</span>;
            m_mapRequestNum.erase(it);
            <span class="keywordflow">break</span>;
        }
    }

    <span class="keywordflow">return</span> bRetVal;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a3601074fdaebd0cbb752a5584781511d"></a><!-- doxytag: member="OTPseudonym::UpdateHighestNum" ref="a3601074fdaebd0cbb752a5584781511d" args="(OTPseudonym &amp;SIGNER_NYM, const OTString &amp;strServerID, std::set&lt; int64_t &gt; &amp;setNumbers, std::set&lt; int64_t &gt; &amp;setOutputGood, std::set&lt; int64_t &gt; &amp;setOutputBad, bool bSave=false)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64_t <a class="el" href="class_o_t_pseudonym.html#a3601074fdaebd0cbb752a5584781511d">OTPseudonym::UpdateHighestNum</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;&#160;</td>
          <td class="paramname"><em>SIGNER_NYM</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strServerID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::set&lt; int64_t &gt; &amp;&#160;</td>
          <td class="paramname"><em>setNumbers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::set&lt; int64_t &gt; &amp;&#160;</td>
          <td class="paramname"><em>setOutputGood</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::set&lt; int64_t &gt; &amp;&#160;</td>
          <td class="paramname"><em>setOutputBad</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>bSave</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l02754">2754</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">bool</span> bFoundServerID = <span class="keyword">false</span>;
    int64_t lReturnVal     = 0; <span class="comment">// 0 is success.</span>

    <span class="comment">// First find the highest and lowest numbers out of the new set.</span>
    <span class="comment">//</span>
    int64_t lHighestInSet  = 0;
    int64_t lLowestInSet   = 0;

    <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(std::set&lt;int64_t&gt;, setNumbers)
    {
        <span class="keyword">const</span> int64_t lSetNum = *it;

        <span class="keywordflow">if</span> (lSetNum &gt; lHighestInSet)        lHighestInSet = lSetNum;    <span class="comment">// Set lHighestInSet to contain the highest number out of setNumbers (input)</span>
        <span class="comment">// ---------------------</span>
        <span class="keywordflow">if</span> (0 == lLowestInSet)              lLowestInSet = lSetNum;     <span class="comment">// If lLowestInSet is still 0, then set it to the current number (happens first iteration.)</span>
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (lSetNum &lt; lLowestInSet)    lLowestInSet = lSetNum;     <span class="comment">// If current number is less than lLowestInSet, then set lLowestInSet to current Number.</span>
    }

    <span class="comment">// By this point, lLowestInSet contains the lowest number in setNumbers,</span>
    <span class="comment">// and lHighestInSet contains the highest number in setNumbers.</span>
    <span class="comment">// -------------------------------------------------------------------</span>
    <span class="comment">//</span>
    <span class="comment">// The Pseudonym has a map of the &quot;highest transaction numbers&quot; for different servers.</span>
    <span class="comment">// For Server Bob, with this Pseudonym, I might be on number 34.</span>
    <span class="comment">// For but Server Alice, I might be on number 59.</span>
    <span class="comment">//</span>
    <span class="comment">// So let&#39;s loop through all the numbers I have, and if the server ID on the map</span>
    <span class="comment">// matches the Server ID that was passed in, then update it there (then break.)</span>
    <span class="comment">//</span>
    <span class="comment">// Make sure to save the Pseudonym afterwards, so the new numbers are saved.</span>

    std::string strID   = strServerID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();

    <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_pseudonym_8hpp.html#a0ed9ca5cfdfd9902dd8bd342d344a275">mapOfHighestNums</a>, m_mapHighTransNo)
    {
        <span class="comment">// We found the serverID key on the map?</span>
        <span class="comment">// We now know the highest trans number for that server?</span>
        <span class="comment">//</span>
        <span class="keywordflow">if</span> ( strID == it-&gt;first ) <span class="comment">// Iterates inside this block zero times or one time. (One if it finds it, zero if not.)</span>
        {
            <span class="comment">// We found it!</span>
            <span class="comment">// Presumably we ONLY found it because this Nym has been properly loaded first.</span>
            <span class="comment">// Good job! Otherwise, the list would have been empty even though the highest number</span>
            <span class="comment">// was sitting in the file.</span>

            <span class="comment">// Grab a copy of the old highest trans number for this server.</span>
            <span class="comment">//</span>
            <span class="keyword">const</span> int64_t lOldHighestNumber = it-&gt;second; <span class="comment">// &lt;=========== The previous &quot;highest number&quot;.</span>

            <span class="comment">// ----------------------------------------------</span>

            <span class="comment">// Loop through the numbers passed in, and for each, see if it&#39;s less than</span>
            <span class="comment">// the previous &quot;highest number for this server.&quot;</span>
            <span class="comment">//</span>
            <span class="comment">// If it&#39;s less, then we can&#39;t add it (must have added it already...)</span>
            <span class="comment">// So we add it to the bad list.</span>
            <span class="comment">// But if it&#39;s more,</span>

            <a class="code" href="_o_t_storage_8hpp.html#a4a94c3435a932ed34e5755f3f472547c">FOR_EACH_IT</a>(std::set&lt;int64_t&gt;, setNumbers, it_numbers)
            {
                <span class="keyword">const</span> int64_t lSetNum = *it_numbers;
                <span class="comment">// ------------------------</span>
                <span class="comment">// If the current number (this iteration) is less than or equal to the</span>
                <span class="comment">// &quot;old highest number&quot;, then it&#39;s not going to be added twice.</span>
                <span class="comment">// (It goes on the &quot;bad list.&quot;)</span>
                <span class="comment">//</span>
                <span class="keywordflow">if</span> (lSetNum &lt;= lOldHighestNumber)
                {
                    <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(1, <span class="stringliteral">&quot;OTPseudonym::UpdateHighestNum: New transaction number is less-than-or-equal-to &quot;</span>
                                   <span class="stringliteral">&quot;last known &#39;highest trans number&#39; record. (Must be seeing the same server reply for &quot;</span>
                                   <span class="stringliteral">&quot;a second time, due to a receipt in my Nymbox.) &quot;</span>
                                   <span class="stringliteral">&quot;FYI, last known &#39;highest&#39; number received: %lld (Current &#39;violator&#39;: %lld) Skipping...\n&quot;</span>,
                                   lOldHighestNumber, lSetNum);
                    setOutputBad.insert(lSetNum);
                }
                <span class="comment">// ------------------------------------------------------------------------------</span>
                <span class="comment">// The current number this iteration, as it should be, is HIGHER than any transaction</span>
                <span class="comment">// number I&#39;ve ever received before. (Although sometimes old messages will &#39;echo&#39;.)</span>
                <span class="comment">// I want to replace the &quot;highest&quot; record with this one</span>
                <span class="keywordflow">else</span>
                {
                    setOutputGood.insert(lSetNum);
                }
            } <span class="comment">// FOR_EACH_IT (it_numbers)</span>
            <span class="comment">// ----------------------------------------------</span>

            <span class="comment">// Here we&#39;re making sure that all the numbers in the set are larger than any others</span>
            <span class="comment">// that we&#39;ve had before for the same server (They should only ever get larger.)</span>
            <span class="comment">//</span>
<span class="comment">//          if (lLowestInSet &lt;= lOldHighestNumber) // ERROR!!! The new numbers should ALWAYS be larger than the previous ones!</span>
            <span class="keywordflow">if</span> ((lLowestInSet &gt; 0) &amp;&amp; (lLowestInSet &lt;= lOldHighestNumber))  <span class="comment">// WARNING! The new numbers should ALWAYS be larger than the previous ones!</span>
                                                                            <span class="comment">// UPDATE: Unless we happen to be processing the same receipt for a second time, due to redundancy in the system (for preventing syncing errors.)</span>
                lReturnVal = lLowestInSet;  <span class="comment">// We return the violator (otherwise 0 if success).</span>
            <span class="comment">// ---------------------------------------------------------------</span>
            <span class="comment">// The loop has succeeded in finding the server ID and its associated &quot;highest number&quot; value.</span>
            <span class="comment">//</span>
            bFoundServerID = <span class="keyword">true</span>;
            <span class="keywordflow">break</span>;  <span class="comment">// This main FOR_EACH only ever has one active iteration: the one with</span>
                    <span class="comment">//  the right server ID. Once we find it, we break (no matter what.)</span>
        } <span class="comment">// server ID matches.</span>
    } <span class="comment">// FOR_EACH</span>
    <span class="comment">// ----------------------------------------------------------------</span>
    <span class="comment">// If we found the server ID, that means the highest number was previously recorded.</span>
    <span class="comment">// We don&#39;t want to replace it unless we were successful in this function. And if we</span>
    <span class="comment">// were, then we want to replace it with the new &quot;highest number in the set.&quot;</span>
    <span class="comment">//</span>
    <span class="comment">// IF we found the server ID for a previously recorded highestNum, and</span>
    <span class="comment">// IF this function was a success in terms of the new numbers all exceeding that old record,</span>
    <span class="comment">// THEN ERASE that old record and replace it with the new highest number.</span>
    <span class="comment">//</span>
    <span class="comment">// Hmm: Should I require ALL new numbers to be valid? Or should I take the valid ones,</span>
    <span class="comment">// and ignore the invalid ones?</span>
    <span class="comment">//</span>
    <span class="comment">// Update: Just found this comment from the calling function:</span>
    <span class="comment">// NOTE: Due to the possibility that a server reply could be processed twice (due to redundancy</span>
    <span class="comment">// for the purposes of preventing syncing issues) then we expect we might get numbers in here</span>
    <span class="comment">// that are below our &quot;last highest num&quot; (due to processing the same numbers twice.) Therefore</span>
    <span class="comment">// we don&#39;t need to assume an error in this case. UpdateHighestNum() is already smart enough to</span>
    <span class="comment">// only update based on the good numbers, while ignoring the bad (i.e. already-processed) ones.</span>
    <span class="comment">// Thus we really only have a problem if we receive a (-1), which would mean an error occurred.</span>
    <span class="comment">// Also, the above call will log an FYI that it is skipping any numbers below the line, so no need</span>
    <span class="comment">// to log more in the case of lViolater being &gt;0 but less than the &#39;last highest number.&#39;</span>
    <span class="comment">//</span>
    <span class="comment">// ===&gt; THEREFORE, we don&#39;t need an lReturnVal of 0 in order to update the highest record.</span>
    <span class="comment">// Instead, we just need bFoundServerID to be true, and we need setOutputGood to not be empty</span>
    <span class="comment">// (we already know the numbers in setOutputGood are higher than the last highest recorded trans</span>
    <span class="comment">// num... that&#39;s why they are in setOutputGood instead of setOutputBad.)</span>
    <span class="comment">//</span>
    <span class="keywordflow">if</span> (!setOutputGood.empty()) <span class="comment">// There&#39;s numbers worth savin&#39;!</span>
    {
        <span class="keywordflow">if</span> (bFoundServerID)
        {
            <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;OTPseudonym::UpdateHighestNum: Raising Highest Trans Number from %lld to %lld.\n&quot;</span>,
                           m_mapHighTransNo[strID], lHighestInSet);

            <span class="comment">// We KNOW it&#39;s there, so we can straight-away just</span>
            <span class="comment">// erase it and insert it afresh..</span>
            <span class="comment">//</span>
            m_mapHighTransNo.erase(strID);
            m_mapHighTransNo.insert(std::pair&lt;std::string, int64_t&gt;(strID, lHighestInSet));
        }
        <span class="comment">// ----------------------------------------------</span>
        <span class="comment">// If I didn&#39;t find the server in the list above (whether the list is empty or not....)</span>
        <span class="comment">// that means the record does not yet exist. (So let&#39;s create it)--we wouldn&#39;t even be</span>
        <span class="comment">// here unless we found valid transaction numbers and added them to setOutputGood.</span>
        <span class="comment">// (So let&#39;s record lHighestInSet mapped to strID, just as above.)</span>
        <span class="keywordflow">else</span>
        {
            <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;OTPseudonym::UpdateHighestNum: Creating &quot;</span>
                           <span class="stringliteral">&quot;Highest Transaction Number entry for this server as &#39;%lld&#39;.\n&quot;</span>,
                           lHighestInSet);
            m_mapHighTransNo.insert(std::pair&lt;std::string, int64_t&gt;(strID, lHighestInSet));
        }
        <span class="comment">// ----------------------------------------------</span>
        <span class="comment">// By this point either the record was created, or we were successful above in finding it</span>
        <span class="comment">// and updating it. Either way, it&#39;s there now and potentially needs to be saved.</span>
        <span class="comment">//</span>
        <span class="keywordflow">if</span> (bSave)
            <a class="code" href="class_o_t_pseudonym.html#a5d08ef86097db038c2c4fd30034f5dc8">SaveSignedNymfile</a>(SIGNER_NYM);
    }
    <span class="keywordflow">else</span> <span class="comment">// setOutputGood was completely empty in this case...</span>
    {    <span class="comment">// (So there&#39;s nothing worth saving.) A repeat message.</span>
         <span class="comment">//</span>
         <span class="comment">// Should I return a -1 here or something? Let&#39;s say it&#39;s</span>
         <span class="comment">// a redundant message...I&#39;ve already harvested these numbers. So</span>
         <span class="comment">// they are ignored this time, my record of &#39;highest&#39; is unimpacted,</span>
         <span class="comment">// and if I just return lReturnVal below, it will contain 0 for success</span>
         <span class="comment">// or a transaction number (the min/low violator) but even that is considered</span>
         <span class="comment">// a &quot;success&quot; in the sense that some of the numbers would still normally be</span>
         <span class="comment">// expected to have passed through.</span>
         <span class="comment">// The caller will check for -1 in case of some drastic error, but so far I don&#39;t</span>
         <span class="comment">// see a place here for that return value.</span>
         <span class="comment">//</span>
    }
    <span class="comment">// ----------------------------------------------------------------</span>

    <span class="keywordflow">return</span> lReturnVal; <span class="comment">// Defaults to 0 (success) but above, might have been set to &quot;lLowestInSet&quot; (if one was below the mark.)</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="a11fd56ffbcef5fcebbd259bdb1bd7c8e"></a><!-- doxytag: member="OTPseudonym::VerifyAcknowledgedNum" ref="a11fd56ffbcef5fcebbd259bdb1bd7c8e" args="(const OTString &amp;strServerID, const int64_t &amp;lRequestNum)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_pseudonym.html#a11fd56ffbcef5fcebbd259bdb1bd7c8e">OTPseudonym::VerifyAcknowledgedNum</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strServerID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int64_t &amp;&#160;</td>
          <td class="paramname"><em>lRequestNum</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l02320">2320</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> <a class="code" href="class_o_t_pseudonym.html#a5cecc3e38ed59ea6239cf0059d535d69">VerifyGenericNum</a>(m_mapAcknowledgedNum, strServerID, lRequestNum);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a5cecc3e38ed59ea6239cf0059d535d69"></a><!-- doxytag: member="OTPseudonym::VerifyGenericNum" ref="a5cecc3e38ed59ea6239cf0059d535d69" args="(mapOfTransNums &amp;THE_MAP, const OTString &amp;strServerID, const int64_t &amp;lTransNum)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_pseudonym.html#a5cecc3e38ed59ea6239cf0059d535d69">OTPseudonym::VerifyGenericNum</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_o_t_pseudonym_8hpp.html#ac99ad82dc6c392a0a8c851c6041b62f1">mapOfTransNums</a> &amp;&#160;</td>
          <td class="paramname"><em>THE_MAP</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strServerID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int64_t &amp;&#160;</td>
          <td class="paramname"><em>lTransNum</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l01930">1930</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    std::string strID   = strServerID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();

    <span class="comment">// The Pseudonym has a deque of transaction numbers for each servers.</span>
    <span class="comment">// These deques are mapped by Server ID.</span>
    <span class="comment">//</span>
    <span class="comment">// So let&#39;s loop through all the deques I have, and if the server ID on the map</span>
    <span class="comment">// matches the Server ID that was passed in, then find the transaction number on</span>
    <span class="comment">// that list, and then return true. Else return false.</span>
    <span class="comment">//</span>
    <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_pseudonym_8hpp.html#ac99ad82dc6c392a0a8c851c6041b62f1">mapOfTransNums</a>, THE_MAP)
    {
        <span class="comment">// if the ServerID passed in matches the serverID for the current deque</span>
        <span class="keywordflow">if</span> ( strID == it-&gt;first )
        {
            <a class="code" href="_o_t_pseudonym_8hpp.html#a94632bfde6cf91c8294122f77527bcf1">dequeOfTransNums</a> * pDeque = (it-&gt;second);
            <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pDeque);

            <span class="keywordflow">if</span> (!(pDeque-&gt;empty())) <span class="comment">// there are some numbers for that server ID</span>
            {
                <span class="comment">// Let&#39;s loop through them and see if the culprit is there</span>
                <span class="keywordflow">for</span> (uint32_t i = 0; i &lt; pDeque-&gt;size(); i++)
                {
                    <span class="comment">// Found it!</span>
                    <span class="keywordflow">if</span> (lTransNum == pDeque-&gt;at(i))
                    {
                        <span class="keywordflow">return</span> <span class="keyword">true</span>;
                    }
                }
            }
            <span class="keywordflow">break</span>;
        }
    }

    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a66cf3b97f1769f9d422bad8787a6c1a0"></a><!-- doxytag: member="OTPseudonym::VerifyIssuedNum" ref="a66cf3b97f1769f9d422bad8787a6c1a0" args="(const OTString &amp;strServerID, const int64_t &amp;lTransNum)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_pseudonym.html#a66cf3b97f1769f9d422bad8787a6c1a0">OTPseudonym::VerifyIssuedNum</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strServerID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int64_t &amp;&#160;</td>
          <td class="paramname"><em>lTransNum</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l02235">2235</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> <a class="code" href="class_o_t_pseudonym.html#a5cecc3e38ed59ea6239cf0059d535d69">VerifyGenericNum</a>(m_mapIssuedNum, strServerID, lTransNum);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a813cb5746e0f8461beca3c77f9f7457c"></a><!-- doxytag: member="OTPseudonym::VerifyIssuedNumbersOnNym" ref="a813cb5746e0f8461beca3c77f9f7457c" args="(OTPseudonym &amp;THE_NYM)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_pseudonym.html#a813cb5746e0f8461beca3c77f9f7457c">OTPseudonym::VerifyIssuedNumbersOnNym</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;&#160;</td>
          <td class="paramname"><em>THE_NYM</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>See if two nyms have identical lists of issued transaction numbers (#s currently signed for.) </p>

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l05411">5411</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    int64_t lTransactionNumber  = 0; <span class="comment">// Used in the loop below.</span>

    int32_t nNumberOfTransactionNumbers1 = 0; <span class="comment">// *this</span>
    int32_t nNumberOfTransactionNumbers2 = 0; <span class="comment">// THE_NYM.</span>

    std::string strServerID;

    <span class="comment">// First, loop through the Nym on my side (*this), and count how many numbers total he has...</span>
    <span class="comment">//</span>
    <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_pseudonym_8hpp.html#ac99ad82dc6c392a0a8c851c6041b62f1">mapOfTransNums</a>, <a class="code" href="class_o_t_pseudonym.html#a74e834007bee7a45651a98257152da72">GetMapIssuedNum</a>())
    {
<span class="comment">//      strServerID                 = (*it).first;</span>
        <a class="code" href="_o_t_pseudonym_8hpp.html#a94632bfde6cf91c8294122f77527bcf1">dequeOfTransNums</a> * pDeque   = (it-&gt;second);
        <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pDeque);

        <span class="keywordflow">if</span> (!(pDeque-&gt;empty()))
        {
            nNumberOfTransactionNumbers1 += <span class="keyword">static_cast&lt;</span>int32_t<span class="keyword">&gt;</span> (pDeque-&gt;size());
        }
    } <span class="comment">// for</span>

    <span class="comment">// Next, loop through THE_NYM, and count his numbers as well...</span>
    <span class="comment">// But ALSO verify that each one exists on *this, so that each individual</span>
    <span class="comment">// number is checked.</span>
    <span class="comment">//</span>
    <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_pseudonym_8hpp.html#ac99ad82dc6c392a0a8c851c6041b62f1">mapOfTransNums</a>, THE_NYM.<a class="code" href="class_o_t_pseudonym.html#a74e834007bee7a45651a98257152da72">GetMapIssuedNum</a>())
    {
        strServerID                 = (*it).first;
        <a class="code" href="_o_t_pseudonym_8hpp.html#a94632bfde6cf91c8294122f77527bcf1">dequeOfTransNums</a> * pDeque   = (it-&gt;second);
        <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pDeque);

        <a class="code" href="class_o_t_string.html">OTString</a> OTstrServerID = strServerID.c_str();

        <span class="keywordflow">if</span> (!(pDeque-&gt;empty()))
        {
            <span class="keywordflow">for</span> (uint32_t i = 0; i &lt; pDeque-&gt;size(); i++)
            {
                lTransactionNumber = pDeque-&gt;at(i);

<span class="comment">//              if ()</span>
                {
                    nNumberOfTransactionNumbers2 ++ ;

                    <span class="keywordflow">if</span> (<span class="keyword">false</span> == <a class="code" href="class_o_t_pseudonym.html#a66cf3b97f1769f9d422bad8787a6c1a0">VerifyIssuedNum</a>(OTstrServerID, lTransactionNumber))
                    {
                        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;OTPseudonym::%s: Issued transaction # %lld from THE_NYM not found on *this.\n&quot;</span>,
                                       __FUNCTION__, lTransactionNumber);

                        <span class="keywordflow">return</span> <span class="keyword">false</span>;
                    }
                }
            }
        }
    } <span class="comment">// for</span>

    <span class="comment">// Finally, verify that the counts match...</span>
    <span class="keywordflow">if</span> (nNumberOfTransactionNumbers1 != nNumberOfTransactionNumbers2)
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;OTPseudonym::%s: Issued transaction # Count mismatch: %d and %d\n&quot;</span>,
                       __FUNCTION__, nNumberOfTransactionNumbers1, nNumberOfTransactionNumbers2);

        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }

    <span class="keywordflow">return</span> <span class="keyword">true</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aae8a707c7799efb6944d485be31a7c3e"></a><!-- doxytag: member="OTPseudonym::VerifyPseudonym" ref="aae8a707c7799efb6944d485be31a7c3e" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_pseudonym.html#aae8a707c7799efb6944d485be31a7c3e">OTPseudonym::VerifyPseudonym</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l03144">3144</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// If there are credentials, then we verify the Nym via his credentials.</span>
    <span class="comment">// Otherwise we do it the old way (using the Nym&#39;s &quot;keypair&quot;)--which is being deprecated.</span>
    <span class="comment">//</span>
    <span class="keywordflow">if</span> (m_mapCredentials.size() &gt; 0)
    {
        <span class="comment">// Verify Nym by his own credentials.</span>
        <span class="comment">//</span>
        <a class="code" href="_o_t_storage_8hpp.html#a804eb881e96b7e1846d130a55a94f716">FOR_EACH_CONST</a>(<a class="code" href="_o_t_pseudonym_8hpp.html#a0617d6d6c189c161a3fcf3c4710f5dba">mapOfCredentials</a>, m_mapCredentials)
        {
            <span class="keyword">const</span> <a class="code" href="class_o_t_credential.html">OTCredential</a> * pCredential = (*it).second;
            <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pCredential);
            <span class="comment">// ---------------------------------------</span>
            <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theCredentialNymID(pCredential-&gt;<a class="code" href="class_o_t_credential.html#aba950a82684048857d26afd48b2a555c">GetNymID</a>());
            <span class="keywordflow">if</span> (<span class="keyword">false</span> == this-&gt;<a class="code" href="class_o_t_pseudonym.html#a5ec9340b8d1d0fcd32f754ea63f9915a">CompareID</a>(theCredentialNymID))
            {
                <a class="code" href="class_o_t_string.html">OTString</a> strNymID;
                this-&gt;<a class="code" href="class_o_t_pseudonym.html#a1775c7aedd0dd25b2faf3f78dcccabe7">GetIdentifier</a>(strNymID);
                <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Credential NymID (%s) doesn&#39;t match actual NymID: %s\n&quot;</span>,
                               __FUNCTION__, pCredential-&gt;<a class="code" href="class_o_t_credential.html#aba950a82684048857d26afd48b2a555c">GetNymID</a>().<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(), strNymID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
                <span class="keywordflow">return</span> <span class="keyword">false</span>;
            }
            <span class="comment">// ---------------------------------------</span>
            <span class="keywordflow">if</span> (<span class="keyword">false</span> == pCredential-&gt;<a class="code" href="class_o_t_credential.html#ac84a55bc3e33ba5088ddc1e60eb1bca8">VerifyInternally</a>())
            {
                <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Credential (%s) failed its own internal verification.\n&quot;</span>,
                               __FUNCTION__, pCredential-&gt;<a class="code" href="class_o_t_credential.html#a1e99eeeb4d701f2ea9b56a1201a57680">GetMasterCredID</a>().<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
                <span class="keywordflow">return</span> <span class="keyword">false</span>;
            }
            <span class="comment">// ---------------------------------------</span>
            <span class="comment">// Warning: time-intensive. Todo optimize: load a contract here which verifies authorization,</span>
            <span class="comment">// based on a signature from a separate process which did an identity lookup externally.</span>
            <span class="comment">// Once that authorization times out, then the identity verification server can just sign</span>
            <span class="comment">// another one.</span>
            <span class="comment">//</span>
            <span class="keywordflow">if</span> (<span class="keyword">false</span> == pCredential-&gt;<a class="code" href="class_o_t_credential.html#abacd81f1c7aa266d65b0fc2153c1e6b5">VerifyAgainstSource</a>()) <span class="comment">// todo optimize, warning: time-intensive.</span>
            {
                <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Credential failed against its source. Credential ID: %s\n&quot;</span>
                               <span class="stringliteral">&quot;NymID: %s\nSource: %s\n&quot;</span>, __FUNCTION__,
                               pCredential-&gt;<a class="code" href="class_o_t_credential.html#a1e99eeeb4d701f2ea9b56a1201a57680">GetMasterCredID</a>().<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(), pCredential-&gt;<a class="code" href="class_o_t_credential.html#aba950a82684048857d26afd48b2a555c">GetNymID</a>().<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(),
                               pCredential-&gt;<a class="code" href="class_o_t_credential.html#a0f66ddcdf4587eaaa7ab1429126f6395">GetSourceForNymID</a>().<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
                <span class="keywordflow">return</span> <span class="keyword">false</span>;
            }
            <span class="comment">// ---------------------------------------</span>
        } <span class="comment">// FOR_EACH_CONST</span>


        <span class="comment">// NOTE: m_pkeypair needs to be phased out entirely. TODO!!</span>
        <span class="comment">// In the meantime, ::LoadPublicKey isn&#39;t setting m_pkeypair</span>
        <span class="comment">// because the key isn&#39;t actually available until AFTER the</span>
        <span class="comment">// pCredential-&gt;VerifyInternally() has occurred. Well, right</span>
        <span class="comment">// here, it just occurred (above) and so we can actually set</span>
        <span class="comment">// m_pkeypair at this point, where we couldn&#39;t do it before in</span>
        <span class="comment">// LoadPublicKey.</span>
        <span class="comment">//</span>
        <span class="comment">// The real solution is to just phase out m_pkeypair entirely. TODO!</span>
        <span class="comment">// But in the meantime, as long as there are vestiges of the code</span>
        <span class="comment">// that still use it, we need to make sure it&#39;s set, and we can</span>
        <span class="comment">// only do that here, after VerifyInternally() has finished.</span>
        <span class="comment">//</span>
        <span class="comment">// (So that&#39;s what I&#39;m doing.)</span>
        <span class="comment">//</span>
        <span class="keywordflow">if</span> (!m_pkeypair-&gt;<a class="code" href="class_o_t_keypair.html#a9dbda6c4a4863b5768f8167bf41749f9">HasPublicKey</a>())
        {
            mapOfCredentials::const_iterator it = m_mapCredentials.begin();
            <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(m_mapCredentials.end() != it);
            <a class="code" href="class_o_t_credential.html">OTCredential</a> * pCredential = (*it).second;
            <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pCredential);
            <span class="comment">// -----------------------------</span>
            <a class="code" href="class_o_t_string.html">OTString</a> strSigningKey;

            <span class="keywordflow">if</span> (const_cast&lt;OTKeypair &amp;&gt;(pCredential-&gt;GetSignKeypair(&amp;m_listRevokedIDs)).GetPublicKey(strSigningKey, <span class="keyword">false</span>)) <span class="comment">//bEscaped</span>
                <span class="keywordflow">return</span> m_pkeypair-&gt;<a class="code" href="class_o_t_keypair.html#ad6f380447668e4d9b5180e88fe257045">SetPublicKey</a>(strSigningKey, <span class="keyword">false</span>); <span class="comment">// bEscaped</span>
            <span class="keywordflow">else</span>
                <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Failed in call to pCredential-&gt;GetPublicSignKey().GetPublicKey()\n&quot;</span>, __FUNCTION__);
        }

        <span class="keywordflow">return</span> <span class="keyword">true</span>;

    } <span class="comment">// If there are credentials</span>
    <span class="comment">// --------------------------------------------</span>
    <span class="keywordflow">else</span> <span class="comment">// Deprecated. OTPseudonym::m_pkeypair was used for encryption, signing, and authentication.</span>
    {    <span class="comment">// (Replaced by the above block, which has a map of credentials for each Nym, with each</span>
         <span class="comment">// credential having a master key and a set of subcredentials including subkeys.</span>
         <span class="comment">//</span>
        <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != m_pkeypair);
        <span class="comment">// -----------------</span>
        <a class="code" href="class_o_t_string.html">OTString</a> strPublicKey;
        <span class="keywordtype">bool</span> bGotPublicKey = m_pkeypair-&gt;<a class="code" href="class_o_t_keypair.html#a67aebd0a39826bbc429bb2676fde9fcd">GetPublicKey</a>(strPublicKey);

        <span class="keywordflow">if</span> (!bGotPublicKey)
        {
            <a class="code" href="class_o_t_log.html#a5acd90ac91c2618f395b0ff37ad4f8ee">OTLog::Error</a>(<span class="stringliteral">&quot;Error getting public key in OTPseudonym::VerifyPseudonym.\n&quot;</span>);
            <span class="keywordflow">return</span> <span class="keyword">false</span>;
        }
        <span class="comment">// --------------------------------------------</span>
        <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> newID;
        <span class="keywordtype">bool</span> bSuccessCalculateDigest = newID.<a class="code" href="class_o_t_identifier.html#ac50b356cf5d5d04c08eaf568d07bcc46">CalculateDigest</a>(strPublicKey);

        <span class="keywordflow">if</span> (!bSuccessCalculateDigest)
        {
            <a class="code" href="class_o_t_log.html#a5acd90ac91c2618f395b0ff37ad4f8ee">OTLog::Error</a>(<span class="stringliteral">&quot;Error calculating pubkey digest.\n&quot;</span>);
            <span class="keywordflow">return</span> <span class="keyword">false</span>;
        }
        <span class="comment">// --------------------------------------------</span>
        <span class="comment">// newID now contains the Hash aka Message Digest aka Fingerprint aka &quot;IDENTIFIER&quot;</span>
        <span class="comment">// of the public key (in its text form, with escaped bookends.)</span>
        <span class="comment">//</span>
        <span class="comment">// Now let&#39;s compare that identifier to the one already loaded by the wallet</span>
        <span class="comment">// and make sure they MATCH.</span>

        <span class="keywordflow">if</span> (m_nymID != newID)
        {
            <a class="code" href="class_o_t_string.html">OTString</a> str1(m_nymID), str2(newID);
            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;\nHashes do NOT match in OTPseudonym::VerifyPseudonym!\n%s\n%s\n&quot;</span>,
                    str1.Get(), str2.Get());

            <span class="keywordflow">return</span> <span class="keyword">false</span>;
        }
        <span class="keywordflow">else</span>
        {
    <span class="comment">//      OTString str2(newID);</span>
    <span class="comment">//      OTLog::Output(1, &quot;\nNymID from wallet *SUCCESSFUL* match to hash of Nym\&#39;s public key:\n%s\n&quot;</span>
    <span class="comment">//              &quot;---------------------------------------------------------------\n&quot;, str2.Get());</span>
            <span class="keywordflow">return</span> <span class="keyword">true</span>;
        }
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac05ddbd6036b5304b7215251d1b7c9b0"></a><!-- doxytag: member="OTPseudonym::VerifyTentativeNum" ref="ac05ddbd6036b5304b7215251d1b7c9b0" args="(const OTString &amp;strServerID, const int64_t &amp;lTransNum)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_pseudonym.html#ac05ddbd6036b5304b7215251d1b7c9b0">OTPseudonym::VerifyTentativeNum</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strServerID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int64_t &amp;&#160;</td>
          <td class="paramname"><em>lTransNum</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l02275">2275</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> <a class="code" href="class_o_t_pseudonym.html#a5cecc3e38ed59ea6239cf0059d535d69">VerifyGenericNum</a>(m_mapTentativeNum, strServerID, lTransNum);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a13bbb470e627968c184ef4728ef85d7a"></a><!-- doxytag: member="OTPseudonym::VerifyTransactionNum" ref="a13bbb470e627968c184ef4728ef85d7a" args="(const OTString &amp;strServerID, const int64_t &amp;lTransNum)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_pseudonym.html#a13bbb470e627968c184ef4728ef85d7a">OTPseudonym::VerifyTransactionNum</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strServerID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int64_t &amp;&#160;</td>
          <td class="paramname"><em>lTransNum</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l02195">2195</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> <a class="code" href="class_o_t_pseudonym.html#a5cecc3e38ed59ea6239cf0059d535d69">VerifyGenericNum</a>(m_mapTransNum, strServerID, lTransNum);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a52932b9c7bbb25ca21e1bf83d067e138"></a><!-- doxytag: member="OTPseudonym::VerifyTransactionStatementNumbersOnNym" ref="a52932b9c7bbb25ca21e1bf83d067e138" args="(OTPseudonym &amp;THE_NYM)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_pseudonym.html#a52932b9c7bbb25ca21e1bf83d067e138">OTPseudonym::VerifyTransactionStatementNumbersOnNym</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;&#160;</td>
          <td class="paramname"><em>THE_NYM</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_pseudonym_8cpp_source.html#l05494">5494</a> of file <a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    int64_t lTransactionNumber  = 0; <span class="comment">// Used in the loop below.</span>

    std::string strServerID;

    <span class="comment">// First, loop through the Nym on my side (*this), and verify that all those #s appear on the last receipt (THE_NYM)</span>
    <span class="comment">//</span>
    <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_pseudonym_8hpp.html#ac99ad82dc6c392a0a8c851c6041b62f1">mapOfTransNums</a>, <a class="code" href="class_o_t_pseudonym.html#a74e834007bee7a45651a98257152da72">GetMapIssuedNum</a>())
    {
        strServerID                 = (*it).first;
        <a class="code" href="_o_t_pseudonym_8hpp.html#a94632bfde6cf91c8294122f77527bcf1">dequeOfTransNums</a> * pDeque   = (it-&gt;second);

        <a class="code" href="class_o_t_string.html">OTString</a> OTstrServerID = strServerID.c_str();

        <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pDeque);

        <span class="keywordflow">if</span> (!(pDeque-&gt;empty()))
        {
            <span class="keywordflow">for</span> (uint32_t i = 0; i &lt; pDeque-&gt;size(); i++)
            {
                lTransactionNumber = pDeque-&gt;at(i);

                <span class="keywordflow">if</span> (<span class="keyword">false</span> == THE_NYM.<a class="code" href="class_o_t_pseudonym.html#a66cf3b97f1769f9d422bad8787a6c1a0">VerifyIssuedNum</a>(OTstrServerID, lTransactionNumber))
                {
                    <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;OTPseudonym::%s: Issued transaction # %lld from *this not found on THE_NYM.\n&quot;</span>,
                                   __FUNCTION__, lTransactionNumber);
                    <span class="keywordflow">return</span> <span class="keyword">false</span>;
                }
            }
        }
    } <span class="comment">// for</span>

    <span class="comment">// Getting here means that, though issued numbers may have been removed from my responsibility</span>
    <span class="comment">// in a subsequent balance agreement (since the transaction agreement was signed), I know</span>
    <span class="comment">// for a fact that no numbers have been ADDED to my list of responsibility.</span>
    <span class="comment">// That&#39;s the most we can verify here, since we don&#39;t know the account number that was</span>
    <span class="comment">// used for the last balance agreement.</span>


    <span class="keywordflow">return</span> <span class="keyword">true</span>;
}
</pre></div>
</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>include/otlib/<a class="el" href="_o_t_pseudonym_8hpp_source.html">OTPseudonym.hpp</a></li>
<li>src/otlib/<a class="el" href="_o_t_pseudonym_8cpp_source.html">OTPseudonym.cpp</a></li>
</ul>
</div><!-- contents -->
</div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a>      </li>

    <li class="footer">Generated on Wed May 21 2014 11:26:15 for Open-Transactions by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.6.1 </li>
   </ul>
 </div>


</body>
</html>
