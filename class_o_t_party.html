<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Open-Transactions: OTParty Class Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Open-Transactions
   &#160;<span id="projectnumber">master/1066fb4910a63ee3f7de8e0807fee3eb663b66c7</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('class_o_t_party.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">OTParty Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<!-- doxytag: class="OTParty" -->
<p><code>#include &lt;<a class="el" href="_o_t_party_8hpp_source.html">OTParty.hpp</a>&gt;</code></p>

<p><a href="class_o_t_party-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_party.html#a86a148a9f2e1e0769f851e342ee847b1">OTParty</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_party.html#a5a389da209f3c0e198c42c51a0cbf949">OTParty</a> (const char *szName, bool bIsOwnerNym, const char *szOwnerID, const char *szAuthAgent, const bool bCreateAgent=false)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_party.html#a8b51aeba54d255abd8ad7a87f0143451">OTParty</a> (const std::string str_PartyName, <a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;theNym, const std::string str_agent_name, <a class="el" href="class_o_t_account.html">OTAccount</a> *pAccount=NULL, const std::string *pstr_account_name=NULL, const int64_t lClosingTransNo=0)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_party.html#a316c5bd2c91ddd9e17887463075909d9">~OTParty</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_party.html#a99e6bc978ff03f4f46fb6ce07c129248">CleanupAgents</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_party.html#a67534cfc68d1ef239bc729e02ebbc3bc">CleanupAccounts</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_party.html#aea38f73c2145bddc59c900fd887bfd4e">Compare</a> (const <a class="el" href="class_o_t_party.html">OTParty</a> &amp;rhs) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_party.html#a417d0ab00166c2cd8fe2c07c3c218955">Serialize</a> (<a class="el" href="class_o_t_string.html">OTString</a> &amp;strAppend, bool bCalculatingID=false, bool bSpecifyAssetID=false, bool bSpecifyParties=false)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_party.html#a41a428ded2f0477cf8752648cbe51e4e">ClearTemporaryPointers</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_party.html#a4b078e0267983b8da083264f504489e1">SignContract</a> (<a class="el" href="class_o_t_contract.html">OTContract</a> &amp;theInput)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_party.html#add612bb3dc7fdc8a9a5bc014fd42104e">HasTransactionNum</a> (const int64_t &amp;lInput) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_party.html#ac8879e0a5d65ac273a56711336a9d45c">GetAllTransactionNumbers</a> (<a class="el" href="class_o_t_num_list.html">OTNumList</a> &amp;numlistOutput) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_party.html#acdd3320424cd48622f552653d79b9dc3">ReserveTransNumsForConfirm</a> (const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strServerID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_party.html#a27f92ee64f928849bde7f31d3c2b4d0a">HarvestAllTransactionNumbers</a> (const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strServerID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_party.html#ab97bb5511eae5e5702694d2c3b61eeee">HarvestOpeningNumber</a> (const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strServerID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_party.html#a077bf636b3e4ee6da09995c8074c6069">HarvestOpeningNumber</a> (<a class="el" href="class_o_t_agent.html">OTAgent</a> &amp;theAgent, const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strServerID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_party.html#af17b2590568f39510f23c4b41d3acb12">HarvestOpeningNumber</a> (<a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;theNym, const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strServerID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_party.html#ab400cfbda3311a3ae37a0b394cd4bfa5">CloseoutOpeningNumber</a> (const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strServerID, bool bSave=false, <a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> *pSignerNym=NULL)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_party.html#a35c3abd49e3b7b59606b6a8ac52dcb0b">HarvestClosingNumbers</a> (const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strServerID, bool bSave=false, <a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> *pSignerNym=NULL)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_party.html#abdab82bb2d32dc8eed42ced8f80709b3">HarvestClosingNumbers</a> (<a class="el" href="class_o_t_agent.html">OTAgent</a> &amp;theAgent, const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strServerID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_party.html#a37ec6d7175fed90cf142b8000e0d9f76">HarvestClosingNumbers</a> (<a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;theNym, const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strServerID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_party.html#a6a98b5bb7fb58bd31fa3aa94b53023f6">DropFinalReceiptToNymboxes</a> (const int64_t &amp;lNewTransactionNumber, const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strOrigCronItem, <a class="el" href="class_o_t_string.html">OTString</a> *pstrNote=NULL, <a class="el" href="class_o_t_string.html">OTString</a> *pstrAttachment=NULL, <a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> *pActualNym=NULL)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_party.html#a8144d9376f00f992e0df6f4cfd3a31f1">DropFinalReceiptToInboxes</a> (<a class="el" href="_o_t_agent_8hpp.html#ac89892658f6bc83e354078647b704e8f">mapOfNyms</a> *pNymMap, const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strServerID, <a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;theServerNym, const int64_t &amp;lNewTransactionNumber, const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strOrigCronItem, <a class="el" href="class_o_t_string.html">OTString</a> *pstrNote=NULL, <a class="el" href="class_o_t_string.html">OTString</a> *pstrAttachment=NULL)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_party.html#a7419b9a17e72819156005dd976b2dd1e">SendNoticeToParty</a> (bool bSuccessMsg, <a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;theServerNym, const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;theServerID, const int64_t &amp;lNewTransactionNumber, const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strReference, <a class="el" href="class_o_t_string.html">OTString</a> *pstrNote=NULL, <a class="el" href="class_o_t_string.html">OTString</a> *pstrAttachment=NULL, <a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> *pActualNym=NULL)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_o_t_scriptable.html">OTScriptable</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_party.html#a1b9faa99024a34142bc2f8d4367d31fb">GetOwnerAgreement</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_party.html#a41f870f87f27213da8f4c2996a3d0bf1">SetOwnerAgreement</a> (<a class="el" href="class_o_t_scriptable.html">OTScriptable</a> &amp;theOwner)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_party.html#a4a5ec299bde05422462ddcb0a66495d4">SetMySignedCopy</a> (const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strMyCopy)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_party.html#a6559c663654d4f9d54628f6116737b47">GetMySignedCopy</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_party.html#aa11f990dfe9743dd1d8e34af8bfd693a">GetOpeningTransNo</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_party.html#a7f587b2f9dc4305e035057fa252b8fa7">SetOpeningTransNo</a> (const int64_t &amp;theNumber)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_party.html#a96466528395e84f908c2033482033bb3">GetClosingTransNo</a> (const std::string str_for_acct_name) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_party.html#ad823a9d89b3d8d0d87bc85114eefcead">GetPartyName</a> (bool *pBoolSuccess=NULL) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_party.html#a6da00ab01a3e03f75894d35f1a4b3980">SetPartyName</a> (const std::string &amp;str_party_name_input)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_party.html#a1c2f66b28bd7062505430fcbe18f9c12">IsNym</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_party.html#a89552b5fb6769fd7ad69deedb633653f">IsEntity</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_party.html#a22ca91a1414fd1457f192d91fe740d80">GetNymID</a> (bool *pBoolSuccess=NULL) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_party.html#af97e994c6b77aaf57fc4bf7fd1ff4861">GetEntityID</a> (bool *pBoolSuccess=NULL) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_party.html#a4aa12384e93bd6c2f6d437cf8ca97dfa">GetPartyID</a> (bool *pBoolSuccess=NULL) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_party.html#a477b8c4714d7ac086630c236e4be6f89">HasActiveAgent</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_party.html#a16221b0011a08f0f239ba82741851c0b">AddAgent</a> (<a class="el" href="class_o_t_agent.html">OTAgent</a> &amp;theAgent)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_party.html#afb288a76dd356ce029b4792dc2d6c019">GetAgentCount</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT <a class="el" href="class_o_t_agent.html">OTAgent</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_party.html#af959cf9f0815a145c5a3072eadfaeb14">GetAgent</a> (const std::string &amp;str_agent_name)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT <a class="el" href="class_o_t_agent.html">OTAgent</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_party.html#aa3e7fa9717af688b00e1b0b0983fd891">GetAgentByIndex</a> (int32_t nIndex)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const std::string &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_party.html#a374056d26b9a605719f4bd585b4d264c">GetAuthorizingAgentName</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_party.html#a45b9f2d265bf4717ce325ec4923b7a13">SetAuthorizingAgentName</a> (const std::string str_agent_name)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_party.html#afda73de60d222bc8c01b893289a4564e">HasAgent</a> (<a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;theNym, <a class="el" href="class_o_t_agent.html">OTAgent</a> **ppAgent=NULL) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_party.html#a6d8f917d33c9c49c6425add0b041e4ee">HasAgentByNymID</a> (const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;theNymID, <a class="el" href="class_o_t_agent.html">OTAgent</a> **ppAgent=NULL) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_party.html#aa34fe1901531ed5056633b99fade0f93">HasAuthorizingAgent</a> (<a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;theNym, <a class="el" href="class_o_t_agent.html">OTAgent</a> **ppAgent=NULL) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_party.html#a649744ad680735efc8f3670c0b4294fc">HasAuthorizingAgentByNymID</a> (const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;theNymID, <a class="el" href="class_o_t_agent.html">OTAgent</a> **ppAgent=NULL) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_party.html#a01988fe0bfd917703214f7f7bf3ba66f">LoadAuthorizingAgentNym</a> (<a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;theSignerNym, <a class="el" href="class_o_t_agent.html">OTAgent</a> **ppAgent=NULL)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_party.html#aa47dda003a2d39a491ac96582c9679b8">RetrieveNymPointers</a> (<a class="el" href="_o_t_agent_8hpp.html#ac89892658f6bc83e354078647b704e8f">mapOfNyms</a> &amp;map_Nyms_Already_Loaded)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_party.html#a143915bb1a69a404cc35b02f50f0e2d3">AddAccount</a> (<a class="el" href="class_o_t_party_account.html">OTPartyAccount</a> &amp;thePartyAcct)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_party.html#a6266e4e47ad6d2b61b9afdb4e4b7bab4">AddAccount</a> (const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strAgentName, const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strName, const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strAcctID, const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strAssetTypeID, const int64_t lClosingTransNo)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_party.html#a7f4452588223531f44703ba77a5f2ece">AddAccount</a> (const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strAgentName, const char *szAcctName, <a class="el" href="class_o_t_account.html">OTAccount</a> &amp;theAccount, const int64_t lClosingTransNo)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_party.html#a0b130989d275386c980ed34d587e5e87">GetAccountCount</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_party.html#acb7e7769debe27c01d56aa7d9e9ba7bb">GetAccountCount</a> (const std::string str_agent_name) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT <a class="el" href="class_o_t_party_account.html">OTPartyAccount</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_party.html#aee3973dc05c042dab571781a9d454af2">GetAccount</a> (const std::string &amp;str_acct_name) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT <a class="el" href="class_o_t_party_account.html">OTPartyAccount</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_party.html#ad085e6ba37a006e0f8cf7e100a9b59eb">GetAccountByIndex</a> (int32_t nIndex)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT <a class="el" href="class_o_t_party_account.html">OTPartyAccount</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_party.html#a6cdea442a9b09e5b8f3fdfedba4ae767">GetAccountByAgent</a> (const std::string &amp;str_agent_name)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT <a class="el" href="class_o_t_party_account.html">OTPartyAccount</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_party.html#a31c08f0f4902dd79db4786d10f2fe81e">GetAccountByID</a> (const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;theAcctID) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_party.html#ad586d25e956e0925e58e39879688a8e9">HasAccount</a> (<a class="el" href="class_o_t_account.html">OTAccount</a> &amp;theAccount, <a class="el" href="class_o_t_party_account.html">OTPartyAccount</a> **ppPartyAccount=NULL) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_party.html#a1bf782a97edb882ba9ace729ed74e22d">HasAccountByID</a> (const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;theAcctID, <a class="el" href="class_o_t_party_account.html">OTPartyAccount</a> **ppPartyAccount=NULL) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_party.html#a34d26cfe50e7065718c0360b42ca20ef">VerifyOwnershipOfAccount</a> (const <a class="el" href="class_o_t_account.html">OTAccount</a> &amp;theAccount) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_party.html#aa047a5d694ee951edf7bc7fc8a686d82">VerifyAccountsWithTheirAgents</a> (<a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;theSignerNym, const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strServerID, const bool bBurnTransNo=false)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_party.html#a25cbdb93b6a7bf5fe7df01942974eb5c">CopyAcctsToConfirmingParty</a> (<a class="el" href="class_o_t_party.html">OTParty</a> &amp;theParty) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_party.html#a4b395f87e458618a3b15a93575c15fce">RegisterAccountsForExecution</a> (<a class="el" href="class_o_t_script.html">OTScript</a> &amp;theScript)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_party.html#a2f9d6c69f58bb85a524f897a70a1dae6">LoadAndVerifyAgentNyms</a> (<a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;theServerNym, <a class="el" href="_o_t_agent_8hpp.html#ac89892658f6bc83e354078647b704e8f">mapOfNyms</a> &amp;map_Nyms_Already_Loaded, <a class="el" href="_o_t_agent_8hpp.html#ac89892658f6bc83e354078647b704e8f">mapOfNyms</a> &amp;map_NewlyLoaded)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_party.html#a29151e24141937447c2be93a237e0613">LoadAndVerifyAssetAccounts</a> (<a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;theServerNym, const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strServerID, <a class="el" href="_o_t_agent_8hpp.html#abd4942716d546c8d42670619a03ef99e">mapOfAccounts</a> &amp;map_Accts_Already_Loaded, <a class="el" href="_o_t_agent_8hpp.html#abd4942716d546c8d42670619a03ef99e">mapOfAccounts</a> &amp;map_NewlyLoaded)</td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock">
<p>Definition at line <a class="el" href="_o_t_party_8hpp_source.html#l00176">176</a> of file <a class="el" href="_o_t_party_8hpp_source.html">OTParty.hpp</a>.</p>
</div><hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a86a148a9f2e1e0769f851e342ee847b1"></a><!-- doxytag: member="OTParty::OTParty" ref="a86a148a9f2e1e0769f851e342ee847b1" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_party.html#a86a148a9f2e1e0769f851e342ee847b1">OTParty::OTParty</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_party_8cpp_source.html#l00225">225</a> of file <a class="el" href="_o_t_party_8cpp_source.html">OTParty.cpp</a>.</p>
<div class="fragment"><pre class="fragment">: m_pstr_party_name(NULL), m_bPartyIsNym(<span class="keyword">false</span>),
  m_lOpeningTransNo(0), m_pOwnerAgreement(NULL)
{

}
</pre></div>
</div>
</div>
<a class="anchor" id="a5a389da209f3c0e198c42c51a0cbf949"></a><!-- doxytag: member="OTParty::OTParty" ref="a5a389da209f3c0e198c42c51a0cbf949" args="(const char *szName, bool bIsOwnerNym, const char *szOwnerID, const char *szAuthAgent, const bool bCreateAgent=false)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_party.html#a86a148a9f2e1e0769f851e342ee847b1">OTParty::OTParty</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>szName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>bIsOwnerNym</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>szOwnerID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>szAuthAgent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const bool&#160;</td>
          <td class="paramname"><em>bCreateAgent</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_party_8cpp_source.html#l00233">233</a> of file <a class="el" href="_o_t_party_8cpp_source.html">OTParty.cpp</a>.</p>
<div class="fragment"><pre class="fragment">: m_pstr_party_name(NULL), m_bPartyIsNym(bIsOwnerNym), m_str_owner_id(szOwnerID != NULL ? szOwnerID : <span class="stringliteral">&quot;&quot;</span>),
  m_str_authorizing_agent(szAuthAgent != NULL ? szAuthAgent : <span class="stringliteral">&quot;&quot;</span>),
  m_lOpeningTransNo(0), m_pOwnerAgreement(NULL)
{
    m_pstr_party_name = <span class="keyword">new</span> std::string(szName != NULL ? szName : <span class="stringliteral">&quot;&quot;</span>);

    <span class="comment">// ------------------------------------------</span>
    <span class="keywordflow">if</span> (bCreateAgent)
    {
        <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a>  strName(m_str_authorizing_agent.c_str()),
                        strNymID(<span class="stringliteral">&quot;&quot;</span>), strRoleID(<span class="stringliteral">&quot;&quot;</span>), strGroupName(<span class="stringliteral">&quot;&quot;</span>);
        <a class="code" href="class_o_t_agent.html">OTAgent</a> * pAgent = <span class="keyword">new</span> <a class="code" href="class_o_t_agent.html">OTAgent</a>(<span class="keyword">true</span> <span class="comment">/*bNymRepresentsSelf*/</span>, <span class="keyword">true</span> <span class="comment">/*bIsAnIndividual*/</span>,
                                       strName, strNymID, strRoleID, strGroupName);
        <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pAgent);

        <span class="keywordflow">if</span> (!<a class="code" href="class_o_t_party.html#a16221b0011a08f0f239ba82741851c0b">AddAgent</a>(*pAgent))
        {
            <a class="code" href="class_o_t_log.html#a5acd90ac91c2618f395b0ff37ad4f8ee">OTLog::Error</a>(<span class="stringliteral">&quot;OTParty::OTParty: *** Failed *** while adding default agent in CONSTRUCTOR! 2\n&quot;</span>);
            <span class="keyword">delete</span> pAgent; pAgent = NULL;
        }
    }
    <span class="comment">// ------------------------------------------</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="a8b51aeba54d255abd8ad7a87f0143451"></a><!-- doxytag: member="OTParty::OTParty" ref="a8b51aeba54d255abd8ad7a87f0143451" args="(const std::string str_PartyName, OTPseudonym &amp;theNym, const std::string str_agent_name, OTAccount *pAccount=NULL, const std::string *pstr_account_name=NULL, const int64_t lClosingTransNo=0)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_party.html#a86a148a9f2e1e0769f851e342ee847b1">OTParty::OTParty</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string&#160;</td>
          <td class="paramname"><em>str_PartyName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;&#160;</td>
          <td class="paramname"><em>theNym</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string&#160;</td>
          <td class="paramname"><em>str_agent_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_account.html">OTAccount</a> *&#160;</td>
          <td class="paramname"><em>pAccount</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string *&#160;</td>
          <td class="paramname"><em>pstr_account_name</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int64_t&#160;</td>
          <td class="paramname"><em>lClosingTransNo</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_party_8cpp_source.html#l00259">259</a> of file <a class="el" href="_o_t_party_8cpp_source.html">OTParty.cpp</a>.</p>
<div class="fragment"><pre class="fragment">: m_pstr_party_name(<span class="keyword">new</span> std::string(str_PartyName)), m_bPartyIsNym(<span class="keyword">true</span>),
  m_lOpeningTransNo(0), m_pOwnerAgreement(NULL)
{
<span class="comment">//  m_pstr_party_name = new std::string(str_PartyName);</span>
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != m_pstr_party_name);

    <span class="comment">// theNym is owner, therefore save his ID information, and create the agent</span>
    <span class="comment">// for this Nym automatically (that&#39;s why it was passed in.)</span>
    <span class="comment">// This code won&#39;t compile until you do.  :-)</span>

    <a class="code" href="class_o_t_string.html">OTString</a> strNymID;
    theNym.<a class="code" href="class_o_t_pseudonym.html#a1775c7aedd0dd25b2faf3f78dcccabe7">GetIdentifier</a>(strNymID);
    m_str_owner_id = strNymID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();

<span class="comment">//  std::string         m_str_authorizing_agent;    // Empty until contract is confirmed. Contains the name of the authorizing agent (the one who supplied the opening Trans#)</span>
<span class="comment">//  int64_t             m_lOpeningTransNo;          // Empty until contract is confirmed. Each party (to a smart contract anyway) must provide an opening transaction #.</span>
<span class="comment">//  OTString            m_strMySignedCopy;          // Empty until contract is confirmed.</span>
<span class="comment">//  mapOfAgents         m_mapAgents;                // (Often) empty until contract is confirmed. These are owned.</span>
<span class="comment">//  mapOfPartyAccounts  m_mapPartyAccounts;         // These are owned. Each contains a Closing Transaction#.</span>

    <a class="code" href="class_o_t_agent.html">OTAgent</a> * pAgent = <span class="keyword">new</span> <a class="code" href="class_o_t_agent.html">OTAgent</a>(str_agent_name, theNym); <span class="comment">// (The third arg, bRepresentsSelf, defaults here to true.)</span>
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pAgent);

    <span class="keywordflow">if</span> (!<a class="code" href="class_o_t_party.html#a16221b0011a08f0f239ba82741851c0b">AddAgent</a>(*pAgent))
    {
        <a class="code" href="class_o_t_log.html#a5acd90ac91c2618f395b0ff37ad4f8ee">OTLog::Error</a>(<span class="stringliteral">&quot;OTParty::OTParty: *** Failed *** while adding default agent in CONSTRUCTOR!\n&quot;</span>);
        <span class="keyword">delete</span> pAgent; pAgent = NULL;
    }
    <span class="keywordflow">else</span>
        m_str_authorizing_agent = str_agent_name;
    <span class="comment">// ------------------------------------------</span>

    <span class="comment">// if pAccount is NOT NULL, then an account was passed in, so</span>
    <span class="comment">// let&#39;s also create a default partyaccount for it.</span>
    <span class="comment">//</span>
    <span class="keywordflow">if</span> (NULL != pAccount)
    {
        <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pstr_account_name); <span class="comment">// If passing an account, then you MUST pass an account name also.</span>

        <span class="keywordtype">bool</span> bAdded = <a class="code" href="class_o_t_party.html#a143915bb1a69a404cc35b02f50f0e2d3">AddAccount</a>(str_agent_name.c_str(), pstr_account_name-&gt;c_str(),
                                 *pAccount, lClosingTransNo);

        <span class="keywordflow">if</span> (!bAdded)
            <a class="code" href="class_o_t_log.html#a5acd90ac91c2618f395b0ff37ad4f8ee">OTLog::Error</a>(<span class="stringliteral">&quot;OTParty::OTParty: *** Failed *** while adding default account in CONSTRUCTOR!\n&quot;</span>);
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a316c5bd2c91ddd9e17887463075909d9"></a><!-- doxytag: member="OTParty::~OTParty" ref="a316c5bd2c91ddd9e17887463075909d9" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_party.html#a316c5bd2c91ddd9e17887463075909d9">OTParty::~OTParty</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_party_8cpp_source.html#l00488">488</a> of file <a class="el" href="_o_t_party_8cpp_source.html">OTParty.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_o_t_party.html#a99e6bc978ff03f4f46fb6ce07c129248">CleanupAgents</a>();
    <a class="code" href="class_o_t_party.html#a67534cfc68d1ef239bc729e02ebbc3bc">CleanupAccounts</a>();

    <span class="keywordflow">if</span> (NULL != m_pstr_party_name)
        <span class="keyword">delete</span> m_pstr_party_name;
    m_pstr_party_name = NULL;

    m_pOwnerAgreement = NULL;
}
</pre></div>
</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a143915bb1a69a404cc35b02f50f0e2d3"></a><!-- doxytag: member="OTParty::AddAccount" ref="a143915bb1a69a404cc35b02f50f0e2d3" args="(OTPartyAccount &amp;thePartyAcct)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_party.html#a143915bb1a69a404cc35b02f50f0e2d3">OTParty::AddAccount</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_party_account.html">OTPartyAccount</a> &amp;&#160;</td>
          <td class="paramname"><em>thePartyAcct</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_party_8cpp_source.html#l00386">386</a> of file <a class="el" href="_o_t_party_8cpp_source.html">OTParty.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keyword">const</span> std::string str_acct_name = thePartyAcct.<a class="code" href="class_o_t_party_account.html#a56b14b8bc2279fab08cc9c2c754043d4">GetName</a>().<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();

    <span class="keywordflow">if</span> (!<a class="code" href="class_o_t_scriptable.html#a9492afb0aee3340f6fbdffdbdf8d5291">OTScriptable::ValidateName</a>(str_acct_name))
    {
        <a class="code" href="class_o_t_log.html#a5acd90ac91c2618f395b0ff37ad4f8ee">OTLog::Error</a>(<span class="stringliteral">&quot;OTParty::AddAccount: Failed validating Account name.&quot;</span>);
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// -------------------------------------------------</span>

    mapOfPartyAccounts::iterator ii = m_mapPartyAccounts.find(str_acct_name);

    <span class="keywordflow">if</span> (m_mapPartyAccounts.end() == ii) <span class="comment">// If it wasn&#39;t already there...</span>
    {
        <span class="comment">// Todo:  Validate here that there isn&#39;t another account already on the same party</span>
        <span class="comment">// that, while it has a different &quot;account name&quot; actually has the same Account ID.</span>
        <span class="comment">// We do not want the same Account ID on multiple accounts. (Unless the script</span>
        <span class="comment">// interpreter is going to be smart enough to make them available that way without</span>
        <span class="comment">// ever loading the same account twice.) We can&#39;t otherwise take the risk, si server</span>
        <span class="comment">//  will have to validate this unless it juggles the accounts like that.</span>
        <span class="comment">//</span>
        <span class="comment">// ----------------</span>

        <span class="comment">// Then insert it...</span>
        m_mapPartyAccounts.insert(std::pair&lt;std::string, OTPartyAccount *&gt;(str_acct_name, &amp;thePartyAcct));

        <span class="comment">// Make sure it has a pointer back to me.</span>
        thePartyAcct.<a class="code" href="class_o_t_party_account.html#ad7d225bb37e6789d6f92ba58cce8a6ce">SetParty</a>(*<span class="keyword">this</span>);

        <span class="keywordflow">return</span> <span class="keyword">true</span>;
    }
    <span class="keywordflow">else</span>
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;OTParty::AddAccount: Failed -- Account was already on party named %s.\n&quot;</span>,
                       str_acct_name.c_str());

    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a6266e4e47ad6d2b61b9afdb4e4b7bab4"></a><!-- doxytag: member="OTParty::AddAccount" ref="a6266e4e47ad6d2b61b9afdb4e4b7bab4" args="(const OTString &amp;strAgentName, const OTString &amp;strName, const OTString &amp;strAcctID, const OTString &amp;strAssetTypeID, const int64_t lClosingTransNo)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_party.html#a143915bb1a69a404cc35b02f50f0e2d3">OTParty::AddAccount</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strAgentName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strAcctID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strAssetTypeID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int64_t&#160;</td>
          <td class="paramname"><em>lClosingTransNo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_party_8cpp_source.html#l00349">349</a> of file <a class="el" href="_o_t_party_8cpp_source.html">OTParty.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_o_t_party_account.html">OTPartyAccount</a> * pPartyAccount = <span class="keyword">new</span> <a class="code" href="class_o_t_party_account.html">OTPartyAccount</a>(strName, strAgentName, strAcctID, strAssetTypeID, lClosingTransNo);
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pPartyAccount);

    <span class="keywordflow">if</span> (<span class="keyword">false</span> == <a class="code" href="class_o_t_party.html#a143915bb1a69a404cc35b02f50f0e2d3">AddAccount</a>(*pPartyAccount))
    {
        <span class="keyword">delete</span> pPartyAccount;
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }

    <span class="keywordflow">return</span> <span class="keyword">true</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a7f4452588223531f44703ba77a5f2ece"></a><!-- doxytag: member="OTParty::AddAccount" ref="a7f4452588223531f44703ba77a5f2ece" args="(const OTString &amp;strAgentName, const char *szAcctName, OTAccount &amp;theAccount, const int64_t lClosingTransNo)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_party.html#a143915bb1a69a404cc35b02f50f0e2d3">OTParty::AddAccount</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strAgentName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>szAcctName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_account.html">OTAccount</a> &amp;&#160;</td>
          <td class="paramname"><em>theAccount</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int64_t&#160;</td>
          <td class="paramname"><em>lClosingTransNo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_party_8cpp_source.html#l00368">368</a> of file <a class="el" href="_o_t_party_8cpp_source.html">OTParty.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_o_t_party_account.html">OTPartyAccount</a> * pPartyAccount = <span class="keyword">new</span> <a class="code" href="class_o_t_party_account.html">OTPartyAccount</a>(szAcctName, strAgentName, theAccount, lClosingTransNo);
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pPartyAccount);

    <span class="keywordflow">if</span> (<span class="keyword">false</span> == <a class="code" href="class_o_t_party.html#a143915bb1a69a404cc35b02f50f0e2d3">AddAccount</a>(*pPartyAccount))
    {
        <span class="keyword">delete</span> pPartyAccount;
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }

    <span class="keywordflow">return</span> <span class="keyword">true</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a16221b0011a08f0f239ba82741851c0b"></a><!-- doxytag: member="OTParty::AddAgent" ref="a16221b0011a08f0f239ba82741851c0b" args="(OTAgent &amp;theAgent)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_party.html#a16221b0011a08f0f239ba82741851c0b">OTParty::AddAgent</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_agent.html">OTAgent</a> &amp;&#160;</td>
          <td class="paramname"><em>theAgent</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_party_8cpp_source.html#l00314">314</a> of file <a class="el" href="_o_t_party_8cpp_source.html">OTParty.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keyword">const</span> std::string str_agent_name = theAgent.<a class="code" href="class_o_t_agent.html#a123d27f05e46977ecdbe0b83de3c119d">GetName</a>().<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();

    <span class="keywordflow">if</span> (!<a class="code" href="class_o_t_scriptable.html#a9492afb0aee3340f6fbdffdbdf8d5291">OTScriptable::ValidateName</a>(str_agent_name))
    {
        <a class="code" href="class_o_t_log.html#a5acd90ac91c2618f395b0ff37ad4f8ee">OTLog::Error</a>(<span class="stringliteral">&quot;OTParty::AddAgent: Failed validating Agent name.&quot;</span>);
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// -------------------------------------------------</span>

    mapOfAgents::iterator ii = m_mapAgents.find(str_agent_name);

    <span class="keywordflow">if</span> (m_mapAgents.end() == ii) <span class="comment">// If it wasn&#39;t already there...</span>
    {
        <span class="comment">// TODO: Validate here that the same agent isn&#39;t already on this party under a different name.</span>
        <span class="comment">// Server either has to validate this as well, or be smart enough to juggle the Nyms inside the</span>
        <span class="comment">// agents so that they aren&#39;t loaded twice.</span>

        <span class="comment">// -------------------------------</span>
        <span class="comment">// Then insert it...</span>
        m_mapAgents.insert(std::pair&lt;std::string, OTAgent *&gt;(str_agent_name, &amp;theAgent));

        <span class="comment">// Make sure it has a pointer back to me.</span>
        theAgent.<a class="code" href="class_o_t_agent.html#a8809ec0331164b75700e462c8d808dd6">SetParty</a>(*<span class="keyword">this</span>);

        <span class="keywordflow">return</span> <span class="keyword">true</span>;
    }
    <span class="keywordflow">else</span>
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;OTParty::AddAgent: Failed -- Agent was already there named %s.\n&quot;</span>, str_agent_name.c_str());

    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a67534cfc68d1ef239bc729e02ebbc3bc"></a><!-- doxytag: member="OTParty::CleanupAccounts" ref="a67534cfc68d1ef239bc729e02ebbc3bc" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_party.html#a67534cfc68d1ef239bc729e02ebbc3bc">OTParty::CleanupAccounts</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_party_8cpp_source.html#l00474">474</a> of file <a class="el" href="_o_t_party_8cpp_source.html">OTParty.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// ------------------------</span>
    <span class="keywordflow">while</span> (!m_mapPartyAccounts.empty())
    {
        <a class="code" href="class_o_t_party_account.html">OTPartyAccount</a> * pTemp = m_mapPartyAccounts.begin()-&gt;second;
        <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pTemp);
        <span class="keyword">delete</span> pTemp; pTemp = NULL;
        m_mapPartyAccounts.erase(m_mapPartyAccounts.begin());
    }
    <span class="comment">// ------------------------</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="a99e6bc978ff03f4f46fb6ce07c129248"></a><!-- doxytag: member="OTParty::CleanupAgents" ref="a99e6bc978ff03f4f46fb6ce07c129248" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_party.html#a99e6bc978ff03f4f46fb6ce07c129248">OTParty::CleanupAgents</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_party_8cpp_source.html#l00460">460</a> of file <a class="el" href="_o_t_party_8cpp_source.html">OTParty.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// ------------------------</span>
    <span class="keywordflow">while</span> (!m_mapAgents.empty())
    {
        <a class="code" href="class_o_t_agent.html">OTAgent</a> * pTemp = m_mapAgents.begin()-&gt;second;
        <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pTemp);
        <span class="keyword">delete</span> pTemp; pTemp = NULL;
        m_mapAgents.erase(m_mapAgents.begin());
    }
    <span class="comment">// ------------------------</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="a41a428ded2f0477cf8752648cbe51e4e"></a><!-- doxytag: member="OTParty::ClearTemporaryPointers" ref="a41a428ded2f0477cf8752648cbe51e4e" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_party.html#a41a428ded2f0477cf8752648cbe51e4e">OTParty::ClearTemporaryPointers</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_party_8cpp_source.html#l00501">501</a> of file <a class="el" href="_o_t_party_8cpp_source.html">OTParty.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_agent_8hpp.html#aeed1daf4b84f9a0672d3d16076d68de4">mapOfAgents</a>, m_mapAgents)
    {
        <a class="code" href="class_o_t_agent.html">OTAgent</a> * pAgent = (*it).second;
        <a class="code" href="_o_t_assert_8hpp.html#a033b133f48e61f2b227c52ad2be0c882">OT_ASSERT_MSG</a>(NULL != pAgent, <span class="stringliteral">&quot;Unexpected NULL agent pointer in party map.&quot;</span>);

        pAgent-&gt;<a class="code" href="class_o_t_agent.html#a90211a756315e750b9e658bc6a224f0e">ClearTemporaryPointers</a>();
    }
    <span class="comment">// -------------------------------------</span>

    <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_party_account_8hpp.html#ad14c568ca8da6c72a36200f938fd5f59">mapOfPartyAccounts</a>, m_mapPartyAccounts)
    {
        <a class="code" href="class_o_t_party_account.html">OTPartyAccount</a> * pAcct = (*it).second;
        <a class="code" href="_o_t_assert_8hpp.html#a033b133f48e61f2b227c52ad2be0c882">OT_ASSERT_MSG</a>(NULL != pAcct, <span class="stringliteral">&quot;Unexpected NULL partyaccount pointer in party map.&quot;</span>);

        pAcct-&gt;<a class="code" href="class_o_t_party_account.html#a860d243d151d475ab259779019632a62">ClearTemporaryPointers</a>();
    }
    <span class="comment">// -------------------------------------</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab400cfbda3311a3ae37a0b394cd4bfa5"></a><!-- doxytag: member="OTParty::CloseoutOpeningNumber" ref="ab400cfbda3311a3ae37a0b394cd4bfa5" args="(const OTString &amp;strServerID, bool bSave=false, OTPseudonym *pSignerNym=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_party.html#ab400cfbda3311a3ae37a0b394cd4bfa5">OTParty::CloseoutOpeningNumber</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strServerID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>bSave</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> *&#160;</td>
          <td class="paramname"><em>pSignerNym</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_party_8cpp_source.html#l01609">1609</a> of file <a class="el" href="_o_t_party_8cpp_source.html">OTParty.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (<a class="code" href="class_o_t_party.html#a374056d26b9a605719f4bd585b4d264c">GetAuthorizingAgentName</a>().size() &lt;= 0)
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;OTParty::%s: Error: Authorizing agent name is blank.\n&quot;</span>, __FUNCTION__);
        <span class="keywordflow">return</span>;
    }
    <span class="comment">// ---------------------------------------------</span>
    <a class="code" href="class_o_t_agent.html">OTAgent</a> * pAgent = <a class="code" href="class_o_t_party.html#af959cf9f0815a145c5a3072eadfaeb14">GetAgent</a>(<a class="code" href="class_o_t_party.html#a374056d26b9a605719f4bd585b4d264c">GetAuthorizingAgentName</a>());
    <span class="keywordflow">if</span> (NULL == pAgent)
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;OTParty::%s: Error: Unable to find Authorizing agent (%s) for party: %s.\n&quot;</span>,
                      __FUNCTION__, <a class="code" href="class_o_t_party.html#a374056d26b9a605719f4bd585b4d264c">GetAuthorizingAgentName</a>().c_str(), <a class="code" href="class_o_t_party.html#ad823a9d89b3d8d0d87bc85114eefcead">GetPartyName</a>().c_str());
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="class_o_t_party.html#aa11f990dfe9743dd1d8e34af8bfd693a">GetOpeningTransNo</a>() &gt; 0)
        pAgent-&gt;<a class="code" href="class_o_t_agent.html#a934b2f47826d1b754f07c312099edf86">RemoveIssuedNumber</a>(<a class="code" href="class_o_t_party.html#aa11f990dfe9743dd1d8e34af8bfd693a">GetOpeningTransNo</a>(), strServerID, bSave, pSignerNym);
    <span class="keywordflow">else</span>
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;OTParty::%s: Nothing to closeout, it was already 0 for party: %s\n&quot;</span>,
                       __FUNCTION__, <a class="code" href="class_o_t_party.html#ad823a9d89b3d8d0d87bc85114eefcead">GetPartyName</a>().c_str());
}
</pre></div>
</div>
</div>
<a class="anchor" id="aea38f73c2145bddc59c900fd887bfd4e"></a><!-- doxytag: member="OTParty::Compare" ref="aea38f73c2145bddc59c900fd887bfd4e" args="(const OTParty &amp;rhs) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_party.html#aea38f73c2145bddc59c900fd887bfd4e">OTParty::Compare</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_party.html">OTParty</a> &amp;&#160;</td>
          <td class="paramname"><em>rhs</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_party_8cpp_source.html#l01789">1789</a> of file <a class="el" href="_o_t_party_8cpp_source.html">OTParty.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keyword">const</span> std::string str_party_name(rhs.<a class="code" href="class_o_t_party.html#ad823a9d89b3d8d0d87bc85114eefcead">GetPartyName</a>());

    <span class="keywordflow">if</span> (!(str_party_name.compare(<a class="code" href="class_o_t_party.html#ad823a9d89b3d8d0d87bc85114eefcead">GetPartyName</a>()) == 0))
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;OTParty::Compare: Names don&#39;t match.  %s  /  %s \n&quot;</span>,
                       <a class="code" href="class_o_t_party.html#ad823a9d89b3d8d0d87bc85114eefcead">GetPartyName</a>().c_str(), str_party_name.c_str());
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }

    <span class="comment">// The party might first be added WITHOUT filling out the Nym/Agent info.</span>
    <span class="comment">// As long as the party&#39;s name is right, and the accounts are all there with the</span>
    <span class="comment">// correct asset type IDs, then it should matter if LATER, when the party CONFIRMS</span>
    <span class="comment">// the agreement, he supplies himself as an entity or a Nym, or whether he supplies this</span>
    <span class="comment">// agent or that agent.  That information is important and is stored, but is not relevant</span>
    <span class="comment">// for a Compare().</span>
<span class="comment">//  if (IsNym() != rhs.IsNym())</span>
<span class="comment">//  {</span>
<span class="comment">//      OTLog::vOutput(0, &quot;OTParty::Compare: One of these parties is a Nym and the other is not:  %s  /  %s \n&quot;,</span>
<span class="comment">//                     GetPartyName().c_str(), str_party_name.c_str());</span>
<span class="comment">//      return false;</span>
<span class="comment">//  }</span>

    <span class="keywordflow">if</span> ((this-&gt;<a class="code" href="class_o_t_party.html#aa11f990dfe9743dd1d8e34af8bfd693a">GetOpeningTransNo</a>() &gt; 0) &amp;&amp;
        (rhs.<a class="code" href="class_o_t_party.html#aa11f990dfe9743dd1d8e34af8bfd693a">GetOpeningTransNo</a>() &gt; 0) &amp;&amp;
        (this-&gt;<a class="code" href="class_o_t_party.html#aa11f990dfe9743dd1d8e34af8bfd693a">GetOpeningTransNo</a>() != rhs.<a class="code" href="class_o_t_party.html#aa11f990dfe9743dd1d8e34af8bfd693a">GetOpeningTransNo</a>())
       )
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;OTParty::Compare: Opening transaction numbers don&#39;t match for party %s. ( %lld  /  %lld ) \n&quot;</span>,
                       <a class="code" href="class_o_t_party.html#ad823a9d89b3d8d0d87bc85114eefcead">GetPartyName</a>().c_str(), this-&gt;<a class="code" href="class_o_t_party.html#aa11f990dfe9743dd1d8e34af8bfd693a">GetOpeningTransNo</a>(), rhs.<a class="code" href="class_o_t_party.html#aa11f990dfe9743dd1d8e34af8bfd693a">GetOpeningTransNo</a>());
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// ---------------------------------------------------</span>
    <span class="keywordflow">if</span> (
        (this-&gt;<a class="code" href="class_o_t_party.html#a4aa12384e93bd6c2f6d437cf8ca97dfa">GetPartyID</a>().size() &gt; 0) &amp;&amp;
        (rhs.  <a class="code" href="class_o_t_party.html#a4aa12384e93bd6c2f6d437cf8ca97dfa">GetPartyID</a>().size() &gt; 0) &amp;&amp;
        !(this-&gt;<a class="code" href="class_o_t_party.html#a4aa12384e93bd6c2f6d437cf8ca97dfa">GetPartyID</a>().compare(rhs.<a class="code" href="class_o_t_party.html#a4aa12384e93bd6c2f6d437cf8ca97dfa">GetPartyID</a>()) == 0)
        )
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;OTParty::Compare: Party IDs don&#39;t match for party %s. ( %s  /  %s ) \n&quot;</span>,
                       <a class="code" href="class_o_t_party.html#ad823a9d89b3d8d0d87bc85114eefcead">GetPartyName</a>().c_str(), this-&gt;<a class="code" href="class_o_t_party.html#a4aa12384e93bd6c2f6d437cf8ca97dfa">GetPartyID</a>().c_str(), rhs.<a class="code" href="class_o_t_party.html#a4aa12384e93bd6c2f6d437cf8ca97dfa">GetPartyID</a>().c_str());
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// ----------------------------------------------------</span>
    <span class="keywordflow">if</span> (
        (this-&gt;<a class="code" href="class_o_t_party.html#a374056d26b9a605719f4bd585b4d264c">GetAuthorizingAgentName</a>().size() &gt; 0) &amp;&amp;
        (rhs.  <a class="code" href="class_o_t_party.html#a374056d26b9a605719f4bd585b4d264c">GetAuthorizingAgentName</a>().size() &gt; 0) &amp;&amp;
        !(this-&gt;<a class="code" href="class_o_t_party.html#a374056d26b9a605719f4bd585b4d264c">GetAuthorizingAgentName</a>().compare(rhs.<a class="code" href="class_o_t_party.html#a374056d26b9a605719f4bd585b4d264c">GetAuthorizingAgentName</a>()) == 0)
        )
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;OTParty::Compare: Authorizing agent names don&#39;t match for party %s. ( %s  /  %s ) \n&quot;</span>,
                       <a class="code" href="class_o_t_party.html#ad823a9d89b3d8d0d87bc85114eefcead">GetPartyName</a>().c_str(), this-&gt;<a class="code" href="class_o_t_party.html#a374056d26b9a605719f4bd585b4d264c">GetAuthorizingAgentName</a>().c_str(),
                       rhs.<a class="code" href="class_o_t_party.html#a374056d26b9a605719f4bd585b4d264c">GetAuthorizingAgentName</a>().c_str());
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// ----------------------------------------------------</span>
    <span class="comment">//</span>
    <span class="comment">// No need to compare agents... right?</span>
    <span class="comment">//</span>
<span class="comment">//  mapOfAgents         m_mapAgents; // These are owned.</span>

    <span class="keywordflow">if</span> (this-&gt;<a class="code" href="class_o_t_party.html#a0b130989d275386c980ed34d587e5e87">GetAccountCount</a>() != rhs.<a class="code" href="class_o_t_party.html#a0b130989d275386c980ed34d587e5e87">GetAccountCount</a>())
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;OTParty::Compare: Mismatched number of accounts when comparing party %s. \n&quot;</span>,
                       <a class="code" href="class_o_t_party.html#ad823a9d89b3d8d0d87bc85114eefcead">GetPartyName</a>().c_str());
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }

    <a class="code" href="_o_t_storage_8hpp.html#a804eb881e96b7e1846d130a55a94f716">FOR_EACH_CONST</a>(<a class="code" href="_o_t_party_account_8hpp.html#ad14c568ca8da6c72a36200f938fd5f59">mapOfPartyAccounts</a>, m_mapPartyAccounts)
    {
        <span class="keyword">const</span> std::string str_acct_name = (*it).first;
        <a class="code" href="class_o_t_party_account.html">OTPartyAccount</a> * pAcct          = (*it).second;
        <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pAcct);
        <span class="comment">// ----------------------------------</span>

        <a class="code" href="class_o_t_party_account.html">OTPartyAccount</a> *p2 = rhs.<a class="code" href="class_o_t_party.html#aee3973dc05c042dab571781a9d454af2">GetAccount</a>(str_acct_name);

        <span class="keywordflow">if</span> (NULL == p2)
        {
            <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;OTParty::Compare: Unable to find Account %s on rhs, when comparing party %s. \n&quot;</span>,
                           str_acct_name.c_str(), <a class="code" href="class_o_t_party.html#ad823a9d89b3d8d0d87bc85114eefcead">GetPartyName</a>().c_str());
            <span class="keywordflow">return</span> <span class="keyword">false</span>;
        }
        <span class="keywordflow">if</span> (!pAcct-&gt;<a class="code" href="class_o_t_party_account.html#ab1c24c8bfcb902be867320ecca289b2a">Compare</a>(*p2))
        {
            <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;OTParty::Compare: Accounts (%s) don&#39;t match when comparing party %s. \n&quot;</span>,
                           str_acct_name.c_str(), <a class="code" href="class_o_t_party.html#ad823a9d89b3d8d0d87bc85114eefcead">GetPartyName</a>().c_str());
            <span class="keywordflow">return</span> <span class="keyword">false</span>;
        }
    }
    <span class="comment">// -----------------------------------</span>

    <span class="keywordflow">return</span> <span class="keyword">true</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a25cbdb93b6a7bf5fe7df01942974eb5c"></a><!-- doxytag: member="OTParty::CopyAcctsToConfirmingParty" ref="a25cbdb93b6a7bf5fe7df01942974eb5c" args="(OTParty &amp;theParty) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_party.html#a25cbdb93b6a7bf5fe7df01942974eb5c">OTParty::CopyAcctsToConfirmingParty</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_party.html">OTParty</a> &amp;&#160;</td>
          <td class="paramname"><em>theParty</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_party_8cpp_source.html#l01889">1889</a> of file <a class="el" href="_o_t_party_8cpp_source.html">OTParty.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    theParty.<a class="code" href="class_o_t_party.html#a67534cfc68d1ef239bc729e02ebbc3bc">CleanupAccounts</a>(); <span class="comment">// (We&#39;re going to copy our own accounts into theParty.)</span>

    <a class="code" href="_o_t_storage_8hpp.html#a804eb881e96b7e1846d130a55a94f716">FOR_EACH_CONST</a>(<a class="code" href="_o_t_party_account_8hpp.html#ad14c568ca8da6c72a36200f938fd5f59">mapOfPartyAccounts</a>, m_mapPartyAccounts)
    {
        <span class="keyword">const</span> std::string str_acct_name = (*it).first;
        <a class="code" href="class_o_t_party_account.html">OTPartyAccount</a> * pAcct          = (*it).second;
        <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pAcct);
        <span class="comment">// ----------------------------------</span>

        <span class="keywordflow">if</span> (<span class="keyword">false</span> == theParty.<a class="code" href="class_o_t_party.html#a143915bb1a69a404cc35b02f50f0e2d3">AddAccount</a>(pAcct-&gt;<a class="code" href="class_o_t_party_account.html#a86975046b18ac6d6c5841f5ba0befe69">GetAgentName</a>(), pAcct-&gt;<a class="code" href="class_o_t_party_account.html#a56b14b8bc2279fab08cc9c2c754043d4">GetName</a>(),
                                         pAcct-&gt;<a class="code" href="class_o_t_party_account.html#aa5e4e0cc77853d08b3708017fe694876">GetAcctID</a>(),    pAcct-&gt;<a class="code" href="class_o_t_party_account.html#adb6df939b40f2abe597cef270073a2fa">GetAssetTypeID</a>(),
                                         pAcct-&gt;<a class="code" href="class_o_t_party_account.html#add572c3b200be9265d9dcc4a1b1f4185">GetClosingTransNo</a>()))
        {
            <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;OTParty::CopyAcctsToConfirmingParty: Unable to add Account %s, when copying from *this party %s. \n&quot;</span>,
                           str_acct_name.c_str(), <a class="code" href="class_o_t_party.html#ad823a9d89b3d8d0d87bc85114eefcead">GetPartyName</a>().c_str());
            <span class="keywordflow">return</span> <span class="keyword">false</span>;
        }
    }
    <span class="comment">// -----------------------------------</span>

    <span class="keywordflow">return</span> <span class="keyword">true</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a8144d9376f00f992e0df6f4cfd3a31f1"></a><!-- doxytag: member="OTParty::DropFinalReceiptToInboxes" ref="a8144d9376f00f992e0df6f4cfd3a31f1" args="(mapOfNyms *pNymMap, const OTString &amp;strServerID, OTPseudonym &amp;theServerNym, const int64_t &amp;lNewTransactionNumber, const OTString &amp;strOrigCronItem, OTString *pstrNote=NULL, OTString *pstrAttachment=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_party.html#a8144d9376f00f992e0df6f4cfd3a31f1">OTParty::DropFinalReceiptToInboxes</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_o_t_agent_8hpp.html#ac89892658f6bc83e354078647b704e8f">mapOfNyms</a> *&#160;</td>
          <td class="paramname"><em>pNymMap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strServerID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;&#160;</td>
          <td class="paramname"><em>theServerNym</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int64_t &amp;&#160;</td>
          <td class="paramname"><em>lNewTransactionNumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strOrigCronItem</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_string.html">OTString</a> *&#160;</td>
          <td class="paramname"><em>pstrNote</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_string.html">OTString</a> *&#160;</td>
          <td class="paramname"><em>pstrAttachment</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_party_8cpp_source.html#l01060">1060</a> of file <a class="el" href="_o_t_party_8cpp_source.html">OTParty.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">bool</span> bSuccess = <span class="keyword">true</span>; <span class="comment">// Success is defined as &quot;all inboxes were notified&quot;</span>
    <span class="keyword">const</span>
    <span class="keywordtype">char</span> * szFunc = <span class="stringliteral">&quot;OTParty::DropFinalReceiptToInboxes&quot;</span>;

    <a class="code" href="class_o_t_smart_contract.html">OTSmartContract</a> * pSmartContract = NULL;

    <span class="keywordflow">if</span> (NULL == m_pOwnerAgreement)
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Missing pointer to owner agreement.\n&quot;</span>, szFunc);
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (NULL == (pSmartContract = dynamic_cast&lt;OTSmartContract*&gt; (m_pOwnerAgreement)))
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Can only drop finalReceipts for smart contracts.\n&quot;</span>, szFunc);
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }

    <span class="comment">// By this point, we know pSmartContract is a good pointer.</span>
    <span class="comment">// ----------------------------------------------</span>

    <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_party_account_8hpp.html#ad14c568ca8da6c72a36200f938fd5f59">mapOfPartyAccounts</a>, m_mapPartyAccounts)
    {
        <a class="code" href="class_o_t_party_account.html">OTPartyAccount</a> * pAcct = (*it).second;
        <a class="code" href="_o_t_assert_8hpp.html#a033b133f48e61f2b227c52ad2be0c882">OT_ASSERT_MSG</a>(NULL != pAcct, <span class="stringliteral">&quot;Unexpected NULL partyaccount pointer in party map.&quot;</span>);
        <span class="comment">// -------------------------------------</span>

        <span class="keywordflow">if</span> (<span class="keyword">false</span> == pAcct-&gt;<a class="code" href="class_o_t_party_account.html#a77e6f313ddcfa7f3c89491c06683f10f">DropFinalReceiptToInbox</a>(pNymMap,    <span class="comment">// contains any Nyms who might already be loaded, mapped by ID.</span>
                                                    strServerID,
                                                    theServerNym,
                                                    *pSmartContract,
                                                    lNewTransactionNumber,
                                                    strOrigCronItem,
                                                    pstrNote, pstrAttachment))
        {
            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Failed dropping final Receipt to agent&#39;s Inbox.\n&quot;</span>, szFunc);
            bSuccess = <span class="keyword">false</span>; <span class="comment">// Notice: no break. We still try to notify them all, even if one fails.</span>
        }
    }

    <span class="keywordflow">return</span> bSuccess;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a6a98b5bb7fb58bd31fa3aa94b53023f6"></a><!-- doxytag: member="OTParty::DropFinalReceiptToNymboxes" ref="a6a98b5bb7fb58bd31fa3aa94b53023f6" args="(const int64_t &amp;lNewTransactionNumber, const OTString &amp;strOrigCronItem, OTString *pstrNote=NULL, OTString *pstrAttachment=NULL, OTPseudonym *pActualNym=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_party.html#a6a98b5bb7fb58bd31fa3aa94b53023f6">OTParty::DropFinalReceiptToNymboxes</a> </td>
          <td>(</td>
          <td class="paramtype">const int64_t &amp;&#160;</td>
          <td class="paramname"><em>lNewTransactionNumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strOrigCronItem</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_string.html">OTString</a> *&#160;</td>
          <td class="paramname"><em>pstrNote</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_string.html">OTString</a> *&#160;</td>
          <td class="paramname"><em>pstrAttachment</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> *&#160;</td>
          <td class="paramname"><em>pActualNym</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_party_8cpp_source.html#l01113">1113</a> of file <a class="el" href="_o_t_party_8cpp_source.html">OTParty.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">bool</span> bSuccess = <span class="keyword">false</span>; <span class="comment">// Success is defined as &quot;at least one agent was notified&quot;</span>

    <a class="code" href="class_o_t_smart_contract.html">OTSmartContract</a> * pSmartContract = NULL;

    <span class="keywordflow">if</span> (NULL == m_pOwnerAgreement)
    {
        <a class="code" href="class_o_t_log.html#a5acd90ac91c2618f395b0ff37ad4f8ee">OTLog::Error</a>(<span class="stringliteral">&quot;OTParty::DropFinalReceiptToNymboxes: Missing pointer to owner agreement.\n&quot;</span>);
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (NULL == (pSmartContract = dynamic_cast&lt;OTSmartContract*&gt; (m_pOwnerAgreement)))
    {
        <a class="code" href="class_o_t_log.html#a5acd90ac91c2618f395b0ff37ad4f8ee">OTLog::Error</a>(<span class="stringliteral">&quot;OTParty::DropFinalReceiptToNymboxes: Can only drop finalReceipts for smart contracts.\n&quot;</span>);
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }

    <span class="comment">// By this point, we know pSmartContract is a good pointer.</span>
    <span class="comment">// ----------------------------------------------</span>

    <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_agent_8hpp.html#aeed1daf4b84f9a0672d3d16076d68de4">mapOfAgents</a>, m_mapAgents)
    {
        <a class="code" href="class_o_t_agent.html">OTAgent</a> * pAgent = (*it).second;
        <a class="code" href="_o_t_assert_8hpp.html#a033b133f48e61f2b227c52ad2be0c882">OT_ASSERT_MSG</a>(NULL != pAgent, <span class="stringliteral">&quot;Unexpected NULL agent pointer in party map.&quot;</span>);
        <span class="comment">// -------------------------------------</span>

        <span class="keywordflow">if</span> (<span class="keyword">false</span> == pAgent-&gt;<a class="code" href="class_o_t_agent.html#af0cd869a6def04dbd4319e3643bdd837">DropFinalReceiptToNymbox</a>(*pSmartContract, lNewTransactionNumber, strOrigCronItem,
                                                      pstrNote, pstrAttachment, pActualNym))
            <a class="code" href="class_o_t_log.html#a5acd90ac91c2618f395b0ff37ad4f8ee">OTLog::Error</a>(<span class="stringliteral">&quot;OTParty::DropFinalReceiptToNymboxes: Failed dropping final Receipt to agent&#39;s Nymbox.\n&quot;</span>);
        <span class="keywordflow">else</span>
            bSuccess = <span class="keyword">true</span>;
    }

    <span class="keywordflow">return</span> bSuccess;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aee3973dc05c042dab571781a9d454af2"></a><!-- doxytag: member="OTParty::GetAccount" ref="aee3973dc05c042dab571781a9d454af2" args="(const std::string &amp;str_acct_name) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_party_account.html">OTPartyAccount</a> * <a class="el" href="class_o_t_party.html#aee3973dc05c042dab571781a9d454af2">OTParty::GetAccount</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>str_acct_name</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_party_8cpp_source.html#l00713">713</a> of file <a class="el" href="_o_t_party_8cpp_source.html">OTParty.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
<span class="comment">//  OTLog::vError(&quot;DEBUGGING OTParty::GetAccount: above find. str_acct_name: %s \n&quot;, str_acct_name.c_str());</span>

    <span class="keywordflow">if</span> (<a class="code" href="class_o_t_scriptable.html#a9492afb0aee3340f6fbdffdbdf8d5291">OTScriptable::ValidateName</a>(str_acct_name))
    {
        mapOfPartyAccounts::const_iterator it = m_mapPartyAccounts.find(str_acct_name);

        <span class="keywordflow">if</span> (m_mapPartyAccounts.end() != it) <span class="comment">// If we found something...</span>
        {
            <a class="code" href="class_o_t_party_account.html">OTPartyAccount</a> * pAcct = (*it).second;
            <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pAcct);
            <span class="comment">// -------------------------------</span>

            <span class="keywordflow">return</span> pAcct;
        }
    }
    <span class="keywordflow">else</span>
        <a class="code" href="class_o_t_log.html#a5acd90ac91c2618f395b0ff37ad4f8ee">OTLog::Error</a>(<span class="stringliteral">&quot;OTParty::GetAccount: Failed: str_acct_name is invalid.\n&quot;</span>);

<span class="comment">//  OTLog::vError(&quot;DEBUGGING OTParty::GetAccount: After find attempt, didn&#39;t find account on this party (%s).  \n&quot;,</span>
<span class="comment">//                &quot;Looping through accounts, to show you their names...\n&quot;, GetPartyName().c_str());</span>
<span class="comment">//</span>
<span class="comment">//  FOR_EACH_CONST(mapOfPartyAccounts, m_mapPartyAccounts)</span>
<span class="comment">//  {</span>
<span class="comment">//      std::string str_map_key = (*it).first;</span>
<span class="comment">//      OTPartyAccount * pAcct = (*it).second;</span>
<span class="comment">//      OT_ASSERT(NULL != pAcct);</span>
<span class="comment">//      // -------------------------------</span>
<span class="comment">//</span>
<span class="comment">//      OTLog::vError(&quot;DEBUGGING OTParty::GetAccount: Account name: %s.  Name as used for map key: %s \n&quot;,</span>
<span class="comment">//                    pAcct-&gt;GetName().Get(), str_map_key.c_str());</span>
<span class="comment">//  }</span>
<span class="comment">//</span>
<span class="comment">//  OTLog::Error(&quot;OTParty::GetAccount: DEBUGGING: (Finished displaying account names.)\n&quot;);</span>

    <span class="keywordflow">return</span> NULL;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a6cdea442a9b09e5b8f3fdfedba4ae767"></a><!-- doxytag: member="OTParty::GetAccountByAgent" ref="a6cdea442a9b09e5b8f3fdfedba4ae767" args="(const std::string &amp;str_agent_name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_party_account.html">OTPartyAccount</a> * <a class="el" href="class_o_t_party.html#a6cdea442a9b09e5b8f3fdfedba4ae767">OTParty::GetAccountByAgent</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>str_agent_name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_party_8cpp_source.html#l00783">783</a> of file <a class="el" href="_o_t_party_8cpp_source.html">OTParty.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (<a class="code" href="class_o_t_scriptable.html#a9492afb0aee3340f6fbdffdbdf8d5291">OTScriptable::ValidateName</a>(str_agent_name))
    {
        <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_party_account_8hpp.html#ad14c568ca8da6c72a36200f938fd5f59">mapOfPartyAccounts</a>, m_mapPartyAccounts)
        {
            <a class="code" href="class_o_t_party_account.html">OTPartyAccount</a> * pAcct = (*it).second;
            <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pAcct);
            <span class="comment">// ----------------</span>

            <span class="keywordflow">if</span> (pAcct-&gt;<a class="code" href="class_o_t_party_account.html#a86975046b18ac6d6c5841f5ba0befe69">GetAgentName</a>().<a class="code" href="class_o_t_string.html#a03401b39fb66d63696342c4f61ea8bf5">Compare</a>(str_agent_name.c_str()))
                <span class="keywordflow">return</span> pAcct;
        }
    }
    <span class="keywordflow">else</span>
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Failed: str_agent_name is invalid.\n&quot;</span>, __FUNCTION__);

    <span class="keywordflow">return</span> NULL;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a31c08f0f4902dd79db4786d10f2fe81e"></a><!-- doxytag: member="OTParty::GetAccountByID" ref="a31c08f0f4902dd79db4786d10f2fe81e" args="(const OTIdentifier &amp;theAcctID) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_party_account.html">OTPartyAccount</a> * <a class="el" href="class_o_t_party.html#a31c08f0f4902dd79db4786d10f2fe81e">OTParty::GetAccountByID</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;&#160;</td>
          <td class="paramname"><em>theAcctID</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_party_8cpp_source.html#l00807">807</a> of file <a class="el" href="_o_t_party_8cpp_source.html">OTParty.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_o_t_storage_8hpp.html#a804eb881e96b7e1846d130a55a94f716">FOR_EACH_CONST</a>(<a class="code" href="_o_t_party_account_8hpp.html#ad14c568ca8da6c72a36200f938fd5f59">mapOfPartyAccounts</a>, m_mapPartyAccounts)
    {
        <a class="code" href="class_o_t_party_account.html">OTPartyAccount</a> * pAcct = (*it).second;
        <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pAcct);
        <span class="comment">// ----------------</span>

        <span class="keywordflow">if</span> (pAcct-&gt;<a class="code" href="class_o_t_party_account.html#abc624a5f5a17ad05bbb9564b12e17b25">IsAccountByID</a>(theAcctID))
            <span class="keywordflow">return</span> pAcct;
    }

    <span class="keywordflow">return</span> NULL;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad085e6ba37a006e0f8cf7e100a9b59eb"></a><!-- doxytag: member="OTParty::GetAccountByIndex" ref="ad085e6ba37a006e0f8cf7e100a9b59eb" args="(int32_t nIndex)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_party_account.html">OTPartyAccount</a> * <a class="el" href="class_o_t_party.html#ad085e6ba37a006e0f8cf7e100a9b59eb">OTParty::GetAccountByIndex</a> </td>
          <td>(</td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>nIndex</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Get <a class="el" href="class_o_t_party_account.html">OTPartyAccount</a> pointer by Index. Returns NULL on failure. </p>

<p>Definition at line <a class="el" href="_o_t_party_8cpp_source.html#l00755">755</a> of file <a class="el" href="_o_t_party_8cpp_source.html">OTParty.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (<span class="keyword">false</span> == ((nIndex &gt;= 0) &amp;&amp; (nIndex &lt; static_cast&lt;int64_t&gt;(m_mapPartyAccounts.size()))))
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Index out of bounds: %d\n&quot;</span>, __FUNCTION__, nIndex);
    }
    <span class="keywordflow">else</span>
    {
        int32_t nLoopIndex = -1;

        <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_party_account_8hpp.html#ad14c568ca8da6c72a36200f938fd5f59">mapOfPartyAccounts</a>, m_mapPartyAccounts)
        {
            <a class="code" href="class_o_t_party_account.html">OTPartyAccount</a> * pAcct = (*it).second;
            <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pAcct);
            <span class="comment">// -------------------------------</span>
            ++nLoopIndex; <span class="comment">// 0 on first iteration.</span>

            <span class="keywordflow">if</span> (nLoopIndex == nIndex)
                <span class="keywordflow">return</span> pAcct;
        }
    }
    <span class="keywordflow">return</span> NULL;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a0b130989d275386c980ed34d587e5e87"></a><!-- doxytag: member="OTParty::GetAccountCount" ref="a0b130989d275386c980ed34d587e5e87" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_party.html#a0b130989d275386c980ed34d587e5e87">OTParty::GetAccountCount</a> </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_party_8hpp_source.html#l00370">370</a> of file <a class="el" href="_o_t_party_8hpp_source.html">OTParty.hpp</a>.</p>
<div class="fragment"><pre class="fragment">{ <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span>int32_t<span class="keyword">&gt;</span> (m_mapPartyAccounts.size()); } <span class="comment">// returns total of all accounts owned by this party.</span>
</pre></div>
</div>
</div>
<a class="anchor" id="acb7e7769debe27c01d56aa7d9e9ba7bb"></a><!-- doxytag: member="OTParty::GetAccountCount" ref="acb7e7769debe27c01d56aa7d9e9ba7bb" args="(const std::string str_agent_name) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_party.html#a0b130989d275386c980ed34d587e5e87">OTParty::GetAccountCount</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string&#160;</td>
          <td class="paramname"><em>str_agent_name</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_party_8cpp_source.html#l00189">189</a> of file <a class="el" href="_o_t_party_8cpp_source.html">OTParty.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    int32_t nCount = 0;

    <a class="code" href="_o_t_storage_8hpp.html#a804eb881e96b7e1846d130a55a94f716">FOR_EACH_CONST</a>(<a class="code" href="_o_t_party_account_8hpp.html#ad14c568ca8da6c72a36200f938fd5f59">mapOfPartyAccounts</a>, m_mapPartyAccounts)
    {
        <span class="keyword">const</span> <a class="code" href="class_o_t_party_account.html">OTPartyAccount</a> * pAcct = (*it).second;
        <a class="code" href="_o_t_assert_8hpp.html#a033b133f48e61f2b227c52ad2be0c882">OT_ASSERT_MSG</a>(NULL != pAcct, <span class="stringliteral">&quot;Unexpected NULL partyaccount pointer in party map.&quot;</span>);
        <span class="comment">// -------------------------------------</span>
        <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> &amp; strAgentName = pAcct-&gt;<a class="code" href="class_o_t_party_account.html#a86975046b18ac6d6c5841f5ba0befe69">GetAgentName</a>();
        <span class="comment">// -------------------------------------</span>
        <span class="keywordflow">if</span> (strAgentName.<a class="code" href="class_o_t_string.html#a03401b39fb66d63696342c4f61ea8bf5">Compare</a>(str_agent_name.c_str()))
            nCount++;
    }

    <span class="keywordflow">return</span> nCount;
}
</pre></div>
</div>
</div>
<a class="anchor" id="af959cf9f0815a145c5a3072eadfaeb14"></a><!-- doxytag: member="OTParty::GetAgent" ref="af959cf9f0815a145c5a3072eadfaeb14" args="(const std::string &amp;str_agent_name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_agent.html">OTAgent</a> * <a class="el" href="class_o_t_party.html#af959cf9f0815a145c5a3072eadfaeb14">OTParty::GetAgent</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>str_agent_name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Get Agent pointer by Name. Returns NULL on failure. </p>

<p>Definition at line <a class="el" href="_o_t_party_8cpp_source.html#l00662">662</a> of file <a class="el" href="_o_t_party_8cpp_source.html">OTParty.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (<a class="code" href="class_o_t_scriptable.html#a9492afb0aee3340f6fbdffdbdf8d5291">OTScriptable::ValidateName</a>(str_agent_name))
    {
        mapOfAgents::iterator it = m_mapAgents.find(str_agent_name);

        <span class="keywordflow">if</span> (m_mapAgents.end() != it) <span class="comment">// If we found something...</span>
        {
            <a class="code" href="class_o_t_agent.html">OTAgent</a> * pAgent = (*it).second;
            <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pAgent);
            <span class="comment">// -------------------------------</span>

            <span class="keywordflow">return</span> pAgent;
        }
    }
    <span class="keywordflow">else</span>
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Failed: str_agent_name is invalid...\n&quot;</span>, __FUNCTION__);

    <span class="keywordflow">return</span> NULL;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa3e7fa9717af688b00e1b0b0983fd891"></a><!-- doxytag: member="OTParty::GetAgentByIndex" ref="aa3e7fa9717af688b00e1b0b0983fd891" args="(int32_t nIndex)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_agent.html">OTAgent</a> * <a class="el" href="class_o_t_party.html#aa3e7fa9717af688b00e1b0b0983fd891">OTParty::GetAgentByIndex</a> </td>
          <td>(</td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>nIndex</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Get Agent pointer by Index. Returns NULL on failure. </p>

<p>Definition at line <a class="el" href="_o_t_party_8cpp_source.html#l00686">686</a> of file <a class="el" href="_o_t_party_8cpp_source.html">OTParty.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (<span class="keyword">false</span> == ((nIndex &gt;= 0) &amp;&amp; (nIndex &lt; static_cast&lt;int64_t&gt;(m_mapAgents.size()))))
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Index out of bounds: %d\n&quot;</span>, __FUNCTION__, nIndex);
    }
    <span class="keywordflow">else</span>
    {
        int32_t nLoopIndex = -1;

        <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_agent_8hpp.html#aeed1daf4b84f9a0672d3d16076d68de4">mapOfAgents</a>, m_mapAgents)
        {
            <a class="code" href="class_o_t_agent.html">OTAgent</a> * pAgent = (*it).second;
            <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pAgent);
            <span class="comment">// -------------------------------</span>
            ++nLoopIndex; <span class="comment">// 0 on first iteration.</span>

            <span class="keywordflow">if</span> (nLoopIndex == nIndex)
                <span class="keywordflow">return</span> pAgent;
        }
    }
    <span class="keywordflow">return</span> NULL;
}
</pre></div>
</div>
</div>
<a class="anchor" id="afb288a76dd356ce029b4792dc2d6c019"></a><!-- doxytag: member="OTParty::GetAgentCount" ref="afb288a76dd356ce029b4792dc2d6c019" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_party.html#afb288a76dd356ce029b4792dc2d6c019">OTParty::GetAgentCount</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_party_8hpp_source.html#l00327">327</a> of file <a class="el" href="_o_t_party_8hpp_source.html">OTParty.hpp</a>.</p>
<div class="fragment"><pre class="fragment">{ <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span>int32_t<span class="keyword">&gt;</span> (m_mapAgents.size()); }
</pre></div>
</div>
</div>
<a class="anchor" id="ac8879e0a5d65ac273a56711336a9d45c"></a><!-- doxytag: member="OTParty::GetAllTransactionNumbers" ref="ac8879e0a5d65ac273a56711336a9d45c" args="(OTNumList &amp;numlistOutput) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_party.html#ac8879e0a5d65ac273a56711336a9d45c">OTParty::GetAllTransactionNumbers</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_num_list.html">OTNumList</a> &amp;&#160;</td>
          <td class="paramname"><em>numlistOutput</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_party_8cpp_source.html#l00169">169</a> of file <a class="el" href="_o_t_party_8cpp_source.html">OTParty.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (m_lOpeningTransNo &gt; 0)
        numlistOutput.Add(m_lOpeningTransNo);
    <span class="comment">// ------------------------------------</span>
    <a class="code" href="_o_t_storage_8hpp.html#a804eb881e96b7e1846d130a55a94f716">FOR_EACH_CONST</a>(<a class="code" href="_o_t_party_account_8hpp.html#ad14c568ca8da6c72a36200f938fd5f59">mapOfPartyAccounts</a>, m_mapPartyAccounts)
    {
        <span class="keyword">const</span> <a class="code" href="class_o_t_party_account.html">OTPartyAccount</a> * pAcct = (*it).second;
        <a class="code" href="_o_t_assert_8hpp.html#a033b133f48e61f2b227c52ad2be0c882">OT_ASSERT_MSG</a>(NULL  != pAcct, <span class="stringliteral">&quot;Unexpected NULL partyaccount pointer in party map.&quot;</span>);
        <span class="comment">// ---------------------------------</span>
        <span class="keyword">const</span> int64_t lTemp = pAcct-&gt;<a class="code" href="class_o_t_party_account.html#add572c3b200be9265d9dcc4a1b1f4185">GetClosingTransNo</a>();
        <span class="keywordflow">if</span> (lTemp &gt; 0)
            numlistOutput.Add(lTemp);
    }
    <span class="comment">// -------------------------------------</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="a374056d26b9a605719f4bd585b4d264c"></a><!-- doxytag: member="OTParty::GetAuthorizingAgentName" ref="a374056d26b9a605719f4bd585b4d264c" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const std::string&amp; <a class="el" href="class_o_t_party.html#a374056d26b9a605719f4bd585b4d264c">OTParty::GetAuthorizingAgentName</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_party_8hpp_source.html#l00332">332</a> of file <a class="el" href="_o_t_party_8hpp_source.html">OTParty.hpp</a>.</p>
<div class="fragment"><pre class="fragment">{ <span class="keywordflow">return</span> m_str_authorizing_agent; }
</pre></div>
</div>
</div>
<a class="anchor" id="a96466528395e84f908c2033482033bb3"></a><!-- doxytag: member="OTParty::GetClosingTransNo" ref="a96466528395e84f908c2033482033bb3" args="(const std::string str_for_acct_name) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64_t <a class="el" href="class_o_t_party.html#a96466528395e84f908c2033482033bb3">OTParty::GetClosingTransNo</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string&#160;</td>
          <td class="paramname"><em>str_for_acct_name</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_party_8cpp_source.html#l00426">426</a> of file <a class="el" href="_o_t_party_8cpp_source.html">OTParty.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    mapOfPartyAccounts::const_iterator it = m_mapPartyAccounts.find(str_for_acct_name);

    <span class="keywordflow">if</span> (m_mapPartyAccounts.end() == it) <span class="comment">// If it wasn&#39;t already there...</span>
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;OTParty::GetClosingTransNo: Failed -- Account wasn&#39;t found: %s.\n&quot;</span>,
                       str_for_acct_name.c_str());
        <span class="keywordflow">return</span> 0;
    }

    <a class="code" href="class_o_t_party_account.html">OTPartyAccount</a> * pPartyAccount = (*it).second;
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pPartyAccount);

    <span class="keywordflow">return</span> pPartyAccount-&gt;<a class="code" href="class_o_t_party_account.html#add572c3b200be9265d9dcc4a1b1f4185">GetClosingTransNo</a>();
}
</pre></div>
</div>
</div>
<a class="anchor" id="af97e994c6b77aaf57fc4bf7fd1ff4861"></a><!-- doxytag: member="OTParty::GetEntityID" ref="af97e994c6b77aaf57fc4bf7fd1ff4861" args="(bool *pBoolSuccess=NULL) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_party.html#af97e994c6b77aaf57fc4bf7fd1ff4861">OTParty::GetEntityID</a> </td>
          <td>(</td>
          <td class="paramtype">bool *&#160;</td>
          <td class="paramname"><em>pBoolSuccess</em> = <code>NULL</code></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_party_8cpp_source.html#l00603">603</a> of file <a class="el" href="_o_t_party_8cpp_source.html">OTParty.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (<a class="code" href="class_o_t_party.html#a89552b5fb6769fd7ad69deedb633653f">IsEntity</a>() &amp;&amp; (m_str_owner_id.size() &gt; 0))
    {
        <span class="keywordflow">if</span> (NULL != pBoolSuccess)
            *pBoolSuccess = <span class="keyword">true</span>;

        <span class="keywordflow">return</span> m_str_owner_id;
    }

    <span class="keywordflow">if</span> (NULL != pBoolSuccess)
        *pBoolSuccess = <span class="keyword">false</span>;

    std::string retVal(<span class="stringliteral">&quot;&quot;</span>);

    <span class="keywordflow">return</span> retVal;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a6559c663654d4f9d54628f6116737b47"></a><!-- doxytag: member="OTParty::GetMySignedCopy" ref="a6559c663654d4f9d54628f6116737b47" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="class_o_t_string.html">OTString</a>&amp; <a class="el" href="class_o_t_party.html#a6559c663654d4f9d54628f6116737b47">OTParty::GetMySignedCopy</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_party_8hpp_source.html#l00287">287</a> of file <a class="el" href="_o_t_party_8hpp_source.html">OTParty.hpp</a>.</p>
<div class="fragment"><pre class="fragment">{ <span class="keywordflow">return</span> m_strMySignedCopy; }
</pre></div>
</div>
</div>
<a class="anchor" id="a22ca91a1414fd1457f192d91fe740d80"></a><!-- doxytag: member="OTParty::GetNymID" ref="a22ca91a1414fd1457f192d91fe740d80" args="(bool *pBoolSuccess=NULL) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_party.html#a22ca91a1414fd1457f192d91fe740d80">OTParty::GetNymID</a> </td>
          <td>(</td>
          <td class="paramtype">bool *&#160;</td>
          <td class="paramname"><em>pBoolSuccess</em> = <code>NULL</code></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_party_8cpp_source.html#l00584">584</a> of file <a class="el" href="_o_t_party_8cpp_source.html">OTParty.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (<a class="code" href="class_o_t_party.html#a1c2f66b28bd7062505430fcbe18f9c12">IsNym</a>() &amp;&amp; (m_str_owner_id.size() &gt; 0))
    {
        <span class="keywordflow">if</span> (NULL != pBoolSuccess)
            *pBoolSuccess = <span class="keyword">true</span>;

        <span class="keywordflow">return</span> m_str_owner_id;
    }

    <span class="keywordflow">if</span> (NULL != pBoolSuccess)
        *pBoolSuccess = <span class="keyword">false</span>;

    std::string retVal(<span class="stringliteral">&quot;&quot;</span>);

    <span class="keywordflow">return</span> retVal; <span class="comment">// empty ID on failure.</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa11f990dfe9743dd1d8e34af8bfd693a"></a><!-- doxytag: member="OTParty::GetOpeningTransNo" ref="aa11f990dfe9743dd1d8e34af8bfd693a" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64_t <a class="el" href="class_o_t_party.html#aa11f990dfe9743dd1d8e34af8bfd693a">OTParty::GetOpeningTransNo</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_party_8hpp_source.html#l00289">289</a> of file <a class="el" href="_o_t_party_8hpp_source.html">OTParty.hpp</a>.</p>
<div class="fragment"><pre class="fragment">{ <span class="keywordflow">return</span> m_lOpeningTransNo; }
</pre></div>
</div>
</div>
<a class="anchor" id="a1b9faa99024a34142bc2f8d4367d31fb"></a><!-- doxytag: member="OTParty::GetOwnerAgreement" ref="a1b9faa99024a34142bc2f8d4367d31fb" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_scriptable.html">OTScriptable</a>* <a class="el" href="class_o_t_party.html#a1b9faa99024a34142bc2f8d4367d31fb">OTParty::GetOwnerAgreement</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_party_8hpp_source.html#l00283">283</a> of file <a class="el" href="_o_t_party_8hpp_source.html">OTParty.hpp</a>.</p>
<div class="fragment"><pre class="fragment">{ <span class="keywordflow">return</span> m_pOwnerAgreement; }
</pre></div>
</div>
</div>
<a class="anchor" id="a4aa12384e93bd6c2f6d437cf8ca97dfa"></a><!-- doxytag: member="OTParty::GetPartyID" ref="a4aa12384e93bd6c2f6d437cf8ca97dfa" args="(bool *pBoolSuccess=NULL) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_party.html#a4aa12384e93bd6c2f6d437cf8ca97dfa">OTParty::GetPartyID</a> </td>
          <td>(</td>
          <td class="paramtype">bool *&#160;</td>
          <td class="paramname"><em>pBoolSuccess</em> = <code>NULL</code></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_party_8cpp_source.html#l00622">622</a> of file <a class="el" href="_o_t_party_8cpp_source.html">OTParty.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// If party is a Nym, this is the NymID. Else return EntityID().</span>
    <span class="comment">// if error, return false.</span>

    <span class="keywordflow">if</span> (<a class="code" href="class_o_t_party.html#a1c2f66b28bd7062505430fcbe18f9c12">IsNym</a>())
        <span class="keywordflow">return</span> <a class="code" href="class_o_t_party.html#a22ca91a1414fd1457f192d91fe740d80">GetNymID</a>(pBoolSuccess);

    <span class="keywordflow">return</span> <a class="code" href="class_o_t_party.html#af97e994c6b77aaf57fc4bf7fd1ff4861">GetEntityID</a>(pBoolSuccess);
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad823a9d89b3d8d0d87bc85114eefcead"></a><!-- doxytag: member="OTParty::GetPartyName" ref="ad823a9d89b3d8d0d87bc85114eefcead" args="(bool *pBoolSuccess=NULL) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="class_o_t_party.html#ad823a9d89b3d8d0d87bc85114eefcead">OTParty::GetPartyName</a> </td>
          <td>(</td>
          <td class="paramtype">bool *&#160;</td>
          <td class="paramname"><em>pBoolSuccess</em> = <code>NULL</code></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_party_8cpp_source.html#l00525">525</a> of file <a class="el" href="_o_t_party_8cpp_source.html">OTParty.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    std::string retVal(<span class="stringliteral">&quot;&quot;</span>);

    <span class="comment">// &quot;sales_director&quot;, &quot;marketer&quot;, etc</span>
    <span class="keywordflow">if</span> (NULL == m_pstr_party_name)
    {
        <span class="keywordflow">if</span> (NULL != pBoolSuccess)
            *pBoolSuccess = <span class="keyword">false</span>;

        <span class="keywordflow">return</span> retVal;
    }

    <span class="keywordflow">if</span> (NULL != pBoolSuccess)
        *pBoolSuccess = <span class="keyword">true</span>;

    retVal = *m_pstr_party_name;

    <span class="keywordflow">return</span> retVal;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a27f92ee64f928849bde7f31d3c2b4d0a"></a><!-- doxytag: member="OTParty::HarvestAllTransactionNumbers" ref="a27f92ee64f928849bde7f31d3c2b4d0a" args="(const OTString &amp;strServerID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_party.html#a27f92ee64f928849bde7f31d3c2b4d0a">OTParty::HarvestAllTransactionNumbers</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strServerID</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_party_8cpp_source.html#l01600">1600</a> of file <a class="el" href="_o_t_party_8cpp_source.html">OTParty.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_o_t_party.html#ab97bb5511eae5e5702694d2c3b61eeee">HarvestOpeningNumber</a> (strServerID);
    <a class="code" href="class_o_t_party.html#a35c3abd49e3b7b59606b6a8ac52dcb0b">HarvestClosingNumbers</a>(strServerID);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a35c3abd49e3b7b59606b6a8ac52dcb0b"></a><!-- doxytag: member="OTParty::HarvestClosingNumbers" ref="a35c3abd49e3b7b59606b6a8ac52dcb0b" args="(const OTString &amp;strServerID, bool bSave=false, OTPseudonym *pSignerNym=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_party.html#a35c3abd49e3b7b59606b6a8ac52dcb0b">OTParty::HarvestClosingNumbers</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strServerID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>bSave</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> *&#160;</td>
          <td class="paramname"><em>pSignerNym</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_party_8cpp_source.html#l01469">1469</a> of file <a class="el" href="_o_t_party_8cpp_source.html">OTParty.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// ------------------------------------------------</span>
    <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_party_account_8hpp.html#ad14c568ca8da6c72a36200f938fd5f59">mapOfPartyAccounts</a>, m_mapPartyAccounts)
    {
        <a class="code" href="class_o_t_party_account.html">OTPartyAccount</a> * pAcct = (*it).second;
        <a class="code" href="_o_t_assert_8hpp.html#a033b133f48e61f2b227c52ad2be0c882">OT_ASSERT_MSG</a>(NULL != pAcct, <span class="stringliteral">&quot;OTParty::HarvestClosingNumbers: Unexpected NULL partyaccount pointer in party map.&quot;</span>);
        <span class="comment">// -------------------------------------</span>
        <span class="keywordflow">if</span> (pAcct-&gt;<a class="code" href="class_o_t_party_account.html#add572c3b200be9265d9dcc4a1b1f4185">GetClosingTransNo</a>() &lt;= 0)
            <span class="keywordflow">continue</span>; <span class="comment">// No log, for now.</span>
        <span class="comment">// -------------------------------------</span>
        <span class="keyword">const</span> std::string str_agent_name(pAcct-&gt;<a class="code" href="class_o_t_party_account.html#a86975046b18ac6d6c5841f5ba0befe69">GetAgentName</a>().<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
        <span class="keywordflow">if</span> (str_agent_name.size() &lt;= 0)
        {
            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Missing agent name on party account: %s \n&quot;</span>,
                         __FUNCTION__, pAcct-&gt;<a class="code" href="class_o_t_party_account.html#a56b14b8bc2279fab08cc9c2c754043d4">GetName</a>().<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
            <span class="keywordflow">continue</span>;
        }
        <span class="comment">// ----------------------------------</span>
        <a class="code" href="class_o_t_agent.html">OTAgent</a> * pAgent = this-&gt;<a class="code" href="class_o_t_party.html#af959cf9f0815a145c5a3072eadfaeb14">GetAgent</a>(str_agent_name);
        <span class="keywordflow">if</span> (NULL == pAgent)
            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Couldn&#39;t find agent (%s) for asset account: %s\n&quot;</span>,
                          __FUNCTION__, str_agent_name.c_str(), pAcct-&gt;<a class="code" href="class_o_t_party_account.html#a56b14b8bc2279fab08cc9c2c754043d4">GetName</a>().<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
        <span class="keywordflow">else</span>
            pAgent-&gt;<a class="code" href="class_o_t_agent.html#af39f8957fe7553c34f3dbaf9d87696f4">HarvestTransactionNumber</a>(pAcct-&gt;<a class="code" href="class_o_t_party_account.html#add572c3b200be9265d9dcc4a1b1f4185">GetClosingTransNo</a>(),
                                             strServerID,
                                             bSave,
                                             pSignerNym);   <span class="comment">// server passes in serverNym here, otherwise each agent uses its own nym.</span>
    } <span class="comment">// FOR_EACH</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="abdab82bb2d32dc8eed42ced8f80709b3"></a><!-- doxytag: member="OTParty::HarvestClosingNumbers" ref="abdab82bb2d32dc8eed42ced8f80709b3" args="(OTAgent &amp;theAgent, const OTString &amp;strServerID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_party.html#a35c3abd49e3b7b59606b6a8ac52dcb0b">OTParty::HarvestClosingNumbers</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_agent.html">OTAgent</a> &amp;&#160;</td>
          <td class="paramname"><em>theAgent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strServerID</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_party_8cpp_source.html#l01504">1504</a> of file <a class="el" href="_o_t_party_8cpp_source.html">OTParty.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_party_account_8hpp.html#ad14c568ca8da6c72a36200f938fd5f59">mapOfPartyAccounts</a>, m_mapPartyAccounts)
    {
        <a class="code" href="class_o_t_party_account.html">OTPartyAccount</a> * pAcct = (*it).second;
        <a class="code" href="_o_t_assert_8hpp.html#a033b133f48e61f2b227c52ad2be0c882">OT_ASSERT_MSG</a>(NULL != pAcct, <span class="stringliteral">&quot;OTParty::HarvestClosingNumbers: Unexpected NULL partyaccount pointer in partyaccount map.&quot;</span>);
        <span class="comment">// -------------------------------------</span>
        <span class="keywordflow">if</span> (pAcct-&gt;<a class="code" href="class_o_t_party_account.html#add572c3b200be9265d9dcc4a1b1f4185">GetClosingTransNo</a>() &lt;= 0)
            <span class="keywordflow">continue</span>; <span class="comment">// No log, for now.</span>
        <span class="comment">// -------------------------------------</span>
        <span class="keyword">const</span> std::string str_agent_name (pAcct-&gt;<a class="code" href="class_o_t_party_account.html#a86975046b18ac6d6c5841f5ba0befe69">GetAgentName</a>().<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
        <span class="keywordflow">if</span> (str_agent_name.size() &lt;= 0)
        {
<span class="comment">//          OTLog::vError(&quot;OTParty::%s: Missing agent name on party account: %s \n&quot;,</span>
<span class="comment">//                        __FUNCTION__, pAcct-&gt;GetName().Get());</span>
            <span class="keywordflow">continue</span>;
        }
        <span class="comment">// ----------------------------------</span>
        <span class="keywordflow">if</span> (theAgent.<a class="code" href="class_o_t_agent.html#a123d27f05e46977ecdbe0b83de3c119d">GetName</a>().<a class="code" href="class_o_t_string.html#a03401b39fb66d63696342c4f61ea8bf5">Compare</a>(str_agent_name.c_str()))
            theAgent.<a class="code" href="class_o_t_agent.html#af39f8957fe7553c34f3dbaf9d87696f4">HarvestTransactionNumber</a>(pAcct-&gt;<a class="code" href="class_o_t_party_account.html#add572c3b200be9265d9dcc4a1b1f4185">GetClosingTransNo</a>(), strServerID);
            <span class="comment">// We don&#39;t break here, on success, because this agent might represent multiple accounts.</span>
        <span class="comment">// else nothing...</span>
    } <span class="comment">// FOR_EACH</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="a37ec6d7175fed90cf142b8000e0d9f76"></a><!-- doxytag: member="OTParty::HarvestClosingNumbers" ref="a37ec6d7175fed90cf142b8000e0d9f76" args="(OTPseudonym &amp;theNym, const OTString &amp;strServerID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_party.html#a35c3abd49e3b7b59606b6a8ac52dcb0b">OTParty::HarvestClosingNumbers</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;&#160;</td>
          <td class="paramname"><em>theNym</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strServerID</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_party_8cpp_source.html#l01534">1534</a> of file <a class="el" href="_o_t_party_8cpp_source.html">OTParty.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_o_t_agent.html">OTAgent</a> * pAgent = NULL;

    <span class="keywordflow">if</span> (<a class="code" href="class_o_t_party.html#afda73de60d222bc8c01b893289a4564e">HasAgent</a>(theNym, &amp;pAgent))
    {
        <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pAgent);
        <a class="code" href="class_o_t_party.html#a35c3abd49e3b7b59606b6a8ac52dcb0b">HarvestClosingNumbers</a>(*pAgent, strServerID);
    }
    <span class="comment">// else nothing...</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab97bb5511eae5e5702694d2c3b61eeee"></a><!-- doxytag: member="OTParty::HarvestOpeningNumber" ref="ab97bb5511eae5e5702694d2c3b61eeee" args="(const OTString &amp;strServerID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_party.html#ab97bb5511eae5e5702694d2c3b61eeee">OTParty::HarvestOpeningNumber</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strServerID</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_party_8cpp_source.html#l01582">1582</a> of file <a class="el" href="_o_t_party_8cpp_source.html">OTParty.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (<a class="code" href="class_o_t_party.html#a374056d26b9a605719f4bd585b4d264c">GetAuthorizingAgentName</a>().size() &lt;= 0)
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;OTParty::%s: Error: Authorizing agent name is blank.\n&quot;</span>, __FUNCTION__);
        <span class="keywordflow">return</span>;
    }
    <span class="comment">// ---------------------------------------------</span>
    <a class="code" href="class_o_t_agent.html">OTAgent</a> * pAgent = <a class="code" href="class_o_t_party.html#af959cf9f0815a145c5a3072eadfaeb14">GetAgent</a>(<a class="code" href="class_o_t_party.html#a374056d26b9a605719f4bd585b4d264c">GetAuthorizingAgentName</a>());
    <span class="keywordflow">if</span> (NULL == pAgent)
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;OTParty::%s: Error: Unable to find Authorizing agent (%s) for party: %s.\n&quot;</span>,
                     __FUNCTION__, <a class="code" href="class_o_t_party.html#a374056d26b9a605719f4bd585b4d264c">GetAuthorizingAgentName</a>().c_str(), <a class="code" href="class_o_t_party.html#ad823a9d89b3d8d0d87bc85114eefcead">GetPartyName</a>().c_str());
    <span class="keywordflow">else</span>
        <a class="code" href="class_o_t_party.html#ab97bb5511eae5e5702694d2c3b61eeee">HarvestOpeningNumber</a>(*pAgent, strServerID);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a077bf636b3e4ee6da09995c8074c6069"></a><!-- doxytag: member="OTParty::HarvestOpeningNumber" ref="a077bf636b3e4ee6da09995c8074c6069" args="(OTAgent &amp;theAgent, const OTString &amp;strServerID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_party.html#ab97bb5511eae5e5702694d2c3b61eeee">OTParty::HarvestOpeningNumber</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_agent.html">OTAgent</a> &amp;&#160;</td>
          <td class="paramname"><em>theAgent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strServerID</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_party_8cpp_source.html#l01567">1567</a> of file <a class="el" href="_o_t_party_8cpp_source.html">OTParty.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> ( ! (<a class="code" href="class_o_t_party.html#a374056d26b9a605719f4bd585b4d264c">GetAuthorizingAgentName</a>().compare(theAgent.<a class="code" href="class_o_t_agent.html#a123d27f05e46977ecdbe0b83de3c119d">GetName</a>().<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>()) == 0))
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;OTParty::%s: Error: Agent name doesn&#39;t match:  %s / %s  \n&quot;</span>,
                      __FUNCTION__, <a class="code" href="class_o_t_party.html#a374056d26b9a605719f4bd585b4d264c">GetAuthorizingAgentName</a>().c_str(), theAgent.<a class="code" href="class_o_t_agent.html#a123d27f05e46977ecdbe0b83de3c119d">GetName</a>().<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="class_o_t_party.html#aa11f990dfe9743dd1d8e34af8bfd693a">GetOpeningTransNo</a>() &gt; 0)
        theAgent.<a class="code" href="class_o_t_agent.html#af39f8957fe7553c34f3dbaf9d87696f4">HarvestTransactionNumber</a>(<a class="code" href="class_o_t_party.html#aa11f990dfe9743dd1d8e34af8bfd693a">GetOpeningTransNo</a>(), strServerID); <span class="comment">// bSave=false, pSignerNym=NULL</span>
    <span class="keywordflow">else</span>
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;OTParty::%s: Nothing to harvest, it was already 0 for party: %s\n&quot;</span>,
                       __FUNCTION__, <a class="code" href="class_o_t_party.html#ad823a9d89b3d8d0d87bc85114eefcead">GetPartyName</a>().c_str());
}
</pre></div>
</div>
</div>
<a class="anchor" id="af17b2590568f39510f23c4b41d3acb12"></a><!-- doxytag: member="OTParty::HarvestOpeningNumber" ref="af17b2590568f39510f23c4b41d3acb12" args="(OTPseudonym &amp;theNym, const OTString &amp;strServerID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_party.html#ab97bb5511eae5e5702694d2c3b61eeee">OTParty::HarvestOpeningNumber</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;&#160;</td>
          <td class="paramname"><em>theNym</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strServerID</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_party_8cpp_source.html#l01551">1551</a> of file <a class="el" href="_o_t_party_8cpp_source.html">OTParty.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_o_t_agent.html">OTAgent</a> * pAgent = NULL;

    <span class="keywordflow">if</span> (<a class="code" href="class_o_t_party.html#aa34fe1901531ed5056633b99fade0f93">HasAuthorizingAgent</a>(theNym, &amp;pAgent))
    {
        <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pAgent);
        <a class="code" href="class_o_t_party.html#ab97bb5511eae5e5702694d2c3b61eeee">HarvestOpeningNumber</a>(*pAgent, strServerID);
    }
    <span class="comment">// else no error, since many nyms could get passed in here (in a loop)</span>
} <span class="comment">// The function above me, calls the one below.</span>
</pre></div>
</div>
</div>
<a class="anchor" id="ad586d25e956e0925e58e39879688a8e9"></a><!-- doxytag: member="OTParty::HasAccount" ref="ad586d25e956e0925e58e39879688a8e9" args="(OTAccount &amp;theAccount, OTPartyAccount **ppPartyAccount=NULL) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_party.html#ad586d25e956e0925e58e39879688a8e9">OTParty::HasAccount</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_account.html">OTAccount</a> &amp;&#160;</td>
          <td class="paramname"><em>theAccount</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_party_account.html">OTPartyAccount</a> **&#160;</td>
          <td class="paramname"><em>ppPartyAccount</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_party_8cpp_source.html#l00848">848</a> of file <a class="el" href="_o_t_party_8cpp_source.html">OTParty.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_o_t_storage_8hpp.html#a804eb881e96b7e1846d130a55a94f716">FOR_EACH_CONST</a>(<a class="code" href="_o_t_party_account_8hpp.html#ad14c568ca8da6c72a36200f938fd5f59">mapOfPartyAccounts</a>, m_mapPartyAccounts)
    {
        <a class="code" href="class_o_t_party_account.html">OTPartyAccount</a> * pAcct = (*it).second;
        <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pAcct);
        <span class="comment">// -------------------------------</span>

        <span class="keywordflow">if</span> (pAcct-&gt;<a class="code" href="class_o_t_party_account.html#acd50fd7c81369274aa9f9264bfa492a3">IsAccount</a>(theAccount))
        {
            <span class="keywordflow">if</span> (NULL != ppPartyAccount)
                *ppPartyAccount = pAcct;

            <span class="keywordflow">return</span> <span class="keyword">true</span>;
        }
    }

    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a1bf782a97edb882ba9ace729ed74e22d"></a><!-- doxytag: member="OTParty::HasAccountByID" ref="a1bf782a97edb882ba9ace729ed74e22d" args="(const OTIdentifier &amp;theAcctID, OTPartyAccount **ppPartyAccount=NULL) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_party.html#a1bf782a97edb882ba9ace729ed74e22d">OTParty::HasAccountByID</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;&#160;</td>
          <td class="paramname"><em>theAcctID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_party_account.html">OTPartyAccount</a> **&#160;</td>
          <td class="paramname"><em>ppPartyAccount</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_party_8cpp_source.html#l00826">826</a> of file <a class="el" href="_o_t_party_8cpp_source.html">OTParty.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_o_t_storage_8hpp.html#a804eb881e96b7e1846d130a55a94f716">FOR_EACH_CONST</a>(<a class="code" href="_o_t_party_account_8hpp.html#ad14c568ca8da6c72a36200f938fd5f59">mapOfPartyAccounts</a>, m_mapPartyAccounts)
    {
        <a class="code" href="class_o_t_party_account.html">OTPartyAccount</a> * pAcct = (*it).second;
        <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pAcct);
        <span class="comment">// -------------------------------</span>

        <span class="keywordflow">if</span> (pAcct-&gt;<a class="code" href="class_o_t_party_account.html#abc624a5f5a17ad05bbb9564b12e17b25">IsAccountByID</a>(theAcctID))
        {
            <span class="keywordflow">if</span> (NULL != ppPartyAccount)
                *ppPartyAccount = pAcct;

            <span class="keywordflow">return</span> <span class="keyword">true</span>;
        }
    }

    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a477b8c4714d7ac086630c236e4be6f89"></a><!-- doxytag: member="OTParty::HasActiveAgent" ref="a477b8c4714d7ac086630c236e4be6f89" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_party.html#a477b8c4714d7ac086630c236e4be6f89">OTParty::HasActiveAgent</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_party_8cpp_source.html#l00641">641</a> of file <a class="el" href="_o_t_party_8cpp_source.html">OTParty.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// Loop through all agents and call IsAnIndividual() on each.</span>
    <span class="comment">// then return true if any is true. else return false;</span>
    <span class="comment">//</span>
    <a class="code" href="_o_t_storage_8hpp.html#a804eb881e96b7e1846d130a55a94f716">FOR_EACH_CONST</a>(<a class="code" href="_o_t_agent_8hpp.html#aeed1daf4b84f9a0672d3d16076d68de4">mapOfAgents</a>, m_mapAgents)
    {
        <a class="code" href="class_o_t_agent.html">OTAgent</a> * pAgent = (*it).second;
        <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pAgent);
        <span class="comment">// -------------------------------</span>

        <span class="keywordflow">if</span> (pAgent-&gt;<a class="code" href="class_o_t_agent.html#a1969e4f8a5f13ee34ba0a68d8f082956">IsAnIndividual</a>())
            <span class="keywordflow">return</span> <span class="keyword">true</span>;
    }

    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="afda73de60d222bc8c01b893289a4564e"></a><!-- doxytag: member="OTParty::HasAgent" ref="afda73de60d222bc8c01b893289a4564e" args="(OTPseudonym &amp;theNym, OTAgent **ppAgent=NULL) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_party.html#afda73de60d222bc8c01b893289a4564e">OTParty::HasAgent</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;&#160;</td>
          <td class="paramname"><em>theNym</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_agent.html">OTAgent</a> **&#160;</td>
          <td class="paramname"><em>ppAgent</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_party_8cpp_source.html#l00873">873</a> of file <a class="el" href="_o_t_party_8cpp_source.html">OTParty.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_o_t_storage_8hpp.html#a804eb881e96b7e1846d130a55a94f716">FOR_EACH_CONST</a>(<a class="code" href="_o_t_agent_8hpp.html#aeed1daf4b84f9a0672d3d16076d68de4">mapOfAgents</a>, m_mapAgents)
    {
        <a class="code" href="class_o_t_agent.html">OTAgent</a> * pAgent = (*it).second;
        <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pAgent);
        <span class="comment">// -------------------------------</span>

        <span class="keywordflow">if</span> (pAgent-&gt;<a class="code" href="class_o_t_agent.html#a2039e8ad981abeecabf0a3aa412a3a9f">IsValidSigner</a>(theNym))
        {
            <span class="keywordflow">if</span> (NULL != ppAgent)
                *ppAgent = pAgent;

            <span class="keywordflow">return</span> <span class="keyword">true</span>;
        }
    }

    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a6d8f917d33c9c49c6425add0b041e4ee"></a><!-- doxytag: member="OTParty::HasAgentByNymID" ref="a6d8f917d33c9c49c6425add0b041e4ee" args="(const OTIdentifier &amp;theNymID, OTAgent **ppAgent=NULL) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_party.html#a6d8f917d33c9c49c6425add0b041e4ee">OTParty::HasAgentByNymID</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;&#160;</td>
          <td class="paramname"><em>theNymID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_agent.html">OTAgent</a> **&#160;</td>
          <td class="paramname"><em>ppAgent</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_party_8cpp_source.html#l00894">894</a> of file <a class="el" href="_o_t_party_8cpp_source.html">OTParty.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_o_t_storage_8hpp.html#a804eb881e96b7e1846d130a55a94f716">FOR_EACH_CONST</a>(<a class="code" href="_o_t_agent_8hpp.html#aeed1daf4b84f9a0672d3d16076d68de4">mapOfAgents</a>, m_mapAgents)
    {
        <a class="code" href="class_o_t_agent.html">OTAgent</a> * pAgent = (*it).second;
        <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pAgent);
        <span class="comment">// -------------------------------</span>
        <span class="keywordflow">if</span> (pAgent-&gt;<a class="code" href="class_o_t_agent.html#a173cbf501c1f882637bc405f91ebfc41">IsValidSignerID</a>(theNymID))
        {
            <span class="keywordflow">if</span> (NULL != ppAgent)
                *ppAgent = pAgent;

            <span class="keywordflow">return</span> <span class="keyword">true</span>;
        }
    }

    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa34fe1901531ed5056633b99fade0f93"></a><!-- doxytag: member="OTParty::HasAuthorizingAgent" ref="aa34fe1901531ed5056633b99fade0f93" args="(OTPseudonym &amp;theNym, OTAgent **ppAgent=NULL) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_party.html#aa34fe1901531ed5056633b99fade0f93">OTParty::HasAuthorizingAgent</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;&#160;</td>
          <td class="paramname"><em>theNym</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_agent.html">OTAgent</a> **&#160;</td>
          <td class="paramname"><em>ppAgent</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_party_8cpp_source.html#l00918">918</a> of file <a class="el" href="_o_t_party_8cpp_source.html">OTParty.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (<a class="code" href="class_o_t_scriptable.html#a9492afb0aee3340f6fbdffdbdf8d5291">OTScriptable::ValidateName</a>(m_str_authorizing_agent))
    {
        mapOfAgents::const_iterator it = m_mapAgents.find(m_str_authorizing_agent);

        <span class="keywordflow">if</span> (m_mapAgents.end() != it) <span class="comment">// If we found something...</span>
        {
            <a class="code" href="class_o_t_agent.html">OTAgent</a> * pAgent = (*it).second;
            <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pAgent);
            <span class="comment">// -------------------------------</span>

            <span class="keywordflow">if</span> (pAgent-&gt;<a class="code" href="class_o_t_agent.html#a2039e8ad981abeecabf0a3aa412a3a9f">IsValidSigner</a>(theNym)) <span class="comment">// if theNym is valid signer for pAgent.</span>
            {
                <span class="comment">// Optionally can pass in a pointer-to-pointer-to-Agent, in order to get the Agent pointer back.</span>
                <span class="keywordflow">if</span> (NULL != ppAgent)
                    *ppAgent = pAgent;

                <span class="keywordflow">return</span> <span class="keyword">true</span>;
            }
        }
        <span class="keywordflow">else</span> <span class="comment">// found nothing.</span>
            <a class="code" href="class_o_t_log.html#a5acd90ac91c2618f395b0ff37ad4f8ee">OTLog::Error</a>(<span class="stringliteral">&quot;OTParty::HasAuthorizingAgent: named agent wasn&#39;t found on list.\n&quot;</span>);
    }

    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a649744ad680735efc8f3670c0b4294fc"></a><!-- doxytag: member="OTParty::HasAuthorizingAgentByNymID" ref="a649744ad680735efc8f3670c0b4294fc" args="(const OTIdentifier &amp;theNymID, OTAgent **ppAgent=NULL) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_party.html#a649744ad680735efc8f3670c0b4294fc">OTParty::HasAuthorizingAgentByNymID</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;&#160;</td>
          <td class="paramname"><em>theNymID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_agent.html">OTAgent</a> **&#160;</td>
          <td class="paramname"><em>ppAgent</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_party_8cpp_source.html#l00947">947</a> of file <a class="el" href="_o_t_party_8cpp_source.html">OTParty.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (<a class="code" href="class_o_t_scriptable.html#a9492afb0aee3340f6fbdffdbdf8d5291">OTScriptable::ValidateName</a>(m_str_authorizing_agent))
    {
        mapOfAgents::const_iterator it = m_mapAgents.find(m_str_authorizing_agent);

        <span class="keywordflow">if</span> (m_mapAgents.end() != it) <span class="comment">// If we found something...</span>
        {
            <a class="code" href="class_o_t_agent.html">OTAgent</a> * pAgent = (*it).second;
            <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pAgent);
            <span class="comment">// -------------------------------</span>

            <span class="keywordflow">if</span> (pAgent-&gt;<a class="code" href="class_o_t_agent.html#a173cbf501c1f882637bc405f91ebfc41">IsValidSignerID</a>(theNymID)) <span class="comment">// if theNym is valid signer for pAgent.</span>
            {
                <span class="comment">// Optionally can pass in a pointer-to-pointer-to-Agent, in order to get the Agent pointer back.</span>
                <span class="keywordflow">if</span> (NULL != ppAgent)
                    *ppAgent = pAgent;

                <span class="keywordflow">return</span> <span class="keyword">true</span>;
            }
        }
        <span class="keywordflow">else</span> <span class="comment">// found nothing.</span>
            <a class="code" href="class_o_t_log.html#a5acd90ac91c2618f395b0ff37ad4f8ee">OTLog::Error</a>(<span class="stringliteral">&quot;OTParty::HasAuthorizingAgentByNymID: named agent wasn&#39;t found on list.\n&quot;</span>);
    }

    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="add612bb3dc7fdc8a9a5bc014fd42104e"></a><!-- doxytag: member="OTParty::HasTransactionNum" ref="add612bb3dc7fdc8a9a5bc014fd42104e" args="(const int64_t &amp;lInput) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_party.html#add612bb3dc7fdc8a9a5bc014fd42104e">OTParty::HasTransactionNum</a> </td>
          <td>(</td>
          <td class="paramtype">const int64_t &amp;&#160;</td>
          <td class="paramname"><em>lInput</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_party_8cpp_source.html#l00151">151</a> of file <a class="el" href="_o_t_party_8cpp_source.html">OTParty.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (lInput == m_lOpeningTransNo)
        <span class="keywordflow">return</span> <span class="keyword">true</span>;
    <span class="comment">// ------------------------------------</span>
    <a class="code" href="_o_t_storage_8hpp.html#a804eb881e96b7e1846d130a55a94f716">FOR_EACH_CONST</a>(<a class="code" href="_o_t_party_account_8hpp.html#ad14c568ca8da6c72a36200f938fd5f59">mapOfPartyAccounts</a>, m_mapPartyAccounts)
    {
        <span class="keyword">const</span> <a class="code" href="class_o_t_party_account.html">OTPartyAccount</a> * pAcct = (*it).second;
        <a class="code" href="_o_t_assert_8hpp.html#a033b133f48e61f2b227c52ad2be0c882">OT_ASSERT_MSG</a>(NULL  != pAcct, <span class="stringliteral">&quot;Unexpected NULL partyaccount pointer in party map.&quot;</span>);
        <span class="comment">// ---------------------------------</span>
        <span class="keywordflow">if</span> (lInput == pAcct-&gt;<a class="code" href="class_o_t_party_account.html#add572c3b200be9265d9dcc4a1b1f4185">GetClosingTransNo</a>())
            <span class="keywordflow">return</span> <span class="keyword">true</span>;
    }
    <span class="comment">// -------------------------------------</span>
    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a89552b5fb6769fd7ad69deedb633653f"></a><!-- doxytag: member="OTParty::IsEntity" ref="a89552b5fb6769fd7ad69deedb633653f" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_party.html#a89552b5fb6769fd7ad69deedb633653f">OTParty::IsEntity</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_party_8cpp_source.html#l00575">575</a> of file <a class="el" href="_o_t_party_8cpp_source.html">OTParty.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// If the party is an Entity. (Either way, the AGENT carries out all wishes.)</span>
    <span class="keywordflow">return</span> !m_bPartyIsNym;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a1c2f66b28bd7062505430fcbe18f9c12"></a><!-- doxytag: member="OTParty::IsNym" ref="a1c2f66b28bd7062505430fcbe18f9c12" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_party.html#a1c2f66b28bd7062505430fcbe18f9c12">OTParty::IsNym</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_party_8cpp_source.html#l00568">568</a> of file <a class="el" href="_o_t_party_8cpp_source.html">OTParty.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// If the party is a Nym. (The party is the actual owner/beneficiary.)</span>
    <span class="keywordflow">return</span> m_bPartyIsNym;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a2f9d6c69f58bb85a524f897a70a1dae6"></a><!-- doxytag: member="OTParty::LoadAndVerifyAgentNyms" ref="a2f9d6c69f58bb85a524f897a70a1dae6" args="(OTPseudonym &amp;theServerNym, mapOfNyms &amp;map_Nyms_Already_Loaded, mapOfNyms &amp;map_NewlyLoaded)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_party.html#a2f9d6c69f58bb85a524f897a70a1dae6">OTParty::LoadAndVerifyAgentNyms</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;&#160;</td>
          <td class="paramname"><em>theServerNym</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="_o_t_agent_8hpp.html#ac89892658f6bc83e354078647b704e8f">mapOfNyms</a> &amp;&#160;</td>
          <td class="paramname"><em>map_Nyms_Already_Loaded</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="_o_t_agent_8hpp.html#ac89892658f6bc83e354078647b704e8f">mapOfNyms</a> &amp;&#160;</td>
          <td class="paramname"><em>map_NewlyLoaded</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_party_8cpp_source.html#l01280">1280</a> of file <a class="el" href="_o_t_party_8cpp_source.html">OTParty.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keyword">const</span> <span class="keywordtype">bool</span> bIsNym = this-&gt;<a class="code" href="class_o_t_party.html#a1c2f66b28bd7062505430fcbe18f9c12">IsNym</a>();

    <span class="keywordflow">if</span> (!bIsNym) <span class="comment">// Owner MUST be a Nym (until I code Entities.)</span>
    {
        <a class="code" href="class_o_t_log.html#a5acd90ac91c2618f395b0ff37ad4f8ee">OTLog::Error</a>(<span class="stringliteral">&quot;OTParty::LoadAndVerifyAgents: Entities and roles have not been coded yet. Party owner MUST be a Nym. \n&quot;</span>);
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="keywordflow">if</span> (<a class="code" href="class_o_t_party.html#aa11f990dfe9743dd1d8e34af8bfd693a">GetOpeningTransNo</a>() &lt;= 0)   <span class="comment">// Opening Trans Number MUST be set for the party! VerifyPartyAuthorization() only verifies it if it&#39;s set. Therefore</span>
    {                               <span class="comment">// if we are verifying the agent Nyms based on the assumption that the authorizing Nym is valid, then we want to make sure</span>
        <a class="code" href="class_o_t_log.html#a5acd90ac91c2618f395b0ff37ad4f8ee">OTLog::Error</a>(<span class="stringliteral">&quot;OTParty::LoadAndVerifyAgents: This party doesn&#39;t have a valid opening transaction number. Sorry. \n&quot;</span>); <span class="comment">// the Opening Num is being checked for that Nym. (And if it&#39;s above 0, then it IS being checked.)</span>
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// ----------------------------------</span>
    <span class="keywordtype">bool</span> bGotPartyNymID=<span class="keyword">false</span>;
    <span class="keyword">const</span> std::string str_owner_id = this-&gt;<a class="code" href="class_o_t_party.html#a22ca91a1414fd1457f192d91fe740d80">GetNymID</a>(&amp;bGotPartyNymID); <span class="comment">// str_owner_id  is the NymID of the party OWNER.</span>
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(bGotPartyNymID);
    <span class="comment">// ----------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strServerNymID(theServerNym);

    <a class="code" href="_o_t_storage_8hpp.html#a4a94c3435a932ed34e5755f3f472547c">FOR_EACH_IT</a>(<a class="code" href="_o_t_agent_8hpp.html#aeed1daf4b84f9a0672d3d16076d68de4">mapOfAgents</a>, m_mapAgents, it_agent) <span class="comment">// Until entities are coded, there can only be one agent, who has the same ID as the owner (Nym representing himself)</span>
    {
        <a class="code" href="class_o_t_agent.html">OTAgent</a> * pAgent = (*it_agent).second;
        <a class="code" href="_o_t_assert_8hpp.html#a033b133f48e61f2b227c52ad2be0c882">OT_ASSERT_MSG</a>(NULL != pAgent, <span class="stringliteral">&quot;Unexpected NULL agent pointer in party map.&quot;</span>);
        <span class="comment">// -------------------------------------</span>

        <span class="keywordflow">if</span> (!pAgent-&gt;<a class="code" href="class_o_t_agent.html#a1969e4f8a5f13ee34ba0a68d8f082956">IsAnIndividual</a>() || ! pAgent-&gt;<a class="code" href="class_o_t_agent.html#a6e9c37100a8e0e4cf9f982ee5f4d3eec">DoesRepresentHimself</a>())
        {
            <a class="code" href="class_o_t_log.html#a5acd90ac91c2618f395b0ff37ad4f8ee">OTLog::Error</a>(<span class="stringliteral">&quot;OTParty::LoadAndVerifyAgents: Entities and roles have not been coded yet. &quot;</span>
                         <span class="stringliteral">&quot;Agent needs to be an individual who represents himself, and Party owner needs to be the same Nym.\n&quot;</span>);
            <span class="keywordflow">return</span> <span class="keyword">false</span>;
        }
        <span class="comment">// ----------------------</span>
        <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theNymID;
        <span class="keywordtype">bool</span> bGotAgentNymID = pAgent-&gt;<a class="code" href="class_o_t_agent.html#ac9a12b4a5e377991024dbe2772c73554">GetNymID</a>(theNymID);
        <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strNymID(theNymID);
        <span class="keyword">const</span> std::string str_agent_id = bGotAgentNymID ? strNymID.Get() : <span class="stringliteral">&quot;&quot;</span>; <span class="comment">// str_agent_id is the NymID of the AGENT.</span>
        <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(bGotAgentNymID);
        <span class="comment">// ---------</span>

        <span class="comment">// COMPARE THE IDS...... Since the Nym for this agent is representing himself (he is also owner)</span>
        <span class="comment">// therefore they should have the same NymID.</span>

        <span class="keywordflow">if</span> ( !(str_agent_id.compare(str_owner_id) == 0) ) <span class="comment">// If they don&#39;t match. (Until I code entities, a party can only be a Nym representing himself as an agent.)</span>
        {
            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;OTParty::LoadAndVerifyAgents: Nym supposedly represents himself (owner AND agent) yet &quot;</span>
                          <span class="stringliteral">&quot;they have different Nym IDs:  %s / %s.\n&quot;</span>, str_owner_id.c_str(), str_agent_id.c_str());
            <span class="keywordflow">return</span> <span class="keyword">false</span>;
        }
        <span class="comment">// ---------------------------------</span>
        <span class="comment">// Server Nym is not allowed as a party (at this time :-)</span>
        <span class="keywordflow">if</span> ( str_agent_id.compare(strServerNymID.Get()) == 0 ) <span class="comment">// If they DO match.</span>
        {
            <a class="code" href="class_o_t_log.html#a5acd90ac91c2618f395b0ff37ad4f8ee">OTLog::Error</a>(<span class="stringliteral">&quot;OTParty::LoadAndVerifyAgents: Server Nym is not allowed to serve as an agent for smart contracts. Sorry.\n&quot;</span>);
            <span class="keywordflow">return</span> <span class="keyword">false</span>;
        }
        <span class="comment">// ----------------------</span>
        <span class="comment">// BY THIS POINT we know that the Party is a Nym, the Agent is an individual representing himself, and</span>
        <span class="comment">// we know that they have the SAME NYM ID.</span>
        <span class="comment">//</span>
        <span class="comment">// Next step: See if the Nym is already loaded and if not, load him up.</span>

        <span class="keywordtype">bool</span> bHadToLoadtheNymMyself = <span class="keyword">true</span>;
        <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pNym = NULL;

        mapOfNyms::iterator ii = map_Nyms_Already_Loaded.find(str_agent_id); <span class="comment">// If it&#39;s there, it&#39;s mapped by Nym ID, so we can look it up.</span>

        <span class="keywordflow">if</span> (map_Nyms_Already_Loaded.end() != ii) <span class="comment">// Found it.</span>
        {
            pNym = (*ii).second;
            <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pNym);
            <span class="comment">// ---------------</span>
            <span class="comment">// Now we KNOW the Nym is &quot;already loaded&quot; and we KNOW the agent has a POINTER to that Nym:</span>
            <span class="comment">//</span>
            <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(pAgent-&gt;<a class="code" href="class_o_t_agent.html#a2039e8ad981abeecabf0a3aa412a3a9f">IsValidSigner</a>( *pNym )); <span class="comment">// assert because the Nym was already mapped by ID, so it should already have been validated.</span>

            bHadToLoadtheNymMyself = <span class="keyword">false</span>; <span class="comment">// Whew. He was already loaded. Found him.</span>
        }
        <span class="comment">// -----------------------------------------------</span>

        <span class="comment">// Looks like the Nym wasn&#39;t already loaded....</span>
        <span class="comment">// Let&#39;s load him up</span>
        <span class="comment">//</span>
        <span class="keywordflow">if</span> (bHadToLoadtheNymMyself)
        {
            <span class="keywordflow">if</span> (NULL == (pNym = pAgent-&gt;<a class="code" href="class_o_t_agent.html#a1d171907da631ad60789969fbee12bbf">LoadNym</a>(theServerNym)))
            {
                <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;OTParty::LoadAndVerifyAgents: Failed loading Nym with ID: %s\n&quot;</span>, str_agent_id.c_str());
                <span class="keywordflow">return</span> <span class="keyword">false</span>;
            }
            <span class="comment">// Successfully loaded the Nym! We add to this map so it gets cleaned-up properly later.</span>
            map_NewlyLoaded.insert(std::pair&lt;std::string, OTPseudonym *&gt;(str_agent_id, pNym)); <span class="comment">// I use str_agent_id here because it contains the right NymID.</span>
        }
        <span class="comment">// -----------------------------------------------</span>
        <span class="comment">// BY THIS POINT, we know the Nym is available for use, whether I had to load it myself first or not.</span>
        <span class="comment">// We also know that if I DID have to load it myself, the pointer was saved in map_NewlyLoaded for cleanup later.</span>
        <span class="comment">//</span>
        <span class="comment">// Until entities are coded, by this point we also KNOW that</span>
        <span class="comment">// the agent&#39;s NymID and the Party (owner)&#39;s NymID are identical.</span>
        <span class="comment">//</span>
        <span class="comment">// Before this function was even called, we knew that OTScriptable::VerifyPartyAuthorization() was already called</span>
        <span class="comment">// on all the parties, and we know that every party&#39;s signed copy was verified against the signature of its authorizing</span>
        <span class="comment">// agent, and that the Opening trans# for that party is currently signed out to THAT AGENT.</span>
        <span class="comment">//</span>
        <span class="comment">// If the NymIDs are identical between agent and owner, and the owner&#39;s authorizing agent (that same nym) has SIGNED</span>
        <span class="comment">// its party&#39;s copy, and the Opening Trans# is signed out to that agent, then we have basically verified that agent.</span>
        <span class="comment">// Right?</span>
        <span class="comment">//</span>
        <span class="comment">// WHAT if one of the Nyms loaded by this agent was NOT the same Nym as the owner? In that case, it would have to be</span>
        <span class="comment">// a Nym working for an entity in a role, and I haven&#39;t coded entities yet, so I just disallow that case entirely</span>
        <span class="comment">//</span>
        <span class="comment">// By this point, the call to LoadNym also did a LoadSignedNymFile() and a call to VerifyPseudonym().</span>
        <span class="comment">//</span>
        <span class="comment">// FINALLY, the calls to pAgent-&gt;IsValidSigner( *pNym ) or pAgent-&gt;LoadNym(theServerNym) (whichever occurred -- one or the other)</span>
        <span class="comment">// have now insured by this point that pAgent continues to have an INTERNAL POINTER to pNym...</span>
    }

    <span class="keywordflow">return</span> <span class="keyword">true</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a29151e24141937447c2be93a237e0613"></a><!-- doxytag: member="OTParty::LoadAndVerifyAssetAccounts" ref="a29151e24141937447c2be93a237e0613" args="(OTPseudonym &amp;theServerNym, const OTString &amp;strServerID, mapOfAccounts &amp;map_Accts_Already_Loaded, mapOfAccounts &amp;map_NewlyLoaded)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_party.html#a29151e24141937447c2be93a237e0613">OTParty::LoadAndVerifyAssetAccounts</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;&#160;</td>
          <td class="paramname"><em>theServerNym</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strServerID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="_o_t_agent_8hpp.html#abd4942716d546c8d42670619a03ef99e">mapOfAccounts</a> &amp;&#160;</td>
          <td class="paramname"><em>map_Accts_Already_Loaded</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="_o_t_agent_8hpp.html#abd4942716d546c8d42670619a03ef99e">mapOfAccounts</a> &amp;&#160;</td>
          <td class="paramname"><em>map_NewlyLoaded</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_party_8cpp_source.html#l01196">1196</a> of file <a class="el" href="_o_t_party_8cpp_source.html">OTParty.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    std::set&lt;std::string&gt; theAcctIDSet; <span class="comment">// Make sure all the acct IDs are unique.</span>

    <a class="code" href="_o_t_storage_8hpp.html#a4a94c3435a932ed34e5755f3f472547c">FOR_EACH_IT</a>(<a class="code" href="_o_t_party_account_8hpp.html#ad14c568ca8da6c72a36200f938fd5f59">mapOfPartyAccounts</a>, m_mapPartyAccounts, it_acct)
    {
        <span class="keyword">const</span> std::string str_acct_name = (*it_acct).first;
        <a class="code" href="class_o_t_party_account.html">OTPartyAccount</a> * pPartyAcct = (*it_acct).second;
        <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pPartyAcct);
        <span class="comment">// --------------</span>

        <span class="keywordtype">bool</span> bHadToLoadtheAcctMyself = <span class="keyword">true</span>;
        <a class="code" href="class_o_t_account.html">OTAccount</a> * pAccount = NULL;

        <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> &amp; strAcctID = pPartyAcct-&gt;<a class="code" href="class_o_t_party_account.html#aa5e4e0cc77853d08b3708017fe694876">GetAcctID</a>();

        <span class="keywordflow">if</span> (!strAcctID.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>())
        {
            <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;OTParty::LoadAndVerifyAssetAccounts: Bad: Acct ID is blank for account: %s, on party: %s.\n&quot;</span>,
                           str_acct_name.c_str(), <a class="code" href="class_o_t_party.html#ad823a9d89b3d8d0d87bc85114eefcead">GetPartyName</a>().c_str());
            <span class="keywordflow">return</span> <span class="keyword">false</span>;
        }
        <span class="comment">// ----------------------</span>
        <span class="comment">// Disallow duplicate Acct IDs.</span>
        <span class="comment">// (Only can use an acct once inside a smart contract.)</span>
        <span class="comment">//</span>
        std::set&lt;std::string&gt;::iterator it_acct_id = theAcctIDSet.find(strAcctID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());

        <span class="keywordflow">if</span> (theAcctIDSet.end() == it_acct_id) <span class="comment">// It&#39;s not already there (good).</span>
        {
            theAcctIDSet.insert(strAcctID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>()); <span class="comment">// Save a copy so we can make sure there&#39;s no duplicate acct IDs. (Not allowed.)</span>
        }
        <span class="keywordflow">else</span>
        {
            <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;OTParty::LoadAndVerifyAssetAccounts: Failure: Found a duplicate Acct ID (%s), on acct: %s.\n&quot;</span>,
                           strAcctID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(), str_acct_name.c_str());
            <span class="keywordflow">return</span> <span class="keyword">false</span>;
        }
        <span class="comment">// ----------------------</span>
        mapOfAccounts::iterator ii = map_Accts_Already_Loaded.find(strAcctID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>()); <span class="comment">// If it&#39;s there, it&#39;s mapped by Acct ID, so we can look it up.</span>

        <span class="keywordflow">if</span> (map_Accts_Already_Loaded.end() != ii) <span class="comment">// Found it.</span>
        {
            pAccount = (*ii).second;
            <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pAccount);
            <span class="comment">// ---------------</span>
            <span class="comment">// Now we KNOW the Account is &quot;already loaded&quot; and we KNOW the partyaccount has a POINTER to that Acct:</span>
            <span class="comment">//</span>
            <span class="keyword">const</span> <span class="keywordtype">bool</span> bIsPartyAcct = pPartyAcct-&gt;<a class="code" href="class_o_t_party_account.html#acd50fd7c81369274aa9f9264bfa492a3">IsAccount</a>(*pAccount);
            <span class="keywordflow">if</span> (!bIsPartyAcct)
                <a class="code" href="class_o_t_log.html#a5acd90ac91c2618f395b0ff37ad4f8ee">OTLog::Error</a>(<span class="stringliteral">&quot;OTParty::LoadAndVerifyAssetAccounts: Failed call: pPartyAcct-&gt;IsAccount(*pAccount); \n&quot;</span>);
            <a class="code" href="_o_t_assert_8hpp.html#a033b133f48e61f2b227c52ad2be0c882">OT_ASSERT_MSG</a>(bIsPartyAcct, <span class="stringliteral">&quot;OTParty::LoadAndVerifyAssetAccounts: Failed call: pPartyAcct-&gt;IsAccount(*pAccount); \n&quot;</span>); <span class="comment">// assert because the Acct was already mapped by ID, so it should already have been validated.</span>

            bHadToLoadtheAcctMyself = <span class="keyword">false</span>; <span class="comment">// Whew. The Acct was already loaded. Found it. (And the ptr is now set.)</span>
        }
        <span class="comment">// -----------------------------------------------</span>

        <span class="comment">// Looks like the Acct wasn&#39;t already loaded....</span>
        <span class="comment">// Let&#39;s load it up...</span>
        <span class="comment">//</span>
        <span class="keywordflow">if</span> (bHadToLoadtheAcctMyself == <span class="keyword">true</span>)
        {
            <span class="keywordflow">if</span> (NULL == (pAccount = pPartyAcct-&gt;<a class="code" href="class_o_t_party_account.html#a3671ea20471462cfdfc09af290907ab1">LoadAccount</a>(theServerNym, strServerID))) <span class="comment">// This calls VerifyAccount(), AND it sets pPartyAcct&#39;s internal ptr.</span>
            {
                <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;OTParty::LoadAndVerifyAssetAccounts: Failed loading Account with name: %s and ID: %s\n&quot;</span>,
                              str_acct_name.c_str(), strAcctID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
                <span class="keywordflow">return</span> <span class="keyword">false</span>;
            }
            <span class="comment">// Successfully loaded the Acct! We add to this map so it gets cleaned-up properly later.</span>
            map_NewlyLoaded.insert(std::pair&lt;std::string, OTAccount *&gt;(strAcctID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(), pAccount));
        }
        <span class="comment">// ---------------------------------------</span>
    }

    <span class="keywordflow">return</span> <span class="keyword">true</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a01988fe0bfd917703214f7f7bf3ba66f"></a><!-- doxytag: member="OTParty::LoadAuthorizingAgentNym" ref="a01988fe0bfd917703214f7f7bf3ba66f" args="(OTPseudonym &amp;theSignerNym, OTAgent **ppAgent=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> * <a class="el" href="class_o_t_party.html#a01988fe0bfd917703214f7f7bf3ba66f">OTParty::LoadAuthorizingAgentNym</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;&#160;</td>
          <td class="paramname"><em>theSignerNym</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_agent.html">OTAgent</a> **&#160;</td>
          <td class="paramname"><em>ppAgent</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_party_8cpp_source.html#l00997">997</a> of file <a class="el" href="_o_t_party_8cpp_source.html">OTParty.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (<a class="code" href="class_o_t_scriptable.html#a9492afb0aee3340f6fbdffdbdf8d5291">OTScriptable::ValidateName</a>(m_str_authorizing_agent))
    {
        mapOfAgents::iterator it = m_mapAgents.find(m_str_authorizing_agent);

        <span class="keywordflow">if</span> (m_mapAgents.end() != it) <span class="comment">// If we found something...</span>
        {
            <a class="code" href="class_o_t_agent.html">OTAgent</a> * pAgent = (*it).second;
            <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pAgent);
            <span class="comment">// -------------------------------</span>

            <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pNym = NULL;

            <span class="keywordflow">if</span> (<span class="keyword">false</span> == pAgent-&gt;<a class="code" href="class_o_t_agent.html#a1969e4f8a5f13ee34ba0a68d8f082956">IsAnIndividual</a>())
                <a class="code" href="class_o_t_log.html#a5acd90ac91c2618f395b0ff37ad4f8ee">OTLog::Error</a>(<span class="stringliteral">&quot;OTParty::LoadAuthorizingAgentNym: This agent is not an individual--there&#39;s no Nym to load.\n&quot;</span>);
            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (NULL == (pNym = pAgent-&gt;<a class="code" href="class_o_t_agent.html#a1d171907da631ad60789969fbee12bbf">LoadNym</a>(theSignerNym)))
                <a class="code" href="class_o_t_log.html#a5acd90ac91c2618f395b0ff37ad4f8ee">OTLog::Error</a>(<span class="stringliteral">&quot;OTParty::LoadAuthorizingAgentNym: Failed loading Nym.\n&quot;</span>);
            <span class="keywordflow">else</span>
            {
                <span class="keywordflow">if</span> (NULL != ppAgent)    <span class="comment">// Pass the agent back, too, if it was requested.</span>
                    *ppAgent = pAgent;

                <span class="keywordflow">return</span> pNym;        <span class="comment">// Success</span>
            }
        }
        <span class="keywordflow">else</span> <span class="comment">// found nothing.</span>
            <a class="code" href="class_o_t_log.html#a5acd90ac91c2618f395b0ff37ad4f8ee">OTLog::Error</a>(<span class="stringliteral">&quot;OTParty::LoadAuthorizingAgentNym: named agent wasn&#39;t found on list.\n&quot;</span>);
    }

    <span class="keywordflow">return</span> NULL;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a4b395f87e458618a3b15a93575c15fce"></a><!-- doxytag: member="OTParty::RegisterAccountsForExecution" ref="a4b395f87e458618a3b15a93575c15fce" args="(OTScript &amp;theScript)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_party.html#a4b395f87e458618a3b15a93575c15fce">OTParty::RegisterAccountsForExecution</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_script.html">OTScript</a> &amp;&#160;</td>
          <td class="paramname"><em>theScript</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_party_8cpp_source.html#l01775">1775</a> of file <a class="el" href="_o_t_party_8cpp_source.html">OTParty.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_party_account_8hpp.html#ad14c568ca8da6c72a36200f938fd5f59">mapOfPartyAccounts</a>, m_mapPartyAccounts)
    {
        <span class="keyword">const</span> std::string str_acct_name = (*it).first;
        <a class="code" href="class_o_t_party_account.html">OTPartyAccount</a> * pAccount       = (*it).second;
        <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>((NULL != pAccount) &amp;&amp; (str_acct_name.size() &gt; 0));
        <span class="comment">// -----------------------</span>
        pAccount-&gt;<a class="code" href="class_o_t_party_account.html#a22652583fbe8acb73d8eeed06bfd9c50">RegisterForExecution</a>(theScript);
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="acdd3320424cd48622f552653d79b9dc3"></a><!-- doxytag: member="OTParty::ReserveTransNumsForConfirm" ref="acdd3320424cd48622f552653d79b9dc3" args="(const OTString &amp;strServerID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_party.html#acdd3320424cd48622f552653d79b9dc3">OTParty::ReserveTransNumsForConfirm</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strServerID</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_party_8cpp_source.html#l01638">1638</a> of file <a class="el" href="_o_t_party_8cpp_source.html">OTParty.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// -----------------------------------------------</span>
    <span class="comment">// RESERVE THE OPENING TRANSACTION NUMBER, LOCATED ON THE AUTHORIZING AGENT FOR THIS PARTY.</span>

    <span class="keywordflow">if</span> (<a class="code" href="class_o_t_party.html#a374056d26b9a605719f4bd585b4d264c">GetAuthorizingAgentName</a>().size() &lt;= 0)
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;OTParty::ReserveTransNumsForConfirm: Failure: Authorizing agent&#39;s name is empty on this party: %s \n&quot;</span>,
                       <a class="code" href="class_o_t_party.html#ad823a9d89b3d8d0d87bc85114eefcead">GetPartyName</a>().c_str());
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// -----------------------------------------------</span>
    <a class="code" href="class_o_t_agent.html">OTAgent</a> * pMainAgent = <a class="code" href="class_o_t_party.html#af959cf9f0815a145c5a3072eadfaeb14">GetAgent</a>(<a class="code" href="class_o_t_party.html#a374056d26b9a605719f4bd585b4d264c">GetAuthorizingAgentName</a>());

    <span class="keywordflow">if</span> (NULL == pMainAgent)
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;OTParty::ReserveTransNumsForConfirm: Failure: Authorizing agent (%s) not found on this party: %s \n&quot;</span>,
                       <a class="code" href="class_o_t_party.html#a374056d26b9a605719f4bd585b4d264c">GetAuthorizingAgentName</a>().c_str(), <a class="code" href="class_o_t_party.html#ad823a9d89b3d8d0d87bc85114eefcead">GetPartyName</a>().c_str());
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// ----------------------------------------------</span>
    <span class="keywordflow">if</span> (<span class="keyword">false</span> == pMainAgent-&gt;<a class="code" href="class_o_t_agent.html#a06d548dade08b7b10ea6eb25a827ed66">ReserveOpeningTransNum</a>(strServerID))  <span class="comment">// &lt;==============================</span>
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;OTParty::ReserveTransNumsForConfirm: Failure: Authorizing agent (%s) didn&#39;t have an opening transaction #, on party: %s \n&quot;</span>,
                       <a class="code" href="class_o_t_party.html#a374056d26b9a605719f4bd585b4d264c">GetAuthorizingAgentName</a>().c_str(), <a class="code" href="class_o_t_party.html#ad823a9d89b3d8d0d87bc85114eefcead">GetPartyName</a>().c_str());
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// BELOW THIS POINT, the OPENING trans# has been RESERVED and</span>
    <span class="comment">// must be RETRIEVED in the event of failure, using this call:</span>
    <span class="comment">// this-&gt;HarvestAllTransactionNumbers(strServerID);</span>

    <span class="comment">// ****************************************************</span>
    <span class="comment">//</span>
    <span class="comment">// RESERVE THE CLOSING TRANSACTION NUMBER for each asset account, LOCATED ON ITS AUTHORIZED AGENT.</span>
    <span class="comment">// (Do this for each account on this party.)</span>
    <span class="comment">//</span>
    <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_party_account_8hpp.html#ad14c568ca8da6c72a36200f938fd5f59">mapOfPartyAccounts</a>, m_mapPartyAccounts)
    {
        <a class="code" href="class_o_t_party_account.html">OTPartyAccount</a> * pPartyAccount = (*it).second;
        <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pPartyAccount);
        <span class="comment">// -------------------------------</span>

        <span class="keywordflow">if</span> (!pPartyAccount-&gt;<a class="code" href="class_o_t_party_account.html#a86975046b18ac6d6c5841f5ba0befe69">GetAgentName</a>().<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>())
        {
            <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;OTParty::ReserveTransNumsForConfirm: Failure: Authorized agent name is blank for account: %s \n&quot;</span>,
                         pPartyAccount-&gt;<a class="code" href="class_o_t_party_account.html#a56b14b8bc2279fab08cc9c2c754043d4">GetName</a>().<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
            <a class="code" href="class_o_t_party.html#a27f92ee64f928849bde7f31d3c2b4d0a">HarvestAllTransactionNumbers</a>(strServerID);  <span class="comment">// We have to put them back before returning, since this function has failed.</span>
            <span class="keywordflow">return</span> <span class="keyword">false</span>;
        }
        <span class="comment">// -----------------------------------</span>
        <a class="code" href="class_o_t_agent.html">OTAgent</a> * pAgent = <a class="code" href="class_o_t_party.html#af959cf9f0815a145c5a3072eadfaeb14">GetAgent</a>(pPartyAccount-&gt;<a class="code" href="class_o_t_party_account.html#a86975046b18ac6d6c5841f5ba0befe69">GetAgentName</a>().<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());

        <span class="keywordflow">if</span> (NULL == pAgent)
        {
            <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;OTParty::ReserveTransNumsForConfirm: Failure: Unable to locate Authorized agent for account: %s \n&quot;</span>,
                           pPartyAccount-&gt;<a class="code" href="class_o_t_party_account.html#a56b14b8bc2279fab08cc9c2c754043d4">GetName</a>().<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
            <a class="code" href="class_o_t_party.html#a27f92ee64f928849bde7f31d3c2b4d0a">HarvestAllTransactionNumbers</a>(strServerID);  <span class="comment">// We have to put them back before returning, since this function has failed.</span>
            <span class="keywordflow">return</span> <span class="keyword">false</span>;
        }
        <span class="comment">// Below this point, pAgent is good.</span>
        <span class="comment">// -----------------------------------</span>

        <span class="keywordflow">if</span> (<span class="keyword">false</span> == pAgent-&gt;<a class="code" href="class_o_t_agent.html#a0be26af3347949b48498878fdce65ddf">ReserveClosingTransNum</a>(strServerID, *pPartyAccount)) <span class="comment">// &lt;==============================</span>
        {
            <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;OTParty::ReserveTransNumsForConfirm: Failure: Authorizing agent (%s) didn&#39;t have a closing transaction #, on party: %s \n&quot;</span>,
                           <a class="code" href="class_o_t_party.html#a374056d26b9a605719f4bd585b4d264c">GetAuthorizingAgentName</a>().c_str(), <a class="code" href="class_o_t_party.html#ad823a9d89b3d8d0d87bc85114eefcead">GetPartyName</a>().c_str());
            <a class="code" href="class_o_t_party.html#a27f92ee64f928849bde7f31d3c2b4d0a">HarvestAllTransactionNumbers</a>(strServerID);  <span class="comment">// We have to put them back before returning, since this function has failed.</span>
            <span class="keywordflow">return</span> <span class="keyword">false</span>;
        }
        <span class="comment">// BELOW THIS POINT, the CLOSING TRANSACTION # has been reserved for this account,</span>
        <span class="comment">// and MUST BE RETRIEVED in the event of failure.</span>
        <span class="comment">// ----------------------------------</span>
    } <span class="comment">// FOR_EACH</span>

    <span class="comment">// ----------------------------------------------------</span>
    <span class="comment">// BY THIS POINT, we have successfully reserved the Opening Transaction # for the party (from its</span>
    <span class="comment">// authorizing agent) and we have also successfully reserved Closing Transaction #s for EACH ASSET</span>
    <span class="comment">// ACCOUNT, from the authorized agent for each asset account.</span>
    <span class="comment">// Therefore we have reserved ALL the needed transaction #s, so let&#39;s return true.</span>

    <span class="keywordflow">return</span> <span class="keyword">true</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa47dda003a2d39a491ac96582c9679b8"></a><!-- doxytag: member="OTParty::RetrieveNymPointers" ref="aa47dda003a2d39a491ac96582c9679b8" args="(mapOfNyms &amp;map_Nyms_Already_Loaded)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_party.html#aa47dda003a2d39a491ac96582c9679b8">OTParty::RetrieveNymPointers</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_o_t_agent_8hpp.html#ac89892658f6bc83e354078647b704e8f">mapOfNyms</a> &amp;&#160;</td>
          <td class="paramname"><em>map_Nyms_Already_Loaded</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_party_8cpp_source.html#l00976">976</a> of file <a class="el" href="_o_t_party_8cpp_source.html">OTParty.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_agent_8hpp.html#aeed1daf4b84f9a0672d3d16076d68de4">mapOfAgents</a>, m_mapAgents)
    {
        <a class="code" href="class_o_t_agent.html">OTAgent</a> * pAgent = (*it).second;
        <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pAgent);
        <span class="comment">// -------------------------------</span>

        pAgent-&gt;<a class="code" href="class_o_t_agent.html#a86f8664531c96aeaaae9796131ec2f2f">RetrieveNymPointer</a>(map_Nyms_Already_Loaded);
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a7419b9a17e72819156005dd976b2dd1e"></a><!-- doxytag: member="OTParty::SendNoticeToParty" ref="a7419b9a17e72819156005dd976b2dd1e" args="(bool bSuccessMsg, OTPseudonym &amp;theServerNym, const OTIdentifier &amp;theServerID, const int64_t &amp;lNewTransactionNumber, const OTString &amp;strReference, OTString *pstrNote=NULL, OTString *pstrAttachment=NULL, OTPseudonym *pActualNym=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_party.html#a7419b9a17e72819156005dd976b2dd1e">OTParty::SendNoticeToParty</a> </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>bSuccessMsg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;&#160;</td>
          <td class="paramname"><em>theServerNym</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;&#160;</td>
          <td class="paramname"><em>theServerID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int64_t &amp;&#160;</td>
          <td class="paramname"><em>lNewTransactionNumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strReference</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_string.html">OTString</a> *&#160;</td>
          <td class="paramname"><em>pstrNote</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_string.html">OTString</a> *&#160;</td>
          <td class="paramname"><em>pstrAttachment</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> *&#160;</td>
          <td class="paramname"><em>pActualNym</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_party_8cpp_source.html#l01154">1154</a> of file <a class="el" href="_o_t_party_8cpp_source.html">OTParty.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">bool</span> bSuccess = <span class="keyword">false</span>; <span class="comment">// Success is defined as &quot;at least one agent was notified&quot;</span>

    <span class="keywordflow">if</span> (NULL == m_pOwnerAgreement)
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Missing pointer to owner agreement.\n&quot;</span>, __FUNCTION__);
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// ----------------------------------------------</span>
    <span class="keyword">const</span> int64_t lOpeningTransNo = this-&gt;<a class="code" href="class_o_t_party.html#aa11f990dfe9743dd1d8e34af8bfd693a">GetOpeningTransNo</a>();

    <span class="keywordflow">if</span> (lOpeningTransNo &gt; 0)
        <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_agent_8hpp.html#aeed1daf4b84f9a0672d3d16076d68de4">mapOfAgents</a>, m_mapAgents)
        {
            <a class="code" href="class_o_t_agent.html">OTAgent</a> * pAgent = (*it).second;
            <a class="code" href="_o_t_assert_8hpp.html#a033b133f48e61f2b227c52ad2be0c882">OT_ASSERT_MSG</a>(NULL != pAgent, <span class="stringliteral">&quot;Unexpected NULL agent pointer in party map.&quot;</span>);
            <span class="comment">// -------------------------------------</span>
            <span class="keywordflow">if</span> (<span class="keyword">false</span> == pAgent-&gt;<a class="code" href="class_o_t_agent.html#ac08c26cf521a1de25b2e6cd26358d6a2">DropServerNoticeToNymbox</a>(bSuccessMsg,
                                                          theServerNym, theServerID,
                                                          lNewTransactionNumber,
                                                          lOpeningTransNo, <span class="comment">// lInReferenceTo</span>
                                                          strReference, pstrNote, pstrAttachment,
                                                          pActualNym))
                <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Failed dropping server notice to agent&#39;s Nymbox.\n&quot;</span>,
                              __FUNCTION__);
            <span class="keywordflow">else</span>
                bSuccess = <span class="keyword">true</span>;
        }

    <span class="keywordflow">return</span> bSuccess;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a417d0ab00166c2cd8fe2c07c3c218955"></a><!-- doxytag: member="OTParty::Serialize" ref="a417d0ab00166c2cd8fe2c07c3c218955" args="(OTString &amp;strAppend, bool bCalculatingID=false, bool bSpecifyAssetID=false, bool bSpecifyParties=false)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_party.html#a417d0ab00166c2cd8fe2c07c3c218955">OTParty::Serialize</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strAppend</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>bCalculatingID</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>bSpecifyAssetID</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>bSpecifyParties</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_party_8cpp_source.html#l01722">1722</a> of file <a class="el" href="_o_t_party_8cpp_source.html">OTParty.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    strAppend.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;&lt;party\n name=\&quot;%s\&quot;\n&quot;</span>
                          <span class="stringliteral">&quot; ownerType=\&quot;%s\&quot;\n&quot;</span> <span class="comment">// &quot;nym&quot; or &quot;entity&quot;</span>
                          <span class="stringliteral">&quot; ownerID=\&quot;%s\&quot;\n&quot;</span>  <span class="comment">// Entity or Nym ID.  Perhaps should just have both...</span>
                          <span class="stringliteral">&quot; openingTransNo=\&quot;%lld\&quot;\n&quot;</span>  <span class="comment">// fine here.</span>
                          <span class="stringliteral">&quot; signedCopyProvided=\&quot;%s\&quot;\n&quot;</span> <span class="comment">// true/false</span>
                          <span class="stringliteral">&quot; authorizingAgent=\&quot;%s\&quot;\n&quot;</span> <span class="comment">// When an agent activates this contract, it&#39;s HIS opening trans#.</span>
                          <span class="stringliteral">&quot; numAgents=\&quot;%d\&quot;\n&quot;</span> <span class="comment">// integer count.</span>
                          <span class="stringliteral">&quot; numAccounts=\&quot;%d\&quot; &gt;\n\n&quot;</span>, <span class="comment">// integer count.</span>
                          <a class="code" href="class_o_t_party.html#ad823a9d89b3d8d0d87bc85114eefcead">GetPartyName</a>().c_str(),
                          bCalculatingID ? <span class="stringliteral">&quot;&quot;</span> : (m_bPartyIsNym ? <span class="stringliteral">&quot;nym&quot;</span> : <span class="stringliteral">&quot;entity&quot;</span>),
                          (bCalculatingID &amp;&amp;
                          !bSpecifyParties) ? <span class="stringliteral">&quot;&quot;</span> : m_str_owner_id.c_str(),
                          bCalculatingID ? 0 : m_lOpeningTransNo,
                          (!bCalculatingID &amp;&amp; m_strMySignedCopy.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>()) ? <span class="stringliteral">&quot;true&quot;</span> : <span class="stringliteral">&quot;false&quot;</span>,
                          bCalculatingID ? <span class="stringliteral">&quot;&quot;</span> : m_str_authorizing_agent.c_str(),
                          bCalculatingID ? 0 : m_mapAgents.size(),
                          m_mapPartyAccounts.size());
    <span class="comment">// -----------------</span>
    <span class="keywordflow">if</span> (!bCalculatingID)
    {
        <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_agent_8hpp.html#aeed1daf4b84f9a0672d3d16076d68de4">mapOfAgents</a>, m_mapAgents)
        {
            <a class="code" href="class_o_t_agent.html">OTAgent</a> * pAgent = (*it).second;
            <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pAgent);
            pAgent-&gt;<a class="code" href="class_o_t_agent.html#af76ae393d78775d897a7bd53cd277a5d">Serialize</a>(strAppend);
        }
    }
    <span class="comment">// -----------------</span>
    <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_party_account_8hpp.html#ad14c568ca8da6c72a36200f938fd5f59">mapOfPartyAccounts</a>, m_mapPartyAccounts)
    {
        <a class="code" href="class_o_t_party_account.html">OTPartyAccount</a> * pAcct = (*it).second;
        <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pAcct);
        pAcct-&gt;<a class="code" href="class_o_t_party_account.html#a74298ea0fcac141cba140861408ad11e">Serialize</a>(strAppend, bCalculatingID, bSpecifyAssetID);
    }
    <span class="comment">// -----------------</span>
    <span class="keywordflow">if</span> (!bCalculatingID &amp;&amp; m_strMySignedCopy.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>())
    {
        <a class="code" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> ascTemp(m_strMySignedCopy);
        strAppend.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;&lt;mySignedCopy&gt;\n%s&lt;/mySignedCopy&gt;\n\n&quot;</span>, ascTemp.Get());
    }
    <span class="comment">// -----------------</span>
    strAppend.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;&lt;/party&gt;\n\n&quot;</span>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a45b9f2d265bf4717ce325ec4923b7a13"></a><!-- doxytag: member="OTParty::SetAuthorizingAgentName" ref="a45b9f2d265bf4717ce325ec4923b7a13" args="(const std::string str_agent_name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_party.html#a45b9f2d265bf4717ce325ec4923b7a13">OTParty::SetAuthorizingAgentName</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string&#160;</td>
          <td class="paramname"><em>str_agent_name</em></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_party_8hpp_source.html#l00333">333</a> of file <a class="el" href="_o_t_party_8hpp_source.html">OTParty.hpp</a>.</p>
<div class="fragment"><pre class="fragment">{ m_str_authorizing_agent = str_agent_name; }
</pre></div>
</div>
</div>
<a class="anchor" id="a4a5ec299bde05422462ddcb0a66495d4"></a><!-- doxytag: member="OTParty::SetMySignedCopy" ref="a4a5ec299bde05422462ddcb0a66495d4" args="(const OTString &amp;strMyCopy)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_party.html#a4a5ec299bde05422462ddcb0a66495d4">OTParty::SetMySignedCopy</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strMyCopy</em></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_party_8hpp_source.html#l00286">286</a> of file <a class="el" href="_o_t_party_8hpp_source.html">OTParty.hpp</a>.</p>
<div class="fragment"><pre class="fragment">{ m_strMySignedCopy = strMyCopy; }
</pre></div>
</div>
</div>
<a class="anchor" id="a7f587b2f9dc4305e035057fa252b8fa7"></a><!-- doxytag: member="OTParty::SetOpeningTransNo" ref="a7f587b2f9dc4305e035057fa252b8fa7" args="(const int64_t &amp;theNumber)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_party.html#a7f587b2f9dc4305e035057fa252b8fa7">OTParty::SetOpeningTransNo</a> </td>
          <td>(</td>
          <td class="paramtype">const int64_t &amp;&#160;</td>
          <td class="paramname"><em>theNumber</em></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_party_8hpp_source.html#l00290">290</a> of file <a class="el" href="_o_t_party_8hpp_source.html">OTParty.hpp</a>.</p>
<div class="fragment"><pre class="fragment">{ m_lOpeningTransNo = theNumber; }
</pre></div>
</div>
</div>
<a class="anchor" id="a41f870f87f27213da8f4c2996a3d0bf1"></a><!-- doxytag: member="OTParty::SetOwnerAgreement" ref="a41f870f87f27213da8f4c2996a3d0bf1" args="(OTScriptable &amp;theOwner)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_party.html#a41f870f87f27213da8f4c2996a3d0bf1">OTParty::SetOwnerAgreement</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_scriptable.html">OTScriptable</a> &amp;&#160;</td>
          <td class="paramname"><em>theOwner</em></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_party_8hpp_source.html#l00284">284</a> of file <a class="el" href="_o_t_party_8hpp_source.html">OTParty.hpp</a>.</p>
<div class="fragment"><pre class="fragment">{ m_pOwnerAgreement = &amp;theOwner; }
</pre></div>
</div>
</div>
<a class="anchor" id="a6da00ab01a3e03f75894d35f1a4b3980"></a><!-- doxytag: member="OTParty::SetPartyName" ref="a6da00ab01a3e03f75894d35f1a4b3980" args="(const std::string &amp;str_party_name_input)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_party.html#a6da00ab01a3e03f75894d35f1a4b3980">OTParty::SetPartyName</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>str_party_name_input</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_party_8cpp_source.html#l00547">547</a> of file <a class="el" href="_o_t_party_8cpp_source.html">OTParty.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (!<a class="code" href="class_o_t_scriptable.html#a9492afb0aee3340f6fbdffdbdf8d5291">OTScriptable::ValidateName</a>(str_party_name_input))
    {
        <a class="code" href="class_o_t_log.html#a5acd90ac91c2618f395b0ff37ad4f8ee">OTLog::Error</a>(<span class="stringliteral">&quot;OTParty::SetPartyName: Failed: Invalid name was passed in.\n&quot;</span>);
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// -------------------------------------</span>

    <span class="keywordflow">if</span> (NULL == m_pstr_party_name)
        <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != (m_pstr_party_name = <span class="keyword">new</span> std::string));

    *m_pstr_party_name = str_party_name_input;

    <span class="keywordflow">return</span> <span class="keyword">true</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a4b078e0267983b8da083264f504489e1"></a><!-- doxytag: member="OTParty::SignContract" ref="a4b078e0267983b8da083264f504489e1" args="(OTContract &amp;theInput)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_party.html#a4b078e0267983b8da083264f504489e1">OTParty::SignContract</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_contract.html">OTContract</a> &amp;&#160;</td>
          <td class="paramname"><em>theInput</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_party_8cpp_source.html#l01444">1444</a> of file <a class="el" href="_o_t_party_8cpp_source.html">OTParty.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (<a class="code" href="class_o_t_party.html#a374056d26b9a605719f4bd585b4d264c">GetAuthorizingAgentName</a>().size() &lt;= 0)
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;OTParty::%s: Error: Authorizing agent name is blank.\n&quot;</span>, __FUNCTION__);
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// ---------------------------------------------</span>
    <a class="code" href="class_o_t_agent.html">OTAgent</a> * pAgent = <a class="code" href="class_o_t_party.html#af959cf9f0815a145c5a3072eadfaeb14">GetAgent</a>(<a class="code" href="class_o_t_party.html#a374056d26b9a605719f4bd585b4d264c">GetAuthorizingAgentName</a>());

    <span class="keywordflow">if</span> (NULL == pAgent)
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;OTParty::%s: Error: Unable to find Authorizing agent (%s) for party: %s.\n&quot;</span>,
                      __FUNCTION__, <a class="code" href="class_o_t_party.html#a374056d26b9a605719f4bd585b4d264c">GetAuthorizingAgentName</a>().c_str(), <a class="code" href="class_o_t_party.html#ad823a9d89b3d8d0d87bc85114eefcead">GetPartyName</a>().c_str());
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }

    <span class="keywordflow">return</span> pAgent-&gt;<a class="code" href="class_o_t_agent.html#a0749f394cfbabd6a64942bbf53af0e7b">SignContract</a>(theInput);
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa047a5d694ee951edf7bc7fc8a686d82"></a><!-- doxytag: member="OTParty::VerifyAccountsWithTheirAgents" ref="aa047a5d694ee951edf7bc7fc8a686d82" args="(OTPseudonym &amp;theSignerNym, const OTString &amp;strServerID, const bool bBurnTransNo=false)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_party.html#aa047a5d694ee951edf7bc7fc8a686d82">OTParty::VerifyAccountsWithTheirAgents</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;&#160;</td>
          <td class="paramname"><em>theSignerNym</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strServerID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const bool&#160;</td>
          <td class="paramname"><em>bBurnTransNo</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_party_8cpp_source.html#l01406">1406</a> of file <a class="el" href="_o_t_party_8cpp_source.html">OTParty.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != m_pOwnerAgreement);

    <span class="keywordtype">bool</span> bAllSuccessful = <span class="keyword">true</span>;

    <span class="comment">// By this time this function is called, ALL the Nyms and Asset Accounts should ALREADY</span>
    <span class="comment">// be loaded up in memory!</span>
    <span class="comment">//</span>
    <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_party_account_8hpp.html#ad14c568ca8da6c72a36200f938fd5f59">mapOfPartyAccounts</a>, m_mapPartyAccounts)
    {
        <span class="keyword">const</span> std::string str_acct_name = (*it).first;
        <a class="code" href="class_o_t_party_account.html">OTPartyAccount</a> * pAcct = (*it).second;
        <a class="code" href="_o_t_assert_8hpp.html#a033b133f48e61f2b227c52ad2be0c882">OT_ASSERT_MSG</a>(NULL != pAcct, <span class="stringliteral">&quot;Unexpected NULL partyaccount pointer in party map.&quot;</span>);
        <span class="comment">// -------------------------------------</span>
        <span class="keyword">const</span> <span class="keywordtype">bool</span> bVerified = m_pOwnerAgreement-&gt;<a class="code" href="class_o_t_scriptable.html#a1cd358deb75bfc2d39cbba6a4a4799f6">VerifyPartyAcctAuthorization</a>(*pAcct,          <span class="comment">// The party is assumed to have been verified already via VerifyPartyAuthorization()</span>
                                                                               theSignerNym,    <span class="comment">// For verifying signature on the authorizing Nym and for accts as well.</span>
                                                                               strServerID,     <span class="comment">// For verifying issued num, need the serverID the # goes with.</span>
                                                                               bBurnTransNo);   <span class="comment">// bBurnTransNo=false ) // In OTServer::VerifySmartContract(), it not only wants to verify the closing # is properly issued, but it additionally wants to see that it hasn&#39;t been USED yet -- AND it wants to burn it, so it can&#39;t be used again!  This bool allows you to tell the function whether or not to do that.</span>
        <span class="keywordflow">if</span> (<span class="keyword">false</span> == bVerified)     <span class="comment">// This mechanism is here because we still want to let them ALL verify, before returning false.</span>
        {
            bAllSuccessful = <span class="keyword">false</span>; <span class="comment">// That is, we don&#39;t want to return at the first failure, but let them all go through. (This is in order to keep the output consistent.)</span>
            <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;OTParty::%s: Ownership, agency, or potentially &quot;</span>
                           <span class="stringliteral">&quot;closing transaction # failed to verify on account: %s \n&quot;</span>,
                           __FUNCTION__, str_acct_name.c_str());
        }
    }
    <span class="comment">// -------------</span>

    <span class="keywordflow">return</span> bAllSuccessful;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a34d26cfe50e7065718c0360b42ca20ef"></a><!-- doxytag: member="OTParty::VerifyOwnershipOfAccount" ref="a34d26cfe50e7065718c0360b42ca20ef" args="(const OTAccount &amp;theAccount) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_party.html#a34d26cfe50e7065718c0360b42ca20ef">OTParty::VerifyOwnershipOfAccount</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_account.html">OTAccount</a> &amp;&#160;</td>
          <td class="paramname"><em>theAccount</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_party_8cpp_source.html#l01031">1031</a> of file <a class="el" href="_o_t_party_8cpp_source.html">OTParty.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (this-&gt;<a class="code" href="class_o_t_party.html#a1c2f66b28bd7062505430fcbe18f9c12">IsNym</a>()) <span class="comment">// For those cases where the party is actually just a solitary Nym (not an entity.)</span>
    {
        <span class="keywordtype">bool</span> bNymID = <span class="keyword">false</span>;
        std::string str_nym_id = this-&gt;<a class="code" href="class_o_t_party.html#a22ca91a1414fd1457f192d91fe740d80">GetNymID</a>(&amp;bNymID); <span class="comment">// If the party is a Nym, this is the Nym&#39;s ID. Otherwise this is false.</span>

        <span class="keywordflow">if</span> (!bNymID || (str_nym_id.size() &lt;= 0))
        {
            <a class="code" href="class_o_t_log.html#a5acd90ac91c2618f395b0ff37ad4f8ee">OTLog::Error</a>(<span class="stringliteral">&quot; OTParty::VerifyOwnershipOfAccount: Although party is a Nym, unable to retrieve NymID!\n&quot;</span>);
            <span class="keywordflow">return</span> <span class="keyword">false</span>;
        }

        <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> thePartyNymID(str_nym_id.c_str());

        <span class="keywordflow">return</span> theAccount.<a class="code" href="class_o_t_account.html#a4b6aa9e72c2ad3e395f9fe6cea00dd4d">VerifyOwnerByID</a>(thePartyNymID);
    }
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (this-&gt;<a class="code" href="class_o_t_party.html#a89552b5fb6769fd7ad69deedb633653f">IsEntity</a>())
        <a class="code" href="class_o_t_log.html#a5acd90ac91c2618f395b0ff37ad4f8ee">OTLog::Error</a>(<span class="stringliteral">&quot;OTParty::VerifyOwnershipOfAccount: Error: Entities have not been implemented yet, &quot;</span>
                     <span class="stringliteral">&quot;but somehow this party is an entity.\n&quot;</span>);
    <span class="keywordflow">else</span>
        <a class="code" href="class_o_t_log.html#a5acd90ac91c2618f395b0ff37ad4f8ee">OTLog::Error</a>(<span class="stringliteral">&quot;OTParty::VerifyOwnershipOfAccount: Error: Unknown party type.\n&quot;</span>);

    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>include/otlib/<a class="el" href="_o_t_party_8hpp_source.html">OTParty.hpp</a></li>
<li>src/otlib/<a class="el" href="_o_t_party_8cpp_source.html">OTParty.cpp</a></li>
</ul>
</div><!-- contents -->
</div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="class_o_t_party.html">OTParty</a>      </li>

    <li class="footer">Generated on Wed May 21 2014 11:26:14 for Open-Transactions by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.6.1 </li>
   </ul>
 </div>


</body>
</html>
