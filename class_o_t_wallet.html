<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Open-Transactions: OTWallet Class Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Open-Transactions
   &#160;<span id="projectnumber">master/1066fb4910a63ee3f7de8e0807fee3eb663b66c7</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('class_o_t_wallet.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a>  </div>
  <div class="headertitle">
<div class="title">OTWallet Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<!-- doxytag: class="OTWallet" -->
<p><code>#include &lt;<a class="el" href="_o_t_wallet_8hpp_source.html">OTWallet.hpp</a>&gt;</code></p>

<p><a href="class_o_t_wallet-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_wallet.html#ae3b33a9836949f1a4ca8bbc7bd73f40a">OTWallet</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_wallet.html#af337e32053cee506ac496fa1975b1b92">~OTWallet</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_wallet.html#a72d644a855faf67b1fc2c52c112f2a0e">Release</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_wallet.html#acae9c183e9f33e24c5a1466a6e72b966">Release_Wallet</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_wallet.html#a9972dc0c6da96758f41ff3980a13146c">IsNymOnCachedKey</a> (const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;needle) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_wallet.html#a59daeb8ce8f92530c5ddb4fcd1dde7d4">ConvertNymToCachedKey</a> (<a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;theNym)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT <a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_wallet.html#a97c9e8ef43e629dfad894e2c5fbc4073">GetOrLoadNym</a> (const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;NYM_ID, const bool bChecking=false, const char *szFuncName=NULL, <a class="el" href="class_o_t_password_data.html">OTPasswordData</a> *pPWData=NULL)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT <a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_wallet.html#ad8d73d7ddef1194c1c24f173190da9f3">GetOrLoadPublicNym</a> (const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;NYM_ID, const char *szFuncName=NULL)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT <a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_wallet.html#a7ca619a0f6ac4fa8f59efc1a518a297c">GetOrLoadPrivateNym</a> (const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;NYM_ID, const bool bChecking=false, const char *szFuncName=NULL, <a class="el" href="class_o_t_password_data.html">OTPasswordData</a> *pPWData=NULL, <a class="el" href="class_o_t_password.html">OTPassword</a> *pImportPassword=NULL)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT <a class="el" href="class_o_t_account.html">OTAccount</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_wallet.html#ab7a6c57d91a0c93be57afe78c56e86a7">LoadAccount</a> (<a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;theNym, const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;ACCT_ID, const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;SERVER_ID, const char *szFuncName=NULL)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT <a class="el" href="class_o_t_account.html">OTAccount</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_wallet.html#ad3e876943833406d7819ce4c34b74647">GetOrLoadAccount</a> (<a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;theNym, const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;ACCT_ID, const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;SERVER_ID, const char *szFuncName=NULL)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_wallet.html#ad98f3386c700710d76e44580c59c505a">GetNymCount</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_wallet.html#a4fe8fefbb7d541cab17d920259cd81b7">GetServerCount</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_wallet.html#a32deda2a4c48baf8e339796f65499f3e">GetAssetTypeCount</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_wallet.html#ac41d592707a250be4b86d23b7a3ea552">GetAccountCount</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_wallet.html#a146e2339010f1e6b8b9cba252c8d3213">GetNym</a> (const int32_t iIndex, <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;NYM_ID, <a class="el" href="class_o_t_string.html">OTString</a> &amp;NYM_NAME)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_wallet.html#aad6abb5e5fd19ffd69a9b6f0eb75f1c7">GetServer</a> (const int32_t iIndex, <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;THE_ID, <a class="el" href="class_o_t_string.html">OTString</a> &amp;THE_NAME)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_wallet.html#a5f328a7ca7030125cc121b5062e0627a">GetAssetType</a> (const int32_t iIndex, <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;THE_ID, <a class="el" href="class_o_t_string.html">OTString</a> &amp;THE_NAME)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_wallet.html#aee1809973c356a82e9c0f80d201668f4">GetAccount</a> (const int32_t iIndex, <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;THE_ID, <a class="el" href="class_o_t_string.html">OTString</a> &amp;THE_NAME)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_wallet.html#aed7e71a27cd1442399f16acd6b191372">DisplayStatistics</a> (<a class="el" href="class_o_t_string.html">OTString</a> &amp;strOutput)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT <a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_wallet.html#aab65a5710311cc6eeb9fbd0d7f881f0e">GetNymByID</a> (const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;NYM_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT <a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_wallet.html#a66e64e6ea0c2a9d74099b83b8fe87637">GetNymByIDPartialMatch</a> (const std::string PARTIAL_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_wallet.html#ad925633d8ba2319948b466ca0f0dc438">AddServerContract</a> (const <a class="el" href="class_o_t_server_contract.html">OTServerContract</a> &amp;theContract)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT <a class="el" href="class_o_t_server_contract.html">OTServerContract</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_wallet.html#ae897619f652a0d3d9fba99a8bc747993">GetServerContract</a> (const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;SERVER_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT <a class="el" href="class_o_t_server_contract.html">OTServerContract</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_wallet.html#a2c08b5bd12930371f99e793762819dd5">GetServerContractPartialMatch</a> (const std::string PARTIAL_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_wallet.html#acb570de733658a4ad24756dde0f22a34">AddNym</a> (const <a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;theNym)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_wallet.html#ad9d3208fb49a461c1bc6310ea438cd6a">AddAccount</a> (const <a class="el" href="class_o_t_account.html">OTAccount</a> &amp;theAcct)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_wallet.html#aec0dc4e66d6bc87cbec6fc4c0e3851f7">AddAssetContract</a> (const <a class="el" href="class_o_t_asset_contract.html">OTAssetContract</a> &amp;theContract)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT <a class="el" href="class_o_t_asset_contract.html">OTAssetContract</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_wallet.html#a4daee51036b24439e687383a6c66c6f7">GetAssetContract</a> (const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;theContractID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT <a class="el" href="class_o_t_asset_contract.html">OTAssetContract</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_wallet.html#aaab24113b89af3d58010e308bf2dce8f">GetAssetContractPartialMatch</a> (const std::string PARTIAL_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_wallet.html#a6e8a382507e28a953b97572f6f08fda5">VerifyAssetAccount</a> (<a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;theNym, <a class="el" href="class_o_t_account.html">OTAccount</a> &amp;theAcct, const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;SERVER_ID, const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strAcctID, const char *szFuncName=NULL)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT <a class="el" href="class_o_t_account.html">OTAccount</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_wallet.html#ae8b1d57dc221ae87f1bbb18f38f0ce00">GetAccount</a> (const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;theAccountID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT <a class="el" href="class_o_t_account.html">OTAccount</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_wallet.html#ab25801b4fc2815bd397b523acf65c2d6">GetAccountPartialMatch</a> (const std::string PARTIAL_ID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT <a class="el" href="class_o_t_account.html">OTAccount</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_wallet.html#ae4cd7fef3caaf5dec83530ecabbdddb8">GetIssuerAccount</a> (const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;theAssetTypeID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_wallet.html#a098029976b57c592f220ae6bf0cc3822">AddPendingWithdrawal</a> (const <a class="el" href="class_o_t_purse.html">OTPurse</a> &amp;thePurse)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_wallet.html#a8a65354fe09bb415ba477d4a565b842f">RemovePendingWithdrawal</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_o_t_purse.html">OTPurse</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_wallet.html#a08f39d74540ac2c100ee28d8689af969">GetPendingWithdrawal</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_wallet.html#a2932e7c8d6b5d7764707e653a3c2f216">LoadWallet</a> (const char *szFilename=NULL)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_wallet.html#aa16fe70ac5913e3223f994d7dc8a4831">SaveWallet</a> (const char *szFilename=NULL)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_wallet.html#a17e01f4969a795d6f304635e45973916">SaveContract</a> (<a class="el" href="class_o_t_string.html">OTString</a> &amp;strContract)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_wallet.html#a54362d788dc7c322796f37be9256428f">SignContractWithFirstNymOnList</a> (<a class="el" href="class_o_t_contract.html">OTContract</a> &amp;theContract)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_wallet.html#a1eae600871447c75a3ddd155c86674a3">RemoveAssetContract</a> (const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;theTargetID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_wallet.html#ab739c1b18f6dcc6958cfd1ac53f728d8">RemoveServerContract</a> (const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;theTargetID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_wallet.html#abc47515d8104ba094bab2417d66a5161">RemoveAccount</a> (const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;theTargetID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_wallet.html#a7dd1cf4ba4922eacc2c3c81d21dd07dc">RemoveNym</a> (const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;theTargetID)</td></tr>
<tr><td colspan="2"><h2><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_o_t_string.html">OTString</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_wallet.html#adb10475854eb56eb47a091cf265a21a8">m_strFilename</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_o_t_string.html">OTString</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_wallet.html#a62d1c1f3c54def4cb4f0e1c011da7050">m_strDataFolder</a></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock">
<p>Definition at line <a class="el" href="_o_t_wallet_8hpp_source.html#l00157">157</a> of file <a class="el" href="_o_t_wallet_8hpp_source.html">OTWallet.hpp</a>.</p>
</div><hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="ae3b33a9836949f1a4ca8bbc7bd73f40a"></a><!-- doxytag: member="OTWallet::OTWallet" ref="ae3b33a9836949f1a4ca8bbc7bd73f40a" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_wallet.html#ae3b33a9836949f1a4ca8bbc7bd73f40a">OTWallet::OTWallet</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_wallet_8cpp_source.html#l00146">146</a> of file <a class="el" href="_o_t_wallet_8cpp_source.html">OTWallet.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                   : <a class="code" href="class_o_t_wallet.html#a62d1c1f3c54def4cb4f0e1c011da7050">m_strDataFolder</a>(<a class="code" href="class_o_t_data_folder.html#a3cc847ac0fc0e30eb0f37dc8ecc9cec3">OTDataFolder::Get</a>())
{
    m_pWithdrawalPurse = NULL;
}
</pre></div>
</div>
</div>
<a class="anchor" id="af337e32053cee506ac496fa1975b1b92"></a><!-- doxytag: member="OTWallet::~OTWallet" ref="af337e32053cee506ac496fa1975b1b92" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_wallet.html#af337e32053cee506ac496fa1975b1b92">OTWallet::~OTWallet</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_wallet_8cpp_source.html#l00152">152</a> of file <a class="el" href="_o_t_wallet_8cpp_source.html">OTWallet.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{   
    <a class="code" href="class_o_t_wallet.html#acae9c183e9f33e24c5a1466a6e72b966">Release_Wallet</a>();
}
</pre></div>
</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="ad9d3208fb49a461c1bc6310ea438cd6a"></a><!-- doxytag: member="OTWallet::AddAccount" ref="ad9d3208fb49a461c1bc6310ea438cd6a" args="(const OTAccount &amp;theAcct)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_wallet.html#ad9d3208fb49a461c1bc6310ea438cd6a">OTWallet::AddAccount</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_account.html">OTAccount</a> &amp;&#160;</td>
          <td class="paramname"><em>theAcct</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_wallet_8cpp_source.html#l00571">571</a> of file <a class="el" href="_o_t_wallet_8cpp_source.html">OTWallet.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>  ACCOUNT_ID(theAcct);
    
    <span class="comment">// See if there is already an account object on this wallet with the same ID</span>
    <span class="comment">// (Otherwise if we don&#39;t delete it, this would be a memory leak.)</span>
    <span class="comment">// Should use a smart pointer.</span>
    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> anAccountID;
    
    <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_agent_8hpp.html#abd4942716d546c8d42670619a03ef99e">mapOfAccounts</a>, m_mapAccounts)
    {
        <a class="code" href="class_o_t_account.html">OTAccount</a> * pAccount = (*it).second;
        <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pAccount);
        
        pAccount-&gt;<a class="code" href="class_o_t_contract.html#acf77d2db6da3904aa8b03e7b87c02e4e">GetIdentifier</a>(anAccountID);
        
        <span class="keywordflow">if</span> (anAccountID == ACCOUNT_ID)
        {
            <a class="code" href="class_o_t_string.html">OTString</a> strName;
            pAccount-&gt;<a class="code" href="class_o_t_contract.html#a1afca402333b7c546104d5aa48c8efd9">GetName</a>(strName);
            
            <span class="keywordflow">if</span> (strName.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>())
                ((<a class="code" href="class_o_t_account.html">OTAccount</a> &amp;)theAcct).SetName(strName);
                        
            m_mapAccounts.erase(it);
            <span class="keyword">delete</span> pAccount; pAccount = NULL;
            
            <span class="keywordflow">break</span>;
        }
    }
    
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a>  strAcctID(ACCOUNT_ID);
    m_mapAccounts[strAcctID.Get()] = (<a class="code" href="class_o_t_account.html">OTAccount</a> *)&amp;theAcct;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aec0dc4e66d6bc87cbec6fc4c0e3851f7"></a><!-- doxytag: member="OTWallet::AddAssetContract" ref="aec0dc4e66d6bc87cbec6fc4c0e3851f7" args="(const OTAssetContract &amp;theContract)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_wallet.html#aec0dc4e66d6bc87cbec6fc4c0e3851f7">OTWallet::AddAssetContract</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_asset_contract.html">OTAssetContract</a> &amp;&#160;</td>
          <td class="paramname"><em>theContract</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_wallet_8cpp_source.html#l00768">768</a> of file <a class="el" href="_o_t_wallet_8cpp_source.html">OTWallet.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>    CONTRACT_ID(theContract);
    <a class="code" href="class_o_t_string.html">OTString</a>        STR_CONTRACT_ID(CONTRACT_ID);
    
    <a class="code" href="class_o_t_asset_contract.html">OTAssetContract</a> * pContract = <a class="code" href="class_o_t_wallet.html#a4daee51036b24439e687383a6c66c6f7">GetAssetContract</a>(CONTRACT_ID);
    
    <span class="keywordflow">if</span> (pContract)
    {
        <a class="code" href="class_o_t_log.html#a5acd90ac91c2618f395b0ff37ad4f8ee">OTLog::Error</a>(<span class="stringliteral">&quot;Error: Attempt to add Asset Contract but it is already in the wallet.\n&quot;</span>);
        
        <span class="keyword">delete</span> &amp;theContract; <span class="comment">// I have to do this, since the return value is void, the caller MUST assume I took ownership.</span>
    }
    <span class="keywordflow">else</span> 
    {
        m_mapContracts[STR_CONTRACT_ID.Get()] = &amp;(<span class="keyword">const_cast&lt;</span><a class="code" href="class_o_t_asset_contract.html">OTAssetContract</a> &amp;<span class="keyword">&gt;</span>(theContract));

        <a class="code" href="class_o_t_log.html#a1f7549d776ee919dcb6517f611ded015">OTLog::Output</a>(2, <span class="stringliteral">&quot;Saving asset contract to disk...\n&quot;</span>);
        (<span class="keyword">const_cast&lt;</span><a class="code" href="class_o_t_asset_contract.html">OTAssetContract</a> &amp;<span class="keyword">&gt;</span>(theContract)).SaveToContractFolder();

        <a class="code" href="class_o_t_wallet.html#aa16fe70ac5913e3223f994d7dc8a4831">SaveWallet</a>();
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="acb570de733658a4ad24756dde0f22a34"></a><!-- doxytag: member="OTWallet::AddNym" ref="acb570de733658a4ad24756dde0f22a34" args="(const OTPseudonym &amp;theNym)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_wallet.html#acb570de733658a4ad24756dde0f22a34">OTWallet::AddNym</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;&#160;</td>
          <td class="paramname"><em>theNym</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_wallet_8cpp_source.html#l00531">531</a> of file <a class="el" href="_o_t_wallet_8cpp_source.html">OTWallet.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>  NYM_ID(theNym);
    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> aNymID;
    
    <a class="code" href="class_o_t_string.html">OTString</a> strName;
    
    <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_agent_8hpp.html#ac89892658f6bc83e354078647b704e8f">mapOfNyms</a>, m_mapNyms)
    {   
        <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pNym = (*it).second;
        <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pNym);
        
        pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#a1775c7aedd0dd25b2faf3f78dcccabe7">GetIdentifier</a>(aNymID);
        
        <span class="keywordflow">if</span> (aNymID == NYM_ID)
        {
            <a class="code" href="class_o_t_string.html">OTString</a> strTemp(pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#a42e63697c3c3b1bdb526ee7990a9c0e7">GetNymName</a>());
            strName = strTemp; <span class="comment">// todo optimize. currently am fixing &quot;blank nym name&quot; bug.</span>
                        
            m_mapNyms.erase(it);
            
            <span class="comment">// Don&#39;t delete it if they are physically the same object.</span>
            <span class="comment">// (Versus each being separate copies of the same object.)</span>
            <span class="comment">//</span>
            <span class="keywordflow">if</span> (&amp;theNym != pNym)
                <span class="keyword">delete</span> pNym;
            pNym = NULL;
            
            <span class="keywordflow">break</span>;
        }
    }
    <span class="comment">// -----------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a>  strNymID(NYM_ID);
    m_mapNyms[strNymID.Get()] = (<a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> *)&amp;theNym; <span class="comment">// Insert to wallet&#39;s list of Nyms.</span>
    <span class="comment">// -----------------------    </span>
    <span class="keywordflow">if</span> (strName.Exists())
        (const_cast&lt;OTPseudonym &amp;&gt;(theNym)).SetNymName(strName);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a098029976b57c592f220ae6bf0cc3822"></a><!-- doxytag: member="OTWallet::AddPendingWithdrawal" ref="a098029976b57c592f220ae6bf0cc3822" args="(const OTPurse &amp;thePurse)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_wallet.html#a098029976b57c592f220ae6bf0cc3822">OTWallet::AddPendingWithdrawal</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_purse.html">OTPurse</a> &amp;&#160;</td>
          <td class="paramname"><em>thePurse</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_wallet_8cpp_source.html#l00226">226</a> of file <a class="el" href="_o_t_wallet_8cpp_source.html">OTWallet.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// TODO maintain a list here (I don&#39;t know why, the server response is nearly</span>
    <span class="comment">// instant and then it&#39;s done.)</span>
    
    <span class="comment">// TODO notice I don&#39;t check the pointer here to see if it&#39;s already set, I </span>
    <span class="comment">// just start using it.. Fix that.</span>
    m_pWithdrawalPurse = (<a class="code" href="class_o_t_purse.html">OTPurse</a> *)&amp;thePurse;
}   <span class="comment">// TODO WARNING: If this data is lost before the transaction is completed,</span>
</pre></div>
</div>
</div>
<a class="anchor" id="ad925633d8ba2319948b466ca0f0dc438"></a><!-- doxytag: member="OTWallet::AddServerContract" ref="ad925633d8ba2319948b466ca0f0dc438" args="(const OTServerContract &amp;theContract)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_wallet.html#ad925633d8ba2319948b466ca0f0dc438">OTWallet::AddServerContract</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_server_contract.html">OTServerContract</a> &amp;&#160;</td>
          <td class="paramname"><em>theContract</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_wallet_8cpp_source.html#l00741">741</a> of file <a class="el" href="_o_t_wallet_8cpp_source.html">OTWallet.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>    CONTRACT_ID(theContract);
    <a class="code" href="class_o_t_string.html">OTString</a>        STR_CONTRACT_ID(CONTRACT_ID);
    
    <a class="code" href="class_o_t_server_contract.html">OTServerContract</a> * pContract = <a class="code" href="class_o_t_wallet.html#ae897619f652a0d3d9fba99a8bc747993">GetServerContract</a>(CONTRACT_ID);
    
    <span class="keywordflow">if</span> (pContract)
    {
        <a class="code" href="class_o_t_log.html#a5acd90ac91c2618f395b0ff37ad4f8ee">OTLog::Error</a>(<span class="stringliteral">&quot;Error: Attempt to add Server Contract but it is already in the wallet.\n&quot;</span>);
    
        <span class="keyword">delete</span> &amp;theContract; <span class="comment">// I have to do this, since the return value is void, the caller MUST assume I took ownership.</span>
    }
    <span class="keywordflow">else</span> 
    {
        m_mapServers[STR_CONTRACT_ID.Get()] = &amp;(<span class="keyword">const_cast&lt;</span><a class="code" href="class_o_t_server_contract.html">OTServerContract</a> &amp;<span class="keyword">&gt;</span>(theContract));
        
        <a class="code" href="class_o_t_log.html#a1f7549d776ee919dcb6517f611ded015">OTLog::Output</a>(2, <span class="stringliteral">&quot;Saving server contract to disk...\n&quot;</span>);
        (<span class="keyword">const_cast&lt;</span><a class="code" href="class_o_t_server_contract.html">OTServerContract</a> &amp;<span class="keyword">&gt;</span>(theContract)).SaveToContractFolder();
        
        <a class="code" href="class_o_t_wallet.html#aa16fe70ac5913e3223f994d7dc8a4831">SaveWallet</a>();
    }   
}
</pre></div>
</div>
</div>
<a class="anchor" id="a59daeb8ce8f92530c5ddb4fcd1dde7d4"></a><!-- doxytag: member="OTWallet::ConvertNymToCachedKey" ref="a59daeb8ce8f92530c5ddb4fcd1dde7d4" args="(OTPseudonym &amp;theNym)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_wallet.html#a59daeb8ce8f92530c5ddb4fcd1dde7d4">OTWallet::ConvertNymToCachedKey</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;&#160;</td>
          <td class="paramname"><em>theNym</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_wallet_8cpp_source.html#l01747">1747</a> of file <a class="el" href="_o_t_wallet_8cpp_source.html">OTWallet.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// If he&#39;s not ALREADY on the master key...</span>
    <span class="comment">//</span>
    <span class="keywordflow">if</span> (<span class="keyword">false</span> == <a class="code" href="class_o_t_wallet.html#a9972dc0c6da96758f41ff3980a13146c">IsNymOnCachedKey</a>(theNym.<a class="code" href="class_o_t_pseudonym.html#a8167f1e2d532ab18227c5c170922c611">GetConstID</a>()))
    {        
        <span class="keywordtype">bool</span> bConverted = <span class="keyword">false</span>;
        <span class="comment">// **************************************************************************</span>
        <span class="comment">// The Nym has credentials.</span>
        <span class="comment">// </span>
        <span class="keywordflow">if</span> (theNym.<a class="code" href="class_o_t_pseudonym.html#a6ae670b44bc6728da06141c885e6c7e9">GetMasterCredentialCount</a>() &gt; 0)
        {
            <a class="code" href="class_o_t_string.html">OTString</a>     strNymID, strCredList, strOutput;
            <a class="code" href="_o_t_string_8hpp.html#a7ec7839682b097a5c5b5c5125046c82b">mapOfStrings</a> mapCredFiles;
            
            theNym.<a class="code" href="class_o_t_pseudonym.html#a1775c7aedd0dd25b2faf3f78dcccabe7">GetIdentifier</a>(strNymID);
            theNym.<a class="code" href="class_o_t_pseudonym.html#a508533f6ccb558e21bc205d3463a1aa5">GetPrivateCredentials</a>(strCredList, &amp;mapCredFiles);
            <span class="comment">// --------------------------------------</span>
            <a class="code" href="class_o_t_string.html">OTString</a> strFilename;
            strFilename.<a class="code" href="class_o_t_string.html#af1c861f21033a1d583b3cb12f952422e">Format</a>(<span class="stringliteral">&quot;%s.cred&quot;</span>, strNymID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
            <span class="comment">// --------------------------------------</span>
            <a class="code" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> ascArmor(strCredList);
            <span class="keywordflow">if</span> (ascArmor.Exists() &amp;&amp;
                ascArmor.WriteArmoredString(strOutput, <span class="stringliteral">&quot;CREDENTIAL LIST&quot;</span>) &amp;&amp; <span class="comment">// bEscaped=false by default.</span>
                strOutput.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>())
            {
                <span class="keywordflow">if</span> (<span class="keyword">false</span> == <a class="code" href="namespace_o_t_d_b.html#a7ec0a905bba2c1c8ba5b1e873e12eab4">OTDB::StorePlainString</a>(strOutput.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(), <a class="code" href="class_o_t_folders.html#a4e94eac1e796da34baf00556042202f0">OTFolders::Credential</a>().<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(), strFilename.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>()))
                {
                    <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Failure trying to store %s credential list for Nym: %s\n&quot;</span>,
                                  __FUNCTION__, theNym.<a class="code" href="class_o_t_pseudonym.html#a27b67139a33989a0db8ca027f03b3257">HasPrivateKey</a>() ? <span class="stringliteral">&quot;private&quot;</span> : <span class="stringliteral">&quot;public&quot;</span>, strNymID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
                    <span class="keywordflow">return</span> <span class="keyword">false</span>;
                }
            }
            
            <span class="comment">// Here we do the actual credentials.</span>
            <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_string_8hpp.html#a7ec7839682b097a5c5b5c5125046c82b">mapOfStrings</a>, mapCredFiles)
            {
                std::string str_cred_id  = (*it).first;
                <a class="code" href="class_o_t_string.html">OTString</a>    strCredential((*it).second);
                <span class="comment">// ------------------------</span>
                strOutput.<a class="code" href="class_o_t_string.html#abef4b21b2170468705c58d64212d7257">Release</a>();
                <a class="code" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> ascLoopArmor(strCredential);
                <span class="keywordflow">if</span> (ascLoopArmor.Exists() &amp;&amp;
                    ascLoopArmor.WriteArmoredString(strOutput, <span class="stringliteral">&quot;CREDENTIAL&quot;</span>) &amp;&amp; <span class="comment">// bEscaped=false by default.</span>
                    strOutput.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>())
                {
                    <span class="keywordflow">if</span> (<span class="keyword">false</span> == <a class="code" href="namespace_o_t_d_b.html#a7ec0a905bba2c1c8ba5b1e873e12eab4">OTDB::StorePlainString</a>(strOutput.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(), <a class="code" href="class_o_t_folders.html#a4e94eac1e796da34baf00556042202f0">OTFolders::Credential</a>().<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(), strNymID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(), str_cred_id))
                    {
                        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Failure trying to store %s credential for Nym: %s\n&quot;</span>,
                                      __FUNCTION__, theNym.<a class="code" href="class_o_t_pseudonym.html#a27b67139a33989a0db8ca027f03b3257">HasPrivateKey</a>() ? <span class="stringliteral">&quot;private&quot;</span> : <span class="stringliteral">&quot;public&quot;</span>, strNymID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
                        <span class="keywordflow">return</span> <span class="keyword">false</span>;
                    }
                }
                <span class="comment">// ----------------------------------------------------</span>
            }
            bConverted = <span class="keyword">true</span>;
        }
        <span class="comment">// **************************************************************************</span>
        <span class="keywordflow">else</span> <span class="comment">// Kicking it old-school. (No credentials.)</span>
        {
            <a class="code" href="class_o_t_string.html">OTString</a> strReason(<span class="stringliteral">&quot;Converting Nym to cached master key.&quot;</span>);
            bConverted = theNym.<a class="code" href="class_o_t_pseudonym.html#a395ce52dec4e07f04fb66521897c9cf2">Savex509CertAndPrivateKey</a>(<span class="keyword">true</span>, &amp;strReason);
        }
        <span class="comment">// **************************************************************************</span>
        
        <span class="keywordflow">if</span> (bConverted)
        {
            m_setNymsOnCachedKey.insert(theNym.<a class="code" href="class_o_t_pseudonym.html#a8167f1e2d532ab18227c5c170922c611">GetConstID</a>());
        }
        
        <span class="keywordflow">return</span> bConverted;
    } <span class="comment">// This block only occurs if Nym is not ALREADY on the wallet&#39;s list of Nym using the wallet&#39;s cached master key.</span>
    
    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aed7e71a27cd1442399f16acd6b191372"></a><!-- doxytag: member="OTWallet::DisplayStatistics" ref="aed7e71a27cd1442399f16acd6b191372" args="(OTString &amp;strOutput)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_wallet.html#aed7e71a27cd1442399f16acd6b191372">OTWallet::DisplayStatistics</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strOutput</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_wallet_8cpp_source.html#l00465">465</a> of file <a class="el" href="_o_t_wallet_8cpp_source.html">OTWallet.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    strOutput.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;\n-------------------------------------------------\n&quot;</span>);
    strOutput.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;WALLET STATISTICS:\n&quot;</span>);
    
    strOutput.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;\nPSEUDONYM(s):\n\n&quot;</span>);

    <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_agent_8hpp.html#ac89892658f6bc83e354078647b704e8f">mapOfNyms</a>, m_mapNyms)
    {       
        <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pNym = (*it).second;
        <a class="code" href="_o_t_assert_8hpp.html#a033b133f48e61f2b227c52ad2be0c882">OT_ASSERT_MSG</a>((NULL != pNym), <span class="stringliteral">&quot;NULL pseudonym pointer in OTWallet::m_mapNyms, OTWallet::DisplayStatistics.&quot;</span>);

        pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#aaded4e78ed9fa9960ee67a391c793b9e">DisplayStatistics</a>(strOutput);
    }
    
    <span class="comment">// ---------------------------------------------------------------</span>
    
    strOutput.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;\n-------------------------------------------------\n&quot;</span>);
    strOutput.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;ASSET CONTRACTS:\n\n&quot;</span>);
    
    <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_asset_contract_8hpp.html#a88f3c1b8259d44ecd0d15628789315cb">mapOfContracts</a>, m_mapContracts)
    {
        <a class="code" href="class_o_t_contract.html">OTContract</a> * pContract = (*it).second;
        <a class="code" href="_o_t_assert_8hpp.html#a033b133f48e61f2b227c52ad2be0c882">OT_ASSERT_MSG</a>(NULL != pContract, <span class="stringliteral">&quot;NULL contract pointer in OTWallet::m_mapContracts, OTWallet::DisplayStatistics&quot;</span>);
     
        pContract-&gt;<a class="code" href="class_o_t_contract.html#ae2082c4f9dea1ffa54023c31c37b00f7">DisplayStatistics</a>(strOutput);
    }
    
    <span class="comment">// ---------------------------------------------------------------</span>
    
    strOutput.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;-------------------------------------------------\n&quot;</span>);
    strOutput.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;SERVER CONTRACTS:\n\n&quot;</span>);
    
    <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_wallet_8hpp.html#aeec04aa40a95a6bef1f1f9c26dd953ef">mapOfServers</a>, m_mapServers)
    {
        <a class="code" href="class_o_t_contract.html">OTContract</a> * pServer = (*it).second;
        <a class="code" href="_o_t_assert_8hpp.html#a033b133f48e61f2b227c52ad2be0c882">OT_ASSERT_MSG</a>(NULL != pServer, <span class="stringliteral">&quot;NULL server pointer in OTWallet::m_mapServers, OTWallet::DisplayStatistics&quot;</span>);
     
        pServer-&gt;<a class="code" href="class_o_t_contract.html#ae2082c4f9dea1ffa54023c31c37b00f7">DisplayStatistics</a>(strOutput);
    }
    
    <span class="comment">// ---------------------------------------------------------------</span>


    strOutput.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;-------------------------------------------------\n&quot;</span>);
    strOutput.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;ACCOUNTS:\n\n&quot;</span>);
    
    <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_agent_8hpp.html#abd4942716d546c8d42670619a03ef99e">mapOfAccounts</a>, m_mapAccounts)
    {
        <a class="code" href="class_o_t_account.html">OTAccount</a> * pAccount = (*it).second;
        <a class="code" href="_o_t_assert_8hpp.html#a033b133f48e61f2b227c52ad2be0c882">OT_ASSERT_MSG</a>(NULL != pAccount, <span class="stringliteral">&quot;NULL account pointer in OTWallet::m_mapAccounts, OTWallet::DisplayStatistics&quot;</span>);
        
        pAccount-&gt;<a class="code" href="class_o_t_account.html#ac7811202ffe1bd326810bcab5d6120a5">DisplayStatistics</a>(strOutput);
        
        strOutput.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;-------------------------------------------------\n\n&quot;</span>);
    }
    <span class="comment">// ---------------------------------------------------------------</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="aee1809973c356a82e9c0f80d201668f4"></a><!-- doxytag: member="OTWallet::GetAccount" ref="aee1809973c356a82e9c0f80d201668f4" args="(const int32_t iIndex, OTIdentifier &amp;THE_ID, OTString &amp;THE_NAME)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_wallet.html#aee1809973c356a82e9c0f80d201668f4">OTWallet::GetAccount</a> </td>
          <td>(</td>
          <td class="paramtype">const int32_t&#160;</td>
          <td class="paramname"><em>iIndex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;&#160;</td>
          <td class="paramname"><em>THE_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>THE_NAME</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_wallet_8cpp_source.html#l00438">438</a> of file <a class="el" href="_o_t_wallet_8cpp_source.html">OTWallet.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// if iIndex is within proper bounds (0 through count minus 1)</span>
    <span class="keywordflow">if</span> (iIndex &lt; <a class="code" href="class_o_t_wallet.html#ac41d592707a250be4b86d23b7a3ea552">GetAccountCount</a>() &amp;&amp; iIndex &gt;= 0)
    {
        int32_t iCurrentIndex   = (-1);
        
        <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_agent_8hpp.html#abd4942716d546c8d42670619a03ef99e">mapOfAccounts</a>, m_mapAccounts)
        {   
            <a class="code" href="class_o_t_account.html">OTAccount</a> * pAccount = (*it).second;
            <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pAccount);
            
            iCurrentIndex++; <span class="comment">// On first iteration, this becomes 0 here. (For 0 index.) Increments thereafter.</span>
            
            <span class="keywordflow">if</span> (iIndex == iCurrentIndex) <span class="comment">// if not null</span>
            {
                pAccount-&gt;<a class="code" href="class_o_t_contract.html#acf77d2db6da3904aa8b03e7b87c02e4e">GetIdentifier</a>(THE_ID);
                pAccount-&gt;<a class="code" href="class_o_t_contract.html#a1afca402333b7c546104d5aa48c8efd9">GetName</a>(THE_NAME);
                <span class="keywordflow">return</span> <span class="keyword">true</span>;
            }
        }   
    }
    
    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae8b1d57dc221ae87f1bbb18f38f0ce00"></a><!-- doxytag: member="OTWallet::GetAccount" ref="ae8b1d57dc221ae87f1bbb18f38f0ce00" args="(const OTIdentifier &amp;theAccountID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_account.html">OTAccount</a> * <a class="el" href="class_o_t_wallet.html#aee1809973c356a82e9c0f80d201668f4">OTWallet::GetAccount</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;&#160;</td>
          <td class="paramname"><em>theAccountID</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_wallet_8cpp_source.html#l00609">609</a> of file <a class="el" href="_o_t_wallet_8cpp_source.html">OTWallet.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// loop through the accounts and find one with a specific ID.</span>
    <span class="comment">//</span>
    <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_agent_8hpp.html#abd4942716d546c8d42670619a03ef99e">mapOfAccounts</a>, m_mapAccounts)
    {
        <a class="code" href="class_o_t_account.html">OTAccount</a> * pAccount = (*it).second;
        <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pAccount);
        
        <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> anAccountID;
        pAccount-&gt;<a class="code" href="class_o_t_contract.html#acf77d2db6da3904aa8b03e7b87c02e4e">GetIdentifier</a>(anAccountID);
        
        <span class="keywordflow">if</span> (anAccountID == theAccountID)
            <span class="keywordflow">return</span> pAccount;
    }
    
    <span class="keywordflow">return</span> NULL;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac41d592707a250be4b86d23b7a3ea552"></a><!-- doxytag: member="OTWallet::GetAccountCount" ref="ac41d592707a250be4b86d23b7a3ea552" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_wallet.html#ac41d592707a250be4b86d23b7a3ea552">OTWallet::GetAccountCount</a> </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_wallet_8cpp_source.html#l00347">347</a> of file <a class="el" href="_o_t_wallet_8cpp_source.html">OTWallet.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span>int32_t<span class="keyword">&gt;</span> (m_mapAccounts.size());
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab25801b4fc2815bd397b523acf65c2d6"></a><!-- doxytag: member="OTWallet::GetAccountPartialMatch" ref="ab25801b4fc2815bd397b523acf65c2d6" args="(const std::string PARTIAL_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_account.html">OTAccount</a> * <a class="el" href="class_o_t_wallet.html#ab25801b4fc2815bd397b523acf65c2d6">OTWallet::GetAccountPartialMatch</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string&#160;</td>
          <td class="paramname"><em>PARTIAL_ID</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_wallet_8cpp_source.html#l00629">629</a> of file <a class="el" href="_o_t_wallet_8cpp_source.html">OTWallet.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// loop through the accounts and find one with a specific ID.</span>
    <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_agent_8hpp.html#abd4942716d546c8d42670619a03ef99e">mapOfAccounts</a>, m_mapAccounts)
    {
        <a class="code" href="class_o_t_account.html">OTAccount</a> * pAccount = (*it).second;
        <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pAccount);
        
        <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> anAccountID;
        pAccount-&gt;<a class="code" href="class_o_t_contract.html#acf77d2db6da3904aa8b03e7b87c02e4e">GetIdentifier</a>(anAccountID);
        <a class="code" href="class_o_t_string.html">OTString</a> strTemp(anAccountID);
        std::string strIdentifier = strTemp.Get();
        
        <span class="keywordflow">if</span> (strIdentifier.compare(0,PARTIAL_ID.length(),PARTIAL_ID) == 0)
            <span class="keywordflow">return</span> pAccount;
    }
    <span class="comment">// ---------------------------------</span>
    <span class="comment">// Okay, let&#39;s try it by name, then...</span>
    <span class="comment">//</span>
    <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_agent_8hpp.html#abd4942716d546c8d42670619a03ef99e">mapOfAccounts</a>, m_mapAccounts)
    {
        <a class="code" href="class_o_t_account.html">OTAccount</a> * pAccount = (*it).second;
        <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pAccount);
        
        <a class="code" href="class_o_t_string.html">OTString</a> strName;
        pAccount-&gt;<a class="code" href="class_o_t_contract.html#a1afca402333b7c546104d5aa48c8efd9">GetName</a>(strName);
        std::string str_Name = strName.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();
        
        <span class="keywordflow">if</span> (str_Name.compare(0,PARTIAL_ID.length(),PARTIAL_ID) == 0)
            <span class="keywordflow">return</span> pAccount;
    }
    <span class="comment">// ---------------------------------</span>
    <span class="keywordflow">return</span> NULL;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a4daee51036b24439e687383a6c66c6f7"></a><!-- doxytag: member="OTWallet::GetAssetContract" ref="a4daee51036b24439e687383a6c66c6f7" args="(const OTIdentifier &amp;theContractID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_asset_contract.html">OTAssetContract</a> * <a class="el" href="class_o_t_wallet.html#a4daee51036b24439e687383a6c66c6f7">OTWallet::GetAssetContract</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;&#160;</td>
          <td class="paramname"><em>theContractID</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_wallet_8cpp_source.html#l01192">1192</a> of file <a class="el" href="_o_t_wallet_8cpp_source.html">OTWallet.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_asset_contract_8hpp.html#a88f3c1b8259d44ecd0d15628789315cb">mapOfContracts</a>, m_mapContracts)
    {
        <a class="code" href="class_o_t_asset_contract.html">OTAssetContract</a> * pContract = (*it).second;     
        <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pContract);
        
        <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> aContractID;
        pContract-&gt;<a class="code" href="class_o_t_contract.html#acf77d2db6da3904aa8b03e7b87c02e4e">GetIdentifier</a>(aContractID);
        
        <span class="keywordflow">if</span> (aContractID == theContractID)
            <span class="keywordflow">return</span> pContract;
    }
    
    <span class="keywordflow">return</span> NULL;    
}
</pre></div>
</div>
</div>
<a class="anchor" id="aaab24113b89af3d58010e308bf2dce8f"></a><!-- doxytag: member="OTWallet::GetAssetContractPartialMatch" ref="aaab24113b89af3d58010e308bf2dce8f" args="(const std::string PARTIAL_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_asset_contract.html">OTAssetContract</a> * <a class="el" href="class_o_t_wallet.html#aaab24113b89af3d58010e308bf2dce8f">OTWallet::GetAssetContractPartialMatch</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string&#160;</td>
          <td class="paramname"><em>PARTIAL_ID</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_wallet_8cpp_source.html#l01210">1210</a> of file <a class="el" href="_o_t_wallet_8cpp_source.html">OTWallet.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_asset_contract_8hpp.html#a88f3c1b8259d44ecd0d15628789315cb">mapOfContracts</a>, m_mapContracts)
    {
        <a class="code" href="class_o_t_asset_contract.html">OTAssetContract</a> * pContract = (*it).second;     
        <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pContract);
        
        <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> aContractID;
        pContract-&gt;<a class="code" href="class_o_t_contract.html#acf77d2db6da3904aa8b03e7b87c02e4e">GetIdentifier</a>(aContractID);
        
        <a class="code" href="class_o_t_string.html">OTString</a> strTemp(aContractID);
        std::string strIdentifier = strTemp.Get();
        
        <span class="keywordflow">if</span> (strIdentifier.compare(0,PARTIAL_ID.length(),PARTIAL_ID) == 0)
            <span class="keywordflow">return</span> pContract;
    }
    <span class="comment">// ----------------</span>
    <span class="comment">// Okay, let&#39;s try it by the name, then...</span>
    <span class="comment">//</span>
    <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_asset_contract_8hpp.html#a88f3c1b8259d44ecd0d15628789315cb">mapOfContracts</a>, m_mapContracts)
    {
        <a class="code" href="class_o_t_asset_contract.html">OTAssetContract</a> * pContract = (*it).second;
        <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pContract);
        
        <a class="code" href="class_o_t_string.html">OTString</a> strName;
        pContract-&gt;<a class="code" href="class_o_t_contract.html#a1afca402333b7c546104d5aa48c8efd9">GetName</a>(strName);
        std::string str_Name = strName.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();
        
        <span class="keywordflow">if</span> (str_Name.compare(0,PARTIAL_ID.length(),PARTIAL_ID) == 0)
            <span class="keywordflow">return</span> pContract;
    }
    <span class="comment">// ----------------</span>
    <span class="keywordflow">return</span> NULL;    
}
</pre></div>
</div>
</div>
<a class="anchor" id="a5f328a7ca7030125cc121b5062e0627a"></a><!-- doxytag: member="OTWallet::GetAssetType" ref="a5f328a7ca7030125cc121b5062e0627a" args="(const int32_t iIndex, OTIdentifier &amp;THE_ID, OTString &amp;THE_NAME)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_wallet.html#a5f328a7ca7030125cc121b5062e0627a">OTWallet::GetAssetType</a> </td>
          <td>(</td>
          <td class="paramtype">const int32_t&#160;</td>
          <td class="paramname"><em>iIndex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;&#160;</td>
          <td class="paramname"><em>THE_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>THE_NAME</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_wallet_8cpp_source.html#l00410">410</a> of file <a class="el" href="_o_t_wallet_8cpp_source.html">OTWallet.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// if iIndex is within proper bounds (0 through count minus 1)</span>
    <span class="keywordflow">if</span> (iIndex &lt; <a class="code" href="class_o_t_wallet.html#a32deda2a4c48baf8e339796f65499f3e">GetAssetTypeCount</a>() &amp;&amp; iIndex &gt;= 0)
    {
        int32_t iCurrentIndex   = (-1);
        
        <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_asset_contract_8hpp.html#a88f3c1b8259d44ecd0d15628789315cb">mapOfContracts</a>, m_mapContracts)
        {   
            <a class="code" href="class_o_t_asset_contract.html">OTAssetContract</a> * pAssetType = (*it).second;
            <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pAssetType);
            
            iCurrentIndex++; <span class="comment">// On first iteration, this becomes 0 here. (For 0 index.) Increments thereafter.</span>
            
            <span class="keywordflow">if</span> (iIndex == iCurrentIndex) <span class="comment">// if not null</span>
            {
                pAssetType-&gt;<a class="code" href="class_o_t_contract.html#acf77d2db6da3904aa8b03e7b87c02e4e">GetIdentifier</a>(THE_ID);
                pAssetType-&gt;<a class="code" href="class_o_t_contract.html#a1afca402333b7c546104d5aa48c8efd9">GetName</a>(THE_NAME);
                <span class="keywordflow">return</span> <span class="keyword">true</span>;
            }
        }   
    }
    
    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a32deda2a4c48baf8e339796f65499f3e"></a><!-- doxytag: member="OTWallet::GetAssetTypeCount" ref="a32deda2a4c48baf8e339796f65499f3e" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_wallet.html#a32deda2a4c48baf8e339796f65499f3e">OTWallet::GetAssetTypeCount</a> </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_wallet_8cpp_source.html#l00341">341</a> of file <a class="el" href="_o_t_wallet_8cpp_source.html">OTWallet.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span>int32_t<span class="keyword">&gt;</span> (m_mapContracts.size());
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae4cd7fef3caaf5dec83530ecabbdddb8"></a><!-- doxytag: member="OTWallet::GetIssuerAccount" ref="ae4cd7fef3caaf5dec83530ecabbdddb8" args="(const OTIdentifier &amp;theAssetTypeID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_account.html">OTAccount</a> * <a class="el" href="class_o_t_wallet.html#ae4cd7fef3caaf5dec83530ecabbdddb8">OTWallet::GetIssuerAccount</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;&#160;</td>
          <td class="paramname"><em>theAssetTypeID</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_wallet_8cpp_source.html#l00665">665</a> of file <a class="el" href="_o_t_wallet_8cpp_source.html">OTWallet.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// loop through the accounts and find one with a specific asset type ID. </span>
    <span class="comment">// (And with the issuer type set.)</span>
    <span class="comment">//</span>
    <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_agent_8hpp.html#abd4942716d546c8d42670619a03ef99e">mapOfAccounts</a>, m_mapAccounts)
    {
        <a class="code" href="class_o_t_account.html">OTAccount</a> * pIssuerAccount = (*it).second;
        <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pIssuerAccount);
                
        <span class="keywordflow">if</span> ((pIssuerAccount-&gt;<a class="code" href="class_o_t_account.html#a3b933b8c929e071a68ec4a29ad5797d6">GetAssetTypeID</a>() == theAssetTypeID) &amp;&amp; 
            (pIssuerAccount-&gt;<a class="code" href="class_o_t_account.html#adff29ae9ced4feb6c8de8cc597b58c4a">IsIssuer</a>()))
            <span class="keywordflow">return</span> pIssuerAccount;
    }
    
    <span class="keywordflow">return</span> NULL;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a146e2339010f1e6b8b9cba252c8d3213"></a><!-- doxytag: member="OTWallet::GetNym" ref="a146e2339010f1e6b8b9cba252c8d3213" args="(const int32_t iIndex, OTIdentifier &amp;NYM_ID, OTString &amp;NYM_NAME)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_wallet.html#a146e2339010f1e6b8b9cba252c8d3213">OTWallet::GetNym</a> </td>
          <td>(</td>
          <td class="paramtype">const int32_t&#160;</td>
          <td class="paramname"><em>iIndex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;&#160;</td>
          <td class="paramname"><em>NYM_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>NYM_NAME</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_wallet_8cpp_source.html#l00354">354</a> of file <a class="el" href="_o_t_wallet_8cpp_source.html">OTWallet.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// if iIndex is within proper bounds (0 through count minus 1)</span>
    <span class="keywordflow">if</span> (iIndex &lt; <a class="code" href="class_o_t_wallet.html#ad98f3386c700710d76e44580c59c505a">GetNymCount</a>() &amp;&amp; iIndex &gt;= 0)
    {
        int32_t iCurrentIndex   = (-1);
        
        <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_agent_8hpp.html#ac89892658f6bc83e354078647b704e8f">mapOfNyms</a>, m_mapNyms)
        {
            <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pNym = (*it).second;
            <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pNym);
            
            iCurrentIndex++; <span class="comment">// On first iteration, this becomes 0 here. (For 0 index.) Increments thereafter.</span>
            
            <span class="keywordflow">if</span> (iIndex == iCurrentIndex)
            {
                pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#a1775c7aedd0dd25b2faf3f78dcccabe7">GetIdentifier</a>(NYM_ID);
                NYM_NAME.<a class="code" href="class_o_t_string.html#aa5db620fe8e60c849585d741975db991">Set</a>(pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#a42e63697c3c3b1bdb526ee7990a9c0e7">GetNymName</a>());
                <span class="keywordflow">return</span> <span class="keyword">true</span>;
            }
        }   
    }
    
    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aab65a5710311cc6eeb9fbd0d7f881f0e"></a><!-- doxytag: member="OTWallet::GetNymByID" ref="aab65a5710311cc6eeb9fbd0d7f881f0e" args="(const OTIdentifier &amp;NYM_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> * <a class="el" href="class_o_t_wallet.html#aab65a5710311cc6eeb9fbd0d7f881f0e">OTWallet::GetNymByID</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;&#160;</td>
          <td class="paramname"><em>NYM_ID</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_wallet_8cpp_source.html#l00275">275</a> of file <a class="el" href="_o_t_wallet_8cpp_source.html">OTWallet.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_agent_8hpp.html#ac89892658f6bc83e354078647b704e8f">mapOfNyms</a>, m_mapNyms)
    {       
        <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pNym = (*it).second;
        <a class="code" href="_o_t_assert_8hpp.html#a033b133f48e61f2b227c52ad2be0c882">OT_ASSERT_MSG</a>((NULL != pNym), <span class="stringliteral">&quot;NULL pseudonym pointer in OTWallet::GetNymByID.&quot;</span>);

        <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> id_CurrentNym;
        pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#a1775c7aedd0dd25b2faf3f78dcccabe7">GetIdentifier</a>(id_CurrentNym);
        
        <span class="keywordflow">if</span> (id_CurrentNym == NYM_ID)
            <span class="keywordflow">return</span> pNym;
    }   
    
    <span class="keywordflow">return</span> NULL;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a66e64e6ea0c2a9d74099b83b8fe87637"></a><!-- doxytag: member="OTWallet::GetNymByIDPartialMatch" ref="a66e64e6ea0c2a9d74099b83b8fe87637" args="(const std::string PARTIAL_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> * <a class="el" href="class_o_t_wallet.html#a66e64e6ea0c2a9d74099b83b8fe87637">OTWallet::GetNymByIDPartialMatch</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string&#160;</td>
          <td class="paramname"><em>PARTIAL_ID</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_wallet_8cpp_source.html#l00293">293</a> of file <a class="el" href="_o_t_wallet_8cpp_source.html">OTWallet.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_agent_8hpp.html#ac89892658f6bc83e354078647b704e8f">mapOfNyms</a>, m_mapNyms)
    {       
        <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pNym = (*it).second;
        <a class="code" href="_o_t_assert_8hpp.html#a033b133f48e61f2b227c52ad2be0c882">OT_ASSERT_MSG</a>((NULL != pNym), <span class="stringliteral">&quot;NULL pseudonym pointer in OTWallet::GetNymByIDPartialMatch.&quot;</span>);
        
        <a class="code" href="class_o_t_string.html">OTString</a> strTemp;
        pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#a1775c7aedd0dd25b2faf3f78dcccabe7">GetIdentifier</a>(strTemp);

        std::string strIdentifier = strTemp.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();
        
        <span class="keywordflow">if</span> (strIdentifier.compare(0,PARTIAL_ID.length(),PARTIAL_ID) == 0)
            <span class="keywordflow">return</span> pNym;        
    }
    <span class="comment">// ----------------------------------</span>
    <span class="comment">// OK, let&#39;s try it by the name, then...</span>
    <span class="comment">//</span>
    <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_agent_8hpp.html#ac89892658f6bc83e354078647b704e8f">mapOfNyms</a>, m_mapNyms)
    {
        <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pNym = (*it).second;
        <a class="code" href="_o_t_assert_8hpp.html#a033b133f48e61f2b227c52ad2be0c882">OT_ASSERT_MSG</a>((NULL != pNym), <span class="stringliteral">&quot;NULL pseudonym pointer in OTWallet::GetNymByIDPartialMatch.&quot;</span>);
        
        <a class="code" href="class_o_t_string.html">OTString</a> strNymName;
        strNymName.<a class="code" href="class_o_t_string.html#aa5db620fe8e60c849585d741975db991">Set</a>(pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#a42e63697c3c3b1bdb526ee7990a9c0e7">GetNymName</a>());
        std::string str_NymName = strNymName.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();
        
        <span class="keywordflow">if</span> (str_NymName.compare(0,PARTIAL_ID.length(),PARTIAL_ID) == 0)
            <span class="keywordflow">return</span> pNym;
    }
    <span class="comment">// ----------------------------------</span>
    <span class="keywordflow">return</span> NULL;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad98f3386c700710d76e44580c59c505a"></a><!-- doxytag: member="OTWallet::GetNymCount" ref="ad98f3386c700710d76e44580c59c505a" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_wallet.html#ad98f3386c700710d76e44580c59c505a">OTWallet::GetNymCount</a> </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_wallet_8cpp_source.html#l00329">329</a> of file <a class="el" href="_o_t_wallet_8cpp_source.html">OTWallet.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span>int32_t<span class="keyword">&gt;</span> (m_mapNyms.size());
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad3e876943833406d7819ce4c34b74647"></a><!-- doxytag: member="OTWallet::GetOrLoadAccount" ref="ad3e876943833406d7819ce4c34b74647" args="(OTPseudonym &amp;theNym, const OTIdentifier &amp;ACCT_ID, const OTIdentifier &amp;SERVER_ID, const char *szFuncName=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_account.html">OTAccount</a> * <a class="el" href="class_o_t_wallet.html#ad3e876943833406d7819ce4c34b74647">OTWallet::GetOrLoadAccount</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;&#160;</td>
          <td class="paramname"><em>theNym</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;&#160;</td>
          <td class="paramname"><em>ACCT_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>szFuncName</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_wallet_8cpp_source.html#l00834">834</a> of file <a class="el" href="_o_t_wallet_8cpp_source.html">OTWallet.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keyword">const</span> <span class="keywordtype">char</span> * szFunc = (NULL != szFuncName) ? szFuncName : <span class="stringliteral">&quot;OTWallet::GetOrLoadAccount&quot;</span>;
    <span class="comment">// -----------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strAcctID(ACCT_ID);
    <span class="comment">// -----------------</span>
    <a class="code" href="class_o_t_account.html">OTAccount</a> * pAccount        = this-&gt;<a class="code" href="class_o_t_wallet.html#aee1809973c356a82e9c0f80d201668f4">GetAccount</a>(ACCT_ID);
    <span class="comment">// -----------------</span>
    <span class="keywordflow">if</span> (NULL == pAccount) <span class="comment">// It wasn&#39;t there already, so we&#39;ll have to load it...</span>
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;OTWallet::GetOrLoadAccount %s: There&#39;s no asset account in the wallet with that ID (%s). &quot;</span>
                       <span class="stringliteral">&quot;Attempting to load it from storage...\n&quot;</span>, szFunc, strAcctID.Get());
        pAccount = this-&gt;<a class="code" href="class_o_t_wallet.html#ab7a6c57d91a0c93be57afe78c56e86a7">LoadAccount</a>(theNym, ACCT_ID, SERVER_ID, szFuncName);
    } <span class="comment">// pAccount == NULL.</span>
    <span class="comment">// --------------------------------------------</span>
    <span class="comment">// It either was already there, or it loaded successfully...</span>
    <span class="comment">//  </span>
    <span class="keywordflow">if</span> (NULL == pAccount) <span class="comment">// pAccount EXISTS...</span>
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;OTWallet::GetOrLoadAccount %s: Error loading Asset Account: %s\n&quot;</span>,
                      szFunc, strAcctID.Get());
        <span class="keywordflow">return</span> NULL;
    }
    <span class="comment">// --------------------------------------------</span>
    <span class="keywordflow">return</span> pAccount;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a97c9e8ef43e629dfad894e2c5fbc4073"></a><!-- doxytag: member="OTWallet::GetOrLoadNym" ref="a97c9e8ef43e629dfad894e2c5fbc4073" args="(const OTIdentifier &amp;NYM_ID, const bool bChecking=false, const char *szFuncName=NULL, OTPasswordData *pPWData=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> * <a class="el" href="class_o_t_wallet.html#a97c9e8ef43e629dfad894e2c5fbc4073">OTWallet::GetOrLoadNym</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;&#160;</td>
          <td class="paramname"><em>NYM_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const bool&#160;</td>
          <td class="paramname"><em>bChecking</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>szFuncName</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_password_data.html">OTPasswordData</a> *&#160;</td>
          <td class="paramname"><em>pPWData</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_wallet_8cpp_source.html#l01055">1055</a> of file <a class="el" href="_o_t_wallet_8cpp_source.html">OTWallet.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pNym = this-&gt;<a class="code" href="class_o_t_wallet.html#ad8d73d7ddef1194c1c24f173190da9f3">GetOrLoadPublicNym</a>(NYM_ID, szFuncName);
    
    <span class="comment">// It tries to load as public Nym first, so as not to force the user to</span>
    <span class="comment">// enter his passphrase unnecessarily.</span>
    <span class="comment">// However, if this fails, then it tries the private one, just to see</span>
    <span class="comment">// if it can be found.</span>
    <span class="comment">//</span>
    <a class="code" href="class_o_t_password_data.html">OTPasswordData</a> thePWData(<a class="code" href="_o_t_callback_8hpp.html#aec99f1909896090ab9b64ce848f50c6a">OT_PW_DISPLAY</a>);
    
    <span class="keywordflow">if</span> (NULL == pNym)
        pNym = this-&gt;<a class="code" href="class_o_t_wallet.html#a7ca619a0f6ac4fa8f59efc1a518a297c">GetOrLoadPrivateNym</a>(NYM_ID, bChecking, szFuncName, NULL == pPWData ? &amp;thePWData : pPWData);

    <span class="keywordflow">return</span> pNym;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a7ca619a0f6ac4fa8f59efc1a518a297c"></a><!-- doxytag: member="OTWallet::GetOrLoadPrivateNym" ref="a7ca619a0f6ac4fa8f59efc1a518a297c" args="(const OTIdentifier &amp;NYM_ID, const bool bChecking=false, const char *szFuncName=NULL, OTPasswordData *pPWData=NULL, OTPassword *pImportPassword=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> * <a class="el" href="class_o_t_wallet.html#a7ca619a0f6ac4fa8f59efc1a518a297c">OTWallet::GetOrLoadPrivateNym</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;&#160;</td>
          <td class="paramname"><em>NYM_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const bool&#160;</td>
          <td class="paramname"><em>bChecking</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>szFuncName</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_password_data.html">OTPasswordData</a> *&#160;</td>
          <td class="paramname"><em>pPWData</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_password.html">OTPassword</a> *&#160;</td>
          <td class="paramname"><em>pImportPassword</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_wallet_8cpp_source.html#l00958">958</a> of file <a class="el" href="_o_t_wallet_8cpp_source.html">OTWallet.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (NYM_ID.<a class="code" href="class_o_t_data.html#a947528765516223eb03bee7745eb8c07">IsEmpty</a>()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s:%s: Error: NYM_ID passed in empty, returning null&quot;</span>, __FUNCTION__,szFuncName); <span class="keywordflow">return</span> NULL; }
    <span class="comment">// ---------------------------------------------------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strNymID(NYM_ID);
    <a class="code" href="class_o_t_password_data.html">OTPasswordData</a> thePWData(<a class="code" href="_o_t_callback_8hpp.html#aec99f1909896090ab9b64ce848f50c6a">OT_PW_DISPLAY</a>);
    <span class="keywordflow">if</span> (NULL == pPWData)
        pPWData = &amp;thePWData;
    <span class="comment">// ---------------------------------------------------------</span>
    szFuncName = (szFuncName == NULL) ? <span class="stringliteral">&quot;&quot;</span> : szFuncName;
    <span class="comment">// ---------------------------------------------------------</span>
    <span class="comment">// See if it&#39;s already there. (Could be the public version </span>
    <span class="comment">// though :P Still might have to reload it.)</span>
    <span class="comment">//</span>
    <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pNym = this-&gt;<a class="code" href="class_o_t_wallet.html#aab65a5710311cc6eeb9fbd0d7f881f0e">GetNymByID</a>(NYM_ID); <span class="comment">// &lt;===========</span>
    <span class="comment">// ---------------------------------------------------------</span>
    <span class="keywordflow">if</span> (NULL == pNym) <span class="comment">// Wasn&#39;t already in the wallet. Let&#39;s try loading it...</span>
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(1, <span class="stringliteral">&quot;%s %s: There&#39;s no Nym already loaded with that ID. &quot;</span>
                       <span class="stringliteral">&quot;Attempting to load private key...\n&quot;</span>, __FUNCTION__, szFuncName);
        pNym = <a class="code" href="class_o_t_pseudonym.html#ac1e2478e3a8604944d2d826df8afedd6">OTPseudonym::LoadPrivateNym</a>(NYM_ID, bChecking, NULL, szFuncName, <span class="comment">// &lt;===========</span>
                                           pPWData, pImportPassword);
        <span class="comment">// It worked!</span>
        <span class="keywordflow">if</span> (NULL != pNym) <span class="comment">// LoadPublicNym has plenty of error logging already. </span>
            this-&gt;<a class="code" href="class_o_t_wallet.html#acb570de733658a4ad24756dde0f22a34">AddNym</a>(*pNym); <span class="comment">// &lt;===========</span>
        <span class="keywordflow">else</span>
        {
            <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(bChecking ? 1 : 0,<span class="stringliteral">&quot;%s: %s: (%s: is %s).  Unable to load Private Nym for: %s\n&quot;</span>,
                __FUNCTION__, __FUNCTION__, <span class="stringliteral">&quot;bChecking&quot;</span>, bChecking ? <span class="stringliteral">&quot;true&quot;</span> : <span class="stringliteral">&quot;false&quot;</span>, strNymID.Get());
        }
    }
    <span class="comment">// ---------------------------------------------------------</span>
    <span class="comment">// If pNym EXISTS, then let&#39;s make sure he has a public AND a</span>
    <span class="comment">// private key, as he should. (He might be already loaded on the</span>
    <span class="comment">// wallet, without his private key, necessitating a reload.)</span>
    <span class="comment">//</span>
    <span class="keywordflow">if</span> (NULL != pNym) <span class="comment">// pNym definitely NOT NULL (it exists)...</span>
    {
        <span class="comment">// ----------------------------------------------</span>
        <span class="comment">// ...yet he doesn&#39;t have a public key (Weird!)</span>
        <span class="keywordflow">if</span> (<span class="keyword">false</span> == pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#a5d685c100f1947ed7aa467434298b40d">HasPublicKey</a>())
            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s %s: Found nym, but he has no public key: %s\n&quot;</span>,
                          __FUNCTION__, szFuncName, strNymID.Get());
        <span class="comment">// ----------------------------------------------</span>
        <span class="comment">// ...hmm, he doesn&#39;t have a private key. Possible! If the wallet already had</span>
        <span class="comment">// my public key loaded (without the private one) from some earlier action.</span>
        <span class="comment">//</span>
        <span class="keywordflow">if</span> (<span class="keyword">false</span> == pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#a27b67139a33989a0db8ca027f03b3257">HasPrivateKey</a>())
        {
            <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(1, <span class="stringliteral">&quot;%s %s: Found nym in wallet (%s), &quot;</span>
                           <span class="stringliteral">&quot;but he currently has no private key loaded. Reloading...\n&quot;</span>,
                           __FUNCTION__, szFuncName, strNymID.Get());
            <span class="comment">// ----------------------------------------------</span>
            <span class="comment">//</span>
            <span class="comment">// ASSUMPTION: The Nym is always saved right after some important change, </span>
            <span class="comment">// to avoid the risk of losing it. Therefore I don&#39;t have to save the</span>
            <span class="comment">// current Nym here--I can just remove it from the wallet now, and then </span>
            <span class="comment">// reload it (as a private key this time, of course.)</span>
            <span class="comment">//</span>
            
            <span class="comment">// Let&#39;s save the Name, in case that is already set, so we don&#39;t blank it out...</span>
            <span class="comment">//</span>
            <a class="code" href="class_o_t_string.html">OTString</a> strName = pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#a42e63697c3c3b1bdb526ee7990a9c0e7">GetNymName</a>().<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(); <span class="comment">// Get returns &quot;&quot; if string is empty.</span>

            <span class="keywordflow">if</span> (this-&gt;<a class="code" href="class_o_t_wallet.html#a7dd1cf4ba4922eacc2c3c81d21dd07dc">RemoveNym</a>(NYM_ID))
            {
                pNym = <a class="code" href="class_o_t_pseudonym.html#ac1e2478e3a8604944d2d826df8afedd6">OTPseudonym::LoadPrivateNym</a>(NYM_ID, <span class="keyword">false</span>, &amp;strName, szFuncName, <span class="comment">// &lt;===========</span>
                                                   pPWData, pImportPassword);
                <span class="comment">// It worked!</span>
                <span class="keywordflow">if</span> (NULL != pNym) <span class="comment">// LoadPrivateNym has plenty of error logging already.    </span>
                    this-&gt;<a class="code" href="class_o_t_wallet.html#acb570de733658a4ad24756dde0f22a34">AddNym</a>(*pNym); <span class="comment">// &lt;===========</span>
                <span class="keywordflow">else</span>
                    <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s %s: Unable to load private Nym for: %s \n&quot;</span>,
                                   __FUNCTION__, szFuncName, strNymID.Get());
            }
            <span class="keywordflow">else</span> 
                <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s %s: Found nym (%s), but he had no private key. Then tried to remove him from wallet (in order &quot;</span>
                              <span class="stringliteral">&quot;to reload him with private key) and then the removal failed. Sorry.\n&quot;</span>,
                              __FUNCTION__, szFuncName, strNymID.Get());
        }
    }
    <span class="keywordflow">return</span> pNym;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad8d73d7ddef1194c1c24f173190da9f3"></a><!-- doxytag: member="OTWallet::GetOrLoadPublicNym" ref="ad8d73d7ddef1194c1c24f173190da9f3" args="(const OTIdentifier &amp;NYM_ID, const char *szFuncName=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> * <a class="el" href="class_o_t_wallet.html#ad8d73d7ddef1194c1c24f173190da9f3">OTWallet::GetOrLoadPublicNym</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;&#160;</td>
          <td class="paramname"><em>NYM_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>szFuncName</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_wallet_8cpp_source.html#l00915">915</a> of file <a class="el" href="_o_t_wallet_8cpp_source.html">OTWallet.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strNymID(NYM_ID);
    <span class="keyword">const</span> <span class="keywordtype">char</span> * szFunc = <span class="stringliteral">&quot;OTWallet::GetOrLoadPublicNym&quot;</span>;
    <span class="comment">// --------------------------------------------</span>
    szFuncName = (szFuncName == NULL) ? <span class="stringliteral">&quot;&quot;</span> : szFuncName;
    <span class="comment">// --------------------------------------------</span>
    <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pNym = this-&gt;<a class="code" href="class_o_t_wallet.html#aab65a5710311cc6eeb9fbd0d7f881f0e">GetNymByID</a>(NYM_ID); <span class="comment">// &lt;===========</span>
    <span class="comment">// --------------------------------------------</span>
    <span class="keywordflow">if</span> (NULL == pNym) <span class="comment">// Wasn&#39;t already in the wallet. Try loading it.</span>
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(1, <span class="stringliteral">&quot;%s %s: There&#39;s no Nym already loaded with that ID. &quot;</span>
                       <span class="stringliteral">&quot;Attempting to load public key...\n&quot;</span>, szFunc, szFuncName);
        pNym = <a class="code" href="class_o_t_pseudonym.html#aef446a600137c016e2db08d89304ff93">OTPseudonym::LoadPublicNym</a>(NYM_ID); <span class="comment">// &lt;===========</span>
        <span class="comment">// It worked!</span>
        <span class="keywordflow">if</span> (NULL != pNym) <span class="comment">// LoadPublicNym has plenty of error logging already.</span>
        {
            <span class="keywordflow">if</span> (pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#a27b67139a33989a0db8ca027f03b3257">HasPrivateKey</a>()) <span class="comment">// We don&#39;t auto-add public Nyms -- only private ones.</span>
                this-&gt;<a class="code" href="class_o_t_wallet.html#acb570de733658a4ad24756dde0f22a34">AddNym</a>(*pNym); <span class="comment">// &lt;===========</span>
        }
        <span class="keywordflow">else</span>
            <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s %s: Unable to load public Nym for: %s \n&quot;</span>,
                           szFunc, szFuncName, strNymID.Get());
    }
    <span class="comment">// -------------------------------------------- </span>
    <span class="comment">// If pNym exists, yet he doesn&#39;t have a public key (weird!)</span>
    <span class="comment">// Though we log the error, we still return pNym, since it exists.</span>
    <span class="comment">//</span>
    <span class="keywordflow">if</span> ((NULL != pNym) &amp;&amp; (<span class="keyword">false</span> == pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#a5d685c100f1947ed7aa467434298b40d">HasPublicKey</a>()))
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s %s: Found nym (%s), but he has no public key. &quot;</span>
                      <span class="stringliteral">&quot;(Still returning the Nym, since it exists.)\n&quot;</span>,
                      szFunc, szFuncName, strNymID.Get());
    <span class="keywordflow">return</span> pNym;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a08f39d74540ac2c100ee28d8689af969"></a><!-- doxytag: member="OTWallet::GetPendingWithdrawal" ref="a08f39d74540ac2c100ee28d8689af969" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_purse.html">OTPurse</a>* <a class="el" href="class_o_t_wallet.html#a08f39d74540ac2c100ee28d8689af969">OTWallet::GetPendingWithdrawal</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_wallet_8hpp_source.html#l00251">251</a> of file <a class="el" href="_o_t_wallet_8hpp_source.html">OTWallet.hpp</a>.</p>
<div class="fragment"><pre class="fragment">{ <span class="keywordflow">return</span> m_pWithdrawalPurse; }
</pre></div>
</div>
</div>
<a class="anchor" id="aad6abb5e5fd19ffd69a9b6f0eb75f1c7"></a><!-- doxytag: member="OTWallet::GetServer" ref="aad6abb5e5fd19ffd69a9b6f0eb75f1c7" args="(const int32_t iIndex, OTIdentifier &amp;THE_ID, OTString &amp;THE_NAME)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_wallet.html#aad6abb5e5fd19ffd69a9b6f0eb75f1c7">OTWallet::GetServer</a> </td>
          <td>(</td>
          <td class="paramtype">const int32_t&#160;</td>
          <td class="paramname"><em>iIndex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;&#160;</td>
          <td class="paramname"><em>THE_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>THE_NAME</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_wallet_8cpp_source.html#l00382">382</a> of file <a class="el" href="_o_t_wallet_8cpp_source.html">OTWallet.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// if iIndex is within proper bounds (0 through count minus 1)</span>
    <span class="keywordflow">if</span> (iIndex &lt; <a class="code" href="class_o_t_wallet.html#a4fe8fefbb7d541cab17d920259cd81b7">GetServerCount</a>() &amp;&amp; iIndex &gt;= 0)
    {
        int32_t iCurrentIndex   = (-1);
        
        <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_wallet_8hpp.html#aeec04aa40a95a6bef1f1f9c26dd953ef">mapOfServers</a>, m_mapServers)
        {   
            <a class="code" href="class_o_t_server_contract.html">OTServerContract</a> * pServer = (*it).second;
            <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pServer);
            
            iCurrentIndex++; <span class="comment">// On first iteration, this becomes 0 here. (For 0 index.) Increments thereafter.</span>
            
            <span class="keywordflow">if</span> (iIndex == iCurrentIndex) <span class="comment">// if not null</span>
            {
                pServer-&gt;<a class="code" href="class_o_t_contract.html#acf77d2db6da3904aa8b03e7b87c02e4e">GetIdentifier</a>(THE_ID);
                pServer-&gt;<a class="code" href="class_o_t_contract.html#a1afca402333b7c546104d5aa48c8efd9">GetName</a>(THE_NAME);
                <span class="keywordflow">return</span> <span class="keyword">true</span>;
            }
        }   
    }
    
    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae897619f652a0d3d9fba99a8bc747993"></a><!-- doxytag: member="OTWallet::GetServerContract" ref="ae897619f652a0d3d9fba99a8bc747993" args="(const OTIdentifier &amp;SERVER_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_server_contract.html">OTServerContract</a> * <a class="el" href="class_o_t_wallet.html#ae897619f652a0d3d9fba99a8bc747993">OTWallet::GetServerContract</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_wallet_8cpp_source.html#l00685">685</a> of file <a class="el" href="_o_t_wallet_8cpp_source.html">OTWallet.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_wallet_8hpp.html#aeec04aa40a95a6bef1f1f9c26dd953ef">mapOfServers</a>, m_mapServers)
    {
        <a class="code" href="class_o_t_contract.html">OTContract</a> * pServer = (*it).second;
        <a class="code" href="_o_t_assert_8hpp.html#a033b133f48e61f2b227c52ad2be0c882">OT_ASSERT_MSG</a>((NULL != pServer), <span class="stringliteral">&quot;NULL server pointer in OTWallet::m_mapServers, OTWallet::GetServerContract&quot;</span>);
        
        <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> id_CurrentContract;
        pServer-&gt;<a class="code" href="class_o_t_contract.html#acf77d2db6da3904aa8b03e7b87c02e4e">GetIdentifier</a>(id_CurrentContract);
        
        <span class="keywordflow">if</span> (id_CurrentContract == SERVER_ID)
            <span class="keywordflow">return</span> <span class="keyword">dynamic_cast&lt;</span><a class="code" href="class_o_t_server_contract.html">OTServerContract</a> *<span class="keyword">&gt;</span>(pServer);
    }
    
    <span class="keywordflow">return</span> NULL;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a2c08b5bd12930371f99e793762819dd5"></a><!-- doxytag: member="OTWallet::GetServerContractPartialMatch" ref="a2c08b5bd12930371f99e793762819dd5" args="(const std::string PARTIAL_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_server_contract.html">OTServerContract</a> * <a class="el" href="class_o_t_wallet.html#a2c08b5bd12930371f99e793762819dd5">OTWallet::GetServerContractPartialMatch</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string&#160;</td>
          <td class="paramname"><em>PARTIAL_ID</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_wallet_8cpp_source.html#l00703">703</a> of file <a class="el" href="_o_t_wallet_8cpp_source.html">OTWallet.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_wallet_8hpp.html#aeec04aa40a95a6bef1f1f9c26dd953ef">mapOfServers</a>, m_mapServers)
    {
        <a class="code" href="class_o_t_contract.html">OTContract</a> * pServer = (*it).second;
        <a class="code" href="_o_t_assert_8hpp.html#a033b133f48e61f2b227c52ad2be0c882">OT_ASSERT_MSG</a>((NULL != pServer), <span class="stringliteral">&quot;NULL server pointer in OTWallet::m_mapServers, OTWallet::GetServerContract&quot;</span>);
        
        <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> id_CurrentContract;
        pServer-&gt;<a class="code" href="class_o_t_contract.html#acf77d2db6da3904aa8b03e7b87c02e4e">GetIdentifier</a>(id_CurrentContract);
        
        <a class="code" href="class_o_t_string.html">OTString</a> strTemp(id_CurrentContract);
        std::string strIdentifier = strTemp.Get();
        
        <span class="keywordflow">if</span> (strIdentifier.compare(0,PARTIAL_ID.length(),PARTIAL_ID) == 0)
            <span class="keywordflow">return</span> <span class="keyword">dynamic_cast&lt;</span><a class="code" href="class_o_t_server_contract.html">OTServerContract</a> *<span class="keyword">&gt;</span>(pServer);
    }
    <span class="comment">// --------------------------------------</span>
    <span class="comment">// Okay, let&#39;s try it by the name, then.</span>
    <span class="comment">//</span>
    <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_wallet_8hpp.html#aeec04aa40a95a6bef1f1f9c26dd953ef">mapOfServers</a>, m_mapServers)
    {
        <a class="code" href="class_o_t_contract.html">OTContract</a> * pServer = (*it).second;
        <a class="code" href="_o_t_assert_8hpp.html#a033b133f48e61f2b227c52ad2be0c882">OT_ASSERT_MSG</a>((NULL != pServer), <span class="stringliteral">&quot;NULL server pointer in OTWallet::m_mapServers, OTWallet::GetServerContract&quot;</span>);
        
        <a class="code" href="class_o_t_string.html">OTString</a> strName;
        pServer-&gt;<a class="code" href="class_o_t_contract.html#a1afca402333b7c546104d5aa48c8efd9">GetName</a>(strName);
        std::string str_Name = strName.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();
        
        <span class="keywordflow">if</span> (str_Name.compare(0,PARTIAL_ID.length(),PARTIAL_ID) == 0)
            <span class="keywordflow">return</span> <span class="keyword">dynamic_cast&lt;</span><a class="code" href="class_o_t_server_contract.html">OTServerContract</a> *<span class="keyword">&gt;</span>(pServer);
    }
    <span class="comment">// --------------------------------------</span>
    <span class="keywordflow">return</span> NULL;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a4fe8fefbb7d541cab17d920259cd81b7"></a><!-- doxytag: member="OTWallet::GetServerCount" ref="a4fe8fefbb7d541cab17d920259cd81b7" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_wallet.html#a4fe8fefbb7d541cab17d920259cd81b7">OTWallet::GetServerCount</a> </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_wallet_8cpp_source.html#l00335">335</a> of file <a class="el" href="_o_t_wallet_8cpp_source.html">OTWallet.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span>int32_t<span class="keyword">&gt;</span> (m_mapServers.size());
}
</pre></div>
</div>
</div>
<a class="anchor" id="a9972dc0c6da96758f41ff3980a13146c"></a><!-- doxytag: member="OTWallet::IsNymOnCachedKey" ref="a9972dc0c6da96758f41ff3980a13146c" args="(const OTIdentifier &amp;needle) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_wallet.html#a9972dc0c6da96758f41ff3980a13146c">OTWallet::IsNymOnCachedKey</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;&#160;</td>
          <td class="paramname"><em>needle</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_wallet_8cpp_source.html#l01827">1827</a> of file <a class="el" href="_o_t_wallet_8cpp_source.html">OTWallet.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_o_t_storage_8hpp.html#a804eb881e96b7e1846d130a55a94f716">FOR_EACH_CONST</a>(<a class="code" href="_o_t_pseudonym_8hpp.html#a0bc81a24d519f3ec8bd73e9d8d65a388">setOfIdentifiers</a>, m_setNymsOnCachedKey)
    {
        <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> &amp; theNymID = *it;
        
        <span class="keywordflow">if</span> (needle == theNymID)
            <span class="keywordflow">return</span> <span class="keyword">true</span>;
    }
    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab7a6c57d91a0c93be57afe78c56e86a7"></a><!-- doxytag: member="OTWallet::LoadAccount" ref="ab7a6c57d91a0c93be57afe78c56e86a7" args="(OTPseudonym &amp;theNym, const OTIdentifier &amp;ACCT_ID, const OTIdentifier &amp;SERVER_ID, const char *szFuncName=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_account.html">OTAccount</a> * <a class="el" href="class_o_t_wallet.html#ab7a6c57d91a0c93be57afe78c56e86a7">OTWallet::LoadAccount</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;&#160;</td>
          <td class="paramname"><em>theNym</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;&#160;</td>
          <td class="paramname"><em>ACCT_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>szFuncName</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_wallet_8cpp_source.html#l00872">872</a> of file <a class="el" href="_o_t_wallet_8cpp_source.html">OTWallet.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keyword">const</span> <span class="keywordtype">char</span> * szFunc = (NULL != szFuncName) ? szFuncName : <span class="stringliteral">&quot;OTWallet::LoadAccount&quot;</span>;
    <span class="comment">// -----------------</span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strAcctID(ACCT_ID);
    <a class="code" href="class_o_t_account.html">OTAccount</a> * pAccount = <a class="code" href="class_o_t_account.html#a6574057f6e3415546d3a9f7d7e445e4f">OTAccount::LoadExistingAccount</a>(ACCT_ID, SERVER_ID);
    <span class="comment">// --------------------------------------------</span>
    <span class="comment">// It loaded successfully...</span>
    <span class="comment">//</span>
    <span class="keywordflow">if</span> (NULL != pAccount) <span class="comment">// pAccount EXISTS...</span>
    {
        <span class="keywordtype">bool</span> bVerified = this-&gt;<a class="code" href="class_o_t_wallet.html#a6e8a382507e28a953b97572f6f08fda5">VerifyAssetAccount</a>(theNym, *pAccount, SERVER_ID, strAcctID, szFunc);
        
        <span class="keywordflow">if</span> (<span class="keyword">false</span> == bVerified)
        {
            <span class="keyword">delete</span> pAccount;  pAccount = NULL;
            <span class="keywordflow">return</span> NULL; <span class="comment">// No need to log, since VerifyAssetAccount() already logs.</span>
        }
        <span class="comment">// -----------------------------------------------------</span>
        <span class="comment">// If I had to load it myself, that means I need to add it to the wallet.</span>
        <span class="comment">// (Whereas if GetAccount() had worked, then it would ALREADY be in the wallet,</span>
        <span class="comment">// and thus I shouldn&#39;t add it twice...)</span>
        <span class="comment">//</span>
        this-&gt;<a class="code" href="class_o_t_wallet.html#ad9d3208fb49a461c1bc6310ea438cd6a">AddAccount</a>(*pAccount);
        <span class="comment">// -----------------------------------------------------</span>
    }
    <span class="keywordflow">else</span>
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;OTWallet::LoadAccount %s: Failed loading Asset Account: %s\n&quot;</span>,
                      szFunc, strAcctID.Get());
        <span class="keywordflow">return</span> NULL;
    }
    <span class="comment">// ---------------------------</span>
    <span class="keywordflow">return</span> pAccount;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a2932e7c8d6b5d7764707e653a3c2f216"></a><!-- doxytag: member="OTWallet::LoadWallet" ref="a2932e7c8d6b5d7764707e653a3c2f216" args="(const char *szFilename=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_wallet.html#a2932e7c8d6b5d7764707e653a3c2f216">OTWallet::LoadWallet</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>szFilename</em> = <code>NULL</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_wallet_8cpp_source.html#l01383">1383</a> of file <a class="el" href="_o_t_wallet_8cpp_source.html">OTWallet.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_o_t_assert_8hpp.html#a033b133f48e61f2b227c52ad2be0c882">OT_ASSERT_MSG</a>(<a class="code" href="class_o_t_wallet.html#adb10475854eb56eb47a091cf265a21a8">m_strFilename</a>.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>() || (NULL != szFilename), <span class="stringliteral">&quot;OTWallet::LoadWallet: NULL filename.\n&quot;</span>);
    <span class="comment">// --------------------------------------------------------------------</span>
    <a class="code" href="class_o_t_wallet.html#a72d644a855faf67b1fc2c52c112f2a0e">Release</a>();
    <span class="comment">// --------------------------------------------------------------------</span>
    <span class="comment">// The directory is &quot;.&quot; because unlike every other OT file, the wallet file</span>
    <span class="comment">// doesn&#39;t go into a subdirectory, but it goes into the main data_folder itself.</span>
    <span class="comment">// Every other file, however, needs to specify its folder AND filename (and both</span>
    <span class="comment">// of those will be appended to the local path to form the complete file path.)</span>
    <span class="comment">//    </span>
    <span class="keywordflow">if</span> (!<a class="code" href="class_o_t_wallet.html#adb10475854eb56eb47a091cf265a21a8">m_strFilename</a>.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>())  <span class="comment">// If it&#39;s not already set, then set it.</span>
        <a class="code" href="class_o_t_wallet.html#adb10475854eb56eb47a091cf265a21a8">m_strFilename</a>.<a class="code" href="class_o_t_string.html#aa5db620fe8e60c849585d741975db991">Set</a>(szFilename); <span class="comment">// (We know NULL wasn&#39;t passed in, in this case.)</span>
    
    <span class="keywordflow">if</span> (NULL == szFilename) <span class="comment">// If NULL was passed in, then set the pointer to existing string.</span>
        szFilename = <a class="code" href="class_o_t_wallet.html#adb10475854eb56eb47a091cf265a21a8">m_strFilename</a>.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(); <span class="comment">// (We know existing string is there, in this case.)</span>
    <span class="comment">// --------------------------------------------------------------------</span>
    <span class="keywordflow">if</span> (<span class="keyword">false</span> == <a class="code" href="namespace_o_t_d_b.html#a73e39a590dfb64f63065821c6bbcd4c6">OTDB::Exists</a>(<span class="stringliteral">&quot;.&quot;</span>, szFilename))
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Wallet file does not exist: %s. Creating...\n&quot;</span>,
                      __FUNCTION__, szFilename);

        <span class="keyword">const</span> <span class="keywordtype">char</span> * szContents =
          <span class="stringliteral">&quot;&lt;?xml version=\&quot;1.0\&quot;?&gt;\n&quot;</span>
          <span class="stringliteral">&quot;&lt;wallet name=\&quot;\&quot; version=\&quot;1.0\&quot;&gt;\n&quot;</span>
          <span class="stringliteral">&quot;\n&quot;</span>
          <span class="stringliteral">&quot;&lt;/wallet&gt;\n&quot;</span>
          ;
<span class="comment">//        &quot;&lt;?xml version=\&quot;1.0\&quot;?&gt;\n&quot;</span>
<span class="comment">//        &quot;&lt;wallet name=&quot;&quot; version=\&quot;2.0\&quot;&gt;\n&quot;</span>
<span class="comment">//        &quot;\n&quot;</span>
<span class="comment">//        &quot;&lt;cachedKey&gt;\n&quot;</span>
<span class="comment">//        &quot;CkwAAQCAAAD//wAAAAhVRpwTzc+1NAAAABCKe14aROG8v/ite3un3bBCAAAAINyw\n&quot;</span>
<span class="comment">//        &quot;HXTM/x449Al2z8zBHBTRF77jhHkYLj8MIgqrJ2Ep\n&quot;</span>
<span class="comment">//        &quot;&lt;/cachedKey&gt;\n&quot;</span>
<span class="comment">//        &quot;\n&quot;</span>
<span class="comment">//        &quot;&lt;/wallet&gt;\n&quot;</span>
        
        <span class="keywordflow">if</span> (!<a class="code" href="namespace_o_t_d_b.html#a7ec0a905bba2c1c8ba5b1e873e12eab4">OTDB::StorePlainString</a>(szContents, <span class="stringliteral">&quot;.&quot;</span>, szFilename))
        {
            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error: Unable to create blank wallet file.\n&quot;</span>, __FUNCTION__);
            <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; <span class="comment">// the end.</span>
        }
    }
    <span class="comment">// --------------------------------------------------------------------</span>
    <a class="code" href="class_o_t_string.html">OTString</a> strFileContents(<a class="code" href="namespace_o_t_d_b.html#a921d6f538de00f4e4297c25cf679f00a">OTDB::QueryPlainString</a>(<span class="stringliteral">&quot;.&quot;</span>, szFilename)); <span class="comment">// &lt;=== LOADING FROM DATA STORE.</span>
    
    <span class="keywordflow">if</span> (<span class="keyword">false</span> == strFileContents.Exists())
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error reading wallet file: %s\n&quot;</span>, __FUNCTION__, szFilename);
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// --------------------------------------------------------------------</span>
    <span class="keywordtype">bool</span> bNeedToSaveAgain = <span class="keyword">false</span>;

    {
        <a class="code" href="class_o_t_string_x_m_l.html">OTStringXML</a> xmlFileContents(strFileContents);

        <span class="keywordflow">if</span> (<span class="keyword">false</span> == xmlFileContents.DecodeIfArmored()) <span class="comment">// bEscapedIsAllowed=true by default.</span>
        {
            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Input string apparently was encoded and then failed decoding. Filename: %s \n&quot;</span>
                          <span class="stringliteral">&quot;Contents: \n%s\n&quot;</span>, __FUNCTION__, szFilename, strFileContents.Get());
            <span class="keywordflow">return</span> <span class="keyword">false</span>;
        }
        <span class="comment">// --------------------------------------------------------------------</span>
        <a class="code" href="namespaceirr_1_1io.html#a1628edbb9d5d53f18c82d2a92b0ad27e">irr::io::IrrXMLReader</a>* xml = irr::io::createIrrXMLReader(xmlFileContents);

        <span class="comment">// parse the file until end reached</span>
        <span class="keywordflow">while</span>(xml &amp;&amp; xml-&gt;read())
        {
            <span class="comment">// strings for storing the data that we want to read out of the file</span>
            <a class="code" href="class_o_t_string.html">OTString</a> NymName;
            <a class="code" href="class_o_t_string.html">OTString</a> NymID;
            
            <a class="code" href="class_o_t_string.html">OTString</a> AssetName;
            <a class="code" href="class_o_t_string.html">OTString</a> AssetContract;
            <a class="code" href="class_o_t_string.html">OTString</a> AssetID;
            
            <a class="code" href="class_o_t_string.html">OTString</a> ServerName;
            <a class="code" href="class_o_t_string.html">OTString</a> ServerContract;
            <a class="code" href="class_o_t_string.html">OTString</a> ServerID;
            
            <a class="code" href="class_o_t_string.html">OTString</a> AcctName;
            <a class="code" href="class_o_t_string.html">OTString</a> AcctFile;
            <a class="code" href="class_o_t_string.html">OTString</a> AcctID;
            
            <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strNodeName(xml-&gt;getNodeName());
            
            <span class="keywordflow">switch</span>(xml-&gt;getNodeType())
            {
            <span class="keywordflow">case</span> irr::io::EXN_NONE:
            <span class="keywordflow">case</span> irr::io::EXN_TEXT:
            <span class="keywordflow">case</span> irr::io::EXN_COMMENT:
            <span class="keywordflow">case</span> irr::io::EXN_ELEMENT_END:
            <span class="keywordflow">case</span> irr::io::EXN_CDATA:
                    <span class="comment">// in this xml file, the only text which occurs is the messageText</span>
                    <span class="comment">//messageText = xml-&gt;getNodeData();</span>
                    <span class="keywordflow">break</span>;
            <span class="keywordflow">case</span> irr::io::EXN_ELEMENT:
                {
                    <span class="keywordflow">if</span> (strNodeName.Compare(<span class="stringliteral">&quot;wallet&quot;</span>))  <span class="comment">// -------------------------------------------------------------</span>
                    {
                        <a class="code" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> ascWalletName = xml-&gt;getAttributeValue(<span class="stringliteral">&quot;name&quot;</span>);
                        
                        <span class="keywordflow">if</span> (ascWalletName.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>())
                            ascWalletName.<a class="code" href="class_o_t_a_s_c_i_i_armor.html#ab39b6cae69c14149716e5ce7a6f0bb0f">GetString</a>(m_strName, <span class="keyword">false</span>); <span class="comment">// linebreaks == false</span>

<span class="comment">//                      m_strName           = xml-&gt;getAttributeValue(&quot;name&quot;);</span>
<span class="comment">//                      OTLog::OTPath       = xml-&gt;getAttributeValue(&quot;path&quot;);                   </span>
                        m_strVersion        = xml-&gt;getAttributeValue(<span class="stringliteral">&quot;version&quot;</span>);                    
                        
                        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(1, <span class="stringliteral">&quot;\nLoading wallet: %s, version: %s\n&quot;</span>, m_strName.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(), m_strVersion.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
                    }
                    <span class="comment">// ----------------------------------------------------</span>
                    <span class="comment">// todo: Remove the masterKey after a while. It&#39;s here for now so people&#39;s data files can get</span>
                    <span class="comment">// converted over. After a while, just remove it.</span>
                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strNodeName.Compare(<span class="stringliteral">&quot;masterKey&quot;</span>) || strNodeName.Compare(<span class="stringliteral">&quot;cachedKey&quot;</span>))
                    {
                        <a class="code" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> ascCachedKey;

                        <span class="keywordflow">if</span> (<a class="code" href="class_o_t_contract.html#a72ffe11fdcf2f6e3566afa9061241f30">OTContract::LoadEncodedTextField</a>(xml, ascCachedKey))
                        {
                            <span class="comment">// We successfully loaded the cachedKey from file, so let&#39;s SET it</span>
                            <span class="comment">// as the cached key globally...</span>
                            <span class="comment">//</span>
                            <a class="code" href="class_o_t_cached_key.html#a8780b8a3f392b0bc4c11253a797d8b5a">OTCachedKey::It</a>()-&gt;SetCachedKey(ascCachedKey);

                            <span class="keywordflow">if</span> (!<a class="code" href="class_o_t_cached_key.html#a8780b8a3f392b0bc4c11253a797d8b5a">OTCachedKey::It</a>()-&gt;HasHashCheck())
                            {
                                <a class="code" href="class_o_t_password.html">OTPassword</a> tempPassword; tempPassword.<a class="code" href="class_o_t_password.html#a3a971b06f42d1c89802167a0ab5330a5">zeroMemory</a>();
                                
                                _SharedPtr&lt;OTCachedKey&gt; sharedPtr(<a class="code" href="class_o_t_cached_key.html#a8780b8a3f392b0bc4c11253a797d8b5a">OTCachedKey::It</a>());
                                
                                bNeedToSaveAgain = sharedPtr-&gt;GetMasterPassword(sharedPtr,
                                                                                tempPassword,
                                                                                <span class="stringliteral">&quot;We do not have a check hash yet for this password, please enter your password&quot;</span>, <span class="keyword">true</span>);
                            }
                        }
                        
                        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(1, <span class="stringliteral">&quot;Loading cachedKey:\n%s\n&quot;</span>, ascCachedKey.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
                    }
                    
                    <span class="comment">// todo: Remove the nymUsingMasterKey after a while. It&#39;s here for now so people&#39;s data files can get</span>
                    <span class="comment">// converted over. After a while, just remove it. </span>
                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strNodeName.Compare(<span class="stringliteral">&quot;nymUsingMasterKey&quot;</span>) || strNodeName.Compare(<span class="stringliteral">&quot;nymUsingCachedKey&quot;</span>))
                                                <span class="comment">// -------------------------------------------------------------</span>
                    {
                        NymID = xml-&gt;getAttributeValue(<span class="stringliteral">&quot;id&quot;</span>); <span class="comment">// message digest from hash of x.509 cert or public key.</span>
                        
                        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(1, <span class="stringliteral">&quot;NymID using Cached Key: %s\n&quot;</span>, NymID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
                        <span class="keywordflow">if</span> (!NymID.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: NymID using Cached Key was empty when loading wallet!\n&quot;</span>, __FUNCTION__); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
                        <span class="comment">// ----------------------</span>
                        <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theNymID(NymID);
                        
                        m_setNymsOnCachedKey.insert(theNymID);
                    }

                    
                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strNodeName.Compare(<span class="stringliteral">&quot;pseudonym&quot;</span>))  <span class="comment">// -------------------------------------------------------------</span>
                    {
                        <a class="code" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> ascNymName = xml-&gt;getAttributeValue(<span class="stringliteral">&quot;name&quot;</span>);
                        <span class="keywordflow">if</span> (ascNymName.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>())
                            ascNymName.<a class="code" href="class_o_t_a_s_c_i_i_armor.html#ab39b6cae69c14149716e5ce7a6f0bb0f">GetString</a>(NymName, <span class="keyword">false</span>); <span class="comment">// linebreaks == false</span>

                        NymID = xml-&gt;getAttributeValue(<span class="stringliteral">&quot;nymID&quot;</span>); <span class="comment">// message digest from hash of x.509 cert or public key.</span>
                        
                        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(2, <span class="stringliteral">&quot;\n\n** Pseudonym ** (wallet listing): %s\nID: %s\n&quot;</span>,
                                       NymName.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(), NymID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
                        <span class="keywordflow">if</span> (!NymID.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: NymID dosn&#39;t Exist!\n&quot;</span>, __FUNCTION__); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }

                        <span class="comment">// ----------------------</span>
                        <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theNymID(NymID);

                        <span class="comment">// What&#39;s going on here? We need to see if the MASTER KEY exists at this point. If it&#39;s GENERATED.</span>
                        <span class="comment">// If not, that means the Nyms are all still encrypted to their own passphrases, not to the master key.</span>
                        <span class="comment">// In which case we need to generate one and re-encrypt each private key to that new master key.</span>
                        <span class="comment">//</span>
    <span class="comment">//                  bool OTWallet::IsNymOnCachedKey(const OTIdentifier &amp; needle) const // needle and haystack.</span>

                        <span class="keyword">const</span> <span class="keywordtype">bool</span> bIsOldStyleNym = (<span class="keyword">false</span> == this-&gt;<a class="code" href="class_o_t_wallet.html#a9972dc0c6da96758f41ff3980a13146c">IsNymOnCachedKey</a>(theNymID));
                        
                        <span class="keywordflow">if</span> (bIsOldStyleNym &amp;&amp; !(<a class="code" href="class_o_t_cached_key.html#a8780b8a3f392b0bc4c11253a797d8b5a">OTCachedKey::It</a>()-&gt;isPaused()))
    <span class="comment">//                  if (m_strVersion.Compare(&quot;1.0&quot;)) // This means this Nym has not been converted yet to master password.</span>
                        {
                            <a class="code" href="class_o_t_cached_key.html#a8780b8a3f392b0bc4c11253a797d8b5a">OTCachedKey::It</a>()-&gt;Pause();
                        }
                        <span class="comment">// ----------------------</span>
                        <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pNym = <a class="code" href="class_o_t_pseudonym.html#ac1e2478e3a8604944d2d826df8afedd6">OTPseudonym::LoadPrivateNym</a>(theNymID, <span class="keyword">false</span>, &amp;NymName);
                        <span class="comment">// If it fails loading as a private Nym, then maybe it&#39;s a public one...</span>
                        <span class="keywordflow">if</span> (NULL == pNym)
                            pNym = <a class="code" href="class_o_t_pseudonym.html#aef446a600137c016e2db08d89304ff93">OTPseudonym::LoadPublicNym</a>(theNymID, &amp;NymName);
                        <span class="comment">// --------------------------------------------</span>
                        <span class="keywordflow">if</span> (NULL == pNym) <span class="comment">// STILL null ??</span>
                            <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Failed loading Nym (%s) with ID: %s\n&quot;</span>,
                                           __FUNCTION__, NymName.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(), NymID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
                        <span class="keywordflow">else</span> 
                            this-&gt;<a class="code" href="class_o_t_wallet.html#acb570de733658a4ad24756dde0f22a34">AddNym</a>(*pNym); <span class="comment">// Nym loaded. Insert to wallet&#39;s list of Nyms.</span>
                        <span class="comment">// -------------------------------------------------------------</span>
                        <span class="keywordflow">if</span> (bIsOldStyleNym &amp;&amp; <a class="code" href="class_o_t_cached_key.html#a8780b8a3f392b0bc4c11253a797d8b5a">OTCachedKey::It</a>()-&gt;isPaused())
                        {
                            <a class="code" href="class_o_t_cached_key.html#a8780b8a3f392b0bc4c11253a797d8b5a">OTCachedKey::It</a>()-&gt;Unpause();
                        }
                        <span class="comment">// (Here we set it back again, so any new-style Nyms will still load properly, when they come around.)</span>
                    }
                    
                    
                    <span class="comment">// NOTE: It&#39;s only by THIS point (assetType) that we KNOW we loaded all the Nyms.</span>
                    <span class="comment">// If we are version 1.0, NOW we should convert them all to the new master key!!</span>
                    
                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strNodeName.Compare(<span class="stringliteral">&quot;assetType&quot;</span>))  <span class="comment">// -------------------------------------------------------------</span>
                    {
                        <span class="comment">// -------------------------------------------------------</span>
                        <a class="code" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> ascAssetName = xml-&gt;getAttributeValue(<span class="stringliteral">&quot;name&quot;</span>); 
                        
                        <span class="keywordflow">if</span> (ascAssetName.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>())
                            ascAssetName.<a class="code" href="class_o_t_a_s_c_i_i_armor.html#ab39b6cae69c14149716e5ce7a6f0bb0f">GetString</a>(AssetName, <span class="keyword">false</span>); <span class="comment">// linebreaks == false</span>

    <span class="comment">//                  AssetName       = xml-&gt;getAttributeValue(&quot;name&quot;);           </span>
                        AssetID         = xml-&gt;getAttributeValue(<span class="stringliteral">&quot;assetTypeID&quot;</span>);    <span class="comment">// hash of contract itself</span>
                        
                        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(2, <span class="stringliteral">&quot;\n\n****Asset Contract**** (wallet listing)\n  Asset Name: %s\n Contract ID: %s\n&quot;</span>,
                                       AssetName.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(), AssetID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
                        
                        <a class="code" href="class_o_t_string.html">OTString</a> strContractPath;
                        strContractPath.<a class="code" href="class_o_t_string.html#af1c861f21033a1d583b3cb12f952422e">Format</a>(<a class="code" href="class_o_t_folders.html#ac8ac28307d688d0defee0fd7734be027">OTFolders::Contract</a>().Get());
                        <a class="code" href="class_o_t_asset_contract.html">OTAssetContract</a> * pContract = <span class="keyword">new</span> <a class="code" href="class_o_t_asset_contract.html">OTAssetContract</a>(AssetName, strContractPath, AssetID, AssetID);

                        <a class="code" href="_o_t_assert_8hpp.html#a033b133f48e61f2b227c52ad2be0c882">OT_ASSERT_MSG</a>(NULL != pContract, <span class="stringliteral">&quot;Error allocating memory for Asset Contract in OTWallet::LoadWallet\n&quot;</span>);
                
                        <span class="keywordflow">if</span> (pContract-&gt;<a class="code" href="class_o_t_contract.html#a1432a5e924d021a9dc39320d3b8e7b90">LoadContract</a>()) 
                        {
                            <span class="keywordflow">if</span> (pContract-&gt;<a class="code" href="class_o_t_contract.html#aa707f03da51449ef0cd1a466cbc0f13c">VerifyContract</a>())
                            {
                                <a class="code" href="class_o_t_log.html#a1f7549d776ee919dcb6517f611ded015">OTLog::Output</a>(1, <span class="stringliteral">&quot;** Asset Contract Verified **\n-----------------------------------------------------------------------------\n\n&quot;</span>);
                                
                                pContract-&gt;<a class="code" href="class_o_t_contract.html#ae6ad4eed689a88335c8818d7762bbbcb">SetName</a>(AssetName);
                                
                                m_mapContracts[AssetID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>()] = pContract;
                            }
                            <span class="keywordflow">else</span>
                            {
                                <span class="keyword">delete</span> pContract; pContract = NULL;
                                <a class="code" href="class_o_t_log.html#a1f7549d776ee919dcb6517f611ded015">OTLog::Output</a>(0, <span class="stringliteral">&quot;Contract FAILED to verify.\n&quot;</span>);
                            }                           
                        }
                        <span class="keywordflow">else</span> 
                        {
                            <span class="keyword">delete</span> pContract; pContract = NULL;
                            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error reading file for Asset Contract.\n&quot;</span>, __FUNCTION__);
                        }

                    }
                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strNodeName.Compare(<span class="stringliteral">&quot;notaryProvider&quot;</span>)) <span class="comment">// -------------------------------------------------------------                </span>
                    {
                        <a class="code" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> ascServerName = xml-&gt;getAttributeValue(<span class="stringliteral">&quot;name&quot;</span>);    
                        
                        <span class="keywordflow">if</span> (ascServerName.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>())
                            ascServerName.<a class="code" href="class_o_t_a_s_c_i_i_armor.html#ab39b6cae69c14149716e5ce7a6f0bb0f">GetString</a>(ServerName, <span class="keyword">false</span>); <span class="comment">// linebreaks == false</span>
        
    <span class="comment">//                  ServerName = xml-&gt;getAttributeValue(&quot;name&quot;);                    </span>
                        ServerID = xml-&gt;getAttributeValue(<span class="stringliteral">&quot;serverID&quot;</span>); <span class="comment">// hash of contract</span>
                        
                        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(2, <span class="stringliteral">&quot;\n\n\n****Server Contract**** (wallet listing):\n Server Name: %s\n   Server ID: %s\n&quot;</span>,
                                ServerName.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(), ServerID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
                    
                        <a class="code" href="class_o_t_string.html">OTString</a> strContractPath(<a class="code" href="class_o_t_folders.html#ac8ac28307d688d0defee0fd7734be027">OTFolders::Contract</a>().Get());
                        
                        <a class="code" href="class_o_t_server_contract.html">OTServerContract</a> * pContract = <span class="keyword">new</span> <a class="code" href="class_o_t_server_contract.html">OTServerContract</a>(ServerName, strContractPath, ServerID, ServerID);
                        
                        <a class="code" href="_o_t_assert_8hpp.html#a033b133f48e61f2b227c52ad2be0c882">OT_ASSERT_MSG</a>(NULL != pContract, <span class="stringliteral">&quot;Error allocating memory for Server Contract in OTWallet::LoadWallet\n&quot;</span>);
                        
                        <span class="keywordflow">if</span> (pContract-&gt;<a class="code" href="class_o_t_contract.html#a1432a5e924d021a9dc39320d3b8e7b90">LoadContract</a>()) 
                        {
                            <span class="keywordflow">if</span> (pContract-&gt;<a class="code" href="class_o_t_contract.html#aa707f03da51449ef0cd1a466cbc0f13c">VerifyContract</a>())
                            {
                                pContract-&gt;<a class="code" href="class_o_t_contract.html#ae6ad4eed689a88335c8818d7762bbbcb">SetName</a>(ServerName); <span class="comment">// This isn&#39;t needed, but it&#39;s proper.</span>
                                
                                <a class="code" href="class_o_t_log.html#a1f7549d776ee919dcb6517f611ded015">OTLog::Output</a>(1, <span class="stringliteral">&quot;** Server Contract Verified **\n-----------------------------------------------------------------------------\n\n&quot;</span>);
                                <span class="comment">// Uncomment : Move these lines back above the &#39;if&#39; block to regenerate some newly-signed contracts.</span>
                                <span class="comment">// (for testing only.) Otherwise leave here where it belongs.</span>
                                m_mapServers[ServerID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>()] = pContract;                           
                            }
                            <span class="keywordflow">else</span>
                            {
                                <span class="keyword">delete</span> pContract; pContract = NULL;
                                <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Server contract failed to verify.\n&quot;</span>, __FUNCTION__);
                            }
                        }
                        <span class="keywordflow">else</span> 
                        {
                            <span class="keyword">delete</span> pContract; pContract = NULL;
                            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error reading file for Transaction Server.\n&quot;</span>, __FUNCTION__);
                        }
                    }
                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strNodeName.Compare(<span class="stringliteral">&quot;assetAccount&quot;</span>))   <span class="comment">// -------------------------------------------------------------                </span>
                    {
                        <a class="code" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> ascAcctName = xml-&gt;getAttributeValue(<span class="stringliteral">&quot;name&quot;</span>);  
                        
                        <span class="keywordflow">if</span> (ascAcctName.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>())
                            ascAcctName.<a class="code" href="class_o_t_a_s_c_i_i_armor.html#ab39b6cae69c14149716e5ce7a6f0bb0f">GetString</a>(AcctName, <span class="keyword">false</span>); <span class="comment">// linebreaks == false</span>
                        
                        AcctID   = xml-&gt;getAttributeValue(<span class="stringliteral">&quot;accountID&quot;</span>);
                        ServerID = xml-&gt;getAttributeValue(<span class="stringliteral">&quot;serverID&quot;</span>);
                                            
                        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(2, <span class="stringliteral">&quot;\n--------------------------------------------------------------------------\n&quot;</span>
                                <span class="stringliteral">&quot;****Account**** (wallet listing)\n&quot;</span>
                                <span class="stringliteral">&quot; Account Name: %s\n   Account ID: %s\n    Server ID: %s\n&quot;</span>, 
                                AcctName.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(), AcctID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(), ServerID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
                        
                        <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> ACCOUNT_ID(AcctID), SERVER_ID(ServerID);
                        
                        <a class="code" href="class_o_t_account.html">OTAccount</a> * pAccount =  <a class="code" href="class_o_t_account.html#a6574057f6e3415546d3a9f7d7e445e4f">OTAccount::LoadExistingAccount</a>(ACCOUNT_ID, SERVER_ID);
                        
                        <span class="keywordflow">if</span> (pAccount)
                        {
                            pAccount-&gt;<a class="code" href="class_o_t_contract.html#ae6ad4eed689a88335c8818d7762bbbcb">SetName</a>(AcctName);
                            this-&gt;<a class="code" href="class_o_t_wallet.html#ad9d3208fb49a461c1bc6310ea438cd6a">AddAccount</a>(*pAccount);
                        }
                        <span class="keywordflow">else</span> 
                        {
                            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Error loading existing Asset Account.\n&quot;</span>, __FUNCTION__);
                        }
                    }
                    <span class="keywordflow">else</span>
                    {
                        <span class="comment">// unknown element type</span>
                        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: unknown element type: %s\n&quot;</span>, __FUNCTION__, xml-&gt;getNodeName());
                    }
                }
                    <span class="keywordflow">break</span>;
                <span class="keywordflow">default</span>:
                    <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(5, <span class="stringliteral">&quot;%s: Unknown XML type: %s\n&quot;</span>, __FUNCTION__, xml-&gt;getNodeName());
                    <span class="keywordflow">break</span>;
            }
        } <span class="comment">// while xml-&gt;read()</span>
        <span class="comment">// ---------------------------------------------</span>

        <span class="comment">// After we&#39;ve loaded all the old-format Nyms that don&#39;t use the master key,</span>
        <span class="comment">// NOW we can go through and convert them all, now that they&#39;re all loaded.</span>
        <span class="comment">// -------------------------------------------------------------------------</span>
        
        <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_agent_8hpp.html#ac89892658f6bc83e354078647b704e8f">mapOfNyms</a>, m_mapNyms)
        {       
            <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pNym = (*it).second;
            <a class="code" href="_o_t_assert_8hpp.html#a033b133f48e61f2b227c52ad2be0c882">OT_ASSERT_MSG</a>((NULL != pNym), <span class="stringliteral">&quot;ASSERT: OTWallet::LoadWallet: NULL pseudonym pointer.&quot;</span>);
            
            <span class="keywordflow">if</span> (pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#a27b67139a33989a0db8ca027f03b3257">HasPrivateKey</a>() &amp;&amp; this-&gt;<a class="code" href="class_o_t_wallet.html#a59daeb8ce8f92530c5ddb4fcd1dde7d4">ConvertNymToCachedKey</a>(*pNym)) <span class="comment">// Internally this is smart enough to only convert the unconverted.</span>
                bNeedToSaveAgain = <span class="keyword">true</span>;
        }   
        <span class="comment">// ---------------------------------------------</span>
        <span class="comment">//</span>
        <span class="comment">// delete the xml parser after usage</span>
        <span class="keywordflow">if</span> (xml)
            <span class="keyword">delete</span> xml;
    }
    <span class="comment">// -----------------------</span>
    <span class="comment">// In case we converted any of the Nyms to the new &quot;master key&quot; encryption.</span>
    <span class="keywordflow">if</span> (bNeedToSaveAgain)
        <a class="code" href="class_o_t_wallet.html#aa16fe70ac5913e3223f994d7dc8a4831">SaveWallet</a>(szFilename);
    <span class="comment">// -----------------------</span>
    <span class="keywordflow">return</span> <span class="keyword">true</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a72d644a855faf67b1fc2c52c112f2a0e"></a><!-- doxytag: member="OTWallet::Release" ref="a72d644a855faf67b1fc2c52c112f2a0e" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_wallet.html#a72d644a855faf67b1fc2c52c112f2a0e">OTWallet::Release</a> </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_wallet_8cpp_source.html#l00158">158</a> of file <a class="el" href="_o_t_wallet_8cpp_source.html">OTWallet.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{   
    <a class="code" href="class_o_t_wallet.html#acae9c183e9f33e24c5a1466a6e72b966">Release_Wallet</a>();
    
    <span class="comment">// no call to ot_super here since there are no child classes.</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="acae9c183e9f33e24c5a1466a6e72b966"></a><!-- doxytag: member="OTWallet::Release_Wallet" ref="acae9c183e9f33e24c5a1466a6e72b966" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_wallet.html#acae9c183e9f33e24c5a1466a6e72b966">OTWallet::Release_Wallet</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_wallet_8cpp_source.html#l00166">166</a> of file <a class="el" href="_o_t_wallet_8cpp_source.html">OTWallet.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{   
    <span class="comment">//1) Go through the map of Nyms and delete them. (They were dynamically allocated.)</span>
    <span class="keywordflow">while</span> (!m_mapNyms.empty())
    {       
        <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pNym = m_mapNyms.begin()-&gt;second;
        
        <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pNym);
        
        <span class="keyword">delete</span> pNym;
        pNym = NULL;
        
        m_mapNyms.erase(m_mapNyms.begin());
    }   
    
    <span class="comment">//2) Go through the map of Contracts and delete them. (They were dynamically allocated.)</span>
    <span class="keywordflow">while</span> (!m_mapContracts.empty())
    {       
        <a class="code" href="class_o_t_asset_contract.html">OTAssetContract</a> * pContract = m_mapContracts.begin()-&gt;second;
        
        <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pContract);
        
        <span class="keyword">delete</span> pContract;
        pContract = NULL;
        
        m_mapContracts.erase(m_mapContracts.begin());
    }   
    
    <span class="comment">//3) Go through the map of Servers and delete them. (They were dynamically allocated.)</span>
    <span class="keywordflow">while</span> (!m_mapServers.empty())
    {       
        <a class="code" href="class_o_t_server_contract.html">OTServerContract</a> * pContract = m_mapServers.begin()-&gt;second;
        
        <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pContract);
        
        <span class="keyword">delete</span> pContract;
        pContract = NULL;
        
        m_mapServers.erase(m_mapServers.begin());
    }   
    
    <span class="comment">//4) Go through the map of Accounts and delete them. (They were dynamically allocated.)</span>
    <span class="keywordflow">while</span> (!m_mapAccounts.empty())
    {       
        <a class="code" href="class_o_t_account.html">OTAccount</a> * pAccount = m_mapAccounts.begin()-&gt;second;
        
        <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pAccount);
        
        <span class="keyword">delete</span> pAccount;
        pAccount = NULL;
        
        m_mapAccounts.erase(m_mapAccounts.begin());
    }   
}
</pre></div>
</div>
</div>
<a class="anchor" id="abc47515d8104ba094bab2417d66a5161"></a><!-- doxytag: member="OTWallet::RemoveAccount" ref="abc47515d8104ba094bab2417d66a5161" args="(const OTIdentifier &amp;theTargetID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_wallet.html#abc47515d8104ba094bab2417d66a5161">OTWallet::RemoveAccount</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;&#160;</td>
          <td class="paramname"><em>theTargetID</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_wallet_8cpp_source.html#l01166">1166</a> of file <a class="el" href="_o_t_wallet_8cpp_source.html">OTWallet.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// loop through the accounts and find one with a specific ID.</span>
    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> anAccountID;
    
    <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_agent_8hpp.html#abd4942716d546c8d42670619a03ef99e">mapOfAccounts</a>, m_mapAccounts)
    {
        <a class="code" href="class_o_t_account.html">OTAccount</a> * pAccount = (*it).second;
        <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pAccount);
        
        pAccount-&gt;<a class="code" href="class_o_t_contract.html#acf77d2db6da3904aa8b03e7b87c02e4e">GetIdentifier</a>(anAccountID);
        
        <span class="keywordflow">if</span> (anAccountID == theTargetID)
        {
            m_mapAccounts.erase(it);
            
            <span class="keyword">delete</span> pAccount;
            
            <span class="keywordflow">return</span> <span class="keyword">true</span>;
        }
    }
    
    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a1eae600871447c75a3ddd155c86674a3"></a><!-- doxytag: member="OTWallet::RemoveAssetContract" ref="a1eae600871447c75a3ddd155c86674a3" args="(const OTIdentifier &amp;theTargetID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_wallet.html#a1eae600871447c75a3ddd155c86674a3">OTWallet::RemoveAssetContract</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;&#160;</td>
          <td class="paramname"><em>theTargetID</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_wallet_8cpp_source.html#l01114">1114</a> of file <a class="el" href="_o_t_wallet_8cpp_source.html">OTWallet.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// loop through the items that make up this transaction and print them out here, base64-encoded, of course.</span>
    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> aContractID;
    
    <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_asset_contract_8hpp.html#a88f3c1b8259d44ecd0d15628789315cb">mapOfContracts</a>, m_mapContracts)
    {
        <a class="code" href="class_o_t_asset_contract.html">OTAssetContract</a> * pContract = (*it).second;
        <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pContract);
        
        pContract-&gt;<a class="code" href="class_o_t_contract.html#acf77d2db6da3904aa8b03e7b87c02e4e">GetIdentifier</a>(aContractID);
        
        <span class="keywordflow">if</span> (aContractID == theTargetID)
        {
            m_mapContracts.erase(it);
            
            <span class="keyword">delete</span> pContract;
            
            <span class="keywordflow">return</span> <span class="keyword">true</span>;
        }
    }
    
    <span class="keywordflow">return</span> <span class="keyword">false</span>;   
}
</pre></div>
</div>
</div>
<a class="anchor" id="a7dd1cf4ba4922eacc2c3c81d21dd07dc"></a><!-- doxytag: member="OTWallet::RemoveNym" ref="a7dd1cf4ba4922eacc2c3c81d21dd07dc" args="(const OTIdentifier &amp;theTargetID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_wallet.html#a7dd1cf4ba4922eacc2c3c81d21dd07dc">OTWallet::RemoveNym</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;&#160;</td>
          <td class="paramname"><em>theTargetID</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_wallet_8cpp_source.html#l01082">1082</a> of file <a class="el" href="_o_t_wallet_8cpp_source.html">OTWallet.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_agent_8hpp.html#ac89892658f6bc83e354078647b704e8f">mapOfNyms</a>, m_mapNyms)
    {       
        <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pNym = (*it).second;
        <a class="code" href="_o_t_assert_8hpp.html#a033b133f48e61f2b227c52ad2be0c882">OT_ASSERT_MSG</a>((NULL != pNym), <span class="stringliteral">&quot;NULL pseudonym pointer in OTWallet::RemoveNym.&quot;</span>);

        <span class="keywordflow">if</span> (pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#a5ec9340b8d1d0fcd32f754ea63f9915a">CompareID</a>(theTargetID))
        {
            <span class="comment">// ------------------</span>
            <span class="comment">// We have a set of NymIDs for Nyms in the wallet who are using the Master key.</span>
            <span class="comment">// So if we&#39;re removing the Nym from the wallet, we also remove its ID from that set.</span>
            <span class="comment">//</span>
            <a class="code" href="_o_t_storage_8hpp.html#a115d33c5c479549e19dfead2c55066a4">FOR_EACH_IT_CONST</a>(<a class="code" href="_o_t_pseudonym_8hpp.html#a0bc81a24d519f3ec8bd73e9d8d65a388">setOfIdentifiers</a>, m_setNymsOnCachedKey, it_master)
            {
                <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> &amp; theNymID = *it_master;
                <span class="keywordflow">if</span> (theTargetID == theNymID)
                {
                    m_setNymsOnCachedKey.erase(it_master);
                    <span class="keywordflow">break</span>;
                }
            }            
            <span class="comment">// ------------------</span>
            m_mapNyms.erase(it);
            <span class="keyword">delete</span> pNym;
            <span class="keywordflow">return</span> <span class="keyword">true</span>;
        }
    }
    <span class="keywordflow">return</span> <span class="keyword">false</span>;   
}
</pre></div>
</div>
</div>
<a class="anchor" id="a8a65354fe09bb415ba477d4a565b842f"></a><!-- doxytag: member="OTWallet::RemovePendingWithdrawal" ref="a8a65354fe09bb415ba477d4a565b842f" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_wallet.html#a8a65354fe09bb415ba477d4a565b842f">OTWallet::RemovePendingWithdrawal</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_wallet_8cpp_source.html#l00239">239</a> of file <a class="el" href="_o_t_wallet_8cpp_source.html">OTWallet.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (m_pWithdrawalPurse)
        <span class="keyword">delete</span> m_pWithdrawalPurse;
    
    m_pWithdrawalPurse = NULL;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab739c1b18f6dcc6958cfd1ac53f728d8"></a><!-- doxytag: member="OTWallet::RemoveServerContract" ref="ab739c1b18f6dcc6958cfd1ac53f728d8" args="(const OTIdentifier &amp;theTargetID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_wallet.html#ab739c1b18f6dcc6958cfd1ac53f728d8">OTWallet::RemoveServerContract</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;&#160;</td>
          <td class="paramname"><em>theTargetID</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_wallet_8cpp_source.html#l01140">1140</a> of file <a class="el" href="_o_t_wallet_8cpp_source.html">OTWallet.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_wallet_8hpp.html#aeec04aa40a95a6bef1f1f9c26dd953ef">mapOfServers</a>, m_mapServers)
    {
        <a class="code" href="class_o_t_contract.html">OTContract</a> * pServer = (*it).second;
        <a class="code" href="_o_t_assert_8hpp.html#a033b133f48e61f2b227c52ad2be0c882">OT_ASSERT_MSG</a>((NULL != pServer), <span class="stringliteral">&quot;NULL server pointer in OTWallet::m_mapServers, OTWallet::RemoveServerContract&quot;</span>);
        
        <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> id_CurrentContract;
        pServer-&gt;<a class="code" href="class_o_t_contract.html#acf77d2db6da3904aa8b03e7b87c02e4e">GetIdentifier</a>(id_CurrentContract);
        
        <span class="keywordflow">if</span> (id_CurrentContract == theTargetID)
        {
            m_mapServers.erase(it);
            
            <a class="code" href="class_o_t_server_contract.html">OTServerContract</a> * pServerContract = <span class="keyword">static_cast&lt;</span><a class="code" href="class_o_t_server_contract.html">OTServerContract</a>*<span class="keyword">&gt;</span> (pServer);
            <span class="keyword">delete</span> pServerContract;
            
            <span class="keywordflow">return</span> <span class="keyword">true</span>;
        }
    }
    
    <span class="keywordflow">return</span> <span class="keyword">false</span>;   
}
</pre></div>
</div>
</div>
<a class="anchor" id="a17e01f4969a795d6f304635e45973916"></a><!-- doxytag: member="OTWallet::SaveContract" ref="a17e01f4969a795d6f304635e45973916" args="(OTString &amp;strContract)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_wallet.html#a17e01f4969a795d6f304635e45973916">OTWallet::SaveContract</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strContract</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_wallet_8cpp_source.html#l01246">1246</a> of file <a class="el" href="_o_t_wallet_8cpp_source.html">OTWallet.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{       
    <a class="code" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> ascName;
    
    <span class="keywordflow">if</span> (m_strName.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>()) <span class="comment">// name is in the clear in memory, and base64 in storage.</span>
    {
        ascName.<a class="code" href="class_o_t_a_s_c_i_i_armor.html#ad898bd63a4c37a97f64acfa7514409cc">SetString</a>(m_strName, <span class="keyword">false</span>); <span class="comment">// linebreaks == false</span>
    }
    
    strContract.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;&lt;?xml version=\&quot;1.0\&quot;?&gt;\n&lt;wallet name=\&quot;%s\&quot; version=\&quot;%s\&quot;&gt;\n\n&quot;</span>, 
                            ascName.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(), <a class="code" href="class_o_t_cached_key.html#a8780b8a3f392b0bc4c11253a797d8b5a">OTCachedKey::It</a>()-&gt;IsGenerated() ? <span class="stringliteral">&quot;2.0&quot;</span> : m_strVersion.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
    
    <span class="keywordflow">if</span> (<a class="code" href="class_o_t_cached_key.html#a8780b8a3f392b0bc4c11253a797d8b5a">OTCachedKey::It</a>()-&gt;IsGenerated()) <span class="comment">// If it exists, then serialize it.</span>
    {
        <a class="code" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> ascMasterContents;
        
        <span class="keywordflow">if</span> (<a class="code" href="class_o_t_cached_key.html#a8780b8a3f392b0bc4c11253a797d8b5a">OTCachedKey::It</a>()-&gt;SerializeTo(ascMasterContents))
        {
            strContract.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;&lt;cachedKey&gt;\n%s&lt;/cachedKey&gt;\n\n&quot;</span>, ascMasterContents.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
        }        
        <span class="keywordflow">else</span>
            <a class="code" href="class_o_t_log.html#a5acd90ac91c2618f395b0ff37ad4f8ee">OTLog::Error</a>(<span class="stringliteral">&quot;OTWallet::SaveContract: Failed trying to write master key to wallet.\n&quot;</span>);
    }
    <span class="comment">// ---------------------------------------------------------------</span>
    <span class="comment">//</span>
    <span class="comment">// We want to save the NymIDs for the Nyms on the master key. I save those</span>
    <span class="comment">// before the Nyms themselves, so that they are all loaded up and available</span>
    <span class="comment">// in LoadWallet before the Nyms themselves are loaded.</span>
    <span class="comment">//</span>
    <a class="code" href="_o_t_storage_8hpp.html#a804eb881e96b7e1846d130a55a94f716">FOR_EACH_CONST</a>(<a class="code" href="_o_t_pseudonym_8hpp.html#a0bc81a24d519f3ec8bd73e9d8d65a388">setOfIdentifiers</a>, m_setNymsOnCachedKey)
    {
        <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> &amp; theNymID = *it;
        <a class="code" href="class_o_t_string.html">OTString</a> strNymID(theNymID);
        
        strContract.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;&lt;nymUsingCachedKey id=\&quot;%s\&quot; /&gt;\n\n&quot;</span>, strNymID.Get());
    }
    <span class="comment">// ---------------------------------------------------------------</span>
    <span class="comment">//</span>
    <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_agent_8hpp.html#ac89892658f6bc83e354078647b704e8f">mapOfNyms</a>, m_mapNyms)
    {   
        <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pNym = (*it).second;
        <a class="code" href="_o_t_assert_8hpp.html#a033b133f48e61f2b227c52ad2be0c882">OT_ASSERT_MSG</a>(NULL != pNym, <span class="stringliteral">&quot;NULL pseudonym pointer in OTWallet::m_mapNyms, OTWallet::SaveContract&quot;</span>);
        
        pNym-&gt;<a class="code" href="class_o_t_pseudonym.html#a6e04fda4d0beec8fb21f7d2749bf3f6b">SavePseudonymWallet</a>(strContract);
    }
    <span class="comment">// ---------------------------------------------------------------</span>
    
    <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_asset_contract_8hpp.html#a88f3c1b8259d44ecd0d15628789315cb">mapOfContracts</a>, m_mapContracts)
    {
        <a class="code" href="class_o_t_contract.html">OTContract</a> * pContract = (*it).second;
        <a class="code" href="_o_t_assert_8hpp.html#a033b133f48e61f2b227c52ad2be0c882">OT_ASSERT_MSG</a>(NULL != pContract, <span class="stringliteral">&quot;NULL contract pointer in OTWallet::m_mapContracts, OTWallet::SaveContract&quot;</span>);
        
        pContract-&gt;<a class="code" href="class_o_t_contract.html#af16a41ce18a9e3408fc5c9ee18315a30">SaveContractWallet</a>(strContract);     
        <span class="comment">// ----------------------------------------</span>
    }
    
    <span class="comment">// ---------------------------------------------------------------</span>
    
    <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_wallet_8hpp.html#aeec04aa40a95a6bef1f1f9c26dd953ef">mapOfServers</a>, m_mapServers)
    {
        <a class="code" href="class_o_t_contract.html">OTContract</a> * pServer = (*it).second;
        <a class="code" href="_o_t_assert_8hpp.html#a033b133f48e61f2b227c52ad2be0c882">OT_ASSERT_MSG</a>(NULL != pServer, <span class="stringliteral">&quot;NULL server pointer in OTWallet::m_mapServers, OTWallet::SaveContract&quot;</span>);
        
        pServer-&gt;<a class="code" href="class_o_t_contract.html#af16a41ce18a9e3408fc5c9ee18315a30">SaveContractWallet</a>(strContract);
        <span class="comment">// ----------------------------------------</span>
    }
    
    <span class="comment">// ---------------------------------------------------------------</span>
    <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_agent_8hpp.html#abd4942716d546c8d42670619a03ef99e">mapOfAccounts</a>, m_mapAccounts)
    {
        <a class="code" href="class_o_t_contract.html">OTContract</a> * pAccount = (*it).second;
        <a class="code" href="_o_t_assert_8hpp.html#a033b133f48e61f2b227c52ad2be0c882">OT_ASSERT_MSG</a>(NULL != pAccount, <span class="stringliteral">&quot;NULL account pointer in OTWallet::m_mapAccounts, OTWallet::SaveContract&quot;</span>);
        
        pAccount-&gt;<a class="code" href="class_o_t_contract.html#af16a41ce18a9e3408fc5c9ee18315a30">SaveContractWallet</a>(strContract);
        <span class="comment">// ----------------------------------------</span>
    }
    
    <span class="comment">// ---------------------------------------------------------------</span>
    
    strContract.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;%s&quot;</span>, <span class="stringliteral">&quot;&lt;/wallet&gt;\n&quot;</span>);
    
    <span class="keywordflow">return</span> <span class="keyword">true</span>;        
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa16fe70ac5913e3223f994d7dc8a4831"></a><!-- doxytag: member="OTWallet::SaveWallet" ref="aa16fe70ac5913e3223f994d7dc8a4831" args="(const char *szFilename=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_wallet.html#aa16fe70ac5913e3223f994d7dc8a4831">OTWallet::SaveWallet</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>szFilename</em> = <code>NULL</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_wallet_8cpp_source.html#l01335">1335</a> of file <a class="el" href="_o_t_wallet_8cpp_source.html">OTWallet.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{   
    <span class="keywordflow">if</span> (NULL != szFilename) <a class="code" href="class_o_t_wallet.html#adb10475854eb56eb47a091cf265a21a8">m_strFilename</a>.<a class="code" href="class_o_t_string.html#aa5db620fe8e60c849585d741975db991">Set</a>(szFilename);
    
    <span class="keywordflow">if</span> (!<a class="code" href="class_o_t_wallet.html#adb10475854eb56eb47a091cf265a21a8">m_strFilename</a>.<a class="code" href="class_o_t_string.html#adf7489cd917d4ae5bf30853a3ad78daf">Exists</a>()) { <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Filename Dosn&#39;t Exist!\n&quot;</span>, __FUNCTION__); <a class="code" href="_o_t_assert_8hpp.html#a1ae1def3bdc59b89b0d96240d3c5c321">OT_FAIL</a>; }
    
    <span class="comment">// ---------------------------------------------------------------</span>
    <span class="keywordtype">bool</span>        bSuccess = <span class="keyword">false</span>;
    <a class="code" href="class_o_t_string.html">OTString</a>    strContract;
    
    <span class="keywordflow">if</span> (this-&gt;<a class="code" href="class_o_t_wallet.html#a17e01f4969a795d6f304635e45973916">SaveContract</a>(strContract))
    {
        <span class="comment">// --------------------------------------------------------------------</span>
        <span class="comment">// Try to save the wallet to local storage.</span>
        <span class="comment">//</span>
        <a class="code" href="class_o_t_string.html">OTString</a> strFinal;
        <a class="code" href="class_o_t_a_s_c_i_i_armor.html">OTASCIIArmor</a> ascTemp(strContract);
        
        <span class="keywordflow">if</span> (<span class="keyword">false</span> == ascTemp.WriteArmoredString(strFinal, <span class="stringliteral">&quot;WALLET&quot;</span>)) <span class="comment">// todo hardcoding.</span>
        {
            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;OTWallet::SaveWallet: Error saving wallet (failed writing armored string):\n%s%s%s\n&quot;</span>, 
                <a class="code" href="class_o_t_wallet.html#a62d1c1f3c54def4cb4f0e1c011da7050">m_strDataFolder</a>.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(), <a class="code" href="class_o_t_log.html#a42d3c91ff84ecae0690e34efb4619a77">OTLog::PathSeparator</a>(), <a class="code" href="class_o_t_wallet.html#adb10475854eb56eb47a091cf265a21a8">m_strFilename</a>.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
            <span class="keywordflow">return</span> <span class="keyword">false</span>;
        }
        <span class="comment">// --------------------------------------------------------------------</span>

        <span class="comment">// Wallet file is the only one in data_folder (&quot;.&quot;) and not a subfolder of that.</span>
        bSuccess = <a class="code" href="namespace_o_t_d_b.html#a7ec0a905bba2c1c8ba5b1e873e12eab4">OTDB::StorePlainString</a>(strFinal.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(),<span class="stringliteral">&quot;.&quot;</span>, <a class="code" href="class_o_t_wallet.html#adb10475854eb56eb47a091cf265a21a8">m_strFilename</a>.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>()); <span class="comment">// &lt;==== Store Plain String</span>
    }
    <span class="comment">// ---------------------------------------------------------------</span>
    
    <span class="keywordflow">return</span> bSuccess;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a54362d788dc7c322796f37be9256428f"></a><!-- doxytag: member="OTWallet::SignContractWithFirstNymOnList" ref="a54362d788dc7c322796f37be9256428f" args="(OTContract &amp;theContract)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_wallet.html#a54362d788dc7c322796f37be9256428f">OTWallet::SignContractWithFirstNymOnList</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_contract.html">OTContract</a> &amp;&#160;</td>
          <td class="paramname"><em>theContract</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_wallet_8cpp_source.html#l00248">248</a> of file <a class="el" href="_o_t_wallet_8cpp_source.html">OTWallet.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (this-&gt;<a class="code" href="class_o_t_wallet.html#ad98f3386c700710d76e44580c59c505a">GetNymCount</a>() &gt; 0)
    {
        <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> NYM_ID;
        <a class="code" href="class_o_t_string.html">OTString</a> NYM_NAME;
        
        <span class="keywordflow">if</span> (this-&gt;<a class="code" href="class_o_t_wallet.html#a146e2339010f1e6b8b9cba252c8d3213">GetNym</a>(0, <span class="comment">// index 0 </span>
                         NYM_ID, NYM_NAME))
        {
            <a class="code" href="class_o_t_pseudonym.html">OTPseudonym</a> * pNym = this-&gt;<a class="code" href="class_o_t_wallet.html#aab65a5710311cc6eeb9fbd0d7f881f0e">GetNymByID</a>(NYM_ID);
            
            <span class="keywordflow">if</span> (NULL != pNym)
            {
                theContract.<a class="code" href="class_o_t_contract.html#abd60037fe655ee8cae9a3ece5d1e2ea6">SignContract</a>(*pNym);
                <span class="keywordflow">return</span> <span class="keyword">true</span>;
            }
        }
    }

    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a6e8a382507e28a953b97572f6f08fda5"></a><!-- doxytag: member="OTWallet::VerifyAssetAccount" ref="a6e8a382507e28a953b97572f6f08fda5" args="(OTPseudonym &amp;theNym, OTAccount &amp;theAcct, const OTIdentifier &amp;SERVER_ID, const OTString &amp;strAcctID, const char *szFuncName=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_wallet.html#a6e8a382507e28a953b97572f6f08fda5">OTWallet::VerifyAssetAccount</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_pseudonym.html">OTPseudonym</a> &amp;&#160;</td>
          <td class="paramname"><em>theNym</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_account.html">OTAccount</a> &amp;&#160;</td>
          <td class="paramname"><em>theAcct</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_identifier.html">OTIdentifier</a> &amp;&#160;</td>
          <td class="paramname"><em>SERVER_ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strAcctID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>szFuncName</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_wallet_8cpp_source.html#l00793">793</a> of file <a class="el" href="_o_t_wallet_8cpp_source.html">OTWallet.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keyword">const</span> <span class="keywordtype">char</span> * szFunc = (NULL != szFuncName) ? szFuncName : <span class="stringliteral">&quot;OTWallet::VerifyAssetAccount&quot;</span>;
    <span class="comment">// -----------------</span>
    <span class="keywordflow">if</span> (SERVER_ID != theAcct.<a class="code" href="class_o_t_transaction_type.html#a6a6c7517c09f0abacc72c1ec84d937ed">GetRealServerID</a>())
    {
        <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> s1(SERVER_ID), s2(theAcct.<a class="code" href="class_o_t_transaction_type.html#a6a6c7517c09f0abacc72c1ec84d937ed">GetRealServerID</a>());
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;OTWallet::VerifyAssetAccount %s: Server ID passed in (%s) didn&#39;t match the one &quot;</span>
                       <span class="stringliteral">&quot;on the account (%s). Acct ID: %s\n&quot;</span>, szFunc, s1.Get(), s2.Get(), strAcctID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// -----------------------------------------------------        </span>
    <span class="keyword">const</span> <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>  theNymID(theNym);
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a>      strNymID(theNymID);
    <span class="comment">// -----------------------------------------------------        </span>
    <span class="keywordflow">if</span> (<span class="keyword">false</span> == theAcct.<a class="code" href="class_o_t_account.html#a73c89c2d411eb7b88326baf87802f238">VerifyOwner</a>(theNym)) <span class="comment">// Verifies Ownership.</span>
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;OTWallet::VerifyAssetAccount %s: Nym (ID: %s) is not the owner of the account: %s\n&quot;</span>,
                       szFunc, strNymID.Get(), strAcctID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
        <span class="keywordflow">return</span> <span class="keyword">false</span>;           
    }
    <span class="comment">// -----------------------------------------------------</span>
    <span class="keywordflow">if</span> (<span class="keyword">false</span> == theAcct.<a class="code" href="class_o_t_transaction_type.html#a5df67ad1e0b4d60e205c0a8e1ae5e703">VerifyAccount</a>(theNym)) <span class="comment">// Verifies ContractID and Signature.</span>
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;OTWallet::VerifyAssetAccount %s: Account signature or AccountID fails to verify. &quot;</span>
                       <span class="stringliteral">&quot;NymID: %s  AcctID: %s\n&quot;</span>, szFunc, strNymID.Get(), strAcctID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// By this point, I know that everything checks out. Signature and Account ID,</span>
    <span class="comment">// Nym is owner, etc.</span>
    <span class="comment">// -----------------------------------------------------</span>
    <span class="keywordflow">return</span> <span class="keyword">true</span>;
}
</pre></div>
</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="a62d1c1f3c54def4cb4f0e1c011da7050"></a><!-- doxytag: member="OTWallet::m_strDataFolder" ref="a62d1c1f3c54def4cb4f0e1c011da7050" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_string.html">OTString</a> <a class="el" href="class_o_t_wallet.html#a62d1c1f3c54def4cb4f0e1c011da7050">OTWallet::m_strDataFolder</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_wallet_8hpp_source.html#l00176">176</a> of file <a class="el" href="_o_t_wallet_8hpp_source.html">OTWallet.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="adb10475854eb56eb47a091cf265a21a8"></a><!-- doxytag: member="OTWallet::m_strFilename" ref="adb10475854eb56eb47a091cf265a21a8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_string.html">OTString</a> <a class="el" href="class_o_t_wallet.html#adb10475854eb56eb47a091cf265a21a8">OTWallet::m_strFilename</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_wallet_8hpp_source.html#l00175">175</a> of file <a class="el" href="_o_t_wallet_8hpp_source.html">OTWallet.hpp</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>include/otlib/<a class="el" href="_o_t_wallet_8hpp_source.html">OTWallet.hpp</a></li>
<li>src/otlib/<a class="el" href="_o_t_wallet_8cpp_source.html">OTWallet.cpp</a></li>
</ul>
</div><!-- contents -->
</div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="class_o_t_wallet.html">OTWallet</a>      </li>

    <li class="footer">Generated on Wed May 21 2014 11:26:17 for Open-Transactions by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.6.1 </li>
   </ul>
 </div>


</body>
</html>
