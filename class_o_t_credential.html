<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Open-Transactions: OTCredential Class Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Open-Transactions
   &#160;<span id="projectnumber">master/1066fb4910a63ee3f7de8e0807fee3eb663b66c7</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('class_o_t_credential.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">OTCredential Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<!-- doxytag: class="OTCredential" -->
<p><code>#include &lt;<a class="el" href="_o_t_credential_8hpp_source.html">OTCredential.hpp</a>&gt;</code></p>

<p><a href="class_o_t_credential-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT <a class="el" href="class_o_t_password.html">OTPassword</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_credential.html#a970205e4eca78a06fa3f7dd9469552cf">GetImportPassword</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_credential.html#a6307046ef1e16d486e19791d0b087dd4">SetImportPassword</a> (<a class="el" href="class_o_t_password.html">OTPassword</a> *pImportPassword)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_credential.html#a1881e78cea7a23e9dfdb61baaf983182">Load_Master</a> (const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strNymID, const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strMasterCredID, <a class="el" href="class_o_t_password_data.html">OTPasswordData</a> *pPWData=NULL)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_credential.html#acdce503f6da5d0f48174c2a067ac3d0b">Load_MasterFromString</a> (const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strInput, const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strNymID, const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strMasterCredID, <a class="el" href="class_o_t_password_data.html">OTPasswordData</a> *pPWData=NULL, <a class="el" href="class_o_t_password.html">OTPassword</a> *pImportPassword=NULL)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_credential.html#a15d88cd9c2d96625f7d4f296b08247b7">AddNewSubkey</a> (const int32_t nBits=1024, const <a class="el" href="_o_t_string_8hpp.html#a7ec7839682b097a5c5b5c5125046c82b">mapOfStrings</a> *pmapPrivate=NULL, <a class="el" href="class_o_t_password_data.html">OTPasswordData</a> *pPWData=NULL, <a class="el" href="class_o_t_subkey.html">OTSubkey</a> **ppSubkey=NULL)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_credential.html#a7960b622a6ef62566ef355491d4c95dd">AddNewSubcredential</a> (const <a class="el" href="_o_t_string_8hpp.html#a7ec7839682b097a5c5b5c5125046c82b">mapOfStrings</a> &amp;mapPrivate, const <a class="el" href="_o_t_string_8hpp.html#a7ec7839682b097a5c5b5c5125046c82b">mapOfStrings</a> &amp;mapPublic, <a class="el" href="class_o_t_password_data.html">OTPasswordData</a> *pPWData=NULL, <a class="el" href="class_o_t_subcredential.html">OTSubcredential</a> **ppSubcred=NULL)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_credential.html#a4aa93a303e599713598c06219ad11469">ReEncryptPrivateCredentials</a> (<a class="el" href="class_o_t_password.html">OTPassword</a> &amp;theExportPassword, bool bImporting)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_credential.html#ae87844e4f044e39a39170350571eee8e">LoadSubkey</a> (const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strSubID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_credential.html#a3cb75790d2053af51f7fb617095c8e72">LoadSubcredential</a> (const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strSubID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_credential.html#a079090cfac15cf6222665e93a06a576c">LoadSubkeyFromString</a> (const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strInput, const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strSubID, <a class="el" href="class_o_t_password.html">OTPassword</a> *pImportPassword=NULL)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_credential.html#a6d3d9564e2ee5ebc351bcc853d7cd064">LoadSubcredentialFromString</a> (const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strInput, const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strSubID, <a class="el" href="class_o_t_password.html">OTPassword</a> *pImportPassword=NULL)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_credential.html#a03f9d76360128e0985ce9ab8fc3e9fc4">GetSubcredentialCount</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT const <a class="el" href="class_o_t_subcredential.html">OTSubcredential</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_credential.html#a194a0401b7e78a94f298897138004e3e">GetSubcredential</a> (const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strSubID, const <a class="el" href="_o_t_string_8hpp.html#a82b49c0dbe4e0c6fa6fb33eef957c89d">listOfStrings</a> *plistRevokedIDs=NULL) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT const <a class="el" href="class_o_t_subcredential.html">OTSubcredential</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_credential.html#a994302077b2c1b26cb530f2916dba7af">GetSubcredentialByIndex</a> (int32_t nIndex) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT const std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_credential.html#a9767fa303af5c9a9e9a742d9f72ef834">GetSubcredentialIDByIndex</a> (size_t nIndex) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_credential.html#ab3e65e4abc6a9f2a04047044682329c2">GetPubCredential</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_credential.html#a50cfd1cc44ddb922b907b33bfcaf6062">GetPriCredential</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_credential.html#a1e99eeeb4d701f2ea9b56a1201a57680">GetMasterCredID</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_credential.html#aba950a82684048857d26afd48b2a555c">GetNymID</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_credential.html#a0f66ddcdf4587eaaa7ab1429126f6395">GetSourceForNymID</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_credential.html#aee02a93fec9ee67aaef7af32709bbcd0">SerializeIDs</a> (<a class="el" href="class_o_t_string.html">OTString</a> &amp;strOutput, <a class="el" href="_o_t_string_8hpp.html#a82b49c0dbe4e0c6fa6fb33eef957c89d">listOfStrings</a> &amp;listRevokedIDs, <a class="el" href="_o_t_string_8hpp.html#a7ec7839682b097a5c5b5c5125046c82b">mapOfStrings</a> *pmapPubInfo=NULL, <a class="el" href="_o_t_string_8hpp.html#a7ec7839682b097a5c5b5c5125046c82b">mapOfStrings</a> *pmapPriInfo=NULL, bool bShowRevoked=false, bool bValid=true) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_credential.html#ac84a55bc3e33ba5088ddc1e60eb1bca8">VerifyInternally</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_credential.html#abacd81f1c7aa266d65b0fc2153c1e6b5">VerifyAgainstSource</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT const <a class="el" href="class_o_t_masterkey.html">OTMasterkey</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_credential.html#af120a4e22eed08c5f2f4c00365ff7e67">GetMasterkey</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_credential.html#ade34be3c485c120489e923d31af8bc63">GetPublicKeysBySignature</a> (<a class="el" href="_o_t_asymmetric_key_8hpp.html#ada6127549a4970b60a8939215dd89ddb">listOfAsymmetricKeys</a> &amp;listOutput, const <a class="el" href="class_o_t_signature.html">OTSignature</a> &amp;theSignature, char cKeyType='0') const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT const <a class="el" href="class_o_t_asymmetric_key.html">OTAsymmetricKey</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_credential.html#aaf58f8fa8471ec0d45330c7bdd1ee732">GetPublicAuthKey</a> (const <a class="el" href="_o_t_string_8hpp.html#a82b49c0dbe4e0c6fa6fb33eef957c89d">listOfStrings</a> *plistRevokedIDs=NULL) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT const <a class="el" href="class_o_t_asymmetric_key.html">OTAsymmetricKey</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_credential.html#a52ae29ffb6801d439fe0aec5497f7f13">GetPublicEncrKey</a> (const <a class="el" href="_o_t_string_8hpp.html#a82b49c0dbe4e0c6fa6fb33eef957c89d">listOfStrings</a> *plistRevokedIDs=NULL) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT const <a class="el" href="class_o_t_asymmetric_key.html">OTAsymmetricKey</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_credential.html#ab48f10080c9aebc115d545692b97e6ae">GetPublicSignKey</a> (const <a class="el" href="_o_t_string_8hpp.html#a82b49c0dbe4e0c6fa6fb33eef957c89d">listOfStrings</a> *plistRevokedIDs=NULL) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT const <a class="el" href="class_o_t_asymmetric_key.html">OTAsymmetricKey</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_credential.html#a87cd1e7f63d71ed30567755816dd7fe9">GetPrivateSignKey</a> (const <a class="el" href="_o_t_string_8hpp.html#a82b49c0dbe4e0c6fa6fb33eef957c89d">listOfStrings</a> *plistRevokedIDs=NULL) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT const <a class="el" href="class_o_t_asymmetric_key.html">OTAsymmetricKey</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_credential.html#af9740dc82f94561f391eecd8d9029e93">GetPrivateEncrKey</a> (const <a class="el" href="_o_t_string_8hpp.html#a82b49c0dbe4e0c6fa6fb33eef957c89d">listOfStrings</a> *plistRevokedIDs=NULL) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT const <a class="el" href="class_o_t_asymmetric_key.html">OTAsymmetricKey</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_credential.html#a9e945359c5f333cf0a4915c2c3258453">GetPrivateAuthKey</a> (const <a class="el" href="_o_t_string_8hpp.html#a82b49c0dbe4e0c6fa6fb33eef957c89d">listOfStrings</a> *plistRevokedIDs=NULL) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT const <a class="el" href="class_o_t_keypair.html">OTKeypair</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_credential.html#a7de471713c67f17cf6da6d7bbfbf803a">GetAuthKeypair</a> (const <a class="el" href="_o_t_string_8hpp.html#a82b49c0dbe4e0c6fa6fb33eef957c89d">listOfStrings</a> *plistRevokedIDs=NULL) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT const <a class="el" href="class_o_t_keypair.html">OTKeypair</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_credential.html#a4b0f3557a99246ba4ddded3a38ab0b1f">GetEncrKeypair</a> (const <a class="el" href="_o_t_string_8hpp.html#a82b49c0dbe4e0c6fa6fb33eef957c89d">listOfStrings</a> *plistRevokedIDs=NULL) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT const <a class="el" href="class_o_t_keypair.html">OTKeypair</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_credential.html#a016ad221a7fd8ecc7bc130f3e0b576a3">GetSignKeypair</a> (const <a class="el" href="_o_t_string_8hpp.html#a82b49c0dbe4e0c6fa6fb33eef957c89d">listOfStrings</a> *plistRevokedIDs=NULL) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_credential.html#ad3c0bb991b75fbd0e06f91bab725c66c">ClearSubcredentials</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">EXPORT&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_credential.html#a6c515bf2df82057c6d1583c3c491aace">~OTCredential</a> ()</td></tr>
<tr><td colspan="2"><h2><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="class_o_t_credential.html">OTCredential</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_credential.html#a88ecf1e2caef5a269041ddaebb1c44b3">CreateMaster</a> (const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strSourceForNymID, const int32_t nBits=1024, const <a class="el" href="_o_t_string_8hpp.html#a7ec7839682b097a5c5b5c5125046c82b">mapOfStrings</a> *pmapPrivate=NULL, const <a class="el" href="_o_t_string_8hpp.html#a7ec7839682b097a5c5b5c5125046c82b">mapOfStrings</a> *pmapPublic=NULL, <a class="el" href="class_o_t_password_data.html">OTPasswordData</a> *pPWData=NULL)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="class_o_t_credential.html">OTCredential</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_credential.html#aa715e4d86931c981c05dc23a6e99b51c">LoadMaster</a> (const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strNymID, const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strMasterCredID, <a class="el" href="class_o_t_password_data.html">OTPasswordData</a> *pPWData=NULL)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="class_o_t_credential.html">OTCredential</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_t_credential.html#ade0b88fa2ad1963a0619838266a1e18d">LoadMasterFromString</a> (const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strInput, const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strNymID, const <a class="el" href="class_o_t_string.html">OTString</a> &amp;strMasterCredID, <a class="el" href="class_o_t_password_data.html">OTPasswordData</a> *pPWData=NULL, <a class="el" href="class_o_t_password.html">OTPassword</a> *pImportPassword=NULL)</td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock">
<p>Definition at line <a class="el" href="_o_t_credential_8hpp_source.html#l00220">220</a> of file <a class="el" href="_o_t_credential_8hpp_source.html">OTCredential.hpp</a>.</p>
</div><hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a6c515bf2df82057c6d1583c3c491aace"></a><!-- doxytag: member="OTCredential::~OTCredential" ref="a6c515bf2df82057c6d1583c3c491aace" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_credential.html#a6c515bf2df82057c6d1583c3c491aace">OTCredential::~OTCredential</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_credential_8cpp_source.html#l01385">1385</a> of file <a class="el" href="_o_t_credential_8cpp_source.html">OTCredential.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    this-&gt;<a class="code" href="class_o_t_credential.html#ad3c0bb991b75fbd0e06f91bab725c66c">ClearSubcredentials</a>();
}
</pre></div>
</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a7960b622a6ef62566ef355491d4c95dd"></a><!-- doxytag: member="OTCredential::AddNewSubcredential" ref="a7960b622a6ef62566ef355491d4c95dd" args="(const mapOfStrings &amp;mapPrivate, const mapOfStrings &amp;mapPublic, OTPasswordData *pPWData=NULL, OTSubcredential **ppSubcred=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_credential.html#a7960b622a6ef62566ef355491d4c95dd">OTCredential::AddNewSubcredential</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="_o_t_string_8hpp.html#a7ec7839682b097a5c5b5c5125046c82b">mapOfStrings</a> &amp;&#160;</td>
          <td class="paramname"><em>mapPrivate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="_o_t_string_8hpp.html#a7ec7839682b097a5c5b5c5125046c82b">mapOfStrings</a> &amp;&#160;</td>
          <td class="paramname"><em>mapPublic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_password_data.html">OTPasswordData</a> *&#160;</td>
          <td class="paramname"><em>pPWData</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_subcredential.html">OTSubcredential</a> **&#160;</td>
          <td class="paramname"><em>ppSubcred</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_credential_8cpp_source.html#l01014">1014</a> of file <a class="el" href="_o_t_credential_8cpp_source.html">OTCredential.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_o_t_subcredential.html">OTSubcredential</a> * pSub = <span class="keyword">new</span> <a class="code" href="class_o_t_subcredential.html">OTSubcredential</a>(*<span class="keyword">this</span>);
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pSub);
    <span class="comment">// ----------------------</span>
    pSub-&gt;<a class="code" href="class_o_t_subcredential.html#a5e8d869299c60190a3b984becc4accf2">SetNymIDandSource</a>(m_strNymID, m_strSourceForNymID); <span class="comment">// Set NymID and source string that hashes to it.</span>
    pSub-&gt;<a class="code" href="class_o_t_subcredential.html#a910f9ae6d38fcc8683438dfc0288c5b5">SetMasterCredID</a>  (this-&gt;<a class="code" href="class_o_t_credential.html#a1e99eeeb4d701f2ea9b56a1201a57680">GetMasterCredID</a>());         <span class="comment">// Set master credential ID (onto this new subcredential...)</span>
    <span class="comment">// -------------------------------------</span>
    <span class="keywordflow">if</span> (<span class="keyword">false</span> == pSub-&gt;<a class="code" href="class_o_t_subcredential.html#a0f5e48ea0cb04055746b9f8793359d6c">SetPublicContents</a>(mapPublic))
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;In %s, line %d: Failed while calling pSub-&gt;SetPublicContents.\n&quot;</span>,
                      __FILE__, __LINE__);
        <span class="keyword">delete</span> pSub; pSub = NULL;
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// -------------------------------------</span>
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">false</span> == pSub-&gt;<a class="code" href="class_o_t_subcredential.html#a0a93c4d8931e043cc470ccbd153710a5">SetPrivateContents</a>(mapPrivate))
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;In %s, line %d: Failed while trying to pSub-&gt;SetPrivateContents.\n&quot;</span>,
                      __FILE__, __LINE__);
        <span class="keyword">delete</span> pSub; pSub = NULL;
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// -------------------------------------</span>
    <span class="keywordflow">else</span> <span class="comment">// By this point we&#39;ve set up the subcredential with its NymID, the source string for that NymID,</span>
    {    <span class="comment">// my master credential ID, and the public and private contents for the subcredential. Let&#39;s sign</span>
         <span class="comment">// it...</span>
        <a class="code" href="class_o_t_password_data.html">OTPasswordData</a> thePWData(<span class="stringliteral">&quot;Signing new subcredential... OTCredential::AddNewSubcredential&quot;</span>);
        <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>   theSubCredID;
        
        <span class="comment">// SignNewSubcredential uses m_Masterkey&#39;s actual signing key to sign &quot;pSub the contract.&quot;</span>
        <span class="comment">//</span>
        <span class="keywordflow">if</span> (<span class="keyword">false</span> == this-&gt;SignNewSubcredential(*pSub, theSubCredID, NULL == pPWData ? &amp;thePWData : pPWData))
        {
            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;In %s, line %d: Failed trying to call this-&gt;SignNewSubcredential\n&quot;</span>,
                          __FILE__, __LINE__);
            <span class="keyword">delete</span> pSub; pSub = NULL;
            <span class="keywordflow">return</span> <span class="keyword">false</span>;
        }
        <span class="comment">// ---------------------------------------------</span>
        <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strSubCredID(theSubCredID);
        <span class="comment">// -------------------------------</span>
        <span class="comment">// ADD IT TO THE MAP</span>
        <span class="comment">// Only after pSub is signed and saved can we then calculate its ID and use that ID</span>
        <span class="comment">// as the key in m_mapSubcredentials (with pSub being the value.)</span>
        <span class="comment">//</span>
        m_mapSubcredentials.insert(std::pair&lt;std::string, OTSubcredential *&gt;(strSubCredID.Get(), pSub));
        <span class="keywordflow">if</span> (NULL != ppSubcred) <span class="comment">// output</span>
            *ppSubcred = pSub;
        <span class="keywordflow">return</span> <span class="keyword">true</span>;
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a15d88cd9c2d96625f7d4f296b08247b7"></a><!-- doxytag: member="OTCredential::AddNewSubkey" ref="a15d88cd9c2d96625f7d4f296b08247b7" args="(const int32_t nBits=1024, const mapOfStrings *pmapPrivate=NULL, OTPasswordData *pPWData=NULL, OTSubkey **ppSubkey=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_credential.html#a15d88cd9c2d96625f7d4f296b08247b7">OTCredential::AddNewSubkey</a> </td>
          <td>(</td>
          <td class="paramtype">const int32_t&#160;</td>
          <td class="paramname"><em>nBits</em> = <code>1024</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="_o_t_string_8hpp.html#a7ec7839682b097a5c5b5c5125046c82b">mapOfStrings</a> *&#160;</td>
          <td class="paramname"><em>pmapPrivate</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_password_data.html">OTPasswordData</a> *&#160;</td>
          <td class="paramname"><em>pPWData</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_subkey.html">OTSubkey</a> **&#160;</td>
          <td class="paramname"><em>ppSubkey</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_credential_8cpp_source.html#l00946">946</a> of file <a class="el" href="_o_t_credential_8cpp_source.html">OTCredential.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_o_t_subkey.html">OTSubkey</a> * pSub = <span class="keyword">new</span> <a class="code" href="class_o_t_subkey.html">OTSubkey</a>(*<span class="keyword">this</span>);
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pSub);
    <span class="comment">// ----------------------</span>
    pSub-&gt;<a class="code" href="class_o_t_subcredential.html#a5e8d869299c60190a3b984becc4accf2">SetNymIDandSource</a>(this-&gt;<a class="code" href="class_o_t_credential.html#aba950a82684048857d26afd48b2a555c">GetNymID</a>(), this-&gt;<a class="code" href="class_o_t_credential.html#a0f66ddcdf4587eaaa7ab1429126f6395">GetSourceForNymID</a>()); <span class="comment">// Set NymID and source string that hashes to it.</span>
    pSub-&gt;<a class="code" href="class_o_t_subcredential.html#a910f9ae6d38fcc8683438dfc0288c5b5">SetMasterCredID</a>  (this-&gt;<a class="code" href="class_o_t_credential.html#a1e99eeeb4d701f2ea9b56a1201a57680">GetMasterCredID</a>());         <span class="comment">// Set master credential ID (onto this new subcredential...)</span>
    <span class="comment">// -------------------------------------</span>
    <span class="comment">// If a map of private certs was not passed in, we&#39;re expected to</span>
    <span class="comment">// generate the keys ourselves.</span>
    <span class="comment">//</span>
    <span class="keywordtype">bool</span> bContentsReady = <span class="keyword">false</span>;

    <span class="keywordflow">if</span> (NULL != pmapPrivate) <span class="comment">// Pre-generated keys were passed in for us to use,</span>
        bContentsReady = pSub-&gt;<a class="code" href="class_o_t_key_credential.html#a6ddd3ec0531da0115eae195d3e6290d5">SetPrivateContents</a>(*pmapPrivate); <span class="comment">// so let&#39;s set them onto the sub key.</span>
    <span class="keywordflow">else</span>
        <span class="comment">// No keys were provided, so let&#39;s generate them ourselves...</span>
        bContentsReady = pSub-&gt;<a class="code" href="class_o_t_key_credential.html#acd27813be407fe1130b501d3b12ede85">GenerateKeys</a>(nBits);
    <span class="comment">// -------------------------------------</span>
    <span class="keywordflow">if</span> (!bContentsReady)
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;In %s, line %d: Failed trying to SetPrivateContents or GenerateKeys\n&quot;</span>,
                      __FILE__, __LINE__);
        <span class="keyword">delete</span> pSub; pSub = NULL;
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// -------------------------------------</span>
    <span class="keywordflow">else</span> <span class="comment">// By this point we&#39;ve set up the subkey with its NymID, the source string for that NymID,</span>
    {    <span class="comment">// my master credential ID, and the public and private certs for the subkey. Now let&#39;s</span>
         <span class="comment">// sign it...</span>
        <a class="code" href="class_o_t_password_data.html">OTPasswordData</a> thePWData(<span class="stringliteral">&quot;Signing new subkey... OTCredential::AddNewSubkey&quot;</span>);
        <a class="code" href="class_o_t_identifier.html">OTIdentifier</a>   theSubCredID;
        
        <span class="comment">// SignNewSubcredential uses m_Masterkey&#39;s actual signing key to sign &quot;pSub the contract.&quot;</span>
        <span class="comment">//</span>
        <span class="keywordflow">if</span> (<span class="keyword">false</span> == this-&gt;SignNewSubcredential(*pSub, theSubCredID, NULL == pPWData ? &amp;thePWData : pPWData))
        {
            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;In %s, line %d: Failed trying to call this-&gt;SignNewSubcredential\n&quot;</span>,
                          __FILE__, __LINE__);
            <span class="keyword">delete</span> pSub; pSub = NULL;
            <span class="keywordflow">return</span> <span class="keyword">false</span>;
        }
        <span class="comment">// ---------------------------------------------</span>
        <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strSubCredID(theSubCredID); <span class="comment">// SignNewSubcredential also generates the ID.</span>
        <span class="comment">// --------------------------------------</span>
        pSub-&gt;<a class="code" href="class_o_t_key_credential.html#a0fc4da073af06c53280f58ed38291890">SetMetadata</a>();
        <span class="comment">// -------------------------------------</span>
        <span class="comment">// ADD IT TO THE MAP</span>
        <span class="comment">// Only after pSub is signed and saved can we then calculate its ID and use that ID</span>
        <span class="comment">// as the key in m_mapSubcredentials (with pSub being the value.)</span>
        <span class="comment">//</span>
        m_mapSubcredentials.insert(std::pair&lt;std::string, OTSubcredential *&gt;(strSubCredID.Get(), pSub));

        <span class="keywordflow">if</span> (NULL != ppSubkey) <span class="comment">// output</span>
        {
            *ppSubkey = pSub;
        }
        
        <span class="keywordflow">return</span> <span class="keyword">true</span>;
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad3c0bb991b75fbd0e06f91bab725c66c"></a><!-- doxytag: member="OTCredential::ClearSubcredentials" ref="ad3c0bb991b75fbd0e06f91bab725c66c" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_credential.html#ad3c0bb991b75fbd0e06f91bab725c66c">OTCredential::ClearSubcredentials</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_credential_8cpp_source.html#l01391">1391</a> of file <a class="el" href="_o_t_credential_8cpp_source.html">OTCredential.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// ---------------------------</span>
    <span class="keywordflow">while</span> (!m_mapSubcredentials.empty())
    {
        <a class="code" href="class_o_t_subcredential.html">OTSubcredential</a> * pSub = m_mapSubcredentials.begin()-&gt;second;
        <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pSub);
        <span class="comment">// -----------</span>
        <span class="keyword">delete</span> pSub;
        pSub = NULL;
        <span class="comment">// -----------</span>
        m_mapSubcredentials.erase(m_mapSubcredentials.begin());
    } <span class="comment">// while</span>
    <span class="comment">// --------------------------- </span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="a88ecf1e2caef5a269041ddaebb1c44b3"></a><!-- doxytag: member="OTCredential::CreateMaster" ref="a88ecf1e2caef5a269041ddaebb1c44b3" args="(const OTString &amp;strSourceForNymID, const int32_t nBits=1024, const mapOfStrings *pmapPrivate=NULL, const mapOfStrings *pmapPublic=NULL, OTPasswordData *pPWData=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_credential.html">OTCredential</a> * <a class="el" href="class_o_t_credential.html#a88ecf1e2caef5a269041ddaebb1c44b3">OTCredential::CreateMaster</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strSourceForNymID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int32_t&#160;</td>
          <td class="paramname"><em>nBits</em> = <code>1024</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="_o_t_string_8hpp.html#a7ec7839682b097a5c5b5c5125046c82b">mapOfStrings</a> *&#160;</td>
          <td class="paramname"><em>pmapPrivate</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="_o_t_string_8hpp.html#a7ec7839682b097a5c5b5c5125046c82b">mapOfStrings</a> *&#160;</td>
          <td class="paramname"><em>pmapPublic</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_password_data.html">OTPasswordData</a> *&#160;</td>
          <td class="paramname"><em>pPWData</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_credential_8cpp_source.html#l01075">1075</a> of file <a class="el" href="_o_t_credential_8cpp_source.html">OTCredential.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_o_t_credential.html">OTCredential</a> * pCredential = <span class="keyword">new</span> <a class="code" href="class_o_t_credential.html">OTCredential</a>;
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pCredential);
    <span class="comment">// -------------------------------------</span>
    pCredential-&gt;SetSourceForNymID(strSourceForNymID); <span class="comment">// This also recalculates and sets  ** m_strNymID **</span>
    <span class="comment">// -------------------------------------</span>
    <span class="comment">// OTKeyCredential::SetPrivateContents will already set the public keys, which is why this argument is optional. But not all credentials are keys, so we must still retain the ability to explicitly set the public info. Even so, in the case of keys, private is below, so it will overwrite this.</span>
    
    <span class="keywordflow">if</span> ((NULL != pmapPublic) &amp;&amp;
        (NULL != pmapPrivate)) <span class="comment">// You cannot pass public info in here unless you also pass private info.</span>
    {
        <span class="keywordflow">if</span> (<span class="keyword">false</span> == pCredential-&gt;SetPublicContents(*pmapPublic))
        {
            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;In %s, line %d: Failed trying to call pCredential-&gt;SetPublicContents\n&quot;</span>,
                          __FILE__, __LINE__);
            <span class="keyword">delete</span> pCredential;
            pCredential = NULL;
            <span class="keywordflow">return</span> NULL;
        }
    }
    <span class="comment">// -------------------------------------</span>
    <span class="comment">// Private info must be passed in to create a credential. This saves a copy of the map, and for keys also loads the map all up into the OTKeypair objects (in the case of OTKeyCredentials anyway -- not all credentials are keys.)</span>
    <span class="comment">//</span>
    <span class="keywordtype">bool</span> bContentsReady = <span class="keyword">false</span>;
    
    <span class="keywordflow">if</span> (NULL != pmapPrivate) <span class="comment">// Pre-generated keys were passed in for us to use.</span>
        bContentsReady = pCredential-&gt;SetPrivateContents(*pmapPrivate); <span class="comment">// So let&#39;s set them onto the master key.</span>
    <span class="keywordflow">else</span>
        <span class="comment">// No keys were provided, so let&#39;s generate them ourselves...</span>
        bContentsReady = pCredential-&gt;GenerateMasterkey(nBits);
    <span class="comment">// -------------------------------------</span>
    <span class="keywordflow">if</span> (!bContentsReady)
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;In %s, line %d: Failed trying to SetPrivateContents or GenerateMasterkey\n&quot;</span>,
                      __FILE__, __LINE__);
        <span class="keyword">delete</span> pCredential;
        pCredential = NULL;
        <span class="keywordflow">return</span> NULL;
    }
    <span class="keywordflow">else</span>
    {
        <a class="code" href="class_o_t_password_data.html">OTPasswordData</a> thePWData(<span class="stringliteral">&quot;Signing new master credential... OTCredential::CreateMaster&quot;</span>);
        
        <span class="comment">// Using m_Masterkey&#39;s actual signing key to sign &quot;m_Masterkey the contract.&quot;</span>
        <span class="comment">//</span>
        <span class="keywordflow">if</span> (<span class="keyword">false</span> == pCredential-&gt;SignNewMaster(NULL == pPWData ? &amp;thePWData : pPWData))
        {
            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;In %s, line %d: Failed trying to call pCredential-&gt;SignNewMaster\n&quot;</span>,
                          __FILE__, __LINE__);
            <span class="keyword">delete</span> pCredential;
            pCredential = NULL;
            <span class="keywordflow">return</span> NULL;
        }
    }
    
    <span class="comment">// By this point, we have instantiated a new OTCredential, set the source string, hashed that</span>
    <span class="comment">// source string to get the NymID for this credential, and set the public and private info for</span>
    <span class="comment">// this credential (each a map of strings.) Since pCredential-&gt;m_Masterkey is derived from</span>
    <span class="comment">// OTKeyCredential, it also loaded up the 3 keypairs (authentication, encryption, and signing.)</span>
    <span class="comment">// Then we signed that master key with itself, with its signing key. (It&#39;s also an OTContract,</span>
    <span class="comment">// so it can be signed.) This also calculated the new master credential ID, and called</span>
    <span class="comment">// pCredential-&gt;SetMasterCredID. That is, the OTCredential&#39;s &quot;master credential ID&quot; is formed</span>
    <span class="comment">// as a hash of the signed contract that is its OTMasterkey.</span>
    <span class="comment">// BUT!!! We don&#39;t want to use a hash of the private key information, since others cannot verify</span>
    <span class="comment">// the hash without seeing our private key. We want OTMasterkey to create an &#39;official&#39; signed</span>
    <span class="comment">// public version of itself, minus private keys, which is what can be sent to servers and to</span>
    <span class="comment">// other users, and which can be hashed to form the master credential ID (and verified later.)</span>
    <span class="comment">// ...Which is exactly what it does. Inside pCredential-&gt;SignNewMaster, a public version is created</span>
    <span class="comment">// and signed, and set onto that masterkey as m_strContents. It&#39;s then re-signed as the private</span>
    <span class="comment">// version, which contains m_strContents in encoded form, along with the private keys.</span>
    <span class="comment">//</span>
    <span class="keywordflow">return</span> pCredential;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a7de471713c67f17cf6da6d7bbfbf803a"></a><!-- doxytag: member="OTCredential::GetAuthKeypair" ref="a7de471713c67f17cf6da6d7bbfbf803a" args="(const listOfStrings *plistRevokedIDs=NULL) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="class_o_t_keypair.html">OTKeypair</a> &amp; <a class="el" href="class_o_t_credential.html#a7de471713c67f17cf6da6d7bbfbf803a">OTCredential::GetAuthKeypair</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="_o_t_string_8hpp.html#a82b49c0dbe4e0c6fa6fb33eef957c89d">listOfStrings</a> *&#160;</td>
          <td class="paramname"><em>plistRevokedIDs</em> = <code>NULL</code></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_credential_8cpp_source.html#l01240">1240</a> of file <a class="el" href="_o_t_credential_8cpp_source.html">OTCredential.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_o_t_storage_8hpp.html#a804eb881e96b7e1846d130a55a94f716">FOR_EACH_CONST</a>(<a class="code" href="_o_t_masterkey_8hpp.html#a54f329968b2bb6ec246c697a93f80159">mapOfSubcredentials</a>, m_mapSubcredentials)
    {
        <span class="keyword">const</span> std::string str_cred_id = (*it).first;
        <span class="keyword">const</span> <a class="code" href="class_o_t_subcredential.html">OTSubcredential</a> * pSub  = (*it).second;
        <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pSub);
        <span class="comment">// ------------------------</span>
        <span class="keyword">const</span> <a class="code" href="class_o_t_subkey.html">OTSubkey</a> * pKey = <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span><a class="code" href="class_o_t_subkey.html">OTSubkey</a> *<span class="keyword">&gt;</span>(pSub);
        <span class="keywordflow">if</span> (NULL == pKey) <span class="keywordflow">continue</span>;
        <span class="comment">// ------------------------</span>
        <span class="comment">// See if pKey, with ID str_cred_id, is on plistRevokedIDs...</span>
        <span class="comment">//</span>
        <span class="keywordflow">if</span> (NULL != plistRevokedIDs)
        {
            listOfStrings::const_iterator iter = std::find(plistRevokedIDs-&gt;begin(), plistRevokedIDs-&gt;end(), str_cred_id);
            <span class="keywordflow">if</span> (iter != plistRevokedIDs-&gt;end()) <span class="comment">// It was on the revoked list.</span>
                <span class="keywordflow">continue</span>; <span class="comment">// Skip this revoked key.</span>
        }
        <span class="comment">// At this point we know it&#39;s a key credential, and we know it&#39;s not on</span>
        <span class="comment">// the revoked list. Therefore, let&#39;s return the key! (Any other future</span>
        <span class="comment">// smart criteria might go here before taking this final step...)</span>
        <span class="comment">//</span>
        <span class="keywordflow">return</span> pKey-&gt;<a class="code" href="class_o_t_key_credential.html#a01002807ce374cc8b974b9c2be5b2fad">m_AuthentKey</a>;
    }
    
    <span class="comment">// Didn&#39;t find any subcredentials we can use? For now, we&#39;ll return the master key instead.</span>
    <span class="comment">// This is purely for backwards compatibility reasons and eventually should be removed. That is,</span>
    <span class="comment">// masters should only be able to verify subkeys, and only subkeys should be able to do actions.</span>
    <span class="comment">// Capiche?</span>
    <span class="comment">//</span>
    <span class="keywordflow">return</span> m_Masterkey.<a class="code" href="class_o_t_key_credential.html#a01002807ce374cc8b974b9c2be5b2fad">m_AuthentKey</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a4b0f3557a99246ba4ddded3a38ab0b1f"></a><!-- doxytag: member="OTCredential::GetEncrKeypair" ref="a4b0f3557a99246ba4ddded3a38ab0b1f" args="(const listOfStrings *plistRevokedIDs=NULL) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="class_o_t_keypair.html">OTKeypair</a> &amp; <a class="el" href="class_o_t_credential.html#a4b0f3557a99246ba4ddded3a38ab0b1f">OTCredential::GetEncrKeypair</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="_o_t_string_8hpp.html#a82b49c0dbe4e0c6fa6fb33eef957c89d">listOfStrings</a> *&#160;</td>
          <td class="paramname"><em>plistRevokedIDs</em> = <code>NULL</code></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_credential_8cpp_source.html#l01275">1275</a> of file <a class="el" href="_o_t_credential_8cpp_source.html">OTCredential.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_o_t_storage_8hpp.html#a804eb881e96b7e1846d130a55a94f716">FOR_EACH_CONST</a>(<a class="code" href="_o_t_masterkey_8hpp.html#a54f329968b2bb6ec246c697a93f80159">mapOfSubcredentials</a>, m_mapSubcredentials)
    {
        <span class="keyword">const</span> std::string str_cred_id = (*it).first;
        <span class="keyword">const</span> <a class="code" href="class_o_t_subcredential.html">OTSubcredential</a> * pSub  = (*it).second;
        <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pSub);
        <span class="comment">// ------------------------</span>
        <span class="keyword">const</span> <a class="code" href="class_o_t_subkey.html">OTSubkey</a> * pKey = <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span><a class="code" href="class_o_t_subkey.html">OTSubkey</a> *<span class="keyword">&gt;</span>(pSub);
        <span class="keywordflow">if</span> (NULL == pKey) <span class="keywordflow">continue</span>;
        <span class="comment">// ------------------------</span>
        <span class="comment">// See if pKey, with ID str_cred_id, is on plistRevokedIDs...</span>
        <span class="comment">//</span>
        <span class="keywordflow">if</span> (NULL != plistRevokedIDs)
        {
            listOfStrings::const_iterator iter = std::find(plistRevokedIDs-&gt;begin(), plistRevokedIDs-&gt;end(), str_cred_id);
            <span class="keywordflow">if</span> (iter != plistRevokedIDs-&gt;end()) <span class="comment">// It was on the revoked list.</span>
                <span class="keywordflow">continue</span>; <span class="comment">// Skip this revoked key.</span>
        }
        <span class="comment">// At this point we know it&#39;s a key credential, and we know it&#39;s not on</span>
        <span class="comment">// the revoked list. Therefore, let&#39;s return the key! (Any other future</span>
        <span class="comment">// smart criteria might go here before taking this final step...)</span>
        <span class="comment">//</span>
        <span class="keywordflow">return</span> pKey-&gt;<a class="code" href="class_o_t_key_credential.html#ac84c9320e8f1cd4add630626c5f44a04">m_EncryptKey</a>;
    }
    
    <span class="comment">// Didn&#39;t find any subcredentials we can use? For now, we&#39;ll return the master key instead.</span>
    <span class="comment">// This is purely for backwards compatibility reasons and eventually should be removed. That is,</span>
    <span class="comment">// masters should only be able to verify subkeys, and only subkeys should be able to do actions.</span>
    <span class="comment">// Capiche?</span>
    <span class="comment">//</span>
    <span class="keywordflow">return</span> m_Masterkey.<a class="code" href="class_o_t_key_credential.html#ac84c9320e8f1cd4add630626c5f44a04">m_EncryptKey</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a970205e4eca78a06fa3f7dd9469552cf"></a><!-- doxytag: member="OTCredential::GetImportPassword" ref="a970205e4eca78a06fa3f7dd9469552cf" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EXPORT <a class="el" href="class_o_t_password.html">OTPassword</a>* <a class="el" href="class_o_t_credential.html#a970205e4eca78a06fa3f7dd9469552cf">OTCredential::GetImportPassword</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_credential_8hpp_source.html#l00247">247</a> of file <a class="el" href="_o_t_credential_8hpp_source.html">OTCredential.hpp</a>.</p>
<div class="fragment"><pre class="fragment">{ <span class="keywordflow">return</span> m_pImportPassword; }
</pre></div>
</div>
</div>
<a class="anchor" id="a1e99eeeb4d701f2ea9b56a1201a57680"></a><!-- doxytag: member="OTCredential::GetMasterCredID" ref="a1e99eeeb4d701f2ea9b56a1201a57680" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="class_o_t_string.html">OTString</a> &amp; <a class="el" href="class_o_t_credential.html#a1e99eeeb4d701f2ea9b56a1201a57680">OTCredential::GetMasterCredID</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_credential_8cpp_source.html#l00336">336</a> of file <a class="el" href="_o_t_credential_8cpp_source.html">OTCredential.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> m_strMasterCredID;
}
</pre></div>
</div>
</div>
<a class="anchor" id="af120a4e22eed08c5f2f4c00365ff7e67"></a><!-- doxytag: member="OTCredential::GetMasterkey" ref="af120a4e22eed08c5f2f4c00365ff7e67" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EXPORT const <a class="el" href="class_o_t_masterkey.html">OTMasterkey</a>&amp; <a class="el" href="class_o_t_credential.html#af120a4e22eed08c5f2f4c00365ff7e67">OTCredential::GetMasterkey</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_credential_8hpp_source.html#l00324">324</a> of file <a class="el" href="_o_t_credential_8hpp_source.html">OTCredential.hpp</a>.</p>
<div class="fragment"><pre class="fragment">{ <span class="keywordflow">return</span> m_Masterkey; }
</pre></div>
</div>
</div>
<a class="anchor" id="aba950a82684048857d26afd48b2a555c"></a><!-- doxytag: member="OTCredential::GetNymID" ref="aba950a82684048857d26afd48b2a555c" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="class_o_t_string.html">OTString</a> &amp; <a class="el" href="class_o_t_credential.html#aba950a82684048857d26afd48b2a555c">OTCredential::GetNymID</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_credential_8cpp_source.html#l00265">265</a> of file <a class="el" href="_o_t_credential_8cpp_source.html">OTCredential.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> m_strNymID;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a50cfd1cc44ddb922b907b33bfcaf6062"></a><!-- doxytag: member="OTCredential::GetPriCredential" ref="a50cfd1cc44ddb922b907b33bfcaf6062" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="class_o_t_string.html">OTString</a> &amp; <a class="el" href="class_o_t_credential.html#a50cfd1cc44ddb922b907b33bfcaf6062">OTCredential::GetPriCredential</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_credential_8cpp_source.html#l00306">306</a> of file <a class="el" href="_o_t_credential_8cpp_source.html">OTCredential.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> m_Masterkey.<a class="code" href="class_o_t_subcredential.html#a7929248bc898a420b3b0be7b388f00f6">GetPriCredential</a>();
}
</pre></div>
</div>
</div>
<a class="anchor" id="a9e945359c5f333cf0a4915c2c3258453"></a><!-- doxytag: member="OTCredential::GetPrivateAuthKey" ref="a9e945359c5f333cf0a4915c2c3258453" args="(const listOfStrings *plistRevokedIDs=NULL) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="class_o_t_asymmetric_key.html">OTAsymmetricKey</a> &amp; <a class="el" href="class_o_t_credential.html#a9e945359c5f333cf0a4915c2c3258453">OTCredential::GetPrivateAuthKey</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="_o_t_string_8hpp.html#a82b49c0dbe4e0c6fa6fb33eef957c89d">listOfStrings</a> *&#160;</td>
          <td class="paramname"><em>plistRevokedIDs</em> = <code>NULL</code></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_credential_8cpp_source.html#l01367">1367</a> of file <a class="el" href="_o_t_credential_8cpp_source.html">OTCredential.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> this-&gt;<a class="code" href="class_o_t_credential.html#a7de471713c67f17cf6da6d7bbfbf803a">GetAuthKeypair</a>(plistRevokedIDs).<a class="code" href="class_o_t_keypair.html#af81de69986e6aa2404fce47311871902">GetPrivateKey</a>();
}
</pre></div>
</div>
</div>
<a class="anchor" id="af9740dc82f94561f391eecd8d9029e93"></a><!-- doxytag: member="OTCredential::GetPrivateEncrKey" ref="af9740dc82f94561f391eecd8d9029e93" args="(const listOfStrings *plistRevokedIDs=NULL) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="class_o_t_asymmetric_key.html">OTAsymmetricKey</a> &amp; <a class="el" href="class_o_t_credential.html#af9740dc82f94561f391eecd8d9029e93">OTCredential::GetPrivateEncrKey</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="_o_t_string_8hpp.html#a82b49c0dbe4e0c6fa6fb33eef957c89d">listOfStrings</a> *&#160;</td>
          <td class="paramname"><em>plistRevokedIDs</em> = <code>NULL</code></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_credential_8cpp_source.html#l01373">1373</a> of file <a class="el" href="_o_t_credential_8cpp_source.html">OTCredential.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> this-&gt;<a class="code" href="class_o_t_credential.html#a4b0f3557a99246ba4ddded3a38ab0b1f">GetEncrKeypair</a>(plistRevokedIDs).<a class="code" href="class_o_t_keypair.html#af81de69986e6aa2404fce47311871902">GetPrivateKey</a>();
}
</pre></div>
</div>
</div>
<a class="anchor" id="a87cd1e7f63d71ed30567755816dd7fe9"></a><!-- doxytag: member="OTCredential::GetPrivateSignKey" ref="a87cd1e7f63d71ed30567755816dd7fe9" args="(const listOfStrings *plistRevokedIDs=NULL) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="class_o_t_asymmetric_key.html">OTAsymmetricKey</a> &amp; <a class="el" href="class_o_t_credential.html#a87cd1e7f63d71ed30567755816dd7fe9">OTCredential::GetPrivateSignKey</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="_o_t_string_8hpp.html#a82b49c0dbe4e0c6fa6fb33eef957c89d">listOfStrings</a> *&#160;</td>
          <td class="paramname"><em>plistRevokedIDs</em> = <code>NULL</code></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_credential_8cpp_source.html#l01379">1379</a> of file <a class="el" href="_o_t_credential_8cpp_source.html">OTCredential.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> this-&gt;<a class="code" href="class_o_t_credential.html#a016ad221a7fd8ecc7bc130f3e0b576a3">GetSignKeypair</a>(plistRevokedIDs).<a class="code" href="class_o_t_keypair.html#af81de69986e6aa2404fce47311871902">GetPrivateKey</a>();
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab3e65e4abc6a9f2a04047044682329c2"></a><!-- doxytag: member="OTCredential::GetPubCredential" ref="ab3e65e4abc6a9f2a04047044682329c2" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="class_o_t_string.html">OTString</a> &amp; <a class="el" href="class_o_t_credential.html#ab3e65e4abc6a9f2a04047044682329c2">OTCredential::GetPubCredential</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_credential_8cpp_source.html#l00300">300</a> of file <a class="el" href="_o_t_credential_8cpp_source.html">OTCredential.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> m_Masterkey.<a class="code" href="class_o_t_subcredential.html#af10db6cd37a86780acbcc0bf1e6101a5">GetPubCredential</a>();
}
</pre></div>
</div>
</div>
<a class="anchor" id="aaf58f8fa8471ec0d45330c7bdd1ee732"></a><!-- doxytag: member="OTCredential::GetPublicAuthKey" ref="aaf58f8fa8471ec0d45330c7bdd1ee732" args="(const listOfStrings *plistRevokedIDs=NULL) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="class_o_t_asymmetric_key.html">OTAsymmetricKey</a> &amp; <a class="el" href="class_o_t_credential.html#aaf58f8fa8471ec0d45330c7bdd1ee732">OTCredential::GetPublicAuthKey</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="_o_t_string_8hpp.html#a82b49c0dbe4e0c6fa6fb33eef957c89d">listOfStrings</a> *&#160;</td>
          <td class="paramname"><em>plistRevokedIDs</em> = <code>NULL</code></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_credential_8cpp_source.html#l01349">1349</a> of file <a class="el" href="_o_t_credential_8cpp_source.html">OTCredential.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> this-&gt;<a class="code" href="class_o_t_credential.html#a7de471713c67f17cf6da6d7bbfbf803a">GetAuthKeypair</a>(plistRevokedIDs).<a class="code" href="class_o_t_keypair.html#a67aebd0a39826bbc429bb2676fde9fcd">GetPublicKey</a>();
}
</pre></div>
</div>
</div>
<a class="anchor" id="a52ae29ffb6801d439fe0aec5497f7f13"></a><!-- doxytag: member="OTCredential::GetPublicEncrKey" ref="a52ae29ffb6801d439fe0aec5497f7f13" args="(const listOfStrings *plistRevokedIDs=NULL) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="class_o_t_asymmetric_key.html">OTAsymmetricKey</a> &amp; <a class="el" href="class_o_t_credential.html#a52ae29ffb6801d439fe0aec5497f7f13">OTCredential::GetPublicEncrKey</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="_o_t_string_8hpp.html#a82b49c0dbe4e0c6fa6fb33eef957c89d">listOfStrings</a> *&#160;</td>
          <td class="paramname"><em>plistRevokedIDs</em> = <code>NULL</code></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_credential_8cpp_source.html#l01355">1355</a> of file <a class="el" href="_o_t_credential_8cpp_source.html">OTCredential.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> this-&gt;<a class="code" href="class_o_t_credential.html#a4b0f3557a99246ba4ddded3a38ab0b1f">GetEncrKeypair</a>(plistRevokedIDs).<a class="code" href="class_o_t_keypair.html#a67aebd0a39826bbc429bb2676fde9fcd">GetPublicKey</a>();
}
</pre></div>
</div>
</div>
<a class="anchor" id="ade34be3c485c120489e923d31af8bc63"></a><!-- doxytag: member="OTCredential::GetPublicKeysBySignature" ref="ade34be3c485c120489e923d31af8bc63" args="(listOfAsymmetricKeys &amp;listOutput, const OTSignature &amp;theSignature, char cKeyType='0') const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="class_o_t_credential.html#ade34be3c485c120489e923d31af8bc63">OTCredential::GetPublicKeysBySignature</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_o_t_asymmetric_key_8hpp.html#ada6127549a4970b60a8939215dd89ddb">listOfAsymmetricKeys</a> &amp;&#160;</td>
          <td class="paramname"><em>listOutput</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_signature.html">OTSignature</a> &amp;&#160;</td>
          <td class="paramname"><em>theSignature</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>cKeyType</em> = <code>'0'</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_credential_8cpp_source.html#l00166">166</a> of file <a class="el" href="_o_t_credential_8cpp_source.html">OTCredential.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    int32_t nCount = 0;
    <a class="code" href="_o_t_storage_8hpp.html#a804eb881e96b7e1846d130a55a94f716">FOR_EACH_CONST</a>(<a class="code" href="_o_t_masterkey_8hpp.html#a54f329968b2bb6ec246c697a93f80159">mapOfSubcredentials</a>, m_mapSubcredentials)
    {
        <span class="keyword">const</span> <a class="code" href="class_o_t_subcredential.html">OTSubcredential</a> * pSub = (*it).second;
        <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pSub);
        <span class="comment">// -------------------------</span>
        <span class="keyword">const</span> <a class="code" href="class_o_t_subkey.html">OTSubkey</a> * pKey = <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span><a class="code" href="class_o_t_subkey.html">OTSubkey</a> *<span class="keyword">&gt;</span>(pSub);
        <span class="keywordflow">if</span> (NULL == pKey) <span class="keywordflow">continue</span>; <span class="comment">// Skip all non-key credentials. We&#39;re looking for keys.</span>
        <span class="comment">// -------------------------</span>
        <span class="keyword">const</span> int32_t nTempCount = pKey-&gt;<a class="code" href="class_o_t_key_credential.html#a7046ca845b6fa346e41e239c818e4aa6">GetPublicKeysBySignature</a>(listOutput, theSignature, cKeyType);
        nCount += nTempCount;
    }
    <span class="keywordflow">return</span> nCount;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab48f10080c9aebc115d545692b97e6ae"></a><!-- doxytag: member="OTCredential::GetPublicSignKey" ref="ab48f10080c9aebc115d545692b97e6ae" args="(const listOfStrings *plistRevokedIDs=NULL) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="class_o_t_asymmetric_key.html">OTAsymmetricKey</a> &amp; <a class="el" href="class_o_t_credential.html#ab48f10080c9aebc115d545692b97e6ae">OTCredential::GetPublicSignKey</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="_o_t_string_8hpp.html#a82b49c0dbe4e0c6fa6fb33eef957c89d">listOfStrings</a> *&#160;</td>
          <td class="paramname"><em>plistRevokedIDs</em> = <code>NULL</code></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_credential_8cpp_source.html#l01361">1361</a> of file <a class="el" href="_o_t_credential_8cpp_source.html">OTCredential.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> this-&gt;<a class="code" href="class_o_t_credential.html#a016ad221a7fd8ecc7bc130f3e0b576a3">GetSignKeypair</a>(plistRevokedIDs).<a class="code" href="class_o_t_keypair.html#a67aebd0a39826bbc429bb2676fde9fcd">GetPublicKey</a>();
}
</pre></div>
</div>
</div>
<a class="anchor" id="a016ad221a7fd8ecc7bc130f3e0b576a3"></a><!-- doxytag: member="OTCredential::GetSignKeypair" ref="a016ad221a7fd8ecc7bc130f3e0b576a3" args="(const listOfStrings *plistRevokedIDs=NULL) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="class_o_t_keypair.html">OTKeypair</a> &amp; <a class="el" href="class_o_t_credential.html#a016ad221a7fd8ecc7bc130f3e0b576a3">OTCredential::GetSignKeypair</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="_o_t_string_8hpp.html#a82b49c0dbe4e0c6fa6fb33eef957c89d">listOfStrings</a> *&#160;</td>
          <td class="paramname"><em>plistRevokedIDs</em> = <code>NULL</code></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_credential_8cpp_source.html#l01310">1310</a> of file <a class="el" href="_o_t_credential_8cpp_source.html">OTCredential.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_o_t_storage_8hpp.html#a804eb881e96b7e1846d130a55a94f716">FOR_EACH_CONST</a>(<a class="code" href="_o_t_masterkey_8hpp.html#a54f329968b2bb6ec246c697a93f80159">mapOfSubcredentials</a>, m_mapSubcredentials)
    {
        <span class="keyword">const</span> std::string str_cred_id = (*it).first;
        <span class="keyword">const</span> <a class="code" href="class_o_t_subcredential.html">OTSubcredential</a> * pSub  = (*it).second;
        <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pSub);
        <span class="comment">// ------------------------</span>
        <span class="keyword">const</span> <a class="code" href="class_o_t_subkey.html">OTSubkey</a> * pKey = <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span><a class="code" href="class_o_t_subkey.html">OTSubkey</a> *<span class="keyword">&gt;</span>(pSub);
        <span class="keywordflow">if</span> (NULL == pKey) <span class="keywordflow">continue</span>;
        <span class="comment">// ------------------------</span>
        <span class="comment">// See if pKey, with ID str_cred_id, is on plistRevokedIDs...</span>
        <span class="comment">//</span>
        <span class="keywordflow">if</span> (NULL != plistRevokedIDs)
        {
            listOfStrings::const_iterator iter = std::find(plistRevokedIDs-&gt;begin(), plistRevokedIDs-&gt;end(), str_cred_id);
            <span class="keywordflow">if</span> (iter != plistRevokedIDs-&gt;end()) <span class="comment">// It was on the revoked list.</span>
                <span class="keywordflow">continue</span>; <span class="comment">// Skip this revoked key.</span>
        }
        <span class="comment">// At this point we know it&#39;s a key credential, and we know it&#39;s not on</span>
        <span class="comment">// the revoked list. Therefore, let&#39;s return the key! (Any other future</span>
        <span class="comment">// smart criteria might go here before taking this final step...)</span>
        <span class="comment">//</span>
        <span class="keywordflow">return</span> pKey-&gt;<a class="code" href="class_o_t_key_credential.html#a3c92bcfa894923996931488cb960e6ad">m_SigningKey</a>;
    }
    
    <span class="comment">// Didn&#39;t find any subcredentials we can use? For now, we&#39;ll return the master key instead.</span>
    <span class="comment">// This is purely for backwards compatibility reasons and eventually should be removed. That is,</span>
    <span class="comment">// masters should only be able to verify subkeys, and only subkeys should be able to do actions.</span>
    <span class="comment">// Capiche?</span>
    <span class="comment">//</span>
    <span class="keywordflow">return</span> m_Masterkey.<a class="code" href="class_o_t_key_credential.html#a3c92bcfa894923996931488cb960e6ad">m_SigningKey</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a0f66ddcdf4587eaaa7ab1429126f6395"></a><!-- doxytag: member="OTCredential::GetSourceForNymID" ref="a0f66ddcdf4587eaaa7ab1429126f6395" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="class_o_t_string.html">OTString</a> &amp; <a class="el" href="class_o_t_credential.html#a0f66ddcdf4587eaaa7ab1429126f6395">OTCredential::GetSourceForNymID</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_credential_8cpp_source.html#l00271">271</a> of file <a class="el" href="_o_t_credential_8cpp_source.html">OTCredential.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> m_strSourceForNymID;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a194a0401b7e78a94f298897138004e3e"></a><!-- doxytag: member="OTCredential::GetSubcredential" ref="a194a0401b7e78a94f298897138004e3e" args="(const OTString &amp;strSubID, const listOfStrings *plistRevokedIDs=NULL) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="class_o_t_subcredential.html">OTSubcredential</a> * <a class="el" href="class_o_t_credential.html#a194a0401b7e78a94f298897138004e3e">OTCredential::GetSubcredential</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strSubID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="_o_t_string_8hpp.html#a82b49c0dbe4e0c6fa6fb33eef957c89d">listOfStrings</a> *&#160;</td>
          <td class="paramname"><em>plistRevokedIDs</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_credential_8cpp_source.html#l01161">1161</a> of file <a class="el" href="_o_t_credential_8cpp_source.html">OTCredential.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="_o_t_storage_8hpp.html#a804eb881e96b7e1846d130a55a94f716">FOR_EACH_CONST</a>(<a class="code" href="_o_t_masterkey_8hpp.html#a54f329968b2bb6ec246c697a93f80159">mapOfSubcredentials</a>, m_mapSubcredentials)
    {
        <span class="keyword">const</span> std::string str_cred_id = (*it).first;
        <span class="keyword">const</span> <a class="code" href="class_o_t_subcredential.html">OTSubcredential</a> * pSub  = (*it).second;
        <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pSub);
        <span class="comment">// ------------------------</span>
        <span class="comment">// See if pSub, with ID str_cred_id, is on plistRevokedIDs...</span>
        <span class="comment">//</span>
        <span class="keywordflow">if</span> (NULL != plistRevokedIDs)
        {
            listOfStrings::const_iterator iter = std::find(plistRevokedIDs-&gt;begin(), plistRevokedIDs-&gt;end(), str_cred_id);
            <span class="keywordflow">if</span> (iter != plistRevokedIDs-&gt;end()) <span class="comment">// It was on the revoked list.</span>
                <span class="keywordflow">continue</span>; <span class="comment">// Skip this revoked credential.</span>
        }
        <span class="comment">// At this point we know it&#39;s not on the revoked list, if one was passed in.</span>
        <span class="comment">// --------------------------------------------------</span>
        <span class="keywordflow">if</span> (strSubID.<a class="code" href="class_o_t_string.html#a03401b39fb66d63696342c4f61ea8bf5">Compare</a>(str_cred_id.c_str()))
            <span class="keywordflow">return</span> pSub;
    }
    <span class="keywordflow">return</span> NULL;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a994302077b2c1b26cb530f2916dba7af"></a><!-- doxytag: member="OTCredential::GetSubcredentialByIndex" ref="a994302077b2c1b26cb530f2916dba7af" args="(int32_t nIndex) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="class_o_t_subcredential.html">OTSubcredential</a> * <a class="el" href="class_o_t_credential.html#a994302077b2c1b26cb530f2916dba7af">OTCredential::GetSubcredentialByIndex</a> </td>
          <td>(</td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>nIndex</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_credential_8cpp_source.html#l01186">1186</a> of file <a class="el" href="_o_t_credential_8cpp_source.html">OTCredential.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> ((nIndex &lt; 0) || (nIndex &gt;= static_cast&lt;int64_t&gt;(m_mapSubcredentials.size())))
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Index out of bounds: %d\n&quot;</span>, __FUNCTION__, nIndex);
    }
    <span class="keywordflow">else</span>
    {
        int32_t nLoopIndex = -1;
        
        <a class="code" href="_o_t_storage_8hpp.html#a804eb881e96b7e1846d130a55a94f716">FOR_EACH_CONST</a>(<a class="code" href="_o_t_masterkey_8hpp.html#a54f329968b2bb6ec246c697a93f80159">mapOfSubcredentials</a>, m_mapSubcredentials)
        {
            <span class="keyword">const</span> std::string str_cred_id = (*it).first;
            <span class="keyword">const</span> <a class="code" href="class_o_t_subcredential.html">OTSubcredential</a> * pSub  = (*it).second;
            <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pSub);
            <span class="comment">// ------------------------</span>
            ++nLoopIndex; <span class="comment">// 0 on first iteration.</span>
            <span class="comment">// ------------------------</span>
            <span class="keywordflow">if</span> (nIndex == nLoopIndex)
                <span class="keywordflow">return</span> pSub;
        }
    }
    <span class="comment">// -------------------------</span>
    <span class="keywordflow">return</span> NULL;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a03f9d76360128e0985ce9ab8fc3e9fc4"></a><!-- doxytag: member="OTCredential::GetSubcredentialCount" ref="a03f9d76360128e0985ce9ab8fc3e9fc4" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t <a class="el" href="class_o_t_credential.html#a03f9d76360128e0985ce9ab8fc3e9fc4">OTCredential::GetSubcredentialCount</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_credential_8cpp_source.html#l01155">1155</a> of file <a class="el" href="_o_t_credential_8cpp_source.html">OTCredential.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> m_mapSubcredentials.size();
}
</pre></div>
</div>
</div>
<a class="anchor" id="a9767fa303af5c9a9e9a742d9f72ef834"></a><!-- doxytag: member="OTCredential::GetSubcredentialIDByIndex" ref="a9767fa303af5c9a9e9a742d9f72ef834" args="(size_t nIndex) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const std::string <a class="el" href="class_o_t_credential.html#a9767fa303af5c9a9e9a742d9f72ef834">OTCredential::GetSubcredentialIDByIndex</a> </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>nIndex</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_credential_8cpp_source.html#l01213">1213</a> of file <a class="el" href="_o_t_credential_8cpp_source.html">OTCredential.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (nIndex &gt;= m_mapSubcredentials.size())
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Index out of bounds: %d\n&quot;</span>, __FUNCTION__, nIndex);
    }
    <span class="keywordflow">else</span>
    {
        int32_t nLoopIndex = -1;
        
        <a class="code" href="_o_t_storage_8hpp.html#a804eb881e96b7e1846d130a55a94f716">FOR_EACH_CONST</a>(<a class="code" href="_o_t_masterkey_8hpp.html#a54f329968b2bb6ec246c697a93f80159">mapOfSubcredentials</a>, m_mapSubcredentials)
        {
            <span class="keyword">const</span> std::string str_cred_id = (*it).first;
            <span class="keyword">const</span> <a class="code" href="class_o_t_subcredential.html">OTSubcredential</a> * pSub  = (*it).second;
            <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pSub);
            <span class="comment">// ------------------------</span>
            ++nLoopIndex; <span class="comment">// 0 on first iteration.</span>
            <span class="comment">// ------------------------</span>
            <span class="keywordflow">if</span> (static_cast&lt;int64_t&gt;(nIndex) == nLoopIndex)
                <span class="keywordflow">return</span> str_cred_id;
        }
    }
    <span class="comment">// -------------------------</span>
    <span class="keywordflow">return</span> NULL;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a1881e78cea7a23e9dfdb61baaf983182"></a><!-- doxytag: member="OTCredential::Load_Master" ref="a1881e78cea7a23e9dfdb61baaf983182" args="(const OTString &amp;strNymID, const OTString &amp;strMasterCredID, OTPasswordData *pPWData=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_credential.html#a1881e78cea7a23e9dfdb61baaf983182">OTCredential::Load_Master</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strNymID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strMasterCredID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_password_data.html">OTPasswordData</a> *&#160;</td>
          <td class="paramname"><em>pPWData</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_credential_8cpp_source.html#l00742">742</a> of file <a class="el" href="_o_t_credential_8cpp_source.html">OTCredential.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// --------------------------------------</span>
    std::string str_Folder = <a class="code" href="class_o_t_folders.html#a4e94eac1e796da34baf00556042202f0">OTFolders::Credential</a>().<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(); <span class="comment">// Try private credential first. If that fails, then public.</span>
    <span class="comment">// --------------------------------------</span>
    <span class="keywordflow">if</span> (<span class="keyword">false</span> == <a class="code" href="namespace_o_t_d_b.html#a73e39a590dfb64f63065821c6bbcd4c6">OTDB::Exists</a>(str_Folder, strNymID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(), strMasterCredID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>()))
    {
        str_Folder = <a class="code" href="class_o_t_folders.html#a00c7ea89471a90172d166a8c0eb321a6">OTFolders::Pubcred</a>().<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();
        
        <span class="keywordflow">if</span> (<span class="keyword">false</span> == <a class="code" href="namespace_o_t_d_b.html#a73e39a590dfb64f63065821c6bbcd4c6">OTDB::Exists</a>(str_Folder, strNymID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(), strMasterCredID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>()))
        {
            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Failure: Master Credential %s doesn&#39;t exist for Nym %s\n&quot;</span>,
                          __FUNCTION__, strMasterCredID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(), strNymID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
            <span class="keywordflow">return</span> <span class="keyword">false</span>;
        }
    }
    <span class="comment">// ----------------------------------------------------</span>
    <a class="code" href="class_o_t_string.html">OTString</a> strFileContents(<a class="code" href="namespace_o_t_d_b.html#a921d6f538de00f4e4297c25cf679f00a">OTDB::QueryPlainString</a>(str_Folder,
                                                    strNymID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(),
                                                    strMasterCredID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>()));
    <span class="keywordflow">if</span> (!strFileContents.Exists())
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Failed trying to load master credential from local storage.\n&quot;</span>, __FUNCTION__);
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// ---------------------------------------    </span>
    <span class="keywordflow">if</span> (<span class="keyword">false</span> == strFileContents.DecodeIfArmored()) <span class="comment">// bEscapedIsAllowed=true by default.</span>
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: File contents apparently were encoded and then failed decoding. Contents: \n%s\n&quot;</span>,
                      __FUNCTION__, strFileContents.Get());
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// --------------------------------------------------</span>
    <span class="keywordflow">return</span> this-&gt;<a class="code" href="class_o_t_credential.html#acdce503f6da5d0f48174c2a067ac3d0b">Load_MasterFromString</a>(strFileContents, strNymID, strMasterCredID, pPWData);
}
</pre></div>
</div>
</div>
<a class="anchor" id="acdce503f6da5d0f48174c2a067ac3d0b"></a><!-- doxytag: member="OTCredential::Load_MasterFromString" ref="acdce503f6da5d0f48174c2a067ac3d0b" args="(const OTString &amp;strInput, const OTString &amp;strNymID, const OTString &amp;strMasterCredID, OTPasswordData *pPWData=NULL, OTPassword *pImportPassword=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_credential.html#acdce503f6da5d0f48174c2a067ac3d0b">OTCredential::Load_MasterFromString</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strInput</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strNymID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strMasterCredID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_password_data.html">OTPasswordData</a> *&#160;</td>
          <td class="paramname"><em>pPWData</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_password.html">OTPassword</a> *&#160;</td>
          <td class="paramname"><em>pImportPassword</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_credential_8cpp_source.html#l00697">697</a> of file <a class="el" href="_o_t_credential_8cpp_source.html">OTCredential.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    m_strNymID          = strNymID;
    m_strMasterCredID   = strMasterCredID;
    <span class="comment">// --------------------------------------</span>
    m_Masterkey.<a class="code" href="class_o_t_contract.html#a18b55003e207dff89912f7c895af45f6">SetIdentifier</a>(strMasterCredID);
    <span class="comment">// --------------------------------------</span>
    <span class="comment">// m_Masterkey and the subkeys all have a pointer to &quot;owner&quot; (who is *this)</span>
    <span class="comment">// and so I can set pImportPassword onto a member variable, perform the load,</span>
    <span class="comment">// and then set that member NULL again. During the call to LoadContractFromString,</span>
    <span class="comment">// m_Masterkey can reference m_pOwner-&gt;GetImportPassword() and if it&#39;s not NULL,</span>
    <span class="comment">// use it instead of using the wallet&#39;s cached master key. After all, if it&#39;s not</span>
    <span class="comment">// NULL here, that&#39;s why it was passed in.</span>
    <span class="comment">//</span>
    <span class="comment">// --------------------------------------</span>
    
    this-&gt;<a class="code" href="class_o_t_credential.html#a6307046ef1e16d486e19791d0b087dd4">SetImportPassword</a>(pImportPassword); <span class="comment">// might be NULL.</span>
    
    <span class="comment">// --------------------------------------</span>
    <span class="keyword">const</span> <span class="keywordtype">bool</span> bLoaded = m_Masterkey.<a class="code" href="class_o_t_contract.html#a36300e34dcd94ed7006d98b392d46815">LoadContractFromString</a>(strInput);
    <span class="keywordflow">if</span> (!bLoaded)
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Failed trying to load master credential from string.\n&quot;</span>, __FUNCTION__);
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// --------------------------------------</span>

    this-&gt;<a class="code" href="class_o_t_credential.html#a6307046ef1e16d486e19791d0b087dd4">SetImportPassword</a>(NULL); <span class="comment">// It was only set during the m_Masterkey.LoadContractFromString (which references it.)</span>
    
    <span class="comment">// --------------------------------------</span>
    m_strNymID          = m_Masterkey.<a class="code" href="class_o_t_subcredential.html#a7d841c2d684d40d8e028c0a2eaff7b36">GetNymID</a>();
    m_strSourceForNymID = m_Masterkey.<a class="code" href="class_o_t_subcredential.html#a37c37d5327855eebaa89df0dcc8686a0">GetNymIDSource</a>();
    <span class="comment">// --------------------------------------</span>
    this-&gt;<a class="code" href="class_o_t_credential.html#ad3c0bb991b75fbd0e06f91bab725c66c">ClearSubcredentials</a>();  <span class="comment">// The master is loaded first, and then any subcredentials. So this is probably already empty. Just looking ahead.</span>
    <span class="comment">// --------------------------------------</span>
    m_Masterkey.<a class="code" href="class_o_t_key_credential.html#a0fc4da073af06c53280f58ed38291890">SetMetadata</a>();
    <span class="comment">// --------------------------------------------------</span>
    <span class="keywordflow">return</span> <span class="keyword">true</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa715e4d86931c981c05dc23a6e99b51c"></a><!-- doxytag: member="OTCredential::LoadMaster" ref="aa715e4d86931c981c05dc23a6e99b51c" args="(const OTString &amp;strNymID, const OTString &amp;strMasterCredID, OTPasswordData *pPWData=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_credential.html">OTCredential</a> * <a class="el" href="class_o_t_credential.html#aa715e4d86931c981c05dc23a6e99b51c">OTCredential::LoadMaster</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strNymID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strMasterCredID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_password_data.html">OTPasswordData</a> *&#160;</td>
          <td class="paramname"><em>pPWData</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_credential_8cpp_source.html#l00343">343</a> of file <a class="el" href="_o_t_credential_8cpp_source.html">OTCredential.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_o_t_credential.html">OTCredential</a> * pCredential = <span class="keyword">new</span> <a class="code" href="class_o_t_credential.html">OTCredential</a>;
    <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTCredential&gt;</a> theCredentialAngel(pCredential);
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pCredential);
    <span class="comment">// -------------------------------------</span>
    <a class="code" href="class_o_t_password_data.html">OTPasswordData</a> thePWData(<span class="stringliteral">&quot;Loading master credential. (static 1.)&quot;</span>);
    <span class="keyword">const</span> <span class="keywordtype">bool</span> bLoaded = pCredential-&gt;<a class="code" href="class_o_t_credential.html#a1881e78cea7a23e9dfdb61baaf983182">Load_Master</a>(strNymID, strMasterCredID, (NULL == pPWData) ? &amp;thePWData : pPWData);
    <span class="keywordflow">if</span> (!bLoaded)
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Failed trying to load master credential from local storage. 1\n&quot;</span>, __FUNCTION__);
        <span class="keywordflow">return</span> NULL;
    }
    <span class="comment">// --------------------------------------------------</span>
    theCredentialAngel.SetCleanupTargetPointer(NULL); <span class="comment">// so pCredential doesn&#39;t get cleaned up.</span>
    <span class="keywordflow">return</span> pCredential;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ade0b88fa2ad1963a0619838266a1e18d"></a><!-- doxytag: member="OTCredential::LoadMasterFromString" ref="ade0b88fa2ad1963a0619838266a1e18d" args="(const OTString &amp;strInput, const OTString &amp;strNymID, const OTString &amp;strMasterCredID, OTPasswordData *pPWData=NULL, OTPassword *pImportPassword=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_t_credential.html">OTCredential</a> * <a class="el" href="class_o_t_credential.html#ade0b88fa2ad1963a0619838266a1e18d">OTCredential::LoadMasterFromString</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strInput</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strNymID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strMasterCredID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_password_data.html">OTPasswordData</a> *&#160;</td>
          <td class="paramname"><em>pPWData</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_password.html">OTPassword</a> *&#160;</td>
          <td class="paramname"><em>pImportPassword</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_credential_8cpp_source.html#l00365">365</a> of file <a class="el" href="_o_t_credential_8cpp_source.html">OTCredential.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_o_t_credential.html">OTCredential</a> * pCredential = <span class="keyword">new</span> <a class="code" href="class_o_t_credential.html">OTCredential</a>;
    <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTCredential&gt;</a> theCredentialAngel(pCredential);
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pCredential);
    <span class="comment">// -------------------------------------</span>
    <a class="code" href="class_o_t_password_data.html">OTPasswordData</a> thePWData(NULL == pImportPassword ? <span class="stringliteral">&quot;Enter wallet master passphrase.&quot;</span> : <span class="stringliteral">&quot;Enter passphrase for exported Nym.&quot;</span>);
    <span class="keyword">const</span> <span class="keywordtype">bool</span> bLoaded = pCredential-&gt;<a class="code" href="class_o_t_credential.html#acdce503f6da5d0f48174c2a067ac3d0b">Load_MasterFromString</a>(strInput, strNymID,
                                                            strMasterCredID,
                                                            (NULL == pPWData) ? &amp;thePWData : pPWData,
                                                            pImportPassword);
    <span class="keywordflow">if</span> (!bLoaded)
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Failed trying to load master credential from string. 2\n&quot;</span>, __FUNCTION__);
        <span class="keywordflow">return</span> NULL;
    }
    <span class="comment">// --------------------------------------------------</span>
    theCredentialAngel.SetCleanupTargetPointer(NULL); <span class="comment">// so pCredential doesn&#39;t get cleaned up.</span>
    <span class="keywordflow">return</span> pCredential;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a3cb75790d2053af51f7fb617095c8e72"></a><!-- doxytag: member="OTCredential::LoadSubcredential" ref="a3cb75790d2053af51f7fb617095c8e72" args="(const OTString &amp;strSubID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_credential.html#a3cb75790d2053af51f7fb617095c8e72">OTCredential::LoadSubcredential</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strSubID</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_credential_8cpp_source.html#l00906">906</a> of file <a class="el" href="_o_t_credential_8cpp_source.html">OTCredential.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// --------------------------------------</span>
    std::string str_Folder = <a class="code" href="class_o_t_folders.html#a4e94eac1e796da34baf00556042202f0">OTFolders::Credential</a>().<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(); <span class="comment">// Try private credential first. If that fails, then public.</span>
    <span class="comment">// --------------------------------------</span>
    <span class="keywordflow">if</span> (<span class="keyword">false</span> == <a class="code" href="namespace_o_t_d_b.html#a73e39a590dfb64f63065821c6bbcd4c6">OTDB::Exists</a>(str_Folder, this-&gt;<a class="code" href="class_o_t_credential.html#aba950a82684048857d26afd48b2a555c">GetNymID</a>().Get(), strSubID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>()))
    {
        str_Folder = <a class="code" href="class_o_t_folders.html#a00c7ea89471a90172d166a8c0eb321a6">OTFolders::Pubcred</a>().<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();
        
        <span class="keywordflow">if</span> (<span class="keyword">false</span> == <a class="code" href="namespace_o_t_d_b.html#a73e39a590dfb64f63065821c6bbcd4c6">OTDB::Exists</a>(str_Folder, this-&gt;<a class="code" href="class_o_t_credential.html#aba950a82684048857d26afd48b2a555c">GetNymID</a>().Get(), strSubID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>()))
        {
            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Failure: Credential %s doesn&#39;t exist for Nym %s\n&quot;</span>,
                          __FUNCTION__, strSubID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(), this-&gt;<a class="code" href="class_o_t_credential.html#aba950a82684048857d26afd48b2a555c">GetNymID</a>().<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
            <span class="keywordflow">return</span> <span class="keyword">false</span>;
        }
    }
    <span class="comment">// ----------------------------------------------------</span>
    <a class="code" href="class_o_t_string.html">OTString</a> strFileContents(<a class="code" href="namespace_o_t_d_b.html#a921d6f538de00f4e4297c25cf679f00a">OTDB::QueryPlainString</a>(str_Folder,
                                                    this-&gt;<a class="code" href="class_o_t_credential.html#aba950a82684048857d26afd48b2a555c">GetNymID</a>().Get(),
                                                    strSubID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>()));
    <span class="keywordflow">if</span> (!strFileContents.Exists())
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Failed trying to load subCredential from local storage.\n&quot;</span>, __FUNCTION__);
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// ---------------------------------------</span>
    <span class="keywordflow">if</span> (<span class="keyword">false</span> == strFileContents.DecodeIfArmored()) <span class="comment">// bEscapedIsAllowed=true by default.</span>
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: File contents apparently were encoded and then failed decoding. Contents: \n%s\n&quot;</span>,
                      __FUNCTION__, strFileContents.Get());
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// --------------------------------------------------</span>
    <span class="keywordflow">return</span> this-&gt;<a class="code" href="class_o_t_credential.html#a6d3d9564e2ee5ebc351bcc853d7cd064">LoadSubcredentialFromString</a>(strFileContents, strSubID);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a6d3d9564e2ee5ebc351bcc853d7cd064"></a><!-- doxytag: member="OTCredential::LoadSubcredentialFromString" ref="a6d3d9564e2ee5ebc351bcc853d7cd064" args="(const OTString &amp;strInput, const OTString &amp;strSubID, OTPassword *pImportPassword=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_credential.html#a6d3d9564e2ee5ebc351bcc853d7cd064">OTCredential::LoadSubcredentialFromString</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strInput</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strSubID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_password.html">OTPassword</a> *&#160;</td>
          <td class="paramname"><em>pImportPassword</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_credential_8cpp_source.html#l00864">864</a> of file <a class="el" href="_o_t_credential_8cpp_source.html">OTCredential.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// Make sure it&#39;s not already there.</span>
    <span class="comment">//</span>
    mapOfSubcredentials::iterator it = m_mapSubcredentials.find(strSubID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
    <span class="keywordflow">if</span> (it != m_mapSubcredentials.end()) <span class="comment">// It was already there. (Reload it.)</span>
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Warning: Deleting and re-loading subCredential that was already loaded.\n&quot;</span>, __FUNCTION__);
        <a class="code" href="class_o_t_subcredential.html">OTSubcredential</a> * pSub = (*it).second;
        <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pSub);
        <span class="keyword">delete</span> pSub;
        m_mapSubcredentials.erase(it);
    }
    <span class="comment">// -------------------------------------</span>
    <a class="code" href="class_o_t_subcredential.html">OTSubcredential</a> * pSub = <span class="keyword">new</span> <a class="code" href="class_o_t_subcredential.html">OTSubcredential</a>(*<span class="keyword">this</span>);
    <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTSubcredential&gt;</a> theSubAngel(pSub);
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pSub);
    <span class="comment">// ----------------------</span>
    pSub-&gt;<a class="code" href="class_o_t_contract.html#a18b55003e207dff89912f7c895af45f6">SetIdentifier</a>(strSubID);
    pSub-&gt;<a class="code" href="class_o_t_subcredential.html#a5e8d869299c60190a3b984becc4accf2">SetNymIDandSource</a>(this-&gt;<a class="code" href="class_o_t_credential.html#aba950a82684048857d26afd48b2a555c">GetNymID</a>(), this-&gt;<a class="code" href="class_o_t_credential.html#a0f66ddcdf4587eaaa7ab1429126f6395">GetSourceForNymID</a>()); <span class="comment">// Set NymID and source string that hashes to it.</span>
    pSub-&gt;<a class="code" href="class_o_t_subcredential.html#a910f9ae6d38fcc8683438dfc0288c5b5">SetMasterCredID</a>  (this-&gt;<a class="code" href="class_o_t_credential.html#a1e99eeeb4d701f2ea9b56a1201a57680">GetMasterCredID</a>());         <span class="comment">// Set master credential ID (onto this new subcredential...)</span>
    <span class="comment">// --------------------------------------</span>
    
    this-&gt;<a class="code" href="class_o_t_credential.html#a6307046ef1e16d486e19791d0b087dd4">SetImportPassword</a>(pImportPassword); <span class="comment">// might be NULL.</span>
    
    <span class="comment">// --------------------------------------</span>
    <span class="keywordflow">if</span> (<span class="keyword">false</span> == pSub-&gt;<a class="code" href="class_o_t_contract.html#a36300e34dcd94ed7006d98b392d46815">LoadContractFromString</a>(strInput))
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Failed trying to load subCredential from string.\n&quot;</span>, __FUNCTION__);
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// --------------------------------------</span>
    
    this-&gt;<a class="code" href="class_o_t_credential.html#a6307046ef1e16d486e19791d0b087dd4">SetImportPassword</a>(NULL); <span class="comment">// This is only set int64_t enough for LoadContractFromString to use it. (Then back to NULL.)</span>
    
    <span class="comment">// --------------------------------------</span>
    m_mapSubcredentials.insert(std::pair&lt;std::string, OTSubcredential *&gt;(strSubID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(), pSub));
    theSubAngel.SetCleanupTargetPointer(NULL);
    <span class="keywordflow">return</span> <span class="keyword">true</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae87844e4f044e39a39170350571eee8e"></a><!-- doxytag: member="OTCredential::LoadSubkey" ref="ae87844e4f044e39a39170350571eee8e" args="(const OTString &amp;strSubID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_credential.html#ae87844e4f044e39a39170350571eee8e">OTCredential::LoadSubkey</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strSubID</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_credential_8cpp_source.html#l00826">826</a> of file <a class="el" href="_o_t_credential_8cpp_source.html">OTCredential.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// --------------------------------------</span>
    std::string str_Folder = <a class="code" href="class_o_t_folders.html#a4e94eac1e796da34baf00556042202f0">OTFolders::Credential</a>().<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(); <span class="comment">// Try private credential first. If that fails, then public.</span>
    <span class="comment">// --------------------------------------</span>
    <span class="keywordflow">if</span> (<span class="keyword">false</span> == <a class="code" href="namespace_o_t_d_b.html#a73e39a590dfb64f63065821c6bbcd4c6">OTDB::Exists</a>(str_Folder, this-&gt;<a class="code" href="class_o_t_credential.html#aba950a82684048857d26afd48b2a555c">GetNymID</a>().Get(), strSubID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>()))
    {
        str_Folder = <a class="code" href="class_o_t_folders.html#a00c7ea89471a90172d166a8c0eb321a6">OTFolders::Pubcred</a>().<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>();
        
        <span class="keywordflow">if</span> (<span class="keyword">false</span> == <a class="code" href="namespace_o_t_d_b.html#a73e39a590dfb64f63065821c6bbcd4c6">OTDB::Exists</a>(str_Folder, this-&gt;<a class="code" href="class_o_t_credential.html#aba950a82684048857d26afd48b2a555c">GetNymID</a>().Get(), strSubID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>()))
        {
            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Failure: Key Credential %s doesn&#39;t exist for Nym %s\n&quot;</span>,
                          __FUNCTION__, strSubID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(), this-&gt;<a class="code" href="class_o_t_credential.html#aba950a82684048857d26afd48b2a555c">GetNymID</a>().<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
            <span class="keywordflow">return</span> <span class="keyword">false</span>;
        }
    }
    <span class="comment">// ----------------------------------------------------    </span>
    <a class="code" href="class_o_t_string.html">OTString</a> strFileContents(<a class="code" href="namespace_o_t_d_b.html#a921d6f538de00f4e4297c25cf679f00a">OTDB::QueryPlainString</a>(str_Folder,
                                                    this-&gt;<a class="code" href="class_o_t_credential.html#aba950a82684048857d26afd48b2a555c">GetNymID</a>().Get(),
                                                    strSubID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>()));
    
    <span class="keywordflow">if</span> (<span class="keyword">false</span> == strFileContents.Exists())
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Failed trying to load keyCredential from local storage.\n&quot;</span>, __FUNCTION__);
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// ---------------------------------------</span>
    <span class="keywordflow">if</span> (<span class="keyword">false</span> == strFileContents.DecodeIfArmored()) <span class="comment">// bEscapedIsAllowed=true by default.</span>
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: File contents apparently were encoded and then failed decoding. Contents: \n%s\n&quot;</span>,
                      __FUNCTION__, strFileContents.Get());
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// --------------------------------------------------</span>
    <span class="keywordflow">return</span> this-&gt;<a class="code" href="class_o_t_credential.html#a079090cfac15cf6222665e93a06a576c">LoadSubkeyFromString</a>(strFileContents, strSubID);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a079090cfac15cf6222665e93a06a576c"></a><!-- doxytag: member="OTCredential::LoadSubkeyFromString" ref="a079090cfac15cf6222665e93a06a576c" args="(const OTString &amp;strInput, const OTString &amp;strSubID, OTPassword *pImportPassword=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_credential.html#a079090cfac15cf6222665e93a06a576c">OTCredential::LoadSubkeyFromString</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strInput</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strSubID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_o_t_password.html">OTPassword</a> *&#160;</td>
          <td class="paramname"><em>pImportPassword</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_credential_8cpp_source.html#l00781">781</a> of file <a class="el" href="_o_t_credential_8cpp_source.html">OTCredential.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// Make sure it&#39;s not already there.</span>
    <span class="comment">//</span>
    mapOfSubcredentials::iterator it = m_mapSubcredentials.find(strSubID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
    <span class="keywordflow">if</span> (it != m_mapSubcredentials.end()) <span class="comment">// It was already there. (Reload it.)</span>
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Warning: Deleting and re-loading keyCredential that was already loaded.\n&quot;</span>,
                      __FUNCTION__);
        <a class="code" href="class_o_t_subcredential.html">OTSubcredential</a> * pSub = (*it).second;
        <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pSub);
        <span class="keyword">delete</span> pSub;
        m_mapSubcredentials.erase(it);
    }
    <span class="comment">// -------------------------------------</span>
    <a class="code" href="class_o_t_subkey.html">OTSubkey</a> * pSub = <span class="keyword">new</span> <a class="code" href="class_o_t_subkey.html">OTSubkey</a>(*<span class="keyword">this</span>);
    <a class="code" href="class_o_t_cleanup.html">OTCleanup&lt;OTSubkey&gt;</a> theSubAngel(pSub);
    <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pSub);
    <span class="comment">// ----------------------</span>
    pSub-&gt;<a class="code" href="class_o_t_contract.html#a18b55003e207dff89912f7c895af45f6">SetIdentifier</a>(strSubID);
    pSub-&gt;<a class="code" href="class_o_t_subcredential.html#a5e8d869299c60190a3b984becc4accf2">SetNymIDandSource</a>(this-&gt;<a class="code" href="class_o_t_credential.html#aba950a82684048857d26afd48b2a555c">GetNymID</a>(), this-&gt;<a class="code" href="class_o_t_credential.html#a0f66ddcdf4587eaaa7ab1429126f6395">GetSourceForNymID</a>()); <span class="comment">// Set NymID and source string that hashes to it.</span>
    pSub-&gt;<a class="code" href="class_o_t_subcredential.html#a910f9ae6d38fcc8683438dfc0288c5b5">SetMasterCredID</a>  (this-&gt;<a class="code" href="class_o_t_credential.html#a1e99eeeb4d701f2ea9b56a1201a57680">GetMasterCredID</a>());         <span class="comment">// Set master credential ID (onto this new subcredential...)</span>
    <span class="comment">// --------------------------------------</span>
    
    this-&gt;<a class="code" href="class_o_t_credential.html#a6307046ef1e16d486e19791d0b087dd4">SetImportPassword</a>(pImportPassword); <span class="comment">// might be NULL.</span>

    <span class="comment">// --------------------------------------</span>
    <span class="keywordflow">if</span> (<span class="keyword">false</span> == pSub-&gt;<a class="code" href="class_o_t_contract.html#a36300e34dcd94ed7006d98b392d46815">LoadContractFromString</a>(strInput))
    {
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;%s: Failed trying to load keyCredential from string.\n&quot;</span>, __FUNCTION__);
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// --------------------------------------</span>
    
    this-&gt;<a class="code" href="class_o_t_credential.html#a6307046ef1e16d486e19791d0b087dd4">SetImportPassword</a>(NULL); <span class="comment">// Only set int64_t enough for LoadContractFromString above to use it.</span>
    
    <span class="comment">// --------------------------------------</span>
    pSub-&gt;<a class="code" href="class_o_t_key_credential.html#a0fc4da073af06c53280f58ed38291890">SetMetadata</a>();
    <span class="comment">// -------------------------------------</span>
    m_mapSubcredentials.insert(std::pair&lt;std::string, OTSubcredential *&gt;(strSubID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(), pSub));
    theSubAngel.SetCleanupTargetPointer(NULL);
    <span class="keywordflow">return</span> <span class="keyword">true</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a4aa93a303e599713598c06219ad11469"></a><!-- doxytag: member="OTCredential::ReEncryptPrivateCredentials" ref="a4aa93a303e599713598c06219ad11469" args="(OTPassword &amp;theExportPassword, bool bImporting)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_credential.html#a4aa93a303e599713598c06219ad11469">OTCredential::ReEncryptPrivateCredentials</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_password.html">OTPassword</a> &amp;&#160;</td>
          <td class="paramname"><em>theExportPassword</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>bImporting</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_credential_8cpp_source.html#l00470">470</a> of file <a class="el" href="_o_t_credential_8cpp_source.html">OTCredential.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (m_Masterkey.<a class="code" href="class_o_t_subcredential.html#a314c11e0c372254055c4bc14392846c9">GetPrivateMap</a>().size() &gt; 0)
    {
        <a class="code" href="class_o_t_password_data.html">OTPasswordData</a> thePWData(bImporting ?
                                 <span class="stringliteral">&quot;2 Enter passphrase for the Nym being imported.&quot;</span> :
                                 <span class="stringliteral">&quot;2 Enter new passphrase for exported Nym.&quot;</span>);
        <span class="comment">// -------------------------------</span>
        <span class="comment">// Re-encrypt the private keys in the masterkey. (THEN sign.)</span>
        <span class="comment">//</span>
        <span class="keyword">const</span> <span class="keywordtype">bool</span> bReEncryptMaster = m_Masterkey.<a class="code" href="class_o_t_key_credential.html#a1f7f29a88d15b974b8ac583a89a00ba5">ReEncryptKeys</a>(theExportPassword, bImporting);
              <span class="keywordtype">bool</span> bSignedMaster    = <span class="keyword">false</span>;
        
        <span class="keywordflow">if</span> (bReEncryptMaster)
        {
            m_Masterkey.<a class="code" href="class_o_t_contract.html#aae54340526fbd8eb8a18de27a4b97c83">ReleaseSignatures</a>(); <span class="comment">// This time we&#39;ll sign it in private mode.</span>
            bSignedMaster = m_Masterkey.<a class="code" href="class_o_t_key_credential.html#af44f4b8860f575b7b0fdd4cc8e27023a">SignContract</a>(m_Masterkey, &amp;thePWData);
        }
        <span class="keywordflow">else</span>
        {
            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;In %s, line %d: Failed trying to re-encrypt the private masterkey.\n&quot;</span>,
                          __FILE__, __LINE__);
            <span class="keywordflow">return</span> <span class="keyword">false</span>;
        }
        <span class="comment">// ---------------------------</span>
        <span class="keywordflow">if</span> (bSignedMaster)
        {
            m_Masterkey.<a class="code" href="class_o_t_contract.html#a363ae430d4fd9256ab8364dbafb95444">SaveContract</a>();
            m_Masterkey.<a class="code" href="class_o_t_key_credential.html#a0fc4da073af06c53280f58ed38291890">SetMetadata</a> (); <span class="comment">// todo: can probably remove this, since it was set based on public info when the key was first created.</span>
            <span class="comment">// -------------------------------</span>
            <a class="code" href="_o_t_storage_8hpp.html#aa135ed03585fa4b246d7907afbd5873d">FOR_EACH</a>(<a class="code" href="_o_t_masterkey_8hpp.html#a54f329968b2bb6ec246c697a93f80159">mapOfSubcredentials</a>, m_mapSubcredentials)
            {
                <span class="keyword">const</span> std::string str_cred_id = (*it).first;
                      <a class="code" href="class_o_t_subcredential.html">OTSubcredential</a> * pSub  = (*it).second;
                <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pSub);
                <span class="comment">// ------------------------</span>
                <a class="code" href="class_o_t_subkey.html">OTSubkey</a> * pKey = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="class_o_t_subkey.html">OTSubkey</a> *<span class="keyword">&gt;</span>(pSub);
                <span class="keywordflow">if</span> (NULL == pKey) <span class="keywordflow">continue</span>;
                <span class="comment">// ------------------------</span>
                <span class="keyword">const</span> <span class="keywordtype">bool</span> bReEncryptSubkey = pKey-&gt;<a class="code" href="class_o_t_key_credential.html#a1f7f29a88d15b974b8ac583a89a00ba5">ReEncryptKeys</a>(theExportPassword, bImporting);
                      <span class="keywordtype">bool</span> bSignedSubkey    = <span class="keyword">false</span>;

                <span class="keywordflow">if</span> (bReEncryptSubkey)
                {
                    pKey-&gt;<a class="code" href="class_o_t_contract.html#aae54340526fbd8eb8a18de27a4b97c83">ReleaseSignatures</a>();
                    bSignedSubkey = pKey-&gt;<a class="code" href="class_o_t_key_credential.html#af44f4b8860f575b7b0fdd4cc8e27023a">SignContract</a>(*pKey, &amp;thePWData);
                }
                <span class="keywordflow">else</span>
                {
                    <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;In %s, line %d: Failed trying to re-encrypt the private subkey.\n&quot;</span>,
                                  __FILE__, __LINE__);
                    <span class="keywordflow">return</span> <span class="keyword">false</span>;
                }
                <span class="comment">// ---------------------</span>
                <span class="keywordflow">if</span> (bSignedSubkey)
                {
                    pKey-&gt;<a class="code" href="class_o_t_contract.html#a363ae430d4fd9256ab8364dbafb95444">SaveContract</a>();
                    pKey-&gt;<a class="code" href="class_o_t_key_credential.html#a0fc4da073af06c53280f58ed38291890">SetMetadata</a> (); <span class="comment">// todo: can probably remove this, since it was set based on public info when the key was first created.</span>
                }
                <span class="keywordflow">else</span>
                {
                    <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;In %s, line %d: Failed trying to re-sign the private subkey.\n&quot;</span>,
                                  __FILE__, __LINE__);
                    <span class="keywordflow">return</span> <span class="keyword">false</span>;
                }
            } <span class="comment">// FOR_EACH</span>
            <span class="comment">// -------------------------------</span>
            <span class="keywordflow">return</span> <span class="keyword">true</span>; <span class="comment">// &lt;=== Success.</span>
        }
        <span class="keywordflow">else</span>
            <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;In %s, line %d: Failed trying to re-sign the master private credential.\n&quot;</span>,
                          __FILE__, __LINE__);
    }
    <span class="keywordflow">else</span>
        <a class="code" href="class_o_t_log.html#acd1264f26723485de0783186149b0eca">OTLog::vError</a>(<span class="stringliteral">&quot;In %s, line %d: Failed: There is no private info on this master credential.\n&quot;</span>,
                      __FILE__, __LINE__);

    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aee02a93fec9ee67aaef7af32709bbcd0"></a><!-- doxytag: member="OTCredential::SerializeIDs" ref="aee02a93fec9ee67aaef7af32709bbcd0" args="(OTString &amp;strOutput, listOfStrings &amp;listRevokedIDs, mapOfStrings *pmapPubInfo=NULL, mapOfStrings *pmapPriInfo=NULL, bool bShowRevoked=false, bool bValid=true) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_o_t_credential.html#aee02a93fec9ee67aaef7af32709bbcd0">OTCredential::SerializeIDs</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_string.html">OTString</a> &amp;&#160;</td>
          <td class="paramname"><em>strOutput</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="_o_t_string_8hpp.html#a82b49c0dbe4e0c6fa6fb33eef957c89d">listOfStrings</a> &amp;&#160;</td>
          <td class="paramname"><em>listRevokedIDs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="_o_t_string_8hpp.html#a7ec7839682b097a5c5b5c5125046c82b">mapOfStrings</a> *&#160;</td>
          <td class="paramname"><em>pmapPubInfo</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="_o_t_string_8hpp.html#a7ec7839682b097a5c5b5c5125046c82b">mapOfStrings</a> *&#160;</td>
          <td class="paramname"><em>pmapPriInfo</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>bShowRevoked</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>bValid</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_credential_8cpp_source.html#l01414">1414</a> of file <a class="el" href="_o_t_credential_8cpp_source.html">OTCredential.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (bValid || bShowRevoked)
    {
        strOutput.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;&lt;masterCredential\n&quot;</span>
                              <span class="stringliteral">&quot; ID=\&quot;%s\&quot;\n&quot;</span>
                              <span class="stringliteral">&quot; valid=\&quot;%s\&quot;&quot;</span>
                              <span class="stringliteral">&quot;/&gt;\n\n&quot;</span>,
                              this-&gt;<a class="code" href="class_o_t_credential.html#a1e99eeeb4d701f2ea9b56a1201a57680">GetMasterCredID</a>().Get(),
                              bValid ? <span class="stringliteral">&quot;true&quot;</span> : <span class="stringliteral">&quot;false&quot;</span>);
        <span class="comment">// ------------------------------------------------</span>
        <span class="keywordflow">if</span> (NULL != pmapPubInfo) <span class="comment">// optional out-param.</span>
            pmapPubInfo-&gt;insert(std::pair&lt;std::string, std::string&gt;(this-&gt;<a class="code" href="class_o_t_credential.html#a1e99eeeb4d701f2ea9b56a1201a57680">GetMasterCredID</a>().Get(), this-&gt;<a class="code" href="class_o_t_credential.html#ab3e65e4abc6a9f2a04047044682329c2">GetPubCredential</a>().Get()));
        <span class="comment">// ------------------------------------------------</span>
        <span class="keywordflow">if</span> (NULL != pmapPriInfo) <span class="comment">// optional out-param.</span>
            pmapPriInfo-&gt;insert(std::pair&lt;std::string, std::string&gt;(this-&gt;<a class="code" href="class_o_t_credential.html#a1e99eeeb4d701f2ea9b56a1201a57680">GetMasterCredID</a>().Get(), this-&gt;<a class="code" href="class_o_t_credential.html#a50cfd1cc44ddb922b907b33bfcaf6062">GetPriCredential</a>().Get()));
        <span class="comment">// ------------------------------------------------</span>
    }
    <span class="comment">// -------------------------------------</span>
    <a class="code" href="_o_t_storage_8hpp.html#a804eb881e96b7e1846d130a55a94f716">FOR_EACH_CONST</a>(<a class="code" href="_o_t_masterkey_8hpp.html#a54f329968b2bb6ec246c697a93f80159">mapOfSubcredentials</a>, m_mapSubcredentials)
    {
        <span class="keyword">const</span> std::string str_cred_id = (*it).first;
        <span class="keyword">const</span> <a class="code" href="class_o_t_subcredential.html">OTSubcredential</a> * pSub  = (*it).second;
        <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pSub);
        <span class="comment">// -----------------------------</span>
        <span class="comment">// See if the current subcredential is on the Nym&#39;s list of &quot;revoked&quot; subcredential IDs.</span>
        <span class="comment">// If so, we&#39;ll skip serializing it here.</span>
        <span class="comment">//</span>
        listOfStrings::iterator iter = std::find(listRevokedIDs.begin(), listRevokedIDs.end(), str_cred_id);
        
        <span class="comment">// Was it on the &#39;revoked&#39; list?</span>
        <span class="comment">// If not, then the subcredential isn&#39;t revoked, so it&#39;s still valid.</span>
        <span class="comment">//</span>
        <span class="keyword">const</span> <span class="keywordtype">bool</span> bSubcredValid = bValid ? (iter == listRevokedIDs.end()) : <span class="keyword">false</span>;
        <span class="comment">// -----------------------------</span>
        <span class="keywordflow">if</span> (bSubcredValid || bShowRevoked)
        {
            <span class="keyword">const</span> <a class="code" href="class_o_t_subkey.html">OTSubkey</a> * pSubkey = <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span><a class="code" href="class_o_t_subkey.html">OTSubkey</a> *<span class="keyword">&gt;</span>(pSub);
            
            <span class="keywordflow">if</span> (NULL != pSubkey)
                strOutput.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;&lt;keyCredential\n&quot;</span>
                                      <span class="stringliteral">&quot; ID=\&quot;%s\&quot;\n&quot;</span>
                                      <span class="stringliteral">&quot; masterID=\&quot;%s\&quot;\n&quot;</span>
                                      <span class="stringliteral">&quot; valid=\&quot;%s\&quot;&quot;</span>
                                      <span class="stringliteral">&quot;/&gt;\n\n&quot;</span>,
                                      str_cred_id.c_str(),
                                      pSubkey-&gt;<a class="code" href="class_o_t_subcredential.html#a2a2f3e4e8cd23b764e54e96631b979ab">GetMasterCredID</a>().<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(),
                                      bSubcredValid ? <span class="stringliteral">&quot;true&quot;</span> : <span class="stringliteral">&quot;false&quot;</span>);
            <span class="keywordflow">else</span>
                strOutput.<a class="code" href="class_o_t_string.html#a86e54de385040ff6769d7f2149ce176b">Concatenate</a>(<span class="stringliteral">&quot;&lt;subCredential\n&quot;</span>
                                      <span class="stringliteral">&quot; ID=\&quot;%s\&quot;\n&quot;</span>
                                      <span class="stringliteral">&quot; masterID=\&quot;%s\&quot;\n&quot;</span>
                                      <span class="stringliteral">&quot; valid=\&quot;%s\&quot;&quot;</span>
                                      <span class="stringliteral">&quot;/&gt;\n\n&quot;</span>,
                                      str_cred_id.c_str(),
                                      pSub-&gt;<a class="code" href="class_o_t_subcredential.html#a2a2f3e4e8cd23b764e54e96631b979ab">GetMasterCredID</a>().<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(),
                                      bSubcredValid ? <span class="stringliteral">&quot;true&quot;</span> : <span class="stringliteral">&quot;false&quot;</span>);
            <span class="comment">// ------------------------------------------------</span>
            <span class="keywordflow">if</span> (NULL != pmapPubInfo) <span class="comment">// optional out-param.</span>
                pmapPubInfo-&gt;insert(std::pair&lt;std::string, std::string&gt;(str_cred_id.c_str(), pSub-&gt;<a class="code" href="class_o_t_subcredential.html#af10db6cd37a86780acbcc0bf1e6101a5">GetPubCredential</a>().<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>()));
            <span class="comment">// ------------------------------------------------</span>
            <span class="keywordflow">if</span> (NULL != pmapPriInfo) <span class="comment">// optional out-param.</span>
                pmapPriInfo-&gt;insert(std::pair&lt;std::string, std::string&gt;(str_cred_id.c_str(), pSub-&gt;<a class="code" href="class_o_t_subcredential.html#a7929248bc898a420b3b0be7b388f00f6">GetPriCredential</a>().<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>()));
            <span class="comment">// ------------------------------------------------</span>
        } <span class="comment">// if (bSubcredValid)</span>
    } <span class="comment">// FOR_EACH_CONST</span>
    <span class="comment">// -------------------------------------</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="a6307046ef1e16d486e19791d0b087dd4"></a><!-- doxytag: member="OTCredential::SetImportPassword" ref="a6307046ef1e16d486e19791d0b087dd4" args="(OTPassword *pImportPassword)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EXPORT void <a class="el" href="class_o_t_credential.html#a6307046ef1e16d486e19791d0b087dd4">OTCredential::SetImportPassword</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_o_t_password.html">OTPassword</a> *&#160;</td>
          <td class="paramname"><em>pImportPassword</em></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_credential_8hpp_source.html#l00248">248</a> of file <a class="el" href="_o_t_credential_8hpp_source.html">OTCredential.hpp</a>.</p>
<div class="fragment"><pre class="fragment">{ m_pImportPassword = pImportPassword; }
</pre></div>
</div>
</div>
<a class="anchor" id="abacd81f1c7aa266d65b0fc2153c1e6b5"></a><!-- doxytag: member="OTCredential::VerifyAgainstSource" ref="abacd81f1c7aa266d65b0fc2153c1e6b5" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_credential.html#abacd81f1c7aa266d65b0fc2153c1e6b5">OTCredential::VerifyAgainstSource</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_credential_8cpp_source.html#l00236">236</a> of file <a class="el" href="_o_t_credential_8cpp_source.html">OTCredential.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// * Any OTMasterkey must (at some point, and/or regularly) verify against its own source.</span>
    <span class="comment">//</span>
    <span class="keywordflow">if</span> (<span class="keyword">false</span> == m_Masterkey.<a class="code" href="class_o_t_masterkey.html#abdb9ddd5ec008585249cf2d3a36787d0">VerifyAgainstSource</a>())
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(1, <span class="stringliteral">&quot;%s: Failed verifying master credential against its own source.\n&quot;</span>, __FUNCTION__);
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// NOTE: This spot will have a significant delay, TODO OPTIMIZE. Performing a Freenet lookup, or DNS, etc,</span>
    <span class="comment">// will introduce delay inside the call VerifyAgainstSource. Therefore in the int64_t term, we must have a</span>
    <span class="comment">// separate server process which will verify identities for some specified period of time (specified in</span>
    <span class="comment">// their credentials I suppose...) That way, when we call VerifyAgainstSource, we are verifying against</span>
    <span class="comment">// some server-signed authorization, based on a lookup that some separate process did within the past</span>
    <span class="comment">// X allowed time, such that the lookup is still considered valid (without having to lookup every single</span>
    <span class="comment">// time, which is untenable.)</span>
    <span class="comment">// -------------------------------------</span>
    <span class="keywordflow">return</span> <span class="keyword">true</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac84a55bc3e33ba5088ddc1e60eb1bca8"></a><!-- doxytag: member="OTCredential::VerifyInternally" ref="ac84a55bc3e33ba5088ddc1e60eb1bca8" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_o_t_credential.html#ac84a55bc3e33ba5088ddc1e60eb1bca8">OTCredential::VerifyInternally</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_o_t_credential_8cpp_source.html#l00186">186</a> of file <a class="el" href="_o_t_credential_8cpp_source.html">OTCredential.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// --------------------------------------</span>
    <a class="code" href="class_o_t_identifier.html">OTIdentifier</a> theActualMasterCredID;
    theActualMasterCredID.<a class="code" href="class_o_t_identifier.html#ac50b356cf5d5d04c08eaf568d07bcc46">CalculateDigest</a>(m_Masterkey.<a class="code" href="class_o_t_subcredential.html#af10db6cd37a86780acbcc0bf1e6101a5">GetPubCredential</a>());
    <span class="keyword">const</span> <a class="code" href="class_o_t_string.html">OTString</a> strActualMasterCredID(theActualMasterCredID);
    <span class="comment">// --------------------------------------</span>
    <span class="keywordflow">if</span> (<span class="keyword">false</span> == m_strNymID.<a class="code" href="class_o_t_string.html#a03401b39fb66d63696342c4f61ea8bf5">Compare</a>(m_Masterkey.<a class="code" href="class_o_t_subcredential.html#a7d841c2d684d40d8e028c0a2eaff7b36">GetNymID</a>()))
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: NymID did not match its &quot;</span>
                       <span class="stringliteral">&quot;counterpart in m_Masterkey (failed to verify): %s\n&quot;</span>,
                       __FUNCTION__, this-&gt;<a class="code" href="class_o_t_credential.html#aba950a82684048857d26afd48b2a555c">GetNymID</a>().Get());
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// --------------------------------------</span>
    <span class="keywordflow">if</span> (<span class="keyword">false</span> == m_strMasterCredID.<a class="code" href="class_o_t_string.html#a03401b39fb66d63696342c4f61ea8bf5">Compare</a>(strActualMasterCredID))
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Master Credential ID did not match its &quot;</span>
                       <span class="stringliteral">&quot;counterpart in m_Masterkey:\nExpected Master Credential ID: %s\n &quot;</span>
                       <span class="stringliteral">&quot;Hash of m_Masterkey contents: %s\nContents:\n%s\n&quot;</span>,
                       __FUNCTION__, this-&gt;<a class="code" href="class_o_t_credential.html#a1e99eeeb4d701f2ea9b56a1201a57680">GetMasterCredID</a>().Get(), strActualMasterCredID.<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>(),
                       m_Masterkey.<a class="code" href="class_o_t_subcredential.html#af10db6cd37a86780acbcc0bf1e6101a5">GetPubCredential</a>().<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// --------------------------------------</span>
    <span class="keywordflow">if</span> (<span class="keyword">false</span> == const_cast&lt;OTMasterkey&amp;&gt;(m_Masterkey).VerifyContract())
    {
        <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Master Credential failed to verify: %s\nNymID: %s\n&quot;</span>,
                       __FUNCTION__, this-&gt;<a class="code" href="class_o_t_credential.html#a1e99eeeb4d701f2ea9b56a1201a57680">GetMasterCredID</a>().Get(), this-&gt;<a class="code" href="class_o_t_credential.html#aba950a82684048857d26afd48b2a555c">GetNymID</a>().Get());
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
    <span class="comment">// -------------------------------------</span>
    <a class="code" href="_o_t_storage_8hpp.html#a804eb881e96b7e1846d130a55a94f716">FOR_EACH_CONST</a>(<a class="code" href="_o_t_masterkey_8hpp.html#a54f329968b2bb6ec246c697a93f80159">mapOfSubcredentials</a>, m_mapSubcredentials)
    {
        std::string str_sub_id = (*it).first;
        <a class="code" href="class_o_t_subcredential.html">OTSubcredential</a> * pSub = (*it).second;
        <a class="code" href="_o_t_assert_8hpp.html#a74ecab0c6a7b0a9a546bb545160e23b3">OT_ASSERT</a>(NULL != pSub);
        <span class="comment">// ----------------------</span>
        <span class="keywordflow">if</span> (<span class="keyword">false</span> == pSub-&gt;<a class="code" href="class_o_t_subcredential.html#ab62e933c731796fd827cf63a8c718c65">VerifyContract</a>())
        {
            <a class="code" href="class_o_t_log.html#aa2a497c02879b811fe3134631d762f08">OTLog::vOutput</a>(0, <span class="stringliteral">&quot;%s: Subcredential failed to verify: %s\nNymID: %s\n&quot;</span>, __FUNCTION__,
                           str_sub_id.c_str(), this-&gt;<a class="code" href="class_o_t_credential.html#aba950a82684048857d26afd48b2a555c">GetNymID</a>().<a class="code" href="class_o_t_string.html#af87b3b43148de9b1425ed8e9348241d3">Get</a>());
            <span class="keywordflow">return</span> <span class="keyword">false</span>;
        }
    }
    <span class="comment">// -------------------------------------</span>
    <span class="keywordflow">return</span> <span class="keyword">true</span>;
}
</pre></div>
</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>include/otlib/<a class="el" href="_o_t_credential_8hpp_source.html">OTCredential.hpp</a></li>
<li>src/otlib/<a class="el" href="_o_t_credential_8cpp_source.html">OTCredential.cpp</a></li>
</ul>
</div><!-- contents -->
</div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="class_o_t_credential.html">OTCredential</a>      </li>

    <li class="footer">Generated on Wed May 21 2014 11:26:12 for Open-Transactions by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.6.1 </li>
   </ul>
 </div>


</body>
</html>
